!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("rome"),require("moment")):"function"==typeof define&&define.amd?define(["rome","moment"],t):e.MaterialDatetimePicker=t(e.rome,e.moment)}(this,function(a,s){"use strict";a="default"in a?a.default:a,s="default"in s?s.default:s;var c=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function a(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,i){return t&&a(e.prototype,t),i&&a(e,i),e}}(),n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},r=function(){function e(){c(this,e),this._events={"*":[]}}return t(e,[{key:"trigger",value:function(e,i){var a=this;return e.split(" ").forEach(function(t){a._events["*"].forEach(function(e){return e.fn.call(e.scope,t,i)}),a._events[t]&&a._events[t].forEach(function(e){e.fn.call(e.scope,i)})}),this}},{key:"on",value:function(e,t,i){return this._events[e]||(this._events[e]=[]),this._events[e].push({eventName:e,fn:t,scope:i||this}),this}},{key:"off",value:function(e,t){return this._events[e]&&(t||(this._events[e]=[]),this._events[e]=this._events[e].filter(function(e){return e.fn!==t})),this}},{key:"once",value:function(t,i,a){var c=this;return this.on(t,function e(){i.call(a,t,i,a),c.off(t,e)},a)}}]),e}(),d="c-datepicker",o=function(){return{default:s().startOf("hour"),styles:{scrim:"c-scrim",back:d+"__back",container:d+"__calendar",date:d+"__date",dayBody:d+"__days-body",dayBodyElem:d+"__day-body",dayConcealed:d+"__day--concealed",dayDisabled:d+"__day--disabled",dayHead:d+"__days-head",dayHeadElem:d+"__day-head",dayRow:d+"__days-row",dayTable:d+"__days",month:d+"__month",next:d+"__next",positioned:d+"--fixed",selectedDay:d+"__day--selected",selectedTime:d+"__time--selected",time:d+"__time",timeList:d+"__time-list",timeOption:d+"__time-option",clockNum:d+"__clock__num"},format:"DD/MM/YY",container:document.body,dateValidator:void 0}};function l(e,t){var i=document.createElement("div");return i.innerHTML=t.trim(),e.appendChild(i.firstChild),this}return function(e){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};c(this,i);var a=n(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),t=Object.assign(o().styles,e.styles);return a.options=Object.assign(o(),e),a.options.styles=t,a.on("*",function(e,t){if(a.options.el){var i=new CustomEvent(e,a,t);a.options.el.dispatchEvent(i)}}),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,r),t(i,[{key:"initializeRome",value:function(e,t){var i=this;return a(e,{styles:this.options.styles,time:!1,dateValidator:t,initialValue:this.value}).on("data",function(e){return i.set(e)})}},{key:"open",value:function(){var e='\n<div class="'+this.options.styles.scrim+'"></div>\n';l(document.body,e),l(this.options.container,'\n<div class="c-datepicker">\n  <input class="c-datepicker__toggle c-datepicker__toggle--right c-datepicker--show-time" type="radio" name="date-toggle" value="time" >\n\n  <input class="c-datepicker__toggle c-datepicker__toggle--left  c-datepicker--show-calendar" type="radio" name="date-toggle" value="calendar" checked>\n\n  <div class="c-datepicker__header">\n    <div class="c-datepicker__header-day">\n      <span class="js-day">Monday</span>\n    </div>\n    <div class="c-datepicker__header-date">\n      <span class="c-datepicker__header-date__month js-date-month"></span>\n      <span class="c-datepicker__header-date__day js-date-day"></span>\n      <span class="c-datepicker__header-date__time js-date-time">\n        <span class="c-datepicker__header-date__hours js-date-hours">09</span>:<span class="c-datepicker__header-date__minutes js-date-minutes">00</span>\n      </span>\n    </div>\n  </div>\n\n  <div class="c-datepicker__calendar"></div>\n  <div class="c-datepicker__clock">\n    <div class="c-datepicker__clock__am-pm-toggle">\n      <label class="c-datepicker__toggle--checked">\n        <input checked="checked" class="c-datepicker__toggle c-datepicker__toggle--right c-datepicker__clock--am" type="radio" name="time-date-toggle" value="AM" />\n        AM\n      </label>\n\n      <label>\n        <input class="c-datepicker__toggle c-datepicker__toggle--right c-datepicker__clock--pm" type="radio" name="time-date-toggle" value="PM" />\n        PM\n      </label>\n    </div>\n\n    <div class="c-datepicker__clock__hours">\n      <div class="c-datepicker__clock__num" data-number="3">3</div>\n      <div class="c-datepicker__clock__num" data-number="4">4</div>\n      <div class="c-datepicker__clock__num" data-number="5">5</div>\n      <div class="c-datepicker__clock__num" data-number="6">6</div>\n      <div class="c-datepicker__clock__num" data-number="7">7</div>\n      <div class="c-datepicker__clock__num" data-number="8">8</div>\n      <div class="c-datepicker__clock__num" data-number="9">9</div>\n      <div class="c-datepicker__clock__num" data-number="10">10</div>\n      <div class="c-datepicker__clock__num" data-number="11">11</div>\n      <div class="c-datepicker__clock__num" data-number="0">12</div>\n      <div class="c-datepicker__clock__num" data-number="1">1</div>\n      <div class="c-datepicker__clock__num" data-number="2">2</div>\n      <div class="c-datepicker__clock-hands">\n        <div class="c-datepicker__hour-hand"></div>\n      </div>\n    </div>\n    <div class="c-datepicker__clock__minutes">\n      <div class="c-datepicker__clock__num" data-number="15">15</div>\n      <div class="c-datepicker__clock__num" data-number="20">20</div>\n      <div class="c-datepicker__clock__num" data-number="25">25</div>\n      <div class="c-datepicker__clock__num" data-number="30">30</div>\n      <div class="c-datepicker__clock__num" data-number="35">35</div>\n      <div class="c-datepicker__clock__num" data-number="40">40</div>\n      <div class="c-datepicker__clock__num" data-number="45">45</div>\n      <div class="c-datepicker__clock__num" data-number="50">50</div>\n      <div class="c-datepicker__clock__num" data-number="55">55</div>\n      <div class="c-datepicker__clock__num" data-number="0">0</div>\n      <div class="c-datepicker__clock__num" data-number="5">5</div>\n      <div class="c-datepicker__clock__num" data-number="10">10</div>\n      <div class="c-datepicker__clock-hands">\n        <div class="c-datepicker__hour-hand"></div>\n      </div>\n    </div>\n  </div>\n  <div class="modal-btns">\n    <a class="c-btn c-btn--flat js-cancel">Cancel</a>\n    <a class="c-btn c-btn--flat js-ok">OK</a>\n  </div>\n</div>\n'),this.pickerEl=this.options.container.querySelector("."+d),this.scrimEl=document.body.querySelector("."+this.options.styles.scrim),this.amToggleEl=this.$(".c-datepicker__clock--am"),this.pmToggleEl=this.$(".c-datepicker__clock--pm"),this.value||(this.value=s(this.options.default)),this.setDate(this.value),this.initializeRome(this.$("."+this.options.styles.container),this.options.dateValidator),this._show()}},{key:"close",value:function(){this._hide()}},{key:"_hide",value:function(){var e=this;return this.pickerEl.classList.remove("open"),window.setTimeout(function(){e.options.container.removeChild(e.pickerEl),document.body.removeChild(e.scrimEl),e.trigger("close")},200),this}},{key:"_show",value:function(){var e=this;return this.delegateEvents(),window.requestAnimationFrame(function(){e.scrimEl.classList.add(e.options.styles.scrim+"--shown"),e.pickerEl.classList.add(d+"--open"),e.trigger("open")}),this}},{key:"delegateEvents",value:function(){var t=this;return this.$(".js-cancel").addEventListener("click",function(){return t.clickCancel()},!1),this.$(".js-ok").addEventListener("click",function(){return t.clickSubmit()},!1),this.$("."+this.options.styles.clockNum).forEach(function(e){e.addEventListener("click",function(e){return t.clickClock(e)},!1)}),this.$(".c-datepicker__clock--am").addEventListener("click",function(e){return t.clickAm(e)},!1),this.$(".c-datepicker__clock--pm").addEventListener("click",function(e){return t.clickPm(e)},!1),this}},{key:"clickSubmit",value:function(){return this.close(),this.trigger("submit",this.value,this),this}},{key:"clickCancel",value:function(){return this.close(),this.trigger("cancel",this.value,this),this}},{key:"clickClock",value:function(e){var t=parseInt(e.currentTarget.getAttribute("data-number"),10);return 0===t&&"pm"===this.meridiem?t=12:"pm"===this.meridiem&&(t+=12),this.value.hour(t),this.setTime(this.value),this}},{key:"clickAm",value:function(){return"pm"===this.meridiem&&(this.meridiem="am",this.value.hour(this.value.hour()-12)),this.setTime(this.value),this}},{key:"clickPm",value:function(){return"am"===this.meridiem&&(this.meridiem="pm",this.value.hour(this.value.hour()+12)),this.setTime(this.value),this}},{key:"data",value:function(e){return e?this.set(e):this.value}},{key:"set",value:function(e,t){var i=s(e),a=[];i.date()!==this.value.date()||i.month()!==this.value.month()||i.year()!==this.value.year()?(this.setDate(i),a.push("change:date")):(this.setTime(i),a.push("change:time")),this.options.el&&("INPUT"===this.options.el.tagName?this.options.el.value=i.format(this.options.format):this.options.el.setAttribute("data-value",i.format(this.options.format))),t&&t.silent||this.trigger(["change"].concat(a).join(" "),this.value,this)}},{key:"setDate",value:function(e){var t=s(e),i=t.format("MMM"),a=t.format("Do"),c=t.format("dddd"),n=t.format("YYYY");return this.$(".js-day").innerText=c,this.$(".js-date-month").innerText=i+" "+n,this.$(".js-date-day").innerText=a,this.value.year(t.year()),this.value.month(t.month()),this.value.date(t.date()),this}},{key:"setTime",value:function(e){var t=s(e),i=t.format("HH"),a=parseInt(i,10)%12;return this.$(".js-date-hours").innerText=i,this.$(".c-datepicker__clock__hours ."+this.options.styles.clockNum+'[data-number="'+a+'"]').classList.add("."+this.options.styles.clockNum+"--active"),this.value.hours(t.hours()),this.meridiem=this.value.format("a"),"pm"===this.meridiem?(this.amToggleEl.removeAttribute("checked"),this.pmToggleEl.setAttribute("checked","checked"),this.amToggleEl.parentElement.classList.remove("c-datepicker__toggle--checked"),this.pmToggleEl.parentElement.classList.add("c-datepicker__toggle--checked")):(this.pmToggleEl.removeAttribute("checked"),this.amToggleEl.setAttribute("checked","checked"),this.pmToggleEl.parentElement.classList.remove("c-datepicker__toggle--checked"),this.amToggleEl.parentElement.classList.add("c-datepicker__toggle--checked")),this}},{key:"$",value:function(e){var t=this.pickerEl.querySelectorAll(e);return 1<t.length?[].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(t)):t[0]}}]),i}()});