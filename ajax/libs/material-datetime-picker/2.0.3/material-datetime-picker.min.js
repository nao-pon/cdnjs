!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("rome"),require("moment")):"function"==typeof define&&define.amd?define(["rome","moment"],t):e.MaterialDatetimePicker=t(e.rome,e.moment)}(this,function(c,r){"use strict";c="default"in c?c.default:c,r="default"in r?r.default:r;var a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t=function(){function c(e,t){for(var i=0;i<t.length;i++){var c=t[i];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}return function(e,t,i){return t&&c(e.prototype,t),i&&c(e,i),e}}(),n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],c=!0,a=!1,n=void 0;try{for(var s,r=e[Symbol.iterator]();!(c=(s=r.next()).done)&&(i.push(s.value),!t||i.length!==t);c=!0);}catch(e){a=!0,n=e}finally{try{!c&&r.return&&r.return()}finally{if(a)throw n}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(){a(this,e),this._events={"*":[]}}return t(e,[{key:"trigger",value:function(e,i){var c=this;return e.split(" ").forEach(function(t){c._events["*"].forEach(function(e){return e.fn.call(e.scope,t,i)}),c._events[t]&&c._events[t].forEach(function(e){e.fn.call(e.scope,i)})}),this}},{key:"on",value:function(e,t,i){return this._events[e]||(this._events[e]=[]),this._events[e].push({eventName:e,fn:t,scope:i||this}),this}},{key:"off",value:function(e,t){return this._events[e]&&(t||(this._events[e]=[]),this._events[e]=this._events[e].filter(function(e){return e.fn!==t})),this}},{key:"once",value:function(t,i,c){var a=this;return this.on(t,function e(){i.call(c,t,i,c),a.off(t,e)},c)}}]),e}(),l="c-datepicker",d=function(){return{default:r().startOf("hour"),styles:{scrim:"c-scrim",back:l+"__back",container:l+"__calendar",date:l+"__date",dayBody:l+"__days-body",dayBodyElem:l+"__day-body",dayConcealed:l+"__day--concealed",dayDisabled:l+"__day--disabled",dayHead:l+"__days-head",dayHeadElem:l+"__day-head",dayRow:l+"__days-row",dayTable:l+"__days",month:l+"__month",next:l+"__next",positioned:l+"--fixed",selectedDay:l+"__day--selected",selectedTime:l+"__time--selected",time:l+"__time",timeList:l+"__time-list",timeOption:l+"__time-option",clockNum:l+"__clock__num"},format:"DD/MM/YY",container:document.body,dateValidator:void 0}};function u(e,t){var i=document.createElement("div");return i.innerHTML=t.trim(),e.appendChild(i.firstChild),this}return function(e){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};a(this,i);var c=n(this,(i.__proto__||Object.getPrototypeOf(i)).call(this)),t=Object.assign(d().styles,e.styles);return c.options=Object.assign(d(),e),c.options.styles=t,c.on("*",function(e,t){if(c.options.el){var i=new CustomEvent(e,c,t);c.options.el.dispatchEvent(i)}}),c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,s),t(i,[{key:"initializeRome",value:function(e,t){var i=this.onChangeDate.bind(this);return c(e,{styles:this.options.styles,time:!1,dateValidator:t,initialValue:this.value}).on("data",i)}},{key:"open",value:function(){var e='\n<div class="'+this.options.styles.scrim+'"></div>\n';u(document.body,e),u(this.options.container,'\n<div class="c-datepicker">\n  <a class="c-datepicker__toggle c-datepicker__toggle--right c-datepicker--show-time js-show-clock" title="show time picker">\n  </a>\n\n  <a class="c-datepicker__toggle c-datepicker__toggle--left c-datepicker--show-calendar is-selected js-show-calendar" title="show date picker">\n  </a>\n\n  <div class="c-datepicker__header">\n    <div class="c-datepicker__header-day">\n      <span class="js-day">Monday</span>\n    </div>\n    <div class="c-datepicker__header-date">\n      <span class="c-datepicker__header-date__month js-date-month"></span>\n      <span class="c-datepicker__header-date__day js-date-day"></span>\n      <span class="c-datepicker__header-date__time js-date-time">\n        <span class="c-datepicker__header-date__hours js-date-hours">09</span>:<span class="c-datepicker__header-date__minutes js-date-minutes">00</span>\n      </span>\n    </div>\n  </div>\n\n  <div class="c-datepicker__calendar"></div>\n  <div class="c-datepicker__clock">\n    <div class="c-datepicker__clock__am-pm-toggle">\n      <label class="c-datepicker__toggle--checked">\n        <input checked="checked" class="c-datepicker__toggle c-datepicker__toggle--right c-datepicker__clock--am" type="radio" name="time-date-toggle" value="AM" />\n        AM\n      </label>\n\n      <label>\n        <input class="c-datepicker__toggle c-datepicker__toggle--right c-datepicker__clock--pm" type="radio" name="time-date-toggle" value="PM" />\n        PM\n      </label>\n    </div>\n    <div class="c-datepicker__mask"></div>\n    <div class="c-datepicker__clock__hours">\n      <div class="c-datepicker__clock__num" data-number="3">3</div>\n      <div class="c-datepicker__clock__num" data-number="4">4</div>\n      <div class="c-datepicker__clock__num" data-number="5">5</div>\n      <div class="c-datepicker__clock__num" data-number="6">6</div>\n      <div class="c-datepicker__clock__num" data-number="7">7</div>\n      <div class="c-datepicker__clock__num" data-number="8">8</div>\n      <div class="c-datepicker__clock__num" data-number="9">9</div>\n      <div class="c-datepicker__clock__num" data-number="10">10</div>\n      <div class="c-datepicker__clock__num" data-number="11">11</div>\n      <div class="c-datepicker__clock__num" data-number="0">12</div>\n      <div class="c-datepicker__clock__num" data-number="1">1</div>\n      <div class="c-datepicker__clock__num" data-number="2">2</div>\n      <div class="c-datepicker__clock-hands">\n        <div class="c-datepicker__hour-hand"></div>\n      </div>\n    </div>\n    <div class="c-datepicker__clock__minutes">\n      <div class="c-datepicker__clock__num" data-number="15">15</div>\n      <div class="c-datepicker__clock__num" data-number="20">20</div>\n      <div class="c-datepicker__clock__num" data-number="25">25</div>\n      <div class="c-datepicker__clock__num" data-number="30">30</div>\n      <div class="c-datepicker__clock__num" data-number="35">35</div>\n      <div class="c-datepicker__clock__num" data-number="40">40</div>\n      <div class="c-datepicker__clock__num" data-number="45">45</div>\n      <div class="c-datepicker__clock__num" data-number="50">50</div>\n      <div class="c-datepicker__clock__num" data-number="55">55</div>\n      <div class="c-datepicker__clock__num" data-number="0">0</div>\n      <div class="c-datepicker__clock__num" data-number="5">5</div>\n      <div class="c-datepicker__clock__num" data-number="10">10</div>\n      <div class="c-datepicker__clock-hands">\n        <div class="c-datepicker__hour-hand"></div>\n      </div>\n    </div>\n  </div>\n  <div class="modal-btns">\n    <a class="c-btn c-btn--flat js-cancel">Cancel</a>\n    <a class="c-btn c-btn--flat js-ok">OK</a>\n  </div>\n</div>\n'),this.pickerEl=this.options.container.querySelector("."+l),this.scrimEl=document.body.querySelector("."+this.options.styles.scrim),this.amToggleEl=this.$(".c-datepicker__clock--am"),this.pmToggleEl=this.$(".c-datepicker__clock--pm"),this.value||(this.value=r(this.options.default)),this.setDate(this.value),this.setTime(this.value),this.initializeRome(this.$("."+this.options.styles.container),this.options.dateValidator),this._show()}},{key:"close",value:function(){this._hide()}},{key:"_hide",value:function(){var e=this;return this.pickerEl.classList.remove("open"),window.setTimeout(function(){e.options.container.removeChild(e.pickerEl),document.body.removeChild(e.scrimEl),e.trigger("close")},200),this}},{key:"_show",value:function(){var e=this;return this.delegateEvents(),window.requestAnimationFrame(function(){e.scrimEl.classList.add(e.options.styles.scrim+"--shown"),e.pickerEl.classList.add(l+"--open"),e.trigger("open")}),this}},{key:"delegateEvents",value:function(){var t=this;return this.$(".js-cancel").addEventListener("click",function(){return t.clickCancel()},!1),this.$(".js-ok").addEventListener("click",function(){return t.clickSubmit()},!1),this.$(".c-datepicker__clock__hours").addEventListener("mouseleave",function(e){return t.mouseOutClock(e)},!1),this.$("."+this.options.styles.clockNum).forEach(function(e){e.addEventListener("click",function(e){return t.clickClock(e)},!1),e.addEventListener("mouseenter",function(e){return t.mouseInClock(e)},!1)}),this.$(".c-datepicker__clock--am").addEventListener("click",function(e){return t.clickAm(e)},!1),this.$(".c-datepicker__clock--pm").addEventListener("click",function(e){return t.clickPm(e)},!1),this.$(".js-show-calendar").addEventListener("click",function(e){return t.clickShowCalendar(e)},!1),this.$(".js-show-clock").addEventListener("click",function(e){return t.clickShowClock(e)},!1),this}},{key:"clickSubmit",value:function(){return this.close(),this.trigger("submit",this.value,this),this}},{key:"clickCancel",value:function(){return this.close(),this.trigger("cancel",this.value,this),this}},{key:"clickClock",value:function(e){var t=r(this.value),i=parseInt(e.currentTarget.getAttribute("data-number"),10);return 0===i&&"pm"===this.meridiem?i=12:"pm"===this.meridiem&&(i+=12),t.hour(i),this.set(t),this}},{key:"onChangeDate",value:function(e){var t=r(this.value),i=e.split("-"),c=o(i,3),a=c[0],n=c[1],s=c[2];return t.set({year:a,month:n-1,date:s}),this.set(t),this}},{key:"mouseInClock",value:function(){var e=this.$(".c-datepicker__clock__hours ."+this.options.styles.clockNum+"--active");e&&e.classList.add("hide-hand")}},{key:"mouseOutClock",value:function(){var e=this.$(".c-datepicker__clock__hours ."+this.options.styles.clockNum+"--active.hide-hand");e&&e.classList.remove("hide-hand")}},{key:"clickAm",value:function(){var e=r(this.value);return"pm"===this.meridiem&&(this.meridiem="am",e.hour(e.hour()-12)),this.set(e),this}},{key:"clickPm",value:function(){var e=r(this.value);return"am"===this.meridiem&&(this.meridiem="pm",e.hour(e.hour()+12)),this.set(e),this}},{key:"clickShowCalendar",value:function(){this.$(".js-show-calendar").classList.add("is-selected"),this.$(".js-show-clock").classList.remove("is-selected")}},{key:"clickShowClock",value:function(){this.$(".js-show-clock").classList.add("is-selected"),this.$(".js-show-calendar").classList.remove("is-selected")}},{key:"data",value:function(e){return e?this.set(e):this.value}},{key:"set",value:function(e){var t=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).silent,i=void 0!==t&&t,c=r(e),a=[];c.date()!==this.value.date()||c.month()!==this.value.month()||c.year()!==this.value.year()?(this.setDate(c),a.push("change:date")):c.hour()===this.value.hour()&&c.minutes()===this.value.minutes()||(this.setTime(c),a.push("change:time")),this.options.el&&("INPUT"===this.options.el.tagName?this.options.el.value=c.format(this.options.format):this.options.el.setAttribute("data-value",c.format(this.options.format))),0<a.length&&!i&&this.trigger(["change"].concat(a).join(" "),this.value,this)}},{key:"setDate",value:function(e){var t=r(e),i=t.format("MMM"),c=t.format("Do"),a=t.format("dddd"),n=t.format("YYYY");return this.$(".js-day").innerText=a,this.$(".js-date-month").innerText=i+" "+n,this.$(".js-date-day").innerText=c,this.value.year(t.year()),this.value.month(t.month()),this.value.date(t.date()),this}},{key:"setTime",value:function(e){var t=r(e),i=t.format("HH"),c=parseInt(i,10)%12,a=this.$(".c-datepicker__clock__hours ."+this.options.styles.clockNum+"--active");return this.$(".js-date-hours").innerText=i,a&&a.classList.remove(this.options.styles.clockNum+"--active"),this.$(".c-datepicker__clock__hours ."+this.options.styles.clockNum+'[data-number="'+c+'"]').classList.add(this.options.styles.clockNum+"--active"),this.value.hours(t.hours()),this.meridiem=this.value.format("a"),"pm"===this.meridiem?(this.amToggleEl.removeAttribute("checked"),this.pmToggleEl.setAttribute("checked","checked"),this.amToggleEl.parentElement.classList.remove("c-datepicker__toggle--checked"),this.pmToggleEl.parentElement.classList.add("c-datepicker__toggle--checked")):(this.pmToggleEl.removeAttribute("checked"),this.amToggleEl.setAttribute("checked","checked"),this.pmToggleEl.parentElement.classList.remove("c-datepicker__toggle--checked"),this.amToggleEl.parentElement.classList.add("c-datepicker__toggle--checked")),this}},{key:"$",value:function(e){var t=this.pickerEl.querySelectorAll(e);return 1<t.length?[].concat(function(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}(t)):t[0]}}]),i}()});