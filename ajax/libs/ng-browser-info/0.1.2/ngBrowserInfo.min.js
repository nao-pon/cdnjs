/**
 * ngBrowserInfo v0.1.2
 *
 * Copyright 2014 Transferwise Ltd
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 *
 * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function(){"use strict";angular.module("ngBrowserInfo",[]);angular.module("ngBrowserInfo").service("browserInfo",["$window","$document",function(e,t){this.giveMeAllYouGot=function(){return{screenSize:this.getScreenSize(),windowSize:this.getWindowSize(),mobile:this.isMobile(),cookiesEnabled:this.areCookiesEnabled(),language:this.getLanguage(),os:this.getOSInfo(),browser:this.getBrowserInfo()}};this.getScreenSize=function(){return{width:screen.width,height:screen.height}};this.getWindowSize=function(){return{width:e.innerWidth,height:e.innerHeight}};this.isMobile=function(){return/Mobile|Android|iP(ad|od|hone)|Fennec|mini/.test(e.navigator.userAgent)};this.areCookiesEnabled=function(){var n=e.navigator.cookieEnabled;if(typeof n==="undefined"){t.cookie="test-cookie";return t.cookie.indexOf("test-cookie")!==-1}return n};this.getLanguage=function(){return navigator.language||navigator.userLanguage};this.getOSInfo=function(){var e=n();if(/Windows/.test(e)){return{name:"Windows",version:/Windows (.*)/.exec(e)[1]}}return{name:e,version:r(e)}};this.getBrowserInfo=function(){var t=e.navigator.userAgent;var n;if(/Opera/.test(t)){n=f()}else if(/MSIE/.test(t)){n=l()}else if(/Chrome/.test(t)){n=c()}else if(/Safari/.test(t)){n=h()}else if(/Firefox/.test(t)){n=p()}else if(/Trident\//.test(t)){n=d()}else{n=v()}n.version=g(n.version);return n};var n=function(){for(var t in a){if(a.hasOwnProperty(t)){var n=a[t];if(n.regex.test(e.navigator.userAgent)){return n.name}}}};var r=function(e){switch(e){case"Mac OS X":return i();case"Android":return s();case"iOS":return o();case"Ubuntu":return u()}};var i=function(){var t=/Mac OS X (10[\.\_\d]+)/.exec(e.navigator.userAgent);if(t){return t[1].replace(/_/g,".")}};var s=function(){var t=/Android ([\.\_\d]+)/.exec(e.navigator.userAgent);if(t){return t[1]}};var o=function(){var t=/OS (\d+)_(\d+)_?(\d+)?/.exec(e.navigator.appVersion);if(t){return t[1]+"."+t[2]}};var u=function(){var t=/Ubuntu\/([\.\_\d]+)/.exec(e.navigator.userAgent);if(t){return t[1]}};var a=[{name:"Windows 95",regex:/(Windows 95|Win95|Windows_95)/},{name:"Windows ME",regex:/(Win 9x 4.90|Windows ME)/},{name:"Windows 98",regex:/(Windows 98|Win98)/},{name:"Windows 2000",regex:/(Windows NT 5.0|Windows 2000)/},{name:"Windows XP",regex:/(Windows NT 5.1|Windows XP)/},{name:"Windows Server 2003",regex:/Windows NT 5.2/},{name:"Windows Vista",regex:/Windows NT 6.0/},{name:"Windows 7",regex:/(Windows 7|Windows NT 6.1)/},{name:"Windows 8.1",regex:/(Windows 8.1|Windows NT 6.3)/},{name:"Windows 8",regex:/(Windows 8|Windows NT 6.2)/},{name:"Windows NT 4.0",regex:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{name:"Windows ME",regex:/Windows ME/},{name:"Android",regex:/Android/},{name:"Open BSD",regex:/OpenBSD/},{name:"Free BSD",regex:/FreeBSD/},{name:"Sun OS",regex:/SunOS/},{name:"Ubuntu",regex:/Ubuntu/},{name:"Linux",regex:/(Linux|X11)/},{name:"iOS",regex:/(iPhone|iPad|iPod)/},{name:"Mac OS X",regex:/Mac OS X/},{name:"Mac OS",regex:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{name:"QNX",regex:/QNX/},{name:"UNIX",regex:/UNIX/},{name:"BeOS",regex:/BeOS/},{name:"OS/2",regex:/OS\/2/},{name:"Search Bot",regex:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];var f=function(){return{name:"Opera",version:e.navigator.userAgent.indexOf("Version")!==-1?m("Version",8):m("Opera",6)}};var l=function(){return{name:"Microsoft Internet Explorer",version:m("MSIE",5)}};var c=function(){return{name:"Chrome",version:m("Chrome",7)}};var h=function(){return{name:"Safari",version:e.navigator.userAgent.indexOf("Version")!==-1?m("Version",8):m("Safari",7)}};var p=function(){return{name:"Firefox",version:m("Firefox",8)}};var d=function(){return{name:"Microsoft Internet Explorer",version:e.navigator.userAgent.substring(e.navigator.userAgent.indexOf("rv:")+3)}};var v=function(){return{name:undefined,version:undefined}};var m=function(t,n){return e.navigator.userAgent.substring(e.navigator.userAgent.indexOf(t)+n)};var g=function(e){var t;if((t=e.indexOf(")"))!==-1){e=e.substring(0,t)}if((t=e.indexOf(";"))!==-1){e=e.substring(0,t)}if((t=e.indexOf(" "))!==-1){e=e.substring(0,t)}return e}}])})()