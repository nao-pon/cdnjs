!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./jquery.fmatter","./grid.common"],function(r){return t(r,e.document)}):"object"==typeof module&&module.exports?module.exports=function(e,r){return e||(e=window),void 0===r&&(r="undefined"!=typeof window?require("jquery"):require("jquery")(e)),require("./grid.base"),require("./jquery.fmatter"),require("./grid.common"),t(r,e.document),r}:t(jQuery,e.document)}("undefined"!=typeof window?window:this,function(e,t){"use strict";var r=e.jgrid,i=r.jqID,a=e.fn.jqGrid,o=a.getGuiStyles,s=a.getGridRes;r.extend({getColProp:function(e){var t,r=this[0];return null!=r&&r.grid&&void 0!==(t=r.p.iColByName[e])?r.p.colModel[t]:{}},setColProp:function(t,r){return this.each(function(){var i,a=this.p;this.grid&&null!=a&&r&&void 0!==(i=a.iColByName[t])&&e.extend(!0,a.colModel[i],r)})},sortGrid:function(e,t,r){return this.each(function(){var a,o,s,l=this.grid,n=this.p,d=n.colModel,c=d.length,h=!1;if(l)for(e||(e=n.sortname),"boolean"!=typeof t&&(t=!1),o=0;o<c;o++)if((a=d[o]).index===e||a.name===e){!0===n.frozenColumns&&!0===a.frozen&&(h=l.fhDiv.find("#"+i(n.id+"_"+e))),h&&0!==h.length||(h=l.headers[o].el),("boolean"!=typeof(s=a.sortable)||s)&&this.sortData(a.index||a.name,o,t,r,h);break}})},clearBeforeUnload:function(){return this.each(function(){var i,a=this.p,o=this.grid,s=r.clearArray,l=Object.prototype.hasOwnProperty;e.isFunction(o.emptyRows)&&o.emptyRows.call(this,!0,!0),e(t).off("mousemove.jqGrid mouseup.jqGrid"+a.id),e(this).off();var n,d=o.headers.length;for(n=0;n<d;n++)o.headers[n].el=null;for(i in o)o.hasOwnProperty(i)&&(o.propOrMethod=null);var c=["formatCol","sortData","updatepager","refreshIndex","setHeadCheckBox","constructTr","clearToolbar","fixScrollOffsetAndhBoxPadding","rebuildRowIndexes","modalAlert","toggleToolbar","triggerToolbar","formatter","addXmlData","addJSONData","ftoolbar","_inlinenav","nav","grid","p"];for(d=c.length,n=0;n<d;n++)l.call(this,c[n])&&(this[c[n]]=null);this._index={},s(a.data),s(a.lastSelectedData),s(a.selarrrow),s(a.savedRow),a.editingInfo={}})},GridDestroy:function(){return this.each(function(){var t=this.p;if(this.grid&&null!=t){t.pager&&e(t.pager).remove();try{e("#alertmod_"+i(t.id)).remove(),e(this).jqGrid("clearBeforeUnload"),e(t.gBox).remove()}catch(e){}}})},GridUnload:function(){return this.each(function(){var t=e(this),r=this.p,i=e.fn.jqGrid;this.grid&&(t.removeClass(i.getGuiStyles.call(t,"grid","ui-jqgrid-btable")),r.pager&&(r.pager.substr(1,e.jgrid.uidPref.length)===e.jgrid.uidPref?e(r.pager).remove():e(r.pager).empty().removeClass(i.getGuiStyles.call(t,"pager.pager","ui-jqgrid-pager "+i.getGuiStyles.call(t,"bottom"))).removeAttr("style").removeAttr("dir")),t.jqGrid("clearBeforeUnload"),t.removeAttr("style").removeAttr("tabindex").removeAttr("role").removeAttr("aria-labelledby").removeAttr("style"),t.empty(),t.insertBefore(r.gBox).show(),e(r.pager).insertBefore(r.gBox).show(),e(r.gBox).remove())})},setGridState:function(t){return this.each(function(){var r=this,i=r.p,o=r.grid,s=o.cDiv,l=e(o.uDiv),n=e(o.ubDiv);if(o&&null!=i){var d=function(e){return a.getIconRes.call(r,"gridMinimize."+e)},c=d("visible"),h=d("hidden");"hidden"===t?(e(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv",i.gView).slideUp("fast"),i.pager&&e(i.pager).slideUp("fast"),i.toppager&&e(i.toppager).slideUp("fast"),!0===i.toolbar[0]&&("both"===i.toolbar[1]&&n.slideUp("fast"),l.slideUp("fast")),i.footerrow&&e(".ui-jqgrid-sdiv",i.gBox).slideUp("fast"),e(".ui-jqgrid-titlebar-close span",s).removeClass(c).addClass(h),i.gridstate="hidden"):"visible"===t&&(e(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv",i.gView).slideDown("fast"),i.pager&&e(i.pager).slideDown("fast"),i.toppager&&e(i.toppager).slideDown("fast"),!0===i.toolbar[0]&&("both"===i.toolbar[1]&&n.slideDown("fast"),l.slideDown("fast")),i.footerrow&&e(".ui-jqgrid-sdiv",i.gBox).slideDown("fast"),e(".ui-jqgrid-titlebar-close span",s).removeClass(h).addClass(c),i.gridstate="visible")}})},filterToolbar:function(a){return this.each(function(){var l=this,n=l.grid,d=e(l),c=l.p,h=r.info_dialog,u=r.htmlEncode;if(!this.ftoolbar){var p,f=e.extend(!0,{autosearch:!0,autosearchDelay:500,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:c.prmNames.filters,stringResult:!1,groupOp:"AND",defaultSearch:"bw",idMode:"new",searchOperators:!1,resetIcon:"&times;",applyLabelClasses:!0,loadFilterDefaults:!0,operands:{eq:"==",ne:"!",lt:"<",le:"<=",gt:">",ge:">=",bw:"^",bn:"!^",in:"=",ni:"!=",ew:"|",en:"!@",cn:"~",nc:"!~",nu:"#",nn:"!#"}},r.search,c.searching||{},a||{}),m=c.colModel,g=function(e){return s.call(d,e)},v=g("errors.errcap"),b=g("edit.bClose"),y=g("edit.msg"),w=o.call(l,"states.hover"),C=o.call(l,"states.select"),q=o.call(l,"filterToolbar.dataField"),j={},D=function(e){var t="gs_";switch(f.idMode){case"compatibility":t+=c.idPrefix;break;case"new":t+=c.id+"_"}return t+e},x=function(e){return"#"+i(D(e))},G=function(e){var t=(e.value||"").split(":");return{on:t[0]||"on",off:t[1]||"off"}},S=function(t){var r,i,a,o,s,l,n=c.postData[f.sFilter],d={},h=c.iColByName;if(t)for(i=0;i<m.length;i++)!1!==(s=m[i]).search&&(l=s.searchoptions||{},d[s.name]={op:l.sopt?l.sopt[0]:"select"===s.stype||"checkbox"===s.stype?"eq":f.defaultSearch,data:void 0!==l.defaultValue?l.defaultValue:""});if(!n||!c.search)return d;if("string"==typeof n)try{n=e.parseJSON(n)}catch(e){n={}}else n=n||{};if(a=n.rules||{},null==n||null!=n.groupOp&&null!=f.groupOp&&n.groupOp.toUpperCase()!==f.groupOp.toUpperCase()||null==a||0===a.length||null!=n.groups&&n.groups.length>0)return d;for(i=0;i<a.length;i++)for(s=m[h[(o=a[i]).field]],r=0;r<m.length;r++)if(((s=m[r]).index||s.name)===o.field&&!1!==s.search){if((l=s.searchoptions||{}).sopt){if(e.inArray(o.op,l.sopt)<0)continue}else if("select"===s.stype||"checkbox"===s.stype){if("eq"!==o.op)continue}else if(o.op!==f.defaultSearch)continue;d[s.name]={op:o.op,data:o.data}}return d},z=function(e,t){switch(t){case 1:e.data("state",1).prop({checked:!0,indeterminate:!1});break;case 0:e.data("state",0).prop({checked:!1,indeterminate:!1});break;default:e.data("state",-1).prop({checked:!1,indeterminate:!0})}},F=function(){var t={},r=0,i={};e.each(m,function(){var a,o,s=this,d=s.index||s.name,h=s.searchoptions||{},u=e(x(s.name),!0===s.frozen&&!0===c.frozenColumns?n.fhDiv:n.hDiv),p=function(e,t){var r=s.formatoptions||{};return void 0!==r[e]?r[e]:g("formatter."+(t||s.formatter)+"."+e)},m=function(e){var t=p("thousandsSeparator").replace(/([\.\*\_\'\(\)\{\}\+\?\\])/g,"\\$1");return e.replace(new RegExp(t,"g"),"")};if(o=f.searchOperators?u.parent().prev().children("a").data("soper")||f.defaultSearch:h.sopt?h.sopt[0]:"select"===s.stype||"checkbox"===s.stype?"eq":f.defaultSearch,"custom"===s.stype&&e.isFunction(h.custom_value)&&u.length>0&&"SPAN"===u[0].nodeName.toUpperCase())a=h.custom_value.call(l,u.children(".customelement").first(),"get");else if("select"===s.stype)a=u.prop("multiple")?null==(a=u.val())||0===a.length?"":a.join(c.inFilterSeparator||","):u.val();else if("checkbox"===s.stype){var v=G(h);switch(u.data("state")){case-1:a="";break;case 0:a=v.off;break;default:a=v.on}}else switch(a=e.trim(u.val()),s.formatter){case"integer":""!==(a=m(a).replace(p("decimalSeparator","number"),"."))&&(a=String(parseInt(a,10)));break;case"number":""!==(a=m(a).replace(p("decimalSeparator"),"."))&&"0"===String(a).charAt(0)&&(a=String(parseFloat(a)));break;case"currency":var b=p("prefix"),y=p("suffix");b&&b.length&&a.substr(0,b.length)===b&&(a=a.substr(b.length)),y&&y.length&&a.length>y.length&&a.substr(a.length-y.length,y.length)===y&&(a=a.substr(0,a.length-y.length)),""!==(a=m(a).replace(p("decimalSeparator"),"."))&&(a=String(parseFloat(a)))}if(a||"nu"===o||"nn"===o||e.inArray(o,c.customUnaryOperations)>=0)t[d]=a,i[d]=o,r++;else if(t.hasOwnProperty(d)&&delete t[d],!f.stringResult&&!f.searchOperators&&"local"!==c.datatype)try{null!=c.postData&&c.postData.hasOwnProperty(d)&&delete c.postData[d]}catch(e){}});var a=r>0;if(f.stringResult||f.searchOperators||"local"===c.datatype){var o='{"groupOp":"'+f.groupOp+'","rules":[',s=0;e.each(t,function(e,t){s>0&&(o+=","),o+='{"field":"'+e+'",',o+='"op":"'+i[e]+'",',o+='"data":"'+(t+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',s++}),o+="]}",c.postData[f.sFilter]=o,e.each([f.sField,f.sValue,f.sOper],function(e,t){c.postData.hasOwnProperty(t)&&delete c.postData[t]})}else e.extend(c.postData,t);var h;c.searchurl&&(h=c.url,d.jqGrid("setGridParam",{url:c.searchurl}));var u="stop"===d.triggerHandler("jqGridToolbarBeforeSearch");!u&&e.isFunction(f.beforeSearch)&&(u=f.beforeSearch.call(l)),u||d.jqGrid("setGridParam",{search:a}).trigger("reloadGrid",[e.extend({page:1},f.reloadGridSearchOptions||{})]),h&&d.jqGrid("setGridParam",{url:h}),d.triggerHandler("jqGridToolbarAfterSearch"),e.isFunction(f.afterSearch)&&f.afterSearch.call(l)},O=g("search.odata")||[],T=c.customSortOperations,k=[],_=e("<tr></tr>",{class:"ui-search-toolbar",role:"row form"});f.loadFilterDefaults&&(j=S()||{}),e.each(m,function(i){var a,s,n,u,m,C,x,G=this.searchoptions||{},S=this.editoptions||{},R=e("<th></th>",{class:o.call(l,"colHeaders","ui-th-column ui-th-"+c.direction+" "+(f.applyLabelClasses?this.labelClasses||"":"")),role:"gridcell","aria-describedby":c.id+"_"+this.name}),I=e("<div></div>"),V=e("<table class='ui-search-table'><tbody><tr><td class='ui-search-oper'></td><td class='ui-search-input'></td><td class='ui-search-clear' style='width:1px'></td></tr></tbody></table>"),H=V.children("tbody").children("tr").children("td"),A=H.eq(0),B=H.eq(1),M=H.eq(2);if(!0===this.hidden&&R.css("display","none"),this.search=!1!==this.search,void 0===this.stype&&(this.stype="text"),a=e.extend({mode:"filter",name:this.name,cm:this,iCol:i,id:D(this.name)},G),this.search){if(f.searchOperators){for(u=c.search&&null!=j[this.name]?j[this.name].op:a.sopt?a.sopt[0]:"select"===this.stype||"checkbox"===this.stype?"eq":f.defaultSearch,m=0;m<O.length;m++)if(O[m].oper===u){n=f.operands[u]||"";break}if(void 0===n&&null!=T){var P;for(P in T)if(T.hasOwnProperty(P)&&P===u){n=T[P].operand;break}}void 0===n&&(n="="),A.append("<a title='"+(null!=a.searchtitle?a.searchtitle:g("search.operandTitle"))+"' data-soper='"+u+"' class='"+o.call(l,"searchToolbar.operButton","soptclass")+"' data-colname='"+this.name+"'>"+n+"</a>")}if(A.data("colindex",i),null!=a.sopt&&1!==a.sopt.length||A.hide(),c.search&&null!=j[this.name]&&(a.defaultValue=j[this.name].data),void 0===a.clearSearch&&(a.clearSearch="text"===this.stype),a.clearSearch){var N=e.isFunction(f.resetTitle)?f.resetTitle.call(l,{options:f,cm:this,cmName:this.name,iCol:i}):(g("search.resetTitle")||"Clear Search Value")+" "+r.stripHtml(c.colNames[i]);M.append("<a title='"+N+"' aria-label='"+N+"' class='"+o.call(l,"searchToolbar.clearButton","clearsearchclass")+"'><span>"+f.resetIcon+"</span></a>")}else M.hide();switch(I.append(V),this.stype){case"checkbox":var E=void 0!==a.defaultValue?a.defaultValue:"-1";x=e("<input role='search' type='checkbox' class='"+q+"' name='"+(this.index||this.name)+"' id='"+D(this.name)+"' aria-labelledby='jqgh_"+c.id+"_"+this.name+"' data-state='"+E+"'/>"),"-1"===E?x.prop("indeterminate",!0):"1"===E&&x.prop("checked",!0),x.click(function(){var t=e(this);switch(t.data("state")){case-1:z(t,1);break;case 0:z(t,-1);break;default:z(t,0)}!0===f.autosearch&&F()}),B.append(x),a.attr&&x.attr(a.attr),k.push({elem:x[0],options:a});break;case"select":if(s=this.surl||a.dataUrl)e.ajax(e.extend({url:s,context:{$tdInput:B,options:a,cm:this,iCol:i},dataType:"html",success:function(i,o,s){var n,d,c,h=this.cm,u=this.iCol,p=this.options,m=this.$tdInput;void 0!==p.buildSelect?(n=p.buildSelect.call(l,i,s,h,u))&&m.append(n):m.append(i),(c=m.children("select")).attr({name:h.index||h.name,id:D(h.name)}),p.attr&&c.attr(p.attr),c.addClass(q),c.css({width:"100%"}),0===c.find("option[value='']").length&&"string"==typeof a.noFilterText&&((d=t.createElement("option")).value="",d.innerHTML=a.noFilterText,c.prepend(d),null!=e(c[0].options[c[0].selectedIndex]).attr("selected")||c[0].multiple||(c[0].selectedIndex=0)),c[0].multiple&&0===c.find("option[selected]").length&&-1!==c[0].selectedIndex&&(c[0].options[c[0].selectedIndex].selected=!1),void 0!==p.defaultValue&&c.val(p.defaultValue),r.bindEv.call(l,c[0],p),r.fullBoolFeedback.call(l,p.selectFilled,"jqGridSelectFilled",{elem:c[0],options:p,cm:h,cmName:h.name,iCol:u,mode:"filter"}),!0===f.autosearch&&c.change(function(){return F(),!1})}},r.ajaxOptions,c.ajaxSelectOptions||{}));else{var U,L,W;if(this.searchoptions?(U=void 0===G.value?S.value||"":G.value,L=void 0===G.separator?S.separator||":":G.separator,W=void 0===G.delimiter?S.delimiter||";":G.delimiter):this.editoptions&&(U=void 0===S.value?"":S.value,L=void 0===S.separator?":":S.separator,W=void 0===S.delimiter?";":S.delimiter),G.generateValue&&null!=c.indexByColumnData[this.name]&&(U=l.generateValueFromColumnIndex(this.name,L,W)),U){(C=t.createElement("select")).style.width="100%",x=e(C).attr({name:this.index||this.name,role:"search",id:D(this.name),"aria-describedby":c.id+"_"+this.name}),a.attr&&x.attr(a.attr);if(!r.fillSelectOptions(C,U,L,W,null!=a.attr&&a.attr.multiple)&&"string"==typeof a.noFilterText){var $=t.createElement("option");$.value="",$.innerHTML=a.noFilterText,$.selected=!0,x.prepend($)}void 0!==a.defaultValue&&x.val(a.defaultValue),x.addClass(q),k.push({elem:C,options:a}),B.append(C),r.fullBoolFeedback.call(l,a.selectFilled,"jqGridSelectFilled",{elem:C,options:this.searchoptions||S,cm:this,cmName:this.name,iCol:i,mode:"filter"}),!0===f.autosearch&&x.change(function(){return F(),!1})}}break;case"text":if(x=e("<input role='search' type='text' class='"+q+"' name='"+(this.index||this.name)+"' id='"+D(this.name)+"' aria-labelledby='jqgh_"+c.id+"_"+this.name+"' value='"+(void 0!==a.defaultValue?a.defaultValue:"")+"'/>"),B.append(x),this.createColumnIndex&&a.generateDatalist){var J="dl_"+D(this.name),Q=d.jqGrid("generateDatalistFromColumnIndex",this.name);null!=Q&&Q.length>0&&(x.attr("list",J),B.append(Q.attr("id",J)))}a.attr&&x.attr(a.attr),k.push({elem:x[0],options:a}),!0===f.autosearch&&(f.searchOnEnter?x.keypress(function(e){return 13===(e.charCode||e.keyCode||0)?(F(),!1):this}):x.keydown(function(e){switch(e.which){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:p&&clearTimeout(p),p=setTimeout(function(){F()},f.autosearchDelay)}}));break;case"custom":B.append("<span style='width:100%;padding:0;box-sizing:border-box;' name='"+(this.index||this.name)+"' id='"+D(this.name)+"'/>");try{if(!e.isFunction(a.custom_element))throw"e1";var X=a.custom_element.call(l,void 0!==a.defaultValue?a.defaultValue:"",a);if(!X)throw"e2";X=e(X).addClass("customelement"),I.find("span[name='"+(this.index||this.name)+"']").append(X)}catch(e){"e1"===e&&h.call(l,v,"function 'custom_element' "+y.nodefined,b),"e2"===e?h.call(l,v,"function 'custom_element' "+y.novalue,b):h.call(l,v,"string"==typeof e?e:e.message,b)}}}R.append(I),R.find(".ui-search-oper .soptclass,.ui-search-clear .clearsearchclass").hover(function(){e(this).addClass(w)},function(){e(this).removeClass(w)}),_.append(R),f.searchOperators||A.hide()}),e(n.hDiv).find(">div>.ui-jqgrid-htable>thead").append(_),e.each(k,function(){r.bindEv.call(l,this.elem,this.options)}),f.searchOperators&&(e(".soptclass",_).click(function(t){var r=e(this).offset();!function(t,r,i){e("#sopt_menu").remove(),r=parseInt(r,10),i=parseInt(i,10)+18;var a,s,n=0,h=[],p=e(t).data("soper"),g=e(t).data("colname"),v=e(".ui-jqgrid-view").css("font-size")||"11px",b="<ul id='sopt_menu' class='"+o.call(l,"searchToolbar.menu","ui-search-menu")+"' role='menu' tabindex='0' style='z-index:9999;display:block;font-size:"+v+";left:"+r+"px;top:"+i+"px;'>";if(void 0!==(n=c.iColByName[g])){var y,q,j,D,x,G=m[n],S=e.extend({},G.searchoptions);for(S.sopt||(S.sopt=[],S.sopt[0]="select"===G.stype||"checkbox"===G.stype?"eq":f.defaultSearch),e.each(O,function(){h.push(this.oper)}),null!=T&&e.each(T,function(e){h.push(e)}),n=0;n<S.sopt.length;n++)j=S.sopt[n],-1!==(s=e.inArray(j,h))&&(void 0!==(y=O[s])?(D=f.operands[j],x=y.text):null!=T&&(D=(q=T[j]).operand,x=q.text),a=p===j?C:"",b+='<li class="'+o.call(l,"searchToolbar.menuItem","ui-jqgrid-menu-item "+a)+'" role="presentation"><a class="'+o.call(l,"searchToolbar.menuItemButton","g-menu-item")+'" tabindex="0" role="menuitem" value="'+u(j)+'" data-oper="'+u(D)+'"><table><tr><td style="width:25px">'+u(D)+"</td><td>"+u(x)+"</td></tr></table></a></li>");b+="</ul>",e("body").append(b),e("#sopt_menu > li > a").hover(function(){e(this).addClass(w)},function(){e(this).removeClass(w)}).click(function(){var r=e(this).attr("value"),i=e(this).data("oper");if(d.triggerHandler("jqGridToolbarSelectOper",[r,i,t]),e("#sopt_menu").hide(),e(t).data("soper",r).text(i),!0===f.autosearch){var a=e(t).parent().next().children()[0];(e(a).val()||"nu"===r||"nn"===r||e.inArray(r,c.customUnaryOperations)>=0)&&F()}})}}(this,r.left,r.top),t.stopPropagation()}),e("body").on("click",function(t){"soptclass"!==t.target.className&&e("#sopt_menu").hide()})),e(".clearsearchclass",_).click(function(){var t,r,i=e(this).closest(".ui-search-clear"),a=i.siblings(".ui-search-oper"),o=a.children("a"),s=o.data("soper"),l=parseInt(a.data("colindex"),10),n=i.siblings(".ui-search-input"),d=m[l],h=e.extend({},d.searchoptions||{}),u=h.defaultValue||"";switch(d.stype){case"select":u?n.find("select").val(u):n.find("select")[0].selectedIndex=0;break;case"checkbox":z(n.find("input[type=checkbox]"),-1);break;default:n.find("input").val(u)}("nu"===s||"nn"===s||e.inArray(s,c.customUnaryOperations)>=0)&&(t=h.sopt?h.sopt[0]:"select"===d.stype||"checkbox"===d.stype?"eq":f.defaultSearch,r=null!=T&&null!=T[t]?T[t].operand:f.operands[t]||"",o.data("soper",t).text(r)),!0===f.autosearch&&F()}),l.ftoolbar=!0,l.triggerToolbar=F,l.clearToolbar=function(t){var r,i={},a=0;t="boolean"!=typeof t||t,e.each(m,function(){var t,o,s=e(x(this.name),!0===this.frozen&&!0===c.frozenColumns?n.fhDiv:n.hDiv),d=this.searchoptions||{};switch(void 0!==d.defaultValue&&(t=d.defaultValue),r=this.index||this.name,this.stype){case"checkbox":z(s,-1);break;case"select":if(o=!(s.length>0&&s[0].multiple),s.find("option").each(function(r){if(this.selected=0===r&&o,e(this).val()===t)return this.selected=!0,!1}),void 0!==t)i[r]=t,a++;else try{delete c.postData[r]}catch(e){}break;case"text":if(s.val(t||""),void 0!==t)i[r]=t,a++;else try{delete c.postData[r]}catch(e){}break;case"custom":e.isFunction(d.custom_value)&&s.length>0&&"SPAN"===s[0].nodeName.toUpperCase()&&(void 0===t&&(t=""),d.custom_value.call(l,s.children(".customelement").first(),"set",t))}});var o=a>0;if(c.resetsearch=!0,f.stringResult||f.searchOperators||"local"===c.datatype){var s='{"groupOp":"'+f.groupOp+'","rules":[',h=0;e.each(i,function(e,t){h>0&&(s+=","),s+='{"field":"'+e+'",',s+='"op":"eq",',s+='"data":"'+(t+="").replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',h++}),s+="]}",c.postData[f.sFilter]=s,e.each([f.sField,f.sValue,f.sOper],function(e,t){c.postData.hasOwnProperty(t)&&delete c.postData[t]})}else e.extend(c.postData,i);var u;c.searchurl&&(u=c.url,d.jqGrid("setGridParam",{url:c.searchurl}));var p="stop"===d.triggerHandler("jqGridToolbarBeforeClear");!p&&e.isFunction(f.beforeClear)&&(p=f.beforeClear.call(l)),p||t&&d.jqGrid("setGridParam",{search:o}).trigger("reloadGrid",[e.extend({page:1},f.reloadGridResetOptions||{})]),u&&d.jqGrid("setGridParam",{url:u}),d.triggerHandler("jqGridToolbarAfterClear"),e.isFunction(f.afterClear)&&f.afterClear.call(l)},l.toggleToolbar=function(){var t=e("tr.ui-search-toolbar",n.hDiv),r=!0===c.frozenColumns&&e("tr.ui-search-toolbar",n.fhDiv);"none"===t.css("display")?(t.show(),r&&r.show()):(t.hide(),r&&r.hide()),!0===c.frozenColumns&&(d.jqGrid("destroyFrozenColumns"),d.jqGrid("setFrozenColumns"))},!0===c.frozenColumns&&(d.jqGrid("destroyFrozenColumns"),d.jqGrid("setFrozenColumns")),d.on("jqGridRefreshFilterValues.filterToolbar"+(f.loadFilterDefaults?" jqGridAfterLoadComplete.filterToolbar":""),function(){var t,r,i,a,o,s,n,d=S(!0)||{};if(f.stringResult||f.searchOperators||"local"===c.datatype||!c.search){for(t in d)if(d.hasOwnProperty(t)&&(r=d[t],s=(i=e(x(t))).closest("th.ui-th-column"),i.length>0&&s.length>0)){if(n=(c.colModel[s[0].cellIndex]||{}).searchoptions||{},"SELECT"===i[0].tagName.toUpperCase()&&i[0].multiple)i.val(r.data.split(c.inFilterSeparator||","));else if(i.is("input[type=checkbox]")){var h=G(n);z(i,r.data===h.on?1:r.data===h.off?0:-1)}else if(i.find(".customelement").length>0&&e.isFunction(n.custom_value)){var u=n.custom_value.call(l,i.find(".customelement").first(),"get");""===r.data&&void 0!==n.defaultValue&&(r.data=n.defaultValue),void 0===u&&(u=""),r.data!==u&&String(r.data)!==String(u)&&n.custom_value.call(l,i.find(".customelement").first(),"set",r.data)}else""===r.data&&void 0!==n.defaultValue&&(r.data=n.defaultValue),e.trim(i.val())!==String(r.data)&&i.val(r.data);(a=i.closest(".ui-search-input").siblings(".ui-search-oper").children(".soptclass")).data("soper",r.op),a.text(f.operands[r.op]||(c.customSortOperations[r.op]||{}).operand)}for(o=0;o<c.colModel.length;o++)t=c.colModel[o].name,d.hasOwnProperty(t)||e(x(t)).val("")}})}})},destroyFilterToolbar:function(){return this.each(function(){this.ftoolbar&&(this.triggerToolbar=null,this.clearToolbar=null,this.toggleToolbar=null,this.ftoolbar=!1,e(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove(),!0===this.p.frozenColumns&&e(this).jqGrid("destroyFrozenColumns").jqGrid("setFrozenColumns"))})},destroyGroupHeader:function(t){return void 0===t&&(t=!0),this.each(function(){var r,i,a,o,s,l=this.grid,n=this.p.colModel,d=e("table.ui-jqgrid-htable thead",l.hDiv);if(l){e(this).off(".setGroupHeaders");var c=e("<tr>",{role:"row"}).addClass("ui-jqgrid-labels"),h=l.headers;for(r=0,i=h.length;r<i;r++){s=n[r].hidden?"none":"",a=e(h[r].el).width(h[r].width).css("display",s);try{a.removeAttr("rowSpan")}catch(e){a.attr("rowSpan",1)}c.append(a),(o=a.children("span.ui-jqgrid-resize")).length>0&&(o[0].style.height=""),a.children("div")[0].style.top=""}e(d).children("tr.ui-jqgrid-labels").remove(),e(d).prepend(c),!0===t&&e(this).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(t){return t=e.extend({useColSpanStyle:!1,applyLabelClasses:!0,groupHeaders:[]},t||{}),this.each(function(){this.p.groupHeader=t;var i,a,s,l,n,d,c,h,u,p,f,m,g,v,b=0,y=this.p,w=y.colModel,C=w.length,q=this.grid.headers,j=e("table.ui-jqgrid-htable",this.grid.hDiv),D=r.isCellClassHidden,x=j.children("thead").children("tr.ui-jqgrid-labels"),G=x.last().addClass("jqg-second-row-header"),S=j.children("thead"),z=j.find(".jqg-first-row-header");void 0===z[0]?z=e("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):z.empty();var F=function(e,t){var r;for(r=0;r<t.length;r++)if(t[r].startColumnName===e)return t[r];return 0};for(e(this).prepend(S),s=e("<tr>",{role:"row"}).addClass("ui-jqgrid-labels jqg-third-row-header"),i=0;i<C;i++)if(n=q[i].el,d=e(n),a=w[i],c={height:"0",width:q[i].width+"px",display:a.hidden?"none":""},e("<th>",{role:"gridcell"}).css(c).addClass("ui-first-th-"+y.direction+(t.applyLabelClasses?" "+(a.labelClasses||""):"")).appendTo(z),n.style.width="",v=o.call(this,"colHeaders","ui-th-column-header ui-th-"+y.direction+" "+(t.applyLabelClasses?a.labelClasses||"":"")),u=F(a.name,t.groupHeaders)){for(p=u.numberOfColumns,f=u.titleText,m=0,h=0;h<p&&i+h<C;h++)w[i+h].hidden||D(w[i+h].classes)||m++;l=e("<th>").addClass(v).html(f||"&nbsp;"),m>0&&l.attr("colspan",String(m)),y.headertitles&&l.attr("title",l.text()),0===m&&l.hide(),d.before(l),s.append(n),b=p-1}else 0===b?t.useColSpanStyle?d.attr("rowspan",x.length+1):(e("<th>").addClass(v).css({display:a.hidden?"none":"","border-top":"0 none"}).insertBefore(d),s.append(n)):(s.append(n),b--);(g=e(this).children("thead")).prepend(z),s.insertAfter(G),j.prepend(g),e(this).triggerHandler("jqGridAfterSetGroupHeaders")})},getNumberOfFrozenColumns:function(){var e=this;if(0===e.length)return 0;var t,r=(e=e[0]).p.colModel,i=r.length,a=-1;for(t=0;t<i&&!0===r[t].frozen;t++)a=t;return a+1},setFrozenColumns:function(t){return t=t||{},this.each(function(){var r=this,a=e(r),s=r.p,l=r.grid;if(l&&null!=s&&!0!==s.frozenColumns){var n,d,c=s.colModel,h=c.length,u=-1,p=!1,f=[],m=i(s.id),g=o.call(r,"states.hover");if(!0!==s.subGrid&&!0!==s.treeGrid&&!s.scroll){for(n=0;n<h&&!0===c[n].frozen;n++)p=!0,u=n,f.push("#jqgh_"+m+"_"+i(c[n].name));if(s.sortable){d=e(l.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels");try{d.sortable("destroy")}catch(e){}a.jqGrid("setGridParam",{sortable:{options:{items:f.length>0?">th:not(:has("+f.join(",")+"),:hidden)":">th:not(:hidden)"}}}),a.jqGrid("sortableColumns",d)}if(u>=0&&p){var v=s.caption?e(l.cDiv).outerHeight():0,b=e(".ui-jqgrid-htable",s.gView).height();s.toppager&&(v+=e(l.topDiv).outerHeight()),!0===s.toolbar[0]&&"bottom"!==s.toolbar[1]&&(v+=e(l.uDiv).outerHeight()),l.fhDiv=e("<div style='position:absolute;overflow:hidden;"+("rtl"===s.direction?"right:0;border-top-left-radius:0;":"left:0;border-top-right-radius:0;")+"top:"+v+"px;height:"+b+"px;' class='"+o.call(r,"hDiv","frozen-div ui-jqgrid-hdiv")+"'></div>"),l.fbDiv=e("<div style='position:absolute;overflow:hidden;"+("rtl"===s.direction?"right:0;":"left:0;")+"top:"+(parseInt(v,10)+parseInt(b,10)+1)+"px;overflow:hidden;' class='frozen-bdiv ui-jqgrid-bdiv'></div>"),e(s.gView).append(l.fhDiv);var y=e(".ui-jqgrid-htable",s.gView).clone(!0),w=y[0].tHead.rows;if(s.groupHeader){e(w[0].cells).filter(":gt("+u+")").remove(),e(w).filter(".jqg-third-row-header").each(function(){e(this).children("th[id]").each(function(){var t,i=e(this).attr("id");i&&i.substr(0,r.id.length+1)===r.id+"_"&&(t=i.substr(r.id.length+1),s.iColByName[t]>u&&e(this).remove())})});var C,q=-1,j=-1;e(w).filter(".jqg-second-row-header").children("th").each(function(){if(C=parseInt(e(this).attr("colspan")||1,10),parseInt(e(this).attr("rowspan")||1,10)>1?(q++,j++):C&&(q+=C,j++),q===u)return!1}),q!==u&&(j=u),e(w).filter(".jqg-second-row-header,.ui-search-toolbar").each(function(){e(this).children(":gt("+j+")").remove()})}else e(w).each(function(){e(this).children(":gt("+u+")").remove()});if(e(y).width(1),e(l.fhDiv).append(y).scroll(function(){this.scrollLeft=0}),s.footerrow){var D=e(".ui-jqgrid-bdiv",s.gView).height();l.fsDiv=e("<div style='position:absolute;"+("rtl"===s.direction?"right:0;":"left:0;")+"top:"+(parseInt(v,10)+parseInt(b,10)+parseInt(D,10)+1)+"px;' class='frozen-sdiv ui-jqgrid-sdiv'></div>"),e(s.gView).append(l.fsDiv);var x=e(".ui-jqgrid-ftable",s.gView).clone(!0);e("tr",x).each(function(){e("td:gt("+u+")",this).remove()}),e(x).width(1),e(l.fsDiv).append(x)}e(s.gView).append(l.fbDiv),e(l.bDiv).scroll(function(){e(l.fbDiv).scrollTop(e(this).scrollTop())}),e(l.fbDiv).on("mousewheel.setFrozenColumns DOMMouseScroll.setFrozenColumns",function(i){l.bDiv.scrollTop+=e.isFunction(t.mouseWheel)?t.mouseWheel.call(r,i):"mousewheel"===i.type?-i.originalEvent.wheelDelta/10:6*i.originalEvent.detail}),!0===s.hoverrows&&e(s.idSel).off("mouseover.jqGrid mouseout.jqGrid");var G=function(e,t){var r=e.height();Math.abs(r-t)>=1&&t>0&&(e.height(t),r=e.height(),Math.abs(t-r)>=1&&e.height(t+Math.round(t-r)))},S=function(e,t){var r=e.width();Math.abs(r-t)>=1&&(e.width(t),r=e.width(),Math.abs(t-r)>=1&&e.width(t+Math.round(t-r)))},z=function(t,r,i,a){var o,l,d,c,h,u,p,f,m,g,v,b,y=e(r).position().top;if(null!=t&&t.length>0){if(t[0].scrollTop=r.scrollTop,t.css("rtl"===s.direction?{top:y,right:0}:{top:y,left:0}),d=t.children("table").children("thead").children("tr"),0===(c=e(r).children("div").children("table").children("thead").children("tr")).length&&t.children("table").length>0&&(d=e(t.children("table")[0].rows),c=e(e(r).children("div").children("table")[0].rows)),g=(l=Math.min(d.length,c.length))>0?e(d[0]).position().top:0,v=l>0?e(c[0]).position().top:0,i>=0)for(a>=0&&(l=Math.min(a+1,l)),o=i;o<l;o++)if("none"!==(h=e(c[o])).css("display")&&h.is(":visible")){if(y=h.position().top,p=(u=e(d[o])).position().top,f=h.height(),null!=s.groupHeader&&s.groupHeader.useColSpanStyle)for(b=h[0].cells,n=0;n<b.length;n++)null!=(m=b[n])&&"TH"===m.nodeName.toUpperCase()&&(f=Math.max(f,e(m).height()));G(u,f+(y-v)+(g-p))}G(t,r.clientHeight)}},F={resizeDiv:!0,resizedRows:{iRowStart:0,iRowEnd:-1}},O={header:F,resizeFooter:!0,body:F};a.on("jqGridAfterGridComplete.setFrozenColumns",function(){e(s.idSel+"_frozen").remove(),e(l.fbDiv).height(l.hDiv.clientHeight);var t=e(this).clone(!0),r=t[0].rows,i=a[0].rows;if(e(r).filter("tr[role=row]").each(function(){e(this.cells).filter("td[role=gridcell]:gt("+u+")").remove()}),l.fbRows=r,t.width(1).attr("id",s.id+"_frozen"),t.appendTo(l.fbDiv),!0===s.hoverrows){var o=function(t,r,i){e(t)[r](g),e(i[t.rowIndex])[r](g)};e(r).filter(".jqgrow").hover(function(){o(this,"addClass",i)},function(){o(this,"removeClass",i)}),e(i).filter(".jqgrow").hover(function(){o(this,"addClass",r)},function(){o(this,"removeClass",r)})}z(l.fhDiv,l.hDiv,0,-1),z(l.fbDiv,l.bDiv,0,-1),l.sDiv&&z(l.fsDiv,l.sDiv,0,-1)});var T=function(t){e(l.fbDiv).scrollTop(e(l.bDiv).scrollTop()),t.header.resizeDiv&&z(l.fhDiv,l.hDiv,t.header.resizedRows.iRowStart,t.header.resizedRows.iRowEnd),t.body.resizeDiv&&z(l.fbDiv,l.bDiv,t.body.resizedRows.iRowStart,t.body.resizedRows.iRowEnd),t.resizeFooter&&l.sDiv&&t.resizeFooter&&z(l.fsDiv,l.sDiv,0,-1);var r=l.fhDiv[0].clientWidth;t.header.resizeDiv&&null!=l.fhDiv&&l.fhDiv.length>=1&&G(e(l.fhDiv),l.hDiv.clientHeight),t.body.resizeDiv&&null!=l.fbDiv&&l.fbDiv.length>0&&S(e(l.fbDiv),r),t.resizeFooter&&null!=l.fsDiv&&l.fsDiv.length>=0&&S(e(l.fsDiv),r)};e(s.gBox).on("resizestop.setFrozenColumns",function(){setTimeout(function(){T(O)},50)}),a.on("jqGridInlineEditRow.setFrozenColumns jqGridInlineAfterRestoreRow.setFrozenColumns jqGridInlineAfterSaveRow.setFrozenColumns jqGridAfterEditCell.setFrozenColumns jqGridAfterRestoreCell.setFrozenColumns jqGridAfterSaveCell.setFrozenColumns jqGridResizeStop.setFrozenColumns",function(e,t){var r=a.jqGrid("getInd",t);T({header:{resizeDiv:!1,resizedRows:{iRowStart:-1,iRowEnd:-1}},resizeFooter:!0,body:{resizeDiv:!0,resizedRows:{iRowStart:r,iRowEnd:r}}})}),a.on("jqGridResizeStop.setFrozenColumns",function(){T(O)}),a.on("jqGridResetFrozenHeights.setFrozenColumns",function(e,t){T(t||O)}),l.hDiv.loading||setTimeout(function(){a.triggerHandler("jqGridAfterGridComplete")},0),s.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){var t=e(this),r=this.grid,a=this.p,s=i(a.id);if(r&&!0===a.frozenColumns){if(e(r.fhDiv).remove(),e(r.fbDiv).off(".setFrozenColumns"),e(r.fbDiv).remove(),r.fhDiv=null,r.fbDiv=null,r.fbRows=null,a.footerrow&&(e(r.fsDiv).remove(),r.fsDiv=null),t.off(".setFrozenColumns"),!0===a.hoverrows){var l,n=o.call(this,"states.hover");t.on("mouseover.jqGrid",function(t){l=e(t.target).closest("tr.jqgrow"),"ui-subgrid"!==e(l).attr("class")&&e(l).addClass(n)}).on("mouseout.jqGrid",function(t){l=e(t.target).closest("tr.jqgrow"),e(l).removeClass(n)})}if(a.frozenColumns=!1,a.sortable){var d=e(r.hDiv).find(".ui-jqgrid-htable .ui-jqgrid-labels");d.sortable("destroy"),t.jqGrid("setGridParam",{sortable:{options:{items:">th:not(:has(#jqgh_"+s+"_cb,#jqgh_"+s+"_rn,#jqgh_"+s+"_subgrid),:hidden)"}}}),t.jqGrid("sortableColumns",d)}}})}})});
//# sourceMappingURL=grid.custom.js.map