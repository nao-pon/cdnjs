"use strict";!function(){window.addEventListener("setIframeHeight",function(e){var f,o=e.detail;(f=function(e){var t=null;return document.querySelectorAll("iframe").forEach(function(r){t||r.dataset.setIframeHeightId!==e||(t=r)}),t}(o.iframeId))||(f=r(o.iframeSrc));!f&&o.iframeReferrer&&(f=r(o.iframeReferrer));if(f){f.dataset.setIframeHeightId=o.iframeId,f.style.height=o.height+"px";var d=n(f.dataset.iframeAutoHeightCurrentSrc||f.src)!==n(o.iframeSrc);f.dataset.iframeAutoHeightCurrentSrc=o.iframeSrc;var c=t[o.iframeId],s=o.height;if(void 0===c?a(window,"setIframeHeight:determined",o):c>s?a(window,"setIframeHeight:shrinked",o):c<s&&a(window,"setIframeHeight:enlarged",o),t[o.iframeId]=s,window.history.replaceState&&f.dataset.iframeAutoHeightDeepLinkPattern&&d){var h=i(f.dataset.iframeAutoHeightDeepLinkPattern.replace(/%deepLinkIframeSrc%/,encodeURIComponent(o.iframeSrc)));n(document.location.href)!==n(h)&&(window.history.replaceState({},"",h),a(window,"setIframeHeight:deepLink:changed",{childUrl:o.iframeSrc,parentUrl:h})),f.contentWindow&&f.contentWindow.postMessage&&f.contentWindow.postMessage('setIframeHeight:deepLink:changed::{ "parentUrl": "'+h+'", "childUrl": "'+o.iframeSrc+'"}',"*")}}}),window.addEventListener("message",function(t){if("string"==typeof(r=t.data)&&r.indexOf("::")){var r=r.split("::");if(2===r.length&&"setIframeHeight"===r[0]){var i=JSON.parse(r[1]);e.setHeight(i)}}});var e={setHeight:function(e){e.height=parseInt(e.height,10),a(window,"setIframeHeight",e)}},t={};function r(e){var t=null;return document.querySelectorAll("iframe").forEach(function(r){var n=r.dataset.iframeAutoHeightCurrentSrc||r.src;if(n&&(n=i(n))===e)return t=r,!1}),t}function i(e){0===e.indexOf("/")&&(e=(document.location.href.match(/https?:\/\/.[^/]+/)||[])[0]+e);return e}function n(e){return e.replace(/^https?:\/\//,"//")}function a(e,t,r){var i=document.createEvent("CustomEvent");i.initCustomEvent(t,!0,!0,r),e.dispatchEvent(i)}}();