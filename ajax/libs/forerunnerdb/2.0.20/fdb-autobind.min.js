!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=a("../lib/AutoBind");b.exports=d},{"../lib/AutoBind":2}],2:[function(a,b,c){"use strict";var d=window.ForerunnerDB.shared,e={};if(d.addModule("AutoBind",e),e.extendCollection=function(a){var b=a.prototype.init,c=a.prototype._dataReplace,d=a.prototype._dataInsertAtIndex,e=a.prototype._dataRemoveAtIndex,f=a.prototype._updateProperty,g=a.prototype._updateIncrement,h=a.prototype._updateSpliceMove,i=a.prototype._updateSplicePush,j=a.prototype._updateSplicePull,k=a.prototype._updatePush,l=a.prototype._updatePull,m=a.prototype._updateMultiply,n=a.prototype._updateRename,o=a.prototype._updateOverwrite,p=a.prototype._updateUnset,q=a.prototype._updatePop,r=a.prototype.drop;a.prototype.init=function(){this._linked=0,b.apply(this,arguments)},a.prototype.isLinked=function(){return Boolean(this._linked)},a.prototype.link=function(a,b,c){if(window.jQuery){this._links=this._links||new ForerunnerDB.shared.modules.Collection(this.instanceIdentifier()+"_links"),this._linked||(this._linked=0);var d,e,f;if(a&&b){if(f="string"==typeof a?a:a.selector,b&&"object"==typeof b?b.template&&"string"==typeof b.template&&(d=this.objectId(b.template),e=b.template):d=b,!this._links.count({target:f,template:b})){if(window.jQuery(a).length){if(!window.jQuery.templates[d]){if(!e){var g=window.jQuery(b);if(!g.length)throw"ForerunnerDB.AutoBind : "+this.instanceIdentifier()+' Unable to bind to target because template "'+b+'" does not exist';e=window.jQuery(g[0]).html()}window.jQuery.views.templates(d,e)}if(c&&c.$wrap){var h,i,j;if(c.$wrapIn)if(c.$wrapIn instanceof window.ForerunnerDB.shared.modules.Document)j=c.$wrapIn,i=j._data,i[c.$wrap]=this._data,j.setData(i,{$decouple:!1}),j._linked=1,h=j._data;else{if("object"!=typeof c.$wrapIn)throw"ForerunnerDB.AutoBind: "+this.instanceIdentifier()+" Unable to use passed $wrapIn option, should be either a ForerunnerDB Document instance or a JavaScript object!";h=c.$wrapIn,h[c.$wrap]=this._data}else h={},h[c.$wrap]=this._data;this.debug()&&console.log("ForerunnerDB.AutoBind: "+this.instanceIdentifier()+' Binding data wrapped in an object with field called "'+c.$wrap+'" to output target: '+a),window.jQuery.templates[d].link(a,h)}else window.jQuery.templates[d].link(a,this._data);return this._links.insert({target:f,template:b,templateId:d}),this._linked++,this.debug()&&console.log(this.logIdentifier()+" Binding to output target: "+a),this}throw this.logIdentifier()+' Cannot bind collection to target selector "'+a+'" because it does not exist in the DOM!'}throw this.logIdentifier()+" Attempt to bind a duplicate link from collection to the target: "+a+" with the template: "+d}throw this.logIdentifier()+" Cannot bind without a target / template!"}throw this.logIdentifier()+" Cannot data-bind without jQuery. Please add jQuery to your page!"},a.prototype.unlink=function(a,b){if(this._links){if(!window.jQuery)throw this.logIdentifier()+" Cannot data-bind without jQuery. Please add jQuery to your page!";var c,d,e,f,g;if(a&&b){if(d="string"==typeof a?a:a.selector,b&&"object"==typeof b?b.template&&"string"==typeof b.template&&(c=this.objectId(b.template)):c=b,e=this._links.findOne({target:d,template:b}))return window.jQuery.templates[c].unlink(a),this._links.remove(e),this._linked--,this.debug()&&console.log(this.logIdentifier()+" Removed binding document to target: "+a),this;this.debug()&&console.log(this.logIdentifier()+" Cannot remove binding as it does not exist to the target: "+a+" with the template: "+b)}else{for(f=this._links.find(),g=0;g<f.length;g++)e=f[g],window.jQuery.templates[e.templateId].unlink(jQuery(e.target)),this.debug()&&console.log(this.logIdentifier()+" Removed binding to output target: "+e.target);this._links.remove(),this._linked=0}}return this},a.prototype.links=function(){return this._links},a.prototype._dataReplace=function(a){this._linked?(this.debug()&&console.log(this.logIdentifier()+" Replacing some data in document"),window.jQuery.observable(this._data).refresh(a)):c.apply(this,arguments)},a.prototype._dataInsertAtIndex=function(a,b){this._linked?(this.debug()&&console.log(this.logIdentifier()+" Inserting some data"),window.jQuery.observable(this._data).insert(a,b)):d.apply(this,arguments)},a.prototype._dataRemoveAtIndex=function(a){this._linked?(this.debug()&&console.log(this.logIdentifier()+" Removing some data"),window.jQuery.observable(this._data).remove(a)):e.apply(this,arguments)},a.prototype._updateProperty=function(a,b,c){this._linked?(this.debug()&&console.log(this.logIdentifier()+' Setting document property "'+b+'"'),window.jQuery.observable(a).setProperty(b,c)):f.apply(this,arguments)},a.prototype._updateIncrement=function(a,b,c){this._linked?(this.debug()&&console.log(this.logIdentifier()+' Incrementing document property "'+b+'"'),window.jQuery.observable(a).setProperty(b,a[b]+c)):g.apply(this,arguments)},a.prototype._updateSpliceMove=function(a,b,c){this._linked?(this.debug()&&console.log(this.logIdentifier()+' Moving document array index from "'+b+'" to "'+c+'"'),window.jQuery.observable(a).move(b,c)):h.apply(this,arguments)},a.prototype._updateSplicePush=function(a,b,c){this._linked?(this.debug()&&console.log(this.logIdentifier()+" Pushing item into document sub-array"),a.length>b?window.jQuery.observable(a).insert(b,c):window.jQuery.observable(a).insert(c)):i.apply(this,arguments)},a.prototype._updateSplicePull=function(a,b,c){this._linked?(this.debug()&&console.log(this.logIdentifier()+" Pulling from document sub-array"),window.jQuery.observable(a).remove(b,c)):j.apply(this,arguments)},a.prototype._updatePush=function(a,b){this._linked?(this.debug()&&console.log(this.logIdentifier()+" Pushing item into document sub-array"),window.jQuery.observable(a).insert(b)):k.apply(this,arguments)},a.prototype._updatePull=function(a,b){this._linked?(this.debug()&&console.log(this.logIdentifier()+" Pulling item from document sub-array"),window.jQuery.observable(a).remove(b)):l.apply(this,arguments)},a.prototype._updateMultiply=function(a,b,c){this._linked?(this.debug()&&console.log(this.logIdentifier()+" Multiplying value"),window.jQuery.observable(a).setProperty(b,a[b]*c)):m.apply(this,arguments)},a.prototype._updateRename=function(a,b,c){this._linked?(this.debug()&&console.log(this.logIdentifier()+' Renaming property "'+b+'" to "'+c+'" on document'),window.jQuery.observable(a).setProperty(c,a[b]),window.jQuery.observable(a).removeProperty(b)):n.apply(this,arguments)},a.prototype._updateOverwrite=function(a,b,c){this._linked?(this.debug()&&console.log(this.logIdentifier()+' Setting document property "'+b+'"'),window.jQuery.observable(a).setProperty(b,c)):o.apply(this,arguments)},a.prototype._updateUnset=function(a,b){this._linked?(this.debug()&&console.log(this.logIdentifier()+' Removing property "'+b+'" from document'),window.jQuery.observable(a).removeProperty(b)):p.apply(this,arguments)},a.prototype._updatePop=function(a,b){var c,d,e=!1;if(this._linked){if(a.length>0)if(this.debug()&&console.log(this.logIdentifier()+" Popping item from sub-array in document"),b>0){for(d=0;d<b;d++)(c=a.length-1)>-1&&window.jQuery.observable(a).remove(c);e=!0}else if(b<0){for(c=0,d=0;d>b;d--)a.length&&window.jQuery.observable(a).remove(c);e=!0}}else e=q.apply(this,arguments);return e},a.prototype.drop=function(){if(this._linked){var a,b=this._links.find();for(a=0;a<b.length;a++)this.unlink(jQuery(b[a].target),b[a].template)}return this._links&&(this._links.drop(),delete this._links),r.apply(this,arguments)}},e.extendView=function(a){var b=a.prototype.init;a.prototype.init=function(){this._linked=0,b.apply(this,arguments)},a.prototype.isLinked=function(){return this.data().isLinked()},a.prototype.link=function(a,b,c){return this.data().link(a,b,c),this},a.prototype.unlink=function(a,b){return this.data().unlink(a,b),this},a.prototype.links=function(){return this.data().links()}},e.extendOverview=function(a){a.prototype.isLinked=function(){return this.data().isLinked()},a.prototype.link=function(a,b,c){this._data.link.apply(this._data,arguments),this._refresh()},a.prototype.unlink=function(a,b){this._data.unlink.apply(this._data,arguments),this._refresh()},a.prototype.links=function(){return this._data.links()}},e.extendDocument=function(a){var b=a.prototype._updatePop;a.prototype.isLinked=function(){return Boolean(this._linked)},a.prototype.link=function(a,b,c){if(window.jQuery){if(this._links=this._links||new ForerunnerDB.shared.modules.Collection(this.instanceIdentifier()+"_links"),this._linked||(this._linked=0),a&&b){var d,e,f="string"==typeof a?a:a.selector;if(b&&"object"==typeof b?b.template&&"string"==typeof b.template&&(d=this.objectId(b.template),e=b.template):d=b,!this._links.count({target:f,template:b})){if(window.jQuery(a).length){if(!window.jQuery.templates[d]){if(!e){var g=window.jQuery(b);if(!g.length)throw this.logIdentifier()+" Unable to bind document to target because template does not exist: "+b;e=window.jQuery(g[0]).html()}window.jQuery.views.templates(d,e)}if(c&&c.$wrap){var h,i,j;c.$wrapIn?c.$wrapIn instanceof Document&&(j=c.$wrapIn,i=j._data,i[c.$wrap]=this._data,j.setData(i,{$decouple:!1}),j._linked=1,h=c.$wrap._data):(h={},h[c.$wrap]=this._data),window.jQuery.templates[d].link(a,h)}else window.jQuery.templates[d].link(a,this._data);return this._links.insert({target:f,template:b,templateId:d}),this._linked++,this.debug()&&console.log(this.logIdentifier()+" Added binding to target: "+a),this}throw this.logIdentifier()+' Cannot bind document to target "'+a+'" because it does not exist in the DOM!'}throw this.logIdentifier()+" Cannot create a duplicate link from document to the target: "+a+" with the template: "+d}throw this.logIdentifier()+" Cannot bind without a target / template!"}throw this.logIdentifier()+" Cannot data-bind without jQuery. Please add jQuery to your page!"},a.prototype.unlink=function(a,b){if(this._links){if(!window.jQuery)throw this.logIdentifier()+" Cannot data-bind without jQuery. Please add jQuery to your page!";var c,d,e,f,g;if(a&&b){if(d="string"==typeof a?a:a.selector,b&&"object"==typeof b?b.template&&"string"==typeof b.template&&(c=this.objectId(b.template)):c=b,e=this._links.findOne({target:d,template:b}))return window.jQuery.templates[c].unlink(a),this._links.remove(e),this._linked--,this.debug()&&console.log(this.logIdentifier()+" Removed binding document to target: "+a),this;this.debug()&&console.log(this.logIdentifier()+" Cannot remove link from document, one does not exist to the target: "+a+" with the template: "+b)}else{for(f=this._links.find(),g=0;g<f.length;g++)e=f[g],window.jQuery.templates[e.templateId].unlink(jQuery(e.target)),this.debug()&&console.log(this.logIdentifier()+" Removed binding to output target: "+e.target);this._links.remove(),this._linked=0}}return this},a.prototype.links=function(){return this._links},a.prototype._updatePop=function(a,c){var d,e,f=!1;if(this._linked){if(a.length>0)if(this.debug()&&console.log(this.logIdentifier()+" Popping item from sub-array"),c>0){for(e=0;e<c;e++)(d=a.length-1)>-1&&window.jQuery.observable(a).remove(d);f=!0}else if(c<0){for(d=0,e=0;e>c;e--)a.length&&window.jQuery.observable(a).remove(d);f=!0}}else f=b.apply(this,arguments);return f}},void 0===window.jQuery)throw"ForerunnerDB.AutoBind : Cannot data-bind without jQuery. Please add jQuery to your page!";if(a("../lib/vendor/jsviews"),void 0===window.jQuery.views)throw"ForerunnerDB.AutoBind : Plugin cannot continue because jsViews is not loaded. Check your error log for url errors; it should have automatically loaded with this plugin.";var f,g=["Collection","View","Overview","Document"],h=function(a,b){e["extend"+a]&&e["extend"+a](b)};for(f=0;f<g.length;f++)d.moduleFinished(g[f],h);d.finishModule("AutoBind"),d.finishModule("AutoBind"),b.exports=e},{"../lib/vendor/jsviews":3}],3:[function(a,b,c){window.jQuery&&(this.jQuery=window.jQuery,function(){!function(a,b,c){"use strict";function d(a,b){for(var c in b.props)ha.test(c)&&(a[c]=b.props[c])}function e(a){return a}function f(a){return a}function g(a){wa._dbgMode=a,T=a?"Unavailable (nested view): use #getIndex()":"",ua("dbg",ta.dbg=sa.dbg=a?f:e)}function h(a){this.name=(P.link?"JsViews":"JsRender")+" Error",this.message=a||this.name}function i(a,b){var c;for(c in b)a[c]=b[c];return a}function j(a){return"function"==typeof a}function k(a,b,c){return va.rTag&&!a||(U=a?a.charAt(0):U,V=a?a.charAt(1):V,W=b?b.charAt(0):W,X=b?b.charAt(1):X,Y=c||Y,a="\\"+U+"(\\"+Y+")?\\"+V,b="\\"+W+"\\"+X,R="(?:(?:(\\w+(?=[\\/\\s\\"+W+"]))|(?:(\\w+)?(:)|(>)|!--((?:[^-]|-(?!-))*)--|(\\*)))\\s*((?:[^\\"+W+"]|\\"+W+"(?!\\"+X+"))*?)",va.rTag=R+")",R=new RegExp(a+R+"(\\/)?|(?:\\/(\\w+)))"+b,"g"),S=new RegExp("<.*>|([^\\\\]|^)[{}]|"+a+".*"+b)),[U,V,W,X,Y]}function l(a,b){b||(b=a,a=c);var d,e,f,g,h=this,i=!b||"root"===b;if(a){if(!(g=h.type===b?h:c))if(d=h.views,h._.useKey){for(e in d)if(g=d[e].get(a,b))break}else for(e=0,f=d.length;!g&&e<f;e++)g=d[e].get(a,b)}else if(i)for(;h.parent.parent;)g=h=h.parent;else for(;h&&!g;)g=h.type===b?h:c,h=h.parent;return g}function m(){var a=this.get("item");return a?a.index:c}function n(){return this.index}function o(b){var d,e=this,f=e.linkCtx,g=(e.ctx||{})[b];return g===c&&f&&f.ctx&&(g=f.ctx[b]),g===c&&(g=ta[b]),g&&j(g)&&!g._wrp&&(d=function(){return g.apply(this&&this!==a?this:e,arguments)},d._wrp=!0,i(d,g)),d||g}function p(a,b,e,f){var g,h,i=+e===e&&b.tmpl.bnds[e-1],j=b.linkCtx;return f=f!==c&&{props:{},args:[f]},e=f||(i?i(b.data,b,qa):e),h=e.args[0],(a||i)&&(g=j&&j.tag,g||(g={_:{inline:!j,bnd:i},tagName:":",cvt:a,flow:!0,tagCtx:e,_is:"tag"},j&&(j.tag=g,g.linkCtx=j,e.ctx=L(e.ctx,j.view.ctx)),va._lnk(g)),g._er=f&&h,d(g,e),e.view=b,g.ctx=e.ctx||{},delete e.ctx,b._.tag=g,h=q(g,g.convert||"true"!==a&&a)[0],h=i&&b._.onRender?b._.onRender(h,b,i):h,b._.tag=c),h!=c?h:""}function q(a,b){var c=a.tagCtx,d=c.view,e=c.args;return b=b&&(""+b===b?d.getRsc("converters",b)||D("Unknown converter: '"+b+"'"):b),e=e.length||c.index?b?e.slice():e:[d.data],b&&(b.depends&&(a.depends=va.getDeps(a.depends,a,b.depends,b)),e[0]=b.apply(a,e)),e}function r(a,b){for(var d,e,f=this;d===c&&f;)e=f.tmpl[a],d=e&&e[b],f=f.parent;return d||qa[a][b]}function s(a,b,e,f,g,h){var j,k,l,m,n,o,p,r,s,t,u,v,w,x,y,z,A,B="",E=b.linkCtx||0,F=b.ctx,G=e||b.tmpl,H=+f===f&&G.bnds[f-1];for("tag"===a._is&&(j=a,a=j.tagName,f=j.tagCtxs),j=j||E.tag,h=h!==c&&(B+=h,[{props:{},args:[]}]),f=h||(H?H(b.data,b,qa):f),o=f.length,n=0;n<o;n++)n||e&&j||(u=b.getRsc("tags",a)||D("Unknown tag: {{"+a+"}}")),r=f[n],E.tag&&!j._er||(t=r.tmpl,t=r.content=t&&G.tmpls[t-1],i(r,{tmpl:(j||u).template||t,render:C,index:n,view:b,ctx:L(r.ctx,F)})),(e=r.props.tmpl)&&(e=""+e===e?b.getRsc("templates",e)||ra(e):e,r.tmpl=e),j||(u._ctr?(j=new u._ctr,v=!!j.init):va._lnk(j={render:u.render}),j._={inline:!E},E&&(E.tag=j,j.linkCtx=E),(j._.bnd=H||E.fn)?j._.arrVws={}:j.dataBoundOnly&&D("{^{"+a+"}} tag must be data-bound"),j.tagName=a,j.parent=m=F&&F.tag,j._is="tag",j._def=u,j.tagCtxs=f),r.tag=j,j.dataMap&&j.tagCtxs&&(r.map=j.tagCtxs[n].map),j.flow||(s=r.ctx=r.ctx||{},k=j.parents=s.parentTags=F&&L(s.parentTags,F.parentTags)||{},m&&(k[m.tagName]=m),k[j.tagName]=s.tag=j);if(b._.tag=j,!(j._er=h)){for(d(j,f[0]),j.rendering={},n=0;n<o;n++)r=j.tagCtx=j.tagCtxs[n],z=r.props,y=q(j,j.convert),(w=z.dataMap||j.dataMap)&&(y.length||z.dataMap)&&(x=r.map,x&&x.src===y[0]&&!g||(x&&x.src&&x.unmap(),x=r.map=w.map(y[0],z)),y=[x.tgt]),j.ctx=r.ctx,!n&&v&&(A=j.template,j.init(r,E,j.ctx),v=c,j.template!==A&&(j._.tmpl=j.template),E&&(E.attr=j.attr=E.attr||j.attr)),p=c,j.render&&(p=j.render.apply(j,y)),y=y.length?y:[b],p=p!==c?p:r.render(y[0],!0)||(g?c:""),B=B?B+(p||""):p;delete j.rendering}return j.tagCtx=j.tagCtxs[0],j.ctx=j.tagCtx.ctx,j._.inline&&(l=j.attr)&&l!==ma&&(B="text"===l?sa.html(B):""),H&&b._.onRender?b._.onRender(B,b,H):B}function t(a,b,c,d,e,f,g,h){var i,j,k,l=this,n="array"===b,o={key:0,useKey:n?0:1,id:""+ka++,onRender:h,bnds:{}};l.data=d,l.tmpl=e,l.content=g,l.views=n?[]:{},l.parent=c,l.type=b||"top",l._=o,l.linked=!!h,c?(i=c.views,j=c._,j.useKey?(i[o.key="_"+j.useKey++]=l,l.index=T,l.getIndex=m,k=j.tag,o.bnd=n&&(!k||!!k._.bnd&&k)):i.splice(o.key=l.index=f,0,l),l.ctx=a||c.ctx):l.ctx=a}function u(a){var b,c,d,e,f,g,h;for(b in pa)if(f=pa[b],(g=f.compile)&&(c=a[b+"s"]))for(d in c)(e=c[d]=g(d,c[d],a))&&(h=va.onStore[b])&&h(d,e,g)}function v(a,b,d){var e,f;return j(b)?b={depends:b.depends,render:b}:(b.baseTag&&(b.flow=!!b.flow,b=i(i({},b.baseTag),b)),(f=b.template)!==c&&(b.template=""+f===f?ra[f]||ra(f):f),!1!==b.init&&(e=b._ctr=function(){},(e.prototype=b).constructor=e)),d&&(b._parentTmpl=d),b}function w(d,e,f,g){function h(e){if(""+e===e||e.nodeType>0){try{j=e.nodeType>0?e:!S.test(e)&&b&&b(a.document).find(e)[0]}catch(a){}return j&&(e=ra[d=d||j.getAttribute(na)],e||(d=d||"_"+ja++,j.setAttribute(na,d),e=ra[d]=w(d,j.innerHTML,f,g)),j=c),e}}var i,j;if(e=e||"",i=h(e),g=g||(e.markup?e:{}),g.tmplName=d,f&&(g._parentTmpl=f),!i&&e.markup&&(i=h(e.markup))&&(!i.fn||i.debug===e.debug&&i.allowCode===e.allowCode||(i=i.markup)),i!==c)return d&&!f&&(oa[d]=function(){return e.render.apply(e,arguments)}),i.fn||e.fn?i.fn&&(e=d&&d!==i.tmplName?L(g,i):i):(e=y(i,g),F(i.replace(ba,"\\$&"),e)),u(g),e}function x(a){function b(b,c){this.tgt=a.getTgt(b,c)}return j(a)&&(a={getTgt:a}),a.baseMap&&(a=i(i({},a.baseMap),a)),a.map=function(a,c){return new b(a,c)},a}function y(a,b){var c,d=wa.wrapMap||{},e=i({markup:a,tmpls:[],links:{},tags:{},bnds:[],_is:"template",render:B},b);return b.htmlTag||(c=ea.exec(a),e.htmlTag=c?c[1].toLowerCase():""),c=d[e.htmlTag],c&&c!==d.div&&(e.markup=P.trim(e.markup)),e}function z(a,b,c){var d=this.jquery&&(this[0]||D('Unknown template: "'+this.selector+'"')),e=d.getAttribute(na);return B.call(e?ra[e]:ra(d),a,b,c)}function A(a,b,c){if(wa._dbgMode)try{return a.fn(b,c,qa)}catch(a){return D(a,c)}return a.fn(b,c,qa)}function B(a,b,c,d,e,f){var g=this;return d||!g.fn._nvw||P.isArray(a)?C.call(g,a,b,c,d,e,f):A(g,a,{tmpl:g})}function C(a,b,d,e,f,g){var h,i,j,k,l,m,n,o,p,q,r,s,u,v,w=this,x="";if(!!b===b&&(d=b,b=c),!0===f&&(n=!0,f=0),w.tag?(o=w,w=w.tag,q=w._,s=w.tagName,u=q.tmpl||o.tmpl,v=w.attr&&w.attr!==ma,b=L(b,w.ctx),p=o.content,!1===o.props.link&&(b=b||{},b.link=!1),e=e||o.view,a=arguments.length?a:e):u=w,u&&(!e&&a&&"view"===a._is&&(e=a),e&&(p=p||e.content,g=g||e._.onRender,a===e&&(a=e.data),b=L(b,e.ctx)),e&&"top"!==e.type||((b=b||{}).root=a),u.fn||(u=ra[u]||ra(u)),u)){if(g=!1!==(b&&b.link)&&!v&&g,r=g,!0===g&&(r=c,g=e._.onRender),b=u.helpers?L(u.helpers,b):b,P.isArray(a)&&!d)for(k=n?e:f!==c&&e||new t(b,"array",e,a,u,f,p,g),h=0,i=a.length;h<i;h++)j=a[h],l=new t(b,"item",k,j,u,(f||0)+h,p,g),m=A(u,j,l),x+=k._.onRender?k._.onRender(m,l):m;else!e&&u.fn._nvw||(k=n?e:new t(b,s||"data",e,a,u,f,p,g),q&&!w.flow&&(k.tag=w)),x+=A(u,a,k);return r?r(x,k):x}return""}function D(a,b,c){var d=wa.onError(a,b,c);if(""+a===a)throw new va.Err(d);return!b.linkCtx&&b.linked?sa.html(d):d}function E(a){D("Syntax error\n"+a)}function F(a,b,c,d){function e(b){(b-=m)&&o.push(a.substr(m,b).replace(_,"\\n"))}function f(b){b&&E('Unmatched or missing tag: "{{/'+b+'}}" in template:\n'+a)}function g(g,h,l,q,r,s,t,u,v,w,x,y){s&&(r=":",q=ma),w=w||c;var z=(h||c)&&[[]],A="",B="",C="",D="",F="",G="",I="",K="",L=!w&&!r&&!t;l=l||(v=v||"#data",r),e(y),m=y+g.length,u?k&&o.push(["*","\n"+v.replace(aa,"$1")+"\n"]):l?("else"===l&&(da.test(v)&&E('for "{{else if expr}}" use "{{else expr}}"'),z=p[7],p[8]=a.substring(p[8],y),p=n.pop(),o=p[2],L=!0),v&&(J(v.replace(_," "),z,b).replace(ca,function(a,b,c,d,e,f,g,h){return g?(B+=f+",",D+="'"+h+"',"):c?(C+=d+f+",",G+=d+"'"+h+"',"):b?I+=f:("trigger"===e&&(K+=f),A+=d+f+",",F+=d+"'"+h+"',",j=j||ha.test(e)),""}).slice(0,-1),z&&z[0]&&z.pop()),i=[l,q||!!d||j||"",L&&[],H(D,F,G),H(B,A,C),I,K,z||0],o.push(i),L&&(n.push(p),p=i,p[8]=m)):x&&(f(x!==p[0]&&"else"!==p[0]&&x),p[8]=a.substring(p[8],y),p=n.pop()),f(!p&&x),o=p[2]}var h,i,j,k=b&&b.allowCode,l=[],m=0,n=[],o=l,p=[,,l];return c&&(a=U+a+X),f(n[0]&&n[0][2].pop()[0]),a.replace(R,g),e(a.length),(m=l[l.length-1])&&f(""+m!==m&&+m[8]===m[8]&&m[0]),c?(h=K(l,a,c),G(h,l[0][7])):h=K(l,b),h._nvw&&(h._nvw=!/[~#]/.test(a)),h}function G(a,b){a.deps=[];for(var c in b)"_jsvto"!==c&&b[c].length&&(a.deps=a.deps.concat(b[c]));a.paths=b}function H(a,b,c){return[a.slice(0,-1),b.slice(0,-1),c.slice(0,-1)]}function I(a,b){return"\n\t"+(b?b+":{":"")+"args:["+a[0]+"]"+(a[1]||!b?",\n\tprops:{"+a[1]+"}":"")+(a[2]?",\n\tctx:{"+a[2]+"}":"")}function J(a,b,c){function d(d,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,G,H,I,J){function K(a,c,d,h,i,k,l,m){if(d&&(j&&("linkTo"===e&&(f=b._jsvto=b._jsvto||[],f.push(s)),e&&!g||j.push(s.slice(c.length))),"."!==d)){var n=(h?'view.hlp("'+h+'")':i?"view":"data")+(m?(k?"."+k:h?"":i?"":"."+d)+(l||""):(m=h?"":i?k||"":d,""));return n+=m?"."+m:"",c+("view.data"===n.slice(0,9)?n.slice(5):n)}return a}t=t||"",q=q||p||z,s=s||w,x=x||G||"";var L,M,N=J.length-1;if(!u||i||h)return j&&D&&!i&&!h&&(!e||g||f)&&(L=n[o],N>I-L&&(L=J.slice(L,I+1),D=V+":"+L+" onerror=''"+W,M=l[D],M||(l[D]=!0,l[D]=M=F(D,c||j,!0),M.paths.push({_jsvOb:M})),!0!==M&&(f||j).push({_jsvOb:M}))),i?(i=!A,i?d:'"'):h?(h=!B,h?d:'"'):(q?(o++,n[o]=I++,q):"")+(H?o?"":(k=J.slice(k,I),(e?(e=g=f=!1,"\b"):"\b,")+k+(k=I+d.length,j&&b.push(j=[]),"\b")):v?(o&&E(a),j&&b.pop(),e=s,g=r,k=I+d.length,r&&(j=b[e]=[]),s+":"):s?s.split("^").join(".").replace(Z,K)+(x?(m[++o]=!0,"."!==s.charAt(0)&&(n[o]=I),x):t):t||(C?(m[o--]=!1,C+(x?(m[++o]=!0,x):"")):y?(m[o]||E(a),","):p?"":(i=A,h=B,'"')));E(a)}var e,f,g,h,i,j=b&&b[0],k=0,l=c?c.links:j&&(j.links=j.links||{}),m={},n={0:-1},o=0;return(a+(c?" ":"")).replace(/\)\^/g,").").replace($,d)}function K(a,b,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,z,A,B,C,D,F,H,J,L,M,N=0,O="",P={},Q=a.length;for(""+b===b?(v=d?'data-link="'+b.replace(_," ").slice(1,-1)+'"':b,b=0):(v=b.tmplName||"unnamed",b.allowCode&&(P.allowCode=!0),b.debug&&(P.debug=!0),o=b.bnds,u=b.tmpls),e=0;e<Q;e++)if(""+(f=a[e])===f)O+='\n+"'+f+'"';else if("*"===(g=f[0]))O+=";\n"+f[1]+"\nret=ret";else{if(h=f[1],z=f[2],i=I(f[3],"params")+"},"+I(q=f[4]),J=f[5],M=f[6],A=f[8],(D="else"===g)||(N=0,o&&(p=f[7])&&(N=o.push(p))),(F=":"===g)?h&&(g=h===ma?">":h+g):(z&&(w=y(A,P),w.tmplName=v+"/"+g,K(z,w),u.push(w)),D||(x=g,C=O,O=""),B=a[e+1],B=B&&"else"===B[0]),L=J?";\ntry{\nret+=":"\n+",r="",s="",F&&(p||M||h&&h!==ma)){if(H="return {"+i+"};",t='c("'+h+'",view,',H=new Function("data,view,j,u"," // "+v+" "+N+" "+g+"\n"+H),H._er=J,r=t+N+",",s=")",H._tag=g,d)return H;G(H,p),n=!0}if(O+=F?(d?(J?"\ntry{\n":"")+"return ":L)+(n?(n=c,m=l=!0,t+(p?(o[N-1]=H,N):"{"+i+"}")+")"):">"===g?(k=!0,"h("+q[0]+")"):(!0,"((v="+q[0]+')!=null?v:"")')):(m=j=!0,"\n{view:view,tmpl:"+(z?u.length:"0")+","+i+"},"),x&&!B){if(O="["+O.slice(0,-1)+"]",t='t("'+x+'",view,this,',d||p){if(O=new Function("data,view,j,u"," // "+v+" "+N+" "+x+"\nreturn "+O+";"),O._er=J,O._tag=g,p&&G(o[N-1]=O,p),d)return O;r=t+N+",undefined,",s=")"}O=C+L+t+(N||O)+")",p=0,x=0}J&&(m=!0,O+=";\n}catch(e){ret"+(d?"urn ":"+=")+r+"j._err(e,view,"+J+")"+s+";}\n"+(d?"":"ret=ret"))}O="// "+v+"\nvar v"+(j?",t=j._tag":"")+(l?",c=j._cnvt":"")+(k?",h=j.converters.html":"")+(d?";\n":',ret=""\n')+(P.debug?"debugger;":"")+O+(d?"\n":";\nreturn ret;");try{O=new Function("data,view,j,u",O)}catch(a){E("Compiled template code:\n\n"+O+'\n: "'+a.message+'"')}return b&&(b.fn=O),m||(O._nvw=!0),O}function L(a,b){return a&&a!==b?b?i(i({},b),a):a:b&&i({},b)}function M(a){return la[a]||(la[a]="&#"+a.charCodeAt(0)+";")}function N(a){var b,c,d=[];if("object"==typeof a)for(b in a)(c=a[b])&&c.toJSON&&!c.toJSON()||j(c)||d.push({key:b,prop:c});return d}function O(a){return null!=a?ga.test(a)&&(""+a).replace(ia,M)||a:""}if(!(b&&b.render||a.jsviews)){var P,Q,R,S,T,U="{",V="{",W="}",X="}",Y="^",Z=/^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g,$=/(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(!*?[#~]?[\w$.^]+)?\s*((\+\+|--)|\+|-|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=\s*\.|\s*\^|\s*$)|[)\]])([([]?))|(\s+)/g,_=/[ \t]*(\r\n|\n|\r)/g,aa=/\\(['"])/g,ba=/['"\\]/g,ca=/(?:\x08|^)(onerror:)?(?:(~?)(([\w$]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi,da=/^if\s/,ea=/<(\w+)[>\s]/,fa=/[\x00`><"'&]/g,ga=/[\x00`><\"'&]/,ha=/^on[A-Z]|^convert(Back)?$/,ia=fa,ja=0,ka=0,la={"&":"&amp;","<":"&lt;",">":"&gt;","\0":"&#0;","'":"&#39;",'"':"&#34;","`":"&#96;"},ma="html",na="data-jsv-tmpl",oa={},pa={template:{compile:w},tag:{compile:v},helper:{},converter:{}},qa={jsviews:"v1.0.0-beta",settings:function(a){i(wa,a),g(wa._dbgMode),wa.jsv&&wa.jsv()},sub:{View:t,Err:h,tmplFn:F,cvt:q,parse:J,extend:i,syntaxErr:E,onStore:{},_lnk:e,_ths:d},map:x,_cnvt:p,_tag:s,_err:D};(h.prototype=new Error).constructor=h,m.depends=function(){return[this.get("item"),"index"]},n.depends=function(){return["index"]},t.prototype={get:l,getIndex:n,getRsc:r,hlp:o,_is:"view"};for(Q in pa)!function(a,b){function d(f,g,h){var i,j,k,l;if(f&&"object"==typeof f&&!f.nodeType&&!f.markup&&!f.getTgt){for(k in f)d(k,f[k],g);return qa}return g===c&&(g=f,f=c),f&&""+f!==f&&(h=g,g=f,f=c),l=h?h[e]=h[e]||{}:d,j=b.compile,null===g?f&&delete l[f]:(g=j?g=j(f,g,h):g,f&&(l[f]=g)),j&&g&&(g._is=a),g&&(i=va.onStore[a])&&i(f,g,j),g}var e=a+"s";qa[e]=d,pa[a]=b}(Q,pa[Q]);var ra=qa.templates,sa=qa.converters,ta=qa.helpers,ua=qa.tags,va=qa.sub,wa=qa.settings;b?(P=b,P.fn.render=z,P.observable&&(i(va,P.views.sub),qa.map=P.views.map)):(P=a.jsviews={},P.isArray=Array&&Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}),P.render=oa,P.views=qa,P.templates=ra=qa.templates,wa({debugMode:g,delimiters:k,onError:function(a,b,d){return b&&(a=d===c?"{Error: "+a+"}":j(d)?d(a,b):d),a==c?"":a},_dbgMode:!0}),ua({else:function(){},if:{render:function(a){var b=this;return b.rendering.done||!a&&(arguments.length||!b.tagCtx.index)?"":(b.rendering.done=!0,b.selected=b.tagCtx.index,b.tagCtx.render(b.tagCtx.view,!0))},onUpdate:function(a,b,c){var d,e,f;for(d=0;(e=this.tagCtxs[d])&&e.args.length;d++)if(e=e.args[0],f=!e!=!c[d].args[0],!this.convert&&e||f)return f;return!1},flow:!0},for:{render:function(a){var b,d=this,e=d.tagCtx,f="",g=0;return d.rendering.done||((b=!arguments.length)&&(a=e.view.data),a!==c&&(f+=e.render(a,b),g+=P.isArray(a)?a.length:1),(d.rendering.done=g)&&(d.selected=e.index)),f},flow:!0},include:{flow:!0},"*":{render:e,flow:!0}}),ua("props",{baseTag:ua.for,dataMap:x(N)}),sa({html:O,attr:O,url:function(a){return a!=c?encodeURI(""+a):null===a?a:""}}),k()}}(this,this.jQuery),function(a,b,c){"use strict";function d(a){return v(a)?new f(a):new e(a)}function e(a){return this._data=a,this}function f(a){return this._data=a,this}function g(a){return v(a)?[a]:a}function h(a,b){a=v(a)?a:[a];var c,d,e=b,f=e,g=a.length,i=[];for(c=0;c<g;c++)d=a[c],E(d)?i=i.concat(h(d.call(b,b),b)):""+d===d?(f!==e&&i.push(e=f),i.push(d)):(b=f=d,f!==e&&i.push(e=f));return i}function i(a,b){var c,d;for(c in a){d=!0;break}d||delete C[b]}function j(a,b){if(!a.data||!a.data.off){var d,e,f,g,h,i=b.oldValue,j=b.value,k=a.data,l=k.observeAll,n=!k.cb.noArray,o=k.paths;a.type===B?(k.cb.array||k.cb).call(k,a,b):k.prop!==b.path&&"*"!==k.prop||(g=typeof i===x&&(o[0]||n&&v(i)),h=typeof j===x&&(o[0]||n&&v(j)),l?(d=l._path+"."+b.path,e=l.filter,f=[a.target].concat(l.parents()),g&&m(n,l.ns,[i],o,k.cb,!0,e,[f],d),h&&m(n,l.ns,[j],o,k.cb,c,e,[f],d)):(g&&m(n,[i],o,k.cb,!0),h&&m(n,[j],o,k.cb)),k.cb(a,b))}}function k(){function a(a,c,d,e){var f,h,i=H(_),k=g(_);if(a=R?a+"."+R:a,r||e)i&&b(k).off(a,j);else{if(I=i&&b._data(_))for(I=I&&I.events,I=I&&I[d?B:A],w=I&&I.length;w--;)if((y=I[w].data)&&y.cb._cId===s._cId&&y.ns===R){if(d)return;("*"===c&&y.prop!==c||y.prop===o)&&b(_).off(a,j)}h=d?{}:{fullPath:p,paths:c?[c]:[],prop:o},h.ns=R,h.cb=s,P&&(h.observeAll={_path:P,path:function(){return f=O.length,P.replace(/[[.]/g,function(a){return f--,"["===a?"["+b.inArray(O[f-1],O[f]):"."})},parents:function(){return O},filter:Q,ns:R}),b(k).on(a,null,h,j),L&&((C[s._cId]=L)[b.data(_,"obId")||b.data(_,"obId",F++)]=_)}}function e(b,e,f,g){if(U){var h=_,i=P;_=b,g&&(_=b[g],P+="."+g),Q&&_&&(_=d._fltr(P,_,g?[b].concat(O):O,Q)),_&&(f||v(_))&&a(B+".observe"+(s?".obs"+(t=s._cId=s._cId||G++):""),c,!0,e),_=h,P=i}}var f,k,l,n,o,p,q,r,s,t,w,y,I,J,K,L,M,N,O,P,Q,R,S,T,U=0!=this,V=!0,W=D,X=Array.apply(0,arguments),Y=X.pop(),Z=X.shift(),$=Z,_=$,aa=X.length;for(Z+""===Z&&U&&(R=Z,Z=_=$=X.shift(),aa--),E(Y)?s=Y:(Y+""===Y&&(P=Y,O=X.pop(),Q=X.pop(),Y=X.pop(),aa-=3),!0===Y?r=Y:Y&&(Z=Y,V=c),Y=X[aa-1],(aa&&Y===c||E(Y))&&(s=X.pop(),aa--)),aa&&E(X[aa-1])&&(J=s,s=X.pop(),aa--),W+=r?s?".obs"+s._cId:"":".obs"+(t=s._cId=s._cId||G++),r||(L=C[t]=C[t]||{}),S=R&&R.match(z)||[""],T=S.length;T--;)for(R=S[T],v($)?e($,r,!0):r&&0===aa&&$&&a(W,""),M=0,f=0;f<aa;f++)if(""!==(p=X[f])){if(_=$,""+p===p){if(n=p.split("^"),n[1]&&(M=n[0].split(".").length,p=n.join("."),M=p.split(".").length-M),J&&(K=J(p,$))){aa+=K.length-1,u.apply(X,[f--,1].concat(K));continue}n=p.split(".")}else V&&!E(p)&&(p&&p._jsvOb&&(N=function(a,b){a._ob=J(a,Z);var c=Z;return function(d,f){var g=a._ob,h=b.length;typeof g===x&&(e(g,!0),(h||U&&v(g))&&m(U,[g],b,s,J,!0)),g=a._ob=J(a,c),typeof g===x&&(e(g),(h||U&&v(g))&&m(U,[g],b,s,J,[c])),s(d,f)}}(p,X.slice(f+1)),N.noArray=!U,N._cId=s._cId,m(U,[Z],X.slice(0,f),N,J),N=c,p=p._ob),_=p),$=p,n=[$];for(;_&&(o=n.shift())!==c;)if(typeof _===x){if(""+o===o){if(""===o)continue;if(n.length<M+1&&!_.nodeType){if(!r&&(I=H(_)&&b._data(_))){for(I=I.events,I=I&&I[A],w=I&&I.length,l=0;w--;)(y=I[w].data)&&y.cb===s&&y.ns===R&&(y.prop!==o&&"*"!==y.prop||((k=n.join("."))&&y.paths.push(k),l++));if(l){_=_[o];continue}}if("*"===o){!r&&I&&I.length&&a(W,"",!1,!0),E(_)?(q=_.depends)&&m(U,[q],s,r||Z):a(W,"");for(k in _)e(_,r,c,k);break}o&&a(W+"."+o,n.join("^"))}P&&(P+="."+o),o=_[o]}if(E(o)){(q=o.depends)&&m(U,[_],h(q,_),s,J,r||[Z]);break}_=o}e(_,r)}return t&&i(L,t),{cbId:t,bnd:L}}function l(){return[].push.call(arguments,!0),k.apply(this,arguments)}function m(){var a=[].concat.apply([],arguments);return k.apply(a.shift(),a)}function n(a,b,c,d){a+""!==a&&(c=b,b=a,a=""),p(a,this._data,b,c,[],"root",d)}function o(a,b,c){n.call(this,a,b,c,!0)}function p(a,b,e,f,g,h,i){function j(a,b){for(n=a.length,r=[[a]].concat(r),q=h+"[]";n--;)l(a,n,b,1)}function l(b,g,h,i){var j;g!==w&&(j=d._fltr(q,b[g],r,f))&&p(a,j,e,f||(i?c:0),r.slice(),q,h)}function m(a,b){var c=g;switch(h=a.data.observeAll._path,r=[a.target].concat(g),b.change){case"insert":j(b.items);break;case"remove":j(b.items,!0);break;case"refresh":j(b.oldItems,!0),j(a.target);break;case"set":q=h+"."+b.path,l(b,"oldValue",!0),l(b,"value")}e.apply(this,arguments),g=c}var n,o,q,r;if(typeof b===x)if(o=v(b)?"":"*",e?(o||0!==f)&&(m._cId=e._cId=e._cId||G++,k(a,b,o,m,i,f,g,h)):k(a,b,o,c,i,f,g,h),o){r=[b].concat(g);for(n in b)q=h+"."+n,l(b,n,i)}else j(b,i)}function q(a){return a.indexOf(".")<0&&a.indexOf("[")<0}if(!b)throw"jsViews/jsObservable require jQuery";if(!b.observable){var r=b.views=b.views||{jsviews:"v1.0.0-alpha",sub:{}},s=r.sub,t=b.event.special,u=[].splice,v=b.isArray,w=b.expando,x="object",y=parseInt,z=/\S+/g,A=s.propChng=s.propChng||"propertyChange",B=s.arrChng=s.arrChng||"arrayChange",C=s._cbBnds=s._cbBnds||{},D=A+".observe",E=b.isFunction,F=1,G=1,H=b.hasData,I={};s.getDeps=function(){var a=arguments;return function(){for(var b,c,d=[],e=a.length;e--;)b=a[e--],c=a[e],c&&(d=d.concat(E(c)?c(b,b):c));return d}},b.observable=d,d._fltr=function(a,b,c,d){if(!d||!E(d)||d(a,b,c))return typeof(b=E(b)?b.set&&b.call(c[0]):b)===x&&b},d.Object=e,d.Array=f,b.observe=d.observe=k,b.unobserve=d.unobserve=l,d._apply=m,e.prototype={_data:null,observeAll:n,unobserveAll:o,data:function(){
return this._data},setProperty:function(a,b,d){var e,f,g,h=this,i=h._data;if(a=a||"",i)if(v(a))for(e=a.length;e--;)f=a[e],h.setProperty(f.name,f.value,d===c||d);else if(""+a!==a)for(e in a)h.setProperty(e,a[e],b);else if(a!==w){for(g=a.split(".");i&&g.length>1;)i=i[g.shift()];i&&h._setProperty(i,g[0],b,d)}return h},removeProperty:function(a){return this.setProperty(a,I),this},_setProperty:function(a,b,d,e){var f,g,h,i=b?a[b]:a;E(i)&&i.set&&(g=i,f=!0===i.set?i:i.set,i=i.call(a)),(i!==d||e&&i!=d)&&(!(i instanceof Date)||i>d||i<d)&&(f?(f.call(a,d),d=g.call(a)):(h=d===I)?(delete a[b],d=c):b&&(a[b]=d),this._trigger(a,{change:"set",path:b,value:d,oldValue:i,remove:h}))},_trigger:function(a,c){b(a).triggerHandler(A,c)}},f.prototype={_data:null,observeAll:n,unobserveAll:o,data:function(){return this._data},insert:function(a,b){var c=this._data;return 1===arguments.length&&(b=a,a=c.length),a=y(a),a>-1&&a<=c.length&&(b=v(b)?b:[b],b.length&&this._insert(a,b)),this},_insert:function(a,b){var c=this._data,d=c.length;u.apply(c,[a,0].concat(b)),this._trigger({change:"insert",index:a,items:b},d)},remove:function(a,b){var d,e=this._data;return a===c&&(a=e.length-1),a=y(a),b=b?y(b):0===b?0:1,b>-1&&a>-1&&(d=e.slice(a,a+b),(b=d.length)&&this._remove(a,b,d)),this},_remove:function(a,b,c){var d=this._data,e=d.length;d.splice(a,b),this._trigger({change:"remove",index:a,items:c},e)},move:function(a,b,c){if(c=c?y(c):0===c?0:1,a=y(a),b=y(b),c>0&&a>-1&&b>-1&&a!==b){var d=this._data.slice(a,a+c);c=d.length,c&&this._move(a,b,c,d)}return this},_move:function(a,b,c,d){var e=this._data,f=e.length;e.splice(a,c),e.splice.apply(e,[b,0].concat(d)),this._trigger({change:"move",oldIndex:a,index:b,items:d},f)},refresh:function(a){var b=this._data.slice();return this._refresh(b,a),this},_refresh:function(a,b){var c=this._data,d=c.length;u.apply(c,[0,c.length].concat(b)),this._trigger({change:"refresh",oldItems:a},d)},_trigger:function(a,c){var d=this._data,e=d.length,f=b([d]);f.triggerHandler(B,a),e!==c&&f.triggerHandler(A,{change:"set",path:"length",value:e,oldValue:c})}},t[A]=t[B]={remove:function(a){var c,d,e,f,g,h=a.data;if(h&&(h.off=!0,h=h.cb)&&(c=C[h._cId])){for(e=b._data(this).events[a.type],f=e.length;f--&&!d;)d=(g=e[f].data)&&g.cb===h;d||(delete c[b.data(this,"obId")],i(c,h._cId))}}},r.map=function(a){function e(b,e,f){var g,h=this;this.src&&this.unmap(),"object"==typeof b&&(h.src=b,h.tgt=f||h.tgt||[],h.options=e||h.options,h.update(),a.obsSrc&&d(h.src).observeAll(h.obs=function(b,d){g||(g=!0,a.obsSrc(h,b,d),g=c)},h.srcFlt),a.obsTgt&&d(h.tgt).observeAll(h.obt=function(b,d){g||(g=!0,a.obsTgt(h,b,d),g=c)},h.tgtFlt))}return E(a)&&(a={getTgt:a}),a.baseMap&&(a=b.extend({},a.baseMap,a)),a.map=function(a,b,c){return new e(a,b,c)},(e.prototype={srcFlt:a.srcFlt||q,tgtFlt:a.tgtFlt||q,update:function(b){var c=this;d(c.tgt).refresh(a.getTgt(c.src,c.options=b||c.options))},unmap:function(){var a=this;a.src&&(a.obs&&d(a.src).unobserveAll(a.obs,a.srcFlt),a.obt&&d(a.tgt).unobserveAll(a.obt,a.tgtFlt),a.src=c)},map:e,_def:a}).constructor=e,a}}}(0,this.jQuery),function(a,b,c){"use strict";function d(a,d,e){var f,g,h,i,j,l,m,n,o,p,q,r,s,t,u,v=a.target,w=v._jsvBnd,x=/&(\d+)\+?/g;if(w)for(;o=x.exec(w);)(o=Sa[o[1]])&&(t=o.to)&&(h=o.linkCtx,n=h.view,s=h.tag,m=b(v),q=n.hlp(ra),r=n.hlp(sa),g=k(v),f=Ea[g],e===c&&(e=ia(g)?g(v):f?m[f]():m.attr(g)),j=t[1],t=t[0],j&&(i=ia(j)?j:n.getRsc("converters",j)),i&&(e=i.call(s,e)),p=n.linkCtx,n.linkCtx=h,u={change:"change",oldValue:h._val,value:e},q&&!1===q.call(h,a,u)||s&&s.onBeforeChange&&!1===s.onBeforeChange(a,u)||e===c||(l=t[0],e!==c&&l&&(l=l._jsvOb?l._ob:l,s&&(s._.chging=!0),la(l).setProperty(t[2]||t[1],e),r&&r.call(h,a,u),s&&(s.onAfterChange&&s.onAfterChange(a,u),delete s._.chging),h._val=e)),n.linkCtx=p)}function e(a,b,d){var e,g,i,j,l,m,o=this,p=o.tag,q=o.data,r=o.elem,s=o.convert,t=r.parentNode,u=o.view,v=u.linkCtx,w=u.hlp(ra);if(u.linkCtx=o,t&&(!w||!b||!1!==w.call(o,a,b))&&(!b||"*"===a.data.prop||a.data.prop===b.path)){if(b&&(o.eventArgs=b),b||o._initVal){if(delete o._initVal,d._er)try{g=d(q,u)}catch(a){l=d._er,m=Y(a,u,new Function("data,view","return "+l+";")(q,u)),g=[{props:{},args:[m]}]}else g=d(q,u,ea);if(e=f(g,o,p=o.tag,o.attr||k(r,!0,s!==c)),p){if(j=l||p._er,g=g[0]?g:[g],i=!j&&b&&p.onUpdate&&!1===p.onUpdate(a,b,g),D(p,g,j),i||e===xa)return e===Da&&p.onBeforeLink&&p.onBeforeLink(),z(p,p.tagCtx),n(o,q,r),void(u.linkCtx=v);if(p._.chging)return;g=":"===p.tagName?ea._cnvt(p.cvt,u,g[0]):ea._tag(p,u,u.tmpl,g,!0,m)}else d._tag&&(s=""===s?ya:s,g=s?ea._cnvt(s,u,g[0]||g):ea._tag(d._tag,u,u.tmpl,g,!0,m),p=o.tag,e=o.attr||e);h(g,o,e,p)&&b&&(w=u.hlp(sa))&&w.call(o,a,b),p&&(p._er=l,z(p,p.tagCtx))}n(o,q,r),u.linkCtx=v}}function f(a,d,e,f){var g,h,i,j,k=e&&e.parentElem||d.elem;if(a!==c){if(j=b(k),f=e&&e.attr||f,ia(a)&&Y(d.expr+": missing parens"),i=/^css-/.test(f)&&f.slice(4))g=b.style(k,i),+a===a&&(g=parseInt(g));else if("link"!==f){if("value"===f)k.type===va&&(g=j.prop(f=ua));else if(f===wa){if(k.value!==""+a)return f;g=j.prop(ua)}g===c&&(h=Ea[f],g=h?j[h]():j.attr(f))}d._val=g}return f}function g(a,b){a._df=b,a[(b?"set":"remove")+"Attribute"](Ba,"")}function h(d,e,f,h){var i,j,k,l,m,o,p,q,r,s,t,u,v,w=d!==c,x=e.data,y=h&&h.parentElem||e.elem,z=b(y),A=e.view,B=e._val,C=A.linkCtx,D=h||f===Da;if(h&&(h.parentElem=h.parentElem||e.expr||h._elCnt?y:y.parentNode,j=h._prv,k=h._nxt),!w)return void(f===Da&&h&&h.onBeforeLink&&h.onBeforeLink());if("visible"===f&&(f="css-display"),/^css-/.test(f))"visible"===e.attr&&(v=(y.currentStyle||_a.call(a,y,"")).display,d?(d=y._jsvd||v)!==xa||(d=Ra[u=y.nodeName])||(t=da.createElement(u),da.body.appendChild(t),d=Ra[u]=(t.currentStyle||_a.call(a,t,"")).display,da.body.removeChild(t)):(y._jsvd=v,d=xa)),(D=D||B!==d)&&b.style(y,f.slice(4),d);else if("link"!==f){if(f===ua)o=!0,d=d&&"false"!==d;else if(f===wa){if(y.value!==""+d)return void n(e,x,y);d=o=!0,f=ua}else"selected"!==f&&"disabled"!==f&&"multiple"!==f&&"readonly"!==f||(d=d&&"false"!==d?f:null);(i=Ea[f])?f===Da?(A.linkCtx=e,h&&h._.inline?(m=h.nodes(!0),h._elCnt&&(j&&j!==k?K(j,k,y,h._tgId,"^",!0):(p=y._df)&&(q=h._tgId+"^",r=p.indexOf("#"+q)+1,s=p.indexOf("/"+q),r&&s>0&&(r+=q.length,s>r&&(g(y,p.slice(0,r)+p.slice(s)),L(p.slice(r,s))))),j=j?j.previousSibling:k?k.previousSibling:y.lastChild),b(m).remove(),h&&h.onBeforeLink&&h.onBeforeLink(),l=A.link(A.data,y,j,k,d,h&&{tag:h._tgId,lazyLink:h.tagCtx.props.lazyLink})):(w&&z.empty(),h&&h.onBeforeLink&&h.onBeforeLink(),w&&(l=A.link(x,y,j,k,d,h&&{tag:h._tgId}))),A.linkCtx=C):(D=D||B!==d)&&("text"===f&&y.children&&!y.children[0]?y.textContent!==c?y.textContent=d:y.innerText=null===d?"":d:z[i](d)):(D=D||B!==d)&&z[o?"prop":"attr"](f,d!==c||o?d:null),e._val=d}return l||D}function i(a,b){var c=this,d=c.hlp(ra),e=c.hlp(sa);if(!d||!1!==d.call(this,a,b)){if(b){var f=b.change,g=b.index,h=b.items;switch(f){case"insert":c.addViews(g,h);break;case"remove":c.removeViews(g,h.length);break;case"move":case"refresh":c.refresh()}}e&&e.call(this,a,b)}}function j(a){var d,e,f=a.type,g=a.data,h=a._.bnd;!a._.useKey&&h&&((e=a._.bndArr)&&(b([e[1]]).off(pa,e[0]),a._.bndArr=c),h!==!!h&&h._.inline?f?h._.arrVws[a._.id]=a:delete h._.arrVws[a._.id]:f&&g&&(d=function(b){b.data&&b.data.off||i.apply(a,arguments)},b([g]).on(pa,d),a._.bndArr=[d,g]))}function k(a,b,c){var d=a.nodeName.toLowerCase(),e=ga.merge[d]||a.contentEditable===ya&&{to:Da,from:Da};return e?b?"input"===d&&a.type===wa?wa:e.to:e.from:b?c?"text":Da:""}function l(a,d,e,f,g,h,i){var j,k,l,m,n,o=a.parentElem,p=a._prv,q=a._nxt,r=a._elCnt;if(p&&p.parentNode!==o&&Y("Missing parentNode"),i){m=a.nodes(),r&&p&&p!==q&&K(p,q,o,a._.id,"_",!0),a.removeViews(c,c,!0),k=q,r&&(p=p?p.previousSibling:q?q.previousSibling:o.lastChild),b(m).remove();for(n in a._.bnds)F(n)}else{if(d){if(!(l=f[d-1]))return!1;p=l._nxt}r?(k=p,p=k?k.previousSibling:o.lastChild):k=p.nextSibling}j=e.render(g,h,a._.useKey&&i,a,i||d,!0),a.link(g,o,p,k,j,l)}function m(a,b,d){var e,f,g;return d?(g="^`",f=b._.tag,(e=f._tgId)||(Sa[e=Ta++]=f,f._tgId=""+e)):(g="_`",ca[e=b._.id]=b),"#"+e+g+(a!=c?a:"")+"/"+e+g}function n(a,b,d){var e,f,g,h=a.tag,i=a.convertBack,j=[],k=a._bndId||""+Ta++,l=a._hdlr;if(delete a._bndId,h&&(j=h.depends||j,j=ia(j)?h.depends(h):j,g=h.linkedElem),a._depends&&""+a._depends==""+j||(a._depends&&la._apply(!1,[b],a._depends,l,!0),e=la._apply(!1,[b],a.fn.deps,j,l,a._ctxCb),e.elem=d,e.linkCtx=a,e._tgId=k,d._jsvBnd=d._jsvBnd||"",d._jsvBnd+="&"+k,a._depends=j,a.view._.bnds[k]=k,Sa[k]=e,g&&(e.to=[[],i]),(g||i!==c)&&C(e,h&&h.convertBack||i),h&&(h.onAfterBind&&h.onAfterBind(e),h.flow||h._.inline||(d.setAttribute(na,(d.getAttribute(na)||"")+"#"+k+"^/"+k+"^"),h._tgId=""+k))),g&&g[0])for(h._.radio&&(g=g.children("input[type=radio]")),f=g.length;f--;)g[f]._jsvBnd=g[f]._jsvBnd||d._jsvBnd+"+",g[f]._jsvLkEl=h}function o(a,b,c,d,e,f,g){return p(this,a,b,c,d,e,f,g)}function p(a,e,f,h,i,j,k,l){if(a&&e){e=e.jquery?e:b(e),P||(P=da.body,b(P).on(qa,d).on("blur","[contenteditable]",d));for(var n,o,p,q,s,t,u,w,x=m,y=h&&"replace"===h.target,z=e.length;z--;)if(u=e[z],""+a===a)r(a,u,Q(u),c,!0,f,h);else{if(j=j||Q(u),a.markup!==c)!1===j.link&&(h=h||{},h.link=x=!1),y&&(t=u.parentNode),p=a.render(f,h,i,j,c,x),t?(k=u.previousSibling,l=u.nextSibling,b.cleanData([u],!0),t.removeChild(u),u=t):(k=l=c,b(u).empty());else{if(!0!==a||j!==ba)break;w={lnk:1}}if(u._df&&!l){for(q=v(u._df,!0,Wa),n=0,o=q.length;n<o;n++)s=q[n],(s=ca[s.id])&&s.data!==c&&s.parent.removeViews(s._.key,c,!0);g(u)}j.link(f,u,k,l,p,w,h)}}return e}function q(a,d,e,f,h,k,l,n){function o(a,b,d,e,f,g,i,j,k,l,m,n,o){var p,q="";return o?(y=0,a):(B=j||k||"",e=e||l,d=d||n,ia&&!d&&(e||B||g)&&(ia=c,ha=Ga.shift()),e=e||d,e&&(y=0,ia=c,V&&(d||n?Qa[ha]||/;svg;|;math;/.test(";"+Ga.join(";")+";")||(p="'<"+ha+".../"):Qa[e]?p="'</"+e:Ga.length&&e===ha||(p="Mismatch: '</"+e),p&&Ja(p+">' in:\n"+h)),oa=ma,ha=Ga.shift(),ma=Oa[ha],l=l?"</"+l+">":"",oa&&(Ea+=qa,qa="",ma?Ea+="-":(q=l+Aa+"@"+Ea+za+(m||""),Ea=Ha.shift()))),ma?(g?qa+=g:b=l||n||"",B&&(b+=B,qa&&(b+=" "+na+'="'+qa+'"',qa=""))):b=g?b+q+f+Aa+g+za+i+B:q||a,y&&g&&Ja(" No {^{ tags within elem markup ("+y+' ). Use data-link="..."'),B&&(y=B,Ga.unshift(ha),ha=B.slice(1),Ga[0]&&Ga[0]===Pa[ha]&&Y("Parent of <tr> must be <tbody>"),ia=Qa[ha],(ma=Oa[ha])&&!oa&&(Ha.unshift(Ea),Ea=""),oa=ma,Ea&&ma&&(Ea+="+")),b)}function p(a,b){var e,f,h,k,l,n,o,p=[];if(a){for("@"===a._tkns.charAt(0)&&(b=H.previousSibling,H.parentNode.removeChild(H),H=c),F=a.length;F--;){if(J=a[F],h=J.ch,e=J.path)for(E=e.length-1;f=e.charAt(E--);)"+"===f?"-"===e.charAt(E)?(E--,b=b.previousSibling):b=b.parentNode:b=b.lastChild;"^"===h?(B=Sa[l=J.id])&&(o=b&&(!H||H.parentNode!==b),H&&!o||(B.parentElem=b),J.elCnt&&o&&g(b,(J.open?"#":"/")+l+h+(b._df||"")),p.push([o?null:H,J])):(I=ca[l=J.id])&&(I.parentElem||(I.parentElem=b||H&&H.parentNode||d,I._.onRender=m,I._.onArrayChange=i,j(I)),k=I.parentElem,J.open?(I._elCnt=J.elCnt,b&&!H?g(b,"#"+l+h+(b._df||"")):(I._prv||g(k,t(k._df,"#"+l+h)),I._prv=H)):(!b||H&&H.parentNode===b?H&&(I._nxt||g(k,t(k._df,"/"+l+h)),I._nxt=H):(g(b,"/"+l+h+(b._df||"")),I._nxt=c),A=I.linkCtx,(n=I.ctx&&I.ctx.onAfterCreate||Ia)&&n.call(A,I)))}for(F=p.length;F--;)Fa.push(p[F])}return!a||a.elCnt}function q(a){var b,c;if(a)for(F=a.length,E=0;E<F;E++)if(J=a[E],c=B=Sa[J.id].linkCtx.tag,!B.flow){if(!S){for(b=1;c=c.parent;)b++;W=W||b}!S&&b!==W||T&&B.tagName!==T||R.push(B)}}function s(){var g,i,j="",k={},m=_+(xa?",["+Ba+"]":"");for(G=Na?d.querySelectorAll(m):b(m,d).get(),D=G.length,e&&e.innerHTML&&(L=Na?e.querySelectorAll(m):b(m,e).get(),e=L.length?L[L.length-1]:e),W=0,C=0;C<D;C++)if(H=G[C],e&&!sa)sa=H===e;else{if(f&&H===f){xa&&(j+=u(H));break}if(H.parentNode)if(xa){if(j+=u(H),H._df){for(g=C+1;g<D&&H.contains(G[g]);)g++;k[g-1]=H._df}k[C]&&(j+=k[C]||"")}else wa&&(J=v(H,c,Ya))&&(J=J[0])&&(ua=ua?J.id!==ua&&ua:J.open&&J.id),!ua&&La(v(H))&&H.getAttribute(Z)&&Fa.push([H])}if(xa&&(j+=d._df||"",(i=j.indexOf("#"+xa.id)+1)&&(j=j.slice(i+xa.id.length)),i=j.indexOf("/"+xa.id),i+1&&(j=j.slice(0,i)),q(v(j,c,Za))),h===c&&d.getAttribute(Z)&&Fa.push([d]),w(e,ma),w(f,ma),xa)return void(va&&va.resolve());for(ma&&Ea+qa&&(H=f,Ea&&(f?p(v(Ea+"+",!0),f):p(v(Ea,!0),d)),p(v(qa,!0),d),f&&(j=f.getAttribute(na),(D=j.indexOf(ra)+1)&&(j=j.slice(D+ra.length-1)),f.setAttribute(na,qa+j))),D=Fa.length,C=0;C<D;C++)H=Fa[C],K=H[1],H=H[0],K?(B=Sa[K.id])&&((A=B.linkCtx)&&(B=A.tag,B.linkCtx=A),K.open?(H&&(B.parentElem=H.parentNode,B._prv=H),B._elCnt=K.elCnt,!B||B.onBeforeLink&&!1===B.onBeforeLink()||B._.bound||(B._.bound=!0,I=B.tagCtx.view,r(c,B._prv,I,K.id)),B._.linking=!0):(B._nxt=H,B._.linking&&(U=B.tagCtx,I=U.view,delete B._.linking,B._.bound||(B._.bound=!0,r(c,B._prv,I,K.id)),z(B,U)))):r(H.getAttribute(Z),H,Q(H),c,wa,a,l);va&&va.resolve()}var y,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,R,S,T,U,V,W,$,ba,ea,fa,ha,ia,ja,ka,la,ma,oa,pa,qa,ra,sa,ua,va,wa,xa,Ca=this,Da=Ca._.id+"_",Ea="",Fa=[],Ga=[],Ha=[],Ia=Ca.hlp(ta),La=p;if(k&&(va=k.lazyLink&&b.Deferred(),k.tmpl?N="/"+k._.id+"_":(wa=k.lnk,k.tag&&(Da=k.tag+"^",k=!0),(xa=k.get)&&(La=q,R=xa.tags,S=xa.deep,T=xa.name)),k=!0===k),d=d?""+d===d?b(d)[0]:d.jquery?d[0]:d:Ca.parentElem||da.body,V=!ga.noValidate&&d.contentEditable!==ya,ha=d.tagName.toLowerCase(),ma=!!Oa[ha],e=e&&x(e,ma),f=f&&x(f,ma)||null,h!=c){if(ka=da.createElement("div"),ja=ka,ra=qa="",pa="http://www.w3.org/2000/svg"===d.namespaceURI?"svg_ns":(fa=Ka.exec(h))&&fa[1]||"",X&&fa&&fa[2]&&Y("Unsupported: "+fa[2]),ma){for(P=f;P&&!(O=v(P));)P=P.nextSibling;(la=O?O._tkns:d._df)&&(M=N||"",!k&&N||(M+="#"+Da),(E=la.indexOf(M))+1&&(E+=M.length,ra=qa=la.slice(0,E),la=la.slice(E),O?P.setAttribute(na,la):g(d,la)))}if(ia=c,h=(""+h).replace(Va,o),V&&Ga.length&&Ja("Mismatched '<"+ha+"...>' in:\n"+h),n)return;for(Ma.appendChild(ka),pa=aa[pa]||aa.div,$=pa[0],ja.innerHTML=pa[1]+h+pa[2];$--;)ja=ja.lastChild;for(Ma.removeChild(ka),ba=da.createDocumentFragment();ea=ja.firstChild;)ba.appendChild(ea);d.insertBefore(ba,f)}return va?setTimeout(s,0):s(),va&&va.promise()}function r(a,b,d,e,f,g,h){var i,j,l,m,n,o,p,q,r,t,u;if(e)t=Sa[e],t=t.linkCtx?t.linkCtx.tag:t,r=t.linkCtx||{data:d.data,elem:t._elCnt?t.parentElem:b,view:d,ctx:d.ctx,attr:Da,fn:t._.bnd,tag:t,_bndId:e},s(r,r.fn);else if(a&&b)for(g=f?g:d.data,i=d.tmpl,a=y(a,k(b)),R.lastIndex=0;j=R.exec(a);)u=R.lastIndex,l=j[1],p=j[3],n=j[10],m=c,r={data:g,elem:b,view:d,ctx:h,attr:l,isLk:f,_initVal:!j[2]},j[6]&&(!l&&(m=/:([\w$]*)$/.exec(n))&&(m=m[1])!==c&&(o=-m.length-1,p=p.slice(0,o-1)+U),null===m&&(m=c),r.convert=j[5]||""),r.expr=l+p,q=i.links[p],q||(i.links[p]=q=fa.tmplFn(p,i,!0,m)),r.fn=q,l||m===c||(r.convertBack=m),s(r,q),R.lastIndex=u}function s(a,b){function d(c,d){e.call(a,c,d,b)}d.noArray=!0,a.isLk&&(a.view=new fa.View(a.ctx,"link",ba,a.data,ba.tmpl,c,c,m)),a._ctxCb=I(a.view),a._hdlr=d,d(!0)}function t(a,b){var c;return a?(c=a.indexOf(b),c+1?a.slice(0,c)+a.slice(c+b.length):a):""}function u(a){return a&&(""+a===a?a:"SCRIPT"===a.tagName?a.type.slice(3):1===a.nodeType&&a.getAttribute(na)||"")}function v(a,b,c){function d(a,b,c,d,f,h){g.push({elCnt:e,id:d,ch:f,open:b,close:c,path:h,token:a})}var e,f,g=[];if(f=b?a:u(a))return g.elCnt=!a.type,e="@"===f.charAt(0)||!a.type,g._tkns=f,f.replace(c||$a,d),g}function w(a,b){a&&("jsv"===a.type?a.parentNode.removeChild(a):b&&""===a.getAttribute(Z)&&a.removeAttribute(Z))}function x(a,b){for(var c=a;b&&c&&1!==c.nodeType;)c=c.previousSibling;return c&&(1!==c.nodeType?(c=da.createElement("SCRIPT"),c.type="jsv",a.parentNode.insertBefore(c,a)):u(c)||c.getAttribute(Z)||c.setAttribute(Z,"")),c}function y(a,c){return a=b.trim(a).replace(La,"\\$&"),a.slice(-1)!==U?a=T+":"+a+(c?":":"")+U:a}function z(a,d){var e,f,g,h,i,j,k,l,m,n,o=d.view,p=a.linkCtx=a.linkCtx||{tag:a,data:o.data,view:o,ctx:o.ctx};if(a.onAfterLink&&a.onAfterLink(d,p),e=a.targetTag?a.targetTag.linkedElem:a.linkedElem,(f=e&&e[0])&&((g=a._.radio)&&(e=e.children("input[type=radio]")),g||!a._.chging)){if(h=fa.cvt(a,a.convert)[0],g||f!==p.elem){for(k=e.length;k--;){if(f=e[k],l=f._jsvLkEl,a._.inline&&(!l||l!==a&&l.targetTag!==a))for(f._jsvLkEl=a,i=p.elem?p.elem._jsvBnd:a._prv._jsvBnd,f._jsvBnd=i+"+",i=i.slice(1).split("&"),j=i.length;j--;)C(Sa[i[j]],a.convertBack);g&&(f[ua]=h===f.value)}p._val=h}h!==c&&(g||f.value===c?f.contentEditable===ya&&(f.innerHTML=h):f.type===va?f[ua]=h&&"false"!==h:e.val(h))}(f=f||":"===a.tagName&&p.elem)&&(m=f._jsvTr,n=d.props.trigger,m!==n&&(f._jsvTr=n,e=e||b(f),B(e,m,"off"),B(e,n,"on")))}function A(a){setTimeout(function(){d(a)},0)}function B(a,b,c){b&&a[c](!0===b?"keydown":b,!0===b?A:d)}function C(a,b){var c,d,e,f,g,h=a.linkCtx,i=h.data,j=h.fn.paths;if(a&&j){for(j=(c=j._jsvto)||j[0],d=j&&j.length;d&&""+(f=j[--d])!==f;);!f||h.tag&&!h.tag.tagCtx.args.length?a.to=[[],b]:(f=f.split("^").join("."),a.to="."===f.charAt(0)?[[g=j[d-1],f.slice(1)],b]:[h._ctxCb(e=d?j[0].split("^").join("."):f)||[i,e],b],c&&g&&(a.to[0][0]=h._ctxCb(g,i)))}}function D(a,b,c){var d,e,f=a.tagCtx.view,g=a.tagCtxs||[a.tagCtx],h=g.length,i=!b;if(b=b||a._.bnd.call(f.tmpl,(a.linkCtx||f).data,f,ea),c)g=a.tagCtxs=b,a.tagCtx=g[0];else for(;h--;)d=g[h],e=b[h],la(d.props).setProperty(e.props),ha(d.ctx,e.ctx),d.args=e.args,i&&(d.tmpl=e.tmpl);return fa._ths(a,g[0]),g}function E(a){for(var b,c,d,e=[],f=a.length,g=f;g--;)e.push(a[g]);for(g=f;g--;)if(c=e[g],c.parentNode){if(d=c._jsvBnd)for(d=d.slice(1).split("&"),c._jsvBnd="",b=d.length;b--;)F(d[b],c._jsvLkEl,c);L(u(c)+(c._df||""))}}function F(a,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=Sa[a];if(d)e===d.linkedElem[0]&&(delete e._jsvLkEl,delete d.linkedElem);else if(q){delete Sa[a];for(f in q.bnd)i=q.bnd[f],j=".obs"+q.cbId,b.isArray(i)?b([i]).off(pa+j).off(oa+j):b(i).off(oa+j),delete q.bnd[f];if(g=q.linkCtx){if(h=g.tag){if(k=h.tagCtxs)for(l=k.length;l--;)(m=k[l].map)&&m.unmap();n=h.linkedElem,o=n&&n[0]||g.elem,(p=o&&o._jsvTr)&&(B(n||b(o),p,"off"),o._jsvTr=c),h.onDispose&&h.onDispose(),h._elCnt||(h._prv&&h._prv.parentNode.removeChild(h._prv),h._nxt&&h._nxt.parentNode.removeChild(h._nxt))}delete g.view._.bnds[a]}delete fa._cbBnds[q.cbId]}}function G(a,e){return a===c?(P&&(b(P).off(qa,d).off("blur","[contenteditable]",d),P=c),a=!0,ba.removeViews(),E(da.body.getElementsByTagName("*"))):e&&!0===a&&(e=e.jquery?e:b(e),e.each(function(){for(var a;(a=Q(this,!0))&&a.parent;)a.parent.removeViews(a._.key,c,!0);E(this.getElementsByTagName("*")),E([this])})),e}function H(a,b){return G(this,a,b)}function I(a){return function(b,c){var d,e,f=[c];if(a&&b){if(b._jsvOb)return b._jsvOb.call(a.tmpl,c,a,ea);if("~"===b.charAt(0))return"~tag"===b.slice(0,4)&&(e=a.ctx,"."===b.charAt(4)&&(d=b.slice(5).split("."),e=e.tag),d)?e?[e,d.join("."),c]:[]:(b=b.slice(1).split("."),(c=a.hlp(b.shift()))&&(b.length&&f.unshift(b.join(".")),f.unshift(c)),c?f:[]);if("#"===b.charAt(0))return"#data"===b?[]:[a,b.replace(Ua,""),c]}}}function J(a){return a.type===va?a[ua]:a.value}function K(a,b,c,d,e,f){var h,i,j,k,l,m,n,o=0,p=a===b;if(a){for(j=v(a)||[],h=0,i=j.length;h<i;h++){if(k=j[h],(m=k.id)===d&&k.ch===e){if(!f)break;i=0}p||(l="_"===k.ch?ca[m]:Sa[m].linkCtx.tag,k.open?l._prv=b:k.close&&(l._nxt=b)),o+=m.length+2}o&&a.setAttribute(na,a.getAttribute(na).slice(o)),n=b?b.getAttribute(na):c._df,(i=n.indexOf("/"+d+e)+1)&&(n=j._tkns.slice(0,o)+n.slice(i+(f?-1:d.length+1))),n&&(b?b.setAttribute(na,n):g(c,n))}else g(c,t(c._df,"#"+d+e)),f||b||g(c,t(c._df,"/"+d+e))}function L(a){var b,d,e,f;if(f=v(a,!0,Xa))for(b=0,d=f.length;b<d;b++)e=f[b],"_"===e.ch?(e=ca[e.id])&&e.type&&e.parent.removeViews(e._.key,c,!0):F(e.id)}function M(a,b,c){if("set"===c.change){for(var d=a.tgt,e=d.length;e--&&d[e].key!==c.path;);-1===e?c.path&&la(d).insert({key:c.path,prop:c.value}):c.remove?la(d).remove(e):la(d[e]).setProperty("prop",c.value)}}function N(a,b,c){var d,e=a.src,f=c.change;"set"===f?"prop"===c.path?la(e).setProperty(b.target.key,c.value):(la(e).setProperty(c.oldValue,null),delete e[c.oldValue],la(e).setProperty(c.value,b.target.prop)):"remove"===f?(d=c.items[0],la(e).removeProperty(d.key),delete e[d.key]):"insert"===f&&(d=c.items[0],d.key&&la(e).setProperty(d.key,d.prop))}function O(a){return a.indexOf(".")<0}var P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da=a.document,ea=b.views,fa=ea.sub,ga=ea.settings,ha=fa.extend,ia=b.isFunction,ja=ea.converters,ka=ea.tags,la=b.observable,ma=la.observe,na="data-jsv",oa=fa.propChng=fa.propChng||"propertyChange",pa=fa.arrChng=fa.arrChng||"arrayChange",qa="change.jsv",ra="onBeforeChange",sa="onAfterChange",ta="onAfterCreate",ua="checked",va="checkbox",wa="radio",xa="none",ya="true",za='"><\/script>',Aa='<script type="jsv',Ba=na+"-df",Ca="script,["+na+"]",Da="html",Ea={value:"val",input:"val",html:Da,text:"text"},Fa={from:"value",to:"value"},Ga=0,Ha=b.cleanData,Ia=ga.delimiters,Ja=fa.syntaxErr,Ka=/<(?!script)(\w+)(?:[^>]*(on\w+)\s*=)?[^>]*>/,La=/['"\\]/g,Ma=da.createDocumentFragment(),Na=da.querySelector,Oa={ol:1,ul:1,table:1,tbody:1,thead:1,tfoot:1,tr:1,colgroup:1,dl:1,select:1,optgroup:1,svg:1,svg_ns:1},Pa={tr:"table"},Qa={br:1,img:1,input:1,hr:1,area:1,base:1,col:1,link:1,meta:1,command:1,embed:1,keygen:1,param:1,source:1,track:1,wbr:1},Ra={},Sa={},Ta=1,Ua=/^#(view\.?)?/,Va=/(^|(\/>)|<\/(\w+)>|)(\s*)([#\/]\d+[_^])`(\s*)(<\w+(?=[\s\/>]))?|\s*(?:(<\w+(?=[\s\/>]))|<\/(\w+)>(\s*)|(\/>)\s*|(>))/g,Wa=/(#)()(\d+)(_)/g,Xa=/(#)()(\d+)([_^])/g,Ya=/(?:(#)|(\/))(\d+)(_)/g,Za=/(#)()(\d+)(\^)/g,$a=/(?:(#)|(\/))(\d+)([_^])([-+@\d]+)?/g,_a=a.getComputedStyle;if(!b)throw"JsViews requires jQuery";if(!ea)throw"JsViews requires JsRender";if(!la)throw"JsViews requires jquery.observable";b.link||($={contents:function(a,d){a!==!!a&&(d=a,a=c);var e,f=b(this.nodes());return f[0]&&(e=d?f.filter(d):f,f=a&&d?e.add(f.find(d)):e),f},nodes:function(a,b,c){var d,e=this,f=e._elCnt,g=!b&&f,h=[];for(b=b||e._prv,c=c||e._nxt,d=g?b===e._nxt?e.parentElem.lastSibling:b:!1===e._.inline?b||e.linkCtx.elem.firstChild:b&&b.nextSibling;d&&(!c||d!==c);)(a||f||"SCRIPT"!==d.tagName)&&h.push(d),d=d.nextSibling;return h},childTags:function(a,b){a!==!!a&&(b=a,a=c);var d=this,e=d.link?d:d.tagCtx.view,f=d._prv,g=d._elCnt,h=[];return e.link(c,d.parentElem,g?f&&f.previousSibling:f,d._nxt,c,{get:{tags:h,deep:a,name:b,id:d.link?d._.id+"_":d._tgId+"^"}}),h},refresh:function(a){var b,d,e=this,f=e.linkCtx,g=e.tagCtx.view;return e.disposed&&Y("Removed tag"),a===c&&(a=ea._tag(e,g,g.tmpl,D(e),!0)),a+""===a&&(d=e._.inline?Da:f.attr||k(e.parentElem,!0),b=h(a,f,d,e)),z(e,e.tagCtx),b||e},update:function(a){var b=this.linkedElem;b&&d({target:b[0]},c,a)}},fa.onStore.template=function(a,c){c.link=o,c.unlink=H,a&&(b.link[a]=function(){return o.apply(c,arguments)},b.unlink[a]=function(){return H.apply(c,arguments)})},fa.onStore.tag=function(a,b){fa._lnk(b)},fa._lnk=function(a){return ha(a,$)},fa.viewInfos=v,(ga.delimiters=function(){var a=Ia.apply(ea,arguments);return S=a[0],T=a[1],U=a[2],V=a[3],W=a[4],R=new RegExp("(?:^|\\s*)([\\w-]*)(\\"+W+")?(\\"+T+fa.rTag+"\\"+U+")","g"),this})(),ha(fa._lnk(fa.View.prototype),{addViews:function(a,b,c){var d,e,f=this,g=b.length,h=f.views;if(!f._.useKey&&g&&(c=f.tmpl)&&(e=h.length+g,!1!==l(f,a,c,h,b,f.ctx)))for(d=a+g;d<e;d++)la(h[d]).setProperty("index",d);return f},removeViews:function(a,d,e){function f(a){var d,f,g,h,i,k,l=m[a];if(l&&l.link){if(d=l._.id,e||(k=l.nodes()),l.removeViews(c,c,!0),l.type=c,h=l._prv,i=l._nxt,g=l.parentElem,e||(l._elCnt&&K(h,i,g,d,"_"),b(k).remove()),!l._elCnt)try{h.parentNode.removeChild(h),i.parentNode.removeChild(i)}catch(a){}j(l);for(f in l._.bnds)F(f);delete ca[d]}}var g,h,i,k=this,l=!k._.useKey,m=k.views;if(l&&(i=m.length),a===c)if(l){for(g=i;g--;)f(g);k.views=[]}else{for(h in m)f(h);k.views={}}else if(d===c&&(l?d=1:(f(a),delete m[a])),l&&d){for(g=a+d;g-- >a;)f(g);if(m.splice(a,d),i=m.length)for(;a<i;)la(m[a]).setProperty("index",a++)}return this},refresh:function(a){var b=this,c=b.parent;return c&&(l(b,b.index,b.tmpl,c.views,b.data,a,!0),j(b)),b},link:q}),ca={0:ba=new fa.View},ja.merge=function(a){var b,c=this.linkCtx._val||"",d=this.tagCtx.props.toggle;return d&&(b=d.replace(/[\\^$.|?*+()[{]/g,"\\$&"),b="(\\s(?="+b+"$)|(\\s)|^)("+b+"(\\s|$))",c=c.replace(new RegExp(b),"$2"),a=c+(a?(c&&" ")+d:"")),a},ka("on",{attr:xa,onAfterLink:function(a,d){for(var e,f,g=this,h=0,i=a.args,j=i.length,k=a.props.data,l=a.view,m=a.props.context;h<j&&!(f=ia(e=i[h++])););f&&(f=i.slice(h),i=i.slice(0,h-1),m||(m=/^(.*)[\.^][\w$]+$/.exec(a.params.args.slice(-f.length-1)[0]),m=m&&fa.tmplFn("{:"+m[1]+"}",l.tmpl,!0)(d.data,l)),g._evs&&g.onDispose(),b(d.elem).on(g._evs=i[0]||"click",g._sel=i[1],k==c?null:k,g._hlr=function(a){return e.apply(m||d.data,[].concat(f,a,{change:a.type,view:l,linkCtx:d}))}))},onDispose:function(){b(this.parentElem).off(this._evs,this._sel,this._hlr)},flow:!0}),ha(ka.for,{onArrayChange:function(a,b){var c,d=this,e=b.change;if(d.tagCtxs[1]&&("insert"===e&&a.target.length===b.items.length||"remove"===e&&!a.target.length||"refresh"===e&&!b.oldItems.length!=!a.target.length))d.refresh();else for(c in d._.arrVws)c=d._.arrVws[c],c.data===a.target&&c._.onArrayChange.apply(c,arguments);a.done=!0},onAfterLink:function(){var a,c,d,e,f,g=this,h=g._ars||{},i=g.tagCtxs,j=i.length,k=g.selected||0;for(a=0;a<=k;a++)c=i[a],f=c.map?c.map.tgt:c.args.length?c.args[0]:c.view.data,(e=h[a])&&f!==e[0]&&(ma(e[0],e[1],!0),delete h[a]),!h[a]&&b.isArray(f)&&(ma(f,d=function(a,b){g.onArrayChange(a,b)}),h[a]=[f,d]);for(a=k+1;a<j;a++)(e=h[a])&&(ma(e[0],e[1],!0),delete h[a]);g._ars=h},onDispose:function(){var a,b=this;for(a in b._ars)ma(b._ars[a][0],b._ars[a][1],!0)}}),ha(ka.for,$),ha(ka.if,$),ha(ka.include,$),ka("props",{baseTag:ka.for,dataMap:ea.map({getTgt:ka.props.dataMap.getTgt,obsSrc:M,obsTgt:N,tgtFlt:O})}),ha(b,{view:ea.view=Q=function(a,d,e){function f(a,b){if(a)for(h=v(a,b,Wa),j=0,k=h.length;j<k&&(!(g=ca[h[j].id])||!(g=g&&e?g.get(!0,e):g));j++);}d!==!!d&&(e=d,d=c);var g,h,i,j,k,l,m,n=0,o=da.body;if(a&&a!==o&&ba._.useKey>1&&(a=""+a===a?b(a)[0]:a.jquery?a[0]:a)){if(d){if(f(a._df,!0),!g)for(m=Na?a.querySelectorAll(Ca):b(Ca,a).get(),l=m.length,i=0;!g&&i<l;i++)f(m[i]);return g}for(;a;){if(h=v(a,c,Ya))for(l=h.length;l--;)if(g=h[l],g.open){if(n<1)return g=ca[g.id],g&&e?g.get(e):g||ba;n--}else n++;a=a.previousSibling||a.parentNode}}return ba},link:ea.link=p,unlink:ea.unlink=G,cleanData:function(a){a.length&&Ga&&E(a),Ha.apply(b,arguments)}}),ea.utility={validate:function(a){try{ba.link(c,da.createElement("div"),c,c,a,c,c,1)}catch(a){return a.message}}},ha(b.fn,{link:function(a,b,c,d,e,f,g){return p(a,this,b,c,d,e,f,g)},unlink:function(a){return G(a,this)},view:function(a){return Q(this[0],a)}}),b.each([Da,"replaceWith","empty","remove"],function(a,c){var d=b.fn[c];b.fn[c]=function(){var a;Ga=1;try{a=d.apply(this,arguments)}finally{Ga=0}return a}}),ha(ba,{tmpl:{links:{},tags:{}}}),ba._.onRender=m,ga({wrapMap:aa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],svg_ns:[1,"<svg>","</svg>"],div:jQuery.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},linkAttr:Z="data-link",merge:{input:{from:J,to:"value"},textarea:Fa,select:Fa,optgroup:{to:"label"}},jsrDbgMode:ga.debugMode,debugMode:function(b){ga.jsrDbgMode(b),b?a._jsv={views:ca,bindings:Sa}:delete a._jsv},jsv:function(){ga.debugMode(ga._dbgMode),Z=ga.linkAttr,Y=ea._err,_=Ca+",["+Z+"]",X=ga.noDomLevel0,aa.optgroup=aa.option,aa.tbody=aa.tfoot=aa.colgroup=aa.caption=aa.thead,aa.th=aa.td}}))}(this,this.jQuery)}())},{}]},{},[1]);