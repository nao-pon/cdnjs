!(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("@riim/object-assign-polyfill"),require("@riim/map-set-polyfill"),require("@riim/logger"),require("@riim/symbol-polyfill"),require("@riim/is"),require("@riim/mixin"),require("@riim/next-tick")):"function"==typeof define&&define.amd?define(["@riim/object-assign-polyfill","@riim/map-set-polyfill","@riim/logger","@riim/symbol-polyfill","@riim/is","@riim/mixin","@riim/next-tick"],e):t.cellx=e(t.objectAssignPolyfill,t.mapSetPolyfill,t.errorLogger,t.symbolPolyfill,t.is,t.mixin,t.nextTick)})(this,(function(t,e,i,s,n,r,h){"use strict";function a(){this._events=new e.Map}function o(t){if(z||t){z=!1,P++;for(var e=I.get(V);;){var i=e&&e.shift();if(i){var s=V,n=i._level,r=i._changeEvent;if(!r){if(n>V||-1==i._levelInRelease){if(!e.length){if(V==S)break;e=I.get(++V)}continue}if(i.pull(),(n=i._level)>s){V==s?e.length||(e=I.get(++V)):e=I.get(V);continue}r=i._changeEvent}if(i._levelInRelease=-1,r){i._fixedValue=i._value,i._changeEvent=null;for(var h=i._pushingIndex,a=i._slaves,o=0,l=a.length;o<l;o++){var u=a[o];u._level<=n&&(u._level=n+1),h>u._pushingIndex&&(u._pushingIndex=h,u._changeEvent=null,u._addToRelease())}if(i._state|=A,i._handleEvent(r),!(i._state&A))break;if(i._state^=A,V==E)break}if(V==s){if(!e.length){if(V==S)break;e=I.get(++V)}}else e=I.get(V)}else{if(V==S)break;e=I.get(++V)}}if(!--P&&(V=E,S=-1,O++,y)){var f=y;y=null;for(var o=0,l=f.length;o<l;o++){var _=f[o];"function"==typeof _?_():_[0]._push(_[1],!0,!1)}}}}function l(t,e){t.push(e)}function u(t,e){a.call(this),this.debugKey=e&&e.debugKey,this.context=e&&(e.context||e.owner)||this,this._pull="function"==typeof t?t:null,this._get=e&&e.get||null,this._validate=e&&e.validate||null,this._merge=e&&e.merge||null,this._put=e&&e.put||l,this._reap=e&&e.reap||null,this._pull?this._fixedValue=this._value=void 0:(this._validate&&this._validate(t,void 0),this._merge&&(t=this._merge(t,void 0)),this._fixedValue=this._value=t,t instanceof a&&t.on("change",this._onValueChange,this)),this._error=null,this._selfErrorCell=null,this._errorCell=null,this._errorIndex=0,this._pushingIndex=0,this._version=0,this._masters=void 0,this._slaves=[],this._level=0,this._levelInRelease=-1,this._selfPendingStatusCell=null,this._pendingStatusCell=null,this._changeEvent=null,this._lastErrorEvent=null,this._state=j,e&&(e.onChange&&this.on("change",e.onChange),e.onError&&this.on("error",e.onError))}function f(){this._isFrozen=!1}function _(){this._valueCounts=new e.Map}function c(t,e){return t<e?-1:t>e?1:0}function g(t,e){a.call(this),f.call(this),_.call(this),"boolean"==typeof e&&(e={adoptsValueChanges:e}),this._items=[],this.length=0,this.adoptsValueChanges=!(!e||!e.adoptsValueChanges),this.comparator=null,this.sorted=!1,e&&(e.sorted||e.comparator&&!1!==e.sorted)&&(this.comparator=e.comparator||c,this.sorted=!0),t&&this._addRange(t)}function v(t,i){if(a.call(this),f.call(this),_.call(this),"boolean"==typeof i&&(i={adoptsValueChanges:i}),this._entries=new e.Map,this.size=0,this.adoptsValueChanges=!(!i||!i.adoptsValueChanges),t){var s=this._entries;if(t instanceof v||t instanceof e.Map)t._entries.forEach((function(t,e){this._registerValue(t),s.set(e,t)}),this);else if(Array.isArray(t))for(var n=0,r=t.length;n<r;n++){var h=t[n];this._registerValue(h[1]),s.set(h[0],h[1])}else for(var o in t)this._registerValue(t[o]),s.set(o,t[o]);this.size=s.size}}function d(i,s){function n(i){var h=this;h&&h!=q||(h=n),L.call(h,M)||Object.defineProperty(h,M,{value:new e.Map});var a=h[M].get(n);if(!a){if("dispose"===i&&arguments.length>=2)return;a=new u(r,t.assign({context:h},s)),h[M].set(n,a)}switch(arguments.length){case 0:return a.get();case 1:return a.set(i),i;default:var o=i;switch(o){case"bind":return n=n.bind(h),n.constructor=d,n;case"unwrap":return a;default:var l=u.prototype[o].apply(a,K.call(arguments,1));return l===a?n:l}}}s||(s={});var r=i;return n.constructor=d,(s.onChange||s.onError)&&n.call(s.context||q),n}function p(t,e,i){var s=e+"Cell";return Object.defineProperty(t,s,{configurable:!0,enumerable:!1,writable:!0,value:i instanceof u?i:new u(i,{context:t})}),Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return this[s].get()},set:function(t){this[s].set(t)}}),t}function m(t,e){return Object.keys(e).forEach((function(i){p(t,i,e[i])})),t}a.currentlySubscribing=!1,a.prototype={constructor:a,getEvents:function(t){var e;return t?(e=this._events.get(t))?Array.isArray(e)?e:[e]:[]:(e=Object.create(null),this._events.forEach((function(t,i){e[i]=Array.isArray(t)?t:[t]})),e)},on:function(t,e,i){if("object"==typeof t){i=void 0!==e?e:this;var s=t;for(t in s)this._on(t,s[t],i)}else this._on(t,e,void 0!==i?i:this);return this},off:function(t,e,i){if(t)if("object"==typeof t){i=void 0!==e?e:this;var s=t;for(t in s)this._off(t,s[t],i)}else this._off(t,e,void 0!==i?i:this);else this._events.clear();return this},_on:function(t,e,i){var s=t.indexOf(":");if(-1!=s){var n=t.slice(s+1);a.currentlySubscribing=!0,(this[n+"Cell"]||(this[n],this[n+"Cell"])).on(t.slice(0,s),e,i),a.currentlySubscribing=!1}else{var r=this._events.get(t),h={listener:e,context:i};r?Array.isArray(r)?r.push(h):this._events.set(t,[r,h]):this._events.set(t,h)}},_off:function(t,e,i){var s=t.indexOf(":");if(-1!=s){var n=t.slice(s+1);(this[n+"Cell"]||(this[n],this[n+"Cell"])).off(t.slice(0,s),e,i)}else{var r=this._events.get(t);if(!r)return;var h;if(Array.isArray(r)){if(1!=r.length){for(var a=r.length;a;)if((h=r[--a]).listener==e&&h.context===i){r.splice(a,1);break}return}h=r[0]}else h=r;h.listener==e&&h.context===i&&this._events.delete(t)}},once:function(t,e,i){function s(n){return this._off(t,s,i),e.call(this,n)}return void 0===i&&(i=this),this._on(t,s,i),s},emit:function(t){if("string"==typeof t)t={target:this,type:t};else if(t.target){if(t.target!=this)throw new TypeError("Event cannot be emitted on this object")}else t.target=this;return this._handleEvent(t),t},_handleEvent:function(t){var e=this._events.get(t.type);if(e)if(Array.isArray(e)){var i=e.length;if(1==i)!1===this._tryEventListener(e[0],t)&&(t.isPropagationStopped=!0);else{e=e.slice();for(var s=0;s<i;s++)!1===this._tryEventListener(e[s],t)&&(t.isPropagationStopped=!0)}}else!1===this._tryEventListener(e,t)&&(t.isPropagationStopped=!0)},_tryEventListener:function(t,e){try{return t.listener.call(t.context,e)}catch(t){i.error(t)}}};var y,x=a.prototype,E=Number.MAX_SAFE_INTEGER||9007199254740991,C=s.Symbol("wrappers"),b=0,w=0,I=new e.Map,V=E,S=-1,z=!1,P=0,R=null,F={error:null},O=1,A=2,j=64;r.mixin(u,{get currentlyPulling(){return!!R},autorun:function(t,e){var i;return new u(function(){var s=this;i||(i=function(){s.dispose()}),t.call(e,i)},{onChange:function(){}}),i},forceRelease:function(){(z||P)&&o(!0)},afterRelease:function(t){(y||(y=[])).push(t)}}),u.prototype={__proto__:a.prototype,constructor:u,on:function(t,e,i){return(z||P)&&o(!0),this._activate(),"object"==typeof t?x.on.call(this,t,void 0!==e?e:this.context):x.on.call(this,t,e,void 0!==i?i:this.context),this._state|=16,this},off:function(t,e,i){return(z||P)&&o(!0),t?"object"==typeof t?x.off.call(this,t,void 0!==e?e:this.context):x.off.call(this,t,e,void 0!==i?i:this.context):x.off.call(this),!this._slaves.length&&!this._events.has("change")&&!this._events.has("error")&&16&this._state&&(this._state^=16,this._deactivate(),this._reap&&this._reap.call(this.context)),this},addChangeListener:function(t,e){return this.on("change",t,void 0!==e?e:this.context)},removeChangeListener:function(t,e){return this.off("change",t,void 0!==e?e:this.context)},addErrorListener:function(t,e){return this.on("error",t,void 0!==e?e:this.context)},removeErrorListener:function(t,e){return this.off("error",t,void 0!==e?e:this.context)},subscribe:function(t,i){function s(e){return t.call(this,e.error||null,e)}var n=t[C];return n&&n.has(t)?this:((n||(t[C]=new e.Map)).set(this,s),void 0===i&&(i=this.context),this.on("change",s,i).on("error",s,i))},unsubscribe:function(t,e){var i=t[C],s=i&&i.get(this);return s?(i.delete(this),void 0===e&&(e=this.context),this.off("change",s,e).off("error",s,e)):this},_registerSlave:function(t){this._activate(),this._slaves.push(t),this._state|=16},_unregisterSlave:function(t){this._slaves.splice(this._slaves.indexOf(t),1),this._slaves.length||this._events.has("change")||this._events.has("error")||(this._state^=16,this._deactivate(),this._reap&&this._reap.call(this.context))},_activate:function(){if(this._pull&&!(8&this._state)&&null!==this._masters){var t=this._masters;if(this._version<O){var e=this._tryPull();!t&&!this._masters&&1&this._state||(e===F?this._fail(F.error,!1):this._push(e,!1,!1)),t=this._masters}if(t){var i=t.length;do{t[--i]._registerSlave(this)}while(i);this._state|=8}}},_deactivate:function(){if(8&this._state){var t=this._masters,e=t.length;do{t[--e]._unregisterSlave(this)}while(e);-1==this._levelInRelease||this._changeEvent||(this._levelInRelease=-1),this._state^=8}},_addToRelease:function(){var t=this._level;if(!(t<=this._levelInRelease)){var e;(I.get(t)||(I.set(t,e=[]),e)).push(this),V>t&&(V=t),S<t&&(S=t),this._levelInRelease=t,z||P||(z=!0,h.nextTick(o))}},_onValueChange:function(t){if(16&this._state)if(R){var e=this;(y||(y=[])).push(this,(function(){e._onValueChange$(t)}))}else this._onValueChange$(t);else this._pushingIndex=++w,this._version=++O+(P>0)},_onValueChange$:function(t){this._pushingIndex=++w,this._changeEvent?((t.data||(t.data={})).prev=this._changeEvent,this._changeEvent=t,this._value===this._fixedValue&&(this._state&=~j)):((t.data||(t.data={})).prev=null,this._changeEvent=t,this._state&=~j,this._addToRelease())},get:function(){if(this._pull)if(8&this._state)(z||P&&!R)&&o(!0);else if(this._version<O+(P>0)&&null!==this._masters){var t=this._masters,e=this._tryPull(),i=this._masters;if(t||i||!(1&this._state)){if(i&&16&this._state){var s=i.length;do{i[--s]._registerSlave(this)}while(s);this._state|=8}e===F?this._fail(F.error,!1):this._push(e,!1,!1)}}if(R){var n=R._masters,r=this._level;n?-1==n.indexOf(this)&&(n.push(this),R._level<=r&&(R._level=r+1)):(R._masters=[this],R._level=r+1)}return this._get?this._get(this._value):this._value},pull:function(){if(!this._pull)return!1;z&&o();var t,e,i=16&this._state;i&&(t=this._masters,e=this._level);var s=this._tryPull();if(i){var n=this._masters,r=0;if(n){a=n.length;do{var h=n[--a];t&&-1!=t.indexOf(h)||(h._registerSlave(this),r++)}while(a)}if(t&&(n?n.length-r:0)<t.length)for(var a=t.length;a;){var l=t[--a];n&&-1!=n.indexOf(l)||l._unregisterSlave(this)}if(n&&n.length?this._state|=8:this._state&=-9,P&&this._level>e)return this._addToRelease(),!1}return s===F?(this._fail(F.error,!1),!0):this._push(s,!1,!0)},_tryPull:function(){if(4&this._state)throw new TypeError("Circular pulling detected");var t=this._pull;t.length&&(this._state|=32,this._selfPendingStatusCell&&this._selfPendingStatusCell.set(!0));var e=R;R=this,this._state|=4,this._masters=null,this._level=0;try{return t.length?t.call(this.context,this,this._value):t.call(this.context)}catch(t){return F.error=t,F}finally{R=e,this._version=O+(P>0);var i=this._pendingStatusCell;i&&8&i._state&&i.pull();var s=this._errorCell;s&&8&s._state&&s.pull(),this._state^=4}},getError:function(){var t=this._errorCell;if(!t){var e=this.debugKey;this._selfErrorCell=new u(this._error,e?{debugKey:e+"._selfErrorCell"}:null),t=this._errorCell=new u(function(){this.get();var t,e=this._selfErrorCell.get();if(e&&(t=this._errorIndex)==b)return e;var i=this._masters;if(i){var s=i.length;do{var n=i[--s],r=n.getError();if(r){var h=n._errorIndex;if(h==b)return r;(!e||t<h)&&(e=r,t=h)}}while(s)}return e},e?{debugKey:e+"._errorCell",context:this}:{context:this})}return t.get()},isPending:function(){var t=this._pendingStatusCell;if(!t){var e=this.debugKey;this._selfPendingStatusCell=new u(!!(32&this._state),e?{debugKey:e+"._selfPendingStatusCell"}:null),t=this._pendingStatusCell=new u(function(){if(this._selfPendingStatusCell.get())return!0;this.get();var t=this._masters;if(t){var e=t.length;do{if(t[--e].isPending())return!0}while(e)}return!1},e?{debugKey:e+"._pendingStatusCell",context:this}:{context:this})}return t.get()},set:function(t){return this._validate&&this._validate(t,this._value),this._merge&&(t=this._merge(t,this._value)),this._state|=32,this._selfPendingStatusCell&&this._selfPendingStatusCell.set(!0),this._put.length>=3?this._put.call(this.context,this,t,this._value):this._put.call(this.context,this,t),this},push:function(t){return this._push(t,!0,!1),this},_push:function(t,e,i){this._state|=1;var s=this._value;return e&&R&&16&this._state?n.is(t,s)?(this._setError(null),this._resolvePending(),!1):((y||(y=[])).push([this,t]),!0):((e||!P&&i)&&(this._pushingIndex=++w),this._setError(null),n.is(t,s)?((e||P&&i)&&this._resolvePending(),!1):(this._value=t,s instanceof a&&s.off("change",this._onValueChange,this),t instanceof a&&t.on("change",this._onValueChange,this),16&this._state?this._changeEvent?n.is(t,this._fixedValue)&&this._state&j?(this._levelInRelease=-1,this._changeEvent=null):this._changeEvent={target:this,type:"change",data:{oldValue:s,value:t,prev:this._changeEvent}}:(this._changeEvent={target:this,type:"change",data:{oldValue:s,value:t,prev:null}},this._state|=j,this._addToRelease()):((e||!P&&i)&&O++,this._fixedValue=t,this._version=O+(P>0)),(e||P&&i)&&this._resolvePending(),!0))},fail:function(t){return this._fail(t,!0),this},_fail:function(t,e){i.error("["+this.debugKey+"]",t),t instanceof Error||(t=new Error(String(t))),this._setError(t),e&&this._resolvePending()},_setError:function(t){(t||this._error)&&(this._error=t,this._selfErrorCell&&this._selfErrorCell.set(t),t&&(this._errorIndex=++b,this._handleErrorEvent({type:"error",data:{error:t}})))},_handleErrorEvent:function(t){if(this._lastErrorEvent!==t){this._lastErrorEvent=t,this._handleEvent(t);for(var e=this._slaves,i=0,s=e.length;i<s;i++)e[i]._handleErrorEvent(t)}},_resolvePending:function(){32&this._state&&(this._state^=32,this._selfPendingStatusCell&&this._selfPendingStatusCell.set(!1))},reap:function(){for(var t=this._slaves,e=0,i=t.length;e<i;e++)t[e].reap();return this.off()},dispose:function(){return this.reap()}},u.prototype[s.Symbol.iterator]=function(){return this._value[s.Symbol.iterator]()},f.prototype={get isFrozen(){return this._isFrozen},freeze:function(){return this._isFrozen=!0,this},unfreeze:function(){return this._isFrozen=!1,this},_throwIfFrozen:function(t){if(this._isFrozen)throw new TypeError(t||"Frozen collection cannot be mutated")}},_.prototype={_onItemChange:function(t){this._handleEvent(t)},_registerValue:function(t){var e=this._valueCounts,i=e.get(t);i?e.set(t,i+1):(e.set(t,1),this.adoptsValueChanges&&t instanceof a&&t.on("change",this._onItemChange,this))},_unregisterValue:function(t){var e=this._valueCounts,i=e.get(t);i>1?e.set(t,i-1):(e.delete(t),this.adoptsValueChanges&&t instanceof a&&t.off("change",this._onItemChange,this))}};var k=Array.prototype.push,T=Array.prototype.splice;g.prototype=r.mixin({__proto__:a.prototype},[f.prototype,_.prototype,{constructor:g,contains:function(t){return this._valueCounts.has(t)},indexOf:function(t,e){return this._items.indexOf(t,this._validateIndex(e,!0))},lastIndexOf:function(t,e){return this._items.lastIndexOf(t,void 0===e?-1:this._validateIndex(e,!0))},get:function(t){return this._items[this._validateIndex(t,!0)]},getRange:function(t,e){t=this._validateIndex(t,!0);var i=this._items;if(void 0===e)return i.slice(t);if(t+e>i.length)throw new RangeError('Sum of "index" and "count" out of valid range');return i.slice(t,t+e)},set:function(t,e){if(this.sorted)throw new TypeError("Cannot set to sorted list");t=this._validateIndex(t,!0);var i=this._items;return n.is(e,i[t])?this:(this._throwIfFrozen(),this._unregisterValue(i[t]),this._registerValue(e),i[t]=e,this.emit("change"),this)},setRange:function(t,e){if(this.sorted)throw new TypeError("Cannot set to sorted list");t=this._validateIndex(t,!0);var i=e.length;if(!i)return this;if(t+i>this.length)throw new RangeError('Sum of "index" and "values.length" out of valid range');e instanceof g&&(e=e._items.slice());for(var s=this._items,r=!1,h=t+i;h>t;){var a=e[--h-t];n.is(a,s[h])||(r||this._throwIfFrozen(),this._unregisterValue(s[h]),this._registerValue(a),s[h]=a,r=!0)}return r&&this.emit("change"),this},add:function(t){return this._throwIfFrozen(),this.sorted?this._insertSortedValue(t):(this._registerValue(t),this._items.push(t)),this.length++,this.emit("change"),this},addRange:function(t){return t.length&&(this._throwIfFrozen(),this._addRange(t),this.emit("change")),this},_addRange:function(t){if(t instanceof g&&(t=t._items.slice()),this.sorted){for(var e=0,i=t.length;e<i;e++)this._insertSortedValue(t[e]);this.length+=t.length}else{for(e=t.length;e;)this._registerValue(t[--e]);this.length=k.apply(this._items,t)}},insert:function(t,e){if(this.sorted)throw new TypeError("Cannot insert to sorted list");return t=this._validateIndex(t,!0),this._throwIfFrozen(),this._registerValue(e),this._items.splice(t,0,e),this.length++,this.emit("change"),this},insertRange:function(t,e){if(this.sorted)throw new TypeError("Cannot insert to sorted list");t=this._validateIndex(t,!0);var i=e.length;if(!i)return this;this._throwIfFrozen(),e instanceof g&&(e=e._items);for(var s=i;s;)this._registerValue(e[--s]);return T.apply(this._items,[t,0].concat(e)),this.length+=i,this.emit("change"),this},remove:function(t,e){var i=this._items.indexOf(t,this._validateIndex(e,!0));return-1!=i&&(this._throwIfFrozen(),this._unregisterValue(t),this._items.splice(i,1),this.length--,this.emit("change"),!0)},removeAll:function(t,e){for(var i=this._validateIndex(e,!0),s=this._items,n=!1;-1!=(i=s.indexOf(t,i));)n||this._throwIfFrozen(),this._unregisterValue(t),s.splice(i,1),n=!0;return n&&(this.length=s.length,this.emit("change")),n},removeEach:function(t,e){e=this._validateIndex(e,!0),t instanceof g&&(t=t._items.slice());for(var i=this._items,s=!1,n=0,r=t.length;n<r;n++){var h=t[n],a=i.indexOf(h,e);-1!=a&&(s||this._throwIfFrozen(),this._unregisterValue(h),i.splice(a,1),s=!0)}return s&&(this.length=i.length,this.emit("change")),s},removeAllEach:function(t,e){e=this._validateIndex(e,!0),t instanceof g&&(t=t._items.slice());for(var i=this._items,s=!1,n=0,r=t.length;n<r;n++)for(var h=t[n],a=e;-1!=(a=i.indexOf(h,a));)s||this._throwIfFrozen(),this._unregisterValue(h),i.splice(a,1),s=!0;return s&&(this.length=i.length,this.emit("change")),s},removeAt:function(t){var e=this._items.splice(this._validateIndex(t),1)[0];return this._throwIfFrozen(),this._unregisterValue(e),this.length--,this.emit("change"),e},removeRange:function(t,e){t=this._validateIndex(t,!0);var i=this._items;if(void 0===e)e=i.length-t;else if(t+e>i.length)throw new RangeError('Sum of "index" and "count" out of valid range');if(!e)return[];this._throwIfFrozen();for(var s=t+e;s>t;)this._unregisterValue(i[--s]);var n=i.splice(t,e);return this.length-=e,this.emit("change"),n},clear:function(){return this.length?(this._throwIfFrozen(),this.adoptsValueChanges&&this._valueCounts.forEach((function(t){t instanceof a&&t.off("change",this._onItemChange,this)}),this),this._items.length=0,this._valueCounts.clear(),this.length=0,this.emit({type:"change",data:{subtype:"clear"}}),this):this},join:function(t){return this._items.join(t)},forEach:null,map:null,filter:null,find:function(t,e){for(var i=this._items,s=0,n=i.length;s<n;s++){var r=i[s];if(t.call(e,r,s,this))return r}},findIndex:function(t,e){for(var i=this._items,s=0,n=i.length;s<n;s++)if(t.call(e,i[s],s,this))return s;return-1},every:null,some:null,reduce:null,reduceRight:null,clone:function(){return new this.constructor(this,{adoptsValueChanges:this.adoptsValueChanges,comparator:this.comparator,sorted:this.sorted})},toArray:function(){return this._items.slice()},toString:function(){return this._items.join()},_validateIndex:function(t,e){if(void 0===t)return t;if(t<0){if((t+=this.length)<0)throw new RangeError("Index out of valid range")}else if(t>=this.length+(e?1:0))throw new RangeError("Index out of valid range");return t},_insertSortedValue:function(t){this._registerValue(t);for(var e=this._items,i=this.comparator,s=0,n=e.length;s!=n;){var r=s+n>>1;i(t,e[r])<0?n=r:s=r+1}e.splice(s,0,t)}}]),["forEach","map","filter","every","some"].forEach((function(t){g.prototype[t]=function(e,i){return this._items[t]((function(t,s){return e.call(i,t,s,this)}),this)}})),["reduce","reduceRight"].forEach((function(t){g.prototype[t]=function(e,i){function s(t,i,s){return e(t,i,s,r)}var n=this._items,r=this;return arguments.length>=2?n[t](s,i):n[t](s)}})),[["keys",function(t){return t}],["values",function(t,e){return e}],["entries",function(t,e){return[t,e]}]].forEach((function(t){var e=t[1];g.prototype[t[0]]=function(){var t=this._items,i=0,s=!1;return{next:function(){if(!s){if(i<t.length)return{value:e(i,t[i++]),done:!1};s=!0}return{value:void 0,done:!0}}}}})),g.prototype[s.Symbol.iterator]=g.prototype.values,v.prototype=r.mixin({__proto__:a.prototype},[f.prototype,_.prototype,{constructor:v,has:function(t){return this._entries.has(t)},contains:function(t){return this._valueCounts.has(t)},get:function(t){return this._entries.get(t)},set:function(t,e){var i,s=this._entries,r=s.has(t);if(r){if(i=s.get(t),n.is(e,i))return this;this._throwIfFrozen(),this._unregisterValue(i)}else this._throwIfFrozen();return this._registerValue(e),s.set(t,e),r||this.size++,this.emit({type:"change",data:{subtype:r?"update":"add",key:t,oldValue:i,value:e}}),this},delete:function(t){var e=this._entries;if(!e.has(t))return!1;this._throwIfFrozen();var i=e.get(t);return this._unregisterValue(i),e.delete(t),this.size--,this.emit({type:"change",data:{subtype:"delete",key:t,oldValue:i,value:void 0}}),!0},clear:function(){return this.size?(this._throwIfFrozen(),this.adoptsValueChanges&&this._valueCounts.forEach((function(t){t instanceof a&&t.off("change",this._onItemChange,this)}),this),this._entries.clear(),this._valueCounts.clear(),this.size=0,this.emit({type:"change",data:{subtype:"clear"}}),this):this},forEach:function(t,e){this._entries.forEach((function(i,s){t.call(e,i,s,this)}),this)},keys:function(){return this._entries.keys()},values:function(){return this._entries.values()},entries:function(){return this._entries.entries()},clone:function(){return new this.constructor(this,{adoptsValueChanges:this.adoptsValueChanges})}}]),v.prototype[s.Symbol.iterator]=v.prototype.entries;var M=s.Symbol("cellx.cellMap"),L=Object.prototype.hasOwnProperty,K=Array.prototype.slice,q=Function("return this;")();return d.EventEmitter=a,d.FreezableCollectionMixin=f,d.ObservableCollectionMixin=_,d.ObservableMap=v,d.ObservableList=g,d.Cell=u,d.autorun=u.autorun,d.KEY_CELL_MAP=M,d.map=function(t,e){return new v(t,e)},d.list=function(t,e){return new g(t,e)},d.defineObservableProperty=p,d.defineObservableProperties=m,d.define=function(t,e,i){return"string"==typeof e?p(t,e,i):m(t,e),t},d.cellx=d,d.default=d,d.__esModule=!0,d}));