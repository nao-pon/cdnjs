!function(e,t,n,i){e.Typeahead={jsonList:{}},"function"!=typeof Object.preventExtensions&&(Object.preventExtensions=function(e){return e});var a={settings:{compression:!1,order:null,minLength:2,maxItem:8,startCharacter:!1,group:!1,list:!1,ttl:3600,backdrop:!1,input:null,groupListClass:"typeahead-search-group",searchListClass:"typeahead-search",jsonList:{}},callback:{onInit:null,onMouseEnter:null,onMouseLeave:null,onClick:null},debug:!1},o={settings:{compression:[!0,!1],order:[null,"asc","desc"],group:[!0,!1],backdrop:[!0,!1],jsonList:["storage","pattern","data","url"]},debug:[!0,!1]},s=function(i,s){function r(){s instanceof Object||(s={}),n.jStorage||s.debug&&e.Debug.log({node:i,function:"extendOptions()",arguments:"$.jStorage",message:"WARNING - It is strongly recommended to have $.jStorage available on your page to store the result set(s)"});var t=Object.preventExtensions(n.extend(!0,{},a));for(var r in s)if(s.hasOwnProperty(r)&&"debug"!==r){if(void 0===a[r]){s.debug&&e.Debug.log({node:i,function:"extendOptions()",arguments:"{"+r+": "+JSON.stringify(s[r])+"}",message:"WARNING - Invalid option: "+r}),delete s[r];break}for(var l in s[r])if(s[r].hasOwnProperty(l))if(void 0!==a[r][l])if("jsonList"===l&&s[r][l]instanceof Object){for(var u in s[r][l])if(s[r][l].hasOwnProperty(u)){s[r][l][u]instanceof Object&&"data"!==u||(u="list",s[r][l]={list:s[r][l]});for(var c in s[r][l][u])s[r][l][u].hasOwnProperty(c)&&(-1!==n.inArray(c,o[r][l])||(s.debug&&e.Debug.log({node:i,function:"extendOptions()",arguments:"{"+c+": "+JSON.stringify(s[r][l][u][c])+"}",message:"WARNING - Invalid jsonList option: "+c}),delete s[r][l][u][c]))}}else o[r]&&o[r][l]&&-1===n.inArray(s[r][l],o[r][l])&&(s.debug&&e.Debug.log({node:i,function:"extendOptions()",arguments:"{"+l+":"+JSON.stringify(s[l])+"}",message:"WARNING - Unsupported option: "+l}),delete s[r][l]);else s.debug&&e.Debug.log({node:i,function:"extendOptions()",arguments:"{"+l+": "+JSON.stringify(s[r][l])+"}",message:"WARNING - Invalid option: "+l}),delete s[r][l]}s=n.extend(!0,t,s)}function l(){L(s.callback.onInit,[i]),s.debug&&e.Debug.log({node:i,function:"delegateTypeahead()",arguments:JSON.stringify(s),message:"OK - Typeahead activated on "+(s.settings.input||"#"+i.id||'[name="'+i.name+'"]')});var t=["focus.ac","keyup.ac","keypress.ac","keydown.ac"];n("html").on("click.wtf",function(){f()}),n(i).parent().on("click.wtf",function(e){e.stopPropagation()}),n(i).on(t.join(" "),function(e){"focus"!==e.type||d||g();var t=this;setTimeout(function(){if(n(t).val()===p)return!1;p=n(t).val().toLowerCase().trim(),f(),p.length>=s.settings.minLength&&""!==p&&(u(),c())},0,e,t)})}function u(){for(var e in h)for(var t in h[e]){if(y.length>=s.settings.maxItem)break;!h[e][t].display||-1===h[e][t].display.toLowerCase().indexOf(p)||s.settings.startCharacter&&0!==h[e][t].display.toLowerCase().indexOf(p)||(h[e][t].list=e,y.push(h[e][t]))}s.settings.order&&y.sort(j("display",s.settings.group&&!("asc"===s.settings.order)||!("asc"!==s.settings.order),function(e){return e.toUpperCase()}))}function c(){var e,t=n("<div/>",{class:s.settings.searchListClass,html:n("<ul/>",{html:function(){for(var t in y)!function(t,a){s.settings.group&&!n(a).find('li[data-search-group="'+t.list+'"]')[0]&&n(a).append(n("<li/>",{class:s.settings.groupListClass,html:n("<a/>",{html:t.list}),"data-search-group":t.list})),e=t.display.match(new RegExp(p,"i"));var o=n("<li/>",{html:n("<a/>",{href:"javascript:;","data-list":t.list,html:t.display.replace(new RegExp(p,"i"),"<strong>"+e[0]+"</strong>")+(s.settings.list?"<small>"+t.list+"</small>":""),click:function(e){e.preventDefault(),n(i).val(t.display).focus(),p=t.display,f(),L(s.callback.onClick,[i,this,t])},mouseenter:function(){L(s.callback.onMouseEnter,[i,this,t])},mouseleave:function(){L(s.callback.onMouseLeave,[i,this,t])}})});s.settings.group?n(o).insertAfter(n(a).find('li[data-search-group="'+t.list+'"]')):n(a).append(o)}(y[t],this)}})});n(i).parent().append(t)}function f(){y=[],n(i).parent().find("."+s.settings.searchListClass).remove()}function g(){var t,i,a=s.settings.jsonList;if(0===v)for(var o in a)a.hasOwnProperty(o)&&++v;for(var r in a)if(a.hasOwnProperty(r))if(h[r]&&h[r]!=={}||a[r].storage&&n.jStorage.get(a[r].storage))console.log(r+": already stored");else{if(h[r]=[],a[r].data&&a[r].data instanceof Array){for(var l in a[r].data){if(a[r].data[l]instanceof Object)break;a[r].data[l]={display:a[r].data[l]}}h[r]=h[r].concat(a[r].data),a[r].url||b++}a[r].url&&(t=a[r].url instanceof Array&&a[r].url[0]||a[r].url,i=a[r].url instanceof Array&&a[r].url[1]||null,/https?:\/\//.test(t)&&-1===t.indexOf(e.location.host)?N.fetch(t+"/"+encodeURIComponent(m)+"/",function(e){}):n.ajax({async:!0,url:t,ajaxList:r,ajaxPath:i}).done(function(e){O(e,this.ajaxList,this.ajaxPath),b++,length}).fail(function(e){b++}))}b===v&&(d=!0,console.log("ALL LIST FETCHED"))}var p="",d=!1,h={},y=[],m="window.Typeahead.jsonList['#search_v1-game'].populate",b=0,v=0,O=function(e,t,n){var i=!0;if(n)for(var a=n.split("."),o=0;o<a.length;){if(void 0===e){i=!1;break}e=e[a[o++]]}if(i){for(var s in e){if(e[s]instanceof Object)break;e[s]={display:e[s]}}h[t]=h[t].concat(e)}},j=function(e,t,n){var i=n?function(t){return n(t[e])}:function(t){return t[e]};return t=[-1,1][+!!t],function(e,n){return e=i(e),n=i(n),t*((e>n)-(n>e))}},L=function(t,a){if(!t)return!1;var o;if("function"==typeof t)o=t;else if("string"==typeof t||t instanceof Array){o=e,"string"==typeof t&&(t=[t,[]]);for(var r=t[0].split("."),l=t[1],u=!0,c=0;c<r.length;){if(void 0===o){u=!1;break}o=o[r[c++]]}if(!u||"function"!=typeof o)return s.debug&&e.Debug.log({node:i,function:"_executeCallback()",arguments:JSON.stringify(t),message:'WARNING - Invalid callback function"'}),!1}return o.apply(this,n.merge(l||[],a||[])),!0},N={fetch:function(n,i){var a=encodeURIComponent(m);e[a]=this.evalJSONP(i),n=n.replace("="+m,"="+a);var o=t.createElement("SCRIPT");o.src=n,t.getElementsByTagName("HEAD")[0].appendChild(o)},evalJSONP:function(e){return function(t){var n=!1;if("string"==typeof t)try{n=JSON.parse(t)}catch(e){}else n=JSON.parse(JSON.stringify(t));if(!n)throw"JSONP call returned invalid or empty JSON";e(n)}}};return this.__construct=(r(),l(),void(e.Debug&&e.Debug.print())),{populate:function(e){var t=e.list||"list",n=s.settings.jsonList[t].url instanceof Array?s.settings.jsonList[t].url[1]:null;O(e,t,n),++b===v&&(d=!0,console.log("ALL LIST FETCHED"))}}};n.fn.typeahead=n.typeahead=function(e){return r.typeahead(this,e)};var r={typeahead:function(t,i){if("function"==typeof t){if(!i.settings.input)return e.Debug.log({node:t,function:"$.typeahead()",arguments:"",message:'Undefined property "options.settings.input - Typeahead dropped'}),void e.Debug.print();if(!(t=n(i.settings.input))[0]||t.length>1)return e.Debug.log({node:t,function:"$.typeahead()",arguments:JSON.stringify(i.settings.input),message:"Unable to find jQuery input element OR more than 1 input is found - Typeahead dropped"}),void e.Debug.print()}else if(void 0===t[0]||t.length>1)return e.Debug.log({node:t,function:"$.typeahead()",arguments:'$("'+t.selector+'").typeahead()',message:"Unable to find jQuery input element OR more than 1 input is found - Typeahead dropped"}),void e.Debug.print();return t.each(function(){e.Typeahead.jsonList[t.selector]=new s(this,i)})}};e.Debug={table:{},log:function(e){if(!e.message||"string"!=typeof e.message)return!1;this.table[e.message]=n.extend(Object.preventExtensions({node:"",function:"",arguments:""}),e)},print:function(){if(n.isEmptyObject(this.table))return!1;void 0!==console.group||void 0!==console.table?(console.groupCollapsed("--- jQuery Typeahead Debug ---"),console.table?console.table(this.table):n.each(this.table,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()):console.log("Debug is not available on your current browser, try the most recent version of Chrome or Firefox."),this.table={}}}}(window,document,window.jQuery);