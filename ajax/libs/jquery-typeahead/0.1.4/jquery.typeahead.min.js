!function(e,t,n,o){e.Typeahead={source:{}},"function"!=typeof Object.preventExtensions&&(Object.preventExtensions=function(e){return e});var a={input:null,minLength:2,maxItem:8,order:null,position:"any",list:!1,group:!1,backdrop:!1,jStorage:!1,compression:!1,ttl:36e5,searchListClass:"typeahead-search",groupListClass:"typeahead-search-group",backdropListClass:"typeahead-search-backdrop",source:null,callback:{onInit:null,onMouseEnter:null,onMouseLeave:null,onClick:null},debug:!1},r={order:["asc","desc"],position:["any","start"],group:[!0,!1],jStorage:[!0,!1],compression:[!0,!1],debug:[!0,!1]},i=function(o,i){function s(){n.jStorage&&i.jStorage||i.debug&&e.Debug.log({node:o.selector,function:"extendOptions()",arguments:"options.jStorage",message:"WARNING - It is strongly recommended to have $.jStorage available and the option activated to store the results"});for(var t in i)if(i.hasOwnProperty(t))if("source"===t)for(var s in i[t])i[t].hasOwnProperty(s)&&(i[t][s]instanceof Object&&"data"!==s||(s="list",i[t]={list:i[t]}));else r[t]&&-1===n.inArray(i[t],r[t])&&(i.debug&&e.Debug.log({node:o.selector,function:"extendOptions()",arguments:"{"+t+":"+JSON.stringify(i[t])+"}",message:"WARNING - Unsupported option: "+t}),delete i[t]);i=n.extend(!0,Object.preventExtensions(n.extend(!0,{},a)),i)}function l(){S(i.callback.onInit,[o]),i.debug&&e.Debug.log({node:o.selector,function:"delegateTypeahead()",arguments:JSON.stringify(i),message:"OK - Typeahead activated on "+o.selector});var t=["focus.ac","keyup.ac","keypress.ac","keydown.ac"];n("html").on("click.ta",function(){p()}),n(o).parent().on("click.ta",function(e){e.stopPropagation()}),n(o).on(t.join(" "),function(e){"focus"!==e.type||g||f();var t=this;setTimeout(function(){if(!g||n(t).val()===d)return!1;d=n(t).val().toLowerCase().trim(),p(),d.length>=i.minLength&&""!==d&&(c(),u())},0,e,t)})}function c(){for(var e in h)for(var t in h[e]){if(y.length>=i.maxItem)break;!h[e][t].display||-1===h[e][t].display.toLowerCase().indexOf(d)||"any"!==i.position&&0!==h[e][t].display.toLowerCase().indexOf(d)||(h[e][t].list=e,y.push(h[e][t]))}i.order&&y.sort(O("display",i.group&&!("asc"===i.order)||!("asc"!==i.order),function(e){return e.toUpperCase()}))}function u(){var e,t=n("<div/>",{class:i.searchListClass,html:n("<ul/>",{html:function(){for(var t in y)!function(t,a){i.group&&!n(a).find('li[data-search-group="'+t.list+'"]')[0]&&n(a).append(n("<li/>",{class:i.groupListClass,html:n("<a/>",{html:t.list}),"data-search-group":t.list})),e=t.display.match(new RegExp(d,"i"));var r=n("<li/>",{html:n("<a/>",{href:"javascript:;","data-list":t.list,html:t.display.replace(new RegExp(d,"i"),"<strong>"+e[0]+"</strong>")+(i.list?"<small>"+t.list+"</small>":""),click:function(e){e.preventDefault(),n(o).val(t.display).focus(),d=t.display,p(),S(i.callback.onClick,[o,this,t])},mouseenter:function(){S(i.callback.onMouseEnter,[o,this,t])},mouseleave:function(){S(i.callback.onMouseLeave,[o,this,t])}})});i.group?n(r).insertAfter(n(a).find('li[data-search-group="'+t.list+'"]')):n(a).append(r)}(y[t],this)}})});if(n(o).parent().append(t),i.backdrop){var a=n.extend({opacity:.6,filter:"alpha(opacity=60)",position:"fixed",top:0,right:0,bottom:0,left:0,"z-index":1040,"background-color":"#000"},i.backdrop);n(o).parent().children().css({"z-index":a["z-index"]+1,position:"relative"}),n(o).parent().append(n("<div/>",{class:i.backdropListClass,css:a,click:function(){p()}}))}}function p(){y=[],n(o).siblings("."+i.searchListClass).remove(),n(o).siblings("."+i.backdropListClass).remove()}function f(){var t=i.source;if(0===v)for(var a in t)t.hasOwnProperty(a)&&++v;for(var r in t)if(t.hasOwnProperty(r))if(h[r]&&h[r]!==[])m++;else if(i.jStorage&&n.jStorage&&(h[r]=n.jStorage.get(o.selector+":"+r),h[r]))i.compression&&"object"==typeof LZString&&(h[r]=JSON.parse(LZString.decompress(h[r]))),m++;else{if(h[r]=[],t[r].data&&t[r].data instanceof Array){for(var s in t[r].data){if(t[r].data[s]instanceof Object)break;t[r].data[s]={display:t[r].data[s]}}if(h[r]=h[r].concat(t[r].data),!t[r].url){L(r),m++;continue}}if(t[r].url){var l=t[r].url instanceof Array&&t[r].url[0]||t[r].url,c=t[r].url instanceof Array&&t[r].url[1]||null;/https?:\/\//.test(l)&&-1===l.indexOf(e.location.host)?x.fetch(l.replace("{callback}",encodeURIComponent(b)),function(e){}):n.ajax({async:!0,url:l,ajaxList:r,ajaxPath:c}).done(function(e){j(e,this.ajaxList,this.ajaxPath),++m===v&&(g=!0,console.log("ALL LIST FETCHED (done ajax)"))}).fail(function(e){++m===v&&(g=!0,console.log("ALL LIST FETCHED (fail ajax)"))})}}m===v&&(g=!0,console.log("ALL LIST FETCHED (regular function)"))}var d="",g=!1,h={},y=[],b="window.Typeahead.source['"+o.selector+"'].populate",m=0,v=0,j=function(e,t,n){var o=!0;if(n)for(var a=n.split("."),r=0;r<a.length;){if(void 0===e){o=!1;break}e=e[a[r++]]}if(o){for(var i in e){if(e[i]instanceof Object)break;e[i]={display:e[i]}}h[t]=h[t].concat(e),L(t)}},L=function(e){if(!i.jStorage||!n.jStorage)return!1;var t=h[e];i.compression&&"object"==typeof LZString&&(t=LZString.compress(JSON.stringify(t))),n.jStorage.set(o.selector+":"+e,t,{TTL:i.ttl})},O=function(e,t,n){var o=n?function(t){return n(t[e])}:function(t){return t[e]};return t=[-1,1][+!!t],function(e,n){return e=o(e),n=o(n),t*((e>n)-(n>e))}},S=function(t,a){if(!t)return!1;var r;if("function"==typeof t)r=t;else if("string"==typeof t||t instanceof Array){r=e,"string"==typeof t&&(t=[t,[]]);for(var s=t[0].split("."),l=t[1],c=!0,u=0;u<s.length;){if(void 0===r){c=!1;break}r=r[s[u++]]}if(!c||"function"!=typeof r)return i.debug&&e.Debug.log({node:o.selector,function:"_executeCallback()",arguments:JSON.stringify(t),message:'WARNING - Invalid callback function"'}),!1}return r.apply(this,n.merge(l||[],a||[])),!0},x={fetch:function(n,o){var a=encodeURIComponent(b);e[a]=this.evalJSONP(o),n=n.replace("="+b,"="+a);var r=t.createElement("SCRIPT");r.src=n,t.getElementsByTagName("HEAD")[0].appendChild(r)},evalJSONP:function(e){return function(t){var n=!1;if("string"==typeof t)try{n=JSON.parse(t)}catch(e){}else n=JSON.parse(JSON.stringify(t));if(!n)throw"JSONP call returned invalid or empty JSON";e(n)}}};return this.__construct=(s(),l(),void(e.Debug&&e.Debug.print())),{populate:function(t){if(!t||!t.list)return i.debug&&e.Debug.log({node:o.selector,function:"populate()",message:'ERROR - Empty data or Missing {data.list} parameter"'}),e.Debug.print(),!1;var n=t.list||"list",a=i.source[n].url instanceof Array?i.source[n].url[1]:null;j(t,n,a),++m===v&&(g=!0,console.log("ALL LIST FETCHED"))}}};n.fn.typeahead=n.typeahead=function(e){return s.typeahead(this,e)};var s={typeahead:function(t,o){if(!o||!o.source)return e.Debug.log({node:t.selector,function:"$.typeahead()",arguments:"",message:"Missing source option - Typeahead dropped"}),void e.Debug.print();if("function"==typeof t){if(!o.input)return e.Debug.log({node:t.selector,function:"$.typeahead()",arguments:"",message:'Undefined property "options.input - Typeahead dropped'}),void e.Debug.print();if(!(t=n(o.input))[0]||t.length>1)return e.Debug.log({node:t.selector,function:"$.typeahead()",arguments:JSON.stringify(o.input),message:"Unable to find jQuery input element OR more than 1 input is found - Typeahead dropped"}),void e.Debug.print()}else if(void 0===t[0]||t.length>1)return e.Debug.log({node:t.selector,function:"$.typeahead()",arguments:'$("'+t.selector+'").typeahead()',message:"Unable to find jQuery input element OR more than 1 input is found - Typeahead dropped"}),void e.Debug.print();return t.each(function(){e.Typeahead.source[t.selector]=new i(t,o)})}};e.Debug={table:{},log:function(e){if(!e.message||"string"!=typeof e.message)return!1;this.table[e.message]=n.extend(Object.preventExtensions({node:"",function:"",arguments:""}),e)},print:function(){if(n.isEmptyObject(this.table))return!1;void 0!==console.group||void 0!==console.table?(console.groupCollapsed("--- jQuery Typeahead Debug ---"),console.table?console.table(this.table):n.each(this.table,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()):console.log("Debug is not available on your current browser, try the most recent version of Chrome or Firefox."),this.table={}}}}(window,document,window.jQuery);