!function(e,t,n,i){e.Typeahead={jsonList:{}},"function"!=typeof Object.preventExtensions&&(Object.preventExtensions=function(e){return e});var s={settings:{compression:!1,order:null,minLength:2,maxItem:8,startCharacter:!1,group:!1,list:!1,ttl:3600,backdrop:!1,input:null,groupListClass:"typeahead-search-group",searchListClass:"typeahead-search",backdropListClass:"typeahead-search-backdrop",jsonList:{}},callback:{onInit:null,onMouseEnter:null,onMouseLeave:null,onClick:null},debug:!1},a={settings:{compression:[!0,!1],order:[null,"asc","desc"],group:[!0,!1],jsonList:["storage","pattern","data","url"]},debug:[!0,!1]},o=function(i,o){function r(){o instanceof Object||(o={}),n.jStorage||o.debug&&e.Debug.log({node:i,function:"extendOptions()",arguments:"$.jStorage",message:"WARNING - It is strongly recommended to have $.jStorage available on your page to store the result set(s)"});var t=Object.preventExtensions(n.extend(!0,{},s));for(var r in o)if(o.hasOwnProperty(r)&&"debug"!==r){if(void 0===s[r]){o.debug&&e.Debug.log({node:i,function:"extendOptions()",arguments:"{"+r+": "+JSON.stringify(o[r])+"}",message:"WARNING - Invalid option: "+r}),delete o[r];break}for(var l in o[r])if(o[r].hasOwnProperty(l))if(void 0!==s[r][l])if("jsonList"===l&&o[r][l]instanceof Object){for(var u in o[r][l])if(o[r][l].hasOwnProperty(u)){o[r][l][u]instanceof Object&&"data"!==u||(u="list",o[r][l]={list:o[r][l]});for(var c in o[r][l][u])o[r][l][u].hasOwnProperty(c)&&(-1!==n.inArray(c,a[r][l])||(o.debug&&e.Debug.log({node:i,function:"extendOptions()",arguments:"{"+c+": "+JSON.stringify(o[r][l][u][c])+"}",message:"WARNING - Invalid jsonList option: "+c}),delete o[r][l][u][c]))}}else a[r]&&a[r][l]&&-1===n.inArray(o[r][l],a[r][l])&&(o.debug&&e.Debug.log({node:i,function:"extendOptions()",arguments:"{"+l+":"+JSON.stringify(o[l])+"}",message:"WARNING - Unsupported option: "+l}),delete o[r][l]);else o.debug&&e.Debug.log({node:i,function:"extendOptions()",arguments:"{"+l+": "+JSON.stringify(o[r][l])+"}",message:"WARNING - Invalid option: "+l}),delete o[r][l]}o=n.extend(!0,t,o)}function l(){L(o.callback.onInit,[i]),o.debug&&e.Debug.log({node:i,function:"delegateTypeahead()",arguments:JSON.stringify(o),message:"OK - Typeahead activated on "+(o.settings.input||"#"+i.id||'[name="'+i.name+'"]')});var t=["focus.ac","keyup.ac","keypress.ac","keydown.ac"];n("html").on("click.wtf",function(){p()}),n(i).parent().on("click.wtf",function(e){e.stopPropagation()}),n(i).on(t.join(" "),function(e){"focus"!==e.type||f||d();var t=this;setTimeout(function(){if(n(t).val()===g)return!1;g=n(t).val().toLowerCase().trim(),p(),g.length>=o.settings.minLength&&""!==g&&(u(),c())},0,e,t)})}function u(){for(var e in h)for(var t in h[e]){if(y.length>=o.settings.maxItem)break;!h[e][t].display||-1===h[e][t].display.toLowerCase().indexOf(g)||o.settings.startCharacter&&0!==h[e][t].display.toLowerCase().indexOf(g)||(h[e][t].list=e,y.push(h[e][t]))}o.settings.order&&y.sort(j("display",o.settings.group&&!("asc"===o.settings.order)||!("asc"!==o.settings.order),function(e){return e.toUpperCase()}))}function c(){var e,t=n("<div/>",{class:o.settings.searchListClass,html:n("<ul/>",{html:function(){for(var t in y)!function(t,s){o.settings.group&&!n(s).find('li[data-search-group="'+t.list+'"]')[0]&&n(s).append(n("<li/>",{class:o.settings.groupListClass,html:n("<a/>",{html:t.list}),"data-search-group":t.list})),e=t.display.match(new RegExp(g,"i"));var a=n("<li/>",{html:n("<a/>",{href:"javascript:;","data-list":t.list,html:t.display.replace(new RegExp(g,"i"),"<strong>"+e[0]+"</strong>")+(o.settings.list?"<small>"+t.list+"</small>":""),click:function(e){e.preventDefault(),n(i).val(t.display).focus(),g=t.display,p(),L(o.callback.onClick,[i,this,t])},mouseenter:function(){L(o.callback.onMouseEnter,[i,this,t])},mouseleave:function(){L(o.callback.onMouseLeave,[i,this,t])}})});o.settings.group?n(a).insertAfter(n(s).find('li[data-search-group="'+t.list+'"]')):n(s).append(a)}(y[t],this)}})});if(n(i).parent().append(t),o.settings.backdrop){var s=n.extend({opacity:.6,filter:"alpha(opacity=60)",position:"fixed",top:0,right:0,bottom:0,left:0,"z-index":1040,"background-color":"#000"},o.settings.backdrop);n(i).parent().children().css({"z-index":s["z-index"]+1,position:"relative"}),n(i).parent().append(n("<div/>",{class:o.settings.backdropListClass,css:s,click:function(){p()}}))}}function p(){y=[],n(i).siblings("."+o.settings.searchListClass).remove(),n(i).siblings("."+o.settings.backdropListClass).remove()}function d(){var t,i,s=o.settings.jsonList;if(0===v)for(var a in s)s.hasOwnProperty(a)&&++v;for(var r in s)if(s.hasOwnProperty(r))if(h[r]&&h[r]!=={}||s[r].storage&&n.jStorage.get(s[r].storage))console.log(r+": already stored");else{if(h[r]=[],s[r].data&&s[r].data instanceof Array){for(var l in s[r].data){if(s[r].data[l]instanceof Object)break;s[r].data[l]={display:s[r].data[l]}}h[r]=h[r].concat(s[r].data),s[r].url||m++}s[r].url&&(t=s[r].url instanceof Array&&s[r].url[0]||s[r].url,i=s[r].url instanceof Array&&s[r].url[1]||null,/https?:\/\//.test(t)&&-1===t.indexOf(e.location.host)?x.fetch(t+"/"+encodeURIComponent(b)+"/",function(e){}):n.ajax({async:!0,url:t,ajaxList:r,ajaxPath:i}).done(function(e){O(e,this.ajaxList,this.ajaxPath),m++,length}).fail(function(e){m++}))}m===v&&(f=!0,console.log("ALL LIST FETCHED"))}var g="",f=!1,h={},y=[],b="window.Typeahead.jsonList['#search_v1-game'].populate",m=0,v=0,O=function(e,t,n){var i=!0;if(n)for(var s=n.split("."),a=0;a<s.length;){if(void 0===e){i=!1;break}e=e[s[a++]]}if(i){for(var o in e){if(e[o]instanceof Object)break;e[o]={display:e[o]}}h[t]=h[t].concat(e)}},j=function(e,t,n){var i=n?function(t){return n(t[e])}:function(t){return t[e]};return t=[-1,1][+!!t],function(e,n){return e=i(e),n=i(n),t*((e>n)-(n>e))}},L=function(t,s){if(!t)return!1;var a;if("function"==typeof t)a=t;else if("string"==typeof t||t instanceof Array){a=e,"string"==typeof t&&(t=[t,[]]);for(var r=t[0].split("."),l=t[1],u=!0,c=0;c<r.length;){if(void 0===a){u=!1;break}a=a[r[c++]]}if(!u||"function"!=typeof a)return o.debug&&e.Debug.log({node:i,function:"_executeCallback()",arguments:JSON.stringify(t),message:'WARNING - Invalid callback function"'}),!1}return a.apply(this,n.merge(l||[],s||[])),!0},x={fetch:function(n,i){var s=encodeURIComponent(b);e[s]=this.evalJSONP(i),n=n.replace("="+b,"="+s);var a=t.createElement("SCRIPT");a.src=n,t.getElementsByTagName("HEAD")[0].appendChild(a)},evalJSONP:function(e){return function(t){var n=!1;if("string"==typeof t)try{n=JSON.parse(t)}catch(e){}else n=JSON.parse(JSON.stringify(t));if(!n)throw"JSONP call returned invalid or empty JSON";e(n)}}};return this.__construct=(r(),l(),void(e.Debug&&e.Debug.print())),{populate:function(e){var t=e.list||"list",n=o.settings.jsonList[t].url instanceof Array?o.settings.jsonList[t].url[1]:null;O(e,t,n),++m===v&&(f=!0,console.log("ALL LIST FETCHED"))}}};n.fn.typeahead=n.typeahead=function(e){return r.typeahead(this,e)};var r={typeahead:function(t,i){if("function"==typeof t){if(!i.settings.input)return e.Debug.log({node:t,function:"$.typeahead()",arguments:"",message:'Undefined property "options.settings.input - Typeahead dropped'}),void e.Debug.print();if(!(t=n(i.settings.input))[0]||t.length>1)return e.Debug.log({node:t,function:"$.typeahead()",arguments:JSON.stringify(i.settings.input),message:"Unable to find jQuery input element OR more than 1 input is found - Typeahead dropped"}),void e.Debug.print()}else if(void 0===t[0]||t.length>1)return e.Debug.log({node:t,function:"$.typeahead()",arguments:'$("'+t.selector+'").typeahead()',message:"Unable to find jQuery input element OR more than 1 input is found - Typeahead dropped"}),void e.Debug.print();return t.each(function(){e.Typeahead.jsonList[t.selector]=new o(this,i)})}};e.Debug={table:{},log:function(e){if(!e.message||"string"!=typeof e.message)return!1;this.table[e.message]=n.extend(Object.preventExtensions({node:"",function:"",arguments:""}),e)},print:function(){if(n.isEmptyObject(this.table))return!1;void 0!==console.group||void 0!==console.table?(console.groupCollapsed("--- jQuery Typeahead Debug ---"),console.table?console.table(this.table):n.each(this.table,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()):console.log("Debug is not available on your current browser, try the most recent version of Chrome or Firefox."),this.table={}}}}(window,document,window.jQuery);