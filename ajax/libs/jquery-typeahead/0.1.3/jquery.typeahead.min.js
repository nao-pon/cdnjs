!function(e,t,n,i){e.Typeahead={jsonList:{}},"function"!=typeof Object.preventExtensions&&(Object.preventExtensions=function(e){return e});var s={settings:{jStorage:!1,compression:!1,order:null,minLength:2,maxItem:8,startCharacter:!1,group:!1,list:!1,ttl:36e5,backdrop:!1,input:null,groupListClass:"typeahead-search-group",searchListClass:"typeahead-search",backdropListClass:"typeahead-search-backdrop",jsonList:{}},callback:{onInit:null,onMouseEnter:null,onMouseLeave:null,onClick:null},debug:!1},o={settings:{jStorage:[!0,!1],compression:[!0,!1],order:[null,"asc","desc"],group:[!0,!1],jsonList:["storage","pattern","data","url"]},debug:[!0,!1]},a=function(i,a){function r(){a instanceof Object||(a={}),n.jStorage||a.debug&&e.Debug.log({node:i,function:"extendOptions()",arguments:"$.jStorage",message:"WARNING - It is strongly recommended to have $.jStorage available on your page to store the result set(s)"});var t=Object.preventExtensions(n.extend(!0,{},s));for(var r in a)if(a.hasOwnProperty(r)&&"debug"!==r){if(void 0===s[r]){a.debug&&e.Debug.log({node:i,function:"extendOptions()",arguments:"{"+r+": "+JSON.stringify(a[r])+"}",message:"WARNING - Invalid option: "+r}),delete a[r];break}for(var l in a[r])if(a[r].hasOwnProperty(l))if(void 0!==s[r][l])if("jsonList"===l&&a[r][l]instanceof Object){for(var u in a[r][l])if(a[r][l].hasOwnProperty(u)){a[r][l][u]instanceof Object&&"data"!==u||(u="list",a[r][l]={list:a[r][l]});for(var c in a[r][l][u])a[r][l][u].hasOwnProperty(c)&&(-1!==n.inArray(c,o[r][l])||(a.debug&&e.Debug.log({node:i,function:"extendOptions()",arguments:"{"+c+": "+JSON.stringify(a[r][l][u][c])+"}",message:"WARNING - Invalid jsonList option: "+c}),delete a[r][l][u][c]))}}else o[r]&&o[r][l]&&-1===n.inArray(a[r][l],o[r][l])&&(a.debug&&e.Debug.log({node:i,function:"extendOptions()",arguments:"{"+l+":"+JSON.stringify(a[l])+"}",message:"WARNING - Unsupported option: "+l}),delete a[r][l]);else a.debug&&e.Debug.log({node:i,function:"extendOptions()",arguments:"{"+l+": "+JSON.stringify(a[r][l])+"}",message:"WARNING - Invalid option: "+l}),delete a[r][l]}a=n.extend(!0,t,a)}function l(){S(a.callback.onInit,[i]),a.debug&&e.Debug.log({node:i,function:"delegateTypeahead()",arguments:JSON.stringify(a),message:"OK - Typeahead activated on "+(a.settings.input||"#"+i.id||'[name="'+i.name+'"]')});var t=["focus.ac","keyup.ac","keypress.ac","keydown.ac"];n("html").on("click.wtf",function(){g()}),n(i).parent().on("click.wtf",function(e){e.stopPropagation()}),n(i).on(t.join(" "),function(e){"focus"!==e.type||d||p();var t=this;setTimeout(function(){if(!d||n(t).val()===f)return!1;f=n(t).val().toLowerCase().trim(),g(),f.length>=a.settings.minLength&&""!==f&&(u(),c())},0,e,t)})}function u(){for(var e in h)for(var t in h[e]){if(y.length>=a.settings.maxItem)break;!h[e][t].display||-1===h[e][t].display.toLowerCase().indexOf(f)||a.settings.startCharacter&&0!==h[e][t].display.toLowerCase().indexOf(f)||(h[e][t].list=e,y.push(h[e][t]))}a.settings.order&&y.sort(O("display",a.settings.group&&!("asc"===a.settings.order)||!("asc"!==a.settings.order),function(e){return e.toUpperCase()}))}function c(){var e,t=n("<div/>",{class:a.settings.searchListClass,html:n("<ul/>",{html:function(){for(var t in y)!function(t,s){a.settings.group&&!n(s).find('li[data-search-group="'+t.list+'"]')[0]&&n(s).append(n("<li/>",{class:a.settings.groupListClass,html:n("<a/>",{html:t.list}),"data-search-group":t.list})),e=t.display.match(new RegExp(f,"i"));var o=n("<li/>",{html:n("<a/>",{href:"javascript:;","data-list":t.list,html:t.display.replace(new RegExp(f,"i"),"<strong>"+e[0]+"</strong>")+(a.settings.list?"<small>"+t.list+"</small>":""),click:function(e){e.preventDefault(),n(i).val(t.display).focus(),f=t.display,g(),S(a.callback.onClick,[i,this,t])},mouseenter:function(){S(a.callback.onMouseEnter,[i,this,t])},mouseleave:function(){S(a.callback.onMouseLeave,[i,this,t])}})});a.settings.group?n(o).insertAfter(n(s).find('li[data-search-group="'+t.list+'"]')):n(s).append(o)}(y[t],this)}})});if(n(i).parent().append(t),a.settings.backdrop){var s=n.extend({opacity:.6,filter:"alpha(opacity=60)",position:"fixed",top:0,right:0,bottom:0,left:0,"z-index":1040,"background-color":"#000"},a.settings.backdrop);n(i).parent().children().css({"z-index":s["z-index"]+1,position:"relative"}),n(i).parent().append(n("<div/>",{class:a.settings.backdropListClass,css:s,click:function(){g()}}))}}function g(){y=[],n(i).siblings("."+a.settings.searchListClass).remove(),n(i).siblings("."+a.settings.backdropListClass).remove()}function p(){var t=a.settings.jsonList;if(0===v)for(var s in t)t.hasOwnProperty(s)&&++v;for(var o in t)if(t.hasOwnProperty(o))if(h[o]&&h[o]!==[])m++;else if(a.settings.jStorage&&n.jStorage&&(h[o]=n.jStorage.get(i.selector+":"+o),h[o]))a.settings.compression&&"object"==typeof LZString&&(h[o]=JSON.parse(LZString.decompress(h[o]))),m++;else{if(h[o]=[],t[o].data&&t[o].data instanceof Array){for(var r in t[o].data){if(t[o].data[r]instanceof Object)break;t[o].data[r]={display:t[o].data[r]}}if(h[o]=h[o].concat(t[o].data),!t[o].url){L(o),m++;continue}}if(t[o].url){var l=t[o].url instanceof Array&&t[o].url[0]||t[o].url,u=t[o].url instanceof Array&&t[o].url[1]||null;/https?:\/\//.test(l)&&-1===l.indexOf(e.location.host)?x.fetch(l.replace("{callback}",encodeURIComponent(b)),function(e){}):n.ajax({async:!0,url:l,ajaxList:o,ajaxPath:u}).done(function(e){j(e,this.ajaxList,this.ajaxPath),++m===length&&(d=!0,console.log("ALL LIST FETCHED (done ajax)"))}).fail(function(e){++m===length&&(d=!0,console.log("ALL LIST FETCHED (fail ajax)"))})}}m===v&&(d=!0,console.log("ALL LIST FETCHED (regular function)"))}var f="",d=!1,h={},y=[],b="window.Typeahead.jsonList['"+i.selector+"'].populate",m=0,v=0,j=function(e,t,n){var i=!0;if(n)for(var s=n.split("."),o=0;o<s.length;){if(void 0===e){i=!1;break}e=e[s[o++]]}if(i){for(var a in e){if(e[a]instanceof Object)break;e[a]={display:e[a]}}h[t]=h[t].concat(e),L(t)}},L=function(e){if(!a.settings.jStorage||!n.jStorage)return!1;var t=h[e];a.settings.compression&&"object"==typeof LZString&&(t=LZString.compress(JSON.stringify(t))),n.jStorage.set(i.selector+":"+e,t,{TTL:a.settings.ttl})},O=function(e,t,n){var i=n?function(t){return n(t[e])}:function(t){return t[e]};return t=[-1,1][+!!t],function(e,n){return e=i(e),n=i(n),t*((e>n)-(n>e))}},S=function(t,s){if(!t)return!1;var o;if("function"==typeof t)o=t;else if("string"==typeof t||t instanceof Array){o=e,"string"==typeof t&&(t=[t,[]]);for(var r=t[0].split("."),l=t[1],u=!0,c=0;c<r.length;){if(void 0===o){u=!1;break}o=o[r[c++]]}if(!u||"function"!=typeof o)return a.debug&&e.Debug.log({node:i,function:"_executeCallback()",arguments:JSON.stringify(t),message:'WARNING - Invalid callback function"'}),!1}return o.apply(this,n.merge(l||[],s||[])),!0},x={fetch:function(n,i){var s=encodeURIComponent(b);e[s]=this.evalJSONP(i),n=n.replace("="+b,"="+s);var o=t.createElement("SCRIPT");o.src=n,t.getElementsByTagName("HEAD")[0].appendChild(o)},evalJSONP:function(e){return function(t){var n=!1;if("string"==typeof t)try{n=JSON.parse(t)}catch(e){}else n=JSON.parse(JSON.stringify(t));if(!n)throw"JSONP call returned invalid or empty JSON";e(n)}}};return this.__construct=(r(),l(),void(e.Debug&&e.Debug.print())),{populate:function(t){if(!t||!t.list)return a.debug&&e.Debug.log({node:i,function:"populate()",message:'ERROR - Empty data or Missing {data.list} parameter"'}),!1;var n=t.list||"list",s=a.settings.jsonList[n].url instanceof Array?a.settings.jsonList[n].url[1]:null;j(t,n,s),++m===v&&(d=!0,console.log("ALL LIST FETCHED"))}}};n.fn.typeahead=n.typeahead=function(e){return r.typeahead(this,e)};var r={typeahead:function(t,i){if("function"==typeof t){if(!i.settings.input)return e.Debug.log({node:t,function:"$.typeahead()",arguments:"",message:'Undefined property "options.settings.input - Typeahead dropped'}),void e.Debug.print();if(!(t=n(i.settings.input))[0]||t.length>1)return e.Debug.log({node:t,function:"$.typeahead()",arguments:JSON.stringify(i.settings.input),message:"Unable to find jQuery input element OR more than 1 input is found - Typeahead dropped"}),void e.Debug.print()}else if(void 0===t[0]||t.length>1)return e.Debug.log({node:t,function:"$.typeahead()",arguments:'$("'+t.selector+'").typeahead()',message:"Unable to find jQuery input element OR more than 1 input is found - Typeahead dropped"}),void e.Debug.print();return t.each(function(){e.Typeahead.jsonList[t.selector]=new a(t,i)})}};e.Debug={table:{},log:function(e){if(!e.message||"string"!=typeof e.message)return!1;this.table[e.message]=n.extend(Object.preventExtensions({node:"",function:"",arguments:""}),e)},print:function(){if(n.isEmptyObject(this.table))return!1;void 0!==console.group||void 0!==console.table?(console.groupCollapsed("--- jQuery Typeahead Debug ---"),console.table?console.table(this.table):n.each(this.table,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()):console.log("Debug is not available on your current browser, try the most recent version of Chrome or Firefox."),this.table={}}}}(window,document,window.jQuery);