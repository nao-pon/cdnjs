{"version":3,"file":"reactblockui.min.js","sources":["../src/BlockUi.js","../src/Loader.js"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport DefaultLoader from './Loader';\n\nconst defaultProps = {\n  tag: 'div',\n  renderChildren: true,\n  loader: DefaultLoader,\n};\n\nclass BlockUi extends Component {\n  constructor(props) {\n    super(props);\n\n    this.tabbedUpTop = this.tabbedUpTop.bind(this);\n    this.tabbedDownTop = this.tabbedDownTop.bind(this);\n    this.tabbedUpBottom = this.tabbedUpBottom.bind(this);\n    this.tabbedDownBottom = this.tabbedDownBottom.bind(this);\n    this.setHelper = this.setRef.bind(this, 'helper');\n    this.setBlocker = this.setRef.bind(this, 'blocker');\n    this.setTopFocus = this.setRef.bind(this, 'topFocus');\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (nextProps.blocking !== this.props.blocking) {\n      if (nextProps.blocking) {\n        // blocking started\n        if (this.helper && this.helper.parentNode && this.helper.parentNode.contains\n          && this.helper.parentNode.contains(document.activeElement)) {\n          this.focused = document.activeElement;\n          // We cannot just blur to remove focus due to IE bug so we must manually move the focus somewhere else.\n          // https://www.tjvantoll.com/2013/08/30/bugs-with-document-activeelement-in-internet-explorer/#blurring-the-body-switches-windows-in-ie9-and-ie10\n          if (this.focused && this.focused !== document.body) {\n            (window.setImmediate || setTimeout)(() => this.topFocus && this.topFocus.focus());\n          }\n        }\n      } else {\n        const ae = document.activeElement;\n        if (this.focused && (!ae || ae === document.body || ae === this.topFocus)) {\n          this.focused.focus();\n          this.focused = null;\n        }\n      }\n    }\n  }\n\n  setRef(nane, ref) {\n    this[name] = ref;\n  }\n\n  blockingTab(e, withShift = false) {\n    // eslint-disable-next-line eqeqeq\n    return this.props.blocking && (e.key === 'Tab' || e.keyCode === 9) && e.shiftKey == withShift;\n  }\n\n  tabbedUpTop(e) {\n    if (this.blockingTab(e)) {\n      this.blocker.focus();\n    }\n  }\n\n  tabbedDownTop(e) {\n    if (this.blockingTab(e)) {\n      e.preventDefault();\n      this.blocker.focus();\n    }\n  }\n\n  tabbedUpBottom(e) {\n    if (this.blockingTab(e, true)) {\n      this.topFocus.focus();\n    }\n  }\n\n  tabbedDownBottom(e) {\n    if (this.blockingTab(e, true)) {\n      e.preventDefault();\n      this.topFocus.focus();\n    }\n  }\n\n  render() {\n    const {\n      tag: Tag,\n      blocking,\n      className,\n      children,\n      message,\n      loader: Loader,\n      renderChildren,\n      ...attributes\n    } = this.props;\n\n    const classes = blocking ? `block-ui ${className}` : className;\n    const renderChilds = !blocking || renderChildren;\n\n    return (\n      <Tag {...attributes} className={classes} aria-busy={blocking}>\n        {blocking &&\n        <div tabIndex=\"0\" onKeyUp={this.tabbedUpTop} onKeyDown={this.tabbedDownTop} ref={this.setTopFocus} />}\n        {renderChilds && children}\n        {blocking &&\n        <div className=\"block-ui-container\"\n          tabIndex=\"0\"\n          ref={this.setBlocker}\n          onKeyUp={this.tabbedUpBottom}\n          onKeyDown={this.tabbedDownBottom}\n        >\n          <div className=\"block-ui-overlay\" />\n          <div className=\"block-ui-message-container\">\n            <div className=\"block-ui-message\">\n              {message}\n              {React.isValidElement(Loader) ? Loader : <Loader />}\n            </div>\n          </div>\n        </div>\n        }\n        <span ref={this.setHelper} />\n      </Tag>\n    );\n  }\n}\n\nBlockUi.propTypes = {\n  blocking: PropTypes.bool,\n  children: PropTypes.node,\n  renderChildren: PropTypes.bool,\n  className: PropTypes.string,\n  message: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.node,\n  ]),\n  loader: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.func,\n    PropTypes.node,\n  ]),\n  tag: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.func,\n  ]),\n};\nBlockUi.defaultProps = defaultProps;\n\nexport default BlockUi;","import React from 'react';\n\nfunction Loader() {\n  return (\n    <div className=\"loading-indicator\">\n      <span className=\"loading-bullet\">&bull;</span>{' '}\n      <span className=\"loading-bullet\">&bull;</span>{' '}\n      <span className=\"loading-bullet\">&bull;</span>\n    </div>\n  );\n}\n\nexport default Loader;\n"],"names":["BlockUi","tabbedUpTop","bind","tabbedDownTop","tabbedUpBottom","tabbedDownBottom","setHelper","setRef","setBlocker","setTopFocus","nextProps","blocking","props","helper","parentNode","contains","document","activeElement","focused","body","window","setImmediate","setTimeout","topFocus","focus","ae","name","withShift","e","key","keyCode","shiftKey","blockingTab","blocker","preventDefault","Tag","tag","className","children","message","Loader","loader","renderChildren","attributes","classes","React","tabIndex","onKeyUp","onKeyDown","ref","isValidElement","Component","defaultProps"],"mappings":"60CAUMA,2BACe,UAAA,6EAGZC,YAAc,EAAKA,WAAL,CAAiBC,IAAjB,MACdC,cAAgB,EAAKA,aAAL,CAAmBD,IAAnB,MAChBE,eAAiB,EAAKA,cAAL,CAAoBF,IAApB,MACjBG,iBAAmB,EAAKA,gBAAL,CAAsBH,IAAtB,MACnBI,UAAY,EAAKC,MAAL,CAAYL,IAAZ,GAAuB,QAAvB,IACZM,WAAa,EAAKD,MAAL,CAAYL,IAAZ,GAAuB,SAAvB,IACbO,YAAc,EAAKF,MAAL,CAAYL,IAAZ,GAAuB,UAAvB,yEAGgB,eAC/BQ,EAAUC,QAAVD,GAAuB,KAAKE,KAAL,CAAWD,YAChCD,EAAUC,SAER,KAAKE,MAAL,EAAe,KAAKA,MAAL,CAAYC,UAA3B,EAAyC,KAAKD,MAAL,CAAYC,UAAZ,CAAuBC,QAAhE,EACC,KAAKF,MAAL,CAAYC,UAAZ,CAAuBC,QAAvB,CAAgCC,SAASC,aAAzC,SACEC,QAAUF,SAASC,cAGpB,KAAKC,OAAL,EAAgB,KAAKA,OAAL,GAAiBF,SAASG,OAC3CC,OAAOC,YAAPD,EAAuBE,YAAY,iBAAM,GAAKC,QAAL,EAAiB,EAAKA,QAAL,CAAcC,KAAd,EAA3D,QAGC,IACCC,GAAKT,SAASC,cAChB,KAAKC,OAAL,GAAiB,IAAOO,IAAOT,SAASG,IAAvB,EAA+BM,IAAO,KAAKF,QAA5D,CAFC,QAGEL,QAAQM,OAHV,MAIEN,QAAU,IAJZ,sCAUO,MACXQ,8CAG2B,IAAnBC,4CAAAA,qBAEN,MAAKf,KAAL,CAAWD,QAAX,GAAkC,KAAViB,KAAEC,GAAFD,EAAiC,CAAdA,KAAEE,OAA7C,GAA+DF,EAAEG,QAAFH,0CAGzD,CACT,KAAKI,WAAL,GADS,OAENC,QAAQT,gDAIA,CACX,KAAKQ,WAAL,GADW,KAEXE,gBAFW,MAGRD,QAAQT,OAHA,2CAOC,CACZ,KAAKQ,WAAL,MADY,OAETT,SAASC,mDAIE,CACd,KAAKQ,WAAL,MADc,KAEdE,gBAFc,MAGXX,SAASC,OAHE,kCAOX,OAUH,KAAKZ,MARFuB,IAALC,IACAzB,IAAAA,SACA0B,IAAAA,UACAC,IAAAA,SACAC,IAAAA,QACQC,IAARC,OACAC,IAAAA,eACGC,qFAGCC,EAAUjC,eAAAA,SAIdkC,gBAAAA,WAAqBR,YAAoB,eAAzCQ,IAEEA,eAAAA,MAAAA,EAAKC,SAAS,IAAIC,QAAS,KAAK9C,YAAa+C,UAAW,KAAK7C,cAAe8C,IAAK,KAAKxC,YAAtFoC,CAFFA,EAHmB,SAGnBA,IAKEA,eAAAA,MAAAA,EAAKR,UAAU,8BACJ,QACJ,KAAK7B,mBACD,KAAKJ,yBACH,KAAKC,iBAJlBwC,wBAMOR,UAAU,oBANjBQ,wBAOOR,UAAU,qDACRA,UAAU,wBAENa,oBAAkCL,eAAAA,OAAAA,GAV/CA,CALFA,yBAoBQI,IAAK,KAAK3C,WApBlBuC,SAvFgBM,mBAoItBnD,GAAQoD,YAARpD,CA1IqB,KACd,KADc,kBAAA,QCFrB,UAAkB,OAEd6C,gBAAAA,MAAAA,EAAKR,UAAU,oBAAfQ,yBACQR,UAAU,2BADlBQ,IAAAA,yBAEQR,UAAU,2BAFlBQ,IAAAA,yBAGQR,UAAU,2BAHlBQ,EDAiB"}