!function(t){t.fn.magnify=function(n){var e=this,i=t.extend({speed:100,timeout:-1,onload:function(){}},n),a=0,o=function(){clearTimeout(a),a=setTimeout(function(){e.destroy(),e.magnify(i)},100)};return this.destroy=function(){return this.each(function(){var n=t(this),e=n.data("originalStyle");e?n.attr("style",e):n.removeAttr("style"),n.unwrap(".magnify").prevAll(".magnify-lens").remove()}),t(window).off("resize",o),e},t(window).resize(o),this.each(function(){!function(n){var e,a,o,r,s,l,f,d,u,g=t(n),c=g.closest("a"),h=0,m=0,y=g.attr("data-magnify-src")||i.src||c.attr("href")||"",v=function(){a.is(":visible")&&a.fadeOut(i.speed,function(){t("html").removeClass("magnifying").trigger("magnifyend")})};if(y){g.data("originalStyle",g.attr("style"));var p=new Image;t(p).on({load:function(){g.css("display","block"),g.parent(".magnify").length||g.wrap('<div class="magnify"></div>'),e=g.parent(".magnify"),g.prev(".magnify-lens").length?e.children(".magnify-lens").css("background-image","url('"+y+"')"):g.before('<div class="magnify-lens loading" style="background:url(\''+y+"') no-repeat 0 0\"></div>"),(a=e.children(".magnify-lens")).removeClass("loading"),h=p.width,m=p.height,o=e.offset(),r=e.width(),s=e.height(),l=g.innerWidth(),f=g.innerHeight(),d=a.width(),u=a.height(),g.data("zoomSize",{width:h,height:m}),p=null,i.onload(),e.on("mousemove touchmove",function(n){n.preventDefault();var e=(n.pageX||n.originalEvent.touches[0].pageX)-o.left,g=(n.pageY||n.originalEvent.touches[0].pageY)-o.top;if(a.is(":animated")||(e<r&&g<s&&e>0&&g>0?a.is(":hidden")&&(t("html").addClass("magnifying").trigger("magnifystart"),a.fadeIn(i.speed)):v()),a.is(":visible")){var c=e-d/2,y=g-u/2;if(h&&m)var p=-1*Math.round(e/l*h-d/2)+"px "+-1*Math.round(g/f*m-u/2)+"px";a.css({top:Math.round(y)+"px",left:Math.round(c)+"px",backgroundPosition:p||""})}}),e.mouseleave(v),i.timeout>=0&&e.on("touchend",function(){setTimeout(v,i.timeout)}),t("body").not(e).on("touchstart",v),c.length&&(c.css("display","inline-block"),!c.attr("href")||g.attr("data-magnify-src")||i.src||c.click(function(t){t.preventDefault()}))},error:function(){p=null}}),p.src=y}}(this)})}}(jQuery);