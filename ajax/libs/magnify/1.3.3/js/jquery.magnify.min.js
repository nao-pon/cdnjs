!function(n){n.fn.magnify=function(e){var i,a,t,o,s=n.extend({debug:!1,speed:100,onload:function(){}},e),r=0,d=0,l=function(e,g){if(e){var c=new Image;n(c).on({load:function(){t.css("display","block"),t.parent(".magnify").length||t.wrap('<div class="magnify"></div>'),a=t.parent(".magnify"),t.prev(".magnify-lens").length?a.children(".magnify-lens").css("background-image","url('"+e+"')"):t.before('<div class="magnify-lens loading" style="background:url(\''+e+"') no-repeat 0 0\"></div>"),(o=a.children(".magnify-lens")).removeClass("loading"),r=c.width,d=c.height,s.debug&&console.log("[MAGNIFY] Got zoom image dimensions OK (width x height): "+r+" x "+d),c=null,s.onload(),a.mousemove(function(n){var e=a.offset(),i=n.pageX-e.left,l=n.pageY-e.top;if(o.is(":animated")||(i<a.width()&&l<a.height()&&i>0&&l>0?o.is(":hidden")&&o.fadeIn(s.speed):o.is(":visible")&&o.fadeOut(s.speed)),o.is(":visible")){var g=i-o.width()/2,c=l-o.height()/2;if(r&&d)var f=-1*Math.round(i/t.width()*r-o.width()/2)+"px "+-1*Math.round(l/t.height()*d-o.height()/2)+"px";o.css({top:Math.round(c)+"px",left:Math.round(g)+"px",backgroundPosition:f||""})}}),a.mouseleave(function(){o.is(":visible")&&o.fadeOut(s.speed)}),i.length&&(i.css("display","inline-block"),(g||i.attr("href")&&!t.attr("data-magnify-src")&&!s.src)&&i.click(function(n){n.preventDefault()}))},error:function(){c=null,g?s.debug&&console.log("[MAGNIFY] Parent anchor zoom source is invalid also. Disabling zoom..."):(s.debug&&console.log("[MAGNIFY] Invalid data-magnify-src. Looking in parent anchor instead -> "+i.attr("href")),l(i.attr("href"),!0))}}),c.src=e}};return this.each(function(){t=n(this),i=t.parents("a"),l(t.attr("data-magnify-src")||s.src||i.attr("href")||"")})}}(jQuery);