!function(e){e.fn.magnify=function(n){var i=e.extend({size:"175px",speed:100},n);return this.each(function(){!function(n){var t,a=e(n),s=e(".magnify-image",a),o=s.attr("data-magnify-src")||i.src,f=0,r=0;s.prev(".magnify-lens").length||s.before('<div class="magnify-lens loading" style="background:url('+o+') no-repeat 0 0;"></div>'),t=e(".magnify-lens",a);var d=new Image;e(d).load(function(){t.removeClass("loading"),f=d.width,r=d.height}),d.src=o,a.mousemove(function(e){var n=a.offset(),o=e.pageX-n.left;if(nY=e.pageY-n.top,o<a.width()&&nY<a.height()&&o>0&&nY>0?t.fadeIn(i.speed):t.fadeOut(i.speed),t.is(":visible")){var d=o-t.width()/2,h=nY-t.height()/2;if(f&&r)var g=-1*Math.round(o/s.width()*f-t.width()/2)+"px "+-1*Math.round(nY/s.height()*r-t.height()/2)+"px";t.css({top:h,left:d,backgroundPosition:g||""})}})}(this)})}}(jQuery);