var Tracing=function(){function n(){}function t(n){return"function"==typeof n}function r(n){return null!=y[n]&&void 0!=y[n]}function o(n){return"string"==typeof n}function i(n){return Array.prototype.slice.call(n)}function e(n,t){for(var r in n)n.hasOwnProperty(r)&&t(r,n[r]);return n}function f(n,t){return e(n,function(n,r){t[n]=r}),t}function u(n,t){for(var r=n.split("."),o=v,i=0;i<r.length;i++){if(!(r[i]in o))throw"Property "+r.slice(0,i+1).join(".")+" not found!";arguments.length>1&&i==r.length-1&&(o[r[i]]=t),o=o[r[i]]}return o}function a(n,t,r){t=t.map(JSON.stringify),console.log(">"+new Array(r+1).join("  ")+n+" called with arguments: ("+t.join(", ")+")")}function c(n,t,r){console.log(">"+new Array(r+1).join("  ")+n+" returned: "+JSON.stringify(t))}function l(o){var e=u(o);if(!t(e))throw"Not a valid function to trace!";if(r(o))throw"This function is already being traced!";y[o]={original:e,before:n,after:n};var a=function(){var n,t=y[o];return d++,t.before.call(this,o,i(arguments),d),n=t.original.apply(this,arguments),t.after.call(this,o,n,d),d--,n};f(e,a),a.prototype=e.prototype,u(o,a)}function h(n){if(!o(n))throw"The function name should be a string.";if(!r(n))throw"This function is not being traced!";var t=u(n),i=y[n];f(t,i.original),i.original.prototype=t.prototype,u(n,i.original),delete y[n]}function s(i,e){if(!o(i))throw"The function name should be a string.";return r(i)||l(i),t(e)?e:n}function g(n,t){var r=s(n,t);y[n].before=r}function p(n,t){var r=s(n,t);y[n].after=r}var y={},v=Function("return this")(),d=0,w={trace:function(n){for(var t=0;t<arguments.length;t++)g(arguments[t],a),p(arguments[t],c)},before:function(n,t){g(n,t)},after:function(n,t){p(n,t)},untrace:function(n){if(arguments.length>0)for(var t=0;t<arguments.length;t++)h(arguments[t]);else e(y,h)}};return function(){var n=this;return e(n,function(r,o){t(o)&&(n[r]=function(){return o.apply(n,i(arguments)),n})})}.call(w)}();