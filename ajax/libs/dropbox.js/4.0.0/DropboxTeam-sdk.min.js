!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.DropboxTeam=t()}(this,function(){"use strict";var e={authTokenFromOauth1:function(e){return this.request("auth/token/from_oauth1",e,"app","api","rpc")},authTokenRevoke:function(e){return this.request("auth/token/revoke",e,"user","api","rpc")},filePropertiesPropertiesAdd:function(e){return this.request("file_properties/properties/add",e,"user","api","rpc")},filePropertiesPropertiesOverwrite:function(e){return this.request("file_properties/properties/overwrite",e,"user","api","rpc")},filePropertiesPropertiesRemove:function(e){return this.request("file_properties/properties/remove",e,"user","api","rpc")},filePropertiesPropertiesSearch:function(e){return this.request("file_properties/properties/search",e,"user","api","rpc")},filePropertiesPropertiesSearchContinue:function(e){return this.request("file_properties/properties/search/continue",e,"user","api","rpc")},filePropertiesPropertiesUpdate:function(e){return this.request("file_properties/properties/update",e,"user","api","rpc")},filePropertiesTemplatesAddForTeam:function(e){return this.request("file_properties/templates/add_for_team",e,"team","api","rpc")},filePropertiesTemplatesAddForUser:function(e){return this.request("file_properties/templates/add_for_user",e,"user","api","rpc")},filePropertiesTemplatesGetForTeam:function(e){return this.request("file_properties/templates/get_for_team",e,"team","api","rpc")},filePropertiesTemplatesGetForUser:function(e){return this.request("file_properties/templates/get_for_user",e,"user","api","rpc")},filePropertiesTemplatesListForTeam:function(e){return this.request("file_properties/templates/list_for_team",e,"team","api","rpc")},filePropertiesTemplatesListForUser:function(e){return this.request("file_properties/templates/list_for_user",e,"user","api","rpc")},filePropertiesTemplatesRemoveForTeam:function(e){return this.request("file_properties/templates/remove_for_team",e,"team","api","rpc")},filePropertiesTemplatesRemoveForUser:function(e){return this.request("file_properties/templates/remove_for_user",e,"user","api","rpc")},filePropertiesTemplatesUpdateForTeam:function(e){return this.request("file_properties/templates/update_for_team",e,"team","api","rpc")},filePropertiesTemplatesUpdateForUser:function(e){return this.request("file_properties/templates/update_for_user",e,"user","api","rpc")},fileRequestsCreate:function(e){return this.request("file_requests/create",e,"user","api","rpc")},fileRequestsGet:function(e){return this.request("file_requests/get",e,"user","api","rpc")},fileRequestsList:function(e){return this.request("file_requests/list",e,"user","api","rpc")},fileRequestsUpdate:function(e){return this.request("file_requests/update",e,"user","api","rpc")},filesAlphaGetMetadata:function(e){return this.request("files/alpha/get_metadata",e,"user","api","rpc")},filesAlphaUpload:function(e){return this.request("files/alpha/upload",e,"user","content","upload")},filesCopy:function(e){return this.request("files/copy",e,"user","api","rpc")},filesCopyBatch:function(e){return this.request("files/copy_batch",e,"user","api","rpc")},filesCopyBatchCheck:function(e){return this.request("files/copy_batch/check",e,"user","api","rpc")},filesCopyReferenceGet:function(e){return this.request("files/copy_reference/get",e,"user","api","rpc")},filesCopyReferenceSave:function(e){return this.request("files/copy_reference/save",e,"user","api","rpc")},filesCopyV2:function(e){return this.request("files/copy_v2",e,"user","api","rpc")},filesCreateFolder:function(e){return this.request("files/create_folder",e,"user","api","rpc")},filesCreateFolderV2:function(e){return this.request("files/create_folder_v2",e,"user","api","rpc")},filesDelete:function(e){return this.request("files/delete",e,"user","api","rpc")},filesDeleteBatch:function(e){return this.request("files/delete_batch",e,"user","api","rpc")},filesDeleteBatchCheck:function(e){return this.request("files/delete_batch/check",e,"user","api","rpc")},filesDeleteV2:function(e){return this.request("files/delete_v2",e,"user","api","rpc")},filesDownload:function(e){return this.request("files/download",e,"user","content","download")},filesDownloadZip:function(e){return this.request("files/download_zip",e,"user","content","download")},filesGetMetadata:function(e){return this.request("files/get_metadata",e,"user","api","rpc")},filesGetPreview:function(e){return this.request("files/get_preview",e,"user","content","download")},filesGetTemporaryLink:function(e){return this.request("files/get_temporary_link",e,"user","api","rpc")},filesGetThumbnail:function(e){return this.request("files/get_thumbnail",e,"user","content","download")},filesGetThumbnailBatch:function(e){return this.request("files/get_thumbnail_batch",e,"user","content","rpc")},filesListFolder:function(e){return this.request("files/list_folder",e,"user","api","rpc")},filesListFolderContinue:function(e){return this.request("files/list_folder/continue",e,"user","api","rpc")},filesListFolderGetLatestCursor:function(e){return this.request("files/list_folder/get_latest_cursor",e,"user","api","rpc")},filesListFolderLongpoll:function(e){return this.request("files/list_folder/longpoll",e,"noauth","notify","rpc")},filesListRevisions:function(e){return this.request("files/list_revisions",e,"user","api","rpc")},filesMove:function(e){return this.request("files/move",e,"user","api","rpc")},filesMoveBatch:function(e){return this.request("files/move_batch",e,"user","api","rpc")},filesMoveBatchCheck:function(e){return this.request("files/move_batch/check",e,"user","api","rpc")},filesMoveV2:function(e){return this.request("files/move_v2",e,"user","api","rpc")},filesPermanentlyDelete:function(e){return this.request("files/permanently_delete",e,"user","api","rpc")},filesPropertiesAdd:function(e){return this.request("files/properties/add",e,"user","api","rpc")},filesPropertiesOverwrite:function(e){return this.request("files/properties/overwrite",e,"user","api","rpc")},filesPropertiesRemove:function(e){return this.request("files/properties/remove",e,"user","api","rpc")},filesPropertiesTemplateGet:function(e){return this.request("files/properties/template/get",e,"user","api","rpc")},filesPropertiesTemplateList:function(e){return this.request("files/properties/template/list",e,"user","api","rpc")},filesPropertiesUpdate:function(e){return this.request("files/properties/update",e,"user","api","rpc")},filesRestore:function(e){return this.request("files/restore",e,"user","api","rpc")},filesSaveUrl:function(e){return this.request("files/save_url",e,"user","api","rpc")},filesSaveUrlCheckJobStatus:function(e){return this.request("files/save_url/check_job_status",e,"user","api","rpc")},filesSearch:function(e){return this.request("files/search",e,"user","api","rpc")},filesUpload:function(e){return this.request("files/upload",e,"user","content","upload")},filesUploadSessionAppend:function(e){return this.request("files/upload_session/append",e,"user","content","upload")},filesUploadSessionAppendV2:function(e){return this.request("files/upload_session/append_v2",e,"user","content","upload")},filesUploadSessionFinish:function(e){return this.request("files/upload_session/finish",e,"user","content","upload")},filesUploadSessionFinishBatch:function(e){return this.request("files/upload_session/finish_batch",e,"user","api","rpc")},filesUploadSessionFinishBatchCheck:function(e){return this.request("files/upload_session/finish_batch/check",e,"user","api","rpc")},filesUploadSessionStart:function(e){return this.request("files/upload_session/start",e,"user","content","upload")},paperDocsArchive:function(e){return this.request("paper/docs/archive",e,"user","api","rpc")},paperDocsCreate:function(e){return this.request("paper/docs/create",e,"user","api","upload")},paperDocsDownload:function(e){return this.request("paper/docs/download",e,"user","api","download")},paperDocsFolderUsersList:function(e){return this.request("paper/docs/folder_users/list",e,"user","api","rpc")},paperDocsFolderUsersListContinue:function(e){return this.request("paper/docs/folder_users/list/continue",e,"user","api","rpc")},paperDocsGetFolderInfo:function(e){return this.request("paper/docs/get_folder_info",e,"user","api","rpc")},paperDocsList:function(e){return this.request("paper/docs/list",e,"user","api","rpc")},paperDocsListContinue:function(e){return this.request("paper/docs/list/continue",e,"user","api","rpc")},paperDocsPermanentlyDelete:function(e){return this.request("paper/docs/permanently_delete",e,"user","api","rpc")},paperDocsSharingPolicyGet:function(e){return this.request("paper/docs/sharing_policy/get",e,"user","api","rpc")},paperDocsSharingPolicySet:function(e){return this.request("paper/docs/sharing_policy/set",e,"user","api","rpc")},paperDocsUpdate:function(e){return this.request("paper/docs/update",e,"user","api","upload")},paperDocsUsersAdd:function(e){return this.request("paper/docs/users/add",e,"user","api","rpc")},paperDocsUsersList:function(e){return this.request("paper/docs/users/list",e,"user","api","rpc")},paperDocsUsersListContinue:function(e){return this.request("paper/docs/users/list/continue",e,"user","api","rpc")},paperDocsUsersRemove:function(e){return this.request("paper/docs/users/remove",e,"user","api","rpc")},sharingAddFileMember:function(e){return this.request("sharing/add_file_member",e,"user","api","rpc")},sharingAddFolderMember:function(e){return this.request("sharing/add_folder_member",e,"user","api","rpc")},sharingChangeFileMemberAccess:function(e){return this.request("sharing/change_file_member_access",e,"user","api","rpc")},sharingCheckJobStatus:function(e){return this.request("sharing/check_job_status",e,"user","api","rpc")},sharingCheckRemoveMemberJobStatus:function(e){return this.request("sharing/check_remove_member_job_status",e,"user","api","rpc")},sharingCheckShareJobStatus:function(e){return this.request("sharing/check_share_job_status",e,"user","api","rpc")},sharingCreateSharedLink:function(e){return this.request("sharing/create_shared_link",e,"user","api","rpc")},sharingCreateSharedLinkWithSettings:function(e){return this.request("sharing/create_shared_link_with_settings",e,"user","api","rpc")},sharingGetFileMetadata:function(e){return this.request("sharing/get_file_metadata",e,"user","api","rpc")},sharingGetFileMetadataBatch:function(e){return this.request("sharing/get_file_metadata/batch",e,"user","api","rpc")},sharingGetFolderMetadata:function(e){return this.request("sharing/get_folder_metadata",e,"user","api","rpc")},sharingGetSharedLinkFile:function(e){return this.request("sharing/get_shared_link_file",e,"user","content","download")},sharingGetSharedLinkMetadata:function(e){return this.request("sharing/get_shared_link_metadata",e,"user","api","rpc")},sharingGetSharedLinks:function(e){return this.request("sharing/get_shared_links",e,"user","api","rpc")},sharingListFileMembers:function(e){return this.request("sharing/list_file_members",e,"user","api","rpc")},sharingListFileMembersBatch:function(e){return this.request("sharing/list_file_members/batch",e,"user","api","rpc")},sharingListFileMembersContinue:function(e){return this.request("sharing/list_file_members/continue",e,"user","api","rpc")},sharingListFolderMembers:function(e){return this.request("sharing/list_folder_members",e,"user","api","rpc")},sharingListFolderMembersContinue:function(e){return this.request("sharing/list_folder_members/continue",e,"user","api","rpc")},sharingListFolders:function(e){return this.request("sharing/list_folders",e,"user","api","rpc")},sharingListFoldersContinue:function(e){return this.request("sharing/list_folders/continue",e,"user","api","rpc")},sharingListMountableFolders:function(e){return this.request("sharing/list_mountable_folders",e,"user","api","rpc")},sharingListMountableFoldersContinue:function(e){return this.request("sharing/list_mountable_folders/continue",e,"user","api","rpc")},sharingListReceivedFiles:function(e){return this.request("sharing/list_received_files",e,"user","api","rpc")},sharingListReceivedFilesContinue:function(e){return this.request("sharing/list_received_files/continue",e,"user","api","rpc")},sharingListSharedLinks:function(e){return this.request("sharing/list_shared_links",e,"user","api","rpc")},sharingModifySharedLinkSettings:function(e){return this.request("sharing/modify_shared_link_settings",e,"user","api","rpc")},sharingMountFolder:function(e){return this.request("sharing/mount_folder",e,"user","api","rpc")},sharingRelinquishFileMembership:function(e){return this.request("sharing/relinquish_file_membership",e,"user","api","rpc")},sharingRelinquishFolderMembership:function(e){return this.request("sharing/relinquish_folder_membership",e,"user","api","rpc")},sharingRemoveFileMember:function(e){return this.request("sharing/remove_file_member",e,"user","api","rpc")},sharingRemoveFileMember2:function(e){return this.request("sharing/remove_file_member_2",e,"user","api","rpc")},sharingRemoveFolderMember:function(e){return this.request("sharing/remove_folder_member",e,"user","api","rpc")},sharingRevokeSharedLink:function(e){return this.request("sharing/revoke_shared_link",e,"user","api","rpc")},sharingShareFolder:function(e){return this.request("sharing/share_folder",e,"user","api","rpc")},sharingTransferFolder:function(e){return this.request("sharing/transfer_folder",e,"user","api","rpc")},sharingUnmountFolder:function(e){return this.request("sharing/unmount_folder",e,"user","api","rpc")},sharingUnshareFile:function(e){return this.request("sharing/unshare_file",e,"user","api","rpc")},sharingUnshareFolder:function(e){return this.request("sharing/unshare_folder",e,"user","api","rpc")},sharingUpdateFileMember:function(e){return this.request("sharing/update_file_member",e,"user","api","rpc")},sharingUpdateFolderMember:function(e){return this.request("sharing/update_folder_member",e,"user","api","rpc")},sharingUpdateFolderPolicy:function(e){return this.request("sharing/update_folder_policy",e,"user","api","rpc")},teamLogGetEvents:function(e){return this.request("team_log/get_events",e,"team","api","rpc")},teamLogGetEventsContinue:function(e){return this.request("team_log/get_events/continue",e,"team","api","rpc")},usersGetAccount:function(e){return this.request("users/get_account",e,"user","api","rpc")},usersGetAccountBatch:function(e){return this.request("users/get_account_batch",e,"user","api","rpc")},usersGetCurrentAccount:function(e){return this.request("users/get_current_account",e,"user","api","rpc")},usersGetSpaceUsage:function(e){return this.request("users/get_space_usage",e,"user","api","rpc")}};function t(e){return"\\u"+("000"+e.charCodeAt(0).toString(16)).slice(-4)}function r(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||"undefined"==typeof module}function i(e){return"https://"+e+".dropboxapi.com/2/"}function n(e){return JSON.stringify(e).replace(/[\u007f-\uffff]/g,t)}var s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var r=0;t.length>r;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),u=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,n=!1,s=void 0;try{for(var o,u=e[Symbol.iterator]();!(i=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){n=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(n)throw s}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function p(e,t,s,o,u,a){if("user"!==s)throw Error("Unexpected auth type: "+s);var p={method:"POST",headers:{Authorization:"Bearer "+u,"Dropbox-API-Arg":n(t)}};return a&&(a.selectUser&&(p.headers["Dropbox-API-Select-User"]=a.selectUser),a.selectAdmin&&(p.headers["Dropbox-API-Select-Admin"]=a.selectAdmin)),fetch(i(o)+e,p).then(function(e){return(t=e,t.ok?r()?t.blob():t.buffer():t.text()).then(function(t){return[e,t]});var t}).then(function(e){var t=c(e,2);return function(e,t){if(!e.ok)throw{error:t,response:e,status:e.status};var i=JSON.parse(e.headers.get("dropbox-api-result"));return r()?i.fileBlob=t:i.fileBinary=t,i}(t[0],t[1])})}function f(e,t,r,s,o,u){if("user"!==r)throw Error("Unexpected auth type: "+r);var a=t.contents;delete t.contents;var p={body:a,method:"POST",headers:{Authorization:"Bearer "+o,"Content-Type":"application/octet-stream","Dropbox-API-Arg":n(t)}};return u&&(u.selectUser&&(p.headers["Dropbox-API-Select-User"]=u.selectUser),u.selectAdmin&&(p.headers["Dropbox-API-Select-Admin"]=u.selectAdmin)),fetch(i(s)+e,p).then(function(e){return r=(t=e).clone(),new Promise(function(e){t.json().then(function(t){return e(t)}).catch(function(){return r.text().then(function(t){return e(t)})})}).then(function(e){return[t,e]});var t,r}).then(function(e){var t=c(e,2),r=t[0],i=t[1];if(!r.ok)throw{error:i,response:r,status:r.status};return i})}for(var h=function(e){return 3*e.length/4-b(e)},l=function(e){var t,r,i,n,s,o=e.length;n=b(e),s=new _(3*o/4-n),r=n>0?o-4:o;var u=0;for(t=0;r>t;t+=4)i=g[e.charCodeAt(t)]<<18|g[e.charCodeAt(t+1)]<<12|g[e.charCodeAt(t+2)]<<6|g[e.charCodeAt(t+3)],s[u++]=i>>16&255,s[u++]=i>>8&255,s[u++]=255&i;2===n?(i=g[e.charCodeAt(t)]<<2|g[e.charCodeAt(t+1)]>>4,s[u++]=255&i):1===n&&(i=g[e.charCodeAt(t)]<<10|g[e.charCodeAt(t+1)]<<4|g[e.charCodeAt(t+2)]>>2,s[u++]=i>>8&255,s[u++]=255&i);return s},m=function(e){for(var t,r=e.length,i=r%3,n="",s=[],o=0,u=r-i;u>o;o+=16383)s.push(q(e,o,o+16383>u?u:o+16383));1===i?(n+=d[(t=e[r-1])>>2],n+=d[t<<4&63],n+="=="):2===i&&(n+=d[(t=(e[r-2]<<8)+e[r-1])>>10],n+=d[t>>4&63],n+=d[t<<2&63],n+="=");return s.push(n),s.join("")},d=[],g=[],_="undefined"!=typeof Uint8Array?Uint8Array:Array,v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",y=0;64>y;++y)d[y]=v[y],g[v.charCodeAt(y)]=y;function b(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function q(e,t,r){for(var i,n=[],s=t;r>s;s+=3)n.push(d[(i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]))>>18&63]+d[i>>12&63]+d[i>>6&63]+d[63&i]);return n.join("")}g[45]=62,g[95]=63;var w,k={byteLength:h,toByteArray:l,fromByteArray:m},A={read:function(e,t,r,i,n){var s,o,u=8*n-i-1,a=(1<<u)-1,c=a>>1,p=-7,f=r?n-1:0,h=r?-1:1,l=e[t+f];for(f+=h,s=l&(1<<-p)-1,l>>=-p,p+=u;p>0;s=256*s+e[t+f],f+=h,p-=8);for(o=s&(1<<-p)-1,s>>=-p,p+=i;p>0;o=256*o+e[t+f],f+=h,p-=8);if(0===s)s=1-c;else{if(s===a)return o?NaN:1/0*(l?-1:1);o+=Math.pow(2,i),s-=c}return(l?-1:1)*o*Math.pow(2,s-i)},write:function(e,t,r,i,n,s){var o,u,a,c=8*s-n-1,p=(1<<c)-1,f=p>>1,h=23===n?5.960464477539062e-8:0,l=i?0:s-1,m=i?1:-1,d=0>t||0===t&&0>1/t?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(u=isNaN(t)?1:0,o=p):(1>t*(a=Math.pow(2,-(o=Math.floor(Math.log(t)/Math.LN2))))&&(o--,a*=2),2>(t+=1>o+f?h*Math.pow(2,1-f):h/a)*a||(o++,a/=2),p>o+f?1>o+f?(u=t*Math.pow(2,f-1)*Math.pow(2,n),o=0):(u=(t*a-1)*Math.pow(2,n),o+=f):(u=0,o=p));n>=8;e[r+l]=255&u,l+=m,u/=256,n-=8);for(o=o<<n|u,c+=n;c>0;e[r+l]=255&o,l+=m,o/=256,c-=8);e[r+l-m]|=128*d}},L=(function(e,t){t.Buffer=n,t.SlowBuffer=function(e){+e!=e&&(e=0);return n.alloc(+e)},t.INSPECT_MAX_BYTES=50;var r=2147483647;function i(e){if(e>r)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=n.prototype,t}function n(e,t,r){if("number"==typeof e){if("string"==typeof t)throw Error("If encoding is specified then the first argument must be a string");return u(e)}return s(e,t,r)}function s(e,t,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return I(e)||e&&I(e.buffer)?function(e,t,r){if(0>t||t>e.byteLength)throw new RangeError('"offset" is outside of buffer bounds');if(t+(r||0)>e.byteLength)throw new RangeError('"length" is outside of buffer bounds');var i;i=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r);return i.__proto__=n.prototype,i}(e,t,r):"string"==typeof e?function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!n.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|p(e,t),s=i(r),o=s.write(e,t);o!==r&&(s=s.slice(0,o));return s}(e,t):function(e){if(n.isBuffer(e)){var t=0|c(e.length),r=i(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}if(e){if(ArrayBuffer.isView(e)||"length"in e)return"number"!=typeof e.length||P(e.length)?i(0):a(e);if("Buffer"===e.type&&Array.isArray(e.data))return a(e.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}(e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(0>e)throw new RangeError('"size" argument must not be negative')}function u(e){return o(e),i(0>e?0:0|c(e))}function a(e){for(var t=0>e.length?0:0|c(e.length),r=i(t),n=0;t>n;n+=1)r[n]=255&e[n];return r}function c(e){if(e>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return 0|e}function p(e,t){if(n.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||I(e))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return R(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return B(e).length;default:if(i)return R(e).length;t=(""+t).toLowerCase(),i=!0}}function f(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function h(e,t,r,i,s){if(0===e.length)return-1;if("string"==typeof r?(i=r,r=0):r>2147483647?r=2147483647:-2147483648>r&&(r=-2147483648),P(r=+r)&&(r=s?0:e.length-1),0>r&&(r=e.length+r),e.length>r){if(0>r){if(!s)return-1;r=0}}else{if(s)return-1;r=e.length-1}if("string"==typeof t&&(t=n.from(t,i)),n.isBuffer(t))return 0===t.length?-1:l(e,t,r,i,s);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):l(e,[t],r,i,s);throw new TypeError("val must be string, number or Buffer")}function l(e,t,r,i,n){var s,o=1,u=e.length,a=t.length;if(void 0!==i&&("ucs2"===(i=(i+"").toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(2>e.length||2>t.length)return-1;o=2,u/=2,a/=2,r/=2}function c(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(n){var p=-1;for(s=r;u>s;s++)if(c(e,s)===c(t,-1===p?0:s-p)){if(-1===p&&(p=s),s-p+1===a)return p*o}else-1!==p&&(s-=s-p),p=-1}else for(r+a>u&&(r=u-a),s=r;s>=0;s--){for(var f=!0,h=0;a>h;h++)if(c(e,s+h)!==c(t,h)){f=!1;break}if(f)return s}return-1}function m(e,t,r,i){var n=e.length-(r=+r||0);i?(i=+i)>n&&(i=n):i=n;var s=t.length;i>s/2&&(i=s/2);for(var o=0;i>o;++o){var u=parseInt(t.substr(2*o,2),16);if(P(u))return o;e[r+o]=u}return o}function d(e,t,r,i){return F(function(e){for(var t=[],r=0;e.length>r;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function g(e,t,r){return k.fromByteArray(0===t&&r===e.length?e:e.slice(t,r))}function _(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;r>n;){var s,o,u,a,c=e[n],p=null,f=c>239?4:c>223?3:c>191?2:1;if(r>=n+f)switch(f){case 1:128>c&&(p=c);break;case 2:128==(192&(s=e[n+1]))&&(a=(31&c)<<6|63&s)>127&&(p=a);break;case 3:o=e[n+2],128==(192&(s=e[n+1]))&&128==(192&o)&&(a=(15&c)<<12|(63&s)<<6|63&o)>2047&&(55296>a||a>57343)&&(p=a);break;case 4:o=e[n+2],u=e[n+3],128==(192&(s=e[n+1]))&&128==(192&o)&&128==(192&u)&&(a=(15&c)<<18|(63&s)<<12|(63&o)<<6|63&u)>65535&&1114112>a&&(p=a)}null===p?(p=65533,f=1):p>65535&&(i.push((p-=65536)>>>10&1023|55296),p=56320|1023&p),i.push(p),n+=f}return function(e){var t=e.length;if(v>=t)return String.fromCharCode.apply(String,e);var r="",i=0;for(;t>i;)r+=String.fromCharCode.apply(String,e.slice(i,i+=v));return r}(i)}t.kMaxLength=r,(n.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||void 0===console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(n.prototype,"parent",{get:function(){if(this instanceof n)return this.buffer}}),Object.defineProperty(n.prototype,"offset",{get:function(){if(this instanceof n)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192,n.from=function(e,t,r){return s(e,t,r)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array,n.alloc=function(e,t,r){return s=t,u=r,o(n=e),n>0&&void 0!==s?"string"==typeof u?i(n).fill(s,u):i(n).fill(s):i(n);var n,s,u},n.allocUnsafe=function(e){return u(e)},n.allocUnsafeSlow=function(e){return u(e)},n.isBuffer=function(e){return null!=e&&!0===e._isBuffer},n.compare=function(e,t){if(!n.isBuffer(e)||!n.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,s=0,o=Math.min(r,i);o>s;++s)if(e[s]!==t[s]){r=e[s],i=t[s];break}return i>r?-1:r>i?1:0},n.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return n.alloc(0);var r;if(void 0===t)for(t=0,r=0;e.length>r;++r)t+=e[r].length;var i=n.allocUnsafe(t),s=0;for(r=0;e.length>r;++r){var o=e[r];if(ArrayBuffer.isView(o)&&(o=n.from(o)),!n.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,s),s+=o.length}return i},n.byteLength=p,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;e>t;t+=2)f(this,t,t+1);return this},n.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;e>t;t+=4)f(this,t,t+3),f(this,t+1,t+2);return this},n.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;e>t;t+=8)f(this,t,t+7),f(this,t+1,t+6),f(this,t+2,t+5),f(this,t+3,t+4);return this},n.prototype.toLocaleString=n.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?_(this,0,e):function(e,t,r){var i=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),0>=r)return"";if((t>>>=0)>=(r>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return q(this,t,r);case"utf8":case"utf-8":return _(this,t,r);case"ascii":return y(this,t,r);case"latin1":case"binary":return b(this,t,r);case"base64":return g(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}.apply(this,arguments)},n.prototype.equals=function(e){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===n.compare(this,e)},n.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},n.prototype.compare=function(e,t,r,i,s){if(!n.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===s&&(s=this.length),0>t||r>e.length||0>i||s>this.length)throw new RangeError("out of range index");if(i>=s&&t>=r)return 0;if(i>=s)return-1;if(t>=r)return 1;if(this===e)return 0;for(var o=(s>>>=0)-(i>>>=0),u=(r>>>=0)-(t>>>=0),a=Math.min(o,u),c=this.slice(i,s),p=e.slice(t,r),f=0;a>f;++f)if(c[f]!==p[f]){o=c[f],u=p[f];break}return u>o?-1:o>u?1:0},n.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},n.prototype.indexOf=function(e,t,r){return h(this,e,t,r,!0)},n.prototype.lastIndexOf=function(e,t,r){return h(this,e,t,r,!1)},n.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(0>r||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var s,o,u,a,c,p,f,h,l,g=!1;;)switch(i){case"hex":return m(this,e,t,r);case"utf8":case"utf-8":return l=r,F(R(e,(f=this).length-(h=t)),f,h,l);case"ascii":return d(this,e,t,r);case"latin1":case"binary":return d(this,e,t,r);case"base64":return a=this,c=t,p=r,F(B(e),a,c,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u=r,F(function(e,t){for(var r,i,n=[],s=0;e.length>s&&(t-=2)>=0;++s)r=e.charCodeAt(s),i=r>>8,n.push(r%256),n.push(i);return n}(e,(s=this).length-(o=t)),s,o,u);default:if(g)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),g=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var v=4096;function y(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;r>n;++n)i+=String.fromCharCode(127&e[n]);return i}function b(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;r>n;++n)i+=String.fromCharCode(e[n]);return i}function q(e,t,r){var i=e.length;t&&t>=0||(t=0),(!r||0>r||r>i)&&(r=i);for(var n="",s=t;r>s;++s)n+=M(e[s]);return n}function w(e,t,r){for(var i=e.slice(t,r),n="",s=0;i.length>s;s+=2)n+=String.fromCharCode(i[s]+256*i[s+1]);return n}function L(e,t,r){if(e%1!=0||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function E(e,t,r,i,s,o){if(!n.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||o>t)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function S(e,t,r,i,n,s){if(r+i>e.length)throw new RangeError("Index out of range");if(0>r)throw new RangeError("Index out of range")}function U(e,t,r,i,n){return t=+t,r>>>=0,n||S(e,0,r,4),A.write(e,t,r,i,23,4),r+4}function C(e,t,r,i,n){return t=+t,r>>>=0,n||S(e,0,r,8),A.write(e,t,r,i,52,8),r+8}n.prototype.slice=function(e,t){var r=this.length;0>(e=~~e)?0>(e+=r)&&(e=0):e>r&&(e=r),0>(t=void 0===t?r:~~t)?0>(t+=r)&&(t=0):t>r&&(t=r),e>t&&(t=e);var i=this.subarray(e,t);return i.__proto__=n.prototype,i},n.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return i},n.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},n.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},n.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},n.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},n.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},n.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},n.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var i=this[e],n=1,s=0;++s<t&&(n*=256);)i+=this[e+s]*n;return(n*=128)>i||(i-=Math.pow(2,8*t)),i},n.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var i=t,n=1,s=this[e+--i];i>0&&(n*=256);)s+=this[e+--i]*n;return(n*=128)>s||(s-=Math.pow(2,8*t)),s},n.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},n.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},n.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},n.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),A.read(this,e,!0,23,4)},n.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),A.read(this,e,!1,23,4)},n.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),A.read(this,e,!0,52,8)},n.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),A.read(this,e,!1,52,8)},n.prototype.writeUIntLE=function(e,t,r,i){(e=+e,t>>>=0,r>>>=0,i)||E(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,s=0;for(this[t]=255&e;++s<r&&(n*=256);)this[t+s]=e/n&255;return t+r},n.prototype.writeUIntBE=function(e,t,r,i){(e=+e,t>>>=0,r>>>=0,i)||E(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,s=1;for(this[t+n]=255&e;--n>=0&&(s*=256);)this[t+n]=e/s&255;return t+r},n.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,255,0),this[t]=255&e,t+1},n.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},n.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},n.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},n.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},n.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t>>>=0,!i){var n=Math.pow(2,8*r-1);E(this,e,t,r,n-1,-n)}var s=0,o=1,u=0;for(this[t]=255&e;++s<r&&(o*=256);)0>e&&0===u&&0!==this[t+s-1]&&(u=1),this[t+s]=(e/o>>0)-u&255;return t+r},n.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t>>>=0,!i){var n=Math.pow(2,8*r-1);E(this,e,t,r,n-1,-n)}var s=r-1,o=1,u=0;for(this[t+s]=255&e;--s>=0&&(o*=256);)0>e&&0===u&&0!==this[t+s+1]&&(u=1),this[t+s]=(e/o>>0)-u&255;return t+r},n.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},n.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},n.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},n.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},n.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},n.prototype.writeFloatLE=function(e,t,r){return U(this,e,t,!0,r)},n.prototype.writeFloatBE=function(e,t,r){return U(this,e,t,!1,r)},n.prototype.writeDoubleLE=function(e,t,r){return C(this,e,t,!0,r)},n.prototype.writeDoubleBE=function(e,t,r){return C(this,e,t,!1,r)},n.prototype.copy=function(e,t,r,i){if(!n.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),i||0===i||(i=this.length),e.length>t||(t=e.length),t||(t=0),i>0&&r>i&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("Index out of range");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),i-r>e.length-t&&(i=e.length-t+r);var s=i-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,i);else if(this===e&&t>r&&i>t)for(var o=s-1;o>=0;--o)e[o+t]=this[o+r];else Uint8Array.prototype.set.call(e,this.subarray(r,i),t);return s},n.prototype.fill=function(e,t,r,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,r=this.length):"string"==typeof r&&(i=r,r=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!n.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){var s=e.charCodeAt(0);("utf8"===i&&128>s||"latin1"===i)&&(e=s)}}else"number"==typeof e&&(e&=255);if(0>t||t>this.length||r>this.length)throw new RangeError("Out of range index");if(t>=r)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;r>o;++o)this[o]=e;else{var u=n.isBuffer(e)?e:new n(e,i),a=u.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;r-t>o;++o)this[o+t]=u[o%a]}return this};var T=/[^+/0-9A-Za-z-_]/g;function M(e){return 16>e?"0"+e.toString(16):e.toString(16)}function R(e,t){var r;t=t||1/0;for(var i=e.length,n=null,s=[],o=0;i>o;++o){if((r=e.charCodeAt(o))>55295&&57344>r){if(!n){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&s.push(239,191,189);continue}n=r;continue}if(56320>r){(t-=3)>-1&&s.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&s.push(239,191,189);if(n=null,128>r){if(0>(t-=1))break;s.push(r)}else if(2048>r){if(0>(t-=2))break;s.push(r>>6|192,63&r|128)}else if(65536>r){if(0>(t-=3))break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(r>=1114112)throw Error("Invalid code point");if(0>(t-=4))break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function B(e){return k.toByteArray(function(e){if(2>(e=(e=e.split("=")[0]).trim().replace(T,"")).length)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function F(e,t,r,i){for(var n=0;i>n&&(n+r<t.length&&n<e.length);++n)t[n+r]=e[n];return n}function I(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"==typeof e.byteLength}function P(e){return e!=e}}(w={exports:{}},w.exports),w.exports).Buffer;function E(e,t,r,n,s,o){var u={method:"POST",body:t?JSON.stringify(t):null},a={};t&&(a["Content-Type"]="application/json");var p="";switch(r){case"app":if(!o.clientId||!o.clientSecret)throw Error("A client id and secret is required for this function");p=new L(o.clientId+":"+o.clientSecret).toString("base64"),a.Authorization="Basic "+p;break;case"team":case"user":a.Authorization="Bearer "+s;break;case"noauth":break;default:throw Error("Unhandled auth type: "+r)}return o&&(o.selectUser&&(a["Dropbox-API-Select-User"]=o.selectUser),o.selectAdmin&&(a["Dropbox-API-Select-Admin"]=o.selectAdmin)),u.headers=a,fetch(i(n)+e,u).then(function(e){return r=(t=e).clone(),new Promise(function(e){t.json().then(function(t){return e(t)}).catch(function(){return r.text().then(function(t){return e(t)})})}).then(function(e){return[t,e]});var t,r}).then(function(e){var t=c(e,2),r=t[0],i=t[1];if(!r.ok)throw{error:i,response:r,status:r.status};return i})}"function"!=typeof Object.assign&&(Object.assign=function(e){var t,r,i,n;if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(t=Object(e),r=1;arguments.length>r;r++)if(null!=(i=arguments[r]))for(n in i)i.hasOwnProperty(n)&&(t[n]=i[n]);return t}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),i=r.length>>>0;if(0===i)return!1;var n,s,o=0|t,u=Math.max(0>o?i-Math.abs(o):o,0);for(;i>u;){if((n=r[u])===(s=e)||"number"==typeof n&&"number"==typeof s&&isNaN(n)&&isNaN(s))return!0;u++}return!1}});var S=function(){function e(t){s(this,e),this.accessToken=(t=t||{}).accessToken,this.clientId=t.clientId,this.clientSecret=t.clientSecret,this.selectUser=t.selectUser,this.selectAdmin=t.selectAdmin}return o(e,[{key:"setAccessToken",value:function(e){this.accessToken=e}},{key:"getAccessToken",value:function(){return this.accessToken}},{key:"setClientId",value:function(e){this.clientId=e}},{key:"getClientId",value:function(){return this.clientId}},{key:"setClientSecret",value:function(e){this.clientSecret=e}},{key:"getClientSecret",value:function(){return this.clientSecret}},{key:"getAuthenticationUrl",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"token",i=this.getClientId(),n="https://www.dropbox.com/oauth2/authorize";if(!i)throw Error("A client id is required. You can set the client id using .setClientId().");if("code"!==r&&!e)throw Error("A redirect uri is required.");if(!["code","token"].includes(r))throw Error("Authorization type must be code or token");var s=void 0;return s="code"===r?n+"?response_type=code&client_id="+i:n+"?response_type=token&client_id="+i,e&&(s+="&redirect_uri="+e),t&&(s+="&state="+t),s}},{key:"getAccessTokenFromCode",value:function(e,t){var r=this.getClientId(),i=this.getClientSecret();if(!r)throw Error("A client id is required. You can set the client id using .setClientId().");if(!i)throw Error("A client secret is required. You can set the client id using .setClientSecret().");return fetch("https://api.dropboxapi.com/oauth2/token?code="+t+"&grant_type=authorization_code&redirect_uri="+e+"&client_id="+r+"&client_secret="+i,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){return r=(t=e).clone(),new Promise(function(e){t.json().then(function(t){return e(t)}).catch(function(){return r.text().then(function(t){return e(t)})})}).then(function(e){return[t,e]});var t,r}).then(function(e){var t=c(e,2),r=t[0],i=t[1];if(!r.ok)throw{error:i,response:r,status:r.status};return i.access_token})}},{key:"authenticateWithCordova",value:function(e,t){var r=this.getAuthenticationUrl("https://www.dropbox.com/1/oauth2/redirect_receiver"),i=!1,n=window.open(r,"_blank");function s(){window.setTimeout(function(){n.close()},10),t()}function o(r){if(r.url.indexOf("&error=")>-1)window.setTimeout(function(){n.close()},10),t();else{var i="#access_token=",s=r.url.indexOf(i),o=r.url.indexOf("&token_type=");if(s>-1){s+=14,window.setTimeout(function(){n.close()},10);var u=r.url.substring(s,o);e(u)}}}n.addEventListener("loaderror",s),n.addEventListener("loadstop",o),n.addEventListener("exit",function e(){i||(n.removeEventListener("loaderror",s),n.removeEventListener("loadstop",o),n.removeEventListener("exit",e),i=!0)})}},{key:"request",value:function(e,t,r,i,n){var s=null;switch(n){case"rpc":s=this.getRpcRequest();break;case"download":s=this.getDownloadRequest();break;case"upload":s=this.getUploadRequest();break;default:throw Error("Invalid request style: "+n)}var o={selectUser:this.selectUser,selectAdmin:this.selectAdmin,clientId:this.getClientId(),clientSecret:this.getClientSecret()};return s(e,t,r,i,this.getAccessToken(),o)}},{key:"setRpcRequest",value:function(e){this.rpcRequest=e}},{key:"getRpcRequest",value:function(){return void 0===this.rpcRequest&&(this.rpcRequest=E),this.rpcRequest}},{key:"setDownloadRequest",value:function(e){this.downloadRequest=e}},{key:"getDownloadRequest",value:function(){return void 0===this.downloadRequest&&(this.downloadRequest=p),this.downloadRequest}},{key:"setUploadRequest",value:function(e){this.uploadRequest=e}},{key:"getUploadRequest",value:function(){return void 0===this.uploadRequest&&(this.uploadRequest=f),this.uploadRequest}}]),e}(),U=function(t){function r(t){s(this,r);var i=a(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t));return Object.assign(i,e),i}return u(r,S),o(r,[{key:"filesGetSharedLinkFile",value:function(e){return this.request("sharing/get_shared_link_file",e,"api","download")}}]),r}(),C={teamDevicesListMemberDevices:function(e){return this.request("team/devices/list_member_devices",e,"team","api","rpc")},teamDevicesListMembersDevices:function(e){return this.request("team/devices/list_members_devices",e,"team","api","rpc")},teamDevicesListTeamDevices:function(e){return this.request("team/devices/list_team_devices",e,"team","api","rpc")},teamDevicesRevokeDeviceSession:function(e){return this.request("team/devices/revoke_device_session",e,"team","api","rpc")},teamDevicesRevokeDeviceSessionBatch:function(e){return this.request("team/devices/revoke_device_session_batch",e,"team","api","rpc")},teamFeaturesGetValues:function(e){return this.request("team/features/get_values",e,"team","api","rpc")},teamGetInfo:function(e){return this.request("team/get_info",e,"team","api","rpc")},teamGroupsCreate:function(e){return this.request("team/groups/create",e,"team","api","rpc")},teamGroupsDelete:function(e){return this.request("team/groups/delete",e,"team","api","rpc")},teamGroupsGetInfo:function(e){return this.request("team/groups/get_info",e,"team","api","rpc")},teamGroupsJobStatusGet:function(e){return this.request("team/groups/job_status/get",e,"team","api","rpc")},teamGroupsList:function(e){return this.request("team/groups/list",e,"team","api","rpc")},teamGroupsListContinue:function(e){return this.request("team/groups/list/continue",e,"team","api","rpc")},teamGroupsMembersAdd:function(e){return this.request("team/groups/members/add",e,"team","api","rpc")},teamGroupsMembersList:function(e){return this.request("team/groups/members/list",e,"team","api","rpc")},teamGroupsMembersListContinue:function(e){return this.request("team/groups/members/list/continue",e,"team","api","rpc")},teamGroupsMembersRemove:function(e){return this.request("team/groups/members/remove",e,"team","api","rpc")},teamGroupsMembersSetAccessType:function(e){return this.request("team/groups/members/set_access_type",e,"team","api","rpc")},teamGroupsUpdate:function(e){return this.request("team/groups/update",e,"team","api","rpc")},teamLinkedAppsListMemberLinkedApps:function(e){return this.request("team/linked_apps/list_member_linked_apps",e,"team","api","rpc")},teamLinkedAppsListMembersLinkedApps:function(e){return this.request("team/linked_apps/list_members_linked_apps",e,"team","api","rpc")},teamLinkedAppsListTeamLinkedApps:function(e){return this.request("team/linked_apps/list_team_linked_apps",e,"team","api","rpc")},teamLinkedAppsRevokeLinkedApp:function(e){return this.request("team/linked_apps/revoke_linked_app",e,"team","api","rpc")},teamLinkedAppsRevokeLinkedAppBatch:function(e){return this.request("team/linked_apps/revoke_linked_app_batch",e,"team","api","rpc")},teamMemberSpaceLimitsExcludedUsersAdd:function(e){return this.request("team/member_space_limits/excluded_users/add",e,"team","api","rpc")},teamMemberSpaceLimitsExcludedUsersList:function(e){return this.request("team/member_space_limits/excluded_users/list",e,"team","api","rpc")},teamMemberSpaceLimitsExcludedUsersListContinue:function(e){return this.request("team/member_space_limits/excluded_users/list/continue",e,"team","api","rpc")},teamMemberSpaceLimitsExcludedUsersRemove:function(e){return this.request("team/member_space_limits/excluded_users/remove",e,"team","api","rpc")},teamMemberSpaceLimitsGetCustomQuota:function(e){return this.request("team/member_space_limits/get_custom_quota",e,"team","api","rpc")},teamMemberSpaceLimitsRemoveCustomQuota:function(e){return this.request("team/member_space_limits/remove_custom_quota",e,"team","api","rpc")},teamMemberSpaceLimitsSetCustomQuota:function(e){return this.request("team/member_space_limits/set_custom_quota",e,"team","api","rpc")},teamMembersAdd:function(e){return this.request("team/members/add",e,"team","api","rpc")},teamMembersAddJobStatusGet:function(e){return this.request("team/members/add/job_status/get",e,"team","api","rpc")},teamMembersGetInfo:function(e){return this.request("team/members/get_info",e,"team","api","rpc")},teamMembersList:function(e){return this.request("team/members/list",e,"team","api","rpc")},teamMembersListContinue:function(e){return this.request("team/members/list/continue",e,"team","api","rpc")},teamMembersRecover:function(e){return this.request("team/members/recover",e,"team","api","rpc")},teamMembersRemove:function(e){return this.request("team/members/remove",e,"team","api","rpc")},teamMembersRemoveJobStatusGet:function(e){return this.request("team/members/remove/job_status/get",e,"team","api","rpc")},teamMembersSendWelcomeEmail:function(e){return this.request("team/members/send_welcome_email",e,"team","api","rpc")},teamMembersSetAdminPermissions:function(e){return this.request("team/members/set_admin_permissions",e,"team","api","rpc")},teamMembersSetProfile:function(e){return this.request("team/members/set_profile",e,"team","api","rpc")},teamMembersSuspend:function(e){return this.request("team/members/suspend",e,"team","api","rpc")},teamMembersUnsuspend:function(e){return this.request("team/members/unsuspend",e,"team","api","rpc")},teamNamespacesList:function(e){return this.request("team/namespaces/list",e,"team","api","rpc")},teamNamespacesListContinue:function(e){return this.request("team/namespaces/list/continue",e,"team","api","rpc")},teamPropertiesTemplateAdd:function(e){return this.request("team/properties/template/add",e,"team","api","rpc")},teamPropertiesTemplateGet:function(e){return this.request("team/properties/template/get",e,"team","api","rpc")},teamPropertiesTemplateList:function(e){return this.request("team/properties/template/list",e,"team","api","rpc")},teamPropertiesTemplateUpdate:function(e){return this.request("team/properties/template/update",e,"team","api","rpc")},teamReportsGetActivity:function(e){return this.request("team/reports/get_activity",e,"team","api","rpc")},teamReportsGetDevices:function(e){return this.request("team/reports/get_devices",e,"team","api","rpc")},teamReportsGetMembership:function(e){return this.request("team/reports/get_membership",e,"team","api","rpc")},teamReportsGetStorage:function(e){return this.request("team/reports/get_storage",e,"team","api","rpc")},teamTeamFolderActivate:function(e){return this.request("team/team_folder/activate",e,"team","api","rpc")},teamTeamFolderArchive:function(e){return this.request("team/team_folder/archive",e,"team","api","rpc")},teamTeamFolderArchiveCheck:function(e){return this.request("team/team_folder/archive/check",e,"team","api","rpc")},teamTeamFolderCreate:function(e){return this.request("team/team_folder/create",e,"team","api","rpc")},teamTeamFolderGetInfo:function(e){return this.request("team/team_folder/get_info",e,"team","api","rpc")},teamTeamFolderList:function(e){return this.request("team/team_folder/list",e,"team","api","rpc")},teamTeamFolderListContinue:function(e){return this.request("team/team_folder/list/continue",e,"team","api","rpc")},teamTeamFolderPermanentlyDelete:function(e){return this.request("team/team_folder/permanently_delete",e,"team","api","rpc")},teamTeamFolderRename:function(e){return this.request("team/team_folder/rename",e,"team","api","rpc")},teamTokenGetAuthenticatedAdmin:function(e){return this.request("team/token/get_authenticated_admin",e,"team","api","rpc")}},T=function(e){function t(e){s(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.assign(r,C),r}return u(t,S),o(t,[{key:"actAsUser",value:function(e){return new U({accessToken:this.accessToken,clientId:this.clientId,selectUser:e})}}]),t}();return Object.freeze({DropboxTeam:T}).DropboxTeam});
