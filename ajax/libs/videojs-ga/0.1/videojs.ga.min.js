/*! videojs-ga - v0.1.0 - 2013-09-07
* Copyright (c) 2013 Michael Bensoussan; Licensed  */
(function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};vjs.plugin("ga",function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;c={},this.options()["data-setup"]&&(l=JSON.parse(this.options()["data-setup"]),l.ga&&(c=l.ga)),d=["loaded","percentsPlayed","start","end","seek","play","pause","resize","volumeChange","error","fullscreen"],i=b.eventsToTrack||c.eventsToTrack||d,o=b.percentsPlayedInterval||c.percentsPlayedInterval||10,g=b.eventCategory||c.eventCategory||"Video",h=b.eventLabel||c.eventLabel,n=[],s=r=0,t=!1,k=function(){h||(h=this.currentSrc().split("/").slice(-1)[0].replace(/\.(\w{3,4})(\?.*)?$/i,"")),a.call(i,"loadedmetadata")>=0&&_gaq.push(["_trackEvent",g,"loadedmetadata",h])},u=function(){var b,c,d,e,f;for(b=Math.round(this.currentTime()),c=Math.round(this.duration()),e=Math.round(100*(b/c)),d=f=0;99>=f;d=f+=o)e>=d&&a.call(n,d)<0&&(a.call(i,"start")>=0&&0===d&&e>0?_gaq.push(["_trackEvent",g,"start",h]):a.call(i,"percentsPlayed")>=0&&0!==e&&_gaq.push(["_trackEvent",g,""+d+"%",h]),e>0&&n.push(d));a.call(i,"seek")>=0&&(s=r,r=b,Math.abs(s-r)>1&&(t=!0,_gaq.push(["_trackEvent",g,"seek start",h,s]),_gaq.push(["_trackEvent",g,"seek end",h,r])))},e=function(){_gaq.push(["_trackEvent",g,"end",h])},p=function(){var a;a=Math.round(this.currentTime()),a>0&&!t&&_gaq.push(["_trackEvent",g,"play",h,a]),t=!0},m=function(){var a,b;a=Math.round(this.currentTime()),b=Math.round(this.duration()),a===b||t||_gaq.push(["_trackEvent",g,"pause",h,a])},v=function(){var a;a=this.muted()===!0?0:this.volume(),_gaq.push(["_trackEvent",g,"volumeChange",h,a])},q=function(){_gaq.push(["_trackEvent",g,"resize",h,""+this.width+"*"+this.height])},f=function(){var a;a=Math.round(this.currentTime()),_gaq.push(["_trackEvent",g,"error",h,a])},j=function(){var a;a=Math.round(this.currentTime()),this.isFullScreen?_gaq.push(["_trackEvent",g,"enter fullscreen",h,a]):_gaq.push(["_trackEvent",g,"exit fullscreen",h,a])},this.on("loadedmetadata",k),this.on("timeupdate",u),a.call(i,"end")>=0&&this.on("ended",e),a.call(i,"play")>=0&&this.on("play",p),a.call(i,"pause")>=0&&this.on("pause",m),a.call(i,"volumeChange")>=0&&this.on("volumechange",v),a.call(i,"resize")>=0&&this.on("resize",q),a.call(i,"error")>=0&&this.on("error",f),a.call(i,"fullscreen")>=0&&this.on("fullscreenchange",j)})}).call(this);