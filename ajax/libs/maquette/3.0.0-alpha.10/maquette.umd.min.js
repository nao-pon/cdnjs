!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(e.maquette={})}(this,function(e){"use strict";var r,t="http://www.w3.org/2000/svg",n=[],o=function(e,r){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),r&&Object.keys(r).forEach(function(e){t[e]=r[e]}),t},i=function(e,r){return e.vnodeSelector===r.vnodeSelector&&(e.properties&&r.properties?e.properties.key===r.properties.key&&e.properties.bind===r.properties.bind:!e.properties&&!r.properties)},a=function(e){if("string"!=typeof e)throw Error("Style values must be strings")},d=function(e,r,t){if(""!==r.vnodeSelector)for(var n=t;n<e.length;n++)if(i(e[n],r))return n;return-1},s=function(e,r,t,n){var o=e[r];if(""!==o.vnodeSelector){var a=o.properties;if(!(a?void 0===a.key?a.bind:a.key:void 0))for(var d=0;d<e.length;d++)if(d!==r){var s=e[d];if(i(s,o))throw Error("added"===n?t.vnodeSelector+" had a "+o.vnodeSelector+" child added, but there is now more than one. You must add unique key properties to make them distinguishable.":t.vnodeSelector+" had a "+o.vnodeSelector+" child removed, but there were more than one. You must add unique key properties to make them distinguishable.")}}},p=function(e){if(e.properties){var r=e.properties.enterAnimation;r&&r(e.domNode,e.properties)}},c=function(e){var r=e.domNode;if(e.properties){var t=e.properties.exitAnimation;if(t){r.style.pointerEvents="none";return void t(r,function(){r.parentNode&&r.parentNode.removeChild(r)},e.properties)}}r.parentNode&&r.parentNode.removeChild(r)},u=function(e,r,n){if(r)for(var o=n.eventHandlerInterceptor,i=Object.keys(r),d=i.length,s=0;s<d;s++)!function(d){var s=i[d],p=r[s];if("className"===s)throw Error('Property "className" is not supported, use "class".');if("class"===s)p.split(/\s+/).forEach(function(r){return e.classList.add(r)});else if("classes"===s)for(var c=Object.keys(p),u=c.length,f=0;f<u;f++){var l=c[f];p[l]&&e.classList.add(l)}else if("styles"===s)for(var v=Object.keys(p),h=v.length,f=0;f<h;f++){var m=v[f],y=p[m];y&&(a(y),n.styleApplyer(e,m,y))}else if("key"!==s&&null!==p&&void 0!==p){var g=typeof p;"function"===g?0===s.lastIndexOf("on",0)&&(o&&(p=o(s,p,e,r)),"oninput"===s&&function(){var e=p;p=function(r){e.apply(this,[r]),r.target["oninput-value"]=r.target.value}}(),e[s]=p):"string"===g&&"value"!==s&&"innerHTML"!==s?n.namespace===t&&"href"===s?e.setAttributeNS("http://www.w3.org/1999/xlink",s,p):e.setAttribute(s,p):e[s]=p}}(s)},f=function(e,r,t){if(r)for(var n=0;n<r.length;n++)v(r[n],e,void 0,t)},l=function(e,r,t){f(e,r.children,t),r.text&&(e.textContent=r.text),u(e,r.properties,t),r.properties&&r.properties.afterCreate&&r.properties.afterCreate.apply(r.properties.bind||r.properties,[e,t,r.vnodeSelector,r.properties,r.children])},v=function(e,r,n,i){var a,d,s,p,c,u=0,f=e.vnodeSelector,v=r.ownerDocument;if(""===f)a=e.domNode=v.createTextNode(e.text),void 0!==n?r.insertBefore(a,n):r.appendChild(a);else{for(d=0;d<=f.length;++d)s=f.charAt(d),d!==f.length&&"."!==s&&"#"!==s||(p=f.charAt(u-1),c=f.slice(u,d),"."===p?a.classList.add(c):"#"===p?a.id=c:("svg"===c&&(i=o(i,{namespace:t})),void 0!==i.namespace?a=e.domNode=v.createElementNS(i.namespace,c):(a=e.domNode=e.domNode||v.createElement(c),"input"===c&&e.properties&&void 0!==e.properties.type&&a.setAttribute("type",e.properties.type)),void 0!==n?r.insertBefore(a,n):a.parentNode!==r&&r.appendChild(a)),u=d+1);l(a,e,i)}},h=function(e,r,n,o){if(n){for(var i=!1,d=Object.keys(n),s=d.length,p=0;p<s;p++){var c=d[p],u=n[c],f=r[c];if("class"===c){if(f!==u)throw Error('"class" property may not be updated. Use the "classes" property for conditional css classes.')}else if("classes"===c)for(var l=e.classList,v=Object.keys(u),h=v.length,m=0;m<h;m++){var y=v[m],g=!!u[y];g!==!!f[y]&&(i=!0,g?l.add(y):l.remove(y))}else if("styles"===c)for(var N=Object.keys(u),b=N.length,m=0;m<b;m++){var x=N[m],w=u[x];w!==f[x]&&(i=!0,w?(a(w),o.styleApplyer(e,x,w)):o.styleApplyer(e,x,""))}else if(u||"string"!=typeof f||(u=""),"value"===c){var A=e[c];A!==u&&(e["oninput-value"]?A===e["oninput-value"]:u!==f)&&(e[c]=u,e["oninput-value"]=void 0),u!==f&&(i=!0)}else if(u!==f){var S=typeof u;"function"===S&&o.eventHandlerInterceptor||("string"===S&&"innerHTML"!==c?o.namespace===t&&"href"===c?e.setAttributeNS("http://www.w3.org/1999/xlink",c,u):"role"===c&&""===u?e.removeAttribute(c):e.setAttribute(c,u):e[c]!==u&&(e[c]=u),i=!0)}}return i}},m=function(e,t,o,a,u){if(o===a)return!1;o=o||n,a=a||n;for(var f,l=o.length,h=a.length,m=0,y=0,g=!1;y<h;){var N=m<l?o[m]:void 0,b=a[y];if(void 0!==N&&i(N,b))g=r(N,b,u)||g,m++;else{var x=d(o,b,m+1);if(x>=0){for(f=m;f<x;f++)c(o[f]),s(o,f,e,"removed");g=r(o[x],b,u)||g,m=x+1}else v(b,t,m<l?o[m].domNode:void 0,u),p(b),s(a,y,e,"added")}y++}if(l>m)for(f=m;f<l;f++)c(o[f]),s(o,f,e,"removed");return g};r=function(e,r,n){var i=e.domNode,a=!1;if(e===r)return!1;var d=!1;if(""===r.vnodeSelector){if(r.text!==e.text){var s=i.ownerDocument.createTextNode(r.text);return i.parentNode.replaceChild(s,i),r.domNode=s,a=!0}r.domNode=i}else 0===r.vnodeSelector.lastIndexOf("svg",0)&&(n=o(n,{namespace:t})),e.text!==r.text&&(d=!0,void 0===r.text?i.removeChild(i.firstChild):i.textContent=r.text),r.domNode=i,d=m(r,i,e.children,r.children,n)||d,d=h(i,e.properties,r.properties,n)||d,r.properties&&r.properties.afterUpdate&&r.properties.afterUpdate.apply(r.properties.bind||r.properties,[i,n,r.vnodeSelector,r.properties,r.children]);return d&&r.properties&&r.properties.updateAnimation&&r.properties.updateAnimation(i,r.properties,e.properties),a};var y=function(e,t){return{getLastRender:function(){return e},update:function(n){if(e.vnodeSelector!==n.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");var o=e;e=n,r(o,n,t)},domNode:e.domNode}},g={namespace:void 0,eventHandlerInterceptor:void 0,styleApplyer:function(e,r,t){e.style[r]=t}},N=function(e){return o(g,e)},b={create:function(e,r){return r=N(r),v(e,document.createElement("div"),void 0,r),y(e,r)},append:function(e,r,t){return t=N(t),v(r,e,void 0,t),y(r,t)},insertBefore:function(e,r,t){return t=N(t),v(r,e.parentNode,e,t),y(r,t)},merge:function(e,r,t){return t=N(t),r.domNode=e,l(e,r,t),y(r,t)},replace:function(e,r,t){return t=N(t),v(r,e.parentNode,e,t),e.parentNode.removeChild(e),y(r,t)}},x=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:""+e,domNode:null}},w=function(e,r,t){for(var n=0,o=r.length;n<o;n++){var i=r[n];Array.isArray(i)?w(e,i,t):null!==i&&void 0!==i&&("string"==typeof i&&(i=x(i)),t.push(i))}},A=function(e,r){for(var t=[];e!==r;)t.push(e),e=e.parentNode;return t},S=function(e,r){var t=e;return r.forEach(function(e){t=t&&t.children?t.children.find(function(r){return r.domNode===e}):void 0}),t},k=function(e,r){var t=function(t){var n=r(),o=A(t.currentTarget,n.domNode),i=S(n.getLastRender(),o.reverse());if(e.scheduleRender(),i)return i.properties["on"+t.type].apply(i.properties.bind||this,arguments)};return function(e,r,n,o){return t}};e.version="3.0-begin",e.dom=b,e.h=function(e,r,t){Array.isArray(r)&&(t=r,r=void 0);var n,o;return void 0!==t&&1===t.length&&"string"==typeof t[0]?n=t[0]:t&&(w(e,t,o=[]),0===o.length&&(o=void 0)),{vnodeSelector:e,properties:r,children:o,text:""===n?void 0:n,domNode:null}},e.createProjector=function(e){var r,t,n=N(e),o=!0,i=!1,a=[],d=[],s=function(e,t,o){var i;n.eventHandlerInterceptor=k(r,function(){return i}),i=e(t,o(),n),a.push(i),d.push(o)},p=function(){if(t=void 0,o){o=!1;for(var e=0;e<a.length;e++){var r=d[e]();a[e].update(r)}o=!0}};return r={renderNow:p,scheduleRender:function(){t||i||(t=requestAnimationFrame(p))},stop:function(){t&&(cancelAnimationFrame(t),t=void 0),i=!0},resume:function(){i=!1,o=!0,r.scheduleRender()},append:function(e,r){s(b.append,e,r)},insertBefore:function(e,r){s(b.insertBefore,e,r)},merge:function(e,r){s(b.merge,e,r)},replace:function(e,r){s(b.replace,e,r)},detach:function(e){for(var r=0;r<d.length;r++)if(d[r]===e)return d.splice(r,1),a.splice(r,1)[0];throw Error("renderFunction was not found")}}},e.createCache=function(){var e,r;return{invalidate:function(){r=void 0,e=void 0},result:function(t,n){if(e)for(var o=0;o<t.length;o++)e[o]!==t[o]&&(r=void 0);return r||(r=n(),e=t),r}}},e.createMapping=function(e,r,t){var n=[],o=[];return{results:o,map:function(i){for(var a=i.map(e),d=o.slice(),s=0,p=0;p<i.length;p++){var c=i[p],u=a[p];if(u===n[s])o[p]=d[s],t(c,d[s],p),s++;else{for(var f=!1,l=1;l<n.length+1;l++){var v=(s+l)%n.length;if(n[v]===u){o[p]=d[v],t(i[p],d[v],p),s=v+1,f=!0;break}}f||(o[p]=r(c,p))}}o.length=i.length,n=a}}},Object.defineProperty(e,"__esModule",{value:!0})});