!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r(e.maquette={})}(this,function(e){"use strict";var r,t="http://www.w3.org/2000/svg",n=[],o=function(e,r){var t={};return Object.keys(e).forEach(function(r){t[r]=e[r]}),r&&Object.keys(r).forEach(function(e){t[e]=r[e]}),t},i=function(e,r){return e.vnodeSelector===r.vnodeSelector&&(e.properties&&r.properties?e.properties.key===r.properties.key&&e.properties.bind===r.properties.bind:!e.properties&&!r.properties)},a=function(e){if("string"!=typeof e)throw Error("Style values must be strings")},d=function(e,r,t){if(""!==r.vnodeSelector)for(var n=t;n<e.length;n++)if(i(e[n],r))return n;return-1},p=function(e,r,t,n){var o=e[r];if(""!==o.vnodeSelector){var a=o.properties;if(!(a?void 0===a.key?a.bind:a.key:void 0))for(var d=0;d<e.length;d++)if(d!==r){var p=e[d];if(i(p,o))throw Error(t.vnodeSelector+" had a "+o.vnodeSelector+" child "+("added"===n?n:"removed")+", but there is now more than one. You must add unique key properties to make them distinguishable.")}}},s=function(e){if(e.properties){var r=e.properties.enterAnimation;r&&r(e.domNode,e.properties)}},c=function(e){var r=e.domNode;if(e.properties){var t=e.properties.exitAnimation;if(t){r.style.pointerEvents="none";return void t(r,function(){r.parentNode&&r.parentNode.removeChild(r)},e.properties)}}r.parentNode&&r.parentNode.removeChild(r)},f=function(e,r,n){if(r)for(var o=n.eventHandlerInterceptor,i=Object.keys(r),d=i.length,p=0;p<d;p++)!function(d){var p=i[d],s=r[p];if("className"===p)throw Error('Property "className" is not supported, use "class".');if("class"===p)s.split(/\s+/).forEach(function(r){return e.classList.add(r)});else if("classes"===p)for(var c=Object.keys(s),f=c.length,u=0;u<f;u++){var l=c[u];s[l]&&e.classList.add(l)}else if("styles"===p)for(var v=Object.keys(s),h=v.length,u=0;u<h;u++){var m=v[u],g=s[m];g&&(a(g),n.styleApplyer(e,m,g))}else if("key"!==p&&null!==s&&void 0!==s){var y=typeof s;"function"===y?0===p.lastIndexOf("on",0)&&(o&&(s=o(p,s,e,r)),"oninput"===p&&function(){var e=s;s=function(r){e.apply(this,[r]),r.target["oninput-value"]=r.target.value}}(),e[p]=s):"string"===y&&"value"!==p&&"innerHTML"!==p?n.namespace===t&&"href"===p?e.setAttributeNS("http://www.w3.org/1999/xlink",p,s):e.setAttribute(p,s):e[p]=s}}(p)},u=function(e,r,t){if(r)for(var n=0,o=r;n<o.length;n++){var i=o[n];v(i,e,void 0,t)}},l=function(e,r,t){u(e,r.children,t),r.text&&(e.textContent=r.text),f(e,r.properties,t),r.properties&&r.properties.afterCreate&&r.properties.afterCreate.apply(r.properties.bind||r.properties,[e,t,r.vnodeSelector,r.properties,r.children])},v=function(e,r,n,i){var a,d=0,p=e.vnodeSelector,s=r.ownerDocument;if(""===p)a=e.domNode=s.createTextNode(e.text),void 0!==n?r.insertBefore(a,n):r.appendChild(a);else{for(var c=0;c<=p.length;++c){var f=p.charAt(c);if(c===p.length||"."===f||"#"===f){var u=p.charAt(d-1),v=p.slice(d,c);"."===u?a.classList.add(v):"#"===u?a.id=v:("svg"===v&&(i=o(i,{namespace:t})),void 0!==i.namespace?a=e.domNode=s.createElementNS(i.namespace,v):(a=e.domNode=e.domNode||s.createElement(v),"input"===v&&e.properties&&void 0!==e.properties.type&&a.setAttribute("type",e.properties.type)),void 0!==n?r.insertBefore(a,n):a.parentNode!==r&&r.appendChild(a)),d=c+1}}l(a,e,i)}},h=function(e,r,t){r&&r.split(" ").forEach(function(r){return e.classList.toggle(r,t)})},m=function(e,r,n,o){if(n){for(var i=!1,d=Object.keys(n),p=d.length,s=0;s<p;s++){var c=d[s],f=n[c],u=r[c];if("class"===c)u!==f&&(h(e,u,!1),h(e,f,!0));else if("classes"===c)for(var l=e.classList,v=Object.keys(f),m=v.length,g=0;g<m;g++){var y=v[g],N=!!f[y];N!==!!u[y]&&(i=!0,N?l.add(y):l.remove(y))}else if("styles"===c)for(var b=Object.keys(f),w=b.length,g=0;g<w;g++){var x=b[g],A=f[x];A!==u[x]&&(i=!0,A?(a(A),o.styleApplyer(e,x,A)):o.styleApplyer(e,x,""))}else if(f||"string"!=typeof u||(f=""),"value"===c){var S=e[c];S!==f&&(e["oninput-value"]?S===e["oninput-value"]:f!==u)&&(e[c]=f,e["oninput-value"]=void 0),f!==u&&(i=!0)}else if(f!==u){var k=typeof f;"function"===k&&o.eventHandlerInterceptor||("string"===k&&"innerHTML"!==c?o.namespace===t&&"href"===c?e.setAttributeNS("http://www.w3.org/1999/xlink",c,f):"role"===c&&""===f?e.removeAttribute(c):e.setAttribute(c,f):e[c]!==f&&(e[c]=f),i=!0)}}return i}},g=function(e,t,o,a,f){if(o===a)return!1;o=o||n,a=a||n;for(var u,l=o.length,h=a.length,m=0,g=0,y=!1;g<h;){var N=m<l?o[m]:void 0,b=a[g];if(void 0!==N&&i(N,b))y=r(N,b,f)||y,m++;else{var w=d(o,b,m+1);if(w>=0){for(u=m;u<w;u++)c(o[u]),p(o,u,e,"removed");y=r(o[w],b,f)||y,m=w+1}else v(b,t,m<l?o[m].domNode:void 0,f),s(b),p(a,g,e,"added")}g++}if(l>m)for(u=m;u<l;u++)c(o[u]),p(o,u,e,"removed");return y};r=function(e,r,n){var i=e.domNode,a=!1;if(e===r)return!1;var d=!1;if(""===r.vnodeSelector){if(r.text!==e.text){var p=i.ownerDocument.createTextNode(r.text);return i.parentNode.replaceChild(p,i),r.domNode=p,a=!0}r.domNode=i}else 0===r.vnodeSelector.lastIndexOf("svg",0)&&(n=o(n,{namespace:t})),e.text!==r.text&&(d=!0,void 0===r.text?i.removeChild(i.firstChild):i.textContent=r.text),r.domNode=i,d=g(r,i,e.children,r.children,n)||d,d=m(i,e.properties,r.properties,n)||d,r.properties&&r.properties.afterUpdate&&r.properties.afterUpdate.apply(r.properties.bind||r.properties,[i,n,r.vnodeSelector,r.properties,r.children]);return d&&r.properties&&r.properties.updateAnimation&&r.properties.updateAnimation(i,r.properties,e.properties),a};var y=function(e,t){return{getLastRender:function(){return e},update:function(n){if(e.vnodeSelector!==n.vnodeSelector)throw Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");var o=e;e=n,r(o,n,t)},domNode:e.domNode}},N={namespace:void 0,eventHandlerInterceptor:void 0,styleApplyer:function(e,r,t){e.style[r]=t}},b=function(e){return o(N,e)},w={create:function(e,r){return r=b(r),v(e,document.createElement("div"),void 0,r),y(e,r)},append:function(e,r,t){return t=b(t),v(r,e,void 0,t),y(r,t)},insertBefore:function(e,r,t){return t=b(t),v(r,e.parentNode,e,t),y(r,t)},merge:function(e,r,t){return t=b(t),r.domNode=e,l(e,r,t),y(r,t)},replace:function(e,r,t){return t=b(t),v(r,e.parentNode,e,t),e.parentNode.removeChild(e),y(r,t)}},x=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:""+e,domNode:null}},A=function(e,r,t){for(var n=0,o=r.length;n<o;n++){var i=r[n];Array.isArray(i)?A(e,i,t):null!==i&&void 0!==i&&("string"==typeof i&&(i=x(i)),t.push(i))}},S=function(e,r){for(var t=[];e!==r;)t.push(e),e=e.parentNode;return t},k=function(e,r){var t=e;return r.forEach(function(e){t=t&&t.children?t.children.find(function(r){return r.domNode===e}):void 0}),t},E=function(e,r){var t=function(t){var n=r(),o=S(t.currentTarget,n.domNode);o.reverse();var i=k(n.getLastRender(),o);if(e.scheduleRender(),i)return i.properties["on"+t.type].apply(i.properties.bind||this,arguments)};return function(e,r,n,o){return t}};e.version="3.0-begin",e.dom=w,e.h=function(e,r,t){if(Array.isArray(r))t=r,r=void 0;else if(r&&("string"==typeof r||r.hasOwnProperty("vnodeSelector"))||t&&("string"==typeof t||t.hasOwnProperty("vnodeSelector")))throw Error("h called with invalid arguments");var n,o;return void 0!==t&&1===t.length&&"string"==typeof t[0]?n=t[0]:t&&(A(e,t,o=[]),0===o.length&&(o=void 0)),{vnodeSelector:e,properties:r,children:o,text:""===n?void 0:n,domNode:null}},e.createProjector=function(e){var r,t,n=b(e),o=!0,i=!1,a=[],d=[],p=function(e,t,o){var i;n.eventHandlerInterceptor=E(r,function(){return i}),i=e(t,o(),n),a.push(i),d.push(o)},s=function(){if(t=void 0,o){o=!1;for(var e=0;e<a.length;e++){var r=d[e]();a[e].update(r)}o=!0}};return r={renderNow:s,scheduleRender:function(){t||i||(t=requestAnimationFrame(s))},stop:function(){t&&(cancelAnimationFrame(t),t=void 0),i=!0},resume:function(){i=!1,o=!0,r.scheduleRender()},append:function(e,r){p(w.append,e,r)},insertBefore:function(e,r){p(w.insertBefore,e,r)},merge:function(e,r){p(w.merge,e,r)},replace:function(e,r){p(w.replace,e,r)},detach:function(e){for(var r=0;r<d.length;r++)if(d[r]===e)return d.splice(r,1),a.splice(r,1)[0];throw Error("renderFunction was not found")}}},e.createCache=function(){var e,r;return{invalidate:function(){r=void 0,e=void 0},result:function(t,n){if(e)for(var o=0;o<t.length;o++)e[o]!==t[o]&&(r=void 0);return r||(r=n(),e=t),r}}},e.createMapping=function(e,r,t){var n=[],o=[];return{results:o,map:function(i){for(var a=i.map(e),d=o.slice(),p=0,s=0;s<i.length;s++){var c=i[s],f=a[s];if(f===n[p])o[s]=d[p],t(c,d[p],s),p++;else{for(var u=!1,l=1;l<n.length+1;l++){var v=(p+l)%n.length;if(n[v]===f){o[s]=d[v],t(i[s],d[v],s),p=v+1,u=!0;break}}u||(o[s]=r(c,s))}}o.length=i.length,n=a}}},Object.defineProperty(e,"__esModule",{value:!0})});