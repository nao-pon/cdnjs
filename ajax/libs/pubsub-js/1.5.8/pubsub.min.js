!function(n,r){"use strict";var t={};n.PubSub=t;var e=n.define;!function(n){function r(n){var r;for(r in n)if(n.hasOwnProperty(r))return!0;return!1}function t(n,r,t){try{n(r,t)}catch(n){setTimeout(function(n){return function(){throw n}}(n),0)}}function e(n,r,t){n(r,t)}function o(n,r,o,i){var f,s=u[r],c=i?e:t;if(u.hasOwnProperty(r))for(f in s)s.hasOwnProperty(f)&&c(s[f],n,o)}function i(n,t,e,i){var f=function(n,r,t){return function(){var e=String(n),i=e.lastIndexOf(".");for(o(n,n,r,t);-1!==i;)e=e.substr(0,i),i=e.lastIndexOf("."),o(n,e,r,t)}}(n,t,i),s=function(n){var t=String(n),e=Boolean(u.hasOwnProperty(t)&&r(u[t])),o=t.lastIndexOf(".");for(;!e&&-1!==o;)t=t.substr(0,o),o=t.lastIndexOf("."),e=Boolean(u.hasOwnProperty(t)&&r(u[t]));return e}(n);return!!s&&(!0===e?f():setTimeout(f,0),!0)}var u={},f=-1;n.publish=function(r,t){return i(r,t,!1,n.immediateExceptions)},n.publishSync=function(r,t){return i(r,t,!0,n.immediateExceptions)},n.subscribe=function(n,r){if("function"!=typeof r)return!1;u.hasOwnProperty(n)||(u[n]={});var t="uid_"+String(++f);return u[n][t]=r,t},n.clearAllSubscriptions=function(){u={}},n.clearSubscriptions=function(n){var r;for(r in u)u.hasOwnProperty(r)&&0===r.indexOf(n)&&delete u[r]},n.unsubscribe=function(r){var t,e,o,i="string"==typeof r&&(u.hasOwnProperty(r)||function(n){var r;for(r in u)if(u.hasOwnProperty(r)&&0===r.indexOf(n))return!0;return!1}(r)),f=!i&&"string"==typeof r,s="function"==typeof r,c=!1;{if(!i){for(t in u)if(u.hasOwnProperty(t)){if(e=u[t],f&&e[r]){delete e[r],c=r;break}if(s)for(o in e)e.hasOwnProperty(o)&&e[o]===r&&(delete e[o],c=!0)}return c}n.clearSubscriptions(r)}}}(t),"function"==typeof e&&e.amd?e(function(){return t}):"object"==typeof exports&&(void 0!==module&&module.exports&&(exports=module.exports=t),exports.PubSub=t,module.exports=exports=t)}("object"==typeof window&&window||this);