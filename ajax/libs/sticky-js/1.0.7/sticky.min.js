"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},Sticky=function(t){var e=this;e.version="1.0.6",e.selector=t,e.vp=e.getViewportSize(),e.scrollTop=e.getScrollTopPosition(),e.elements=[],e.run()};Sticky.prototype={run:function(){var t=this,e=document.querySelectorAll(this.selector),i=setInterval(function(){"interactive"!==document.readyState&&"complete"!==document.readyState||(clearInterval(i),t.iterate(e,function(e){return t.activate(e)}),window.addEventListener("scroll",function(){t.scrollTop=t.getScrollTopPosition(),t.setPosition()}),window.addEventListener("resize",function(){t.vp=t.getViewportSize(),t.updatePosition()}),t.isSet=!0,t.setPosition())},100)},activate:function(t){var e=this;t.sticky={},t.sticky.active=!1,t.sticky.breakpoint=parseInt(t.getAttribute("data-sticky-for"))||0,t.sticky.marginTop=parseInt(t.getAttribute("data-margin-top"))||0,t.sticky["class"]=t.getAttribute("data-sticky-class")||!1,t.sticky.rect=this.getRect(t),"img"===t.tagName.toLowerCase()&&(t.onload=function(){return t.sticky.rect=e.getRect(t)}),t.sticky.container=this.getContainer(t),t.sticky.container.rect=this.getRect(t.sticky.container),t.sticky.breakpoint<this.vp.width&&!t.sticky.active&&(t.sticky.active=!0),window.addEventListener("resize",function(){e.vp=e.getViewportSize(),t.sticky.breakpoint<e.vp.width&&!t.sticky.active?(t.sticky.active=!0,e.setPosition()):t.sticky.breakpoint>=e.vp.width&&t.sticky.active&&(t.sticky.active=!1,e.setPosition())}),this.elements.push(t)},getRect:function(t){var e=this.getTopLeftPosition(t);return e.width=t.offsetWidth,e.height=t.offsetHeight,e},updateRect:function(){var t=this;this.iterate(this.elements,function(e){t.removeStyle(e,["position","width","top","left"]),e.sticky.rect=t.getRect(e),e.sticky.container.rect=t.getRect(e.sticky.container)})},getTopLeftPosition:function(t){var e=0,i=0;do e+=t.offsetTop||0,i+=t.offsetLeft||0,t=t.offsetParent;while(t);return{top:e,left:i}},getContainer:function(t){for(var e=t;"string"!=typeof e.getAttribute("data-sticky-container")&&e!==document.documentElement;)e=e.parentNode;return e},getViewportSize:function(){return{width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}},getScrollTopPosition:function(){return(window.pageYOffset||document.scrollTop)-(document.clientTop||0)||0},setPosition:function(){var t=this;this.iterate(this.elements,function(e){t.removeStyle(e,["position","width","top","left"]),t.vp.height<e.sticky.rect.height||!e.sticky.active||(t.scrollTop>e.sticky.rect.top-e.sticky.marginTop?(t.addStyle(e,{position:"fixed",width:e.sticky.rect.width+"px",left:e.sticky.rect.left+"px"}),t.scrollTop+e.sticky.rect.height+e.sticky.marginTop>e.sticky.container.rect.top+e.sticky.container.rect.height?(e.sticky["class"]&&e.classList.remove(e.sticky["class"]),t.addStyle(e,{top:e.sticky.container.rect.top+e.sticky.container.rect.height-(t.scrollTop+e.sticky.rect.height)+"px"})):(e.sticky["class"]&&e.classList.add(e.sticky["class"]),t.addStyle(e,{top:e.sticky.marginTop+"px"}))):(e.sticky["class"]&&e.classList.remove(e.sticky["class"]),t.removeStyle(e,["position","width","top","left"])))})},updatePosition:function(){this.updateRect(),this.setPosition()},update:function(){var t=this;this.isSet&&!function(){var e=t,i=function(){e.update()};t.iterate(t.elements,function(e){"undefined"!=typeof e.sticky?t.updatePosition():setTimeout(i,100)})}()},addStyle:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t.style[i]=e[i])},removeStyle:function(t,e){this.iterate(e,function(e){return t.style[e]=null})},iterate:function(t,e){for(var i=0,o=t.length;i<o;i++)e(t[i])}},"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)&&(module.exports=exports=Sticky);