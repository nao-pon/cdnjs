define("shopify-buy/adapters/listings-adapter",["exports","../ajax","../metal/core-object","../version"],function(e,t,r,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(t),a=i(r),s=i(n),u=a.default.extend({ajax:o.default,constructor:function(e){this.config=e},get base64ApiKey(){return btoa(this.config.apiKey)},get baseUrl(){var e=this.config;return"https://"+e.domain+"/api/apps/"+e.appId},get headers(){return{Authorization:"Basic "+this.base64ApiKey,"Content-Type":"application/json","X-SDK-Variant":"javascript","X-SDK-Version":s.default}},pathForType:function(e){return"/"+e.slice(0,-1)+"_listings"},buildUrl:function(e,t,r){switch(e){case"multiple":return this.buildMultipleUrl(t,r);case"single":return this.buildSingleUrl(t,r);default:return""}},buildMultipleUrl:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=""+this.baseUrl+this.pathForType(e),n=Object.keys(t);return n.length>0?r+"?"+n.map(function(e){var r=void 0;return r=Array.isArray(t[e])?t[e].join(","):t[e],e+"="+encodeURIComponent(r)}).join("&"):r},buildSingleUrl:function(e,t){return""+this.baseUrl+this.pathForType(e)+"/"+t},fetchMultiple:function(){var e=this.buildUrl.apply(this,["multiple"].concat(Array.prototype.slice.call(arguments)));return this.ajax("GET",e,{headers:this.headers}).then(function(e){return e.json})},fetchSingle:function(){var e=this.buildUrl.apply(this,["single"].concat(Array.prototype.slice.call(arguments)));return this.ajax("GET",e,{headers:this.headers}).then(function(e){return e.json})}});e.default=u}),define("shopify-buy/adapters/local-storage-adapter",["exports","../metal/core-object","../metal/set-guid-for","../store"],function(e,t,r,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(t),a=i(r),s=i(n),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},l=o.default.extend({constructor:function(){this.store=new s.default},idKeyForType:function(){return r.GUID_KEY},fetchSingle:function(e,t){var r=this;return new Promise(function(n,i){var o=r.store.getItem(r.storageKey(e,t));null!==o?n(o):i(new Error(e+"#"+t+" not found"))})},create:function(e,t){var r=this;return new Promise(function(n){var i=r.identify(t);r.store.setItem(r.storageKey(e,i),t),n(t)})},update:function(e,t,r){var n=this;return new Promise(function(i){n.store.setItem(n.storageKey(e,t),r),i(r)})},storageKey:function(e,t){return e+"."+t},identify:function(e){var t=Object.keys(e);return 1===t.length&&"object"===u(e[t[0]])?(0,a.default)(e[t[0]]):(0,a.default)(e)}});e.default=l}),define("shopify-buy/ajax",["exports","./ie9-ajax","./metal/global"],function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.status=e.status,t.response=e,t}function o(e){return e.json().then(function(t){return{json:t,originalResponse:e,isJSON:!0}}).catch(function(){var t=e.clone();return t.text().then(function(e){return{text:e,originalResponse:t,isText:!0}})})}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return s.default.XDomainRequest?a.default.apply(void 0,arguments):(r.method=e,r.mode="cors",fetch(t,r).then(i).then(o))};var a=n(t),s=n(r)}),define("shopify-buy/config",["exports","./metal/core-object","./logger"],function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(t),o=n(r),a=i.default.extend({constructor:function(e){var t=this;Object.keys(this.deprecatedProperties).forEach(function(r){if(e.hasOwnProperty(r)){var n=t.deprecatedProperties[r];(0,t[n])(e[r],e)}}),this.requiredProperties.forEach(function(r){if(!e.hasOwnProperty(r))throw new Error("new Config() requires the option '"+r+"'");t[r]=e[r]})},deprecatedProperties:{myShopifyDomain:"transformMyShopifyDomain"},transformMyShopifyDomain:function(e,t){o.default.warn("Config - ","myShopifyDomain is deprecated, please use domain and provide the full shop domain."),t.domain=e+".myshopify.com"},requiredProperties:["apiKey","appId","domain"],apiKey:"",appId:"",domain:"",myShopifyDomain:""});e.default=a}),define("shopify-buy/ie9-ajax",["exports"],function(e){"use strict";function t(e,t){var r=void 0;if(t.headers&&Object.keys(t.headers).forEach(function(e){"authorization"===e.toLowerCase()&&(r=t.headers[e])}),r){var n=r.split(" ").slice(-1)[0];try{var i=atob(n);return e.indexOf("?")>-1?e+"&_x_http_authorization="+i:e+"?_x_http_authorization="+i}catch(e){}}return e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,r,n){return new Promise(function(i,o){function a(){o(new Error("There was an error with the XDR"))}var s=new XDomainRequest;s.onload=function(){try{var e=JSON.parse(s.responseText);i({json:e,originalResponse:s,isJSON:!0})}catch(e){i({text:s.responseText,originalResponse:s,isText:!0})}},s.onerror=a,s.ontimeout=a,s.open(e,t(r,n)),s.send(n.data)})}}),define("shopify-buy/isomorphic-btoa",["./metal/global","./metal/is-node-like-environment"],function(e,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var n=r(e),i=r(t);!n.default.btoa&&(0,i.default)()&&(n.default.btoa=function(e){return new Buffer(e).toString("base64")})}),define("shopify-buy/isomorphic-fetch",["./metal/global","./metal/is-node-like-environment"],function(e,t){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var n=r(e),i=r(t);if(!n.default.fetch&&(0,i.default)()){var o=require;n.default.fetch=o("node-fetch"),n.default.Response=n.default.fetch.Response}}),define("shopify-buy/logger",["exports","./metal/core-object"],function(e,t){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function n(e){var t=function(){if(console[e]){var t;(t=console)[e].apply(t,arguments)}else{var r;(r=console).log.apply(r,arguments)}};return function(){var e=[].concat(Array.prototype.slice.call(arguments));e.unshift("[JS-BUY-SDK]: "),t.apply(void 0,r(e))}}Object.defineProperty(e,"__esModule",{value:!0}),e.wrapConsole=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(t).default.extend({constructor:function(){},debug:n("debug"),info:n("info"),warn:n("warn"),error:n("error")});e.wrapConsole=n,e.default=new i}),define("shopify-buy/metal/assign",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=void 0;t="function"==typeof Object.assign?Object.assign:function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");var t=Object(e),r=[].slice.call(arguments,1);return r.length>0&&r.forEach(function(e){if(void 0!==e&&null!==e){var r=void 0;for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}}),t},e.default=t}),define("shopify-buy/metal/core-object",["exports","./create-class"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(t),n=(0,r.default)({constructor:function(){},static:{extend:function(e){return(0,r.default)(e,this)}}});e.default=n}),define("shopify-buy/metal/create-class",["exports","./assign","./includes"],function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){function r(){var r=this.super;this.super=function(){return t.apply(this,arguments)};var n=e.apply(this,arguments);return this.super=r,n}return r.wrappedFunction=e,r}function o(e,t,r){var n=Object.getPrototypeOf(r);e.forEach(function(e){var o=Object.getOwnPropertyDescriptor(t,e),a=n.hasOwnProperty(e)&&Object.getOwnPropertyDescriptor(n,e);if("function"==typeof a.value&&"function"==typeof o.value){var s=i(o.value,a.value);Object.defineProperty(r,e,{value:s})}else Object.defineProperty(r,e,o)})}Object.defineProperty(e,"__esModule",{value:!0});var a=n(t),s=n(r);e.default=function(e){var t=arguments.length<=1||void 0===arguments[1]?Object:arguments[1],r=i(e.constructor,t),n=Object.getOwnPropertyNames(e).filter(function(e){return!(0,s.default)(["constructor","static"],e)});(0,a.default)(r,t),r.prototype=Object.create(t.prototype),o(n,e,r.prototype),r.prototype.constructor=r;var u=e.static;return u&&o(Object.getOwnPropertyNames(u),u,r),r}}),define("shopify-buy/metal/global",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=void 0;t="undefined"==typeof global?window:global,e.default=t}),define("shopify-buy/metal/includes",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=void 0;t=Array.prototype.includes?function(e){var t=[].slice.call(arguments,1);return Array.prototype.includes.apply(e,t)}:function(e,t){var r=Object(e),n=parseInt(r.length,10)||0;if(0===n)return!1;var i=parseInt(arguments[1],10)||0,o=void 0;for(i>=0?o=i:(o=n+i)<0&&(o=0);o<n;){var a=r[o];if(t===a||t!==t&&a!==a)return!0;o++}return!1},e.default=t}),define("shopify-buy/metal/is-node-like-environment",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e="undefined"==typeof window,t="function"==typeof require;return e&&t}}),define("shopify-buy/metal/set-guid-for",["exports"],function(e){"use strict";function t(){return++a}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},n="shopify-buy-uuid",i="shopify-buy."+Date.now(),o={writable:!0,configurable:!0,enumerable:!0,value:null},a=0,s={},u={};e.default=function(e){if(e&&e[n])return e[n];if(void 0===e)return"(undefined)";if(null===e)return"(null)";var a=void 0;switch(void 0===e?"undefined":r(e)){case"number":(a=s[e])||(a=s[e]="nu"+e);break;case"string":(a=u[e])||(a=u[e]="st"+t());break;case"boolean":a=e?"(true)":"(false)";break;default:if(e===Object){a="(Object)";break}if(e===Array){a="(Array)";break}a=i+"."+t(),null===e[n]?e[n]=a:(o.value=a,Object.defineProperty(e,n,o))}return a},e.GUID_KEY=n}),define("shopify-buy/metal/uniq",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){return e.reduce(function(e,t){return e.indexOf(t)<0&&e.push(t),e},[])}}),define("shopify-buy/models/base-model",["exports","../metal/core-object","../metal/assign"],function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(t),o=n(r),a=i.default.extend({constructor:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];this.attrs=e,(0,o.default)(this,t)},attrs:null,serializer:null,adapter:null,shopClient:null});e.default=a}),define("shopify-buy/models/cart-line-item-model",["exports","./base-model","../metal/set-guid-for"],function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(t).default.extend({constructor:function(){this.super.apply(this,arguments)},get id(){return this.attrs[r.GUID_KEY]},get variant_id(){return this.attrs.variant_id},get product_id(){return this.attrs.product_id},get image(){return this.attrs.image},get title(){return this.attrs.title},get quantity(){return this.attrs.quantity},set quantity(e){var t=parseInt(e,10);if(t<0)throw new Error("Quantities must be positive");if(t!==parseFloat(e))throw new Error("Quantities must be whole numbers");return this.attrs.quantity=t,this.attrs.quantity},get properties(){return this.attrs.properties||{}},set properties(e){return this.attrs.properties=e||{},e},get variant_title(){return this.attrs.variant_title},get price(){return this.attrs.price},get compare_at_price(){return this.attrs.compare_at_price},get line_price(){return(this.quantity*parseFloat(this.price)).toFixed(2)},get grams(){return this.attrs.grams}});e.default=n}),define("shopify-buy/models/cart-model",["exports","./base-model","./cart-line-item-model","../metal/assign","../metal/set-guid-for","../metal/global"],function(e,t,r,n,i,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){return e===t||Object.keys(e).every(function(r){return e[r]instanceof Date?e[r].toString()===t[r].toString():"object"===h(e[r])?u(e[r],t[r]):e[r]===t[r]})}Object.defineProperty(e,"__esModule",{value:!0});var l=a(t),c=a(r),f=a(n),d=a(i),p=a(o),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},y=l.default.extend({constructor:function(){this.super.apply(this,arguments)},get id(){return this.attrs[i.GUID_KEY]},get lineItems(){return(this.attrs.line_items||[]).map(function(e){return new c.default(e)})},get lineItemCount(){return this.lineItems.reduce(function(e,t){return e+t.quantity},0)},get subtotal(){return this.lineItems.reduce(function(e,t){return e+parseFloat(t.line_price)},0).toFixed(2)},get checkoutUrl(){var e=this.config,t="https://"+e.domain+"/cart",r=this.lineItems.map(function(e){return e.variant_id+":"+e.quantity}),n="api_key="+e.apiKey;if("function"==typeof p.default.ga){var i=void 0;p.default.ga(function(e){i=e.get("linkerParam")}),i&&(n+="&"+i)}return t+"/"+r+"?"+n},addVariants:function(){var e=[].concat(Array.prototype.slice.call(arguments)).map(function(e){var t={image:e.variant.image,variant_id:e.variant.id,product_id:e.variant.productId,title:e.variant.productTitle,quantity:parseInt(e.quantity,10),properties:e.properties||{},variant_title:e.variant.title,price:e.variant.price,compare_at_price:e.variant.compareAtPrice,grams:e.variant.grams};return(0,d.default)(t),t}),t=this.attrs.line_items;t.push.apply(t,s(e));var r=t.reduce(function(e,t){var r=e.filter(function(e){return e.variant_id===t.variant_id&&u(e.properties,t.properties)})[0];return r?r.quantity=r.quantity+t.quantity:e.push(t),e},[]);return this.attrs.line_items=r.reduce(function(e,t){return t.quantity>=1&&e.push(t),e},[]),this.updateModel()},updateLineItem:function(e,t){if(t<1)return this.removeLineItem(e);var r=this.lineItems.filter(function(t){return t.id===e})[0];return r?(r.quantity=t,this.updateModel()):new Promise(function(t,r){r(new Error("line item with id: "+e+" not found in cart#"+this.id))})},removeLineItem:function(e){var t=this.lineItems.length,r=this.lineItems.filter(function(t){return t.id!==e});return r.length<t?(this.attrs.line_items=r.map(function(e){return e.attrs}),this.updateModel()):new Promise(function(t,r){r(new Error("line item with id: "+e+" not found in cart#"+this.id))})},clearLineItems:function(){return this.attrs.line_items=[],this.updateModel()},updateModel:function(){var e=this;return this.shopClient.update("carts",this).then(function(t){return(0,f.default)(e.attrs,t.attrs),e})}});e.default=y}),define("shopify-buy/models/product-model",["exports","./base-model","./product-option-model","./product-variant-model","../metal/uniq"],function(e,t,r,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.NO_IMAGE_URI=void 0;var a=o(t),s=o(r),u=o(n),l=o(i),c=a.default.extend({constructor:function(){this.super.apply(this,arguments)},get id(){return this.attrs.product_id},get title(){return this.attrs.title},get description(){return this.attrs.body_html},get images(){return this.attrs.images},get memoized(){return this._memoized=this._memoized||{},this._memoized},get options(){if(this.memoized.options)return this.memoized.options;var e=this.attrs.options,t=this.variants;return this.memoized.options=e.map(function(e){var r=e.name,n=t.reduce(function(t,r){var n=r.optionValues.filter(function(t){return t.name===e.name})[0];return t.push(n.value),t},[]),i=(0,l.default)(n);return new s.default({name:r,values:i})}),this.memoized.options},get variants(){var e=this;return this.attrs.variants.map(function(t){return new u.default({variant:t,product:e},{config:e.config})})},get selections(){return this.options.map(function(e){return e.selected})},get selectedVariant(){var e=this.selections.join(" / ");return this.variants.filter(function(t){return t.title===e})[0]||null},get selectedVariantImage(){return this.selectedVariant?this.selectedVariant.image:null}});e.default=c,e.NO_IMAGE_URI="https://widgets.shopifyapps.com/assets/no-image.svg"}),define("shopify-buy/models/product-option-model",["exports","./base-model","../metal/includes"],function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(t),o=n(r),a=i.default.extend({constructor:function(){this.super.apply(this,arguments),this.selected=this.values[0]},get name(){return this.attrs.name},get values(){return this.attrs.values},get selected(){return this._selected},set selected(e){if(!(0,o.default)(this.values,e))throw new Error("Invalid option selection for "+this.name+".");return this._selected=e,e}});e.default=a}),define("shopify-buy/models/product-variant-model",["exports","./base-model"],function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(t).default.extend({constructor:function(){this.super.apply(this,arguments)},get id(){return this.attrs.variant.id},get productId(){return this.attrs.product.id},get title(){return this.attrs.variant.title},get productTitle(){return this.attrs.product.title},get compareAtPrice(){return this.attrs.variant.compare_at_price},get price(){return this.attrs.variant.price},get grams(){return this.attrs.variant.grams},get optionValues(){return this.attrs.variant.option_values},get available(){return this.attrs.variant.available},get image(){var e=this.id,t=this.attrs.product.images,r=t[0];return t.filter(function(t){return-1!==t.variant_ids.indexOf(e)})[0]||r},get imageVariants(){if(!this.image)return[];var e=this.image.src,t=e.lastIndexOf("."),r=e.slice(0,t),n=e.slice(t),i=[{name:"pico",dimension:"16x16"},{name:"icon",dimension:"32x32"},{name:"thumb",dimension:"50x50"},{name:"small",dimension:"100x100"},{name:"compact",dimension:"160x160"},{name:"medium",dimension:"240x240"},{name:"large",dimension:"480x480"},{name:"grande",dimension:"600x600"},{name:"1024x1024",dimension:"1024x1024"},{name:"2048x2048",dimension:"2048x2048"}];return i.forEach(function(e){e.src=r+"_"+e.name+n}),i},checkoutUrl:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=this.config;return"https://"+t.domain+"/cart"+"/"+(this.id+":"+parseInt(e,10))+"?"+("api_key="+t.apiKey)}});e.default=r}),define("shopify-buy/models/reference-model",["exports","./base-model","../metal/set-guid-for"],function(e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(t).default.extend({constructor:function(e){if(Object.keys(e).indexOf("referenceId")<0)throw new Error("Missing key referenceId of reference. References to null are not allowed");this.super.apply(this,arguments)},get id(){return this.attrs[r.GUID_KEY]},get referenceId(){return this.attrs.referenceId},set referenceId(e){return this.attrs.referenceId=e,e}});e.default=n}),define("shopify-buy/serializers/cart-serializer",["exports","../metal/core-object","../metal/assign","../models/cart-model"],function(e,t,r,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(t),a=i(r),s=i(n),u=o.default.extend({constructor:function(e){this.config=e},rootKeyForType:function(e){return e.slice(0,-1)},modelForType:function(){return s.default},deserializeSingle:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n=t[this.rootKeyForType(e)];return this.modelFromAttrs(e,n,r)},modelFromAttrs:function(e,t,r){var n=this.modelForType(e);return r.config=this.config,new n(t,r)},serialize:function(e,t){var r=this.rootKeyForType(e),n={},i=(0,a.default)({},t.attrs);return n[r]=i,delete i.attributes,Object.keys(i).forEach(function(e){var t=i[e];(null===t||"string"==typeof t&&0===t.length)&&delete i[e]}),n}});e.default=u}),define("shopify-buy/serializers/listings-serializer",["exports","../metal/core-object","../models/base-model","../models/product-model"],function(e,t,r,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(t),a=i(r),s=i(n),u=o.default.extend({constructor:function(e){this.config=e},rootKeyForType:function(e){return e.slice(0,-1)+"_listing"},models:{collections:a.default,products:s.default},modelForType:function(e){return this.models[e]},deserializeSingle:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],n=t[this.rootKeyForType(e)];return this.modelFromAttrs(e,n,r)},deserializeMultiple:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return r[this.rootKeyForType(e)+"s"].map(function(r){return t.modelFromAttrs(e,r,n)})},modelFromAttrs:function(e,t,r){var n=this.modelForType(e);return r.config=this.config,new n(t,r)}});e.default=u}),define("shopify-buy/serializers/reference-serializer",["exports","../metal/core-object","../metal/assign","../models/reference-model"],function(e,t,r,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(t),a=i(r),s=i(n),u=o.default.extend({constructor:function(e){this.config=e},modelForType:function(){return s.default},deserializeSingle:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];return new(this.modelForType(e))(t,r)},serialize:function(e,t){return(0,a.default)({},t.attrs)}});e.default=u}),define("shopify-buy/shop-client",["exports","./serializers/listings-serializer","./adapters/listings-adapter","./serializers/cart-serializer","./serializers/reference-serializer","./adapters/local-storage-adapter","./metal/core-object","./metal/assign","./metal/set-guid-for"],function(e,t,r,n,i,o,a,s,u){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var r=void 0;switch(e){case"all":r=function(){return this.fetchAll(t)};break;case"one":r=function(){return this.fetch.apply(this,[t].concat(Array.prototype.slice.call(arguments)))};break;case"query":r=function(){return this.fetchQuery.apply(this,[t].concat(Array.prototype.slice.call(arguments)))}}return r}Object.defineProperty(e,"__esModule",{value:!0});var f=l(t),d=l(r),p=l(n),h=l(i),y=l(o),m=l(a),v=l(s),g=m.default.extend({constructor:function(e){this.config=e,this.serializers={products:f.default,collections:f.default,carts:p.default,references:h.default},this.adapters={products:d.default,collections:d.default,carts:y.default,references:y.default}},config:null,get serializers(){return(0,v.default)({},this.shadowedSerializers)},set serializers(e){this.shadowedSerializers=(0,v.default)({},e)},get adapters(){return(0,v.default)({},this.shadowedAdapters)},set adapters(e){this.shadowedAdapters=(0,v.default)({},e)},fetchAll:function(e){var t=this,r=new this.adapters[e](this.config);return r.fetchMultiple(e).then(function(n){return t.deserialize(e,n,r,null,{multiple:!0})})},fetch:function(e,t){var r=this,n=new this.adapters[e](this.config);return n.fetchSingle(e,t).then(function(t){return r.deserialize(e,t,n,null,{single:!0})})},fetchQuery:function(e,t){var r=this,n=new this.adapters[e](this.config);return n.fetchMultiple(e,t).then(function(t){return r.deserialize(e,t,n,null,{multiple:!0})})},create:function(e){var t=this,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=new this.adapters[e](this.config),i=new this.serializers[e](this.config),o=new(i.modelForType(e))(r,{shopClient:this}),a=i.serialize(e,o);return n.create(e,a).then(function(r){return t.deserialize(e,r,n,i,{single:!0})})},update:function(e,t){var r=this,n=t.adapter,i=t.serializer,o=i.serialize(e,t),a=t.attrs[n.idKeyForType(e)];return n.update(e,a,o).then(function(t){return r.deserialize(e,t,n,i,{single:!0})})},deserialize:function(e,t,r,n){var i=arguments.length<=4||void 0===arguments[4]?{}:arguments[4],o=n||new this.serializers[e](this.config),a={shopClient:this,adapter:r,serializer:o,type:e};return i.multiple?o.deserializeMultiple(e,t,a):o.deserializeSingle(e,t,a)},createCart:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t={};return(0,v.default)(t,{line_items:[]}),(0,v.default)(t,e),this.create("carts",t)},updateCart:function(e){return this.update("carts",e)},fetchCart:c("one","carts"),fetchAllProducts:c("all","products"),fetchAllCollections:c("all","collections"),fetchProduct:c("one","products"),fetchCollection:c("one","collections"),fetchQueryProducts:c("query","products"),fetchQueryCollections:c("query","collections"),fetchRecentCart:function(){var e=this;return this.fetch("references",this.config.domain+".recent-cart").then(function(t){var r=t.referenceId;return e.fetchCart(r)}).catch(function(){return e.createCart().then(function(t){var r={referenceId:t.id};return r[u.GUID_KEY]=e.config.domain+".recent-cart",e.create("references",r),t})})}});e.default=g}),define("shopify-buy/shopify",["exports","./config","./version","./shop-client","./models/product-model","./isomorphic-fetch","./isomorphic-btoa"],function(e,t,r,n,i){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var a=o(t),s=o(r),u={ShopClient:o(n).default,Config:a.default,version:s.default,NO_IMAGE_URI:i.NO_IMAGE_URI,buildClient:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=new this.Config(e);return new this.ShopClient(t)}};e.default=u}),define("shopify-buy/store",["exports","./metal/global","./metal/core-object"],function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(t),o=n(r).default.extend({constructor:function(){this.localStorageAvailable=this.storageAvailable("localStorage"),this.cache={}},setItem:function(e,t){return this.localStorageAvailable?localStorage.setItem(e,JSON.stringify(t)):this.cache[e]=t,t},getItem:function(e){if(!this.localStorageAvailable)return this.cache[e]||null;var t=localStorage.getItem(e);try{return JSON.parse(t)}catch(e){return null}},storageAvailable:function(e){try{var t=i.default[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),!0}catch(e){return!1}}});e.default=o}),define("shopify-buy/version",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default="v0.2.2-a8212a"});