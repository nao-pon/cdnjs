(function(a){window.embedlyURLre=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;a.embedly=a.embedly||{};if(a.embedly.version){return}a.extend({embedly:function(j,p,m){var b=[];var o="http://api.embed.ly/";var c;if(typeof p!=="undefined"){c=a.extend(a.embedly.defaults,p)}else{c=a.embedly.defaults}if(!c.urlRe){c.urlRe=window.embedlyURLre}if(typeof j==="string"){j=new Array(j)}if(typeof m!=="undefined"){c.success=m}if(c.secure){o="https://api.embed.ly/"}if(c.success===null){c.success=function(i,s){var q,r=a(s.node);if(!(i)){return null}if((q=c.method)==="replace"){return r.replaceWith(i.code)}else{if(q==="after"){return r.after(i.code)}else{if(q==="afterParent"){return r.parent().after(i.code)}else{if(q==="replaceParent"){return r.parent().replaceWith(i.code)}}}}}}if(c.error===null){c.error=function(i,q){}}var l=function(i){return c.urlRe.test(i)};var n=function(q){var i="urls="+q;if(c.maxWidth!==null){i+="&maxwidth="+c.maxWidth}else{if(typeof dimensions!=="undefined"){i+="&maxwidth="+dimensions.width}}if(c.maxHeight!==null){i+="&maxheight="+c.maxHeight}if(c.chars!==null){i+="&chars="+c.chars}if(c.words!==null){i+="&words="+c.words}i+="&wmode="+c.wmode;if(typeof c.key==="string"){i+="&key="+c.key}if(typeof c.autoplay==="string"||typeof c.autoplay==="boolean"){i+="&autoplay="+c.autoplay}if(c.width){i+="&width="+c.width}return i};var h=function(){if(typeof c.key==="string"){if(c.endpoint.search(/objectify/i)>=0){return o+"2/objectify"}else{if(c.endpoint.search(/preview/i)>=0){return o+"1/preview"}}}return o+"1/oembed"};var f=function(u,s){if(c.endpoint!=="oembed"){return c.success(u,s)}var v,r,q,x,t,i,w,y;if((v=u.type)==="photo"){x=u.title||"";q=[];if(c.addImageStyles){if(c.maxWidth){t=isNaN(parseInt(c.maxWidth,10))?"":"px";q.push("max-width: "+(c.maxWidth)+t)}if(c.maxHeight){t=isNaN(parseInt(c.maxHeight,10))?"":"px";q.push("max-height: "+(c.maxHeight)+t)}}q=q.join(";");r="<a href='"+s.url+"' target='_blank'><img style='"+q+"' src='"+u.url+"' alt='"+x+"' /></a>"}else{if(v==="video"){r=u.html}else{if(v==="rich"){r=u.html}else{x=u.title||s.url;i=u.thumbnail_url?'<img src="'+u.thumbnail_url+'" class="thumb" />':"";y=u.description?'<div class="description">'+u.description+"</div>":"";w=u.provider_name?'<a href="'+u.provider_url+'" class="provider">'+u.provider_name+"</a>":"";r=i+"<a href='"+s.url+"'>"+x+"</a>";r+=w;r+=y}}}if(c.wrapElement&&c.wrapElement==="div"&&a.browser.msie&&a.browser.version<9){c.wrapElement="span"}if(c.wrapElement){r="<"+c.wrapElement+' class="'+c.className+'">'+r+"</"+c.wrapElement+">"}u.code=r;if(typeof s.node!=="undefined"){a(s.node).data("oembed",u).trigger("embedly-oembed",[u])}return c.success(u,s)};var d=function(i){var s,u,t,r,q;t=a.map(i,function(w,v){if(v===0){if(w.node!==null){q=a(w.node);r={width:q.parent().width(),height:q.parent().height()}}}return encodeURIComponent(w.url)}).join(",");a.ajax({url:h(),dataType:"jsonp",data:n(t),success:function(v){return a.each(v,function(w,x){return x.type!=="error"?f(x,i[w]):c.error(i[w].node,x)})}})};a.each(j,function(r,q){var t=typeof c.elems!=="undefined"?c.elems[r]:null;if(typeof t!=="undefined"&&!l(q)){a(t).data("oembed",false)}var s={url:q,error_code:400,error_message:"HTTP 400: Bad Request",type:"error"};return(q&&l(q))?b.push({url:q,node:t}):c.error(t,s)});var k=[];var g=b.length;for(var e=0;(0<=g?e<g:e>g);e+=20){k=k.concat(d(b.slice(e,e+20)))}if(c.elems){return c.elems}else{return this}}});a.embedly.version="2.1.6";a.embedly.defaults={endpoint:"oembed",chars:null,words:null,maxWidth:null,maxHeight:null,secure:false,frame:false,wmode:"opaque",autoplay:null,width:null,method:"replace",addImageStyles:true,wrapElement:"div",className:"embed",urlRe:null,key:null,elems:[],success:null,error:null};a.fn.embedly=function(d,g){var e=typeof d!=="undefined"?d:{};if(typeof g!=="undefined"){d.success=g}var f=new Array();var c=new Array();this.each(function(){if(typeof a(this).attr("href")!=="undefined"){f.push(a(this).attr("href"));c.push(a(this))}else{a(this).find("a").each(function(){f.push(a(this).attr("href"));c.push(a(this))})}e.elems=c});var b=a.embedly(f,e);return this}})(jQuery);