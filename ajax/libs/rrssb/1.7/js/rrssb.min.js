/*
 Ridiculously Responsive Social Sharing Buttons
 Team: @dbox, @joshuatuscan
 Site: http://www.kurtnoble.com/labs/rrssb
 Twitter: @therealkni

        ___           ___
       /__/|         /__/\        ___
      |  |:|         \  \:\      /  /\
      |  |:|          \  \:\    /  /:/
    __|  |:|      _____\__\:\  /__/::\
   /__/\_|:|____ /__/::::::::\ \__\/\:\__
   \  \:\/:::::/ \  \:\~~\~~\/    \  \:\/\
    \  \::/~~~~   \  \:\  ~~~      \__\::/
     \  \:\        \  \:\          /__/:/
      \  \:\        \  \:\         \__\/
       \__\/         \__\/
*/(function(e,t,n){"use strict";t.fn.rrssb=function(e){var i=t.extend({description:n,emailAddress:n,emailBody:n,emailSubject:n,image:n,title:n,url:n},e);for(var s in i)i.hasOwnProperty(s)&&i[s]!==n&&(i[s]=r(i[s]));if(i.url!==n){t(this).find(".rrssb-facebook a").attr("href","https://www.facebook.com/sharer/sharer.php?u="+i.url);t(this).find(".rrssb-tumblr a").attr("href","http://tumblr.com/share/link?url="+i.url+(i.title!==n?"&name="+i.title:"")+(i.description!==n?"&description="+i.description:""));t(this).find(".rrssb-linkedin a").attr("href","http://www.linkedin.com/shareArticle?mini=true&url="+i.url+(i.title!==n?"&title="+i.title:"")+(i.description!==n?"&summary="+i.description:""));t(this).find(".rrssb-twitter a").attr("href","http://twitter.com/home?status="+(i.description!==n?i.description:"")+"%20"+i.url);t(this).find(".rrssb-reddit a").attr("href","http://www.reddit.com/submit?url="+i.url);t(this).find(".rrssb-googleplus a").attr("href","https://plus.google.com/share?url="+(i.description!==n?i.description:"")+"%20"+i.url);t(this).find(".rrssb-pinterest a").attr("href","http://pinterest.com/pin/create/button/?url="+i.url+(i.image!==n?"&amp;media="+i.image:"")+(i.description!==n?"&amp;description="+i.description:""));t(this).find(".rrssb-pocket a").attr("href","https://getpocket.com/save?url="+i.url);t(this).find(".rrssb-github a").attr("href",i.url)}i.emailAddress!==n&&t(this).find(".rrssb-email a").attr("href","mailto:"+i.emailAddress+"?"+(i.emailSubject!==n?"subject="+i.emailSubject:"")+(i.emailBody!==n?"&amp;body="+i.emailBody:""))};var r=function(e){if(e!==n&&e!==null){if(e.match(/%[0-9a-f]{2}/i)===null)return encodeURIComponent(e);e=decodeURIComponent(e);r(e)}},i=function(){t(".rrssb-buttons").each(function(e){var n=t(this),r=t("li:visible",n).length,i=100/r;t("li",n).css("width",i+"%").attr("data-initwidth",i)})},s=function(){t(".rrssb-buttons").each(function(e){var n=t(this),r=parseFloat(t(n).width()),i=t("li",n).not(".small").first().width(),s=t("li.small",n).length;i>170&&s<1?t(n).addClass("large-format"):t(n).removeClass("large-format");r<200?t(n).removeClass("small-format").addClass("tiny-format"):t(n).removeClass("tiny-format")})},o=function(){t(".rrssb-buttons").each(function(e){var n=t(this),r=0,i=0,s,o,u=t("li.small",n).length;if(u===t("li",n).length){var f=u*42,l=parseFloat(t(n).width());s=t("li.small",n).first();o=parseFloat(t(s).attr("data-size"))+55;if(f+o<l){t(n).removeClass("small-format");t("li.small",n).first().removeClass("small");a()}}else{t("li",n).not(".small").each(function(e){var n=parseFloat(t(this).attr("data-size"))+55,s=parseFloat(t(this).width());r+=s;i+=n});var c=r-i;s=t("li.small",n).first();o=parseFloat(t(s).attr("data-size"))+55;if(o<c){t(s).removeClass("small");a()}}})},u=function(e){t(".rrssb-buttons").each(function(e){var n=t(this),r=t("li",n).nextAll(),i=r.length;t(t("li",n).get().reverse()).each(function(e,r){if(t(this).hasClass("small")===!1){var i=parseFloat(t(this).attr("data-size"))+55,s=parseFloat(t(this).width());if(i>s){var u=t("li",n).not(".small").last();t(u).addClass("small");a()}}--r||o()})});e===!0&&l(a)},a=function(){t(".rrssb-buttons").each(function(e){var n=t(this),r,s,o,u,a,f=t("li.small",n).length;if(f>0&&f!==t("li",n).length){t(n).removeClass("small-format");t("li.small",n).css("width","42px");o=f*42;r=t("li",n).not(".small").length;s=100/r;a=o/r;navigator.userAgent.indexOf("Chrome")>=0||navigator.userAgent.indexOf("Safari")>=0?u="-webkit-calc("+s+"% - "+a+"px)":navigator.userAgent.indexOf("Firefox")>=0?u="-moz-calc("+s+"% - "+a+"px)":u="calc("+s+"% - "+a+"px)";t("li",n).not(".small").css("width",u)}else if(f===t("li",n).length){t(n).addClass("small-format");i()}else{t(n).removeClass("small-format");i()}});s()},f=function(){t(".rrssb-buttons").each(function(e){t(this).addClass("rrssb-"+(e+1))});i();t(".rrssb-buttons li .rrssb-text").each(function(e){var n=parseFloat(t(this).width());t(this).closest("li").attr("data-size",n)});u(!0)},l=function(e){t(".rrssb-buttons li.small").removeClass("small");u();e()},c=function(t,r,i,s){var o=e.screenLeft!==n?e.screenLeft:screen.left,u=e.screenTop!==n?e.screenTop:screen.top,a=e.innerWidth?e.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,f=e.innerHeight?e.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,l=a/2-i/2+o,c=f/3-s/3+u,h=e.open(t,r,"scrollbars=yes, width="+i+", height="+s+", top="+c+", left="+l);e.focus&&h.focus()},h=function(){var e={};return function(t,n,r){r||(r="Don't call this twice without a uniqueId");e[r]&&clearTimeout(e[r]);e[r]=setTimeout(t,n)}}();t(document).ready(function(){t(".rrssb-buttons a.popup").on("click",function(e){var n=t(this);c(n.attr("href"),n.find(".rrssb-text").html(),580,470);e.preventDefault()});t(e).resize(function(){l(a);h(function(){l(a)},200,"finished resizing")});f()});e.rrssbInit=f})(window,jQuery);