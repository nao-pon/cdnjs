"undefined"==typeof gj&&(gj={}),gj.widget=function(){var e=this;e.xhr=null,e.generateGUID=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},e.mouseX=function(e){if(e){if(e.pageX)return e.pageX;if(e.clientX)return e.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft)}return null},e.mouseY=function(e){if(e){if(e.pageY)return e.pageY;if(e.clientY)return e.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop)}return null}},gj.widget.prototype.init=function(e,t){var n,r,a;r=$.extend(!0,{},this.getHTMLConfig()||{}),$.extend(!0,r,e||{}),a=this.getConfig(r,t),this.attr("data-guid",a.guid),this.data(a);for(n in a)gj[t].events.hasOwnProperty(n)&&(this.on(n,a[n]),delete a[n]);for(plugin in gj[t].plugins)gj[t].plugins.hasOwnProperty(plugin)&&gj[t].plugins[plugin].configure(this,a,r);return this},gj.widget.prototype.getConfig=function(e,t){var n,r,a,i;n=$.extend(!0,{},gj[t].config.base),r=e.hasOwnProperty("uiLibrary")?e.uiLibrary:n.uiLibrary,gj[t].config[r]&&$.extend(!0,n,gj[t].config[r]),a=e.hasOwnProperty("iconsLibrary")?e.iconsLibrary:n.iconsLibrary,gj[t].config[a]&&$.extend(!0,n,gj[t].config[a]);for(i in gj[t].plugins)gj[t].plugins.hasOwnProperty(i)&&($.extend(!0,n,gj[t].plugins[i].config.base),gj[t].plugins[i].config[r]&&$.extend(!0,n,gj[t].plugins[i].config[r]),gj[t].plugins[i].config[a]&&$.extend(!0,n,gj[t].plugins[i].config[a]));return $.extend(!0,n,e),n.guid||(n.guid=this.generateGUID()),n},gj.widget.prototype.getHTMLConfig=function(){var e=this.data(),t=this[0].attributes;return t.width&&(e.width=t.width.nodeValue),t.height&&(e.height=t.height.nodeValue),t.align&&(e.align=t.align.nodeValue),e&&e.source&&(e.dataSource=e.source,delete e.source),e},gj.widget.prototype.createDoneHandler=function(){var e=this;return function(t){"string"==typeof t&&JSON&&(t=JSON.parse(t)),gj[e.data("type")].methods.render(e,t)}},gj.widget.prototype.createErrorHandler=function(){return function(e){e&&e.statusText&&"abort"!==e.statusText&&alert(e.statusText)}},gj.widget.prototype.reload=function(e){var t,n,r=this.data(),a=this.data("type");return void 0===r.dataSource&&gj[a].methods.useHtmlDataSource(this,r),$.extend(r.params,e),$.isArray(r.dataSource)?(n=gj[a].methods.filter(this),gj[a].methods.render(this,n)):"string"==typeof r.dataSource?(t={url:r.dataSource,data:r.params},this.xhr&&this.xhr.abort(),this.xhr=$.ajax(t).done(this.createDoneHandler()).fail(this.createErrorHandler())):"object"==typeof r.dataSource&&(r.dataSource.data||(r.dataSource.data={}),$.extend(r.dataSource.data,r.params),"json"===(t=$.extend(!0,{},r.dataSource)).dataType&&"object"==typeof t.data&&(t.data=JSON.stringify(t.data)),t.success||(t.success=this.createDoneHandler()),t.error||(t.error=this.createErrorHandler()),this.xhr&&this.xhr.abort(),this.xhr=$.ajax(t)),this},gj.documentManager={events:{},subscribeForEvent:function(e,t,n){if(gj.documentManager.events[e]&&0!==gj.documentManager.events[e].length){if(gj.documentManager.events[e][t])throw"Event "+e+" for widget with guid='"+t+"' is already attached.";gj.documentManager.events[e].push({widgetId:t,callback:n})}else gj.documentManager.events[e]=[{widgetId:t,callback:n}],$(document).on(e,gj.documentManager.executeCallbacks)},executeCallbacks:function(e){var t=gj.documentManager.events[e.type];if(t)for(var n=0;n<t.length;n++)t[n].callback(e)},unsubscribeForEvent:function(e,t){var n=!1,r=gj.documentManager.events[e];if(r)for(var a=0;a<r.length;a++)r[a].widgetId===t&&(r.splice(a,1),n=!0,0===r.length&&($(document).off(e),delete gj.documentManager.events[e]));if(!n)throw'The "'+e+'" for widget with guid="'+t+"\" can't be removed."}},void 0===gj.checkbox&&(gj.checkbox={}),gj.checkbox.config={base:{uiLibrary:void 0,style:{wrapperCssClass:void 0,inputCssClass:void 0,spanCssClass:void 0}},bootstrap:{style:{wrapperCssClass:"gj-checkbox-bootstrap",inputCssClass:void 0,spanCssClass:void 0}},materialdesign:{style:{wrapperCssClass:"gj-checkbox-md",inputCssClass:void 0,spanCssClass:"material-icons md-light"}}},gj.checkbox.methods={init:function(e){var t=this;return gj.widget.prototype.init.call(this,e,"checkbox"),t.attr("data-checkbox","true"),gj.checkbox.methods.initialize(t),t},initialize:function(e){var t,n,r=e.data();e.on("change",function(t){e.state(this.checked?"checked":"unchecked")}),r.style.inputCssClass&&e.addClass(r.style.inputCssClass),r.style.wrapperCssClass&&(t=$('<label class="'+r.style.wrapperCssClass+'"></label>'),e.attr("id")&&t.attr("for",e.attr("id")),e.wrap(t),n=$("<span />"),r.style.spanCssClass&&n.addClass(r.style.spanCssClass),e.parent().append(n))},state:function(e,t){return t?("checked"===t?(e.prop("indeterminate",!1),e.prop("checked",!0)):"unchecked"===t?(e.prop("indeterminate",!1),e.prop("checked",!1)):"indeterminate"===t&&(e.prop("checked",!0),e.prop("indeterminate",!0)),gj.checkbox.events.stateChange(e,t),e):t=e.prop("indeterminate")?"indeterminate":e.prop("checked")?"checked":"unchecked"},toggle:function(e){return"checked"==e.data("state")?e.state("unchecked"):e.state("checked"),e},destroy:function(e){return"true"===e.attr("data-checkbox")&&(e.removeData(),e.removeAttr("data-guid"),e.removeAttr("data-checkbox"),e.off()),e}},gj.checkbox.events={stateChange:function(e,t){return e.triggerHandler("stateChange",[t])}},gj.checkbox.widget=function(e,arguments){var t=this,n=gj.checkbox.methods;return t.toggle=function(){return n.toggle(this)},t.state=function(e){return n.state(this,e)},t.destroy=function(){return n.destroy(this)},$.extend(e,t),"true"!==e.attr("data-checkbox")&&n.init.apply(e,arguments),e},gj.checkbox.widget.prototype=new gj.widget,gj.checkbox.widget.constructor=gj.checkbox.widget,jQuery.fn.checkbox=function(e){var t;if(this&&this.length){if("object"!=typeof e&&e){if((t=new gj.checkbox.widget(this,null))[e])return t[e].apply(this,Array.prototype.slice.call(arguments,1));throw"Method "+e+" does not exist."}return new gj.checkbox.widget(this,arguments)}};