"undefined"==typeof gj&&(gj={}),gj.widget=function(){var t=this;t.xhr=null,t.generateGUID=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},t.mouseX=function(t){if(t){if(t.pageX)return t.pageX;if(t.clientX)return t.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft);if(t.touches&&t.touches.length)return t.touches[0].pageX;if(t.changedTouches&&t.changedTouches.length)return t.changedTouches[0].pageX;if(t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches.length)return t.originalEvent.touches[0].pageX;if(t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches.length)return t.originalEvent.touches[0].pageX}return null},t.mouseY=function(t){if(t){if(t.pageY)return t.pageY;if(t.clientY)return t.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);if(t.touches&&t.touches.length)return t.touches[0].pageY;if(t.changedTouches&&t.changedTouches.length)return t.changedTouches[0].pageY;if(t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches.length)return t.originalEvent.touches[0].pageY;if(t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches.length)return t.originalEvent.touches[0].pageY}return null}},gj.widget.prototype.init=function(t,e){var i,n,a;n=$.extend(!0,{},this.getHTMLConfig()||{}),$.extend(!0,n,t||{}),a=this.getConfig(n,e),this.attr("data-guid",a.guid),this.data(a);for(i in a)gj[e].events.hasOwnProperty(i)&&(this.on(i,a[i]),delete a[i]);for(plugin in gj[e].plugins)gj[e].plugins.hasOwnProperty(plugin)&&gj[e].plugins[plugin].configure(this,a,n);return this},gj.widget.prototype.getConfig=function(t,e){var i,n,a,o;i=$.extend(!0,{},gj[e].config.base),n=t.hasOwnProperty("uiLibrary")?t.uiLibrary:i.uiLibrary,gj[e].config[n]&&$.extend(!0,i,gj[e].config[n]),a=t.hasOwnProperty("iconsLibrary")?t.iconsLibrary:i.iconsLibrary,gj[e].config[a]&&$.extend(!0,i,gj[e].config[a]);for(o in gj[e].plugins)gj[e].plugins.hasOwnProperty(o)&&($.extend(!0,i,gj[e].plugins[o].config.base),gj[e].plugins[o].config[n]&&$.extend(!0,i,gj[e].plugins[o].config[n]),gj[e].plugins[o].config[a]&&$.extend(!0,i,gj[e].plugins[o].config[a]));return $.extend(!0,i,t),i.guid||(i.guid=this.generateGUID()),i},gj.widget.prototype.getHTMLConfig=function(){var t=this.data(),e=this[0].attributes;return e.width&&(t.width=e.width.nodeValue),e.height&&(t.height=e.height.nodeValue),e.align&&(t.align=e.align.nodeValue),t&&t.source&&(t.dataSource=t.source,delete t.source),t},gj.widget.prototype.createDoneHandler=function(){var t=this;return function(e){"string"==typeof e&&JSON&&(e=JSON.parse(e)),gj[t.data("type")].methods.render(t,e)}},gj.widget.prototype.createErrorHandler=function(){return function(t){t&&t.statusText&&"abort"!==t.statusText&&alert(t.statusText)}},gj.widget.prototype.reload=function(t){var e,i,n=this.data(),a=this.data("type");return void 0===n.dataSource&&gj[a].methods.useHtmlDataSource(this,n),$.extend(n.params,t),$.isArray(n.dataSource)?(i=gj[a].methods.filter(this),gj[a].methods.render(this,i)):"string"==typeof n.dataSource?(e={url:n.dataSource,data:n.params},this.xhr&&this.xhr.abort(),this.xhr=$.ajax(e).done(this.createDoneHandler()).fail(this.createErrorHandler())):"object"==typeof n.dataSource&&(n.dataSource.data||(n.dataSource.data={}),$.extend(n.dataSource.data,n.params),"json"===(e=$.extend(!0,{},n.dataSource)).dataType&&"object"==typeof e.data&&(e.data=JSON.stringify(e.data)),e.success||(e.success=this.createDoneHandler()),e.error||(e.error=this.createErrorHandler()),this.xhr&&this.xhr.abort(),this.xhr=$.ajax(e)),this},gj.documentManager={events:{},subscribeForEvent:function(t,e,i){if(gj.documentManager.events[t]&&0!==gj.documentManager.events[t].length){if(gj.documentManager.events[t][e])throw"Event "+t+" for widget with guid='"+e+"' is already attached.";gj.documentManager.events[t].push({widgetId:e,callback:i})}else gj.documentManager.events[t]=[{widgetId:e,callback:i}],$(document).on(t,gj.documentManager.executeCallbacks)},executeCallbacks:function(t){var e=gj.documentManager.events[t.type];if(e)for(var i=0;i<e.length;i++)e[i].callback(t)},unsubscribeForEvent:function(t,e){var i=!1,n=gj.documentManager.events[t];if(n)for(var a=0;a<n.length;a++)n[a].widgetId===e&&(n.splice(a,1),i=!0,0===n.length&&($(document).off(t),delete gj.documentManager.events[t]));if(!i)throw'The "'+t+'" for widget with guid="'+e+"\" can't be removed."}},void 0===gj.editor&&(gj.editor={plugins:{},messages:[]}),gj.editor.messages["en-us"]={bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",listBulleted:"List Bulleted",listNumbered:"List Numbered",indentDecrease:"Indent Decrease",indentIncrease:"Indent Increase",alignLeft:"Align Left",alignCenter:"Align Center",alignRight:"Align Right",alignJustify:"Align Justify",undo:"Undo",redo:"Redo"},gj.editor.config={base:{height:300,width:void 0,uiLibrary:"materialdesign",iconsLibrary:"materialicons",locale:"en-us",buttons:void 0,style:{wrapper:"gj-editor-md",buttonsGroup:"gj-md-button-group",button:"gj-md-button",buttonActive:"gj-md-button-active"}},bootstrap:{style:{wrapper:"gj-editor-bootstrap",buttonsGroup:"btn-group",button:"btn btn-default gj-cursor-pointer",buttonActive:"active"},iconsLibrary:"fontawesome"},bootstrap4:{style:{wrapper:"gj-editor-bootstrap",buttonsGroup:"btn-group",button:"btn btn-secondary gj-cursor-pointer",buttonActive:"active"},iconsLibrary:"fontawesome"},materialicons:{icons:{bold:'<i class="material-icons">format_bold</i>',italic:'<i class="material-icons">format_italic</i>',strikethrough:'<i class="material-icons">strikethrough_s</i>',underline:'<i class="material-icons">format_underlined</i>',listBulleted:'<i class="material-icons">format_list_bulleted</i>',listNumbered:'<i class="material-icons">format_list_numbered</i>',indentDecrease:'<i class="material-icons">format_indent_decrease</i>',indentIncrease:'<i class="material-icons">format_indent_increase</i>',alignLeft:'<i class="material-icons">format_align_left</i>',alignCenter:'<i class="material-icons">format_align_center</i>',alignRight:'<i class="material-icons">format_align_right</i>',alignJustify:'<i class="material-icons">format_align_justify</i>',undo:'<i class="material-icons">undo</i>',redo:'<i class="material-icons">redo</i>'}},fontawesome:{icons:{bold:'<i class="fa fa-bold" aria-hidden="true"></i>',italic:'<i class="fa fa-italic" aria-hidden="true"></i>',strikethrough:'<i class="fa fa-strikethrough" aria-hidden="true"></i>',underline:'<i class="fa fa-underline" aria-hidden="true"></i>',listBulleted:'<i class="fa fa-list-ul" aria-hidden="true"></i>',listNumbered:'<i class="fa fa-list-ol" aria-hidden="true"></i>',indentDecrease:'<i class="fa fa-indent" aria-hidden="true"></i>',indentIncrease:'<i class="fa fa-outdent" aria-hidden="true"></i>',alignLeft:'<i class="fa fa-align-left" aria-hidden="true"></i>',alignCenter:'<i class="fa fa-align-center" aria-hidden="true"></i>',alignRight:'<i class="fa fa-align-right" aria-hidden="true"></i>',alignJustify:'<i class="fa fa-align-justify" aria-hidden="true"></i>',undo:'<i class="fa fa-undo" aria-hidden="true"></i>',redo:'<i class="fa fa-repeat" aria-hidden="true"></i>'}}},gj.editor.methods={init:function(t){return gj.widget.prototype.init.call(this,t,"editor"),this.attr("data-editor","true"),gj.editor.methods.initialize(this),this},initialize:function(t){var e,i,n=this,a=t.data(),o=t.children('div[data-role="body"]'),r=t.children('div[data-role="toolbar"]');if(gj.editor.methods.localization(a),t.addClass(a.style.wrapper),a.width&&t.width(a.width),0===o.length&&(o=$('<div data-role="body" />'),t.append(o)),o.attr("contenteditable",!0),o.height(a.height-r.outerHeight()),o.on("mouseup keyup mouseout",function(){n.updateToolbar(t,r)}),0===r.length){r=$('<div data-role="toolbar"></div>'),o.before(r);for(var s in a.buttons){e=$("<div />").addClass(a.style.buttonsGroup);for(var l in a.buttons[s])(i=$(a.buttons[s][l])).on("click",function(){gj.editor.methods.executeCmd(t,o,r,$(this))}),e.append(i);r.append(e)}}},localization:function(t){var e=gj.editor.messages[t.locale];void 0===t.buttons&&(t.buttons=[['<button type="button" class="'+t.style.button+'" title="'+e.bold+'" data-role="bold">'+t.icons.bold+"</button>",'<button type="button" class="'+t.style.button+'" title="'+e.italic+'" data-role="italic">'+t.icons.italic+"</button>",'<button type="button" class="'+t.style.button+'" title="'+e.strikethrough+'" data-role="strikethrough">'+t.icons.strikethrough+"</button>",'<button type="button" class="'+t.style.button+'" title="'+e.underline+'" data-role="underline">'+t.icons.underline+"</button>"],['<button type="button" class="'+t.style.button+'" title="'+e.listBulleted+'" data-role="insertunorderedlist">'+t.icons.listBulleted+"</button>",'<button type="button" class="'+t.style.button+'" title="'+e.listNumbered+'" data-role="insertorderedlist">'+t.icons.listNumbered+"</button>",'<button type="button" class="'+t.style.button+'" title="'+e.indentDecrease+'" data-role="outdent">'+t.icons.indentDecrease+"</button>",'<button type="button" class="'+t.style.button+'" title="'+e.indentIncrease+'" data-role="indent">'+t.icons.indentIncrease+"</button>"],['<button type="button" class="'+t.style.button+'" title="'+e.alignLeft+'" data-role="justifyleft">'+t.icons.alignLeft+"</button>",'<button type="button" class="'+t.style.button+'" title="'+e.alignCenter+'" data-role="justifycenter">'+t.icons.alignCenter+"</button>",'<button type="button" class="'+t.style.button+'" title="'+e.alignRight+'" data-role="justifyright">'+t.icons.alignRight+"</button>",'<button type="button" class="'+t.style.button+'" title="'+e.alignJustify+'" data-role="justifyfull">'+t.icons.alignJustify+"</button>"],['<button type="button" class="'+t.style.button+'" title="'+e.undo+'" data-role="undo">'+t.icons.undo+"</button>",'<button type="button" class="'+t.style.button+'" title="'+e.redo+'" data-role="redo">'+t.icons.redo+"</button>"]])},updateToolbar:function(t,e){var i=t.data();$buttons=e.find("[data-role]").each(function(){var t=$(this),e=t.attr("data-role");e&&document.queryCommandEnabled(e)&&"true"===document.queryCommandValue(e)?t.addClass(i.style.buttonActive):t.removeClass(i.style.buttonActive)}),gj.editor.events.change(t)},executeCmd:function(t,e,i,n){e.focus(),document.execCommand(n.attr("data-role"),!1),gj.editor.methods.updateToolbar(t,i)},content:function(t,e){var i=t.children('div[data-role="body"]');return void 0===e?i.html():i.html(e)},destroy:function(t){return"true"===t.attr("data-editor")&&(t.removeClass(t.data().style.wrapper),t.removeData(),t.removeAttr("data-guid"),t.removeAttr("data-editor"),t.off(),t.empty()),t}},gj.editor.events={change:function(t){return t.triggerHandler("change")}},gj.editor.widget=function(t,e){var i=this,n=gj.editor.methods;return i.content=function(t){return n.content(this,t)},i.destroy=function(){return n.destroy(this)},$.extend(t,i),"true"!==t.attr("data-editor")&&n.init.call(t,e),t},gj.editor.widget.prototype=new gj.widget,gj.editor.widget.constructor=gj.editor.widget,jQuery.fn.editor=function(t){var e;if(this&&this.length){if("object"!=typeof t&&t){if((e=new gj.editor.widget(this,null))[t])return e[t].apply(this,Array.prototype.slice.call(arguments,1));throw"Method "+t+" does not exist."}return new gj.editor.widget(this,t)}};