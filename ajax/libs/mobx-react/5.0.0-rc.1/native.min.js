import{Reaction,_allowStateChanges,_setReactionScheduler,createAtom,isObservableArray,isObservableMap,isObservableObject,spy,untracked}from"mobx";import React,{Children,Component,createElement}from"react";import{unstable_batchedUpdates}from"react-native";var unstable_batchedUpdates$1=void 0,findDOMNode=void 0,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},asyncGenerator=function(){function e(e){this.value=e}function r(r){var t,n;function o(t,n){try{var i=r[t](n),s=i.value;s instanceof e?Promise.resolve(s.value).then(function(e){o("next",e)},function(e){o("throw",e)}):a(i.done?"return":"normal",i.value)}catch(e){a("throw",e)}}function a(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?o(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise(function(a,i){var s={key:e,arg:r,resolve:a,reject:i,next:null};n?n=n.next=s:(t=n=s,o(e,r))})},"function"!=typeof r.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(r.prototype[Symbol.asyncIterator]=function(){return this}),r.prototype.next=function(e){return this._invoke("next",e)},r.prototype.throw=function(e){return this._invoke("throw",e)},r.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new r(e.apply(this,arguments))}},await:function(r){return new e(r)}}}(),classCallCheck=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),inherits=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},possibleConstructorReturn=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r},EventEmitter=function(){function e(){classCallCheck(this,e),this.listeners=[]}return createClass(e,[{key:"on",value:function(e){var r=this;return this.listeners.push(e),function(){var t=r.listeners.indexOf(e);-1!==t&&r.listeners.splice(t,1)}}},{key:"emit",value:function(e){this.listeners.forEach(function(r){return r(e)})}}]),e}(),REACT_STATICS={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},KNOWN_STATICS={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},defineProperty$1=Object.defineProperty,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,objectPrototype=getPrototypeOf&&getPrototypeOf(Object),hoistNonReactStatics=function e(r,t,n){if("string"!=typeof t){if(objectPrototype){var o=getPrototypeOf(t);o&&o!==objectPrototype&&e(r,o,n)}var a=getOwnPropertyNames(t);getOwnPropertySymbols&&(a=a.concat(getOwnPropertySymbols(t)));for(var i=0;i<a.length;++i){var s=a[i];if(!(REACT_STATICS[s]||KNOWN_STATICS[s]||n&&n[s])){var c=getOwnPropertyDescriptor(t,s);try{defineProperty$1(r,s,c)}catch(e){}}}return r}return r};function createChainableTypeChecker(e){function r(r,t,n,o,a,i){for(var s=arguments.length,c=Array(s>6?s-6:0),p=6;p<s;p++)c[p-6]=arguments[p];return untracked(function(){if(o=o||"<<anonymous>>",i=i||n,null==t[n]){if(r){var s=null===t[n]?"null":"undefined";return new Error("The "+a+" `"+i+"` is marked as required in `"+o+"`, but its value is `"+s+"`.")}return null}return e.apply(void 0,[t,n,o,a,i].concat(c))})}var t=r.bind(null,!1);return t.isRequired=r.bind(null,!0),t}function isSymbol(e,r){return"symbol"===e||("Symbol"===r["@@toStringTag"]||"function"==typeof Symbol&&r instanceof Symbol)}function getPropType(e){var r=void 0===e?"undefined":_typeof(e);return Array.isArray(e)?"array":e instanceof RegExp?"object":isSymbol(r,e)?"symbol":r}function getPreciseType(e){var r=getPropType(e);if("object"===r){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return r}function createObservableTypeCheckerCreator(e,r){return createChainableTypeChecker(function(t,n,o,a,i){return untracked(function(){if(e&&getPropType(t[n])===r.toLowerCase())return null;var a=void 0;switch(r){case"Array":a=isObservableArray;break;case"Object":a=isObservableObject;break;case"Map":a=isObservableMap;break;default:throw new Error("Unexpected mobxType: "+r)}var s=t[n];if(!a(s)){var c=getPreciseType(s),p=e?" or javascript `"+r.toLowerCase()+"`":"";return new Error("Invalid prop `"+i+"` of type `"+c+"` supplied to `"+o+"`, expected `mobx.Observable"+r+"`"+p+".")}return null})})}function createObservableArrayOfTypeChecker(e,r){return createChainableTypeChecker(function(t,n,o,a,i){for(var s=arguments.length,c=Array(s>5?s-5:0),p=5;p<s;p++)c[p-5]=arguments[p];return untracked(function(){if("function"!=typeof r)return new Error("Property `"+i+"` of component `"+o+"` has invalid PropType notation.");var s=createObservableTypeCheckerCreator(e,"Array")(t,n,o);if(s instanceof Error)return s;for(var p=t[n],l=0;l<p.length;l++)if((s=r.apply(void 0,[p,l,o,a,i+"["+l+"]"].concat(c)))instanceof Error)return s;return null})})}var observableArray=createObservableTypeCheckerCreator(!1,"Array"),observableArrayOf=createObservableArrayOfTypeChecker.bind(null,!1),observableMap=createObservableTypeCheckerCreator(!1,"Map"),observableObject=createObservableTypeCheckerCreator(!1,"Object"),arrayOrObservableArray=createObservableTypeCheckerCreator(!0,"Array"),arrayOrObservableArrayOf=createObservableArrayOfTypeChecker.bind(null,!0),objectOrObservableObject=createObservableTypeCheckerCreator(!0,"Object"),propTypes=Object.freeze({observableArray:observableArray,observableArrayOf:observableArrayOf,observableMap:observableMap,observableObject:observableObject,arrayOrObservableArray:arrayOrObservableArray,arrayOrObservableArrayOf:arrayOrObservableArrayOf,objectOrObservableObject:objectOrObservableObject});function isStateless(e){return!(e.prototype&&e.prototype.render)}var injectorContextTypes={mobxStores:objectOrObservableObject};Object.seal(injectorContextTypes);var proxiedInjectorProps={contextTypes:{get:function(){return injectorContextTypes},set:function(e){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:!0,enumerable:!1},isMobxInjector:{value:!0,writable:!0,configurable:!0,enumerable:!0}};function createStoreInjector(e,r,t){var n,o,a="inject-"+(r.displayName||r.name||r.constructor&&r.constructor.name||"Unknown");t&&(a+="-with-"+t);var i=(o=n=function(t){function n(){var e,r,t;classCallCheck(this,n);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return r=t=possibleConstructorReturn(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(a))),t.storeRef=function(e){t.wrappedInstance=e},possibleConstructorReturn(t,r)}return inherits(n,Component),createClass(n,[{key:"render",value:function(){var t={};for(var n in this.props)this.props.hasOwnProperty(n)&&(t[n]=this.props[n]);var o=e(this.context.mobxStores||{},t,this.context)||{};for(var a in o)t[a]=o[a];return isStateless(r)||(t.ref=this.storeRef),createElement(r,t)}}]),n}(),n.displayName=a,o);return hoistNonReactStatics(i,r),i.wrappedComponent=r,Object.defineProperties(i,proxiedInjectorProps),i}function grabStoresByName(e){return function(r,t){return e.forEach(function(e){if(!(e in t)){if(!(e in r))throw new Error("MobX injector: Store '"+e+"' is not available! Make sure it is provided by some Provider");t[e]=r[e]}}),t}}function inject(){var e=void 0;if("function"==typeof arguments[0])return e=arguments[0],function(r){var t=createStoreInjector(e,r);return t.isMobxInjector=!1,(t=observer(t)).isMobxInjector=!0,t};for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return e=grabStoresByName(r),function(t){return createStoreInjector(e,t,r.join("-"))}}var isDevtoolsEnabled=!1,isUsingStaticRendering=!1,warnedAboutObserverInjectDeprecation=!1,componentByNodeRegistery="undefined"!=typeof WeakMap?new WeakMap:void 0,renderReporter=new EventEmitter;function findDOMNode$1(e){if(findDOMNode)try{return findDOMNode(e)}catch(e){return null}return null}function reportRendering(e){var r=findDOMNode$1(e);r&&componentByNodeRegistery&&componentByNodeRegistery.set(r,e),renderReporter.emit({event:"render",renderTime:e.__$mobRenderEnd-e.__$mobRenderStart,totalTime:Date.now()-e.__$mobRenderStart,component:e,node:r})}function trackComponents(){if("undefined"==typeof WeakMap)throw new Error("[mobx-react] tracking components is not supported in this browser.");isDevtoolsEnabled||(isDevtoolsEnabled=!0)}function useStaticRendering(e){isUsingStaticRendering=e}var errorsReporter=new EventEmitter;function patch(e,r){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e[r],o=reactiveMixin[r],a=n?!0===t?function(){o.apply(this,arguments),n.apply(this,arguments)}:function(){n.apply(this,arguments),o.apply(this,arguments)}:o;e[r]=a}function shallowEqual(e,r){if(is(e,r))return!0;if("object"!==(void 0===e?"undefined":_typeof(e))||null===e||"object"!==(void 0===r?"undefined":_typeof(r))||null===r)return!1;var t=Object.keys(e),n=Object.keys(r);if(t.length!==n.length)return!1;for(var o=0;o<t.length;o++)if(!hasOwnProperty.call(r,t[o])||!is(e[t[o]],r[t[o]]))return!1;return!0}function is(e,r){return e===r?0!==e||1/e==1/r:e!=e&&r!=r}var reactiveMixin={componentWillMount:function(){var e=this;if(!0!==isUsingStaticRendering){var r=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",t=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID||this._reactInternalFiber&&this._reactInternalFiber._debugID,n=!1,o=!1;p.call(this,"props"),p.call(this,"state");var a=this.render.bind(this),i=null,s=!1,c=function(){s=!1;var r=void 0,t=void 0;if(i.track(function(){isDevtoolsEnabled&&(e.__$mobRenderStart=Date.now());try{t=_allowStateChanges(!1,a)}catch(e){r=e}isDevtoolsEnabled&&(e.__$mobRenderEnd=Date.now())}),r)throw errorsReporter.emit(r),r;return t};this.render=function(){return(i=new Reaction(r+"#"+t+".render()",function(){if(!s&&(s=!0,"function"==typeof e.componentWillReact&&e.componentWillReact(),!0!==e.__$mobxIsUnmounted)){var r=!0;try{o=!0,n||Component.prototype.forceUpdate.call(e),r=!1}finally{o=!1,r&&i.dispose()}}})).reactComponent=e,c.$mobx=i,e.render=c,c()}}function p(e){var r=this[e],t=createAtom("reactive "+e);Object.defineProperty(this,e,{configurable:!0,enumerable:!0,get:function(){return t.reportObserved(),r},set:function(e){o||shallowEqual(r,e)?r=e:(r=e,n=!0,t.reportChanged(),n=!1)}})}},componentWillUnmount:function(){if(!0!==isUsingStaticRendering&&(this.render.$mobx&&this.render.$mobx.dispose(),this.__$mobxIsUnmounted=!0,isDevtoolsEnabled)){var e=findDOMNode$1(this);e&&componentByNodeRegistery&&componentByNodeRegistery.delete(e),renderReporter.emit({event:"destroy",component:this,node:e})}},componentDidMount:function(){isDevtoolsEnabled&&reportRendering(this)},componentDidUpdate:function(){isDevtoolsEnabled&&reportRendering(this)},shouldComponentUpdate:function(e,r){return isUsingStaticRendering&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==r||!shallowEqual(this.props,e)}};function observer(e,r){if("string"==typeof e)throw new Error("Store names should be provided as array");if(Array.isArray(e))return warnedAboutObserverInjectDeprecation||(warnedAboutObserverInjectDeprecation=!0,console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')),r?inject.apply(null,e)(observer(r)):function(r){return observer(e,r)};var t,n,o=e;if(!0===o.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),!("function"!=typeof o||o.prototype&&o.prototype.render||o.isReactClass||Component.isPrototypeOf(o)))return observer((n=t=function(e){function r(){return classCallCheck(this,r),possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return inherits(r,Component),createClass(r,[{key:"render",value:function(){return o.call(this,this.props,this.context)}}]),r}(),t.displayName=o.displayName||o.name,t.contextTypes=o.contextTypes,t.propTypes=o.propTypes,t.defaultProps=o.defaultProps,n));if(!o)throw new Error("Please pass a valid component to 'observer'");return mixinLifecycleEvents(o.prototype||o),o.isMobXReactObserver=!0,o}function mixinLifecycleEvents(e){patch(e,"componentWillMount",!0),["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach(function(r){patch(e,r)}),e.shouldComponentUpdate||(e.shouldComponentUpdate=reactiveMixin.shouldComponentUpdate)}var Observer=observer(function(e){var r=e.children,t=e.inject,n=e.render,o=r||n;if(void 0===o)return null;if(!t)return o();var a=inject(t)(o);return React.createElement(a,null)});Observer.displayName="Observer";var _class,_temp,ObserverPropsCheck=function(e,r,t,n,o){var a="children"===r?"render":"children";return"function"==typeof e[r]&&"function"==typeof e[a]?new Error("Invalid prop,do not use children and render in the same time in`"+t):"function"!=typeof e[r]&&"function"!=typeof e[a]?new Error("Invalid prop `"+o+"` of type `"+_typeof(e[r])+"` supplied to `"+t+"`, expected `function`."):void 0};Observer.propTypes={render:ObserverPropsCheck,children:ObserverPropsCheck};var specialReactKeys={children:!0,key:!0,ref:!0},Provider=(_temp=_class=function(e){function r(){return classCallCheck(this,r),possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).apply(this,arguments))}return inherits(r,Component),createClass(r,[{key:"render",value:function(){return Children.only(this.props.children)}},{key:"getChildContext",value:function(){var e={},r=this.context.mobxStores;if(r)for(var t in r)e[t]=r[t];for(var n in this.props)specialReactKeys[n]||"suppressChangedStoreWarning"===n||(e[n]=this.props[n]);return{mobxStores:e}}},{key:"componentWillReceiveProps",value:function(e){if(Object.keys(e).length!==Object.keys(this.props).length&&console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!e.suppressChangedStoreWarning)for(var r in e)specialReactKeys[r]||this.props[r]===e[r]||console.warn("MobX Provider: Provided store '"+r+"' has changed. Please avoid replacing stores as the change might not propagate to all children")}}]),r}(),_class.contextTypes={mobxStores:objectOrObservableObject},_class.childContextTypes={mobxStores:objectOrObservableObject.isRequired},_temp);if(!Component)throw new Error("mobx-react requires React to be available");if(!spy)throw new Error("mobx-react requires mobx to be available");"function"==typeof unstable_batchedUpdates$1?_setReactionScheduler(unstable_batchedUpdates$1):"function"==typeof unstable_batchedUpdates&&_setReactionScheduler(unstable_batchedUpdates);var onError=function(e){return errorsReporter.on(e)};if("object"===("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":_typeof(__MOBX_DEVTOOLS_GLOBAL_HOOK__))){var mobx$1={spy:spy,extras:extras},mobxReact={renderReporter:renderReporter,componentByNodeRegistery:componentByNodeRegistery,trackComponents:trackComponents};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(mobxReact,mobx$1)}export{propTypes,propTypes as PropTypes,onError,observer,Observer,renderReporter,componentByNodeRegistery,trackComponents,useStaticRendering,Provider,inject};