!function(){"use strict";function t(){var t={top:0,left:0,width:window.innerWidth,right:window.innerWidth,height:window.innerHeight,bottom:window.innerHeight};return t.height?t:("CSS1Compat"===document.compatMode?(t.width=t.right=document.documentElement.clientWidth,t.height=t.bottom=document.documentElement.clientHeight):(t.width=t.right=document.body.clientWidth,t.height=t.bottom=document.body.clientHeight),t)}function e(t,e){return!(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)}function n(t){return angular.isArray(t)?2==t.length?t.concat(t):3==t.length?t.concat([t[1]]):t:[t,t,t,t]}function i(t,e){if(!e)return t;var n={top:o(e[0])?parseFloat(e[0])*t.height/100:e[0],right:o(e[1])?parseFloat(e[1])*t.width/100:e[1],bottom:o(e[2])?parseFloat(e[2])*t.height/100:e[2],left:o(e[3])?parseFloat(e[3])*t.width/100:e[3]};return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right,height:t.height+n.top+n.bottom,width:t.width+n.left+n.right}}function o(t){return angular.isString(t)&&t.indexOf("%")>0}function r(t){this.didSubscribeFunc=t}function u(){var t=arguments;return new r(function(e){for(var n=[],i=t.length-1;i>=0;i--)n.push(t[i].subscribe(function(){e.apply(null,arguments)}));e.$dispose=function(){for(var t=n.length-1;t>=0;t--)n[t]&&n[t]()}})}function c(t,e){return new r(function(n){var i=function(t){n(t)},o=angular.element(t);o[0].addEventListener(e,i,!0),n.$dispose=function(){o[0].removeEventListener(e,i,!0)}})}function l(t){return new r(function(e){setTimeout(function(){e(t)})})}var s=angular.module("angular-inview",[]).directive("inView",["$parse",function(o){return{restrict:"A",require:"?^^inViewContainer",link:function(r,u,s,f){var a={};s.inViewOptions&&(a=r.$eval(s.inViewOptions)),a.offset&&(a.offset=n(a.offset)),a.viewportOffset&&(a.viewportOffset=n(a.viewportOffset));var p=l({type:"initial"}).merge(c(window,"checkInView click ready wheel mousewheel DomMouseScroll MozMousePixelScroll resize scroll touchmove mouseup keydown"));f&&(p=p.merge(f.eventsSignal)),a.throttle&&(p=p.throttle(a.throttle));var h=p.map(function(n){var o;o=i(o=f?f.getViewportRect():t(),a.viewportOffset);var r=i(u[0].getBoundingClientRect(),a.offset),c={inView:!!(u[0].offsetWidth||u[0].offsetHeight||u[0].getClientRects().length)&&e(r,o),event:n,element:u,elementRect:r,viewportRect:o};return a.generateParts&&c.inView&&(c.parts={},c.parts.top=r.top>=o.top,c.parts.left=r.left>=o.left,c.parts.bottom=r.bottom<=o.bottom,c.parts.right=r.right<=o.right),c}).scan({},function(t,e){return a.generateDirection&&e.inView&&t.elementRect&&(e.direction={horizontal:e.elementRect.left-t.elementRect.left,vertical:e.elementRect.top-t.elementRect.top}),e.changed=e.inView!==t.inView||!angular.equals(e.parts,t.parts)||!angular.equals(e.direction,t.direction),e}).filter(function(t){return!(!t.changed||"initial"===t.event.type&&!t.inView)}),d=o(s.inView),g=h.subscribe(function(t){r.$applyAsync(function(){d(r,{$inview:t.inView,$inviewInfo:t})})});r.$on("$destroy",g)}}}]).directive("inViewContainer",function(){return{restrict:"A",controller:["$element",function(t){this.element=t,this.eventsSignal=c(t,"scroll"),this.getViewportRect=function(){return t[0].getBoundingClientRect()}}]}});r.prototype.subscribe=function(t){this.didSubscribeFunc(t);return function(){t.$dispose&&(t.$dispose(),t.$dispose=null)}},r.prototype.map=function(t){var e=this;return new r(function(n){n.$dispose=e.subscribe(function(e){n(t(e))})})},r.prototype.filter=function(t){var e=this;return new r(function(n){n.$dispose=e.subscribe(function(e){t(e)&&n(e)})})},r.prototype.scan=function(t,e){var n=this;return new r(function(i){var o=t;i.$dispose=n.subscribe(function(t){o=e(o,t),i(o)})})},r.prototype.merge=function(t){return u(this,t)},r.prototype.throttle=function(t){var e,n,i=this;return new r(function(o){var r=i.subscribe(function(){var i=+new Date,r=arguments;e&&i<e+t?(clearTimeout(n),n=setTimeout(function(){e=i,o.apply(null,r)},t)):(e=i,o.apply(null,r))});o.$dispose=function(){clearTimeout(n),r&&r()}})},"function"==typeof define&&define.amd?define(["angular"],s):"undefined"!=typeof module&&module&&module.exports&&(module.exports=s)}();