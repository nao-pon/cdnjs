!function(){"use strict";var t="angular-inview";function e(t){return angular.isArray(t)?2==t.length?t.concat(t):3==t.length?t.concat([t[1]]):t:[t,t,t,t]}function n(t,e){if(!e)return t;var n=i(e[0])?parseFloat(e[0])*t.height:e[0],o=i(e[1])?parseFloat(e[1])*t.width:e[1],r=i(e[2])?parseFloat(e[2])*t.height:e[2],u=i(e[3])?parseFloat(e[3])*t.width:e[3];return{top:t.top-n,left:t.left-u,bottom:t.bottom+r,right:t.right+o,height:t.height+n+r,width:t.width+u+o}}function i(t){return angular.isString(t)&&t.indexOf("%")>0}function o(t){this.didSubscribeFunc=t}function r(t,e){return new o(function(n){var i=function(t){n(t)},o=angular.element(t);o.on(e,i),n.$dispose=function(){o.off(e,i)}})}angular.module(t,[]).directive("inView",["$parse",function(t){return{restrict:"A",require:"?^^inViewContainer",link:function(i,u,c,l){var s={};c.inViewOptions&&(s=i.$eval(c.inViewOptions)),s.offset&&(s.offset=e(s.offset)),s.viewportOffset&&(s.viewportOffset=e(s.viewportOffset));var f,a=(f={type:"initial"},new o(function(t){setTimeout(function(){t(f)})})).merge(r(window,"checkInView click ready wheel mousewheel DomMouseScroll MozMousePixelScroll resize scroll touchmove mouseup keydown"));l&&(a=a.merge(l.eventsSignal)),s.throttle&&(a=a.throttle(s.throttle));var p=a.map(function(t){var e;e=n(e=l?l.getViewportRect():function(){var t={top:0,left:0,width:window.innerWidth,right:window.innerWidth,height:window.innerHeight,bottom:window.innerHeight};if(t.height)return t;"CSS1Compat"===document.compatMode?(t.width=t.right=document.documentElement.clientWidth,t.height=t.bottom=document.documentElement.clientHeight):(t.width=t.right=document.body.clientWidth,t.height=t.bottom=document.body.clientHeight);return t}(),s.viewportOffset);var i,o,r=n(u[0].getBoundingClientRect(),s.offset),c={inView:(i=r,o=e,!(o.left>i.right||o.right<i.left||o.top>i.bottom||o.bottom<i.top)),event:t,element:u,elementRect:r,viewportRect:e};return s.generateParts&&c.inView&&(c.parts={},c.parts.top=r.top>=e.top,c.parts.left=r.left>=e.left,c.parts.bottom=r.bottom<=e.bottom,c.parts.right=r.right<=e.right),c}).scan({},function(t,e){return s.generateDirection&&e.inView&&t.elementRect&&(e.direction={horizontal:e.elementRect.left-t.elementRect.left,vertical:e.elementRect.top-t.elementRect.top}),e.changed=e.inView!==t.inView||!angular.equals(e.parts,t.parts)||!angular.equals(e.direction,t.direction),e}).filter(function(t){return!!t.changed&&!("initial"===t.event.type&&!t.inView)}),h=t(c.inView),d=p.subscribe(function(t){i.$applyAsync(function(){h(i,{$inview:t.inView,$inviewInfo:t})})});i.$on("$destroy",d)}}}]).directive("inViewContainer",function(){return{restrict:"A",controller:["$element",function(t){this.element=t,this.eventsSignal=r(t,"scroll"),this.getViewportRect=function(){return t[0].getBoundingClientRect()}}]}}),o.prototype.subscribe=function(t){this.didSubscribeFunc(t);return function(){t.$dispose&&(t.$dispose(),t.$dispose=null)}},o.prototype.map=function(t){var e=this;return new o(function(n){n.$dispose=e.subscribe(function(e){n(t(e))})})},o.prototype.filter=function(t){var e=this;return new o(function(n){n.$dispose=e.subscribe(function(e){t(e)&&n(e)})})},o.prototype.scan=function(t,e){var n=this;return new o(function(i){var o=t;i.$dispose=n.subscribe(function(t){o=e(o,t),i(o)})})},o.prototype.merge=function(t){return function(){var t=arguments;return new o(function(e){for(var n=[],i=t.length-1;i>=0;i--)n.push(t[i].subscribe(function(){e.apply(null,arguments)}));e.$dispose=function(){for(var t=n.length-1;t>=0;t--)n[t]&&n[t]()}})}(this,t)},o.prototype.throttle=function(t){var e,n,i=this;return new o(function(o){var r=i.subscribe(function(){var i=+new Date,r=arguments;e&&i<e+t?(clearTimeout(n),n=setTimeout(function(){e=i,o.apply(null,r)},t)):(e=i,o.apply(null,r))});o.$dispose=function(){clearTimeout(n),r&&r()}})},"function"==typeof define&&define.amd?define(["angular"],t):"undefined"!=typeof module&&module&&module.exports&&(module.exports=t)}();