{"version":3,"file":"Tween.min.js","sources":["../src/dist/toNumber.js","../src/dist/Event.js","../src/dist/core.js","../src/dist/Easing.js","../src/dist/Interpolation.js","../src/dist/SubTween.js","../src/dist/Store.js","../src/dist/Tween.js","../src/dist/Plugins.js","../src/dist/Composite.js","../src/dist/Timeline.js","../src/dist/Decorators.js"],"sourcesContent":["export default function toNumber (val) {\r\n  let floatedVal = parseFloat(val)\r\n  return typeof floatedVal === 'number' && !isNaN(floatedVal) ? floatedVal : val\r\n}\r\n","const bind = (fn, ctx) => {\r\n  return function () {\r\n    return fn.apply(ctx, arguments)\r\n  }\r\n}\r\n\r\nexport default class EventClass {\r\n  constructor () {\r\n    this._events = {}\r\n    this._bind = this\r\n    this.on = bind(this.on, this)\r\n    this.once = bind(this.once, this)\r\n    this.off = bind(this.off, this)\r\n    this.emit = bind(this.emit, this)\r\n  }\r\n\r\n  bind (scope) {\r\n    this._bind = scope\r\n    return this\r\n  }\r\n\r\n  on (event, callback) {\r\n    if (!this._events[event]) {\r\n      this._events[event] = []\r\n    }\r\n\r\n    this._events[event].push(callback)\r\n    return this\r\n  }\r\n\r\n  once (event, callback) {\r\n    if (!this._events[event]) {\r\n      this._events[event] = []\r\n    }\r\n\r\n    let {_events, _bind} = this\r\n    let spliceIndex = _events[event].length\r\n    this._events[event].push((...args) => {\r\n      callback.apply(_bind, args)\r\n      _events[event].splice(spliceIndex, 1)\r\n    })\r\n    return this\r\n  }\r\n\r\n  off (event, callback) {\r\n    let {_events} = this\r\n\r\n    if (event === undefined || !_events[event]) {\r\n      return this\r\n    }\r\n\r\n    if (callback) {\r\n      this._events[event] = this._events[event].filter(cb => cb !== callback)\r\n    } else {\r\n      this._events[event].length = 0\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  emit (event, arg1, arg2, arg3, arg4) {\r\n    let {_events, _bind} = this\r\n\r\n    if (event === undefined || !_events[event]) {\r\n      return this\r\n    }\r\n\r\n    let _event = _events[event]\r\n\r\n    for (let i = 0, length = _event.length; i < length; i++) {\n      _event[i].call(_bind, arg1, arg2, arg3, arg4)\n    }\r\n  }\r\n}\r\n","/* global global, window, Object, document, process, requestAnimationFrame, cancelAnimationFrame, setTimeout, clearTimeout */\nimport EventClass from './Event'\n\nlet _tweens = {}\nlet isStarted = false\nlet _autoPlay = false\nlet _tick\nlet {emit, on, once, off} = new EventClass()\nlet root = typeof (window) !== 'undefined' ? window : typeof (global) !== 'undefined' ? global : {}\nlet _nextId = 0\n\nlet _ticker = fn => typeof (requestAnimationFrame) !== 'undefined' ? requestAnimationFrame(fn) : setTimeout(fn, 16.6)\nlet _stopTicker = fn => typeof (cancelAnimationFrame) !== 'undefined' ? cancelAnimationFrame(fn) : clearTimeout(fn)\n\nlet setProp = (o, p, param) => Object.defineProperty(o, p, param)\nsetProp(_tweens, 'length', {enumerable: false, writable: true, value: 0})\n\nconst add = tween => {\n  let {id} = tween\n  _tweens[id] = tween\n  _tweens.length++\n\n  if (_autoPlay && !isStarted) {\n    update()\n    isStarted = true\n    emit('start')\n  }\n\n  emit('add', tween, _tweens)\n}\n\nconst nextId = () => {\n  let id = _nextId\n  _nextId++\n  return id\n}\n\nconst getAll = () => {\n  return _tweens\n}\n\nconst autoPlay = (state) => {\n  _autoPlay = state\n}\n\nconst removeAll = () => {\n  for (let id in _tweens) {\n    _tweens[+id] = null\n    delete _tweens[+id]\n  }\n  _tweens.length = 0\n}\n\nconst get = tween => {\n  for (let searchTween in _tweens) {\n    if (tween.id === +searchTween) {\n      return _tweens[+searchTween]\n    }\n  }\n\n  return null\n}\n\nconst has = tween => {\n  return get(tween) !== null\n}\n\nconst remove = tween => {\n  for (let searchTween in _tweens) {\n    if (tween.id === +searchTween) {\n      delete _tweens[+searchTween]\n      _tweens.length--\n    }\n  }\n}\n\nlet now = (function () {\n  if (typeof (process) !== 'undefined' && process.hrtime !== undefined) {\n    return function () {\n      let time = process.hrtime()\n\n      // Convert [seconds, nanoseconds] to milliseconds.\n      return time[0] * 1000 + time[1] / 1000000\n    }\n  // In a browser, use window.performance.now if it is available.\n  } else if (root.performance !== undefined &&\n   root.performance.now !== undefined) {\n    // This must be bound, because directly assigning this function\n    // leads to an invocation exception in Chrome.\n    return root.performance.now.bind(root.performance)\n  // Use Date.now if it is available.\n  } else {\n    let offset = root.performance && root.performance.timing && root.performance.timing.navigationStart ? root.performance.timing.navigationStart : Date.now()\n    return function () {\n      return Date.now() - offset\n    }\n  }\n}())\n\nconst update = (time, preserve) => {\n  time = time !== undefined ? time : now()\n\n  if (_autoPlay) {\n    _tick = _ticker(update)\n  }\n\n  emit('update', time, _tweens)\n\n  if (_tweens.length === 0) {\n    isStarted = false\n    _stopTicker(_tick)\n    emit('stop', time)\n    return false\n  }\n\n  for (let i in _tweens) {\n    if (_tweens[i].update(time) || preserve) {\n      i++\n    } else {\n      delete _tweens[+i]\n      _tweens.length--\n    }\n  }\n\n  return true\n}\n\n// Normalise time when visiblity is changed (if available) ...\nif (root.document) {\n  let doc = root.document\n  let timeDiff = 0\n  let timePause = 0\n  doc.addEventListener('visibilitychange', () => {\n    if (_tweens.length === 0) {\n      return false\n    }\n\n    if (document.hidden) {\n      timePause = now()\n    } else {\n      timeDiff = now() - timePause\n\n      for (let tween in _tweens) {\n        _tweens[tween]._startTime += timeDiff\n      }\n    }\n\n    return true\n  })\n}\n\nexport { get, has, nextId, getAll, removeAll, remove, add, now, update, autoPlay, on, once, off, emit }\n","const Easing = {\n\n  Linear: {\n\n    None (k) {\n      return k\n    }\n\n  },\n\n  Quadratic: {\n\n    In (k) {\n      return k * k\n    },\n\n    Out (k) {\n      return k * (2 - k)\n    },\n\n    InOut (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k\n      }\n\n      return -0.5 * (--k * (k - 2) - 1)\n    }\n\n  },\n\n  Cubic: {\n\n    In (k) {\n      return k * k * k\n    },\n\n    Out (k) {\n      return --k * k * k + 1\n    },\n\n    InOut (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k\n      }\n\n      return 0.5 * ((k -= 2) * k * k + 2)\n    }\n\n  },\n\n  Quartic: {\n\n    In (k) {\n      return k * k * k * k\n    },\n\n    Out (k) {\n      return 1 - (--k * k * k * k)\n    },\n\n    InOut (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k\n      }\n\n      return -0.5 * ((k -= 2) * k * k * k - 2)\n    }\n\n  },\n\n  Quintic: {\n\n    In (k) {\n      return k * k * k * k * k\n    },\n\n    Out (k) {\n      return --k * k * k * k * k + 1\n    },\n\n    InOut (k) {\n      if ((k *= 2) < 1) {\n        return 0.5 * k * k * k * k * k\n      }\n\n      return 0.5 * ((k -= 2) * k * k * k * k + 2)\n    }\n\n  },\n\n  Sinusoidal: {\n\n    In (k) {\n      return 1 - Math.cos(k * Math.PI / 2)\n    },\n\n    Out (k) {\n      return Math.sin(k * Math.PI / 2)\n    },\n\n    InOut (k) {\n      return 0.5 * (1 - Math.cos(Math.PI * k))\n    }\n\n  },\n\n  Exponential: {\n\n    In (k) {\n      return k === 0 ? 0 : Math.pow(1024, k - 1)\n    },\n\n    Out (k) {\n      return k === 1 ? 1 : 1 - Math.pow(2, -10 * k)\n    },\n\n    InOut (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      if ((k *= 2) < 1) {\n        return 0.5 * Math.pow(1024, k - 1)\n      }\n\n      return 0.5 * (-Math.pow(2, -10 * (k - 1)) + 2)\n    }\n\n  },\n\n  Circular: {\n\n    In (k) {\n      return 1 - Math.sqrt(1 - k * k)\n    },\n\n    Out (k) {\n      return Math.sqrt(1 - (--k * k))\n    },\n\n    InOut (k) {\n      if ((k *= 2) < 1) {\n        return -0.5 * (Math.sqrt(1 - k * k) - 1)\n      }\n\n      return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1)\n    }\n\n  },\n\n  Elastic: {\n\n    In (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      return -Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI)\n    },\n\n    Out (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      return Math.pow(2, -10 * k) * Math.sin((k - 0.1) * 5 * Math.PI) + 1\n    },\n\n    InOut (k) {\n      if (k === 0) {\n        return 0\n      }\n\n      if (k === 1) {\n        return 1\n      }\n\n      k *= 2\n\n      if (k < 1) {\n        return -0.5 * Math.pow(2, 10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI)\n      }\n\n      return 0.5 * Math.pow(2, -10 * (k - 1)) * Math.sin((k - 1.1) * 5 * Math.PI) + 1\n    }\n\n  },\n\n  Back: {\n\n    In (k) {\n      let s = 1.70158\n\n      return k * k * ((s + 1) * k - s)\n    },\n\n    Out (k) {\n      let s = 1.70158\n\n      return --k * k * ((s + 1) * k + s) + 1\n    },\n\n    InOut (k) {\n      let s = 1.70158 * 1.525\n\n      if ((k *= 2) < 1) {\n        return 0.5 * (k * k * ((s + 1) * k - s))\n      }\n\n      return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2)\n    }\n\n  },\n\n  Bounce: {\n\n    In (k) {\n      return 1 - Easing.Bounce.Out(1 - k)\n    },\n\n    Out (k) {\n      if (k < (1 / 2.75)) {\n        return 7.5625 * k * k\n      } else if (k < (2 / 2.75)) {\n        return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75\n      } else if (k < (2.5 / 2.75)) {\n        return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375\n      } else {\n        return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375\n      }\n    },\n\n    InOut (k) {\n      if (k < 0.5) {\n        return Easing.Bounce.In(k * 2) * 0.5\n      }\n\n      return Easing.Bounce.Out(k * 2 - 1) * 0.5 + 0.5\n    }\n\n  }\n\n}\n\nexport default Easing\n","const Interpolation = {\n\n  Linear (v, k) {\n    let m = v.length - 1\n    let f = m * k\n    let i = Math.floor(f)\n    let fn = Interpolation.Utils.Linear\n\n    if (k < 0) {\n      return fn(v[0], v[1], f)\n    }\n\n    if (k > 1) {\n      return fn(v[m], v[m - 1], m - f)\n    }\n\n    return fn(v[i], v[i + 1 > m ? m : i + 1], f - i)\n  },\n\n  Bezier (v, k) {\n    let b = 0\n    let n = v.length - 1\n    let pw = Math.pow\n    let bn = Interpolation.Utils.Bernstein\n\n    for (let i = 0; i <= n; i++) {\n      b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i)\n    }\n\n    return b\n  },\n\n  CatmullRom (v, k) {\n    let m = v.length - 1\n    let f = m * k\n    let i = Math.floor(f)\n    let fn = Interpolation.Utils.CatmullRom\n\n    if (v[0] === v[m]) {\n      if (k < 0) {\n        i = Math.floor(f = m * (1 + k))\n      }\n\n      return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i)\n    } else {\n      if (k < 0) {\n        return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0])\n      }\n\n      if (k > 1) {\n        return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m])\n      }\n\n      return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i)\n    }\n  },\n\n  Utils: {\n\n    Linear (p0, p1, t) {\n      return (p1 - p0) * t + p0\n    },\n\n    Bernstein (n, i) {\n      let fc = Interpolation.Utils.Factorial\n\n      return fc(n) / fc(i) / fc(n - i)\n    },\n\n    Factorial: (function () {\n      let a = [1]\n\n      return n => {\n        let s = 1\n\n        if (a[n]) {\n          return a[n]\n        }\n\n        for (let i = n; i > 1; i--) {\n          s *= i\n        }\n\n        a[n] = s\n        return s\n      }\n    })(),\n\n    CatmullRom (p0, p1, p2, p3, t) {\n      let v0 = (p2 - p0) * 0.5\n      let v1 = (p3 - p1) * 0.5\n      let t2 = t * t\n      let t3 = t * t2\n\n      return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1\n    }\n\n  }\n\n}\n\nexport default Interpolation\n","import toNumber from './toNumber'\r\n\r\nlet colorMatch = /rgb|hsl|hsv/g\r\nlet isIncrementReqForColor = /ahsv|ahsl|argb/g\r\n\r\n// Credits:\r\n// @jkroso for string parse library\r\n// Optimized, Extended by @dalisoft\r\nconst numRegExp =\r\n  /\\s+|([A-Za-z?().,{}:\"\"[\\]#]+)|([-+/*%]+=)?([-+*/%]+)?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g\r\nlet hexColor = /^#([0-9a-f]{6}|[0-9a-f]{3})$/i\r\nlet hexReplace = (all, hex) => {\r\n  let r\r\n  let g\r\n  let b\r\n  if (hex.length === 3) {\r\n    r = parseInt(hex[0] + hex[0], 16)\r\n    g = parseInt(hex[1] + hex[1], 16)\r\n    b = parseInt(hex[2] + hex[2], 16)\r\n  } else if (hex.length === 6) {\r\n    r = parseInt(hex.substr(0, 2), 16)\r\n    g = parseInt(hex.substr(2, 2), 16)\r\n    b = parseInt(hex.substr(4, 6), 16)\r\n  }\r\n\r\n  return `rgb(${r},${g},${b}`\r\n}\r\n\r\nconst SubTween = (start, end, roundv = 10000) => {\r\n  if (Array.isArray(start)) {\r\n    let isColorPropsExist = null\r\n    let startIndex = null\r\n    end = end.map((v, i) => colorMatch.test(v) ? ((isColorPropsExist = v), (startIndex = i), null) : v === start[i] ? null : typeof v === 'number' ? (v - start[i]) : SubTween(start[i], v))\r\n    let endIndex = startIndex !== null ? startIndex + 6 : null\r\n    if (isColorPropsExist && isIncrementReqForColor.test(isColorPropsExist)) {\r\n      startIndex++\r\n      endIndex++\r\n    }\r\n\r\n    let map = [...start]\r\n    return (t) => {\r\n      for (let i = 0, v, length = end.length; i < length; i++) {\r\n        v = end[i]\r\n        if (typeof v === 'function') {\r\n          map[i] = v(t)\r\n        } else if (typeof v === 'number') {\r\n          map[i] = (((start[i] + v * t) * roundv) | 0) / roundv\r\n\r\n          if (startIndex !== null && i > startIndex && i < endIndex) {\r\n            map[i] = map[i] | 0\r\n          }\n        }\r\n      }\r\n\r\n      return map\r\n    }\r\n  } else if (typeof start === 'object') {\r\n    for (let property in end) {\r\n      if (end[property] === start[property]) {\r\n        end[property] = null\r\n      } else if (typeof start[property] === 'number') {\r\n        end[property] -= start[property]\r\n      } else if (typeof end[property] === 'object' || typeof [end] === 'string') {\r\n        end[property] = SubTween(start[property], end[property])\r\n      }\r\n    }\r\n\r\n    let map = {...start}\r\n    return (t) => {\r\n      for (let property in end) {\r\n        let to = end[property]\r\n        if (typeof to === 'function') {\r\n          map[property] = to(t)\r\n        } else if (typeof to === 'number') {\r\n          map[property] = (((start[property] + to * t) * roundv) | 0) / roundv\r\n        }\r\n      }\r\n\r\n      return map\r\n    }\r\n  } else if (typeof start === 'number') {\r\n    end -= start\r\n    let isSame = start === end\r\n    return (t) => {\r\n      return isSame ? end : (((start + end * t) * roundv) | 0) / roundv\r\n    }\r\n  } else if (typeof start === 'string') {\r\n    let _startMap = start.replace(hexColor, hexReplace).match(numRegExp).map(toNumber)\r\n    let _endMap = end.replace(hexColor, hexReplace).match(numRegExp).map(toNumber)\r\n    let _tween = SubTween(_startMap, _endMap)\r\n    return (t) => {\r\n      let _t = _tween(t)\r\n      let i = 0\r\n      let s = ''\r\n      while (i < _t.length) {\r\n        s += _t[i]\r\n        i++\r\n      }\r\n\r\n      return s\r\n    }\r\n  } else if (typeof end === 'function') {\r\n    return end\r\n  } else {\r\n    let isSame = start === end\r\n    return (t) => isSame ? start : t >= 0.5 ? end : start\r\n  }\r\n}\r\n\r\nexport default SubTween\r\n","const Store = {\r\n  add: function (tween) {\r\n    if (Store[tween] && JSON.stringify(tween) && JSON.stringify(Store[tween])) {\r\n      return Store[tween]\r\n    }\r\n\r\n    Store[tween] = tween\r\n    return tween\r\n  }\r\n}\r\n\r\nexport default Store\r\n","import {\n  add,\n  remove,\n  now,\n  nextId\n}\n  from './core'\nimport Easing from './Easing'\nimport Interpolation from './Interpolation'\nimport SubTween from './SubTween'\nimport Store from './Store'\nimport EventClass from './Event'\n\nconst defaultEasing = Easing.Linear.None\n\n// Events list\nconst EVENT_UPDATE = 'update'\nconst EVENT_COMPLETE = 'complete'\nconst EVENT_START = 'start'\nconst EVENT_REPEAT = 'repeat'\nconst EVENT_REVERSE = 'reverse'\nconst EVENT_PAUSE = 'pause'\nconst EVENT_PLAY = 'play'\nconst EVENT_RS = 'restart'\nconst EVENT_STOP = 'stop'\nconst EVENT_SEEK = 'seek'\n\nclass Tween extends EventClass {\n  constructor (object = {}, instate) {\n    super()\n\n    this.isJoinToString = typeof object === 'string'\n    this.object = object\n    this._valuesStart = Tween.createEmptyConst(object)\n    this._valuesEnd = Tween.createEmptyConst(object)\n\n    this._duration = 1000\n    this._easingFunction = defaultEasing\n    this._interpolationFunction = Interpolation.None\n\n    this._startTime = 0\n    this._delayTime = 0\n    this._repeat = 0\n    this._r = 0\n    this._isPlaying = false\n    this._yoyo = false\n    this._reversed = false\n\n    this._onStartCallbackFired = false\n    this._pausedTime = null\n    this.id = nextId()\n\n    if (instate && instate.to) {\n      return new Tween(object)\n        .to(instate.to, instate)\n    }\n\n    return this\n  }\n\n  static createEmptyConst (oldObject) {\n    return typeof (oldObject) === 'number' ? 0 : Array.isArray(oldObject) ? [] : typeof (oldObject) === 'object' ? {}\n      : ''\n  }\n\n  static checkValidness (valid) {\n    return valid !== undefined && valid !== null && valid !== '' && ((typeof valid === 'number' && !isNaN(valid)) || typeof valid !== 'number') && valid !== Infinity\n  }\n\n  isPlaying () {\n    return this._isPlaying\n  }\n\n  isStarted () {\n    return this._onStartCallbackFired\n  }\n\n  reverse () {\n    const {\n      _reversed\n    } = this\n\n    this._reversed = !_reversed\n\n    return this\n  }\n\n  reversed () {\n    return this._reversed\n  }\n\n  useActiveMode () {\n    this.object = Store.add(this.object)\n    return this\n  }\n\n  pause () {\n    if (!this._isPlaying) {\n      return this\n    }\n\n    this._isPlaying = false\n\n    remove(this)\n    this._pausedTime = now()\n\n    return this.emit(EVENT_PAUSE, this.object)\n  }\n\n  play () {\n    if (this._isPlaying) {\n      return this\n    }\n\n    this._isPlaying = true\n\n    this._startTime += now() - this._pausedTime\n    add(this)\n    this._pausedTime = now()\n\n    return this.emit(EVENT_PLAY, this.object)\n  }\n\n  restart (noDelay) {\n    this._repeat = this._r\n    this._startTime = now() + (noDelay ? 0 : this._delayTime)\n\n    if (!this._isPlaying) {\n      add(this)\n    }\n\n    return this.emit(EVENT_RS, this._object)\n  }\n\n  seek (time, keepPlaying) {\n    this._startTime = now() + Math.max(0, Math.min(\n      time, this._duration))\n\n    this.emit(EVENT_SEEK, time, this._object)\n\n    return keepPlaying ? this : this.pause()\n  }\n\n  duration (amount) {\n    this._duration = typeof (amount) === 'function' ? amount(this._duration) : amount\n\n    return this\n  }\n\n  to (properties = {}, duration = 1000) {\n    if (typeof properties === 'object') {\n      this._valuesEnd = properties\n    }\n\n    if (typeof duration === 'number') {\n      this._duration = typeof (duration) === 'function' ? duration(this._duration) : duration\n    } else if (typeof duration === 'object') {\n      for (let prop in duration) {\n        if (this[prop]) {\n          this[prop](...(Array.isArray(duration) ? duration : [duration]))\n        }\n      }\n    }\n\n    return this\n  }\n\n  render () {\n    if (this._rendered) {\n      return this\n    }\n\n    let {\n      _valuesEnd,\n      object\n    } = this\n\n    for (let property in _valuesEnd) {\n      if (typeof _valuesEnd[property] === 'object' && _valuesEnd[property]) {\n        this._valuesEnd[property] = SubTween(object[property], _valuesEnd[property])\n        this.object[property] = this._valuesEnd[property](0)\n      } else if (typeof _valuesEnd[property] === 'string' && typeof object[property] === 'string') {\n        this._valuesEnd[property] = SubTween(object[property], _valuesEnd[property])\n        this.object[property] = this._valuesEnd[property](0)\n      }\n\n      // If `to()` specifies a property that doesn't exist in the source object,\n      // we should not set that property in the object\n      if (Tween.checkValidness(object[property]) === false) {\n        continue\n      }\n\n      // If duplicate or non-tweening numerics matched,\n      // we should skip from adding to _valuesStart\n      if (object[property] === _valuesEnd[property]) {\n        continue\n      }\n\n      this._valuesStart[property] = object[property]\n    }\n\n    return this\n  }\n\n  start (time) {\n    this._startTime = time !== undefined ? time : now()\n    this._startTime += this._delayTime\n\n    this.render()\n    this._rendered = true\n\n    add(this)\n\n    this.emit(EVENT_START, this.object)\n\n    this._isPlaying = true\n\n    return this\n  }\n\n  stop () {\n    let {\n      _isPlaying,\n      object\n    } = this\n\n    if (!_isPlaying) {\n      return this\n    }\n\n    remove(this)\n    this._isPlaying = false\n\n    return this.emit(EVENT_STOP, object)\n  }\n\n  end () {\n    const {\n      _startTime,\n      _duration\n    } = this\n\n    return this.update(_startTime + _duration)\n  }\n\n  delay (amount) {\n    this._delayTime = typeof (amount) === 'function' ? amount(this._delayTime) : amount\n    this._startTime += this._delayTime\n\n    return this\n  }\n\n  repeat (amount) {\n    this._repeat = typeof (amount) === 'function' ? amount(this._repeat) : amount\n    this._r = this._repeat\n\n    return this\n  }\n\n  repeatDelay (amount) {\n    this._repeatDelayTime = typeof (amount) === 'function' ? amount(this._repeatDelayTime) : amount\n\n    return this\n  }\n\n  reverseDelay (amount) {\n    this._reverseDelayTime = typeof (amount) === 'function' ? amount(this._reverseDelayTime) : amount\n\n    return this\n  }\n\n  yoyo (state) {\n    this._yoyo = typeof (state) === 'function' ? state(this._yoyo) : state\n\n    return this\n  }\n\n  easing (fn) {\n    this._easingFunction = fn\n\n    return this\n  }\n\n  interpolation (fn) {\n    this._interpolationFunction = fn\n\n    return this\n  }\n\n  get (time) {\n    this.update(time)\n    return this.object\n  }\n\n  update (time) {\n    let {\n      _onStartCallbackFired,\n      _easingFunction,\n      _interpolationFunction,\n      _repeat,\n      _repeatDelayTime,\n      _reverseDelayTime,\n      _yoyo,\n      _reversed,\n      _startTime,\n      _duration,\n      _valuesStart,\n      _valuesEnd,\n      object\n    } = this\n\n    let property\n    let elapsed\n    let value\n\n    time = time !== undefined ? time : now()\n\n    if (time < _startTime) {\n      return true\n    }\n\n    if (!_onStartCallbackFired) {\n      if (!this._rendered) {\n        this.render()\n\n        this.emit(EVENT_START, object)\n\n        this._rendered = true\n      }\n\n      this._onStartCallbackFired = true\n    }\n\n    elapsed = (time - _startTime) / _duration\n    elapsed = elapsed > 1 ? 1 : elapsed\n    elapsed = _reversed ? 1 - elapsed : elapsed\r\n\r\n    value = typeof _easingFunction === 'function' ? _easingFunction(elapsed) : defaultEasing(elapsed)\n\n    for (property in _valuesEnd) {\n      // Don't update properties that do not exist in the source object\n      if (_valuesStart[property] === undefined) {\n        continue\n      }\n\n      let start = _valuesStart[property]\n      let end = _valuesEnd[property]\n      value = _easingFunction[property] ? _easingFunction[property](elapsed) : value\n\n      if (typeof end === 'function') {\n        object[property] = end(value)\n      } else if (Array.isArray(end)) {\n        object[property] = _interpolationFunction(end, value)\n      } else if (typeof (end) === 'string') {\n        if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n          end = start + parseFloat(end)\n        } else {\n          end = parseFloat(end)\n        }\n\n        // Protect against non numeric properties.\n        if (typeof (end) === 'number') {\n          object[property] = start + (end - start) * value\n        }\n      } else if (typeof (start) === 'number') {\n        object[property] = start + (end - start) * value\n      }\n    }\r\n\r\n    this.emit(EVENT_UPDATE, object, value, elapsed)\n\n    this.object = object\n\n    if (elapsed === 1 || (_reversed && elapsed === 0)) {\n      if (_repeat) {\n        if (isFinite(_repeat)) {\n          this._repeat--\n        }\n\n        for (property in _valuesEnd) {\n          if (typeof (_valuesEnd[property]) === 'string' && typeof (_valuesStart[property]) === 'number') {\n            this._valuesStart[property] = _valuesStart[property] + parseFloat(_valuesEnd[property])\n          }\n        }\n\n        // Reassign starting values, restart by making startTime = now\n        this.emit(_reversed ? EVENT_REVERSE : EVENT_REPEAT, object)\n\n        if (_yoyo) {\n          this._reversed = !_reversed\n        }\n\n        if (!_reversed && _repeatDelayTime) {\n          this._startTime += _duration + _repeatDelayTime\n        } else if (_reversed && _reverseDelayTime) {\n          this._startTime += _duration + _reverseDelayTime\n        } else {\n          this._startTime += _duration\n        }\n\n        return true\n      } else {\n        this.emit(EVENT_COMPLETE, object)\n        this._repeat = this._r\n\n        return false\n      }\n    }\n\n    return true\n  }\n}\n\nexport default Tween\n","const cache = {\r\n  filter: {\r\n    grayscale: 1,\r\n    brightness: 1,\r\n    sepia: 1,\r\n    invert: 1,\r\n    saturate: 1,\r\n    contrast: 1,\r\n    blur: 1,\r\n    hueRotate: 1,\r\n    dropShadow: 1\r\n  },\r\n  transform: {\r\n    translate: 1,\r\n    translateX: 1,\r\n    translateY: 1,\r\n    translateZ: 1,\r\n    rotate: 1,\r\n    rotateX: 1,\r\n    rotateY: 1,\r\n    rotateZ: 1,\r\n    scale: 1,\r\n    scaleX: 1,\r\n    scaleY: 1,\r\n    scaleZ: 1,\r\n    skew: 1,\r\n    skewX: 1,\r\n    skewY: 1,\r\n    x: 1,\r\n    y: 1,\r\n    z: 1\r\n  },\r\n  scroll: {\r\n    scrollTop: 1,\r\n    scrollLeft: 1\r\n  }\r\n}\r\n\r\nexport { cache as PropertyTypes }\r\n\r\nexport default class Plugins {\r\n  static Attr () {\r\n    let layer = this.domNode\r\n    return {\r\n      update (RenderObject) {\r\n        for (let p in RenderObject) {\r\n          if (cache.transform[p] || cache.filter[p] || cache.scroll[p]) continue\r\n          layer.setAttribute(p, RenderObject[p])\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  static Style () {\r\n    let layer = this.domNode\r\n    let style = layer.style\r\n    return {\r\n      update (RenderObject) {\r\n        for (let p in RenderObject) {\r\n          if (cache.transform[p] || cache.filter[p]) continue\r\n          style[p] = RenderObject[p]\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  static Transform () {\r\n    let layer = this.domNode\r\n    let style = layer.style\r\n    return {\r\n      update (RenderObject) {\r\n        let transform = ''\r\n        for (let p in RenderObject) {\r\n          if (!cache.transform[p]) continue\r\n          if (p === 'x' || p === 'y' || p === 'z') {\r\n            transform += ' translate3d( ' + (RenderObject.x || '0px') + ', ' + (RenderObject.y || '0px') + ', ' + (RenderObject.z || '0px') + ')'\r\n          } else if (cache.transform[p]) {\r\n            transform += ` ${p}( ${RenderObject[p]})`\r\n          }\r\n        }\r\n\r\n        if (transform) {\r\n          style.transform = transform\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  static SVGTransform (xPos, yPos) {\r\n    let layer = this.domNode\r\n    let bbox = {}\r\n    let self = null\r\n    let attrName = 'transform'\r\n    let rotate = 'rotate'\r\n    let x = 'x'\r\n    let y = 'y'\r\n    return (self = {\r\n      update (RenderObject) {\r\n        let transform = ''\r\n        for (let p in RenderObject) {\r\n          if (!cache[attrName][p]) continue\r\n          if (bbox.x === undefined || bbox.y === undefined) {\r\n            self.setOrigin(xPos, yPos)\r\n            continue\r\n          }\r\n\r\n          if (p === rotate) {\r\n            transform += ` rotate(${RenderObject[p]} ${bbox.x} ${bbox.y})`\r\n          } else if (p === x || p === y) {\r\n            transform += ` translate(${RenderObject.x || 0}, ${RenderObject.y || 0})`\r\n          } else {\r\n            transform += ` ${p}(${RenderObject[p]})`\r\n          }\r\n        }\r\n\r\n        if (transform) {\r\n          layer.setAttribute(attrName, transform)\r\n        }\r\n\r\n        return self\r\n      },\r\n\r\n      init () {\n        return self.setOrigin(xPos, yPos)\n      },\r\n\r\n      setOrigin (x, y) {\n        let {width, height, left, top} = layer.getBoundingClientRect()\r\n\r\n        x = typeof (x) === 'number' ? left + x : typeof x === 'string' && x.indexOf('%') > -1 ? left + (width * (parseFloat(x) / 100)) : left + (width / 2)\r\n        y = typeof (y) === 'number' ? left + y : typeof y === 'string' && y.indexOf('%') > -1 ? top + (height * (parseFloat(y) / 100)) : top + (height / 2)\r\n\r\n        if (bbox.x !== undefined && bbox.y !== undefined) {\n          let diffX = bbox.x - x\r\n          let diffY = bbox.y - y\r\n\r\n          x += x - diffX\r\n          y += y - diffY\n        }\r\n\r\n        bbox.x = x\r\n        bbox.y = y\r\n\r\n        return self\r\n      }\r\n    })\r\n  }\r\n\r\n  static Filter () {\r\n    let layer = this.domNode\r\n    let style = layer.style\r\n    return {\r\n      update (RenderObject) {\r\n        let filter = ''\r\n        for (let p in RenderObject) {\r\n          if (!cache.filter[p]) continue\r\n          if (cache.filter[p]) {\r\n            filter += ` ${p}( ${RenderObject[p]})`\r\n          }\r\n        }\r\n\r\n        if (filter) {\r\n          style.webkitFilter = style.filter = filter\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  static Scroll () {\r\n    let layer = this.domNode\r\n    return {\r\n      update: (RenderObject) => {\r\n        for (let p in RenderObject) {\r\n          if (!cache.scroll[p]) continue\r\n          layer[p] = RenderObject[p]\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import Plugins from './Plugins'\r\n\r\nexport default class Composite {\r\n  constructor (domNode) {\n    this.domNode = domNode\r\n    this.plugins = {}\r\n\r\n    this.map = this.map.bind(this)\r\n    this.render = this.render.bind(this)\r\n    this.init = this.init.bind(this)\r\n    this.fetch = this.fetch.bind(this)\r\n\r\n    return this\r\n  }\r\n\r\n  map (type, ...args) {\n    let {plugins} = this\r\n\r\n    for (let p in plugins) {\n      let plugin = plugins[p]\r\n\r\n      plugin && plugin[type] && plugin[type].apply(this, args)\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  render (object, value, elapsed) {\n    return this.map('update', object, value, elapsed)\n  }\r\n\r\n  init (object) {\n    return this.map('init', object)\n  }\r\n\r\n  fetch (object) {\n    return this.map('fetch', object)\n  }\r\n\r\n  applyPlugin (name, ...args) {\r\n    if (Plugins[name] !== undefined) {\r\n      this.plugins[name] = Plugins[name].apply(this, args)\r\n      return this.plugins[name]\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  appendTo (node) {\r\n    node.appendChild(this.domNode)\r\n    return this\r\n  }\r\n}\r\n","import Tween from './Tween'\r\nimport { add, now, nextId } from './core'\r\n\r\nclass Timeline extends Tween {\r\n  constructor (params) {\r\n    super()\r\n    this._totalDuration = 0\r\n    this._startTime = now()\r\n    this._tweens = {}\r\n    this._elapsed = 0\r\n    this._id = nextId()\r\n    this._labels = {}\r\n    this._defaultParams = params\r\n\r\n    return this\r\n  }\r\n\r\n  setLabel (name, value) {\r\n    this._labels[name] = this.parsePosition(0, value, 0)\r\n    return this\r\n  }\r\n\r\n  parsePosition (startTime, input, total) {\r\n    let position = startTime + total\r\n\r\n    if (typeof input === 'string') {\n      for (let label in this._labels) {\n        if (input.indexOf(label) === 0) {\n          let inp = input.split(label)[1]\r\n\r\n          if (inp.length === 0 || (inp[0] === '+' || inp[0] === '-')) {\n            position = this._labels[label] + startTime\r\n            input = input.replace(label, '')\n          }\n        }\n      }\r\n\r\n      if (input.indexOf('+') === 0 || input.indexOf('-') === 0) {\n        position += parseFloat(input)\n      }\n    } else if (typeof input === 'number') {\n      position += input\n    }\r\n\r\n    return position\r\n  }\r\n\r\n  map (fn) {\r\n    for (let tween in this._tweens) {\r\n      fn(this._tweens[tween])\r\n    }\r\n\r\n    return this\r\n  }\r\n\r\n  add (tween, position) {\n    if (typeof tween === 'object' && !(tween instanceof Tween)) {\n      tween = new Tween(tween.from, tween)\n    }\r\n\r\n    let {\r\n      _defaultParams,\r\n      _totalDuration\r\n    } = this\r\n\r\n    if (_defaultParams) {\r\n      for (let method in _defaultParams) {\r\n        tween[method](_defaultParams[method])\r\n      }\r\n    }\r\n\r\n    tween._startTime = this.parsePosition(0, position, _totalDuration)\r\n    tween._startTime += now()\r\n    this._totalDuration = Math.max(_totalDuration, tween._duration + tween._startTime)\r\n    this._tweens[tween.id] = tween\r\n    return this\r\n  }\r\n\r\n  restart () {\r\n    this._startTime += now()\r\n\r\n    add(this)\r\n\r\n    return this.emit('restart')\r\n  }\r\n\r\n  easing (easing) {\r\n    return this.map(tween => tween.easing(easing))\r\n  }\r\n\r\n  interpolation (interpolation) {\r\n    return this.map(tween => tween.interpolation(interpolation))\r\n  }\r\n\r\n  update (time) {\r\n    let {\r\n      _tweens,\r\n      _totalDuration,\r\n      _repeatDelayTime,\r\n      _reverseDelayTime,\r\n      _startTime,\r\n      _reversed,\r\n      _yoyo,\r\n      _repeat\r\n    } = this\r\n\r\n    if (time < _startTime) {\n      return true\n    }\r\n\r\n    let elapsed = Math.min(1, Math.max(0, (time - _startTime) / _totalDuration))\r\n    elapsed = _reversed ? 1 - elapsed : elapsed\r\n    this._elapsed = elapsed\r\n\r\n    let timing = time - _startTime\r\n    let _timing = _reversed ? _totalDuration - timing : timing\r\n\r\n    for (let tween in _tweens) {\r\n      let _tween = _tweens[tween]\r\n      if (_tween.skip || _tween.update(_timing)) {\r\n        continue\r\n      } else {\r\n        _tween.skip = true\r\n      }\r\n    }\r\n\r\n    this.emit('update', elapsed, timing)\r\n\r\n    if (elapsed === 1 || (_reversed && elapsed === 0)) {\n      if (_repeat) {\n        if (isFinite(_repeat)) {\r\n          this._repeat--\r\n        }\r\n\r\n        // Reassign starting values, restart by making startTime = now\r\n        this.emit(_reversed ? 'reverse' : 'repeat')\r\n\r\n        if (_yoyo) {\r\n          this._reversed = !_reversed\r\n        }\r\n\r\n        if (!_reversed && _repeatDelayTime) {\r\n          this._startTime += _totalDuration + _repeatDelayTime\r\n        } else if (_reversed && _reverseDelayTime) {\r\n          this._startTime += _totalDuration + _reverseDelayTime\r\n        } else {\r\n          this._startTime += _totalDuration\r\n        }\r\n\r\n        for (let tween in _tweens) {\r\n          let _tween = _tweens[tween]\r\n          if (_tween.skip) {\r\n            _tween.skip = false\r\n          }\r\n        }\r\n\r\n        return true\n      } else {\n        this.emit('complete')\r\n        this._repeat = this._r\r\n\r\n        return false\n      }\n    }\r\n\r\n    return true\n  }\r\n\r\n  elapsed (value) {\r\n    return value !== undefined ? this.update(value * this._totalDuration) : this._elapsed\r\n  }\r\n\r\n  seek (value) {\r\n    return this.update(value < 1.1 ? value * this._totalDuration : value)\r\n  }\r\n}\r\nexport default Timeline\r\n","import Tween from './Tween'\r\n\r\nconst lin = k => k\r\n\r\nexport default function TweenInit (target) {\r\n  const {\r\n    from,\r\n    to,\r\n    duration = 1000,\r\n    easing = lin,\r\n    events,\r\n    instance\r\n  } = target\r\n  const tweenInstance = new Tween(from, instance).to(to, duration).easing(easing)\r\n  if (events) {\r\n    tweenInstance._events = events\r\n  }\r\n\r\n  target.start = tweenInstance.start.bind(tweenInstance)\r\n}\r\n"],"names":["toNumber","val","let","floatedVal","parseFloat","isNaN","const","bind","fn","ctx","apply","arguments","EventClass","this","_events","_bind","on","once","off","emit","scope","event","callback","push","spliceIndex","length","args","splice","undefined","filter","cb","arg1","arg2","arg3","arg4","_event","i","call","_tick","_tweens","isStarted","_autoPlay","root","window","global","_nextId","_ticker","requestAnimationFrame","setTimeout","_stopTicker","cancelAnimationFrame","clearTimeout","o","p","param","Object","defineProperty","setProp","enumerable","writable","value","add","tween","id","update","nextId","get","searchTween","remove","now","process","hrtime","time","performance","offset","timing","navigationStart","Date","preserve","document","timeDiff","timePause","addEventListener","hidden","_startTime","Easing","Linear","None","k","Quadratic","In","Out","InOut","Cubic","Quartic","Quintic","Sinusoidal","Math","cos","PI","sin","Exponential","pow","Circular","sqrt","Elastic","Back","s","Bounce","Interpolation","v","m","f","floor","Utils","Bezier","b","n","pw","bn","Bernstein","CatmullRom","p0","p1","t","fc","Factorial","a","p2","p3","v0","v1","t2","colorMatch","isIncrementReqForColor","numRegExp","hexColor","hexReplace","all","hex","r","g","parseInt","substr","SubTween","start","end","roundv","Array","isArray","isColorPropsExist","startIndex","map","test","endIndex","property","to","isSame","_startMap","replace","match","_endMap","_tween","_t","Store","JSON","stringify","defaultEasing","Tween","object","instate","super","isJoinToString","_valuesStart","createEmptyConst","_valuesEnd","_duration","_easingFunction","_interpolationFunction","_delayTime","_repeat","_r","_isPlaying","_yoyo","_reversed","_onStartCallbackFired","_pausedTime","oldObject","checkValidness","valid","Infinity","isPlaying","reverse","reversed","useActiveMode","pause","play","restart","noDelay","_object","seek","keepPlaying","max","min","duration","amount","properties","prop","ref","render","_rendered","stop","delay","repeat","repeatDelay","_repeatDelayTime","reverseDelay","_reverseDelayTime","yoyo","state","easing","interpolation","elapsed","charAt","isFinite","cache","grayscale","brightness","sepia","invert","saturate","contrast","blur","hueRotate","dropShadow","transform","translate","translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","x","y","z","scroll","scrollTop","scrollLeft","Plugins","Attr","layer","domNode","RenderObject","setAttribute","Style","style","Transform","SVGTransform","xPos","yPos","bbox","self","setOrigin","init","getBoundingClientRect","width","height","left","top","indexOf","Filter","webkitFilter","Scroll","Composite","plugins","fetch","type","plugin","applyPlugin","name","appendTo","node","appendChild","Timeline","params","_totalDuration","_elapsed","_id","_labels","_defaultParams","setLabel","parsePosition","startTime","input","total","position","label","inp","split","from","method","_timing","skip","lin","target","events","instance","tweenInstance"],"mappings":"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"}