!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.TWEEN=t.TWEEN||{})}(this,function(t){"use strict";function e(t){for(var e="",n=0,i=t.length;n<i;n++)e+=t[n];return e}function n(t){var e=parseFloat(t);return"number"!=typeof e||isNaN(e)?t:e}function i(t){var e=t.from,n=t.to,i=t.duration;void 0===i&&(i=1e3);var r=t.easing;void 0===r&&(r=K);var o=t.events,a=t.instance,u=new Z(e,a).to(n,i).easing(K);o&&(u._events=o),t.start=u.start.bind(u)}void 0===Object.assign&&(Object.assign=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return e.map(function(e){for(var n in e)t[n]=e[n]}),t});var r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof t?t:{},o=["webkit","moz","ms","o"],a="AnimationFrame",u="Request"+a,s="Cancel"+a,f="CancelRequest"+a,c=r.setTimeout,h=r.clearTimeout;if(c&&void 0===r.requestAnimationFrame){var p,l,v=Date.now(),d=50/3,y=d;o.map(function(t){void 0===(p=r[t+u])&&(p=function(t){return c(function(){l=Date.now(),t(l-v),y=d+(Date.now()-l)},y)})}),void 0!==p&&(r.requestAnimationFrame=p)}if(h&&void 0===r.cancelAnimationFrame&&void 0===(r.cancelAnimationFrame=r.cancelRequestAnimationFrame)){var m;o.map(function(t){void 0===(m=r[t+s])&&void 0===(m=r[t+f])&&(m=function(t){return h(t)})}),void 0!==m&&(r.cancelAnimationFrame=m)}void 0===Array.isArray&&(Array.isArray=function(t){return void 0!==t&&"object"==typeof t&&t.length&&void 0!==t.push&&void 0!==t.splice});var _,g={},b=!1,T=!1,w={},M="undefined"!=typeof window?window:"undefined"!=typeof global?global:{},j=0;Object.defineProperty(g,"length",{enumerable:!1,writable:!0,value:0});var O=function(t,e,n,i,r,o){var a=this,u=w[t];if(u)for(var s=u.length;s--;)u[s].call(a,e,n,i,r,o)},I=function(t,e){void 0===w[t]&&(w[t]=[]),w[t].push(e)},F=function(t,e){void 0===w[t]&&(w[t]=[]),I(t,function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];e.apply(void 0,n),A(t)})},A=function(t,e){if(void 0!==t&&void 0!==w[t])if(void 0!==e)for(var n=w[name],i=0;i<n.length;)n[i]===e&&n.splice(i,1),i++;else w[name]=[]},P=function(t){var e=t.id;g[e]=t,g.length++,T&&!b&&(B(),b=!0,O("start")),O("add",t,g)},E=function(){var t=j;return j++,t},S=function(){return g},C=function(t){T=t},N=function(){g={},Object.defineProperty(g,"length",{enumerable:!1,writable:!0,value:0})},k=function(t){for(var e in g)if(t.id===+e)return g[+e];return null},D=function(t){return null!==k(t)},x=function(t){for(var e in g)t.id===+e&&(delete g[+e],g.length--)},q=function(){if("undefined"!=typeof process&&void 0!==process.hrtime)return function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6};if(void 0!==M.performance&&void 0!==M.performance.now)return M.performance.now.bind(M.performance);var t=M.performance&&M.performance.timing&&M.performance.timing.navigationStart?M.performance.timing.navigationStart:Date.now();return function(){return Date.now()-t}}(),B=function(t,e){if(t=void 0!==t?t:q(),T&&(_=requestAnimationFrame(B)),O("update",t,g),0===g.length)return b=!1,cancelAnimationFrame(_),O("stop",t),!1;for(var n in g)g[n].update(t)||e?n++:(delete g[+n],g.length--);return!0};if(M.document){var R=M.document,L=0,z=0;R.addEventListener("visibilitychange",function(t){if(0===g.length)return!1;if(document.hidden)z=q();else{L=q()-z;for(var e in g)g[e]._startTime+=L}return!0})}var U={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-U.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*U.Bounce.In(2*t):.5*U.Bounce.Out(2*t-1)+.5}}},J={Linear:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=J.Utils.Linear;return e<0?o(t[0],t[1],i):e>1?o(t[n],t[n-1],n-i):o(t[r],t[r+1>n?n:r+1],i-r)},Bezier:function(t,e){for(var n=0,i=t.length-1,r=Math.pow,o=J.Utils.Bernstein,a=0;a<=i;a++)n+=r(1-e,i-a)*r(e,a)*t[a]*o(i,a);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=J.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(r=Math.floor(i=n*(1+e))),o(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(o(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):o(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],i-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=J.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var i=e;i>1;i--)n*=i;return t[e]=n,n}}(),CatmullRom:function(t,e,n,i,r){var o=.5*(n-t),a=.5*(i-e),u=r*r,s=r*u;return(2*e-2*n+o+a)*s+(-3*e+3*n-2*o-a)*u+o*r+e}}},X=function(t,e,n){if(void 0===n&&(n=1e5),Array.isArray(t)){e=e.map(function(e,n){return e===t[n]?null:"number"==typeof e?e-t[n]:"string"==typeof e?e:X(t[n],e)});var i=[].concat(t);return function(r){for(var o=0,a=e.length;o<a;o++){var u=e[o];"function"==typeof u?i[o]=u(r):"number"==typeof u&&(i[o]=((t[o]+u*r)*n|0)/n)}return i}}if("object"==typeof t){for(var r in e)e[r]===t[r]?e[r]=null:"object"==typeof e[r]?e[r]=X(t[r],e[r]):"number"==typeof t[r]&&(e[r]-=t[r]);var o=Object.assign({},t);return function(i){for(var r in e){var a=e[r];"function"==typeof a?o[r]=a(i):"number"==typeof a&&(o[r]=((t[r]+a*i)*n|0)/n)}return o}}if("number"==typeof t){e-=t;var a=t===e;return function(i){return a?e:((t+e*i)*n|0)/n}}var u=t===e;return function(n){return u?t:n>=.5?e:t}},Y=/\s+|([A-Za-z?().,{}:""\[\]#]+)|([-+\/*%]+=)?([-+*\/%]+)?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/gi,Z=function t(e,i){return void 0===e&&(e={}),this.isJoinToString="string"==typeof e&&Y.test(e),e=this.isJoinToString?e.match(Y).map(n):e,this.object=e,this._valuesStart=t.createEmptyConst(e),this._valuesEnd=t.createEmptyConst(e),this._duration=1e3,this._easingFunction=U.Linear.None,this._interpolationFunction=J.None,this._startTime=0,this._delayTime=0,this._repeat=0,this._r=null,this._isPlaying=!1,this._yoyo=!1,this._reversed=null,this._onStartCallbackFired=!1,this._pausedTime=null,this.id=E(),i&&i.to?new t(e).to(i.to,i):this};Z.createEmptyConst=function(t){return"number"==typeof t?0:Array.isArray(t)?[]:"object"==typeof t?{}:""},Z.checkValidness=function(t){return void 0!==t&&null!==t&&""!==t&&NaN!==t&&t!==1/0},Z.prototype.isPlaying=function(){return this._isPlaying},Z.prototype.isStarted=function(){return this._onStartCallbackFired},Z.prototype.reverse=function(){var t=this,e=t._reversed;return this._reversed=!e,this},Z.prototype.reversed=function(){return this._reversed},Z.prototype.off=function(t,e){if(!this._events||void 0===this._events[t])return this;if(void 0!==t&&void 0!==e)for(var n=this._events[t],i=0;i<n.length;)n[i]===e&&n.splice(i,1),i++;else void 0!==t&&void 0===e&&(this._events[t]=[]);return this},Z.prototype.on=function(t,e){return this._events&&void 0!==this._events[t]||(this._events||(this._events={}),this._events[t]=[]),this._events[t].push(e),this},Z.prototype.once=function(t,e){var n=this;return this._events&&void 0!==this._events[t]||(this._events||(this._events={}),this._events[t]=[]),this.on(t,function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];e.call.apply(e,[n].concat(i)),n.off(t)})},Z.prototype.emit=function(t,e,n,i,r,o){var a=this,u=this,s=u._events;if(!s)return this;var f=s[t];if(!f)return this;for(var c=f.length;c--;)f[c].call(a,e,n,i,r,o);return this},Z.prototype.pause=function(){return this._isPlaying?(this._isPlaying=!1,x(this),this._pausedTime=q(),this.emit("pause",this.object)):this},Z.prototype.play=function(){return this._isPlaying?this:(this._isPlaying=!0,this._startTime+=q()-this._pausedTime,P(this),this._pausedTime=q(),this.emit("play",this.object))},Z.prototype.restart=function(t){return this._repeat=this._r,this._startTime=q()+(t?0:this._delayTime),this._isPlaying||P(this),this.emit("restart",this._object)},Z.prototype.seek=function(t,e){return this._startTime=q()+Math.max(0,Math.min(t,this._duration)),this.emit("seek",t,this._object),e?this:this.pause()},Z.prototype.duration=function(t){return this._duration="function"==typeof t?t(this._duration):t,this},Z.prototype.to=function(t,e){var i=this;if(void 0===t&&(t={}),void 0===e&&(e=1e3),"number"==typeof t){var r={Number:t};this._valuesEnd=r}else this._valuesEnd=this.isJoinToString?X(this.object,t.match(Y).map(n)):t;if("number"==typeof e)this._duration="function"==typeof e?e(this._duration):e;else if("object"==typeof e)for(var o in e)i[o]&&i[o]("function"==typeof e[o]?e[o](i._duration):e);return this},Z.prototype.start=function(t){var e=this,i=this,r=i._startTime,o=i._delayTime,a=i._valuesEnd,u=(i._valuesStart,i.object);if(r=void 0!==t?t:q(),r+=o,this._startTime=r,"object"==typeof a)for(var s in a){if("object"==typeof a[s]&&a[s])e._valuesEnd[s]=X(u[s],a[s]);else if("string"==typeof a[s]&&"string"==typeof u[s]&&Y.test(u[s])&&Y.test(a[s])){var f=u[s].match(Y);f=f.map(n);var c=a[s].match(Y);c=c.map(n),e._valuesEnd[s]=X(f,c),e._valuesEnd[s].join=!0}Z.checkValidness(u[s])!==!1&&u[s]!==a[s]&&(e._valuesStart[s]=u[s])}return P(this),this._isPlaying=!0,this},Z.prototype.stop=function(){var t=this,e=t._isPlaying,n=t.object;return e?(x(this),this._isPlaying=!1,this.emit("stop",n)):this},Z.prototype.end=function(){var t=this,e=t._startTime,n=t._duration;return this.update(e+n)},Z.prototype.delay=function(t){return this._delayTime="function"==typeof t?t(this._delayTime):t,this},Z.prototype.repeat=function(t){return this._repeat="function"==typeof t?t(this._repeat):t,this._r=this._repeat,this},Z.prototype.repeatDelay=function(t){return this._repeatDelayTime="function"==typeof t?t(this._repeatDelayTime):t,this},Z.prototype.reverseDelay=function(t){return this._reverseDelayTime="function"==typeof t?t(this._reverseDelayTime):t,this},Z.prototype.yoyo=function(t){return this._yoyo="function"==typeof t?t(this._yoyo):t,this},Z.prototype.easing=function(t){return this._easingFunction=t,this},Z.prototype.interpolation=function(t){return this._interpolationFunction=t,this},Z.prototype.get=function(t){return this.update(t),this.object},Z.prototype.update=function(t){var n,i,r,o=this,a=this,u=a._onStartCallbackFired,s=a._easingFunction,f=a._interpolationFunction,c=a._repeat,h=a._repeatDelayTime,p=a._reverseDelayTime,l=(a._delayTime,a._yoyo),v=a._reversed,d=a._startTime,y=a._duration,m=a._valuesStart,_=a._valuesEnd,g=a.object,b=a.isJoinToString;if(t=void 0!==t?t:q(),t<d)return!0;if(u||(this.emit("start",g),this._onStartCallbackFired=!0),i=(t-d)/y,i=i>1?1:i,i=v?1-i:i,r=s(i),"function"==typeof _){var T=_(r);b&&(T=e(T)),g=T}else for(n in _)if(void 0!==m[n]){var w=m[n],M=_[n];if("function"==typeof M){var j=M(r);M.join&&(j=e(j)),g[n]=j}else Array.isArray(M)?g[n]=f(M,r):"string"==typeof M?(M="+"===M.charAt(0)||"-"===M.charAt(0)?w+parseFloat(M):parseFloat(M),"number"==typeof M&&(g[n]=w+(M-w)*r)):"number"==typeof w&&(g[n]=w+(M-w)*r)}if(this.emit("update",g,r,i),1===i||v&&0===i){if(c){isFinite(c)&&this._repeat--;for(n in _)"string"==typeof _[n]&&"number"==typeof m[n]&&(o._valuesStart[n]=m[n]+parseFloat(_[n]));return this.emit(v?"reverse":"repeat",g),l&&(this._reversed=!v),!v&&h?this._startTime+=y+h:v&&p?this._startTime+=y+p:this._startTime+=y,!0}return this.emit("complete",g),!1}return!0};var Q={filter:{grayscale:1,brightness:1,sepia:1,invert:1,saturate:1,contrast:1,blur:1,hueRotate:1,dropShadow:1},transform:{translate:1,translateX:1,translateY:1,translateZ:1,rotate:1,rotateX:1,rotateY:1,rotateZ:1,scale:1,scaleX:1,scaleY:1,scaleZ:1,skew:1,skewX:1,skewY:1}},V=function(){};V.DOM=function(t){var e=t.domNode,n=e.style;return{update:function(t,e){for(var i in e)n[i]=e[i]}}},V.Transform=function(t){var e=t.domNode,n=e.style;return{update:function(t,e){var i="";for(var r in e)"x"===r||"y"===r||"z"===r?i+=" translate3d( "+(e.x||"0px")+", "+(e.y||"0px")+", "+(e.z||"0px")+")":Q.transform[r]&&(i+=" "+r+"( "+e[r]+")");i&&(n.transform=i)}}},V.Filter=function(t){var e=t.domNode,n=e.style;return{update:function(t,e){var i="";for(var r in e)Q.filter[r]&&(i+=" "+r+"( "+e[r]+")");i&&(n.webkitFilter=n.filter=i)}}},V.Scroll=function(t){var e=t.domNode;return{update:function(t,n){for(var i in n)e[i]=n[i]}}};var W=function(t){this.domNode=t,this.plugins={};var e=this.plugins;return this.render=function(t){var n=this;for(var i in e)e[i]&&e[i].update&&e[i].update(n,t);return this},this.fetch=function(){var t=this;if(Object.keys(this.object).length)return this;for(var n in e)e[n]&&e[n].fetch&&e[n].fetch(t);return this},this.init=function(t){var n=this;for(var i in e)e[i]&&e[i].init&&e[i].init(n,t);return this},this},G={object:{}};W.prototype.applyPlugin=function(t){return void 0!==V[t]&&(this.plugins[t]=V[t](this)),this},G.object.set=function(t){return this.render(t)},W.prototype.appendTo=function(t){return t.appendChild(this.domNode),this},Object.defineProperties(W.prototype,G);var H=function(){return this._private={tweens:[],fullTime:0},this};H.prototype.add=function(t){var e=this;if(t instanceof Z)this._private.tweens.push(t);else if(Array.isArray(t)||"object"!=typeof t)"object"==typeof t&&t.map(function(t){e.add(t)});else{var n=new Z({x:0});for(var i in t)n[i](t[i]);this.add(n)}return this},H.prototype.start=function(){var t=this;return this._private.tweens.map(function(e){e.start(t._private.fullTime)}),this._private.fullTime=Math.max.apply(0,this._private.tweens.reduce(function(t,e){return e._duration>t?e._duration:t},0)),this};var K=function(t){return t};t.TweenInit=i,t.has=D,t.get=k,t.getAll=S,t.removeAll=N,t.remove=x,t.add=P,t.now=q,t.update=B,t.autoPlay=C,t.on=I,t.once=F,t.off=A,t.emit=O,t.Tween=Z,t.Easing=U,t.Interpolation=J,t.Composite=W,t.Timeline=H,t.Plugins=V,Object.defineProperty(t,"__esModule",{value:!0})});
