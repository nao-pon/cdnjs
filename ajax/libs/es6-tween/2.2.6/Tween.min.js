!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Tween=t.Tween||{})}(this,function(t){"use strict";function e(t,e,n){void 0===t&&(t={}),void 0===e&&(e={}),void 0===n&&(n=U);var i=new n;for(var r in t)void 0!==e[r]?i[r]=e[r]:i[r]=t[r];return i}function n(t){for(var e="",n=0,i=t.length;n<i;n++)e+=t[n];return e}function i(t){var e=parseFloat(t);return"number"!=typeof e||isNaN(e)?t:e}function r(t){var e=t.from,n=t.to,i=t.duration;void 0===i&&(i=1e3);var r=t.easing;void 0===r&&(r=G);var o=t.events,a=t.instance,s=new U(e,a).to(n,i).easing(G);o&&(s._events=o),t.start=s.start.bind(s)}void 0===Object.assign&&(Object.assign=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return e.map(function(e){for(var n in e)t[n]=e[n]}),t});var o="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof t?t:{},a=["webkit","moz","ms","o"],s="AnimationFrame",u="Request"+s,f="Cancel"+s,c="CancelRequest"+s,h=o.setTimeout,p=o.clearTimeout;if(h&&void 0===o.requestAnimationFrame){var l,v,d=Date.now(),y=50/3,m=y;a.map(function(t){void 0===(l=o[t+u])&&(l=function(t){return h(function(){v=Date.now(),t(v-d),m=y+(Date.now()-v)},m)})}),void 0!==l&&(o.requestAnimationFrame=l)}if(p&&void 0===o.cancelAnimationFrame&&void 0===(o.cancelAnimationFrame=o.cancelRequestAnimationFrame)){var _;a.map(function(t){void 0===(_=o[t+f])&&void 0===(_=o[t+c])&&(_=function(t){return p(t)})}),void 0!==_&&(o.cancelAnimationFrame=_)}void 0===Array.isArray&&(Array.isArray=function(t){return void 0!==t&&"object"==typeof t&&t.length&&void 0!==t.push&&void 0!==t.splice});var g,b=[],w=!1,T=!1,M={},j="undefined"!=typeof window?window:"undefined"!=typeof global?global:{},I=function(){return b},F=function(t){T=t},O=function(){b=[]},A=function(t,e,n,i,r,o){var a=this,s=M[t];if(s)for(var u=s.length;u--;)s[u].call(a,e,n,i,r,o)},P=function(t,e){if(void 0!==t&&void 0!==M[t])if(void 0!==e)for(var n=M[name],i=0;i<n.length;)n[i]===e&&n.splice(i,1),i++;else M[name]=[]},E=function(t){b.push(t),T&&!w&&(N(),w=!0,A("start")),A("add",t,b)},C=function(t,e){void 0===M[t]&&(M[t]=[]),M[t].push(e)},S=function(t,e){void 0===M[t]&&(M[t]=[]),C(t,function(){for(var n=[],i=arguments.length;i--;)n[i]=arguments[i];e.apply(void 0,n),P(t)})},k=function(t){b.filter(function(e){return e!==t});for(var e,n=0;n<b.length;)e=b[n],e===t&&(A("remove",t,b),b.splice(n,1)),n++},D=function(){if("undefined"!=typeof process&&void 0!==process.hrtime)return function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6};if(void 0!==j.performance&&void 0!==j.performance.now)return j.performance.now.bind(j.performance);var t=j.performance&&j.performance.timing&&j.performance.timing.navigationStart?j.performance.timing.navigationStart:Date.now();return function(){return Date.now()-t}}(),N=function(t,e){if(t=void 0!==t?t:D(),T&&(g=requestAnimationFrame(N)),A("update",t,b),0===b.length)return w=!1,cancelAnimationFrame(g),A("stop",t),!1;for(var n=0;n<b.length;)b[n].update(t)||e?n++:b.splice(n,1);return!0};if(j.document){var x=j.document,q=0,B=0;x.addEventListener("visibilitychange",function(t){return 0!==b.length&&(document.hidden?B=D():(q=D()-B,b.map(function(t){return t._startTime+=q})),!0)})}var L={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-L.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*L.Bounce.In(2*t):.5*L.Bounce.Out(2*t-1)+.5}}},R={Linear:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=R.Utils.Linear;return e<0?o(t[0],t[1],i):e>1?o(t[n],t[n-1],n-i):o(t[r],t[r+1>n?n:r+1],i-r)},Bezier:function(t,e){for(var n=0,i=t.length-1,r=Math.pow,o=R.Utils.Bernstein,a=0;a<=i;a++)n+=r(1-e,i-a)*r(e,a)*t[a]*o(i,a);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i),o=R.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(r=Math.floor(i=n*(1+e))),o(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):e<0?t[0]-(o(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(o(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):o(t[r?r-1:0],t[r],t[n<r+1?n:r+1],t[n<r+2?n:r+2],i-r)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=R.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var i=e;i>1;i--)n*=i;return t[e]=n,n}}(),CatmullRom:function(t,e,n,i,r){var o=.5*(n-t),a=.5*(i-e),s=r*r,u=r*s;return(2*e-2*n+o+a)*u+(-3*e+3*n-2*o-a)*s+o*r+e}}},z=/\s+|([A-Za-z?().,{}:""\[\]#]+)|([-+\/*%]+=)?([-+*\/%]+)?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/gi,U=function t(e,n){return void 0===e&&(e={}),this.object=e,this._valuesStart=t.createEmptyConst(e),this._valuesEnd=t.createEmptyConst(e),this._duration=1e3,this._easingFunction=L.Linear.None,this._interpolationFunction=R.None,this._startTime=0,this._delayTime=0,this._repeat=0,this._r=null,this._isPlaying=!1,this._yoyo=!1,this._reversed=null,this._onStartCallbackFired=!1,this._pausedTime=null,n&&n.to?new t(e).to(n.to,n):this};U.createEmptyConst=function(t){return"number"==typeof t?0:Array.isArray(t)?[]:"object"==typeof t?{}:""},U.checkValidness=function(t){return void 0!==t&&null!==t&&""!==t&&NaN!==t&&t!==1/0},U.prototype.isPlaying=function(){return this._isPlaying},U.prototype.isStarted=function(){return this._onStartCallbackFired},U.prototype.reverse=function(){var t=this,e=t._reversed;return this._reversed=!e,this},U.prototype.reversed=function(){return this._reversed},U.prototype.off=function(t,e){if(!this._events||void 0===this._events[t])return this;if(void 0!==t&&void 0!==e)for(var n=this._events[t],i=0;i<n.length;)n[i]===e&&n.splice(i,1),i++;else void 0!==t&&void 0===e&&(this._events[t]=[]);return this},U.prototype.on=function(t,e){return this._events&&void 0!==this._events[t]||(this._events||(this._events={}),this._events[t]=[]),this._events[t].push(e),this},U.prototype.once=function(t,e){var n=this;return this._events&&void 0!==this._events[t]||(this._events||(this._events={}),this._events[t]=[]),this.on(t,function(){for(var i=[],r=arguments.length;r--;)i[r]=arguments[r];e.call.apply(e,[n].concat(i)),n.off(t)})},U.prototype.emit=function(t,e,n,i,r,o){var a=this,s=this,u=s._events;if(!u)return this;var f=u[t];if(!f)return this;for(var c=f.length;c--;)f[c].call(a,e,n,i,r,o);return this},U.prototype.pause=function(){return this._isPlaying?(this._isPlaying=!1,k(this),this._pausedTime=D(),this.emit("pause",this.object)):this},U.prototype.play=function(){return this._isPlaying?this:(this._isPlaying=!0,this._startTime+=D()-this._pausedTime,E(this),this._pausedTime=D(),this.emit("play",this.object))},U.prototype.restart=function(t){return this._repeat=this._r,this._startTime=D()+(t?0:this._delayTime),this._isPlaying||E(this),this.emit("restart",this._object)},U.prototype.seek=function(t,e){return this._startTime=D()+Math.max(0,Math.min(t,this._duration)),this.emit("seek",t,this._object),e?this:this.pause()},U.prototype.duration=function(t){return this._duration="function"==typeof t?t(this._duration):t,this},U.prototype.to=function(t,e){var n=this;if(void 0===t&&(t={}),void 0===e&&(e=1e3),"number"==typeof t){var i={Number:t};this._valuesEnd=i}else this._valuesEnd=t;if("number"==typeof e)this._duration="function"==typeof e?e(this._duration):e;else if("object"==typeof e)for(var r in e)n[r]&&n[r]("function"==typeof e[r]?e[r](n._duration):e);return this},U.prototype.start=function(t){var n=this,r=this,o=r._startTime,a=r._delayTime,s=r._valuesEnd,u=(r._valuesStart,r.object);o=void 0!==t?t:D(),o+=a,this._startTime=o;for(var f in s){if("object"==typeof s[f])if(Array.isArray(s[f]))if("number"==typeof u[f])n._valuesEnd[f]=[u[f]].concat(s[f]);else{var c=e(n,{object:u[f],_valuesEnd:s[f],_events:void 0}).start().stop();n._valuesEnd[f]=c}else{var h=e(n,{object:u[f],_valuesEnd:s[f],_events:void 0}).start().stop();n._valuesStart[f]=1,n._valuesEnd[f]=h}else if("string"==typeof s[f]&&"string"==typeof u[f]&&z.test(u[f])&&z.test(s[f])){var p=u[f].match(z);p=p.map(i);var l=s[f].match(z);l=l.map(i);var v=e(n,{object:p,_valuesEnd:l,_events:{}}).start().stop();v.join=!0,n._valuesStart[f]=1,n._valuesEnd[f]=v}"function"==typeof u[f]&&(u[f]=n.object[f]=u[f](n)),"function"==typeof s[f]&&(n._valuesEnd[f]=s[f](n)),U.checkValidness(u[f])!==!1&&u[f]!==s[f]&&(n._valuesStart[f]=u[f])}return E(this),this._isPlaying=!0,this},U.prototype.stop=function(){var t=this,e=t._isPlaying,n=t.object;return e?(k(this),this._isPlaying=!1,this.stopChainedTweens(),this.emit("stop",n)):this},U.prototype.end=function(){var t=this,e=t._startTime,n=t._duration;return this.update(e+n)},U.prototype.stopChainedTweens=function(){var t=this,e=t._chainedTweens;return void 0===e&&(e=[]),e.map(function(t){return t.stop()}),this},U.prototype.delay=function(t){return this._delayTime="function"==typeof t?t(this._delayTime):t,this},U.prototype.repeat=function(t){return this._repeat="function"==typeof t?t(this._repeat):t,this._r=this._repeat,this},U.prototype.repeatDelay=function(t){return this._repeatDelayTime="function"==typeof t?t(this._repeatDelayTime):t,this},U.prototype.reverseDelay=function(t){return this._reverseDelayTime="function"==typeof t?t(this._reverseDelayTime):t,this},U.prototype.yoyo=function(t){return this._yoyo="function"==typeof t?t(this._yoyo):t,this},U.prototype.easing=function(t){return this._easingFunction=t,this},U.prototype.interpolation=function(t){return this._interpolationFunction=t,this},U.prototype.chain=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return this._chainedTweens=t,this},U.prototype.get=function(t){return this.update(t),this.object},U.prototype.update=function(t){var e,i,r,o=this,a=this,s=a._onStartCallbackFired,u=a._chainedTweens,f=a._easingFunction,c=a._interpolationFunction,h=a._repeat,p=a._repeatDelayTime,l=a._reverseDelayTime,v=(a._delayTime,a._yoyo),d=a._reversed,y=a._startTime,m=a._duration,_=a._valuesStart,g=a._valuesEnd,b=a.object;if(t=void 0!==t?t:D(),t<y)return!0;s||(this.emit("start",b),this._onStartCallbackFired=!0),i=(t-y)/m,i=i>1?1:i,i=d?1-i:i,r=f(i);for(e in g)if(void 0!==_[e]){var w=_[e],T=g[e];if(T instanceof U){var M=T.get(t);T.join?b[e]=n(M):b[e]=M}else Array.isArray(T)?b[e]=c(T,r):"string"==typeof T?(T="+"===T.charAt(0)||"-"===T.charAt(0)?w+parseFloat(T):parseFloat(T),"number"==typeof T&&(b[e]=w+(T-w)*r)):"number"==typeof T&&(b[e]=w+(T-w)*r)}if(this.emit("update",b,r,i),1===i||d&&0===i){if(h){isFinite(h)&&this._repeat--;for(e in g)"string"==typeof g[e]&&"number"==typeof _[e]&&(o._valuesStart[e]=_[e]+parseFloat(g[e]));return this.emit(d?"reverse":"repeat",b),v&&(this._reversed=!d),!d&&p?this._startTime+=m+p:d&&l?this._startTime+=m+l:this._startTime+=m,!0}return this.emit("complete",b),u&&u.map(function(t){return t.start(y+m)}),!1}return!0};var X={filter:{grayscale:1,brightness:1,sepia:1,invert:1,saturate:1,contrast:1,blur:1,hueRotate:1,dropShadow:1},transform:{translate:1,translateX:1,translateY:1,translateZ:1,rotate:1,rotateX:1,rotateY:1,rotateZ:1,scale:1,scaleX:1,scaleY:1,scaleZ:1,skew:1,skewX:1,skewY:1}},Y=function(){};Y.DOM=function(t){var e=t.domNode,n=e.style;return{update:function(t,e){for(var i in e)n[i]=e[i]}}},Y.Transform=function(t){var e=t.domNode,n=e.style;return{update:function(t,e){var i="";for(var r in e)"x"===r||"y"===r||"z"===r?i+=" translate3d( "+(e.x||"0px")+", "+(e.y||"0px")+", "+(e.z||"0px")+")":X.transform[r]&&(i+=" "+r+"( "+e[r]+")");i&&(n.transform=i)}}},Y.Filter=function(t){var e=t.domNode,n=e.style;return{update:function(t,e){var i="";for(var r in e)X.filter[r]&&(i+=" "+r+"( "+e[r]+")");i&&(n.webkitFilter=n.filter=i)}}},Y.Scroll=function(t){var e=t.domNode;return{update:function(t,n){for(var i in n)e[i]=n[i]}}};var Z=function(t){this.domNode=t,this.plugins={};var e=this.plugins;return this.render=function(t){var n=this;for(var i in e)e[i]&&e[i].update&&e[i].update(n,t);return this},this.fetch=function(){var t=this;if(Object.keys(this.object).length)return this;for(var n in e)e[n]&&e[n].fetch&&e[n].fetch(t);return this},this.init=function(t){var n=this;for(var i in e)e[i]&&e[i].init&&e[i].init(n,t);return this},this},Q={object:{}};Z.prototype.applyPlugin=function(t){return void 0!==Y[t]&&(this.plugins[t]=Y[t](this)),this},Q.object.set=function(t){return this.render(t)},Z.prototype.cloneLayer=function(){return e(this,{},Z)},Z.prototype.appendTo=function(t){return t.appendChild(this.domNode),this},Object.defineProperties(Z.prototype,Q);var V=function(){return this._private={tweens:[],fullTime:0},this};V.prototype.add=function(t){var e=this;if(t instanceof U)this._private.tweens.push(t);else if(Array.isArray(t)||"object"!=typeof t)"object"==typeof t&&t.map(function(t){e.add(t)});else{var n=new U({x:0});for(var i in t)n[i](t[i]);this.add(n)}return this},V.prototype.start=function(){var t=this;return this._private.tweens.map(function(e){e.start(t._private.fullTime)}),this._private.fullTime=Math.max.apply(0,this._private.tweens.reduce(function(t,e){return e._duration>t?e._duration:t},0)),this};var G=function(t){return t};t.TweenInit=r,t.getAll=I,t.removeAll=O,t.remove=k,t.add=E,t.now=D,t.update=N,t.autoPlay=F,t.on=C,t.once=S,t.off=P,t.emit=A,t.Tween=U,t.Easing=L,t.Interpolation=R,t.Composite=Z,t.Timeline=V,t.Plugins=Y,Object.defineProperty(t,"__esModule",{value:!0})});
