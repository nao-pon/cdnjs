{"version":3,"file":"embed.umd.js","sources":["../node_modules/just-extend/index.js","../node_modules/p-reduce/index.js","../node_modules/p-waterfall/index.js","../node_modules/is-dom/index.js","../src/utils/string-replace-async.js","../src/utils/dom.js","../node_modules/is-server/index.js","../src/plugins/base.js","../src/plugins/highlight.js","../node_modules/regex-emoji/lib/index.js","../node_modules/just-kebab-case/index.js","../src/plugins/emoji.js","../src/utils/fetch.js","../node_modules/just-truncate/index.js","../src/utils/with-details-template.js","../src/plugins/github.js","../src/plugins/media.js","../node_modules/youtube-regex/index.js","../src/utils/without-detail-template.js","../src/plugins/youtube.js","../node_modules/just-pluck-it/index.js","../node_modules/just-flatten-it/index.js","../src/utils/noembed-regex.js","../src/plugins/noembed.js","../src/utils/jsonp.js","../node_modules/html-escape/index.js","../node_modules/html-linkify/index.js","../src/plugins/url.js","../src/plugins/facebook.js","../src/plugins/instagram.js","../src/presets/all.js","../src/embed.js"],"sourcesContent":["module.exports = extend;\n\n/*\n  var obj = {a: 3, b: 5};\n  extend(obj, {a: 4, c: 8}); // {a: 4, b: 5, c: 8}\n  obj; // {a: 4, b: 5, c: 8}\n\n  var obj = {a: 3, b: 5};\n  extend({}, obj, {a: 4, c: 8}); // {a: 4, b: 5, c: 8}\n  obj; // {a: 3, b: 5}\n\n  var arr = [1, 2, 3];\n  var obj = {a: 3, b: 5};\n  extend(obj, {c: arr}); // {a: 3, b: 5, c: [1, 2, 3]}\n  arr.push[4];\n  obj; // {a: 3, b: 5, c: [1, 2, 3, 4]}\n\n  var arr = [1, 2, 3];\n  var obj = {a: 3, b: 5};\n  extend(true, obj, {c: arr}); // {a: 3, b: 5, c: [1, 2, 3]}\n  arr.push[4];\n  obj; // {a: 3, b: 5, c: [1, 2, 3]}\n*/\n\nfunction extend(obj1, obj2 /*, [objn]*/) {\n  var args = [].slice.call(arguments);\n  var deep = false;\n  if (typeof args[0] === 'boolean') {\n    deep = args.shift();\n  }\n  var result = args[0];\n  var extenders = args.slice(1);\n  var len = extenders.length;\n  for (var i = 0; i < len; i++) {\n    var extender = extenders[i];\n    for (var key in extender) {\n      // include prototype properties\n      var value = extender[key];\n      if (deep && value && (typeof value == 'object')) {\n        var base = Array.isArray(value) ? [] : {};\n        result[key] = extend(true, result[key] || base, value);\n      } else {\n        result[key] = value;\n      }\n    }\n  }\n  return result;\n}\n","'use strict';\nmodule.exports = (iterable, reducer, initVal) => new Promise((resolve, reject) => {\n\tconst iterator = iterable[Symbol.iterator]();\n\tlet i = 0;\n\n\tconst next = total => {\n\t\tconst el = iterator.next();\n\n\t\tif (el.done) {\n\t\t\tresolve(total);\n\t\t\treturn;\n\t\t}\n\n\t\tPromise.all([total, el.value])\n\t\t\t.then(value => {\n\t\t\t\tnext(reducer(value[0], value[1], i++));\n\t\t\t})\n\t\t\t.catch(reject);\n\t};\n\n\tnext(initVal);\n});\n","'use strict';\nconst pReduce = require('p-reduce');\n\nmodule.exports = (iterable, initVal) => pReduce(iterable, (prev, fn) => fn(prev), initVal);\n","module.exports = isNode\n\nfunction isNode (val) {\n  return (!val || typeof val !== 'object')\n    ? false\n    : (typeof window === 'object' && typeof window.Node === 'object')\n      ? (val instanceof window.Node)\n      : (typeof val.nodeType === 'number') &&\n        (typeof val.nodeName === 'string')\n}\n","import extend from \"just-extend\"\n\nfunction matchAll(str, re) {\n\tconst matches = []\n\tlet res = re.exec(str)\n\n\twhile (res) {\n\t\tmatches.push(res)\n\n\t\tif (!re.global) {\n\t\t\tbreak\n\t\t}\n\n\t\tres = re.exec(str)\n\t}\n\treturn matches\n}\n\nfunction replaceAll(str, matches) {\n\treturn matches.reverse().reduce(function(res, match) {\n\t\tconst prefix = res.slice(0, match.index)\n\t\tconst postfix = res.slice(match.index + match[0].length)\n\n\t\treturn prefix + match.replacement + postfix\n\t}, str)\n}\n\nfunction assignReplacement(match, replacer) {\n\tconst args = match.concat([match.index, match.input])\n\n\treturn replacer.apply(null, args).then(function(res) {\n\t\treturn extend({}, match, { replacement: res })\n\t})\n}\n\nfunction concurrency(matches, replacer) {\n\tconst promises = matches.map(function(match) {\n\t\treturn assignReplacement(match, replacer)\n\t})\n\n\treturn Promise.all(promises)\n}\n\nfunction processString(str, re, replacer) {\n\tconst matches = matchAll(str, re)\n\tconst processor = concurrency\n\n\treturn processor(matches, replacer).then(function(matches) {\n\t\treturn replaceAll(str, matches)\n\t})\n}\n\nfunction stringReplaceAsync(str, re, replacer) {\n\tre.lastIndex = 0\n\ttry {\n\t\treturn Promise.resolve(processString(str, re, replacer))\n\t} catch (e) {\n\t\treturn Promise.reject(e)\n\t}\n}\n\nexport default stringReplaceAsync\n","import extend from \"just-extend\"\nimport stringReplaceAsync from \"../utils/string-replace-async\"\n\nconst anchorRegex = /<a[^>]*>([^<]+)<\\/a>/gi\n\n/**\n * Returns the matched regex data or whether the text has any matching string\n * @param regex Regex of the matching pattern\n * @param text String which has to be searched\n * @param test Return boolean or matching array\n * @returns {*} Boolean|Array\n */\nfunction isMatchPresent(regex, text, test = false) {\n\treturn test ? regex.test(text) : text.match(regex)\n}\n\n/**\n * Tells wheteher the matching string is present inside an anchor tag\n * @param text\n * @returns {*} Boolean\n */\nfunction isAnchorTagApplied(text) {\n\treturn anchorRegex.test(text)\n}\n\n/**\n * Sort all the saved embeds by the position index they are present in the string.\n * @param embeds\n * @returns {Array.<T>}\n */\nfunction sortEmbeds(embeds) {\n\treturn embeds.sort((a, b) => a.index - b.index)\n}\n\n/**\n * Returns the embed code to be added at the end of original string.\n * @param embeds\n * @returns {string}\n */\nfunction combineEmbedsText(embeds) {\n\treturn sortEmbeds(embeds)\n\t\t.map(({ content }) => content)\n\t\t.join(\" \")\n}\n\n/**\n * Add the embed code at the end of string and return the new string\n * @param text - original string\n * @param _embeds - Array of embed code\n * @returns {string}\n */\nexport function appendEmbedsAtEnd({ result, _embeds }) {\n\treturn `${result} ${combineEmbedsText(_embeds)}`\n}\n\nfunction saveServiceName({ _services }, { name }, match) {\n\tif (!_services.filter(x => x.match === match).length) {\n\t\t_services.push({ name, match })\n\t}\n}\n\nasync function pushEmbedContent(text, options, pluginOptions, index) {\n\tconst { regex } = pluginOptions\n\tawait stringReplaceAsync(text, regex, async (...args) => {\n\t\toptions._embeds.push({\n\t\t\tcontent: await getTemplate(args, options, pluginOptions),\n\t\t\tindex: index || args.find(x => typeof x === \"number\")\n\t\t})\n\t\tsaveServiceName(options, pluginOptions, args[0])\n\t})\n\treturn options\n}\n\n/**\n * Save the embed code into an array that can be added later to the end of original string\n * @param opts\n * @param pluginOptions\n */\nasync function saveEmbedData(opts, pluginOptions) {\n\tconst { regex } = pluginOptions\n\tlet options = extend({}, opts)\n\n\tif (isAnchorTagApplied(options.result)) {\n\t\tawait stringReplaceAsync(\n\t\t\toptions.result,\n\t\t\tanchorRegex,\n\t\t\tasync (match, url, index) => {\n\t\t\t\tif (!isMatchPresent(regex, match, true)) return match\n\t\t\t\tsaveServiceName(options, pluginOptions, match)\n\t\t\t\toptions = await pushEmbedContent(url, options, pluginOptions, index)\n\t\t\t\treturn match\n\t\t\t}\n\t\t)\n\t} else {\n\t\toptions = pushEmbedContent(options.result, options, pluginOptions)\n\t}\n\n\treturn options\n}\n\nfunction getMatch(regex, string) {\n\tregex.lastIndex = 0\n\tconst matches = regex.exec(string)\n\tregex.lastIndex = 0\n\treturn matches\n}\n\nasync function getTemplate(args, options, pluginOptions) {\n\tconst { _process, template } = pluginOptions\n\tlet data\n\tif (_process) {\n\t\tdata = await _process(args, options, pluginOptions)\n\t}\n\treturn template(args, options, pluginOptions, data)\n}\n\nasync function basicReplace(options, pluginOptions) {\n\tconst { result, replaceUrl } = options\n\tconst { regex, _replaceAnyways } = pluginOptions\n\treturn stringReplaceAsync(result, regex, async (...args) => {\n\t\tsaveServiceName(options, pluginOptions, args[0])\n\t\treturn replaceUrl || _replaceAnyways\n\t\t\t? getTemplate(args, options, pluginOptions)\n\t\t\t: `${args[0]} ${await getTemplate(args, options, pluginOptions)}`\n\t})\n}\n\nasync function anchorReplace(options, pluginOptions) {\n\tconst { result, replaceUrl } = options\n\tconst { regex, _replaceAnyways } = pluginOptions\n\n\treturn stringReplaceAsync(result, anchorRegex, async (match, url) => {\n\t\tif (!isMatchPresent(regex, url, true)) {\n\t\t\treturn match\n\t\t}\n\n\t\tif (!(replaceUrl || _replaceAnyways)) {\n\t\t\tconst args = getMatch(regex, url)\n\t\t\tsaveServiceName(options, pluginOptions, args[0])\n\t\t\tconst t = await getTemplate(args, options, pluginOptions)\n\t\t\treturn args ? match + t : match\n\t\t}\n\t\treturn stringReplaceAsync(url, regex, async (...args) => {\n\t\t\tsaveServiceName(options, pluginOptions, args[0])\n\t\t\treturn getTemplate(args, options, pluginOptions)\n\t\t})\n\t})\n}\n\n/**\n * Insert the embed code in the original string.\n * @param options\n * @param pluginOptions\n * @returns options\n */\nexport async function insert(options, pluginOptions) {\n\tconst { result, inlineEmbed } = options\n\tconst { _ignoreAnchorCheck, _ignoreInlineCheck } = pluginOptions\n\n\tif (!inlineEmbed && !_ignoreInlineCheck) {\n\t\treturn saveEmbedData(options, pluginOptions)\n\t}\n\n\tlet output\n\n\toutput = isAnchorTagApplied(result) && !_ignoreAnchorCheck\n\t\t? await anchorReplace(options, pluginOptions)\n\t\t: await basicReplace(options, pluginOptions)\n\n\treturn extend({}, options, {\n\t\tresult: output\n\t})\n}\n","/**\n * Export\n */\n\nexports = module.exports = detect;\n\n/**\n * Check if process is running in Node.js\n *\n * @return {Boolean}\n * @api public\n */\n\nfunction detect() {\n  if (typeof process != \"undefined\") return true;\n  return false;\n}","import extend from \"just-extend\"\nimport { insert } from \"../utils/dom\"\n\nexport default opts => {\n\tconst defaultOptions = {\n\t\t_replaceAnyways: false,\n\t\t_ignoreAnchorCheck: false,\n\t\t_ignoreInlineCheck: false,\n\t\tonLoad() {}\n\t}\n\n\tconst pluginOptions = extend({}, defaultOptions, opts)\n\n\tconst { _onLoadInternal, onLoad, regex, template } = pluginOptions\n\n\tif (!regex) {\n\t\tthrow new Error(\"regex not passed.\")\n\t}\n\tif (!template) {\n\t\tthrow new Error(\"template not passed.\")\n\t}\n\n\treturn {\n\t\tasync transform(options) {\n\t\t\treturn extend({}, options, await insert(options, pluginOptions))\n\t\t},\n\n\t\tonLoad(options) {\n\t\t\tif (_onLoadInternal) {\n\t\t\t\t_onLoadInternal(options, pluginOptions)\n\t\t\t}\n\t\t\tif (onLoad) {\n\t\t\t\tonLoad(options, pluginOptions)\n\t\t\t}\n\t\t}\n\t}\n}\n","import extend from 'just-extend'\nimport isServer from 'is-server'\nimport base from './base'\n\nconst name = 'highlight'\n\nexport default function highlight(opts) {\n\tconst defaultOptions = {\n\t\tname,\n\t\tregex: /(`{3})(\\s|[a-z]+)\\s*([\\s\\S]*?[^`])\\s*\\1(?!`)/gm,\n\t\tprismjs: isServer() ? require('prismjs') : window.Prism,\n\t\ttemplate(args, options, { prismjs }) {\n\t\t\tconst language = args[2]\n\t\t\tconst code = args[3]\n\t\t\tconst className = `language-${language || 'markup'}`\n\t\t\treturn `<pre class=\"${className}\"><code class=\"${className}\">${prismjs.highlight(code, prismjs.languages[language || 'markup'])}</code></pre>`\n\t\t}\n\t}\n\n\tconst pluginOptions = extend({}, defaultOptions, opts, {\n\t\t_replaceAnyways: true,\n\t\t_ignoreAnchorCheck: true,\n\t\t_ignoreInlineCheck: true\n\t})\n\treturn base(pluginOptions)\n}\n\nhighlight.id = name\n","\"use strict\";\n\n/**\n * emojiRegex\n * Returns the emoji regex value.\n *\n * @name emojiRegex\n * @function\n * @return {RegExp} The emoji regex.\n */\nmodule.exports = function emojiRegex() {\n  return (/:([a-z0-9_\\+\\-]+):/g\n  );\n};","module.exports = kebabCase;\n\n/*\n  kebabCase('the quick brown fox'); // 'the-quick-brown-fox'\n  kebabCase('the-quick-brown-fox'); // 'the-quick-brown-fox'\n  kebabCase('the_quick_brown_fox'); // 'the-quick-brown-fox'\n  kebabCase('theQuickBrownFox'); // 'the-quick-brown-fox'\n  kebabCase('theQuickBrown Fox'); // 'the-quick-brown-fox'\n  kebabCase('thequickbrownfox'); // 'thequickbrownfox'\n  kebabCase('the - quick * brown# fox'); // 'the-quick-brown-fox'\n  kebabCase('theQUICKBrownFox'); // 'the-q-u-i-c-k-brown-fox'\n*/\n\n// any combination of spaces and punctuation characters\n// thanks to http://stackoverflow.com/a/25575009\nvar wordSeparators = /[\\s\\u2000-\\u206F\\u2E00-\\u2E7F\\\\'!\"#$%&()*+,\\-.\\/:;<=>?@\\[\\]^_`{|}~]+/;\nvar capitals = /[A-Z\\u00C0-\\u00D6\\u00D9-\\u00DD]/g;\n\nfunction kebabCase(str) {\n  //replace capitals with space + lower case equivalent for later parsing\n  str = str.replace(capitals, function (match) {\n    return ' ' + (match.toLowerCase() || match);\n  });\n  return str.trim().split(wordSeparators).join('-');\n}\n","import extend from 'just-extend'\nimport emojiRegex from \"regex-emoji\"\nimport kebab from 'just-kebab-case'\n\nconst name = \"emoji\"\n\n// You need emoji.css to run with this plugin. Else you need to pass the\n// template suitable to your needs.\nexport default function emoji(opts) {\n\tconst defaultOptions = {\n\t\tname,\n\t\tregex: emojiRegex(),\n\t\ttemplate(emojiName) {\n\t\t\treturn `<span class=\"ec ec-${kebab(emojiName)}\"></span>`\n\t\t}\n\t}\n\n\tconst pluginOptions = extend({}, defaultOptions, opts)\n\treturn {\n\t\ttransform(options) {\n\t\t\treturn Promise.resolve(\n\t\t\t\textend({}, options, {\n\t\t\t\t\tresult: options.result.replace(\n\t\t\t\t\t\tpluginOptions.regex,\n\t\t\t\t\t\t(match, emojiName) => {\n\t\t\t\t\t\t\toptions._services.push({name, match})\n\t\t\t\t\t\t\treturn pluginOptions.template(emojiName, options, pluginOptions)\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t)\n\t\t}\n\t}\n}\n\nemoji.id = name\n","import isServer from \"is-server\"\n\nexport default (isServer()\n\t? require(\"node-fetch\")\n\t: window.fetch || window.unfetch)\n","module.exports = truncate;\n\n/*\n  truncate('when shall we three meet again', 9); // 'when s...'\n  truncate('when shall we three meet again', 10, ' (etc)'); // 'when (etc)'\n  truncate('when shall we', 15,); // 'when shall we'\n  truncate('when shall we', 15, '(more)'); // 'when shall we'\n  truncate('when shall we', 7, ' (more)'); // ' (more)'\n*/\n\nfunction truncate(str, length, end) {\n  if ((length == null) || (length >= str.length)) {\n    return str;\n  }\n  if (end == null) {\n    end = '...';\n  }\n  return str.slice(0, Math.max(0, length - end.length)) + end;\n}\n","import truncate from \"just-truncate\"\n\nexport default function(\n\t{ url, title, embedUrl, description, thumbnail },\n\tthumbClassName\n) {\n\treturn `<div class=\"ejs-preview ejs-embed\"><div class=\"ejs-thumb ${thumbClassName}\" data-url=\"${embedUrl}\" style=\"background-image:url(${thumbnail})\"><span>&#9658;</span></div><div class=\"ejs-info\"><h4 class=\"ejs-title\"><a href=\"${url}\">${title}</a></h4><div class=\"ejs-desc\">${truncate(\n\t\tdescription,\n\t\t150\n\t)}</div></div></div>`\n}\n","import extend from \"just-extend\"\nimport unfetch from \"../utils/fetch\"\nimport base from \"./base\"\nimport detailsTemplate from '../utils/with-details-template'\n\nconst name = 'github'\n\nasync function _process(args) {\n\tconst [, user, repo] = args\n\n\ttry {\n\t\tconst res = await unfetch(`https://api.github.com/repos/${user}/${repo}`)\n\t\treturn res.json()\n\t} catch (e) {\n\t\treturn {}\n\t}\n}\n\nexport default function github(opts) {\n\tconst defaultOptions = {\n\t\tname,\n\t\tregex: /[^\\.]github.com\\/([\\w\\.\\-]+)\\/([\\w\\.\\-]+[^\\.])/gi,\n\n\t\tasync template(args, options, pluginOptions, { owner, description, html_url, full_name }) {\n\t\t\treturn detailsTemplate({\n\t\t\t\tthumbnail: owner.avatar_url,\n\t\t\t\turl: html_url,\n\t\t\t\tdescription,\n\t\t\t\ttitle: full_name,\n\t\t\t})\n\t\t}\n\t}\n\n\tconst pluginOptions = extend({}, defaultOptions, opts, {\n\t\t_process\n\t})\n\treturn base(pluginOptions)\n}\n\ngithub.id = name\n","import extend from \"just-extend\"\nimport base from \"./base\"\n\nconst name = 'media'\n\nconst image = ['gif', 'jpg', 'jpeg', 'tiff', 'png', 'svg', 'webp']\nconst video = ['ogv', 'webm', 'mp4']\nconst audio = ['wav', 'mp3', 'ogg']\n\nexport default function basicImage(opts) {\n\tconst defaultOptions = {\n\t\tname,\n\t\tregex: new RegExp(`(?:https?)://\\\\S*\\\\.(?:${image.concat(video, audio).join('|')})`, 'gi'),\n\t\ttemplate(args) {\n\t\t\tconst url = args[0]\n\t\t\tconst ext = url.split('.').slice(-1)[0]\n\t\t\tif(image.indexOf(ext) >= 0) {\n\t\t\t\treturn `<img class=\"ejs-embed\" src=\"${url}\"/>`\n\t\t\t} else if (video.indexOf(ext) >= 0) {\n\t\t\t\treturn `<video src=\"${url}\" controls class=\"ejs-video\"></video>`\n\t\t\t} else if (audio.indexOf(ext) >= 0) {\n\t\t\t\treturn `<audio src=\"${url}\" controls class=\"ejs-audio\"></audio>`\n\t\t\t}\n\t\t}\n\t}\n\tconst pluginOptions = extend({}, defaultOptions, opts)\n\treturn base(pluginOptions)\n}\n\nbasicImage.id = name\n","/**\n * youtube-regex <https://github.com/tunnckoCore/youtube-regex>\n *\n * Copyright (c) 2014 Charlike Mike Reagent, contributors.\n * Released under the MIT license.\n */\n\n'use strict';\n\nmodule.exports = function youtubeRegex() {\n  var regex = /(?:youtube\\.com\\/\\S*(?:(?:\\/e(?:mbed))?\\/|watch\\/?\\?(?:\\S*?&?v\\=))|youtu\\.be\\/)([a-zA-Z0-9_-]{6,11})/g;\n\n  return regex;\n};\n","export default function(embedUrl, height, name) {\n\treturn `<iframe class=\"ejs-embed ejs-${name}\" src=\"${embedUrl}\" frameBorder=\"0\" height=\"${height}\"></iframe>`\n}\n","import extend from \"just-extend\"\nimport isDom from \"is-dom\"\nimport ytRegex from 'youtube-regex'\nimport unfetch from \"../utils/fetch\"\nimport withDetailsTemplate from '../utils/with-details-template'\nimport withoutDetailsTemplate from '../utils/without-detail-template'\nimport base from \"./base\"\n\nconst name = 'youtube'\nconst baseUrl = 'https://www.youtube.com/'\n\n\n/**\n * Decorate data into a simpler structure\n * @param data\n * @returns {{title, thumbnail, rawDescription, views: *, likes: *, description: *, url: string, id, host: string}}\n */\nfunction formatData({ snippet, id }) {\n\treturn {\n\t\ttitle: snippet.title,\n\t\tthumbnail: snippet.thumbnails.medium.url,\n\t\tdescription: snippet.description,\n\t\turl: `${baseUrl}watch?v=${id}`,\n\t\tembedUrl: `${baseUrl}embed/${id}`\n\t}\n}\n\n/**\n * Fetch details of a particular youtube video\n * @param id\n * @param gAuthKey\n * @returns {Promise.<*>}\n */\nasync function fetchDetails(id, gAuthKey) {\n\ttry {\n\t\tconst res = await unfetch(\n\t\t\t`https://www.googleapis.com/youtube/v3/videos?id=${id}&key=${gAuthKey}&part=snippet,statistics`\n\t\t)\n\t\tconst data = await res.json()\n\t\treturn data.items[0]\n\t} catch (e) {\n\t\treturn {}\n\t}\n}\n\n/**\n * Function executed when a content is rendered on the client site.\n * @param input\n * @param clickClass\n * @param onVideoShow\n * @param height\n */\nfunction onLoad({ input }, { clickClass, onVideoShow, height }) {\n\tif (!isDom(input)) {\n\t\tthrow new Error(\"input should be a DOM Element.\")\n\t}\n\tlet classes = document.getElementsByClassName(clickClass)\n\tfor (let i = 0; i < classes.length; i++) {\n\t\tclasses[i].onclick = function() {\n\t\t\tlet url = this.getAttribute(\"data-url\")\n\t\t\tonVideoShow(url)\n\t\t\turl += \"?autoplay=1\"\n\t\t\tthis.parentNode.innerHTML = withoutDetailsTemplate(\n\t\t\t\turl,\n\t\t\t\theight,\n\t\t\t\tname\n\t\t\t)\n\t\t}\n\t}\n}\n\nfunction _process(args, options, { gAuthKey, details }) {\n\treturn details && fetchDetails(args[1], gAuthKey)\n}\n\nfunction youtube(opts) {\n\tconst defaultOptions = {\n\t\tname,\n\t\tregex: ytRegex(),\n\t\tgAuthKey: \"\",\n\t\tdetails: true,\n\t\theight: 300,\n\t\tclickClass: \"ejs-video-thumb\",\n\t\tonVideoShow() {},\n\t\t_onLoadInternal(options, pluginOptions) {\n\t\t\tonLoad(options, pluginOptions)\n\t\t},\n\t\tonLoad() {},\n\t\tasync template(args, options, { details, height, clickClass }, data) {\n\t\t\tconst embedUrl = `${baseUrl}embed/${args[1]}`\n\t\t\treturn details\n\t\t\t\t? withDetailsTemplate(formatData(data), clickClass)\n\t\t\t\t: withoutDetailsTemplate(embedUrl, height, name)\n\t\t}\n\t}\n\n\tif (!opts.gAuthKey) {\n\t\tthrow new Error(\"You need to pass google auth key.\")\n\t}\n\n\tconst pluginOptions = extend({}, defaultOptions, opts, {\n\t\t_process\n\t})\n\treturn base(pluginOptions)\n}\n\nyoutube.id = name\n\nexport default youtube\n","module.exports = pluck;\n\n/*\n  var arr = [{a:1, b:2}, {a:4, b:3}, {a:2, b:5}];\n  pluck(arr, 'a'); // [1, 4, 2]\n  var obj = {x: {a:1, b:2}, y: {a:4, b:3}, z: {a:2, b:5}];\n  pluck(obj, 'a'); // {x: 1, y: 4, z: 2}\n*/\n\nfunction pluck(collection, propertyName) {\n  if (!collection || typeof collection != 'object') {\n    return new Error('expected first argument to be an object or array');\n  }\n\n  var result, len, i, keys, key;\n  if (Array.isArray(collection)) {\n    result = [];\n    len = collection.length;\n    for (i = 0; i < len; i++) {\n      result.push(collection[i][propertyName]);\n    }\n  } else {\n    result = {};\n    keys = Object.keys(collection);\n    len = keys.length;\n    for (i = 0; i < len; i++) {\n      key = keys[i];\n      result[key] = collection[key][propertyName];\n    }\n  }\n  return result;\n}\n","module.exports = flatten;\n\n/*\n  flatten([[1, [2, 3]], [[4, 5], 6, 7, [8, 9]]]);\n  // [1, 2, 3, 4, 5, 6, 7, 8, 9]\n*/\n\nfunction flatten(arr) {\n  var result = [];\n  var len = arr.length;\n  for (var i = 0; i < len; i++) {\n    var elem = arr[i];\n    if (Array.isArray(elem)) {\n      result.push.apply(result, flatten(elem));\n    } else {\n      result.push(elem);\n    }\n  }\n  return result;\n}\n","import pluck from \"just-pluck-it\"\nimport flatten from \"just-flatten-it\"\n\nconst regexes = [\n\t{\n\t\tpatterns: [\"https?://soundcloud.com/.*/.[^\\\\s]*\"],\n\t\tname: \"SoundCloud\"\n\t},\n\t{\n\t\tname: \"slideshare\",\n\t\tpatterns: [\n\t\t\t\"https?://www\\\\.slideshare\\\\.net/.*/.[^\\\\s]*\",\n\t\t\t\"https?://fr\\\\.slideshare\\\\.net/.*/.[^\\\\s]*\",\n\t\t\t\"https?://de\\\\.slideshare\\\\.net/.*/.[^\\\\s]*\",\n\t\t\t\"https?://es\\\\.slideshare\\\\.net/.*/.[^\\\\s]*\",\n\t\t\t\"https?://pt\\\\.slideshare\\\\.net/.*/.[^\\\\s]*\"\n\t\t]\n\t},\n\t{\n\t\tname: \"vimeo\",\n\t\tpatterns: [\n\t\t\t\"https?://vimeo\\\\.com/.[^\\\\s]*\",\n\t\t\t\"https?://vimeo\\\\.com/album/.*/video/.[^\\\\s]*\",\n\t\t\t\"https?://vimeo\\\\.com/channels/.*/.[^\\\\s]*\",\n\t\t\t\"https?://vimeo\\\\.com/groups/.*/videos/.[^\\\\s]*\",\n\t\t\t\"https?://vimeo\\\\.com/ondemand/.*/.[^\\\\s]*\"\n\t\t]\n\t},\n\t{\n\t\tpatterns: [\n\t\t\t\"https?://photos\\\\.app\\\\.net/.*/.[^\\\\s]*\",\n\t\t\t\"https?://live\\\\.amcharts\\\\.com/.[^\\\\s]*\",\n\t\t\t\"https?://codepen\\\\.io/.[^\\\\s]*\",\n\t\t\t\"https?://codepen\\\\.io/.[^\\\\s]*\",\n\t\t\t\"https?://www\\\\.collegehumor\\\\.com/video/.[^\\\\s]*\",\n\t\t\t\"https?://www\\\\.dailymotion\\\\.com/video/.[^\\\\s]*\",\n\t\t\t\"https?://.*\\\\.deviantart\\\\.com/art/.[^\\\\s]*\",\n\t\t\t\"https?://.*\\\\.deviantart\\\\.com/.*#/d.[^\\\\s]*\",\n\t\t\t\"https?://dotsub\\\\.com/view/.[^\\\\s]*\",\n\t\t\t\"https?://.*\\\\.flickr\\\\.com/photos/.[^\\\\s]*\",\n\t\t\t\"https?://flic\\\\.kr/p/.[^\\\\s]*\",\n\t\t\t\"https?://.*\\\\.wikimedia\\\\.org/.*_geograph\\\\.org\\\\.uk_.[^\\\\s]*\",\n\t\t\t\"https?://gfycat\\\\.com/.[^\\\\s]*\",\n\t\t\t\"https?://www\\\\.gfycat\\\\.com/.[^\\\\s]*\",\n\t\t\t\"https?://gfycat\\\\.com/.[^\\\\s]*\",\n\t\t\t\"https?://www\\\\.gfycat\\\\.com/.[^\\\\s]*\",\n\t\t\t\"https?://giphy\\\\.com/gifs/.[^\\\\s]*\",\n\t\t\t\"https?://media\\\\.giphy\\\\.com/media/.*/giphy\\\\.gif\",\n\t\t\t\"https?://www\\\\.hulu\\\\.com/watch/.[^\\\\s]*\",\n\t\t\t\"https?://www\\\\.kickstarter\\\\.com/projects/.[^\\\\s]*\",\n\t\t\t\"https?://www\\\\.mixcloud\\\\.com/.*/.*/\",\n\t\t\t\"https?://reddit\\\\.com/r/.*/comments/.*/.[^\\\\s]*\",\n\t\t\t\"https?://.*\\\\.screen9\\\\.tv/.[^\\\\s]*\",\n\t\t\t\"https?://www\\\\.scribd\\\\.com/doc/.[^\\\\s]*\",\n\t\t\t\"https?://.*\\\\.smugmug\\\\.com/.[^\\\\s]*\",\n\t\t\t\"https?://soundcloud\\\\.com/.[^\\\\s]*\",\n\t\t\t\"https?://play\\\\.soundsgood\\\\.co/playlist/.[^\\\\s]*\",\n\t\t\t\"https?://speakerdeck\\\\.com/.*/.[^\\\\s]*\",\n\t\t\t\"https?://speakerdeck\\\\.com/.*/.[^\\\\s]*\",\n\t\t\t\"https?://ted\\\\.com/talks/.[^\\\\s]*\",\n\t\t\t\"https?://www\\\\.nytimes\\\\.com/svc/oembed\",\n\t\t\t\"https?://nytimes\\\\.com/.[^\\\\s]*\",\n\t\t\t\"https?://.*\\\\.nytimes\\\\.com/.[^\\\\s]*\",\n\t\t\t\"https?://clips\\\\.twitch\\\\.tv/.[^\\\\s]*\",\n\t\t\t\"https?://clips\\\\.twitch\\\\.tv/.[^\\\\s]*\",\n\t\t\t\"https?://www\\\\.twitch\\\\.tv/.[^\\\\s]*\",\n\t\t\t\"https?://www\\\\.twitch\\\\.tv/.[^\\\\s]*\",\n\t\t\t\"https?://twitch\\\\.tv/.[^\\\\s]*\",\n\t\t\t\"https?://twitch\\\\.tv/.[^\\\\s]*\",\n\t\t\t\"https?://.*\\\\.ustream\\\\.tv/.[^\\\\s]*\",\n\t\t\t\"https?://.*\\\\.ustream\\\\.com/.[^\\\\s]*\",\n\t\t\t\"https?://veervr\\\\.tv/videos/.[^\\\\s]*\",\n\t\t\t\"https?://www\\\\.vevo\\\\.com/.[^\\\\s]*\",\n\t\t\t\"https?://www\\\\.vevo\\\\.com/.[^\\\\s]*\",\n\t\t\t\"https?://player\\\\.vimeo\\\\.com/video/.[^\\\\s]*\",\n\t\t\t\"https?://vine\\\\.co/v/.[^\\\\s]*\",\n\t\t\t\"https?://vine\\\\.co/v/.[^\\\\s]*\"\n\t\t],\n\t\tname: \"oEmbed\"\n\t},\n\t{\n\t\tname: \"Imgur\",\n\t\tpatterns: [\"https?://imgur\\\\.com/(?:[^\\\\/]+/)?[0-9a-zA-Z]+$\"]\n\t},\n\t{\n\t\tpatterns: [\n\t\t\t\"https?://www\\\\.(dropbox\\\\.com/s/.+\\\\.(?:jpg|png|gif))\",\n\t\t\t\"https?://db\\\\.tt/[a-zA-Z0-9][^\\\\s]+\"\n\t\t],\n\t\tname: \"Dropbox\"\n\t},\n\t// #if IS_CJS\n\t{\n\t\tpatterns: [\n\t\t\t\"https?:\\\\/\\\\/(?:[^\\\\.]+\\\\.)?youtube\\\\.com\\\\/watch\\\\/?\\\\?(?:.+&)?v=([^&][^\\\\s]+)\",\n\t\t\t\"https?://(?:[^\\\\.]+\\\\.)?(?:youtu\\\\.be|youtube\\\\.com/embed)/([a-zA-Z0-9_-][^\\\\s]+)\"\n\t\t],\n\t\tname: \"YouTube\"\n\t},\n\t// #endif\n\t{\n\t\tpatterns: [\n\t\t\t\"https?://(?:www|mobile\\\\.)?twitter\\\\.com/(?:#!/)?([^/]+)/status(?:es)?/(\\\\d+)\"\n\t\t],\n\t\tname: \"Twitter\"\n\t}\n]\n\nexport default function getRegexes(excludeServices = []) {\n\tconst includedRegexes = regexes.filter(\n\t\tr => excludeServices.indexOf(r.name.toLowerCase()) === -1\n\t)\n\tconst patterns = flatten(pluck(includedRegexes, \"patterns\"))\n\treturn new RegExp(patterns.join(\"|\"), \"gi\")\n}\n\n\nexport function isServicePresent (serviceName, text) {\n\tconst service = regexes.filter(r => r.name.toLowerCase() === serviceName)[0]\n\tconst regex = new RegExp(service.patterns.join('|'), 'gi')\n\treturn regex.test(text)\n}\n","import unfetch from \"../utils/fetch\"\nimport extend from \"just-extend\"\nimport isServer from 'is-server'\nimport isDom from 'is-dom'\nimport getRegex, { isServicePresent } from \"../utils/noembed-regex\"\nimport base from \"./base\"\n\nconst name = \"noEmbed\"\n\n/**\n * Fetches the data from the noembed API\n * @param args\n * @returns {Promise.<*>}\n */\nasync function _process(args) {\n\tconst url = args[0]\n\ttry {\n\t\tconst res = await unfetch(`https://noembed.com/embed?url=${url}`)\n\t\treturn await res.json()\n\t} catch (e) {\n\t\treturn {\n\t\t\thtml: url\n\t\t}\n\t}\n}\n\nfunction noEmbed(opts = {}) {\n\tconst defaultOptions = {\n\t\tname,\n\t\t// Regex to be used to identify noembed supported services.\n\t\t// By default it takes from noembed-regex.js\n\t\tregex: null,\n\n\t\t// In case you want to exclude a few services, you can do it here.\n\t\t// It accepts an array of service names in lowercase.\n\t\texclude: [],\n\n\t\ttwttr: !isServer() ? window.twttr : null,\n\n\t\tonLoad() {},\n\n\t\tasync template(args, options, pluginOptions, { html }) {\n\t\t\treturn `<div class=\"ejs-embed\">${html}</div>`\n\t\t},\n\n\t\t_onLoadInternal({ input, result }, { twttr, onLoad }) {\n\t\t\tif (isServicePresent('twitter', result) && twttr && isDom(input)) {\n\t\t\t\ttwttr.widgets.load(input)\n\t\t\t\ttwttr.events.bind(\"loaded\", onLoad)\n\t\t\t}\n\t\t}\n\t}\n\n\tconst pluginOptions = extend({}, defaultOptions, opts, {\n\t\t_process\n\t})\n\n\tif (!opts.regex) {\n\t\tpluginOptions.regex = getRegex(pluginOptions.exclude)\n\t}\n\n\treturn base(pluginOptions)\n}\n\nnoEmbed.id = name\n\nexport default noEmbed\n","import isServer from \"is-server\"\n\nlet count = 0\n\nfunction jsonP(url) {\n\treturn new Promise(resolve => {\n\t\tconst cb = `__c${count++}`\n\t\tconst param = \"callback\"\n\t\tconst query = `${param}=${cb}`\n\t\tconst script = document.createElement(\"script\")\n\n\t\tconst cleanup = () => {\n\t\t\tdocument.head.removeChild(script)\n\t\t\twindow[cb] = () => {}\n\t\t}\n\n\t\twindow[cb] = data => {\n\t\t\tresolve(data)\n\t\t\tcleanup()\n\t\t}\n\n\t\tscript.src = `${url}&${query}`\n\t\tdocument.head.appendChild(script)\n\t})\n}\n\nlet unfetch\nif (isServer()) {\n\tunfetch = require(\"node-fetch\")\n}\n\nexport default unfetch || jsonP\n","\"use strict\";\n\n/* From Twitter's Hogan.js */\n\nvar rAmp = /&/g,\n\trLt = /</g,\n\trGt = />/g,\n\trApos =/\\'/g,\n\trQuot = /\\\"/g,\n\thChars =/[&<>\\\"\\']/;\n\nfunction coerceToString(val) {\n\treturn String((val === null || val === undefined) ? '' : val);\n}\n\nmodule.exports = function(str) {\n\tstr = coerceToString(str);\n\n\treturn hChars.test(str)\n\t\t? str\n\t\t\t.replace(rAmp,'&amp;')\n\t\t\t.replace(rLt,'&lt;')\n\t\t\t.replace(rGt,'&gt;')\n\t\t\t.replace(rApos,'&#39;')\n\t\t\t.replace(rQuot, '&quot;')\n\t\t: str;\n};\n","// Takes plain text and replaces links with HTML anchor elements. Based on\n// https://github.com/thejh/node-linkify\n\"use strict\";\n\n// Link regex\n// See http://daringfireball.net/2010/07/improved_regex_for_matching_urls\nvar rLink = /\\b((?:https?:\\/\\/|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}\\/)(?:[^\\s()<>]+|\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\))+(?:\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\)|[^\\s`!()\\[\\]{};:'\".,<>?«»“”‘’]))/gi;\n\n// Email regex\nvar rEmail = /\\b(([a-zA-Z0-9\\-\\_\\.])+(\\+[a-zA-Z0-9]*)?@[a-zA-Z\\_\\-]+?(\\.[a-zA-Z]{2,6})+)/gim;\n\nvar escape = require(\"html-escape\");\n\nmodule.exports = function(text, options) {\n\tif ( ! options) options = {};\n\n\tvar retval = \"\", cur = 0, match;\n\n\tvar escapeFn = options.escape === false ? function(str) { return str; } : escape;\n\n\twhile (match = rLink.exec(text)) {\n\t\tretval += escapeFn(text.slice(cur, match.index));\n\t\tretval += anchor(match[0], options.attributes);\n\t\tcur = rLink.lastIndex;\n\t}\n\n\tretval += escapeFn(text.slice(cur));\n\tretval = emails(retval, options.attributes);\n\n\treturn retval;\n};\n\n// Return an anchor element for the url\nfunction anchor(url, attrs) {\n\tvar text = escape(url),\n\t\thref = url;\n\n\t// Ensure protocol at beginning of url\n\tif (!/^[a-zA-Z]{1,6}:/.test(href)) {\n\t\thref = 'http://' + href;\n\t}\n\n\tvar attrsString = combine({ href: href }, attrs);\n\n\treturn \"<a \" + attrsString + \">\" + text + \"</a>\";\n}\n\n// combine attrs objects into single string\nfunction combine() {\n\treturn Array.prototype.slice.call(arguments)\n\t\t.map(attributes)\n\t\t.filter(Boolean)\n\t\t.join(\" \");\n}\n\n// Replace emails in text with anchor elements\nfunction emails(text, attrs) {\n\tvar attrsString = attributes(attrs);\n\n\treturn text.replace(rEmail, function(match, email) {\n\t\tvar elAttrs = attributes({ href: \"mailto:\" + email });\n\t\tif (attrsString) {\n\t\t\telAttrs += \" \" + attrsString;\n\t\t}\n\n\t\treturn \"<a \" + elAttrs + \">\" + escape(email) + \"</a>\";\n\t});\n}\n\nfunction attributes(attrs) {\n\tif ( ! attrs) return \"\";\n\treturn Object.keys(attrs).map(function(name) {\n\t\tvar value = attrs[name];\n\t\treturn escape(name) + \"=\\\"\" + escape(value) + \"\\\"\";\n\t}).join(\" \");\n}\n","import extend from \"just-extend\"\nimport linkify from \"html-linkify\"\n\nconst name = \"url\"\n\nexport default function url(opts) {\n\tconst defaultOptions = {\n\t\tattributes: {},\n\n\t\t// setting this to true will mess up characters like \"\n\t\tescape: false\n\t}\n\n\tconst { attributes, escape } = extend({}, defaultOptions, opts)\n\treturn {\n\t\tasync transform(options) {\n\t\t\treturn extend({}, options, {\n\t\t\t\tresult: linkify(options.result, { attributes, escape })\n\t\t\t})\n\t\t}\n\t}\n}\n\nurl.id = name\n","import extend from \"just-extend\"\nimport base from \"./base\"\nimport withoutDetailTemplate from \"../utils/without-detail-template\"\n\nconst name = \"facebook\"\n\nexport default function facebook(opts) {\n\tconst defaultOptions = {\n\t\tname,\n\t\tregex: /(https?:\\/\\/)?www\\.facebook\\.com\\/(?:(videos|posts)\\.php\\?v=\\d+|.*?\\/(videos|posts)\\/\\d+\\/?)/gi,\n\t\theight: 225,\n\t\ttemplate(args, options, { height }) {\n\t\t\tconst url = args[0]\n\t\t\tconst type = url.indexOf(\"/videos/\") < 0 ? \"post\" : \"video\"\n\t\t\treturn withoutDetailTemplate(\n\t\t\t\t`https://www.facebook.com/plugins/${type}.php?href=${url}`,\n\t\t\t\theight,\n\t\t\t\tname\n\t\t\t)\n\t\t}\n\t}\n\n\tconst pluginOptions = extend({}, defaultOptions, opts)\n\treturn base(pluginOptions)\n}\n\nfacebook.id = name\n","import extend from 'just-extend'\nimport base from './base'\n\nconst name = 'instagram'\n\nexport default function instagram (opts) {\n\tconst defaultOptions = {\n\t\tname,\n\t\theight: 440,\n\t\tregex: /((https?:\\/\\/)(www\\.)?instagram.com\\/p\\/[a-zA-Z0-9_\\-\\=]+)(\\/\\?[a-zA-Z0-9_\\-\\=]+)?/gi,\n\t\ttemplate (args, options, {width, height}) {\n\t\t\treturn `<iframe class=\"ejs-embed ejs-instagram\" src=\"${args[1]}/embed\" height=\"${height}\"></iframe>`\n\t\t}\n\t}\n\n\tconst pluginOptions = extend({}, defaultOptions, opts)\n\treturn base(pluginOptions)\n}\n\ninstagram.id = name\n","import {\n\thighlight,\n\temoji,\n\tgithub,\n\tnoEmbed,\n\turl,\n\tyoutube,\n\tfacebook,\n\tmedia,\n\tinstagram\n} from \"../plugins\"\nimport extend from \"just-extend\"\n\nexport default function (options) {\n\tconst defaultOptions = {\n\t\texclude: []\n\t}\n\n\tconst presetOptions = extend({}, defaultOptions, options)\n\n\tconst pluginNames = [\n\t\turl,\n\t\temoji,\n\t\tgithub,\n\t\tnoEmbed,\n\t\tyoutube,\n\t\tfacebook,\n\t\thighlight,\n\t\tmedia,\n\t\tinstagram\n\t]\n\tconst plugins = pluginNames.map(plugin => {\n\t\tconst { id } = plugin\n\t\tconst pluginOptions = presetOptions[id]\n\n\t\tif (presetOptions.exclude.indexOf(plugin.id) === -1) {\n\t\t\tif (id === \"youtube\" || id === \"map\") {\n\t\t\t\treturn plugin(\n\t\t\t\t\textend(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tgAuthKey: options.gAuthKey\n\t\t\t\t\t\t},\n\t\t\t\t\t\tpluginOptions\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t} else if (id === \"noEmbed\") {\n\t\t\t\treturn plugin(\n\t\t\t\t\textend({}, pluginOptions, {\n\t\t\t\t\t\texclude: [\"youtube\"]\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t}\n\t\t\treturn plugin(pluginOptions)\n\t\t}\n\t\treturn null\n\t})\n\n\treturn plugins.filter(plugin => !!plugin)\n}\n","import extend from 'just-extend'\nimport pWaterfall from 'p-waterfall'\nimport isDom from 'is-dom'\nimport { appendEmbedsAtEnd } from './utils/dom'\n// import * as presets from './presets'\n// import * as plugins from './plugins'\n\nfunction isElementPresent ({ input, target }) {\n\treturn isDom(input) || target && isDom(target)\n}\n\nexport default class EmbedJS {\n\tconstructor (options) {\n\t\tconst defaultOptions = {\n\t\t\tplugins: [],\n\t\t\tpreset: null,\n\t\t\tinlineEmbed: true,\n\t\t\treplaceText: false,\n\t\t\t_embeds: [],\n\t\t\t_services: []\n\t\t}\n\n\t\tlet {input, plugins = [], preset} = options\n\t\tif (!input) {\n\t\t\tthrow new Error('You need to pass input element or string in the options object.')\n\t\t}\n\n\t\tconst inputString = isDom(input) ? input.innerHTML : input\n\n\t\tthis.options = extend({}, defaultOptions, options, {\n\t\t\tresult: inputString,\n\t\t\tplugins: preset ? plugins.concat(preset) : plugins,\n\t\t\tinputString\n\t\t})\n\t}\n\n\ttext () {\n\t\tconst options = this.resetOptions()\n\t\tconst transformers = options.plugins.map(p => p.transform)\n\t\treturn pWaterfall(transformers, options)\n\t}\n\n\tresetOptions() {\n\t\treturn extend({}, this.options, {\n\t\t\t_embeds: []\n\t\t})\n\t}\n\n\tload () {\n\t\tthis.options.plugins.forEach(p => p.onLoad && p.onLoad(this.options))\n\t}\n\n\tasync render () {\n\t\tconst { input, target, inlineEmbed } = this.options\n\t\tif (!isElementPresent(this.options)) {\n\t\t\tthrow new Error('You haven\\'t passed the input as an element.')\n\t\t}\n\n\t\tlet options\n\t\tif (isDom(input) && input.classList.contains('ejs-applied')) {\n\t\t\toptions = this.options\n\t\t} else {\n\t\t\toptions = await this.text()\n\n\t\t\tconst element = target || input\n\t\t\telement.innerHTML = inlineEmbed ? options.result : appendEmbedsAtEnd(options)\n\t\t\telement.classList.add('ejs-applied')\n\t\t}\n\n\t\tthis.load()\n\t\treturn options\n\t}\n\n\tdestroy() {\n\t\tconst { inputString, input, target } = this.options\n\t\tif (!isElementPresent(this.options)) {\n\t\t\tthrow new Error('You haven\\'t passed the input as an element.')\n\t\t}\n\t\tconst element = target || input\n\t\telement.innerHTML = inputString\n\t\telement.classList.remove('ejs-applied')\n\t\treturn this.options\n\t}\n}\n\n// EmbedJS.plugins = plugins\n// EmbedJS.presets = presets\n\n\n"],"names":["const","let","pReduce","extend","isServer","name","emojiRegex","kebab","truncate","detailsTemplate","isDom","withoutDetailsTemplate","_process","ytRegex","flatten","pluck","getRegex","unfetch","escape","linkify","media","pWaterfall","this"],"mappings":"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"}