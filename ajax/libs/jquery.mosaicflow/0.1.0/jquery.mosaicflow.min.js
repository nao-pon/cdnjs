/*! jQuery Mosaic Flow v0.1.0 by Artem Sapegin - http://sapegin.github.com/jquery.mosaicflow/ - Licensed MIT */
(function(i){"function"==typeof define&&define.amd?define(["jquery"],i):i(jQuery)})(function(i){"use strict";function t(i,t){this.container=i,this.options=t,this.init()}function n(i){function t(i,t){return t.toUpper()}var n={},o=i.data();for(var s in o)n[s.replace(/-(\w)/g,t)]=o[s];return n}i.fn.mosaicflow=function(o){var s=i(this);return o=i.extend({},i.fn.mosaicflow.defaults,o,n(s)),this.each(function(){new t(s,o)})},i.fn.mosaicflow.defaults={itemSelector:"> *",columnClass:"mosaicflow__column",minItemWidth:240},t.prototype={init:function(){this.items=this.container.find(this.options.itemSelector),this.columns=[],this.refill(),i(window).resize(i.proxy(this.refill,this))},refill:function(){this.numberOfColumns=Math.floor(this.container.width()/this.options.minItemWidth);var i=this.ensureColumns();i&&(this.fillColumns(),this.columns.filter(":hidden").remove())},ensureColumns:function(){var t=this.columns.length,n=this.numberOfColumns;if(n>t)for(var o=n-t,s=0;o>s;s++){var e=i("<div>",{"class":this.options.columnClass});this.container.append(e)}else if(t>n)for(var r=t;r>=n;)this.columns.eq(r).hide(),r--;return n!==t?(this.columns=this.container.find("."+this.options.columnClass),this.columns.width(100/n+"%"),!0):!1},fillColumns:function(){for(var i=this.numberOfColumns,t=this.items.length,n={},o=[],s=0;i>s;s++){var e=this.columns.eq(s);o[s]=0;for(var r=s;t>r;r+=i){var l=this.items.eq(r);e.append(l);var a=parseInt(l.find("img").attr("height"),10);n[l.attr("id")]=a,o[s]+=a}}this.levelBottomEdge(n,o),this.container.trigger("mosaicflow-layout")},levelBottomEdge:function(t,n){for(;;){var o=i.inArray(Math.min.apply(null,n),n),s=i.inArray(Math.max.apply(null,n),n);if(o===s)return;var e=this.columns.eq(s).children().last(),r=t[e.attr("id")],l=n[o],a=n[s],f=l+r;if(f>=a)return;this.columns.eq(o).append(e),n[s]-=r,n[o]+=r}}},i(function(){i(".mosaicflow").mosaicflow()})});