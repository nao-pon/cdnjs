{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["export function h(name, props) {\n  var node\n  var stack = []\n  var children = []\n\n  for (var i = arguments.length; i-- > 2; ) {\n    stack.push(arguments[i])\n  }\n\n  while (stack.length) {\n    if (Array.isArray((node = stack.pop()))) {\n      for (i = node.length; i--; ) {\n        stack.push(node[i])\n      }\n    } else if (null == node || true === node || false === node) {\n    } else {\n      children.push(typeof node === \"number\" ? node + \"\" : node)\n    }\n  }\n\n  return typeof name === \"string\"\n    ? {\n        name: name,\n        props: props || {},\n        children: children\n      }\n    : name(props || {}, children)\n}\n\nexport function app(state, actions, view, container) {\n  var patchLock\n  var lifecycle = []\n  var root = container && container.children[0]\n  var node = vnode(root, [].map)\n\n  repaint(init([], (state = copy(state)), (actions = copy(actions))))\n\n  return actions\n\n  function vnode(element, map) {\n    return (\n      element && {\n        name: element.nodeName.toLowerCase(),\n        props: {},\n        children: map.call(element.childNodes, function(element) {\n          return 3 === element.nodeType\n            ? element.nodeValue\n            : vnode(element, map)\n        })\n      }\n    )\n  }\n\n  function render(next) {\n    patchLock = !patchLock\n    next = view(state, actions)\n\n    if (container && !patchLock) {\n      root = patch(container, root, node, (node = next))\n    }\n\n    while ((next = lifecycle.pop())) next()\n  }\n\n  function repaint() {\n    if (!patchLock) {\n      patchLock = !patchLock\n      setTimeout(render)\n    }\n  }\n\n  function copy(a, b) {\n    var target = {}\n\n    for (var i in a) target[i] = a[i]\n    for (var i in b) target[i] = b[i]\n\n    return target\n  }\n\n  function set(path, value, source, target) {\n    if (path.length) {\n      target[path[0]] =\n        1 < path.length ? set(path.slice(1), value, source[path[0]], {}) : value\n      return copy(source, target)\n    }\n    return value\n  }\n\n  function get(path, source) {\n    for (var i = 0; i < path.length; i++) {\n      source = source[path[i]]\n    }\n    return source\n  }\n\n  function init(path, slice, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              slice = get(path, state)\n\n              if (typeof (data = action(data)) === \"function\") {\n                data = data(slice, actions)\n              }\n\n              if (data && data !== slice && !data.then) {\n                repaint((state = set(path, copy(slice, data), state, {})))\n              }\n\n              return data\n            }\n          })(key, actions[key])\n        : init(\n            path.concat(key),\n            (slice[key] = slice[key] || {}),\n            (actions[key] = copy(actions[key]))\n          )\n    }\n  }\n\n  function getKey(node) {\n    return node && node.props ? node.props.key : null\n  }\n\n  function setElementProp(element, name, value, oldValue) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      for (var i in copy(oldValue, value)) {\n        element[name][i] = null == value || null == value[i] ? \"\" : value[i]\n      }\n    } else {\n      try {\n        element[name] = null == value ? \"\" : value\n      } catch (_) {}\n\n      if (typeof value !== \"function\") {\n        if (null == value || false === value) {\n          element.removeAttribute(name)\n        } else {\n          element.setAttribute(name, value)\n        }\n      }\n    }\n  }\n/** @param node {{props: {oncreate: function(Element)} }} */\n\nfunction createElement(node, isSVG) {\n  var element\n  if (typeof node === \"string\") {\n    element = document.createTextNode(node)\n  } else {\n    element = (isSVG = isSVG || \"svg\" === node.name)\n      ? document.createElementNS(\"http://www.w3.org/2000/svg\", node.name)\n      : document.createElement(node.name)\n\n    if (node.props.oncreate) {\n      lifecycle.push(function() {\n        node.props.oncreate(element)\n      })\n    }\n\n    for (var i = 0; i < node.children.length; i++) {\n      element.appendChild(createElement(node.children[i], isSVG))\n    }\n\n    for (var name in node.props) {\n      setElementProp(element, name, node.props[name])\n    }\n  }\n  return element\n}\n\n  function updateElement(element, oldProps, props) {\n    for (var name in copy(oldProps, props)) {\n      if (\n        props[name] !==\n        (\"value\" === name || \"checked\" === name\n          ? element[name]\n          : oldProps[name])\n      ) {\n        setElementProp(element, name, props[name], oldProps[name])\n      }\n    }\n\n    if (props.onupdate) {\n      lifecycle.push(function() {\n        props.onupdate(element, oldProps)\n      })\n    }\n  }\n\n  function removeChildren(element, node, props) {\n    if ((props = node.props)) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (props.ondestroy) {\n        props.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node, cb) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    if (node.props && (cb = node.props.onremove)) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSVG, nextSibling) {\n    if (node === oldNode) {\n    } else if (null == oldNode) {\n      element = parent.insertBefore(createElement(node, isSVG), element)\n    } else if (node.name && node.name === oldNode.name) {\n      updateElement(element, oldNode.props, node.props)\n\n      var oldElements = []\n      var oldKeyed = {}\n      var newKeyed = {}\n\n      for (var i = 0; i < oldNode.children.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldChild = oldNode.children[i]\n        var oldKey = getKey(oldChild)\n\n        if (null != oldKey) {\n          oldKeyed[oldKey] = [oldElements[i], oldChild]\n        }\n      }\n\n      var i = 0\n      var j = 0\n\n      while (j < node.children.length) {\n        var oldChild = oldNode.children[i]\n        var newChild = node.children[j]\n\n        var oldKey = getKey(oldChild)\n        var newKey = getKey(newChild)\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (null == newKey) {\n          if (null == oldKey) {\n            patch(element, oldElements[i], oldChild, newChild, isSVG)\n            j++\n          }\n          i++\n        } else {\n          var recyledNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, recyledNode[0], recyledNode[1], newChild, isSVG)\n            i++\n          } else if (recyledNode[0]) {\n            patch(\n              element,\n              element.insertBefore(recyledNode[0], oldElements[i]),\n              recyledNode[1],\n              newChild,\n              isSVG\n            )\n          } else {\n            patch(element, oldElements[i], null, newChild, isSVG)\n          }\n\n          j++\n          newKeyed[newKey] = newChild\n        }\n      }\n\n      while (i < oldNode.children.length) {\n        var oldChild = oldNode.children[i]\n        if (null == getKey(oldChild)) {\n          removeElement(element, oldElements[i], oldChild)\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[oldKeyed[i][1].props.key]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    } else if (node.name === oldNode.name) {\n      element.nodeValue = node\n    } else {\n      element = parent.insertBefore(\n        createElement(node, isSVG),\n        (nextSibling = element)\n      )\n      removeElement(parent, nextSibling, oldNode)\n    }\n    return element\n  }\n}\n"],"names":[],"mappings":"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"}