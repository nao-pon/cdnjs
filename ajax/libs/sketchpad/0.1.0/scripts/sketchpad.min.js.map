{"version":3,"sources":["sketchpad.js"],"names":["Sketchpad","config","key","this","constructor","prototype","bind","hasOwnProperty","element","$","_width","width","attr","_height","height","color","penSize","readOnly","css","cursor","strokes","_currentStroke","size","lines","undoHistory","animateIds","_sketching","reset","console","error","_cursorPosition","event","x","pageX","canvas","offset","left","y","pageY","top","_draw","start","end","_stroke","_erase","compositeOperation","context","save","lineJoin","lineCap","strokeStyle","lineWidth","globalCompositeOperation","beginPath","moveTo","lineTo","closePath","stroke","restore","_mouseDown","_lastPosition","addEventListener","_mouseMove","_mouseUp","push","extend","removeEventListener","currentPosition","_touchStart","preventDefault","changedTouches","_touchMove","_touchEnd","_touchCancel","_touchLeave","getContext","redraw","drawStroke","j","length","line","i","toObject","toJSON","JSON","stringify","animate","ms","loop","loopDelay","clear","delay","callback","setTimeout","cancelAnimation","clearTimeout","clearRect","undo","pop","redo"],"mappings":"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"}