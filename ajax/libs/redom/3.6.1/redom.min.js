!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.redom={})}(this,function(e){"use strict";var t="#".charCodeAt(0),n=".".charCodeAt(0),i=function(e){for(var i=null,r=null,o=null,u=0,l="",s=0;s<=e.length;s++){var a=e.charCodeAt(s),d=a===t,f=a===n,_=!a;d||f||_?(0===u?i=0===s?"div":l:1===u?r=l:o?o+=" "+l:o=l,d?u=1:f&&(u=2),l=""):l+=e[s]}return{tag:i,id:r,className:o}},r=function(e,t){var n=i(e),r=n.tag,o=n.id,u=n.className,l=t?document.createElementNS(t,r):document.createElement(r);return o&&(l.id=o),u&&(t?l.setAttribute("class",u):l.className=u),l},o=["onmount","onunmount"],u=function(e,t,n){var i=m(e),r=m(t);t===r&&r.__redom_view&&(t=r.__redom_view),t!==r&&(r.__redom_view=t);var o=r.__redom_mounted,u=r.parentNode;return o&&u!==i&&a(t,r,u),null!=n?i.insertBefore(r,m(n)):i.appendChild(r),s(t,r,i,u),t},l=function(e,t){var n=m(e),i=m(t);return t===i&&i.__redom_view&&(t=i.__redom_view),i.parentNode&&(a(t,i,n),n.removeChild(i)),t},s=function(e,t,n,i){for(var r=t.__redom_lifecycle||(t.__redom_lifecycle={}),u=n===i,l=!1,s=0;s<o.length;s++){var a=o[s];!u&&e!==t&&a in e&&(r[a]=(r[a]||0)+1),r[a]&&(l=!0)}if(l){var f=n,_=!1;if((u||!_&&f&&f.__redom_mounted)&&(d(t,u?"onremount":"onmount"),_=!0),!u)for(;f;){var c=f.parentNode,v=f.__redom_lifecycle||(f.__redom_lifecycle={});for(var h in r)v[h]=(v[h]||0)+r[h];!_&&(f===document||c&&c.__redom_mounted)&&(d(f,u?"onremount":"onmount"),_=!0),f=c}}else t.__redom_mounted=!0},a=function(e,t,n){var i=t.__redom_lifecycle;if(i){var r=n;for(t.__redom_mounted&&d(t,"onunmount");r;){var o=r.__redom_lifecycle||(r.__redom_lifecycle={}),u=!1;for(var l in i)o[l]&&(o[l]-=i[l]),o[l]&&(u=!0);u||(r.__redom_lifecycle=null),r=r.parentNode}}else t.__redom_mounted=!1},d=function(e,t){"onmount"===t?e.__redom_mounted=!0:"onunmount"===t&&(e.__redom_mounted=!1);var n=e.__redom_lifecycle;if(n){var i=e.__redom_view,r=0;i&&i[t]&&i[t]();for(var o in n)o&&r++;if(r)for(var u=e.firstChild;u;){var l=u.nextSibling;d(u,t),u=l}}},f=function(e,t,n){var i=m(e);if(void 0!==n)i.style[t]=n;else if(p(t))i.setAttribute("style",t);else for(var r in t)f(i,r,t[r])},_=function(e,t,n){var i=m(e),r=i instanceof SVGElement;if(void 0!==n)"style"===t?f(i,n):r&&y(n)?i[t]=n:!r&&(t in i||y(n))?i[t]=n:i.setAttribute(t,n);else for(var o in t)_(i,o,t[o])},c=function(e){return document.createTextNode(e)},v=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];(0===i||i)&&("function"==typeof i?i(e):p(i)||w(i)?e.appendChild(c(i)):g(m(i))?u(e,i):i.length?v(e,i):"object"==typeof i&&_(e,i))}},h=function(e){return p(e)?x(e):m(e)},m=function(e){return e.nodeType&&e||!e.el&&e||m(e.el)},p=function(e){return"string"==typeof e},w=function(e){return"number"==typeof e},y=function(e){return"function"==typeof e},g=function(e){return e&&e.nodeType},b={},N=function(e){return b[e]||(b[e]=r(e))},x=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var i;if(p(e))i=N(e).cloneNode(!1);else{if(!g(e))throw new Error("At least one argument required");i=e.cloneNode(!1)}return v(i,t),i};x.extend=function(e){var t=N(e);return x.bind(this,t)};var A=x,C=function(e,t){if(void 0===t.length)return C(e,[t]);for(var n=m(e).firstChild,i=0;i<t.length;i++){var r=t[i];r&&(m(r)!==n?u(e,r,n):n=n.nextSibling)}for(;n;){var o=n.nextSibling;l(e,n),n=o}},V=function(e){return function(t){return t[e]}},D=function(e,t,n,i){return new S(e,t,n,i)},S=function(e,t,n,i){this.__redom_list=!0,this.View=t,this.initData=i,this.views=[],this.el=h(e),null!=n&&(this.lookup={},this.key=y(n)?n:V(n))};S.prototype.update=function(e,t){var n=this;void 0===e&&(e=[]);for(var i=this.View,r=this.key,o=null!=r,u=this.initData,s=new Array(e.length),a=this.views,d=r&&{},f=r&&this.lookup,_=0;_<e.length;_++){var c=e[_],v=void 0;if(o){var h=r(c);v=f[h]||new i(u,c,_,e),d[h]=v,v.__redom_id=h}else v=a[_]||new i(u,c,_,e);s[_]=v,m(v.el).__redom_view=v,v.update&&v.update(c,_,e,t)}if(o)for(var p=0;p<a.length;p++){var w=a[p].__redom_id;w in d||l(n,f[w])}C(this,s),o&&(this.lookup=d),this.views=s},S.extend=function(e,t,n,i){return S.bind(S,e,t,n,i)},D.extend=S.extend;var k=function(e,t){this.el=c(""),this.visible=!1,this.view=null,this._placeholder=this.el,this._View=e,this._initData=t};k.prototype.update=function(e,t){var n=this._placeholder,i=this.el.parentNode;if(e){if(!this.visible){var r=new(0,this._View)(this._initData);this.el=m(r.el),this.view=r,u(i,this.el,n),l(i,n)}this.view.update&&this.view.update(t)}else this.visible&&(u(i,n,this.el),l(i,this.el),this.el=n,this.view=null);this.visible=e};var E=function(e,t,n){this.el=h(e),this.Views=t,this.initData=n};E.prototype.update=function(e,t){if(e!==this.route){var n=this.Views[e];this.view=n&&new n(this.initData,t),this.route=e,C(this.el,[this.view])}this.view&&this.view.update&&this.view.update(t,e)};var j={},T=function(e){return j[e]||(j[e]=r(e,"http://www.w3.org/2000/svg"))},q=function(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];var i;if(p(e))i=T(e).cloneNode(!1);else{if(!g(e))throw new Error("At least one argument required");i=e.cloneNode(!1)}return v(i,t),i};q.extend=function(e){var t=T(e);return q.bind(this,t)},e.html=x,e.el=A,e.list=D,e.List=S,e.mount=u,e.unmount=l,e.place=function(e,t){return new k(e,t)},e.Place=k,e.router=function(e,t,n){return new E(e,t,n)},e.Router=E,e.setAttr=_,e.setStyle=f,e.setChildren=C,e.svg=q,e.text=c,Object.defineProperty(e,"__esModule",{value:!0})});