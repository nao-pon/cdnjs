{"version":3,"sources":["handler/html.js"],"names":["provide","abstractHandler","regexMatchType","container","document","createElement","HandlerHtml","prototype","validate","type","test","onPreRequest","dependency","pathname","url","slice","length","process","source","node","fragment","createDocumentFragment","innerHTML","firstElementChild","appendChild","parseHtml","extends"],"mappings":";CAAC,WACG,aAyCAA,SAAS,4BAvCT,SAAoBC,GAChB,IACIC,EAAiB,cACjBC,EAAYC,SAASC,cAAc,QAevC,SAASC,KAkBT,OAhBAA,EAAYC,WACRC,SAAU,SAASC,GACf,OAAOP,EAAeQ,KAAKD,IAE/BE,aAAc,SAASC,GACnB,IAAIC,EAAWD,EAAWE,IAAID,SAE9BD,EAAWE,IAAID,SA1BV,UA0BqBA,EAASE,OA1B9B,QA0B4CC,QAAqBH,EA1BjE,QA0BqFA,GAE9FI,QAAS,SAASL,GACdZ,QAAQ,WACJ,OA1BZ,SAAmBkB,GACf,IACIC,EADAC,EAAWhB,SAASiB,yBAKxB,IAFAlB,EAAUmB,UAAYJ,EAEfC,EAAOhB,EAAUoB,mBACpBH,EAASI,YAAYL,GAGzB,OAAOC,EAgBQK,CAAUb,EAAWM,YAKjC,IAAIZ,EAAYoB,QAAQzB,MAvCvC","file":"html.js","sourcesContent":["(function() {\n    'use strict';\n\n    function definition(abstractHandler) {\n        var suffix = '.html',\n            regexMatchType = /^text\\/html/,\n            container = document.createElement('body');\n\n        function parseHtml(source) {\n            var fragment = document.createDocumentFragment(),\n                node;\n\n            container.innerHTML = source;\n\n            while (node = container.firstElementChild) {\n                fragment.appendChild(node);\n            }\n\n            return fragment;\n        }\n\n        function HandlerHtml() {}\n\n        HandlerHtml.prototype = {\n            validate: function(type) {\n                return regexMatchType.test(type);\n            },\n            onPreRequest: function(dependency) {\n                var pathname = dependency.url.pathname;\n\n                dependency.url.pathname = pathname.slice(-suffix.length) !== suffix ? pathname + suffix : pathname;\n            },\n            process: function(dependency) {\n                provide(function() {\n                    return parseHtml(dependency.source);\n                });\n            }\n        };\n\n        return new(HandlerHtml.extends(abstractHandler));\n    }\n\n    provide(['/demand/abstract/handler'], definition);\n}());"]}