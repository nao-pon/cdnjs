{"version":3,"sources":["handler/json.js"],"names":["provide","abstractHandler","regexMatchType","HandlerJson","prototype","validate","type","test","onPreRequest","dependency","pathname","url","slice","length","process","data","JSON","parse","source","extends"],"mappings":";CAAC,WACG,aA6BAA,SAAS,4BA3BT,SAAoBC,GAChB,IACIC,EAAiB,qBAErB,SAASC,KAoBT,OAlBAA,EAAYC,WACRC,SAAU,SAASC,GACf,OAAOJ,EAAeK,KAAKD,IAE/BE,aAAc,SAASC,GACnB,IAAIC,EAAWD,EAAWE,IAAID,SAE9BD,EAAWE,IAAID,SAZV,UAYqBA,EAASE,OAZ9B,QAY4CC,QAAqBH,EAZjE,QAYqFA,GAE9FI,QAAS,SAASL,GACd,IAAIM,EAAOC,KAAKC,MAAMR,EAAWS,QAEjClB,QAAQ,WACJ,OAAOe,MAKZ,IAAIZ,EAAYgB,QAAQlB,MA3BvC","file":"json.js","sourcesContent":["(function() {\n    'use strict';\n\n    function definition(abstractHandler) {\n        var suffix = '.json',\n            regexMatchType = /^application\\/json/;\n\n        function HandlerJson() {}\n\n        HandlerJson.prototype = {\n            validate: function(type) {\n                return regexMatchType.test(type);\n            },\n            onPreRequest: function(dependency) {\n                var pathname = dependency.url.pathname;\n\n                dependency.url.pathname = pathname.slice(-suffix.length) !== suffix ? pathname + suffix : pathname;\n            },\n            process: function(dependency) {\n                var data = JSON.parse(dependency.source);\n\n                provide(function() {\n                    return data;\n                });\n            }\n        };\n\n        return new(HandlerJson.extends(abstractHandler));\n    }\n\n    provide(['/demand/abstract/handler'], definition);\n}());"]}