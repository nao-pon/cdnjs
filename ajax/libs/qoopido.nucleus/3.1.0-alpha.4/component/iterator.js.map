{"version":3,"sources":["component/iterator.js"],"names":["provide","Emitter","functionMerge","storage","getDataProperty","uuid","property","properties","data","ComponentIterator","settings","self","call","this","console","log","index","setData","prototype","length","getStorageProperty","item","initial","seek","parseInt","first","last","previous","loop","next","extends"],"mappings":"CAKC,WACA,aAsHAA,SAAU,aAAc,qBApHxB,SAAoBC,EAASC,GAC5B,IAAIC,KAUJ,SAASC,EAAgBC,EAAMC,GAC9B,IAAIC,EAEJ,IAAIA,EAAaJ,EAAQE,KAAUE,EAAWC,KAC7C,OAAOD,EAAWC,KAAKF,GAIzB,SAASG,EAAkBD,EAAME,GAChC,IAAIC,EAAOV,EAAQW,KAAKC,MAYxB,OAVAC,QAAQC,IAAI,OAAQJ,EAAKN,MAEzBF,EAAQQ,EAAKN,OACZK,SAAUR,KAAkBO,EAAkBC,SAAUA,GACxDM,MAAU,KACVR,KAAU,MAGXA,GAAQG,EAAKM,QAAQT,GAEdG,EAiFR,OA9EAF,EAAkBS,WAGfC,aACC,OAAOf,EAAgBS,KAAKR,KAAM,WAAa,GAGhDW,YACC,OAxCJ,SAA4BX,EAAMC,GACjC,IAAIC,EAEJ,GAAGA,EAAaJ,EAAQE,GACvB,OAAOE,EAAWD,GAoCTc,CAAmBP,KAAKR,KAAM,UAGtCgB,WACC,OAAOjB,EAAgBS,KAAKR,KAAMQ,KAAKG,QAGzCC,QAAS,SAAST,GACjB,IACCH,EAAME,EAAYG,EADfC,EAAOE,KAeX,MAZmB,iBAATL,GAAqBA,EAAKW,SACnCd,EAAaM,EAAKN,KAElBK,GADAH,EAAaJ,EAAQE,IACGK,SAExBH,EAAWC,KAAOA,EAEM,OAArBE,EAASY,SACXX,EAAKY,KAAKb,EAASY,UAIdX,GAERY,KAAM,SAASP,GACd,IACCT,EAAaJ,EADGU,KACUR,MAQ3B,OANAW,EAAQQ,SAASR,EAAO,OAEXT,EAAWS,YAA2C,IAA3BT,EAAWC,KAAKQ,KACvDT,EAAWS,MAAQA,GANHH,MAWlBY,MAAO,WACN,OAAOZ,KAAKU,KAAK,IAElBG,KAAM,WAGL,OAFWb,KAECU,KAFDV,KAEWM,OAAS,IAEhCQ,SAAU,WACT,IAGCX,EAHGL,EAAaE,KAChBR,EAAaM,EAAKN,KAClBK,EAAaP,EAAQE,GAAMK,SAM5B,OAHAM,GAA2B,IAAlBN,EAASkB,MAAkBjB,EAAKK,MAAQ,GAAKL,EAAKQ,OAASR,EAAKK,MAAQ,EACjFA,GAA2B,IAAlBN,EAASkB,MAAiBZ,EAAQ,EAAKL,EAAKQ,OAASH,EAAQA,EAE/DL,EAAKY,KAAKP,IAElBa,KAAM,WACL,IAGCb,EAHGL,EAAaE,KAChBR,EAAaM,EAAKN,KAMnB,OAFAW,GAA2B,IAHbb,EAAQE,GAAMK,SAGVkB,MAAkBjB,EAAKK,MAAQ,GAAKL,EAAKQ,OAASR,EAAKK,MAAQ,EAE1EL,EAAKY,KAAKP,KAIpBP,EAAkBC,UAAakB,MAAM,EAAMN,QAAS,GAE7Cb,EAAkBqB,QAAQ7B,KApHnC","file":"iterator.js","sourcesContent":["/**\n * @require ../emitter\n * @require ../function/merge\n */\n\n(function() {\n\t'use strict';\n\n\tfunction definition(Emitter, functionMerge) {\n\t\tvar storage = {};\n\n\t\tfunction getStorageProperty(uuid, property) {\n\t\t\tvar properties;\n\n\t\t\tif(properties = storage[uuid]) {\n\t\t\t\treturn properties[property];\n\t\t\t}\n\t\t}\n\n\t\tfunction getDataProperty(uuid, property) {\n\t\t\tvar properties;\n\n\t\t\tif((properties = storage[uuid]) && properties.data) {\n\t\t\t\treturn properties.data[property];\n\t\t\t}\n\t\t}\n\n\t\tfunction ComponentIterator(data, settings) {\n\t\t\tvar self = Emitter.call(this);\n\n\t\t\tconsole.log('here', self.uuid);\n\n\t\t\tstorage[self.uuid] = {\n\t\t\t\tsettings: functionMerge({}, ComponentIterator.settings, settings),\n\t\t\t\tindex:    null,\n\t\t\t\tdata:     null\n\t\t\t};\n\n\t\t\tdata && self.setData(data);\n\n\t\t\treturn self;\n\t\t}\n\n\t\tComponentIterator.prototype = {\n\t\t\t// properties\n\t\t\t\t// length\n\t\t\t\t\tget length() {\n\t\t\t\t\t\treturn getDataProperty(this.uuid, 'length') || 0;\n\t\t\t\t\t},\n\t\t\t\t// index\n\t\t\t\t\tget index() {\n\t\t\t\t\t\treturn getStorageProperty(this.uuid, 'index');\n\t\t\t\t\t},\n\t\t\t\t// item\n\t\t\t\t\tget item() {\n\t\t\t\t\t\treturn getDataProperty(this.uuid, this.index);\n\t\t\t\t\t},\n\t\t\t// methods\n\t\t\t\tsetData: function(data) {\n\t\t\t\t\tvar self = this,\n\t\t\t\t\t\tuuid, properties, settings;\n\n\t\t\t\t\tif(typeof data === 'object' && data.length) {\n\t\t\t\t\t\tuuid       = self.uuid;\n\t\t\t\t\t\tproperties = storage[uuid];\n\t\t\t\t\t\tsettings   = properties.settings;\n\n\t\t\t\t\t\tproperties.data = data;\n\n\t\t\t\t\t\tif(settings.initial !== null) {\n\t\t\t\t\t\t\tself.seek(settings.initial);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn self;\n\t\t\t\t},\n\t\t\t\tseek: function(index) {\n\t\t\t\t\tvar self       = this,\n\t\t\t\t\t\tproperties = storage[self.uuid];\n\n\t\t\t\t\tindex = parseInt(index, 10);\n\n\t\t\t\t\tif(index !== properties.index && typeof properties.data[index] !== 'undefined') {\n\t\t\t\t\t\tproperties.index = index;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn self;\n\t\t\t\t},\n\t\t\t\tfirst: function() {\n\t\t\t\t\treturn this.seek(0);\n\t\t\t\t},\n\t\t\t\tlast: function() {\n\t\t\t\t\tvar self = this;\n\n\t\t\t\t\treturn self.seek(self.length - 1);\n\t\t\t\t},\n\t\t\t\tprevious: function() {\n\t\t\t\t\tvar self       = this,\n\t\t\t\t\t\tuuid       = self.uuid,\n\t\t\t\t\t\tsettings   = storage[uuid].settings,\n\t\t\t\t\t\tindex;\n\n\t\t\t\t\tindex = (settings.loop === true) ? (self.index - 1) % self.length : self.index - 1;\n\t\t\t\t\tindex = (settings.loop === true && index < 0) ? self.length + index : index;\n\n\t\t\t\t\treturn self.seek(index);\n\t\t\t\t},\n\t\t\t\tnext: function() {\n\t\t\t\t\tvar self       = this,\n\t\t\t\t\t\tuuid       = self.uuid,\n\t\t\t\t\t\tsettings   = storage[uuid].settings,\n\t\t\t\t\t\tindex;\n\n\t\t\t\t\tindex = (settings.loop === true) ? (self.index + 1) % self.length : self.index + 1;\n\n\t\t\t\t\treturn self.seek(index);\n\t\t\t\t}\n\t\t};\n\n\t\tComponentIterator.settings = { loop: true, initial: 0 };\n\n\t\treturn ComponentIterator.extends(Emitter);\n\t}\n\n\tprovide([ '../emitter', '../function/merge' ], definition);\n}());\n"]}