/*! OOjs v2.2.0 | https://oojs.mit-license.org */
!function(t){"use strict";var e={},r=e.hasOwnProperty,i=e.toString;function n(t,e,r){var i,n,o={},s=[];for(i=0,n=e.length;i<n;i++)o[e[i]]=!0;for(i=0,n=t.length;i<n;i++)!!o[t[i]]===r&&s.push(t[i]);return s}e.initClass=function(t){t.static=t.static||{}},e.inheritClass=function(t,r){var i;if(!r)throw new Error("inheritClass: Origin is not a function (actually "+r+")");if(t.prototype instanceof r)throw new Error("inheritClass: Target already inherits from origin");i=t.prototype.constructor,t.super=t.parent=r,t.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),e.initClass(r),t.static=Object.create(r.static)},e.mixinClass=function(t,i){var n;if(!i)throw new Error("mixinClass: Origin is not a function (actually "+i+")");for(n in i.prototype)"constructor"!==n&&r.call(i.prototype,n)&&(t.prototype[n]=i.prototype[n]);if(e.initClass(t),i.static)for(n in i.static)r.call(i.static,n)&&(t.static[n]=i.static[n]);else e.initClass(i)},e.isSubclass=function(t,e){return t===e||t.prototype instanceof e},e.getProp=function(t){var e,r=t;for(e=1;e<arguments.length;e++){if(null==r)return;r=r[arguments[e]]}return r},e.setProp=function(t){var e,r=t;if(!(Object(t)!==t||arguments.length<2)){for(e=1;e<arguments.length-2;e++){if(void 0===r[arguments[e]]&&(r[arguments[e]]={}),Object(r[arguments[e]])!==r[arguments[e]])return;r=r[arguments[e]]}r[arguments[arguments.length-2]]=arguments[arguments.length-1]}},e.deleteProp=function(t){var r,i=t,n=[i];if(!(Object(t)!==t||arguments.length<2)){for(r=1;r<arguments.length-1;r++){if(void 0===i[arguments[r]]||Object(i[arguments[r]])!==i[arguments[r]])return;i=i[arguments[r]],n.push(i)}for(delete i[arguments[r]];n.length>1&&(i=n.pop())&&e.isPlainObject(i)&&!Object.keys(i).length;)delete n[n.length-1][arguments[n.length]]}},e.cloneObject=function(t){var e,i;for(e in i=Object.create(t.constructor.prototype),t)r.call(t,e)&&(i[e]=t[e]);return i},e.getObjectValues=function(t){var e,i;if(t!==Object(t))throw new TypeError("Called on non-object");for(e in i=[],t)r.call(t,e)&&(i[i.length]=t[e]);return i},e.binarySearch=function(t,e,r){for(var i,n,o=0,s=t.length;o<s;)if((n=e(t[i=o+s>>1]))<0)s=i;else{if(!(n>0))return i;o=i+1}return r?s:null},e.compare=function(t,i,n){var o,s,c,a;if(t===i)return!0;if(i=i||{},"number"==typeof(t=t||{}).nodeType&&"function"==typeof t.isEqualNode)return t.isEqualNode(i);for(a in t)if(r.call(t,a)&&void 0!==t[a]&&t[a]!==i[a]&&((c=typeof(o=t[a]))!==typeof(s=i[a])||("string"===c||"number"===c||"boolean"===c)&&o!==s||o===Object(o)&&!e.compare(o,s,!0)))return!1;return!!n||e.compare(i,t,!0)},e.copy=function(t,r,i){var n,o;if(i&&void 0!==(o=i(t)))return o;if(Array.isArray(t))o=new Array(t.length);else{if(t&&"function"==typeof t.clone)return r?r(t.clone()):t.clone();if(t&&"function"==typeof t.cloneNode)return r?r(t.cloneNode(!0)):t.cloneNode(!0);if(!e.isPlainObject(t))return r?r(t):t;o={}}for(n in t)o[n]=e.copy(t[n],r,i);return o},e.getHash=function(t){return JSON.stringify(t,e.getHash.keySortReplacer)},e.getHash.keySortReplacer=function(t,e){var r,i,n,o;if(e&&"function"==typeof e.getHashObject&&(e=e.getHashObject()),Array.isArray(e)||Object(e)!==e)return e;for(r={},n=0,o=(i=Object.keys(e).sort()).length;n<o;n+=1)r[i[n]]=e[i[n]];return r},e.unique=function(t){return t.reduce(function(t,e){return-1===t.indexOf(e)&&t.push(e),t},[])},e.simpleArrayUnion=function(){var t,e,r,i,n,o={},s=[];for(t=0,e=arguments.length;t<e;t++)for(i=0,n=(r=arguments[t]).length;i<n;i++)o[r[i]]||(o[r[i]]=!0,s.push(r[i]));return s},e.simpleArrayIntersection=function(t,e){return n(t,e,!0)},e.simpleArrayDifference=function(t,e){return n(t,e,!1)},e.isPlainObject=function(t){var e;return!(!t||"[object Object]"!==i.call(t))&&(!(e=Object.getPrototypeOf(t))||r.call(e,"isPrototypeOf"))},function(){function t(t,e){if("string"==typeof t){if(null==e)throw new Error('Method name "'+t+'" has no context.');if("function"!=typeof e[t])throw new Error('Property "'+t+'" is not a function')}else if("function"!=typeof t)throw new Error("Invalid callback. Function or method name expected.")}function i(t,e,i){(r.call(t.bindings,e)?t.bindings[e]:t.bindings[e]=[]).push(i)}e.EventEmitter=function(){this.bindings={}},e.initClass(e.EventEmitter),e.EventEmitter.prototype.on=function(e,r,n,o){return t(r,o),i(this,e,{method:r,args:n,context:arguments.length<4?null:o,once:!1}),this},e.EventEmitter.prototype.once=function(e,r){return t(r),i(this,e,{method:r,args:void 0,context:null,once:!0}),this},e.EventEmitter.prototype.off=function(e,i,n){var o,s;if(1===arguments.length)return delete this.bindings[e],this;if(t(i,n),!r.call(this.bindings,e)||!this.bindings[e].length)return this;for(arguments.length<3&&(n=null),o=(s=this.bindings[e]).length;o--;)s[o].method===i&&s[o].context===n&&s.splice(o,1);return 0===s.length&&delete this.bindings[e],this},e.EventEmitter.prototype.emit=function(t){var e,i,n,o,s,c=[];if(r.call(this.bindings,t)){for(o=this.bindings[t].slice(),e=1,i=arguments.length;e<i;e++)c.push(arguments[e]);for(e=0,i=o.length;e<i;e++)s="string"==typeof(n=o[e]).method?n.context[n.method]:n.method,n.once&&this.off(t,s),s.apply(n.context,n.args?n.args.concat(c):c);return!0}return!1},e.EventEmitter.prototype.connect=function(t,e){var r,i,n;for(n in e)r=e[n],Array.isArray(r)?(i=r.slice(1),r=r[0]):i=[],this.on(n,r,i,t);return this},e.EventEmitter.prototype.disconnect=function(t,e){var r,i,n,o;if(e)for(i in e)n=e[i],Array.isArray(n)&&(n=n[0]),this.off(i,n,t);else for(i in this.bindings)for(r=(o=this.bindings[i]).length;r--;)o[r]&&o[r].context===t&&this.off(i,o[r].method,t);return this}}(),function(){function t(t,e){return void 0===e||e<0||e>=t.length?t.length:e}e.EmitterList=function(){this.items=[],this.aggregateItemEvents={}},e.EmitterList.prototype.getItems=function(){return this.items.slice(0)},e.EmitterList.prototype.getItemIndex=function(t){return this.items.indexOf(t)},e.EmitterList.prototype.getItemCount=function(){return this.items.length},e.EmitterList.prototype.isEmpty=function(){return!this.items.length},e.EmitterList.prototype.aggregate=function(t){var e,r,i,n,o,s;for(o in t){if(s=t[o],Object.prototype.hasOwnProperty.call(this.aggregateItemEvents,o)){if(s)throw new Error("Duplicate item event aggregation for "+o);for(e=0;e<this.items.length;e++)(r=this.items[e]).connect&&r.disconnect&&((n={})[o]=["emit",this.aggregateItemEvents[o],r],r.disconnect(this,n));delete this.aggregateItemEvents[o]}if(s)for(this.aggregateItemEvents[o]=s,e=0;e<this.items.length;e++)(r=this.items[e]).connect&&r.disconnect&&((i={})[o]=["emit",s,r],r.connect(this,i))}},e.EmitterList.prototype.addItems=function(e,r){var i,n;if(Array.isArray(e)||(e=[e]),0===e.length)return this;for(r=t(this.items,r),i=0;i<e.length;i++)-1!==(n=this.items.indexOf(e[i]))?(r=this.moveItem(e[i],r),this.emit("move",e[i],r,n)):(r=this.insertItem(e[i],r),this.emit("add",e[i],r)),r++;return this},e.EmitterList.prototype.moveItem=function(e,r){var i=this.items.indexOf(e);if(-1===i)throw new Error("Item cannot be moved, because it is not in the list.");return r=t(this.items,r),this.items.splice(i,1),i<r&&r--,this.items.splice(r,0,e),r},e.EmitterList.prototype.insertItem=function(e,r){var i,n;if(e.connect&&e.disconnect){for(n in i={},this.aggregateItemEvents)i[n]=["emit",this.aggregateItemEvents[n],e];e.connect(this,i)}return r=t(this.items,r),this.items.splice(r,0,e),r},e.EmitterList.prototype.removeItems=function(t){var e,r,i;if(Array.isArray(t)||(t=[t]),0===t.length)return this;for(e=0;e<t.length;e++)r=t[e],-1!==(i=this.items.indexOf(r))&&(r.connect&&r.disconnect&&r.disconnect(this),this.items.splice(i,1),this.emit("remove",r,i));return this},e.EmitterList.prototype.clearItems=function(){var t,e,r=this.items.splice(0,this.items.length);for(t=0;t<r.length;t++)(e=r[t]).connect&&e.disconnect&&e.disconnect(this);return this.emit("clear"),this}}(),e.SortedEmitterList=function(t){e.EmitterList.call(this),this.sortingCallback=t,this.aggregate({sortChange:"itemSortChange"}),this.connect(this,{itemSortChange:"onItemSortChange"})},e.mixinClass(e.SortedEmitterList,e.EmitterList),e.SortedEmitterList.prototype.onItemSortChange=function(t){this.removeItems(t),this.addItems(t)},e.SortedEmitterList.prototype.setSortingCallback=function(t){var e=this.getItems();this.sortingCallback=t,this.clearItems(),this.addItems(e)},e.SortedEmitterList.prototype.addItems=function(t){var e,r,i;if(Array.isArray(t)||(t=[t]),0===t.length)return this;for(r=0;r<t.length;r++)(i=this.findInsertionIndex(t[r]))<=this.items.length&&this.items[i]&&0===this.sortingCallback(this.items[i],t[r])&&this.removeItems(this.items[i]),e=this.insertItem(t[r],i),this.emit("add",t[r],e);return this},e.SortedEmitterList.prototype.findInsertionIndex=function(t){var r=this;return e.binarySearch(this.items,function(e){return r.sortingCallback(t,e)},!0)},e.Registry=function(){e.EventEmitter.call(this),this.registry={}},e.mixinClass(e.Registry,e.EventEmitter),e.Registry.prototype.register=function(t,e){var r,i;if("string"==typeof t)this.registry[t]=e,this.emit("register",t,e);else{if(!Array.isArray(t))throw new Error("Name must be a string or array, cannot be a "+typeof t);for(r=0,i=t.length;r<i;r++)this.register(t[r],e)}},e.Registry.prototype.unregister=function(t){var e,r,i;if("string"==typeof t)void 0!==(i=this.lookup(t))&&(delete this.registry[t],this.emit("unregister",t,i));else{if(!Array.isArray(t))throw new Error("Name must be a string or array, cannot be a "+typeof t);for(e=0,r=t.length;e<r;e++)this.unregister(t[e])}},e.Registry.prototype.lookup=function(t){if(r.call(this.registry,t))return this.registry[t]},e.Factory=function(){e.Factory.super.call(this)},e.inheritClass(e.Factory,e.Registry),e.Factory.prototype.register=function(t){var r;if("function"!=typeof t)throw new Error("constructor must be a function, cannot be a "+typeof t);if("string"!=typeof(r=t.static&&t.static.name)||""===r)throw new Error("Name must be a string and must not be empty");e.Factory.super.prototype.register.call(this,r,t)},e.Factory.prototype.unregister=function(t){var r;if("function"!=typeof t)throw new Error("constructor must be a function, cannot be a "+typeof t);if("string"!=typeof(r=t.static&&t.static.name)||""===r)throw new Error("Name must be a string and must not be empty");e.Factory.super.prototype.unregister.call(this,r)},e.Factory.prototype.create=function(t){var e,r,i=[],n=this.lookup(t);if(!n)throw new Error("No class registered by that name: "+t);for(r=1;r<arguments.length;r++)i.push(arguments[r]);return e=Object.create(n.prototype),n.apply(e,i),e},"undefined"!=typeof module&&module.exports?module.exports=e:t.OO=e}(this);
//# sourceMappingURL=oojs.min.js.map