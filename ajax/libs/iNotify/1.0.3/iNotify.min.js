!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.iNotify=e()}(this,function(t,e){var i=["flash","scroll"];return{init:function(t){return this.interval=t.interval||200,this.effect=t.effect||"flash",this.title=t.title||document.title,this.message=t.message||this.title,this.updateFavicon=t.updateFavicon||{id:"favicon",textColor:"#fff",backgroundColor:"#2F9A00",location:"full",shape:"square"},this.favicon=document.querySelectorAll("link[rel~=shortcut]")[0],this.favicon=this.favicon,this.cloneFavicon=this.favicon.cloneNode(!0),0<=i.indexOf(this.effect)&&this.addTimer(),this},render:function(){switch(this.effect){case"flash":document.title=this.title===document.title?this.message:this.title;break;case"scroll":document.title=document.title.slice(1),0===document.title.length&&(document.title=this.message)}},setTitle:function(t){return t?(this.message=t,this.addTimer()):(this.clearTimer(),this.title=this.title,console.log("this.title:",this.title)),this},setInterval:function(t){t&&(this.interval=t,this.addTimer())},setFavicon:function(t){var e=document.getElementById("new"+this.updateFavicon.id);this.favicon&&this.favicon.remove(),e&&e.remove(),function(t,e){if(t>0){var i,n=document.createElement("canvas"),s=(document.createElement("img"),document.getElementsByTagName("head")[0]),o=document.createElement("link");n.height=n.width=16,(i=n.getContext("2d")).fillStyle=e.backgroundColor,i.fillRect(0,0,16,16);var a=n.width/2,l=n.height/2;i.beginPath(),i.arc(a,l,8,0,2*Math.PI,!1),i.fill(),i.textAlign="center",i.font='10px "helvetica", sans-serif',i.fillStyle=e.textColor,i.fillText(t,8,12),o.setAttribute("rel","shortcut icon"),o.setAttribute("type","image/x-icon"),o.setAttribute("id","new"+e.id),o.setAttribute("href",n.toDataURL("image/png")),s.appendChild(o)}}(t,this.updateFavicon)},addTimer:function(){return this.clearTimer(),0<=i.indexOf(this.effect)&&(this.timer=setInterval(this.render.bind(this),this.interval)),this},faviconClear:function(){var t=document.getElementById("new"+this.updateFavicon.id);head=document.getElementsByTagName("head")[0],t&&t.remove(),head.appendChild(this.cloneFavicon),this.favicon=this.cloneFavicon},clearTimer:function(){return clearInterval(this.timer),document.title=this.title,this}}});