!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.DateRangePicker={})}(this,function(t){"use strict";function e(){var t=new Date;return t.setHours(0,0,0,0),t}function n(t,e){return(t&&t.toDateString())===(e&&e.toDateString())}function a(t,e){return t=new Date(t),t.setDate(t.getDate()+e),t}function o(t,e,n){t=new Date(t);var a=t.getDate(),o=t.getMonth()+e;return t.setDate(1),t.setMonth(n?(12+o)%12:o),t.setDate(a),t.getDate()<a&&t.setDate(0),t}function r(t,e){return t=new Date(t),t.setFullYear(t.getFullYear()+e),t}function i(t,e){return t=new Date(t),t.setFullYear(e),t}function u(t,e){return o(t,e-t.getMonth())}function c(t){return function(e){return"string"==typeof e?t(e):e}}function s(t,e,n){return t<e?e:t>n?n:t}function d(t){t=t||{},t=p(l(),t);var n=c(t.parse);return t.lang=p(et,t.lang),t.parse=n,t.inRange=f(t),t.min=n(t.min||r(e(),-100)),t.max=n(t.max||r(e(),100)),t.hilightedDate=t.parse(t.hilightedDate),t}function l(){return{lang:et,mode:"dp-modal",hilightedDate:e(),format:function(t){return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()},parse:function(t){var n=new Date(t);return isNaN(n)?e():n},dateClass:function(){},inRange:function(){return!0}}}function f(t){var e=t.inRange;return function(n,a){return e(n,a)&&t.min<=n&&t.max>=n}}function p(t,e){e=e||{};for(var n in e)t[n]=e[n];return t}function h(t,e,n){return e.addEventListener(t,n,!0),function(){e.removeEventListener(t,n,!0)}}function v(t){var a=t.opts,o=a.lang,r=t.state,i=o.days,u=a.dayOffset||0,c=r.selectedDate,s=r.hilightedDate,d=s.getMonth(),l=e().getTime();return'<div class="dp-cal"><header class="dp-cal-header"><button tabindex="-1" type="button" class="dp-prev">Prev</button><button tabindex="-1" type="button" class="dp-cal-month">'+o.months[d]+'</button><button tabindex="-1" type="button" class="dp-cal-year">'+s.getFullYear()+'</button><button tabindex="-1" type="button" class="dp-next">Next</button></header><div class="dp-days">'+i.map(function(t,e){return'<span class="dp-col-header">'+i[(e+u)%i.length]+"</span>"}).join("")+F(s,u,function(e){var o=e.getMonth()!==d,r=!a.inRange(e),i=e.getTime()===l,u="dp-day";return u+=o?" dp-edge-day":"",u+=n(e,s)?" dp-current":"",u+=n(e,c)?" dp-selected":"",u+=r?" dp-day-disabled":"",u+=i?" dp-day-today":"",'<button tabindex="-1" type="button" class="'+(u+=" "+a.dateClass(e,t))+'" data-date="'+e.getTime()+'">'+e.getDate()+"</button>"})+'</div><footer class="dp-cal-footer"><button tabindex="-1" type="button" class="dp-today">'+o.today+'</button><button tabindex="-1" type="button" class="dp-clear">'+o.clear+'</button><button tabindex="-1" type="button" class="dp-close">'+o.close+"</button></footer></div>"}function g(t,e){var n=t.keyCode,o=n===nt.left?-1:n===nt.right?1:n===nt.up?-7:n===nt.down?7:0;n===nt.esc?e.close():o&&(t.preventDefault(),e.setState({hilightedDate:a(e.state.hilightedDate,o)}))}function m(t,n){n.setState({selectedDate:e()})}function D(t,e){e.setState({selectedDate:null})}function y(t,e){e.close()}function b(t,e){e.setState({view:"month"})}function w(t,e){e.setState({view:"year"})}function S(t,e){var n=e.state.hilightedDate;e.setState({hilightedDate:o(n,1)})}function x(t,e){var n=e.state.hilightedDate;e.setState({hilightedDate:o(n,-1)})}function C(t,e){e.setState({selectedDate:new Date(parseInt(t.target.getAttribute("data-date")))})}function F(t,e,n){var a="",o=new Date(t);o.setDate(1),o.setDate(1-o.getDay()+e),e&&o.getDate()===e+1&&o.setDate(e-6);for(var r=0;r<42;++r)a+=n(o),o.setDate(o.getDate()+1);return a}function M(t,e){e.setState({hilightedDate:u(e.state.hilightedDate,parseInt(t.target.getAttribute("data-month"))),view:"day"})}function T(t){var e=t.opts,n=e.lang,a=n.months,o=t.state.hilightedDate,r=o.getMonth();return'<div class="dp-months">'+a.map(function(t,e){var n="dp-month";return'<button tabindex="-1" type="button" class="'+(n+=r===e?" dp-current":"")+'" data-month="'+e+'">'+t+"</button>"}).join("")+"</div>"}function E(t,e){var n=t.keyCode,a=n===nt.left?-1:n===nt.right?1:n===nt.up?-3:n===nt.down?3:0;n===nt.esc?e.setState({view:"day"}):a&&(t.preventDefault(),e.setState({hilightedDate:o(e.state.hilightedDate,a,!0)}))}function O(t){var e=t.state,n=e.hilightedDate.getFullYear(),a=e.selectedDate.getFullYear();return'<div class="dp-years">'+P(t,function(t){var e="dp-year";return e+=t===n?" dp-current":"",'<button tabindex="-1" type="button" class="'+(e+=t===a?" dp-selected":"")+'" data-year="'+t+'">'+t+"</button>"})+"</div>"}function j(t,e){e.setState({hilightedDate:i(e.state.hilightedDate,parseInt(t.target.getAttribute("data-year"))),view:"day"})}function k(t,e){var n=t.keyCode,a=e.opts,o=n===nt.left||n===nt.up?1:n===nt.right||n===nt.down?-1:0;if(n===nt.esc)e.setState({view:"day"});else if(o){t.preventDefault();var i=r(e.state.hilightedDate,o);e.setState({hilightedDate:s(i,a.min,a.max)})}}function P(t,e){for(var n="",a=t.opts.max.getFullYear(),o=a;o>=t.opts.min.getFullYear();--o)n+=e(o);return n}function R(t,e){var n=void 0;return function(){clearTimeout(n),n=setTimeout(e,t)}}function H(){}function N(t,e,n){var a,o,r=!1,i={el:void 0,opts:n,shouldFocusOnBlur:!0,shouldFocusOnRender:!0,state:function(){return{get selectedDate(){return o},set selectedDate(t){t&&!n.inRange(t)||(t?(o=new Date(t),i.state.hilightedDate=o):o=t,i.updateInput(o),e("select"),i.close())},view:"day"}}(),adjustPosition:H,containerHTML:'<div class="dp"></div>',attachToDom:function(){document.body.appendChild(i.el)},updateInput:function(e){var a=new at("change",{bubbles:!0});a.simulated=!0,t.value=e?n.format(e):"",t.dispatchEvent(a)},computeSelectedDate:function(){return n.parse(t.value)},currentView:function(){return ut[i.state.view]},open:function(){r||(i.el||(i.el=Y(n,i.containerHTML),I(i)),o=s(i.computeSelectedDate(),n.min,n.max),i.state.hilightedDate=o||n.hilightedDate,i.state.view="day",i.attachToDom(),i.render(),e("open"))},isVisible:function(){return!!i.el&&!!i.el.parentNode},hasFocus:function(){return i.el&&i.el.contains(document.activeElement)},shouldHide:function(){return i.isVisible()},close:function(n){var a=i.el;if(i.isVisible()){if(a){var o=a.parentNode;o&&o.removeChild(a)}r=!0,n&&i.shouldFocusOnBlur&&V(t),setTimeout(function(){r=!1},100),e("close")}},destroy:function(){i.close(),a()},render:function(){if(i.el){var t=i.hasFocus(),e=i.currentView().render(i);e&&(i.el.firstChild.innerHTML=e),i.adjustPosition(),(t||i.shouldFocusOnRender)&&q(i)}},setState:function(t){for(var n in t)i.state[n]=t[n];e("statechange"),i.render()}};return a=L(t,i),i}function Y(t,e){var n=document.createElement("div");return n.className=t.mode,n.innerHTML=e,n}function L(t,e){var n=R(5,function(){e.shouldHide()?e.close():e.open()}),a=[h("blur",t,R(5,function(){e.hasFocus()||e.close(!0)})),h("mousedown",t,function(){t===document.activeElement&&n()}),h("focus",t,n),h("input",t,function(t){var n=e.opts.parse(t.target.value);isNaN(n)||e.setState({hilightedDate:n})})];return function(){a.forEach(function(t){t()})}}function q(t){var e=t.el.querySelector(".dp-current");return e&&e.focus()}function I(t){function e(e){e.target.className.split(" ").forEach(function(n){var a=t.currentView().onClick[n];a&&a(e,t)})}var n=t.el,a=n.querySelector(".dp");h("blur",a,R(10,function(){a.contains(document.activeElement)||t.close(!0)})),h("keydown",n,function(n){n.keyCode===nt.enter?e(n):t.currentView().onKeyDown(n,t)}),h("mousedown",a,function(e){e.target.focus(),document.activeElement!==e.target&&(e.preventDefault(),q(t))}),h("click",n,e)}function V(t){t.focus(),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&t.blur()}function A(t,e,n){var a=N(t,e,n);return t.readonly=!0,a.containerHTML+='<a href="#" class="dp-focuser">.</a>',a}function B(t,e,n){var a=N(t,e,n);return a.shouldFocusOnBlur=!1,Object.defineProperty(a,"shouldFocusOnRender",{get:function(){return t!==document.activeElement}}),a.adjustPosition=function(){K(t,a)},a}function K(t,e){var n=t.getBoundingClientRect(),a=window;W(e,n,a),J(e,n,a),e.el.style.visibility=""}function J(t,e,n){var a=t.el,o=n.pageXOffset,r=e.left+o,i=n.innerWidth+o,u=a.offsetWidth,c=r+u,s=i-u,d=c>i&&s>0?s:r;a.style.left=d+"px"}function W(t,e,n){var a=t.el,o=n.pageYOffset,r=o+e.top,i=a.offsetHeight,u=r+e.height+8,c=r-i-8,s=c>0&&u+i>o+n.innerHeight?c:u;a.style.top=s+"px"}function _(t,e,n){var a=N(t,e,n);return a.close=H,a.destroy=H,a.updateInput=H,a.shouldFocusOnRender=!1,a.computeSelectedDate=function(){return n.hilightedDate},a.attachToDom=function(){t.appendChild(a.el)},a.open(),a}function X(t,e,n){return t=t&&t.tagName?t:document.querySelector(t),"dp-modal"===n.mode?A(t,e,n):"dp-below"===n.mode?B(t,e,n):"dp-permanent"===n.mode?_(t,e,n):void 0}function z(){function t(t,e){(n[t]=n[t]||[]).push(e)}function e(e){for(var n in e)t(n,e[n])}var n={};return{on:function(n,a){return a?t(n,a):e(n),this},emit:function(t,e){(n[t]||[]).forEach(function(n){n(t,e)})},off:function(t,e){return t?n[t]=e?(n[t]||[]).filter(function(t){return t!==e}):[]:n={},this}}}function G(t,e){function n(t){a.emit(t,i)}var a=z(),o=d(e),r=X(t,n,o),i={get state(){return r.state},on:a.on,off:a.off,setState:r.setState,open:r.open,close:r.close,destroy:r.destroy};return i}function Q(t){function e(t,e){1!==$(f.state.hilightedDate,p.state.hilightedDate)&&(e===f?p.setState({hilightedDate:o(e.state.hilightedDate,1)}):f.setState({hilightedDate:o(e.state.hilightedDate,-1)}))}function a(t,e){var n=e.state.selectedDate;r(!l.start||l.end?{start:n,end:void 0}:{start:n>l.start?l.start:n,end:n>l.start?n:l.start})}function r(t){for(var e in t)l[e]=t[e];s.emit("statechange",v),i()}function i(){f.setState({}),p.setState({})}function u(t){const e=c&&l.start&&tt(t,l.end||c,l.start),a=n(t,l.start)||n(t,l.end);return(e?"dr-in-range ":"")+(a?"dr-selected ":"")}var c,s=z(),d=U(t),l={start:void 0,end:void 0},f=G(d.querySelector(".dr-cal-start"),{mode:"dp-permanent",dateClass:u}),p=G(d.querySelector(".dr-cal-end"),{mode:"dp-permanent",hilightedDate:o(f.state.hilightedDate,1),dateClass:u}),h={statechange:e,select:a},v={state:l,setState:r,on:s.on,off:s.off};return f.on(h),p.on(h),d.addEventListener("mouseover",function(t){if(t.target.classList.contains("dp-day")){const e=new Date(parseInt(t.target.dataset.date));!n(e,c)&&(c=e,i())}}),v}function U(t){return"string"==typeof t&&(t=document.querySelector(t)),t.innerHTML='<div class="dr-cals"><div class="dr-cal-start"></div><div class="dr-cal-end"></div></div>',t.querySelector(".dr-cals")}function Z(t){return 12*t.getYear()+t.getMonth()}function $(t,e){return Z(e)-Z(t)}function tt(t,e,n){return t<n&&t>=e||t<=e&&t>n}var et={days:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],today:"Today",clear:"Clear",close:"Close"},nt={left:37,up:38,right:39,down:40,enter:13,esc:27},at=function(){var t=window.CustomEvent;return"function"!=typeof t&&(t=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n},t.prototype=window.Event.prototype),t}(),ot={onKeyDown:g,onClick:{"dp-day":C,"dp-next":S,"dp-prev":x,"dp-today":m,"dp-clear":D,"dp-close":y,"dp-cal-month":b,"dp-cal-year":w},render:v},rt={onKeyDown:E,onClick:{"dp-month":M},render:T},it={render:O,onKeyDown:k,onClick:{"dp-year":j}},ut={day:ot,year:it,month:rt};const ct=G;t.TinyDatePicker=ct,t.DateRangePicker=Q,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=dist/date-range-picker.min.js.map