"use strict";!function(e){"object"==typeof module&&"object"==typeof module.exports?e(require("jquery"),window,document):e(jQuery,window,document)}(function(e,t,n,i){var s=function(t,n){this.$chartContainer=e(t),this.opts=n,this.defaultOptions={nodeTitle:"name",nodeId:"id",toggleSiblingsResp:!1,depth:999,chartClass:"",exportButton:!1,exportFilename:"OrgChart",exportFileextension:"png",parentNodeSymbol:"fa-users",draggable:!1,direction:"t2b",pan:!1,zoom:!1,zoominLimit:7,zoomoutLimit:.5}};s.prototype={init:function(t){var n=this;this.options=e.extend({},this.defaultOptions,this.opts,t);var i=this.$chartContainer;this.$chart&&this.$chart.remove();var s=this.options.data,a=this.$chart=e("<div>",{data:{options:this.options},class:"orgchart"+(""!==this.options.chartClass?" "+this.options.chartClass:"")+("t2b"!==this.options.direction?" "+this.options.direction:""),click:function(t){e(t.target).closest(".node").length||a.find(".node.focused").removeClass("focused")}});if("undefined"!=typeof MutationObserver){var o=new MutationObserver(function(e){o.disconnect();e:for(var t=0;t<e.length;t++)for(var i=0;i<e[t].addedNodes.length;i++)if(e[t].addedNodes[i].classList.contains("orgchart")&&n.options.initCompleted&&"function"==typeof n.options.initCompleted){n.options.initCompleted(a),a.triggerHandler({type:"init.orgchart"});break e}});o.observe(i[0],{childList:!0})}if("object"===e.type(s)?s instanceof e?this.buildHierarchy(a,this.buildJsonDS(s.children()),0,this.options):this.buildHierarchy(a,this.options.ajaxURL?s:this.attachRel(s,"00"),0,this.options):e.ajax({url:s,dataType:"json",beforeSend:function(){a.append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>')}}).done(function(e,t,i){n.buildHierarchy(a,n.options.ajaxURL?e:n.attachRel(e,"00"),0,n.options)}).fail(function(e,t,n){console.log(n)}).always(function(){a.children(".spinner").remove()}),i.append(a),this.options.exportButton&&!i.find(".oc-export-btn").length){var r=e("<button>",{class:"oc-export-btn"+(""!==this.options.chartClass?" "+this.options.chartClass:""),text:"Export",click:function(e){e.preventDefault(),n.export()}});i.append(r)}return this.options.pan&&this.bindPan(),this.options.zoom&&this.bindZoom(),this},setOptions:function(e,t){return"string"==typeof e&&("pan"===e&&(t?this.bindPan():this.unbindPan()),"zoom"===e&&(t?this.bindZoom():this.unbindZoom())),"object"==typeof e&&(e.data?this.init(e):(void 0!==e.pan&&(e.pan?this.bindPan():this.unbindPan()),void 0!==e.zoom&&(e.zoom?this.bindZoom():this.unbindZoom()))),this},panStartHandler:function(t){var n=e(t.delegateTarget);if(e(t.target).closest(".node").length||t.touches&&t.touches.length>1)n.data("panning",!1);else{n.css("cursor","move").data("panning",!0);var i=0,s=0,a=n.css("transform");if("none"!==a){var o=a.split(",");-1===a.indexOf("3d")?(i=parseInt(o[4]),s=parseInt(o[5])):(i=parseInt(o[12]),s=parseInt(o[13]))}var r=0,d=0;if(t.targetTouches){if(1===t.targetTouches.length)r=t.targetTouches[0].pageX-i,d=t.targetTouches[0].pageY-s;else if(t.targetTouches.length>1)return}else r=t.pageX-i,d=t.pageY-s;n.on("mousemove touchmove",function(e){if(n.data("panning")){var t=0,i=0;if(e.targetTouches){if(1===e.targetTouches.length)t=e.targetTouches[0].pageX-r,i=e.targetTouches[0].pageY-d;else if(e.targetTouches.length>1)return}else t=e.pageX-r,i=e.pageY-d;var s=n.css("transform");if("none"===s)-1===s.indexOf("3d")?n.css("transform","matrix(1, 0, 0, 1, "+t+", "+i+")"):n.css("transform","matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+t+", "+i+", 0, 1)");else{var a=s.split(",");-1===s.indexOf("3d")?(a[4]=" "+t,a[5]=" "+i+")"):(a[12]=" "+t,a[13]=" "+i),n.css("transform",a.join(","))}}})}},panEndHandler:function(e){e.data.chart.data("panning")&&e.data.chart.data("panning",!1).css("cursor","default").off("mousemove")},bindPan:function(){this.$chartContainer.css("overflow","hidden"),this.$chart.on("mousedown touchstart",this.panStartHandler),e(n).on("mouseup touchend",{chart:this.$chart},this.panEndHandler)},unbindPan:function(){this.$chartContainer.css("overflow","auto"),this.$chart.off("mousedown touchstart",this.panStartHandler),e(n).off("mouseup touchend",this.panEndHandler)},zoomWheelHandler:function(e){var t=e.data.oc;e.preventDefault();var n=1+(e.originalEvent.deltaY>0?-.2:.2);t.setChartScale(t.$chart,n)},zoomStartHandler:function(e){if(e.touches&&2===e.touches.length){var t=e.data.oc;t.$chart.data("pinching",!0);var n=t.getPinchDist(e);t.$chart.data("pinchDistStart",n)}},zoomingHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){var n=t.getPinchDist(e);t.$chart.data("pinchDistEnd",n)}},zoomEndHandler:function(e){var t=e.data.oc;if(t.$chart.data("pinching")){t.$chart.data("pinching",!1);var n=t.$chart.data("pinchDistEnd")-t.$chart.data("pinchDistStart");n>0?t.setChartScale(t.$chart,1.2):n<0&&t.setChartScale(t.$chart,.8)}},bindZoom:function(){this.$chartContainer.on("wheel",{oc:this},this.zoomWheelHandler),this.$chartContainer.on("touchstart",{oc:this},this.zoomStartHandler),e(n).on("touchmove",{oc:this},this.zoomingHandler),e(n).on("touchend",{oc:this},this.zoomEndHandler)},unbindZoom:function(){this.$chartContainer.off("wheel",this.zoomWheelHandler),this.$chartContainer.off("touchstart",this.zoomStartHandler),e(n).off("touchmove",this.zoomingHandler),e(n).off("touchend",this.zoomEndHandler)},getPinchDist:function(e){return Math.sqrt((e.touches[0].clientX-e.touches[1].clientX)*(e.touches[0].clientX-e.touches[1].clientX)+(e.touches[0].clientY-e.touches[1].clientY)*(e.touches[0].clientY-e.touches[1].clientY))},setChartScale:function(e,n){var i=e.data("options"),s=e.css("transform"),a="",o=1;"none"===s?e.css("transform","scale("+n+","+n+")"):(a=s.split(","),-1===s.indexOf("3d")?(o=t.parseFloat(a[3])*n)>i.zoomoutLimit&&o<i.zoominLimit&&e.css("transform",s+" scale("+n+","+n+")"):(o=t.parseFloat(a[1])*n)>i.zoomoutLimit&&o<i.zoominLimit&&e.css("transform",s+" scale3d("+n+","+n+", 1)"))},buildJsonDS:function(t){var n=this,i={name:t.contents().eq(0).text().trim(),relationship:(t.parent().parent().is("li")?"1":"0")+(t.siblings("li").length?1:0)+(t.children("ul").length?1:0)};return t[0].id&&(i.id=t[0].id),t.children("ul").children().each(function(){i.children||(i.children=[]),i.children.push(n.buildJsonDS(e(this)))}),i},attachRel:function(e,t){var n=this;return e.relationship=t+(e.children&&e.children.length>0?1:0),e.children&&e.children.forEach(function(t){n.attachRel(t,"1"+(e.children.length>1?1:0))}),e},loopChart:function(t){var n=this,i=t.find("tr:first"),s={id:i.find(".node")[0].id};return i.siblings(":last").children().each(function(){s.children||(s.children=[]),s.children.push(n.loopChart(e(this)))}),s},getHierarchy:function(e){return(e=e||this.$chart).find(".node:first")[0].id?this.loopChart(e):"Error: Nodes of orghcart to be exported must have id attribute!"},getNodeState:function(e,t){var n={};return"parent"===t?n=e.closest(".nodes").siblings(":first"):"children"===t?n=e.closest("tr").siblings():"siblings"===t&&(n=e.closest("table").parent().siblings()),n.length?n.is(":visible")?{exist:!0,visible:!0}:{exist:!0,visible:!1}:{exist:!1,visible:!1}},getRelatedNodes:function(e,t){return"parent"===t?e.closest(".nodes").parent().children(":first").find(".node"):"children"===t?e.closest("table").children(":last").children().find(".node:first"):"siblings"===t?e.closest("table").parent().siblings().find(".node:first"):void 0},hideParent:function(e){var t=e.closest("table").closest("tr").siblings();t.eq(0).find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),this.getNodeState(e,"siblings").visible&&this.hideSiblings(e);var n=t.slice(1);n.css("visibility","hidden");var i=t.eq(0).find(".node"),s=this.getNodeState(i,"parent").visible;i.length&&i.is(":visible")&&i.addClass("slide slide-down").one("transitionend",function(){i.removeClass("slide"),n.removeAttr("style"),t.addClass("hidden")}),i.length&&s&&this.hideParent(i)},showParent:function(t){var n=this,i=t.closest("table").closest("tr").siblings().removeClass("hidden");i.eq(2).children().slice(1,-1).addClass("hidden");var s=i.eq(0).find(".node")[0];this.repaint(s),e(s).addClass("slide").removeClass("slide-down").one("transitionend",function(){e(s).removeClass("slide"),n.isInAction(t)&&n.switchVerticalArrow(t.children(".topEdge"))})},hideChildren:function(e){var t=this,n=e.closest("tr").siblings();n.last().find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1);var i=n.last().find(".node:visible"),s=!!n.last().is(".verticalNodes");if(!s)var a=i.closest("table").closest("tr").prevAll(".lines").css("visibility","hidden");i.addClass("slide slide-up").eq(0).one("transitionend",function(){i.removeClass("slide"),s?n.addClass("hidden"):(a.removeAttr("style").addClass("hidden").siblings(".nodes").addClass("hidden"),n.last().find(".verticalNodes").addClass("hidden")),t.isInAction(e)&&t.switchVerticalArrow(e.children(".bottomEdge"))})},showChildren:function(e){var t=this,n=e.closest("tr").siblings(),i=!!n.is(".verticalNodes")?n.removeClass("hidden").find(".node:visible"):n.removeClass("hidden").eq(2).children().find(".node:first");this.repaint(i.get(0)),i.addClass("slide").removeClass("slide-up").eq(0).one("transitionend",function(){i.removeClass("slide"),t.isInAction(e)&&t.switchVerticalArrow(e.children(".bottomEdge"))})},hideSiblings:function(e,t){var n=this,i=e.closest("table").parent();i.siblings().find(".spinner").length&&e.closest(".orgchart").data("inAjax",!1),t?"left"===t?i.prevAll().find(".node:visible").addClass("slide slide-right"):i.nextAll().find(".node:visible").addClass("slide slide-left"):(i.prevAll().find(".node:visible").addClass("slide slide-right"),i.nextAll().find(".node:visible").addClass("slide slide-left"));var s=i.siblings().find(".slide"),a=s.closest(".nodes").prevAll(".lines").css("visibility","hidden");s.eq(0).one("transitionend",function(){a.removeAttr("style");var o=t?"left"===t?i.prevAll(":not(.hidden)"):i.nextAll(":not(.hidden)"):i.siblings();i.closest(".nodes").prev().children(":not(.hidden)").slice(1,t?2*o.length+1:-1).addClass("hidden"),s.removeClass("slide"),o.find(".node:visible:gt(0)").removeClass("slide-left slide-right").addClass("slide-up").end().find(".lines, .nodes, .verticalNodes").addClass("hidden").end().addClass("hidden"),n.isInAction(e)&&n.switchHorizontalArrow(e)})},showSiblings:function(t,n){var i=this,s=e();s=n?"left"===n?t.closest("table").parent().prevAll().removeClass("hidden"):t.closest("table").parent().nextAll().removeClass("hidden"):t.closest("table").parent().siblings().removeClass("hidden");var a=t.closest("table").closest("tr").siblings();if(n?a.eq(2).children(".hidden").slice(0,2*s.length).removeClass("hidden"):a.eq(2).children(".hidden").removeClass("hidden"),!this.getNodeState(t,"parent").visible){a.removeClass("hidden");var o=a.find(".node")[0];this.repaint(o),e(o).addClass("slide").removeClass("slide-down").one("transitionend",function(){e(this).removeClass("slide")})}s.find(".node:visible").addClass("slide").removeClass("slide-left slide-right").eq(-1).one("transitionend",function(){s.find(".node:visible").removeClass("slide"),i.isInAction(t)&&(i.switchHorizontalArrow(t),t.children(".topEdge").removeClass("fa-chevron-up").addClass("fa-chevron-down"))})},startLoading:function(t,n,i){var s=n.closest(".orgchart");return(void 0===s.data("inAjax")||!0!==s.data("inAjax"))&&(t.addClass("hidden"),n.append('<i class="fa fa-circle-o-notch fa-spin spinner"></i>'),n.children().not(".spinner").css("opacity",.2),s.data("inAjax",!0),e(".oc-export-btn"+(""!==i.chartClass?"."+i.chartClass:"")).prop("disabled",!0),!0)},endLoading:function(t,n,i){var s=n.closest("div.orgchart");t.removeClass("hidden"),n.find(".spinner").remove(),n.children().removeAttr("style"),s.data("inAjax",!1),e(".oc-export-btn"+(""!==i.chartClass?"."+i.chartClass:"")).prop("disabled",!1)},isInAction:function(e){return e.children(".edge").attr("class").indexOf("fa-")>-1},switchVerticalArrow:function(e){e.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down")},switchHorizontalArrow:function(e){var t=e.closest(".orgchart").data("options");if(t.toggleSiblingsResp&&(void 0===t.ajaxURL||e.closest(".nodes").data("siblingsLoaded"))){var n=e.closest("table").parent().prev();n.length&&(n.is(".hidden")?e.children(".leftEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"):e.children(".leftEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"));var i=e.closest("table").parent().next();i.length&&(i.is(".hidden")?e.children(".rightEdge").addClass("fa-chevron-right").removeClass("fa-chevron-left"):e.children(".rightEdge").addClass("fa-chevron-left").removeClass("fa-chevron-right"))}else{var s=e.closest("table").parent().siblings(),a=!!s.length&&!s.is(".hidden");e.children(".leftEdge").toggleClass("fa-chevron-right",a).toggleClass("fa-chevron-left",!a),e.children(".rightEdge").toggleClass("fa-chevron-left",a).toggleClass("fa-chevron-right",!a)}},repaint:function(e){e&&(e.style.offsetWidth=e.offsetWidth)},createNode:function(i,s,a){var o=this;i.children||(i.children=[]),e.each(i.children,function(e,t){t.parentId=i.id});var r=e.Deferred(),d=e("<div"+(a.draggable?' draggable="true"':"")+(i[a.nodeId]?' id="'+i[a.nodeId]+'"':"")+(i.parentId?' data-parent="'+i.parentId+'"':"")+">").addClass("node "+(i.className||"")+(s>=a.depth?" slide-up":""));a.nodeTemplate?d.append(a.nodeTemplate(i)):d.append('<div class="title">'+i[a.nodeTitle]+"</div>").append(void 0!==a.nodeContent?'<div class="content">'+(i[a.nodeContent]||"")+"</div>":"");var l=i.relationship||"";if(a.verticalDepth&&s+2>a.verticalDepth){if(s+1>=a.verticalDepth&&Number(l.substr(2,1))){var c=s+1>=a.depth?"plus":"minus";d.append('<i class="toggleBtn fa fa-'+c+'-square"></i>')}}else Number(l.substr(0,1))&&d.append('<i class="edge verticalEdge topEdge fa"></i>'),Number(l.substr(1,1))&&d.append('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),Number(l.substr(2,1))&&d.append('<i class="edge verticalEdge bottomEdge fa"></i>').children(".title").prepend('<i class="fa '+a.parentNodeSymbol+' symbol"></i>');return d.on("mouseenter mouseleave",function(t){var n=e(this),i=!1,s=n.children(".topEdge"),a=(n.children(".rightEdge"),n.children(".bottomEdge")),r=n.children(".leftEdge");"mouseenter"===t.type?(s.length&&(i=o.getNodeState(n,"parent").visible,s.toggleClass("fa-chevron-up",!i).toggleClass("fa-chevron-down",i)),a.length&&(i=o.getNodeState(n,"children").visible,a.toggleClass("fa-chevron-down",!i).toggleClass("fa-chevron-up",i)),r.length&&o.switchHorizontalArrow(n)):n.children(".edge").removeClass("fa-chevron-up fa-chevron-down fa-chevron-right fa-chevron-left")}),d.on("click",function(t){e(this).closest(".orgchart").find(".focused").removeClass("focused"),e(this).addClass("focused")}),d.on("click",".topEdge",function(t){t.stopPropagation();var n=e(this),s=n.parent(),r=o.getNodeState(s,"parent");if(r.exist){var d=s.closest("table").closest("tr").siblings(":first").find(".node");if(d.is(".slide"))return;r.visible?(o.hideParent(s),d.one("transitionend",function(){o.isInAction(s)&&(o.switchVerticalArrow(n),o.switchHorizontalArrow(s))})):o.showParent(s)}else{var l=n.parent()[0].id;o.startLoading(n,s,a)&&e.ajax({url:e.isFunction(a.ajaxURL.parent)?a.ajaxURL.parent(i):a.ajaxURL.parent+l,dataType:"json"}).done(function(t){s.closest(".orgchart").data("inAjax")&&(e.isEmptyObject(t)||o.addParent(s,t,a))}).fail(function(){console.log("Failed to get parent node data")}).always(function(){o.endLoading(n,s,a)})}}),d.on("click",".bottomEdge",function(t){t.stopPropagation();var n=e(this),s=n.parent(),r=o.getNodeState(s,"children");if(r.exist){if(s.closest("tr").siblings(":last").find(".node:visible").is(".slide"))return;r.visible?o.hideChildren(s):o.showChildren(s)}else{var d=n.parent()[0].id;o.startLoading(n,s,a)&&e.ajax({url:e.isFunction(a.ajaxURL.children)?a.ajaxURL.children(i):a.ajaxURL.children+d,dataType:"json"}).done(function(t,n,i){s.closest(".orgchart").data("inAjax")&&t.children.length&&o.addChildren(s,t,e.extend({},a,{depth:0}))}).fail(function(e,t,n){console.log("Failed to get children nodes data")}).always(function(){o.endLoading(n,s,a)})}}),d.on("click",".toggleBtn",function(t){var n=e(this),i=n.parent().next(),s=i.find(".node"),a=i.children().children(".node");a.is(".slide")||(n.toggleClass("fa-plus-square fa-minus-square"),s.eq(0).is(".slide-up")?(i.removeClass("hidden"),o.repaint(a.get(0)),a.addClass("slide").removeClass("slide-up").eq(0).one("transitionend",function(){a.removeClass("slide")})):(s.addClass("slide slide-up").eq(0).one("transitionend",function(){s.removeClass("slide"),s.closest("ul").addClass("hidden")}),s.find(".toggleBtn").removeClass("fa-minus-square").addClass("fa-plus-square")))}),d.on("click",".leftEdge, .rightEdge",function(t){t.stopPropagation();var n=e(this),s=n.parent(),r=o.getNodeState(s,"siblings");if(r.exist){if(s.closest("table").parent().siblings().find(".node:visible").is(".slide"))return;if(a.toggleSiblingsResp){var d=s.closest("table").parent().prev(),l=s.closest("table").parent().next();n.is(".leftEdge")?d.is(".hidden")?o.showSiblings(s,"left"):o.hideSiblings(s,"left"):l.is(".hidden")?o.showSiblings(s,"right"):o.hideSiblings(s,"right")}else r.visible?o.hideSiblings(s):o.showSiblings(s)}else{var c=n.parent()[0].id,h=o.getNodeState(s,"parent").exist?e.isFunction(a.ajaxURL.siblings)?a.ajaxURL.siblings(i):a.ajaxURL.siblings+c:e.isFunction(a.ajaxURL.families)?a.ajaxURL.families(i):a.ajaxURL.families+c;o.startLoading(n,s,a)&&e.ajax({url:h,dataType:"json"}).done(function(e,t,n){s.closest(".orgchart").data("inAjax")&&(e.siblings||e.children)&&o.addSiblings(s,e,a)}).fail(function(e,t,n){console.log("Failed to get sibling nodes data")}).always(function(){o.endLoading(n,s,a)})}}),a.draggable&&d.on("dragstart",function(i){var s=i.originalEvent,o=/firefox/.test(t.navigator.userAgent.toLowerCase());if(o&&s.dataTransfer.setData("text/html","hack for firefox"),"none"!==d.closest(".orgchart").css("transform")){var r,l;n.querySelector(".ghost-node")?(r=d.closest(".orgchart").children(".ghost-node").get(0),l=e(r).children().get(0)):((r=n.createElementNS("http://www.w3.org/2000/svg","svg")).classList.add("ghost-node"),l=n.createElementNS("http://www.w3.org/2000/svg","rect"),r.appendChild(l),d.closest(".orgchart").append(r));var c=d.closest(".orgchart").css("transform").split(","),h=Math.abs(t.parseFloat("t2b"===a.direction||"b2t"===a.direction?c[0].slice(c[0].indexOf("(")+1):c[1]));r.setAttribute("width",d.outerWidth(!1)),r.setAttribute("height",d.outerHeight(!1)),l.setAttribute("x",5*h),l.setAttribute("y",5*h),l.setAttribute("width",120*h),l.setAttribute("height",40*h),l.setAttribute("rx",4*h),l.setAttribute("ry",4*h),l.setAttribute("stroke-width",1*h);var p=s.offsetX*h,f=s.offsetY*h;if("l2r"===a.direction?(p=s.offsetY*h,f=s.offsetX*h):"r2l"===a.direction?(p=d.outerWidth(!1)-s.offsetY*h,f=s.offsetX*h):"b2t"===a.direction&&(p=d.outerWidth(!1)-s.offsetX*h,f=d.outerHeight(!1)-s.offsetY*h),o){l.setAttribute("fill","rgb(255, 255, 255)"),l.setAttribute("stroke","rgb(191, 0, 0)");var g=n.createElement("img");g.src="data:image/svg+xml;utf8,"+(new XMLSerializer).serializeToString(r),s.dataTransfer.setDragImage(g,p,f)}else s.dataTransfer.setDragImage(r,p,f)}var v=e(this),u=v.closest(".nodes").siblings().eq(0).find(".node:first"),b=v.closest("table").find(".node");v.closest(".orgchart").data("dragged",v).find(".node").each(function(t,n){-1===b.index(n)&&(a.dropCriteria?a.dropCriteria(v,u,e(n))&&e(n).addClass("allowedDrop"):e(n).addClass("allowedDrop"))})}).on("dragover",function(t){t.preventDefault(),e(this).is(".allowedDrop")||(t.originalEvent.dataTransfer.dropEffect="none")}).on("dragend",function(t){e(this).closest(".orgchart").find(".allowedDrop").removeClass("allowedDrop")}).on("drop",function(t){var n=e(this),i=n.closest(".orgchart"),s=i.data("dragged");i.find(".allowedDrop").removeClass("allowedDrop");var a=s.closest(".nodes").siblings().eq(0).children();if(n.closest("tr").siblings().length){var o=parseInt(n.parent().attr("colspan"))+2,r='<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>';n.closest("tr").next().addBack().children().attr("colspan",o),s.find(".horizontalEdge").length||s.append(r),n.closest("tr").siblings().eq(1).children(":last").before('<td class="leftLine topLine">&nbsp;</td><td class="rightLine topLine">&nbsp;</td>').end().next().append(s.closest("table").parent());var d=s.closest("table").parent().siblings().find(".node:first");1===d.length&&d.append(r)}else n.append('<i class="edge verticalEdge bottomEdge fa"></i>').parent().attr("colspan",2).parent().after('<tr class="lines"><td colspan="2"><div class="downLine"></div></td></tr><tr class="lines"><td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td></tr><tr class="nodes"></tr>').siblings(":last").append(s.find(".horizontalEdge").remove().end().closest("table").parent());var l=parseInt(a.attr("colspan"));if(l>2){a.attr("colspan",l-2).parent().next().children().attr("colspan",l-2).end().next().children().slice(1,3).remove();var c=a.parent().siblings(".nodes").children().find(".node:first");1===c.length&&c.find(".horizontalEdge").remove()}else a.removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove();i.triggerHandler({type:"nodedropped.orgchart",draggedNode:s,dragZone:a.children(),dropZone:n})}),a.createNode&&a.createNode(d,i),r.resolve(d),r.promise()},buildHierarchy:function(t,n,i,s,a){var o,r=this,d=n.children,l=!!d&&d.length,c=!!(s.verticalDepth&&i+1>=s.verticalDepth);if(Object.keys(n).length>1&&(o=c?t:e("<table>"),c||t.append(o),e.when(this.createNode(n,i,s)).done(function(e){c?o.append(e):o.append(e.wrap("<tr><td"+(l?' colspan="'+2*d.length+'"':"")+"></td></tr>").closest("tr")),a&&a()}).fail(function(){console.log("Failed to creat node")})),l){1===Object.keys(n).length&&(o=t);var h=i+1>=s.depth||n.collapsed?" hidden":"",p=!!(s.verticalDepth&&i+2>=s.verticalDepth);p||o.append('<tr class="lines'+h+'"><td colspan="'+2*d.length+'"><div class="downLine"></div></td></tr>');for(var f='<tr class="lines'+h+'"><td class="rightLine">&nbsp;</td>',g=1;g<d.length;g++)f+='<td class="leftLine topLine">&nbsp;</td><td class="rightLine topLine">&nbsp;</td>';f+='<td class="leftLine">&nbsp;</td></tr>';var v;p?(v=e("<ul>"),h&&v.addClass(h),i+2===s.verticalDepth?o.append('<tr class="verticalNodes'+h+'"><td></td></tr>').find(".verticalNodes").children().append(v):o.append(v)):(v=e('<tr class="nodes'+h+'">'),o.append(f).append(v)),e.each(d,function(){var t=e(p?"<li>":'<td colspan="2">');v.append(t),r.buildHierarchy(t,this,i+1,s,a)})}},buildChildNode:function(e,t,n,i){var n=n||e.closest(".orgchart").data("options"),s=t.children||t.siblings;e.find("td:first").attr("colspan",2*s.length),this.buildHierarchy(e,{children:s},0,n,i)},addChildren:function(e,t,n){var i=this,n=n||e.closest(".orgchart").data("options"),s=0;this.buildChildNode(e.closest("table"),t,n,function(){++s===t.children.length&&(e.children(".bottomEdge").length||e.append('<i class="edge verticalEdge bottomEdge fa"></i>'),e.find(".symbol").length||e.children(".title").prepend('<i class="fa '+n.parentNodeSymbol+' symbol"></i>'),i.showChildren(e))})},buildParentNode:function(t,n,i,s){var a=this,o=e("<table>");n.relationship=n.relationship||"001",e.when(this.createNode(n,0,i||t.closest(".orgchart").data("options"))).done(function(e){o.append(e.removeClass("slide-up").addClass("slide-down").wrap('<tr class="hidden"><td colspan="2"></td></tr>').closest("tr")),o.append('<tr class="lines hidden"><td colspan="2"><div class="downLine"></div></td></tr>');o.append('<tr class="lines hidden"><td class="rightLine">&nbsp;</td><td class="leftLine">&nbsp;</td></tr>');var t=a.$chart;t.prepend(o).children("table:first").append('<tr class="nodes"><td colspan="2"></td></tr>').children("tr:last").children().append(t.children("table").last()),s()}).fail(function(){console.log("Failed to create parent node")})},addParent:function(e,t,n){var i=this;this.buildParentNode(e,t,n,function(){e.children(".topEdge").length||e.children(".title").after('<i class="edge verticalEdge topEdge fa"></i>'),i.showParent(e)})},complementLine:function(e,t,n){for(var i="",s=0;s<n;s++)i+='<td class="leftLine topLine">&nbsp;</td><td class="rightLine topLine">&nbsp;</td>';e.parent().prevAll("tr:gt(0)").children().attr("colspan",2*t).end().next().children(":first").after(i)},buildSiblingNode:function(t,n,i,s){var a=this,i=i||t.closest(".orgchart").data("options"),o=n.siblings?n.siblings.length:n.children.length,r=t.parent().is("td")?t.closest("tr").children().length:1,d=r+o,l=d>1?Math.floor(d/2-1):0;if(t.parent().is("td")){t.closest("tr").prevAll("tr:last");t.closest("tr").prevAll("tr:lt(2)").remove();var c=0;this.buildChildNode(t.parent().closest("table"),n,i,function(){if(++c===o){var e=t.parent().closest("table").children("tr:last").children("td");r>1?(a.complementLine(e.eq(0).before(t.closest("td").siblings().addBack().unwrap()),d,r),e.addClass("hidden").find(".node").addClass("slide-left")):(a.complementLine(e.eq(l).after(t.closest("td").unwrap()),d,1),e.not(":eq("+l+"1)").addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left")),s()}})}else{var h=0;this.buildHierarchy(t.closest(".orgchart"),n,0,i,function(){++h===d&&(a.complementLine(t.next().children("tr:last").children().eq(l).after(e('<td colspan="2">').append(t)),d,1),t.closest("tr").siblings().eq(0).addClass("hidden").find(".node").addClass("slide-down"),t.parent().siblings().addClass("hidden").slice(0,l).find(".node").addClass("slide-right").end().end().slice(l).find(".node").addClass("slide-left"),s())})}},addSiblings:function(e,t,n){var i=this;this.buildSiblingNode(e.closest("table"),t,n,function(){e.closest(".nodes").data("siblingsLoaded",!0),e.children(".leftEdge").length||e.children(".topEdge").after('<i class="edge horizontalEdge rightEdge fa"></i><i class="edge horizontalEdge leftEdge fa"></i>'),i.showSiblings(e)})},removeNodes:function(e){var t=e.closest("table").parent(),n=t.parent().siblings();t.is("td")?this.getNodeState(e,"siblings").exist?(n.eq(2).children(".topLine:lt(2)").remove(),n.slice(0,2).children().attr("colspan",n.eq(2).children().length),t.remove()):n.eq(0).children().removeAttr("colspan").find(".bottomEdge").remove().end().end().siblings().remove():t.add(t.siblings()).remove()},export:function(i,s){var a=this;if(i=void 0!==i?i:this.options.exportFilename,s=void 0!==s?s:this.options.exportFileextension,e(this).children(".spinner").length)return!1;var o=this.$chartContainer,r=o.find(".mask");r.length?r.removeClass("hidden"):o.append('<div class="mask"><i class="fa fa-circle-o-notch fa-spin spinner"></i></div>');var d=o.addClass("canvasContainer").find(".orgchart:visible").get(0),l="l2r"===a.options.direction||"r2l"===a.options.direction;html2canvas(d,{width:l?d.clientHeight:d.clientWidth,height:l?d.clientWidth:d.clientHeight,onclone:function(t){e(t).find(".canvasContainer").css("overflow","visible").find(".orgchart:visible:first").css("transform","")},onrendered:function(e){if(o.find(".mask").addClass("hidden"),"pdf"===s.toLowerCase()){var r={},d=Math.floor(.2646*e.width),l=Math.floor(.2646*e.height);(r=d>l?new jsPDF("l","mm",[d,l]):new jsPDF("p","mm",[l,d])).addImage(e.toDataURL(),"png",0,0),r.save(i+".pdf")}else{var c="WebkitAppearance"in n.documentElement.style,h=!!t.sidebar,p="Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&navigator.appVersion.indexOf("Edge")>-1;if(!c&&!h||p)t.navigator.msSaveBlob(e.msToBlob(),i+".png");else{var f=".oc-download-btn"+(""!==a.options.chartClass?"."+a.options.chartClass:"");o.find(f).length||o.append('<a class="oc-download-btn'+(""!==a.options.chartClass?" "+a.options.chartClass:"")+'" download="'+i+'.png"></a>'),o.find(f).attr("href",e.toDataURL())[0].click()}}}}).then(function(){o.removeClass("canvasContainer")},function(){o.removeClass("canvasContainer")})}},e.fn.orgchart=function(e){return new s(this,e).init()}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL2pxdWVyeS5vcmdjaGFydC5qcyJdLCJuYW1lcyI6WyJmYWN0b3J5IiwibW9kdWxlIiwiZXhwb3J0cyIsInJlcXVpcmUiLCJ3aW5kb3ciLCJkb2N1bWVudCIsImpRdWVyeSIsIiQiLCJ1bmRlZmluZWQiLCJPcmdDaGFydCIsImVsZW0iLCJvcHRzIiwidGhpcyIsIiRjaGFydENvbnRhaW5lciIsImRlZmF1bHRPcHRpb25zIiwibm9kZVRpdGxlIiwibm9kZUlkIiwidG9nZ2xlU2libGluZ3NSZXNwIiwiZGVwdGgiLCJjaGFydENsYXNzIiwiZXhwb3J0QnV0dG9uIiwiZXhwb3J0RmlsZW5hbWUiLCJleHBvcnRGaWxlZXh0ZW5zaW9uIiwicGFyZW50Tm9kZVN5bWJvbCIsImRyYWdnYWJsZSIsImRpcmVjdGlvbiIsInBhbiIsInpvb20iLCJ6b29taW5MaW1pdCIsInpvb21vdXRMaW1pdCIsInByb3RvdHlwZSIsImluaXQiLCJ0aGF0Iiwib3B0aW9ucyIsImV4dGVuZCIsIiRjaGFydCIsInJlbW92ZSIsImRhdGEiLCJjbGFzcyIsImNsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwibGVuZ3RoIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiTXV0YXRpb25PYnNlcnZlciIsIm1vIiwibXV0YXRpb25zIiwiZGlzY29ubmVjdCIsImluaXRUaW1lIiwiaSIsImoiLCJhZGRlZE5vZGVzIiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJpbml0Q29tcGxldGVkIiwidHJpZ2dlckhhbmRsZXIiLCJ0eXBlIiwib2JzZXJ2ZSIsImNoaWxkTGlzdCIsImJ1aWxkSGllcmFyY2h5IiwiYnVpbGRKc29uRFMiLCJjaGlsZHJlbiIsImFqYXhVUkwiLCJhdHRhY2hSZWwiLCJhamF4IiwidXJsIiwiZGF0YVR5cGUiLCJiZWZvcmVTZW5kIiwiYXBwZW5kIiwiZG9uZSIsInRleHRTdGF0dXMiLCJqcVhIUiIsImZhaWwiLCJlcnJvclRocm93biIsImNvbnNvbGUiLCJsb2ciLCJhbHdheXMiLCIkZXhwb3J0QnRuIiwidGV4dCIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImV4cG9ydCIsImJpbmRQYW4iLCJiaW5kWm9vbSIsInNldE9wdGlvbnMiLCJ2YWwiLCJ1bmJpbmRQYW4iLCJ1bmJpbmRab29tIiwicGFuU3RhcnRIYW5kbGVyIiwiZGVsZWdhdGVUYXJnZXQiLCJ0b3VjaGVzIiwiY3NzIiwibGFzdFgiLCJsYXN0WSIsImxhc3RUZiIsInRlbXAiLCJzcGxpdCIsImluZGV4T2YiLCJwYXJzZUludCIsInN0YXJ0WCIsInN0YXJ0WSIsInRhcmdldFRvdWNoZXMiLCJwYWdlWCIsInBhZ2VZIiwib24iLCJuZXdYIiwibmV3WSIsIm1hdHJpeCIsImpvaW4iLCJwYW5FbmRIYW5kbGVyIiwiY2hhcnQiLCJvZmYiLCJ6b29tV2hlZWxIYW5kbGVyIiwib2MiLCJuZXdTY2FsZSIsIm9yaWdpbmFsRXZlbnQiLCJkZWx0YVkiLCJzZXRDaGFydFNjYWxlIiwiem9vbVN0YXJ0SGFuZGxlciIsImRpc3QiLCJnZXRQaW5jaERpc3QiLCJ6b29taW5nSGFuZGxlciIsInpvb21FbmRIYW5kbGVyIiwiZGlmZiIsIk1hdGgiLCJzcXJ0IiwiY2xpZW50WCIsImNsaWVudFkiLCJ0YXJnZXRTY2FsZSIsInBhcnNlRmxvYXQiLCIkbGkiLCJzdWJPYmoiLCJuYW1lIiwiY29udGVudHMiLCJlcSIsInRyaW0iLCJyZWxhdGlvbnNoaXAiLCJwYXJlbnQiLCJpcyIsInNpYmxpbmdzIiwiaWQiLCJlYWNoIiwicHVzaCIsImZsYWdzIiwiZm9yRWFjaCIsIml0ZW0iLCJsb29wQ2hhcnQiLCIkdHIiLCJnZXRIaWVyYXJjaHkiLCJnZXROb2RlU3RhdGUiLCIkbm9kZSIsInJlbGF0aW9uIiwiJHRhcmdldCIsImV4aXN0IiwidmlzaWJsZSIsImdldFJlbGF0ZWROb2RlcyIsImhpZGVQYXJlbnQiLCIkdGVtcCIsImhpZGVTaWJsaW5ncyIsIiRsaW5lcyIsInNsaWNlIiwiJHBhcmVudCIsImdyYW5kZmF0aGVyVmlzaWJsZSIsImFkZENsYXNzIiwib25lIiwicmVtb3ZlQXR0ciIsInNob3dQYXJlbnQiLCJyZXBhaW50IiwiaXNJbkFjdGlvbiIsInN3aXRjaFZlcnRpY2FsQXJyb3ciLCJoaWRlQ2hpbGRyZW4iLCJsYXN0IiwiJHZpc2libGVOb2RlcyIsImlzVmVydGljYWxEZXNjIiwicHJldkFsbCIsInNob3dDaGlsZHJlbiIsIiRsZXZlbHMiLCIkZGVzY2VuZGFudHMiLCJnZXQiLCIkbm9kZUNvbnRhaW5lciIsIm5leHRBbGwiLCIkYW5pbWF0ZWROb2RlcyIsIiRzaWJsaW5ncyIsInByZXYiLCJlbmQiLCJzd2l0Y2hIb3Jpem9udGFsQXJyb3ciLCJzaG93U2libGluZ3MiLCIkdXBwZXJMZXZlbCIsInN0YXJ0TG9hZGluZyIsIiRhcnJvdyIsIm5vdCIsInByb3AiLCJlbmRMb2FkaW5nIiwiYXR0ciIsInRvZ2dsZUNsYXNzIiwiJHByZXZTaWIiLCIkbmV4dFNpYiIsIm5leHQiLCIkc2licyIsInNpYnNWaXNpYmxlIiwibm9kZSIsInN0eWxlIiwib2Zmc2V0V2lkdGgiLCJjcmVhdGVOb2RlIiwibm9kZURhdGEiLCJsZXZlbCIsImluZGV4IiwiY2hpbGQiLCJwYXJlbnRJZCIsImR0ZCIsIkRlZmVycmVkIiwiJG5vZGVEaXYiLCJjbGFzc05hbWUiLCJub2RlVGVtcGxhdGUiLCJub2RlQ29udGVudCIsInZlcnRpY2FsRGVwdGgiLCJOdW1iZXIiLCJzdWJzdHIiLCJpY29uIiwicHJlcGVuZCIsImZsYWciLCIkdG9wRWRnZSIsIiRib3R0b21FZGdlIiwiJGxlZnRFZGdlIiwic3RvcFByb3BhZ2F0aW9uIiwiJHRoYXQiLCJwYXJlbnRTdGF0ZSIsImlzRnVuY3Rpb24iLCJpc0VtcHR5T2JqZWN0IiwiYWRkUGFyZW50IiwiY2hpbGRyZW5TdGF0ZSIsImFkZENoaWxkcmVuIiwiJHRoaXMiLCIkZGVzY1dyYXBwZXIiLCIkY2hpbGRyZW4iLCJzaWJsaW5nc1N0YXRlIiwiZmFtaWxpZXMiLCJhZGRTaWJsaW5ncyIsIm9yaWdFdmVudCIsImlzRmlyZWZveCIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJ0b0xvd2VyQ2FzZSIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJnaG9zdE5vZGUiLCJub2RlQ292ZXIiLCJxdWVyeVNlbGVjdG9yIiwiY3JlYXRlRWxlbWVudE5TIiwiYWRkIiwiYXBwZW5kQ2hpbGQiLCJ0cmFuc1ZhbHVlcyIsInNjYWxlIiwiYWJzIiwic2V0QXR0cmlidXRlIiwib3V0ZXJXaWR0aCIsIm91dGVySGVpZ2h0IiwieE9mZnNldCIsIm9mZnNldFgiLCJ5T2Zmc2V0Iiwib2Zmc2V0WSIsImdob3N0Tm9kZVdyYXBwZXIiLCJjcmVhdGVFbGVtZW50Iiwic3JjIiwiWE1MU2VyaWFsaXplciIsInNlcmlhbGl6ZVRvU3RyaW5nIiwic2V0RHJhZ0ltYWdlIiwiJGRyYWdnZWQiLCIkZHJhZ1pvbmUiLCIkZHJhZ0hpZXIiLCJkcm9wQ3JpdGVyaWEiLCJkcm9wRWZmZWN0IiwiJGRyb3Bab25lIiwiJG9yZ2NoYXJ0IiwiZHJvcENvbHNwYW4iLCJob3Jpem9udGFsRWRnZXMiLCJhZGRCYWNrIiwiYmVmb3JlIiwiJGRyb3BTaWJzIiwiYWZ0ZXIiLCJkcmFnQ29sc3BhbiIsIiRkcmFnU2licyIsImRyYWdnZWROb2RlIiwiZHJhZ1pvbmUiLCJkcm9wWm9uZSIsInJlc29sdmUiLCJwcm9taXNlIiwiJGFwcGVuZFRvIiwiY2FsbGJhY2siLCIkbm9kZVdyYXBwZXIiLCIkY2hpbGROb2RlcyIsImhhc0NoaWxkcmVuIiwiaXNWZXJ0aWNhbE5vZGUiLCJPYmplY3QiLCJrZXlzIiwid2hlbiIsIndyYXAiLCJpc0hpZGRlbiIsImNvbGxhcHNlZCIsImlzVmVydGljYWxMYXllciIsImxpbmVMYXllciIsIiRub2RlTGF5ZXIiLCIkbm9kZUNlbGwiLCJidWlsZENoaWxkTm9kZSIsImNvdW50IiwiYnVpbGRQYXJlbnROb2RlIiwiJGN1cnJlbnRSb290IiwiJHRhYmxlIiwiY29tcGxlbWVudExpbmUiLCIkb25lU2libGluZyIsInNpYmxpbmdDb3VudCIsImV4aXN0aW5nU2libGlnQ291bnQiLCJsaW5lcyIsImJ1aWxkU2libGluZ05vZGUiLCIkbm9kZUNoYXJ0IiwibmV3U2libGluZ0NvdW50IiwiaW5zZXJ0UG9zdGlvbiIsImZsb29yIiwiY2hpbGRDb3VudCIsIiRzaWJsaW5nVGRzIiwidW53cmFwIiwibm9kZUNvdW50IiwicmVtb3ZlTm9kZXMiLCIkbWFzayIsInNvdXJjZUNoYXJ0IiwiaHRtbDJjYW52YXMiLCJ3aWR0aCIsImNsaWVudEhlaWdodCIsImNsaWVudFdpZHRoIiwiaGVpZ2h0Iiwib25jbG9uZSIsImNsb25lRG9jIiwib25yZW5kZXJlZCIsImNhbnZhcyIsImRvYyIsImRvY1dpZHRoIiwiZG9jSGVpZ2h0IiwianNQREYiLCJhZGRJbWFnZSIsInRvRGF0YVVSTCIsInNhdmUiLCJpc1dlYmtpdCIsImRvY3VtZW50RWxlbWVudCIsImlzRmYiLCJzaWRlYmFyIiwiaXNFZGdlIiwiYXBwTmFtZSIsImFwcFZlcnNpb24iLCJtc1NhdmVCbG9iIiwibXNUb0Jsb2IiLCJzZWxlY3RvciIsInRoZW4iLCJmbiIsIm9yZ2NoYXJ0Il0sIm1hcHBpbmdzIjoiQUFVQSxjQUVDLFNBQVVBLEdBQ2EsaUJBQVhDLFFBQWlELGlCQUFuQkEsT0FBT0MsUUFDOUNGLEVBQVFHLFFBQVEsVUFBV0MsT0FBUUMsVUFFbkNMLEVBQVFNLE9BQVFGLE9BQVFDLFVBSjVCLENBTUUsU0FBVUUsRUFBR0gsRUFBUUMsRUFBVUcsR0FDL0IsSUFBSUMsRUFBVyxTQUFVQyxFQUFNQyxHQUM3QkMsS0FBS0MsZ0JBQWtCTixFQUFFRyxHQUN6QkUsS0FBS0QsS0FBT0EsRUFDWkMsS0FBS0UsZ0JBQ0hDLFVBQWEsT0FDYkMsT0FBVSxLQUNWQyxvQkFBc0IsRUFDdEJDLE1BQVMsSUFDVEMsV0FBYyxHQUNkQyxjQUFnQixFQUNoQkMsZUFBa0IsV0FDbEJDLG9CQUF1QixNQUN2QkMsaUJBQW9CLFdBQ3BCQyxXQUFhLEVBQ2JDLFVBQWEsTUFDYkMsS0FBTyxFQUNQQyxNQUFRLEVBQ1JDLFlBQWUsRUFDZkMsYUFB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cmNlc0NvbnRlbnQiOlsiLypcbiAqIGpRdWVyeSBPcmdDaGFydCBQbHVnaW5cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9kYWJlbmcvT3JnQ2hhcnRcbiAqXG4gKiBDb3B5cmlnaHQgMjAxNiwgZGFiZW5nXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZGFiZW5nXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlOlxuICogaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVRcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gJ29iamVjdCcpIHtcbiAgICBmYWN0b3J5KHJlcXVpcmUoJ2pxdWVyeScpLCB3aW5kb3csIGRvY3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBmYWN0b3J5KGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XG4gIH1cbn0oZnVuY3Rpb24gKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xuICB2YXIgT3JnQ2hhcnQgPSBmdW5jdGlvbiAoZWxlbSwgb3B0cykge1xuICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyID0gJChlbGVtKTtcbiAgICB0aGlzLm9wdHMgPSBvcHRzO1xuICAgIHRoaXMuZGVmYXVsdE9wdGlvbnMgPSB7XG4gICAgICAnbm9kZVRpdGxlJzogJ25hbWUnLFxuICAgICAgJ25vZGVJZCc6ICdpZCcsXG4gICAgICAndG9nZ2xlU2libGluZ3NSZXNwJzogZmFsc2UsXG4gICAgICAnZGVwdGgnOiA5OTksXG4gICAgICAnY2hhcnRDbGFzcyc6ICcnLFxuICAgICAgJ2V4cG9ydEJ1dHRvbic6IGZhbHNlLFxuICAgICAgJ2V4cG9ydEZpbGVuYW1lJzogJ09yZ0NoYXJ0JyxcbiAgICAgICdleHBvcnRGaWxlZXh0ZW5zaW9uJzogJ3BuZycsXG4gICAgICAncGFyZW50Tm9kZVN5bWJvbCc6ICdmYS11c2VycycsXG4gICAgICAnZHJhZ2dhYmxlJzogZmFsc2UsXG4gICAgICAnZGlyZWN0aW9uJzogJ3QyYicsXG4gICAgICAncGFuJzogZmFsc2UsXG4gICAgICAnem9vbSc6IGZhbHNlLFxuICAgICAgJ3pvb21pbkxpbWl0JzogNyxcbiAgICAgICd6b29tb3V0TGltaXQnOiAwLjVcbiAgICB9O1xuICB9O1xuICAvL1xuICBPcmdDaGFydC5wcm90b3R5cGUgPSB7XG4gICAgLy9cbiAgICBpbml0OiBmdW5jdGlvbiAob3B0cykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIHRoaXMuZGVmYXVsdE9wdGlvbnMsIHRoaXMub3B0cywgb3B0cyk7XG4gICAgICAvLyBidWlsZCB0aGUgb3JnLWNoYXJ0XG4gICAgICB2YXIgJGNoYXJ0Q29udGFpbmVyID0gdGhpcy4kY2hhcnRDb250YWluZXI7XG4gICAgICBpZiAodGhpcy4kY2hhcnQpIHtcbiAgICAgICAgdGhpcy4kY2hhcnQucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgICB2YXIgZGF0YSA9IHRoaXMub3B0aW9ucy5kYXRhO1xuICAgICAgdmFyICRjaGFydCA9IHRoaXMuJGNoYXJ0ID0gJCgnPGRpdj4nLCB7XG4gICAgICAgICdkYXRhJzogeyAnb3B0aW9ucyc6IHRoaXMub3B0aW9ucyB9LFxuICAgICAgICAnY2xhc3MnOiAnb3JnY2hhcnQnICsgKHRoaXMub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcgJyArIHRoaXMub3B0aW9ucy5jaGFydENsYXNzIDogJycpICsgKHRoaXMub3B0aW9ucy5kaXJlY3Rpb24gIT09ICd0MmInID8gJyAnICsgdGhpcy5vcHRpb25zLmRpcmVjdGlvbiA6ICcnKSxcbiAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICBpZiAoISQoZXZlbnQudGFyZ2V0KS5jbG9zZXN0KCcubm9kZScpLmxlbmd0aCkge1xuICAgICAgICAgICAgJGNoYXJ0LmZpbmQoJy5ub2RlLmZvY3VzZWQnKS5yZW1vdmVDbGFzcygnZm9jdXNlZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHZhciBtbyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChtdXRhdGlvbnMpIHtcbiAgICAgICAgICBtby5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgaW5pdFRpbWU6XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtdXRhdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbXV0YXRpb25zW2ldLmFkZGVkTm9kZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgaWYgKG11dGF0aW9uc1tpXS5hZGRlZE5vZGVzW2pdLmNsYXNzTGlzdC5jb250YWlucygnb3JnY2hhcnQnKSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGF0Lm9wdGlvbnMuaW5pdENvbXBsZXRlZCAmJiB0eXBlb2YgdGhhdC5vcHRpb25zLmluaXRDb21wbGV0ZWQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgIHRoYXQub3B0aW9ucy5pbml0Q29tcGxldGVkKCRjaGFydCk7XG4gICAgICAgICAgICAgICAgICAkY2hhcnQudHJpZ2dlckhhbmRsZXIoeyAndHlwZSc6ICdpbml0Lm9yZ2NoYXJ0JyB9KTtcbiAgICAgICAgICAgICAgICAgIGJyZWFrIGluaXRUaW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICBtby5vYnNlcnZlKCRjaGFydENvbnRhaW5lclswXSwgeyBjaGlsZExpc3Q6IHRydWUgfSk7XG4gICAgICB9XG4gICAgICBpZiAoJC50eXBlKGRhdGEpID09PSAnb2JqZWN0Jykge1xuICAgICAgICBpZiAoZGF0YSBpbnN0YW5jZW9mICQpIHsgLy8gdWwgZGF0YXNvdXJjZVxuICAgICAgICAgIHRoaXMuYnVpbGRIaWVyYXJjaHkoJGNoYXJ0LCB0aGlzLmJ1aWxkSnNvbkRTKGRhdGEuY2hpbGRyZW4oKSksIDAsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIH0gZWxzZSB7IC8vIGxvY2FsIGpzb24gZGF0YXNvdXJjZVxuICAgICAgICAgIHRoaXMuYnVpbGRIaWVyYXJjaHkoJGNoYXJ0LCB0aGlzLm9wdGlvbnMuYWpheFVSTCA/IGRhdGEgOiB0aGlzLmF0dGFjaFJlbChkYXRhLCAnMDAnKSwgMCwgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAndXJsJzogZGF0YSxcbiAgICAgICAgICAnZGF0YVR5cGUnOiAnanNvbicsXG4gICAgICAgICAgJ2JlZm9yZVNlbmQnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkY2hhcnQuYXBwZW5kKCc8aSBjbGFzcz1cImZhIGZhLWNpcmNsZS1vLW5vdGNoIGZhLXNwaW4gc3Bpbm5lclwiPjwvaT4nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSB7XG4gICAgICAgICAgdGhhdC5idWlsZEhpZXJhcmNoeSgkY2hhcnQsIHRoYXQub3B0aW9ucy5hamF4VVJMID8gZGF0YSA6IHRoYXQuYXR0YWNoUmVsKGRhdGEsICcwMCcpLCAwLCB0aGF0Lm9wdGlvbnMpO1xuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvclRocm93bik7XG4gICAgICAgIH0pXG4gICAgICAgIC5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJGNoYXJ0LmNoaWxkcmVuKCcuc3Bpbm5lcicpLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgICRjaGFydENvbnRhaW5lci5hcHBlbmQoJGNoYXJ0KTtcblxuICAgICAgLy8gYXBwZW5kIHRoZSBleHBvcnQgYnV0dG9uXG4gICAgICBpZiAodGhpcy5vcHRpb25zLmV4cG9ydEJ1dHRvbiAmJiAhJGNoYXJ0Q29udGFpbmVyLmZpbmQoJy5vYy1leHBvcnQtYnRuJykubGVuZ3RoKSB7XG4gICAgICAgIHZhciAkZXhwb3J0QnRuID0gJCgnPGJ1dHRvbj4nLCB7XG4gICAgICAgICAgJ2NsYXNzJzogJ29jLWV4cG9ydC1idG4nICsgKHRoaXMub3B0aW9ucy5jaGFydENsYXNzICE9PSAnJyA/ICcgJyArIHRoaXMub3B0aW9ucy5jaGFydENsYXNzIDogJycpLFxuICAgICAgICAgICd0ZXh0JzogJ0V4cG9ydCcsXG4gICAgICAgICAgJ2NsaWNrJzogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhhdC5leHBvcnQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAkY2hhcnRDb250YWluZXIuYXBwZW5kKCRleHBvcnRCdG4pO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vcHRpb25zLnBhbikge1xuICAgICAgICB0aGlzLmJpbmRQYW4oKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMub3B0aW9ucy56b29tKSB7XG4gICAgICAgIHRoaXMuYmluZFpvb20oKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICAvL1xuICAgIHNldE9wdGlvbnM6IGZ1bmN0aW9uIChvcHRzLCB2YWwpIHtcbiAgICAgIGlmICh0eXBlb2Ygb3B0cyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgaWYgKG9wdHMgPT09ICdwYW4nKSB7XG4gICAgICAgICAgaWYgKHZhbCkge1xuICAgICAgICAgICAgdGhpcy5iaW5kUGFuKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudW5iaW5kUGFuKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzID09PSAnem9vbScpIHtcbiAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICB0aGlzLmJpbmRab29tKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudW5iaW5kWm9vbSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBvcHRzID09PSAnb2JqZWN0Jykge1xuICAgICAgICBpZiAob3B0cy5kYXRhKSB7XG4gICAgICAgICAgdGhpcy5pbml0KG9wdHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0eXBlb2Ygb3B0cy5wYW4gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAob3B0cy5wYW4pIHtcbiAgICAgICAgICAgICAgdGhpcy5iaW5kUGFuKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLnVuYmluZFBhbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodHlwZW9mIG9wdHMuem9vbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGlmIChvcHRzLnpvb20pIHtcbiAgICAgICAgICAgICAgdGhpcy5iaW5kWm9vbSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy51bmJpbmRab29tKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLy9cbiAgICBwYW5TdGFydEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgJGNoYXJ0ID0gJChlLmRlbGVnYXRlVGFyZ2V0KTtcbiAgICAgIGlmICgkKGUudGFyZ2V0KS5jbG9zZXN0KCcubm9kZScpLmxlbmd0aCB8fCAoZS50b3VjaGVzICYmIGUudG91Y2hlcy5sZW5ndGggPiAxKSkge1xuICAgICAgICAkY2hhcnQuZGF0YSgncGFubmluZycsIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJGNoYXJ0LmNzcygnY3Vyc29yJywgJ21vdmUnKS5kYXRhKCdwYW5uaW5nJywgdHJ1ZSk7XG4gICAgICB9XG4gICAgICB2YXIgbGFzdFggPSAwO1xuICAgICAgdmFyIGxhc3RZID0gMDtcbiAgICAgIHZhciBsYXN0VGYgPSAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nKTtcbiAgICAgIGlmIChsYXN0VGYgIT09ICdub25lJykge1xuICAgICAgICB2YXIgdGVtcCA9IGxhc3RUZi5zcGxpdCgnLCcpO1xuICAgICAgICBpZiAobGFzdFRmLmluZGV4T2YoJzNkJykgPT09IC0xKSB7XG4gICAgICAgICAgbGFzdFggPSBwYXJzZUludCh0ZW1wWzRdKTtcbiAgICAgICAgICBsYXN0WSA9IHBhcnNlSW50KHRlbXBbNV0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxhc3RYID0gcGFyc2VJbnQodGVtcFsxMl0pO1xuICAgICAgICAgIGxhc3RZID0gcGFyc2VJbnQodGVtcFsxM10pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgc3RhcnRYID0gMDtcbiAgICAgIHZhciBzdGFydFkgPSAwO1xuICAgICAgaWYgKCFlLnRhcmdldFRvdWNoZXMpIHsgLy8gcGFuZCBvbiBkZXNrdG9wXG4gICAgICAgIHN0YXJ0WCA9IGUucGFnZVggLSBsYXN0WDtcbiAgICAgICAgc3RhcnRZID0gZS5wYWdlWSAtIGxhc3RZO1xuICAgICAgfSBlbHNlIGlmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID09PSAxKSB7IC8vIHBhbiBvbiBtb2JpbGUgZGV2aWNlXG4gICAgICAgIHN0YXJ0WCA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWCAtIGxhc3RYO1xuICAgICAgICBzdGFydFkgPSBlLnRhcmdldFRvdWNoZXNbMF0ucGFnZVkgLSBsYXN0WTtcbiAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgJGNoYXJ0Lm9uKCdtb3VzZW1vdmUgdG91Y2htb3ZlJyxmdW5jdGlvbihlKSB7XG4gICAgICAgIGlmICghJGNoYXJ0LmRhdGEoJ3Bhbm5pbmcnKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV3WCA9IDA7XG4gICAgICAgIHZhciBuZXdZID0gMDtcbiAgICAgICAgaWYgKCFlLnRhcmdldFRvdWNoZXMpIHsgLy8gcGFuZCBvbiBkZXNrdG9wXG4gICAgICAgICAgbmV3WCA9IGUucGFnZVggLSBzdGFydFg7XG4gICAgICAgICAgbmV3WSA9IGUucGFnZVkgLSBzdGFydFk7XG4gICAgICAgIH0gZWxzZSBpZiAoZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA9PT0gMSkgeyAvLyBwYW4gb24gbW9iaWxlIGRldmljZVxuICAgICAgICAgIG5ld1ggPSBlLnRhcmdldFRvdWNoZXNbMF0ucGFnZVggLSBzdGFydFg7XG4gICAgICAgICAgbmV3WSA9IGUudGFyZ2V0VG91Y2hlc1swXS5wYWdlWSAtIHN0YXJ0WTtcbiAgICAgICAgfSBlbHNlIGlmIChlLnRhcmdldFRvdWNoZXMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGFzdFRmID0gJGNoYXJ0LmNzcygndHJhbnNmb3JtJyk7XG4gICAgICAgIGlmIChsYXN0VGYgPT09ICdub25lJykge1xuICAgICAgICAgIGlmIChsYXN0VGYuaW5kZXhPZignM2QnKSA9PT0gLTEpIHtcbiAgICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsICdtYXRyaXgoMSwgMCwgMCwgMSwgJyArIG5ld1ggKyAnLCAnICsgbmV3WSArICcpJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRjaGFydC5jc3MoJ3RyYW5zZm9ybScsICdtYXRyaXgzZCgxLCAwLCAwLCAwLCAwLCAxLCAwLCAwLCAwLCAwLCAxLCAwLCAnICsgbmV3WCArICcsICcgKyBuZXdZICsgJywgMCwgMSknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIG1hdHJpeCA9IGxhc3RUZi5zcGxpdCgnLCcpO1xuICAgICAgICAgIGlmIChsYXN0VGYuaW5kZXhPZignM2QnKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIG1hdHJpeFs0XSA9ICcgJyArIG5ld1g7XG4gICAgICAgICAgICBtYXRyaXhbNV0gPSAnICcgKyBuZXdZICsgJyknO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtYXRyaXhbMTJdID0gJyAnICsgbmV3WDtcbiAgICAgICAgICAgIG1hdHJpeFsxM10gPSAnICcgKyBuZXdZO1xuICAgICAgICAgIH1cbiAgICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCBtYXRyaXguam9pbignLCcpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvL1xuICAgIHBhbkVuZEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoZS5kYXRhLmNoYXJ0LmRhdGEoJ3Bhbm5pbmcnKSkge1xuICAgICAgICBlLmRhdGEuY2hhcnQuZGF0YSgncGFubmluZycsIGZhbHNlKS5jc3MoJ2N1cnNvcicsICdkZWZhdWx0Jykub2ZmKCdtb3VzZW1vdmUnKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgYmluZFBhbjogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcbiAgICAgIHRoaXMuJGNoYXJ0Lm9uKCdtb3VzZWRvd24gdG91Y2hzdGFydCcsIHRoaXMucGFuU3RhcnRIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9uKCdtb3VzZXVwIHRvdWNoZW5kJywgeyAnY2hhcnQnOiB0aGlzLiRjaGFydCB9LCB0aGlzLnBhbkVuZEhhbmRsZXIpO1xuICAgIH0sXG4gICAgLy9cbiAgICB1bmJpbmRQYW46IGZ1bmN0aW9uICgpIHtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLmNzcygnb3ZlcmZsb3cnLCAnYXV0bycpO1xuICAgICAgdGhpcy4kY2hhcnQub2ZmKCdtb3VzZWRvd24gdG91Y2hzdGFydCcsIHRoaXMucGFuU3RhcnRIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9mZignbW91c2V1cCB0b3VjaGVuZCcsIHRoaXMucGFuRW5kSGFuZGxlcik7XG4gICAgfSxcbiAgICAvL1xuICAgIHpvb21XaGVlbEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgb2MgPSBlLmRhdGEub2M7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB2YXIgbmV3U2NhbGUgID0gMSArIChlLm9yaWdpbmFsRXZlbnQuZGVsdGFZID4gMCA/IC0wLjIgOiAwLjIpO1xuICAgICAgb2Muc2V0Q2hhcnRTY2FsZShvYy4kY2hhcnQsIG5ld1NjYWxlKTtcbiAgICB9LFxuICAgIC8vXG4gICAgem9vbVN0YXJ0SGFuZGxlcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgIGlmKGUudG91Y2hlcyAmJiBlLnRvdWNoZXMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHZhciBvYyA9IGUuZGF0YS5vYztcbiAgICAgICAgb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoaW5nJywgdHJ1ZSk7XG4gICAgICAgIHZhciBkaXN0ID0gb2MuZ2V0UGluY2hEaXN0KGUpO1xuICAgICAgICBvYy4kY2hhcnQuZGF0YSgncGluY2hEaXN0U3RhcnQnLCBkaXN0KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHpvb21pbmdIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIG9jID0gZS5kYXRhLm9jO1xuICAgICAgaWYob2MuJGNoYXJ0LmRhdGEoJ3BpbmNoaW5nJykpIHtcbiAgICAgICAgdmFyIGRpc3QgPSBvYy5nZXRQaW5jaERpc3QoZSk7XG4gICAgICAgIG9jLiRjaGFydC5kYXRhKCdwaW5jaERpc3RFbmQnLCBkaXN0KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIHpvb21FbmRIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIG9jID0gZS5kYXRhLm9jO1xuICAgICAgaWYob2MuJGNoYXJ0LmRhdGEoJ3BpbmNoaW5nJykpIHtcbiAgICAgICAgb2MuJGNoYXJ0LmRhdGEoJ3BpbmNoaW5nJywgZmFsc2UpO1xuICAgICAgICB2YXIgZGlmZiA9IG9jLiRjaGFydC5kYXRhKCdwaW5jaERpc3RFbmQnKSAtIG9jLiRjaGFydC5kYXRhKCdwaW5jaERpc3RTdGFydCcpO1xuICAgICAgICBpZiAoZGlmZiA+IDApIHtcbiAgICAgICAgICBvYy5zZXRDaGFydFNjYWxlKG9jLiRjaGFydCwgMS4yKTtcbiAgICAgICAgfSBlbHNlIGlmIChkaWZmIDwgMCkge1xuICAgICAgICAgIG9jLnNldENoYXJ0U2NhbGUob2MuJGNoYXJ0LCAwLjgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGJpbmRab29tOiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5vbignd2hlZWwnLCB7ICdvYyc6IHRoaXMgfSwgdGhpcy56b29tV2hlZWxIYW5kbGVyKTtcbiAgICAgIHRoaXMuJGNoYXJ0Q29udGFpbmVyLm9uKCd0b3VjaHN0YXJ0JywgeyAnb2MnOiB0aGlzIH0sIHRoaXMuem9vbVN0YXJ0SGFuZGxlcik7XG4gICAgICAkKGRvY3VtZW50KS5vbigndG91Y2htb3ZlJywgeyAnb2MnOiB0aGlzIH0sIHRoaXMuem9vbWluZ0hhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub24oJ3RvdWNoZW5kJywgeyAnb2MnOiB0aGlzIH0sIHRoaXMuem9vbUVuZEhhbmRsZXIpO1xuICAgIH0sXG4gICAgdW5iaW5kWm9vbTogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy4kY2hhcnRDb250YWluZXIub2ZmKCd3aGVlbCcsIHRoaXMuem9vbVdoZWVsSGFuZGxlcik7XG4gICAgICB0aGlzLiRjaGFydENvbnRhaW5lci5vZmYoJ3RvdWNoc3RhcnQnLCB0aGlzLnpvb21TdGFydEhhbmRsZXIpO1xuICAgICAgJChkb2N1bWVudCkub2ZmKCd0b3VjaG1vdmUnLCB0aGlzLnpvb21pbmdIYW5kbGVyKTtcbiAgICAgICQoZG9jdW1lbnQpLm9mZigndG91Y2hlbmQnLCB0aGlzLnpvb21FbmRIYW5kbGVyKTtcbiAgICB9LFxuICAgIC8vXG4gICAgZ2V0UGluY2hEaXN0OiBmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIE1hdGguc3FydCgoZS50b3VjaGVzWzBdLmNsaWVudFggLSBlLnRvdWNoZXNbMV0uY2xpZW50WCkgKiAoZS50b3VjaGVzWzBdLmNsaWVudFggLSBlLnRvdWNoZXNbMV0uY2xpZW50WCkgK1xuICAgICAgKGUudG91Y2hlc1swXS5jbGllbnRZIC0gZS50b3VjaGVzWzFdLmNsaWVudFkpICogKGUudG91Y2hlc1swXS5jbGllbnRZIC0gZS50b3VjaGVzWzFdLmNsaWVudFkpKTtcbiAgICB9LFxuICAgIC8vXG4gICAgc2V0Q2hhcnRTY2FsZTogZnVuY3Rpb24gKCRjaGFydCwgbmV3U2NhbGUpIHtcbiAgICAgIHZhciBvcHRzID0gJGNoYXJ0LmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgIHZhciBsYXN0VGYgPSAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nKTtcbiAgICAgIHZhciBtYXRyaXggPSAnJztcbiAgICAgIHZhciB0YXJnZXRTY2FsZSA9IDE7XG4gICAgICBpZiAobGFzdFRmID09PSAnbm9uZScpIHtcbiAgICAgICAgJGNoYXJ0LmNzcygndHJhbnNmb3JtJywgJ3NjYWxlKCcgKyBuZXdTY2FsZSArICcsJyArIG5ld1NjYWxlICsgJyknKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1hdHJpeCA9IGxhc3RUZi5zcGxpdCgnLCcpO1xuICAgICAgICBpZiAobGFzdFRmLmluZGV4T2YoJzNkJykgPT09IC0xKSB7XG4gICAgICAgICAgdGFyZ2V0U2NhbGUgPSB3aW5kb3cucGFyc2VGbG9hdChtYXRyaXhbM10pICogbmV3U2NhbGU7XG4gICAgICAgICAgaWYgKHRhcmdldFNjYWxlID4gb3B0cy56b29tb3V0TGltaXQgJiYgdGFyZ2V0U2NhbGUgPCBvcHRzLnpvb21pbkxpbWl0KSB7XG4gICAgICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCBsYXN0VGYgKyAnIHNjYWxlKCcgKyBuZXdTY2FsZSArICcsJyArIG5ld1NjYWxlICsgJyknKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFyZ2V0U2NhbGUgPSB3aW5kb3cucGFyc2VGbG9hdChtYXRyaXhbMV0pICogbmV3U2NhbGU7XG4gICAgICAgICAgaWYgKHRhcmdldFNjYWxlID4gb3B0cy56b29tb3V0TGltaXQgJiYgdGFyZ2V0U2NhbGUgPCBvcHRzLnpvb21pbkxpbWl0KSB7XG4gICAgICAgICAgICAkY2hhcnQuY3NzKCd0cmFuc2Zvcm0nLCBsYXN0VGYgKyAnIHNjYWxlM2QoJyArIG5ld1NjYWxlICsgJywnICsgbmV3U2NhbGUgKyAnLCAxKScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICBidWlsZEpzb25EUzogZnVuY3Rpb24gKCRsaSkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyIHN1Yk9iaiA9IHtcbiAgICAgICAgJ25hbWUnOiAkbGkuY29udGVudHMoKS5lcSgwKS50ZXh0KCkudHJpbSgpLFxuICAgICAgICAncmVsYXRpb25zaGlwJzogKCRsaS5wYXJlbnQoKS5wYXJlbnQoKS5pcygnbGknKSA/ICcxJzogJzAnKSArICgkbGkuc2libGluZ3MoJ2xpJykubGVuZ3RoID8gMTogMCkgKyAoJGxpLmNoaWxkcmVuKCd1bCcpLmxlbmd0aCA/IDEgOiAwKVxuICAgICAgfTtcbiAgICAgIGlmICgkbGlbMF0uaWQpIHtcbiAgICAgICAgc3ViT2JqLmlkID0gJGxpWzBdLmlkO1xuICAgICAgfVxuICAgICAgJGxpLmNoaWxkcmVuKCd1bCcpLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFzdWJPYmouY2hpbGRyZW4pIHsgc3ViT2JqLmNoaWxkcmVuID0gW107IH1cbiAgICAgICAgc3ViT2JqLmNoaWxkcmVuLnB1c2godGhhdC5idWlsZEpzb25EUygkKHRoaXMpKSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBzdWJPYmo7XG4gICAgfSxcbiAgICAvL1xuICAgIGF0dGFjaFJlbDogZnVuY3Rpb24gKGRhdGEsIGZsYWdzKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICBkYXRhLnJlbGF0aW9uc2hpcCA9IGZsYWdzICsgKGRhdGEuY2hpbGRyZW4gJiYgZGF0YS5jaGlsZHJlbi5sZW5ndGggPiAwID8gMSA6IDApO1xuICAgICAgaWYgKGRhdGEuY2hpbGRyZW4pIHtcbiAgICAgICAgZGF0YS5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbiAgICAgICAgICB0aGF0LmF0dGFjaFJlbChpdGVtLCAnMScgKyAoZGF0YS5jaGlsZHJlbi5sZW5ndGggPiAxID8gMSA6IDApKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LFxuICAgIC8vXG4gICAgbG9vcENoYXJ0OiBmdW5jdGlvbiAoJGNoYXJ0KSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJHRyID0gJGNoYXJ0LmZpbmQoJ3RyOmZpcnN0Jyk7XG4gICAgICB2YXIgc3ViT2JqID0geyAnaWQnOiAkdHIuZmluZCgnLm5vZGUnKVswXS5pZCB9O1xuICAgICAgJHRyLnNpYmxpbmdzKCc6bGFzdCcpLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCFzdWJPYmouY2hpbGRyZW4pIHsgc3ViT2JqLmNoaWxkcmVuID0gW107IH1cbiAgICAgICAgc3ViT2JqLmNoaWxkcmVuLnB1c2godGhhdC5sb29wQ2hhcnQoJCh0aGlzKSkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gc3ViT2JqO1xuICAgIH0sXG4gICAgLy9cbiAgICBnZXRIaWVyYXJjaHk6IGZ1bmN0aW9uICgkY2hhcnQpIHtcbiAgICAgIHZhciAkY2hhcnQgPSAkY2hhcnQgfHwgdGhpcy4kY2hhcnQ7XG4gICAgICBpZiAoISRjaGFydC5maW5kKCcubm9kZTpmaXJzdCcpWzBdLmlkKSB7XG4gICAgICAgIHJldHVybiAnRXJyb3I6IE5vZGVzIG9mIG9yZ2hjYXJ0IHRvIGJlIGV4cG9ydGVkIG11c3QgaGF2ZSBpZCBhdHRyaWJ1dGUhJztcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmxvb3BDaGFydCgkY2hhcnQpO1xuICAgIH0sXG4gICAgLy8gZGV0ZWN0IHRoZSBleGlzdC9kaXNwbGF5IHN0YXRlIG9mIHJlbGF0ZWQgbm9kZVxuICAgIGdldE5vZGVTdGF0ZTogZnVuY3Rpb24gKCRub2RlLCByZWxhdGlvbikge1xuICAgICAgdmFyICR0YXJnZXQgPSB7fTtcbiAgICAgIGlmIChyZWxhdGlvbiA9PT0gJ3BhcmVudCcpIHtcbiAgICAgICAgJHRhcmdldCA9ICRub2RlLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCc6Zmlyc3QnKTtcbiAgICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdjaGlsZHJlbicpIHtcbiAgICAgICAgJHRhcmdldCA9ICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKTtcbiAgICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdzaWJsaW5ncycpIHtcbiAgICAgICAgJHRhcmdldCA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKTtcbiAgICAgIH1cbiAgICAgIGlmICgkdGFyZ2V0Lmxlbmd0aCkge1xuICAgICAgICBpZiAoJHRhcmdldC5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogdHJ1ZSB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7ICdleGlzdCc6IHRydWUsICd2aXNpYmxlJzogZmFsc2UgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7ICdleGlzdCc6IGZhbHNlLCAndmlzaWJsZSc6IGZhbHNlIH07XG4gICAgfSxcbiAgICAvLyBmaW5kIHRoZSByZWxhdGVkIG5vZGVzXG4gICAgZ2V0UmVsYXRlZE5vZGVzOiBmdW5jdGlvbiAoJG5vZGUsIHJlbGF0aW9uKSB7XG4gICAgICBpZiAocmVsYXRpb24gPT09ICdwYXJlbnQnKSB7XG4gICAgICAgIHJldHVybiAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5wYXJlbnQoKS5jaGlsZHJlbignOmZpcnN0JykuZmluZCgnLm5vZGUnKTtcbiAgICAgIH0gZWxzZSBpZiAocmVsYXRpb24gPT09ICdjaGlsZHJlbicpIHtcbiAgICAgICAgcmV0dXJuICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykuY2hpbGRyZW4oJzpsYXN0JykuY2hpbGRyZW4oKS5maW5kKCcubm9kZTpmaXJzdCcpO1xuICAgICAgfSBlbHNlIGlmIChyZWxhdGlvbiA9PT0gJ3NpYmxpbmdzJykge1xuICAgICAgICByZXR1cm4gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyByZWN1cnNpdmVseSBoaWRlIHRoZSBhbmNlc3RvciBub2RlIGFuZCBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIGhpZGVQYXJlbnQ6IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgdmFyICR0ZW1wID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCk7XG4gICAgICBpZiAoJHRlbXAuZXEoMCkuZmluZCgnLnNwaW5uZXInKS5sZW5ndGgpIHtcbiAgICAgICAgJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnaW5BamF4JywgZmFsc2UpO1xuICAgICAgfVxuICAgICAgLy8gaGlkZSB0aGUgc2libGluZyBub2Rlc1xuICAgICAgaWYgKHRoaXMuZ2V0Tm9kZVN0YXRlKCRub2RlLCAnc2libGluZ3MnKS52aXNpYmxlKSB7XG4gICAgICAgIHRoaXMuaGlkZVNpYmxpbmdzKCRub2RlKTtcbiAgICAgIH1cbiAgICAgIC8vIGhpZGUgdGhlIGxpbmVzXG4gICAgICB2YXIgJGxpbmVzID0gJHRlbXAuc2xpY2UoMSk7XG4gICAgICAkbGluZXMuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgICAgLy8gaGlkZSB0aGUgc3VwZXJpb3Igbm9kZXMgd2l0aCB0cmFuc2l0aW9uXG4gICAgICB2YXIgJHBhcmVudCA9ICR0ZW1wLmVxKDApLmZpbmQoJy5ub2RlJyk7XG4gICAgICB2YXIgZ3JhbmRmYXRoZXJWaXNpYmxlID0gdGhpcy5nZXROb2RlU3RhdGUoJHBhcmVudCwgJ3BhcmVudCcpLnZpc2libGU7XG4gICAgICBpZiAoJHBhcmVudC5sZW5ndGggJiYgJHBhcmVudC5pcygnOnZpc2libGUnKSkge1xuICAgICAgICAkcGFyZW50LmFkZENsYXNzKCdzbGlkZSBzbGlkZS1kb3duJykub25lKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgJHBhcmVudC5yZW1vdmVDbGFzcygnc2xpZGUnKTtcbiAgICAgICAgICAkbGluZXMucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICAgICAkdGVtcC5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLy8gaWYgdGhlIGN1cnJlbnQgbm9kZSBoYXMgdGhlIHBhcmVudCBub2RlLCBoaWRlIGl0IHJlY3Vyc2l2ZWx5XG4gICAgICBpZiAoJHBhcmVudC5sZW5ndGggJiYgZ3JhbmRmYXRoZXJWaXNpYmxlKSB7XG4gICAgICAgIHRoaXMuaGlkZVBhcmVudCgkcGFyZW50KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIHNob3cgdGhlIHBhcmVudCBub2RlIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIHNob3dQYXJlbnQ6IGZ1bmN0aW9uICgkbm9kZSkge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgLy8ganVzdCBzaG93IG9ubHkgb25lIHN1cGVyaW9yIGxldmVsXG4gICAgICB2YXIgJHRlbXAgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICAvLyBqdXN0IHNob3cgb25seSBvbmUgbGluZVxuICAgICAgJHRlbXAuZXEoMikuY2hpbGRyZW4oKS5zbGljZSgxLCAtMSkuYWRkQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgLy8gc2hvdyBwYXJlbnQgbm9kZSB3aXRoIGFuaW1hdGlvblxuICAgICAgdmFyIHBhcmVudCA9ICR0ZW1wLmVxKDApLmZpbmQoJy5ub2RlJylbMF07XG4gICAgICB0aGlzLnJlcGFpbnQocGFyZW50KTtcbiAgICAgICQocGFyZW50KS5hZGRDbGFzcygnc2xpZGUnKS5yZW1vdmVDbGFzcygnc2xpZGUtZG93bicpLm9uZSgndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAkKHBhcmVudCkucmVtb3ZlQ2xhc3MoJ3NsaWRlJyk7XG4gICAgICAgIGlmICh0aGF0LmlzSW5BY3Rpb24oJG5vZGUpKSB7XG4gICAgICAgICAgdGhhdC5zd2l0Y2hWZXJ0aWNhbEFycm93KCRub2RlLmNoaWxkcmVuKCcudG9wRWRnZScpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyByZWN1cnNpdmVseSBoaWRlIHRoZSBkZXNjZW5kYW50IG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIGhpZGVDaGlsZHJlbjogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJHRlbXAgPSAkbm9kZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCk7XG4gICAgICBpZiAoJHRlbXAubGFzdCgpLmZpbmQoJy5zcGlubmVyJykubGVuZ3RoKSB7XG4gICAgICAgICRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ2luQWpheCcsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIHZhciAkdmlzaWJsZU5vZGVzID0gJHRlbXAubGFzdCgpLmZpbmQoJy5ub2RlOnZpc2libGUnKTtcbiAgICAgIHZhciBpc1ZlcnRpY2FsRGVzYyA9ICR0ZW1wLmxhc3QoKS5pcygnLnZlcnRpY2FsTm9kZXMnKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgIGlmICghaXNWZXJ0aWNhbERlc2MpIHtcbiAgICAgICAgdmFyICRsaW5lcyA9ICR2aXNpYmxlTm9kZXMuY2xvc2VzdCgndGFibGUnKS5jbG9zZXN0KCd0cicpLnByZXZBbGwoJy5saW5lcycpLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgICR2aXNpYmxlTm9kZXMuYWRkQ2xhc3MoJ3NsaWRlIHNsaWRlLXVwJykuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICR2aXNpYmxlTm9kZXMucmVtb3ZlQ2xhc3MoJ3NsaWRlJyk7XG4gICAgICAgIGlmIChpc1ZlcnRpY2FsRGVzYykge1xuICAgICAgICAgICR0ZW1wLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkbGluZXMucmVtb3ZlQXR0cignc3R5bGUnKS5hZGRDbGFzcygnaGlkZGVuJykuc2libGluZ3MoJy5ub2RlcycpLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICAkdGVtcC5sYXN0KCkuZmluZCgnLnZlcnRpY2FsTm9kZXMnKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoYXQuaXNJbkFjdGlvbigkbm9kZSkpIHtcbiAgICAgICAgICB0aGF0LnN3aXRjaFZlcnRpY2FsQXJyb3coJG5vZGUuY2hpbGRyZW4oJy5ib3R0b21FZGdlJykpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vIHNob3cgdGhlIGNoaWxkcmVuIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIHNob3dDaGlsZHJlbjogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJGxldmVscyA9ICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoKTtcbiAgICAgIHZhciBpc1ZlcnRpY2FsRGVzYyA9ICRsZXZlbHMuaXMoJy52ZXJ0aWNhbE5vZGVzJykgPyB0cnVlIDogZmFsc2U7XG4gICAgICB2YXIgJGRlc2NlbmRhbnRzID0gaXNWZXJ0aWNhbERlc2NcbiAgICAgICAgPyAkbGV2ZWxzLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5maW5kKCcubm9kZTp2aXNpYmxlJylcbiAgICAgICAgOiAkbGV2ZWxzLnJlbW92ZUNsYXNzKCdoaWRkZW4nKS5lcSgyKS5jaGlsZHJlbigpLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XG4gICAgICAvLyB0aGUgdHdvIGZvbGxvd2luZyBzdGF0ZW1lbnRzIGFyZSB1c2VkIHRvIGVuZm9yY2UgYnJvd3NlciB0byByZXBhaW50XG4gICAgICB0aGlzLnJlcGFpbnQoJGRlc2NlbmRhbnRzLmdldCgwKSk7XG4gICAgICAkZGVzY2VuZGFudHMuYWRkQ2xhc3MoJ3NsaWRlJykucmVtb3ZlQ2xhc3MoJ3NsaWRlLXVwJykuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICRkZXNjZW5kYW50cy5yZW1vdmVDbGFzcygnc2xpZGUnKTtcbiAgICAgICAgaWYgKHRoYXQuaXNJbkFjdGlvbigkbm9kZSkpIHtcbiAgICAgICAgICB0aGF0LnN3aXRjaFZlcnRpY2FsQXJyb3coJG5vZGUuY2hpbGRyZW4oJy5ib3R0b21FZGdlJykpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vIGhpZGUgdGhlIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgaGlkZVNpYmxpbmdzOiBmdW5jdGlvbiAoJG5vZGUsIGRpcmVjdGlvbikge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyICRub2RlQ29udGFpbmVyID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKTtcbiAgICAgIGlmICgkbm9kZUNvbnRhaW5lci5zaWJsaW5ncygpLmZpbmQoJy5zcGlubmVyJykubGVuZ3RoKSB7XG4gICAgICAgICRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ2luQWpheCcsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgJG5vZGVDb250YWluZXIucHJldkFsbCgpLmZpbmQoJy5ub2RlOnZpc2libGUnKS5hZGRDbGFzcygnc2xpZGUgc2xpZGUtcmlnaHQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkbm9kZUNvbnRhaW5lci5uZXh0QWxsKCkuZmluZCgnLm5vZGU6dmlzaWJsZScpLmFkZENsYXNzKCdzbGlkZSBzbGlkZS1sZWZ0Jyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICRub2RlQ29udGFpbmVyLnByZXZBbGwoKS5maW5kKCcubm9kZTp2aXNpYmxlJykuYWRkQ2xhc3MoJ3NsaWRlIHNsaWRlLXJpZ2h0Jyk7XG4gICAgICAgICRub2RlQ29udGFpbmVyLm5leHRBbGwoKS5maW5kKCcubm9kZTp2aXNpYmxlJykuYWRkQ2xhc3MoJ3NsaWRlIHNsaWRlLWxlZnQnKTtcbiAgICAgIH1cbiAgICAgIHZhciAkYW5pbWF0ZWROb2RlcyA9ICRub2RlQ29udGFpbmVyLnNpYmxpbmdzKCkuZmluZCgnLnNsaWRlJyk7XG4gICAgICB2YXIgJGxpbmVzID0gJGFuaW1hdGVkTm9kZXMuY2xvc2VzdCgnLm5vZGVzJykucHJldkFsbCgnLmxpbmVzJykuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgICAgJGFuaW1hdGVkTm9kZXMuZXEoMCkub25lKCd0cmFuc2l0aW9uZW5kJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICRsaW5lcy5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICB2YXIgJHNpYmxpbmdzID0gZGlyZWN0aW9uID8gKGRpcmVjdGlvbiA9PT0gJ2xlZnQnID8gJG5vZGVDb250YWluZXIucHJldkFsbCgnOm5vdCguaGlkZGVuKScpIDogJG5vZGVDb250YWluZXIubmV4dEFsbCgnOm5vdCguaGlkZGVuKScpKSA6ICRub2RlQ29udGFpbmVyLnNpYmxpbmdzKCk7XG4gICAgICAgICRub2RlQ29udGFpbmVyLmNsb3Nlc3QoJy5ub2RlcycpLnByZXYoKS5jaGlsZHJlbignOm5vdCguaGlkZGVuKScpXG4gICAgICAgICAgLnNsaWNlKDEsIGRpcmVjdGlvbiA/ICRzaWJsaW5ncy5sZW5ndGggKiAyICsgMSA6IC0xKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICRhbmltYXRlZE5vZGVzLnJlbW92ZUNsYXNzKCdzbGlkZScpO1xuICAgICAgICAkc2libGluZ3MuZmluZCgnLm5vZGU6dmlzaWJsZTpndCgwKScpLnJlbW92ZUNsYXNzKCdzbGlkZS1sZWZ0IHNsaWRlLXJpZ2h0JykuYWRkQ2xhc3MoJ3NsaWRlLXVwJylcbiAgICAgICAgICAuZW5kKCkuZmluZCgnLmxpbmVzLCAubm9kZXMsIC52ZXJ0aWNhbE5vZGVzJykuYWRkQ2xhc3MoJ2hpZGRlbicpXG4gICAgICAgICAgLmVuZCgpLmFkZENsYXNzKCdoaWRkZW4nKTtcblxuICAgICAgICBpZiAodGhhdC5pc0luQWN0aW9uKCRub2RlKSkge1xuICAgICAgICAgIHRoYXQuc3dpdGNoSG9yaXpvbnRhbEFycm93KCRub2RlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBzaG93IHRoZSBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZVxuICAgIHNob3dTaWJsaW5nczogZnVuY3Rpb24gKCRub2RlLCBkaXJlY3Rpb24pIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIC8vIGZpcnN0bHksIHNob3cgdGhlIHNpYmxpbmcgdGQgdGFnc1xuICAgICAgdmFyICRzaWJsaW5ncyA9ICQoKTtcbiAgICAgIGlmIChkaXJlY3Rpb24pIHtcbiAgICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2xlZnQnKSB7XG4gICAgICAgICAgJHNpYmxpbmdzID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5wcmV2QWxsKCkucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRzaWJsaW5ncyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkubmV4dEFsbCgpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHNpYmxpbmdzID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH1cbiAgICAgIC8vIHNlY29uZGx5LCBzaG93IHRoZSBsaW5lc1xuICAgICAgdmFyICR1cHBlckxldmVsID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCk7XG4gICAgICBpZiAoZGlyZWN0aW9uKSB7XG4gICAgICAgICR1cHBlckxldmVsLmVxKDIpLmNoaWxkcmVuKCcuaGlkZGVuJykuc2xpY2UoMCwgJHNpYmxpbmdzLmxlbmd0aCAqIDIpLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICR1cHBlckxldmVsLmVxKDIpLmNoaWxkcmVuKCcuaGlkZGVuJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgfVxuICAgICAgLy8gdGhpcmRseSwgZG8gc29tZSBjbGVhbmluZyBzdHVmZlxuICAgICAgaWYgKCF0aGlzLmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3BhcmVudCcpLnZpc2libGUpIHtcbiAgICAgICAgJHVwcGVyTGV2ZWwucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xuICAgICAgICB2YXIgcGFyZW50ID0gJHVwcGVyTGV2ZWwuZmluZCgnLm5vZGUnKVswXTtcbiAgICAgICAgdGhpcy5yZXBhaW50KHBhcmVudCk7XG4gICAgICAgICQocGFyZW50KS5hZGRDbGFzcygnc2xpZGUnKS5yZW1vdmVDbGFzcygnc2xpZGUtZG93bicpLm9uZSgndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ3NsaWRlJyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgLy8gbGFzdGx5LCBzaG93IHRoZSBzaWJsaW5nIG5vZGVzIHdpdGggYW5pbWF0aW9uXG4gICAgICAkc2libGluZ3MuZmluZCgnLm5vZGU6dmlzaWJsZScpLmFkZENsYXNzKCdzbGlkZScpLnJlbW92ZUNsYXNzKCdzbGlkZS1sZWZ0IHNsaWRlLXJpZ2h0JykuZXEoLTEpLm9uZSgndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2libGluZ3MuZmluZCgnLm5vZGU6dmlzaWJsZScpLnJlbW92ZUNsYXNzKCdzbGlkZScpO1xuICAgICAgICBpZiAodGhhdC5pc0luQWN0aW9uKCRub2RlKSkge1xuICAgICAgICAgIHRoYXQuc3dpdGNoSG9yaXpvbnRhbEFycm93KCRub2RlKTtcbiAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLnRvcEVkZ2UnKS5yZW1vdmVDbGFzcygnZmEtY2hldnJvbi11cCcpLmFkZENsYXNzKCdmYS1jaGV2cm9uLWRvd24nKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBzdGFydCB1cCBsb2FkaW5nIHN0YXR1cyBmb3IgcmVxdWVzdGluZyBuZXcgbm9kZXNcbiAgICBzdGFydExvYWRpbmc6IGZ1bmN0aW9uICgkYXJyb3csICRub2RlLCBvcHRpb25zKSB7XG4gICAgICB2YXIgJGNoYXJ0ID0gJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0Jyk7XG4gICAgICBpZiAodHlwZW9mICRjaGFydC5kYXRhKCdpbkFqYXgnKSAhPT0gJ3VuZGVmaW5lZCcgJiYgJGNoYXJ0LmRhdGEoJ2luQWpheCcpID09PSB0cnVlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgJGFycm93LmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICAgICRub2RlLmFwcGVuZCgnPGkgY2xhc3M9XCJmYSBmYS1jaXJjbGUtby1ub3RjaCBmYS1zcGluIHNwaW5uZXJcIj48L2k+Jyk7XG4gICAgICAkbm9kZS5jaGlsZHJlbigpLm5vdCgnLnNwaW5uZXInKS5jc3MoJ29wYWNpdHknLCAwLjIpO1xuICAgICAgJGNoYXJ0LmRhdGEoJ2luQWpheCcsIHRydWUpO1xuICAgICAgJCgnLm9jLWV4cG9ydC1idG4nICsgKG9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnLicgKyBvcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJykpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9LFxuICAgIC8vIHRlcm1pbmF0ZSBsb2FkaW5nIHN0YXR1cyBmb3IgcmVxdWVzdGluZyBuZXcgbm9kZXNcbiAgICBlbmRMb2FkaW5nOiBmdW5jdGlvbiAoJGFycm93LCAkbm9kZSwgb3B0aW9ucykge1xuICAgICAgdmFyICRjaGFydCA9ICRub2RlLmNsb3Nlc3QoJ2Rpdi5vcmdjaGFydCcpO1xuICAgICAgJGFycm93LnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICRub2RlLmZpbmQoJy5zcGlubmVyJykucmVtb3ZlKCk7XG4gICAgICAkbm9kZS5jaGlsZHJlbigpLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICAkY2hhcnQuZGF0YSgnaW5BamF4JywgZmFsc2UpO1xuICAgICAgJCgnLm9jLWV4cG9ydC1idG4nICsgKG9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnLicgKyBvcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJykpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xuICAgIH0sXG4gICAgLy8gd2hldGhlciB0aGUgY3Vyc29yIGlzIGhvdmVyaW5nIG92ZXIgdGhlIG5vZGVcbiAgICBpc0luQWN0aW9uOiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHJldHVybiAkbm9kZS5jaGlsZHJlbignLmVkZ2UnKS5hdHRyKCdjbGFzcycpLmluZGV4T2YoJ2ZhLScpID4gLTEgPyB0cnVlIDogZmFsc2U7XG4gICAgfSxcbiAgICAvL1xuICAgIHN3aXRjaFZlcnRpY2FsQXJyb3c6IGZ1bmN0aW9uICgkYXJyb3cpIHtcbiAgICAgICRhcnJvdy50b2dnbGVDbGFzcygnZmEtY2hldnJvbi11cCcpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLWRvd24nKTtcbiAgICB9LFxuICAgIC8vXG4gICAgc3dpdGNoSG9yaXpvbnRhbEFycm93OiBmdW5jdGlvbiAoJG5vZGUpIHtcbiAgICAgIHZhciBvcHRzID0gJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpO1xuICAgICAgaWYgKG9wdHMudG9nZ2xlU2libGluZ3NSZXNwICYmICh0eXBlb2Ygb3B0cy5hamF4VVJMID09PSAndW5kZWZpbmVkJyB8fCAkbm9kZS5jbG9zZXN0KCcubm9kZXMnKS5kYXRhKCdzaWJsaW5nc0xvYWRlZCcpKSkge1xuICAgICAgICB2YXIgJHByZXZTaWIgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnByZXYoKTtcbiAgICAgICAgaWYgKCRwcmV2U2liLmxlbmd0aCkge1xuICAgICAgICAgIGlmICgkcHJldlNpYi5pcygnLmhpZGRlbicpKSB7XG4gICAgICAgICAgICAkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJykuYWRkQ2xhc3MoJ2ZhLWNoZXZyb24tbGVmdCcpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0Jyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcubGVmdEVkZ2UnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1yaWdodCcpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLWxlZnQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyICRuZXh0U2liID0gJG5vZGUuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5uZXh0KCk7XG4gICAgICAgIGlmICgkbmV4dFNpYi5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoJG5leHRTaWIuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5yaWdodEVkZ2UnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1yaWdodCcpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLWxlZnQnKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5yaWdodEVkZ2UnKS5hZGRDbGFzcygnZmEtY2hldnJvbi1sZWZ0JykucmVtb3ZlQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciAkc2licyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKTtcbiAgICAgICAgdmFyIHNpYnNWaXNpYmxlID0gJHNpYnMubGVuZ3RoID8gISRzaWJzLmlzKCcuaGlkZGVuJykgOiBmYWxzZTtcbiAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy5sZWZ0RWRnZScpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXJpZ2h0Jywgc2lic1Zpc2libGUpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLWxlZnQnLCAhc2lic1Zpc2libGUpO1xuICAgICAgICAkbm9kZS5jaGlsZHJlbignLnJpZ2h0RWRnZScpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLWxlZnQnLCBzaWJzVmlzaWJsZSkudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tcmlnaHQnLCAhc2lic1Zpc2libGUpO1xuICAgICAgfVxuICAgIH0sXG4gICAgLy9cbiAgICByZXBhaW50OiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgbm9kZS5zdHlsZS5vZmZzZXRXaWR0aCA9IG5vZGUub2Zmc2V0V2lkdGg7XG4gICAgICB9XG4gICAgfSxcbiAgICAvLyBjcmVhdGUgbm9kZVxuICAgIGNyZWF0ZU5vZGU6IGZ1bmN0aW9uIChub2RlRGF0YSwgbGV2ZWwsIG9wdHMpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIGlmICghbm9kZURhdGEuY2hpbGRyZW4pIHsgbm9kZURhdGEuY2hpbGRyZW4gPSBbXTsgfVxuICAgICAgJC5lYWNoKG5vZGVEYXRhLmNoaWxkcmVuLCBmdW5jdGlvbiAoaW5kZXgsIGNoaWxkKSB7XG4gICAgICAgIGNoaWxkLnBhcmVudElkID0gbm9kZURhdGEuaWQ7XG4gICAgICB9KTtcbiAgICAgIHZhciBkdGQgPSAkLkRlZmVycmVkKCk7XG4gICAgICAvLyBjb25zdHJ1Y3QgdGhlIGNvbnRlbnQgb2Ygbm9kZVxuICAgICAgdmFyICRub2RlRGl2ID0gJCgnPGRpdicgKyAob3B0cy5kcmFnZ2FibGUgPyAnIGRyYWdnYWJsZT1cInRydWVcIicgOiAnJykgKyAobm9kZURhdGFbb3B0cy5ub2RlSWRdID8gJyBpZD1cIicgKyBub2RlRGF0YVtvcHRzLm5vZGVJZF0gKyAnXCInIDogJycpICsgKG5vZGVEYXRhLnBhcmVudElkID8gJyBkYXRhLXBhcmVudD1cIicgKyBub2RlRGF0YS5wYXJlbnRJZCArICdcIicgOiAnJykgKyAnPicpXG4gICAgICAgIC5hZGRDbGFzcygnbm9kZSAnICsgKG5vZGVEYXRhLmNsYXNzTmFtZSB8fCAnJykgKyAgKGxldmVsID49IG9wdHMuZGVwdGggPyAnIHNsaWRlLXVwJyA6ICcnKSk7XG4gICAgICBpZiAob3B0cy5ub2RlVGVtcGxhdGUpIHtcbiAgICAgICAgJG5vZGVEaXYuYXBwZW5kKG9wdHMubm9kZVRlbXBsYXRlKG5vZGVEYXRhKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkbm9kZURpdi5hcHBlbmQoJzxkaXYgY2xhc3M9XCJ0aXRsZVwiPicgKyBub2RlRGF0YVtvcHRzLm5vZGVUaXRsZV0gKyAnPC9kaXY+JylcbiAgICAgICAgICAuYXBwZW5kKHR5cGVvZiBvcHRzLm5vZGVDb250ZW50ICE9PSAndW5kZWZpbmVkJyA/ICc8ZGl2IGNsYXNzPVwiY29udGVudFwiPicgKyAobm9kZURhdGFbb3B0cy5ub2RlQ29udGVudF0gfHwgJycpICsgJzwvZGl2PicgOiAnJyk7XG4gICAgICB9XG4gICAgICAvLyBhcHBlbmQgNCBkaXJlY3Rpb24gYXJyb3dzIG9yIGV4cGFuZC9jb2xsYXBzZSBidXR0b25zXG4gICAgICB2YXIgZmxhZ3MgPSBub2RlRGF0YS5yZWxhdGlvbnNoaXAgfHwgJyc7XG4gICAgICBpZiAob3B0cy52ZXJ0aWNhbERlcHRoICYmIChsZXZlbCArIDIpID4gb3B0cy52ZXJ0aWNhbERlcHRoKSB7XG4gICAgICAgIGlmICgobGV2ZWwgKyAxKSA+PSBvcHRzLnZlcnRpY2FsRGVwdGggJiYgTnVtYmVyKGZsYWdzLnN1YnN0cigyLDEpKSkge1xuICAgICAgICAgIHZhciBpY29uID0gbGV2ZWwgKyAxICA+PSBvcHRzLmRlcHRoID8gJ3BsdXMnIDogJ21pbnVzJztcbiAgICAgICAgICAkbm9kZURpdi5hcHBlbmQoJzxpIGNsYXNzPVwidG9nZ2xlQnRuIGZhIGZhLScgKyBpY29uICsgJy1zcXVhcmVcIj48L2k+Jyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChOdW1iZXIoZmxhZ3Muc3Vic3RyKDAsMSkpKSB7XG4gICAgICAgICAgJG5vZGVEaXYuYXBwZW5kKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIHRvcEVkZ2UgZmFcIj48L2k+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoTnVtYmVyKGZsYWdzLnN1YnN0cigxLDEpKSkge1xuICAgICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIHJpZ2h0RWRnZSBmYVwiPjwvaT4nICtcbiAgICAgICAgICAgICc8aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgbGVmdEVkZ2UgZmFcIj48L2k+Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYoTnVtYmVyKGZsYWdzLnN1YnN0cigyLDEpKSkge1xuICAgICAgICAgICRub2RlRGl2LmFwcGVuZCgnPGkgY2xhc3M9XCJlZGdlIHZlcnRpY2FsRWRnZSBib3R0b21FZGdlIGZhXCI+PC9pPicpXG4gICAgICAgICAgICAuY2hpbGRyZW4oJy50aXRsZScpLnByZXBlbmQoJzxpIGNsYXNzPVwiZmEgJysgb3B0cy5wYXJlbnROb2RlU3ltYm9sICsgJyBzeW1ib2xcIj48L2k+Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJG5vZGVEaXYub24oJ21vdXNlZW50ZXIgbW91c2VsZWF2ZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIHZhciAkbm9kZSA9ICQodGhpcyksIGZsYWcgPSBmYWxzZTtcbiAgICAgICAgdmFyICR0b3BFZGdlID0gJG5vZGUuY2hpbGRyZW4oJy50b3BFZGdlJyk7XG4gICAgICAgIHZhciAkcmlnaHRFZGdlID0gJG5vZGUuY2hpbGRyZW4oJy5yaWdodEVkZ2UnKTtcbiAgICAgICAgdmFyICRib3R0b21FZGdlID0gJG5vZGUuY2hpbGRyZW4oJy5ib3R0b21FZGdlJyk7XG4gICAgICAgIHZhciAkbGVmdEVkZ2UgPSAkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJyk7XG4gICAgICAgIGlmIChldmVudC50eXBlID09PSAnbW91c2VlbnRlcicpIHtcbiAgICAgICAgICBpZiAoJHRvcEVkZ2UubGVuZ3RoKSB7XG4gICAgICAgICAgICBmbGFnID0gdGhhdC5nZXROb2RlU3RhdGUoJG5vZGUsICdwYXJlbnQnKS52aXNpYmxlO1xuICAgICAgICAgICAgJHRvcEVkZ2UudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tdXAnLCAhZmxhZykudG9nZ2xlQ2xhc3MoJ2ZhLWNoZXZyb24tZG93bicsIGZsYWcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoJGJvdHRvbUVkZ2UubGVuZ3RoKSB7XG4gICAgICAgICAgICBmbGFnID0gdGhhdC5nZXROb2RlU3RhdGUoJG5vZGUsICdjaGlsZHJlbicpLnZpc2libGU7XG4gICAgICAgICAgICAkYm90dG9tRWRnZS50b2dnbGVDbGFzcygnZmEtY2hldnJvbi1kb3duJywgIWZsYWcpLnRvZ2dsZUNsYXNzKCdmYS1jaGV2cm9uLXVwJywgZmxhZyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICgkbGVmdEVkZ2UubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGF0LnN3aXRjaEhvcml6b250YWxBcnJvdygkbm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRub2RlLmNoaWxkcmVuKCcuZWRnZScpLnJlbW92ZUNsYXNzKCdmYS1jaGV2cm9uLXVwIGZhLWNoZXZyb24tZG93biBmYS1jaGV2cm9uLXJpZ2h0IGZhLWNoZXZyb24tbGVmdCcpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gZGVmaW5lIGNsaWNrIGV2ZW50IGhhbmRsZXJcbiAgICAgICRub2RlRGl2Lm9uKCdjbGljaycsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICQodGhpcykuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZmluZCgnLmZvY3VzZWQnKS5yZW1vdmVDbGFzcygnZm9jdXNlZCcpO1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdmb2N1c2VkJyk7XG4gICAgICB9KTtcblxuICAgICAgLy8gZGVmaW5lIGNsaWNrIGV2ZW50IGhhbmRsZXIgZm9yIHRoZSB0b3AgZWRnZVxuICAgICAgJG5vZGVEaXYub24oJ2NsaWNrJywgJy50b3BFZGdlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIHZhciAkdGhhdCA9ICQodGhpcyk7XG4gICAgICAgIHZhciAkbm9kZSA9ICR0aGF0LnBhcmVudCgpO1xuICAgICAgICB2YXIgcGFyZW50U3RhdGUgPSB0aGF0LmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3BhcmVudCcpO1xuICAgICAgICBpZiAocGFyZW50U3RhdGUuZXhpc3QpIHtcbiAgICAgICAgICB2YXIgJHBhcmVudCA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykuY2xvc2VzdCgndHInKS5zaWJsaW5ncygnOmZpcnN0JykuZmluZCgnLm5vZGUnKTtcbiAgICAgICAgICBpZiAoJHBhcmVudC5pcygnLnNsaWRlJykpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgLy8gaGlkZSB0aGUgYW5jZXN0b3Igbm9kZXMgYW5kIHNpYmxpbmcgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgICAgICAgaWYgKHBhcmVudFN0YXRlLnZpc2libGUpIHtcbiAgICAgICAgICAgIHRoYXQuaGlkZVBhcmVudCgkbm9kZSk7XG4gICAgICAgICAgICAkcGFyZW50Lm9uZSgndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBpZiAodGhhdC5pc0luQWN0aW9uKCRub2RlKSkge1xuICAgICAgICAgICAgICAgIHRoYXQuc3dpdGNoVmVydGljYWxBcnJvdygkdGhhdCk7XG4gICAgICAgICAgICAgICAgdGhhdC5zd2l0Y2hIb3Jpem9udGFsQXJyb3coJG5vZGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2UgeyAvLyBzaG93IHRoZSBhbmNlc3RvcnMgYW5kIHNpYmxpbmdzXG4gICAgICAgICAgICB0aGF0LnNob3dQYXJlbnQoJG5vZGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBsb2FkIHRoZSBuZXcgcGFyZW50IG5vZGUgb2YgdGhlIHNwZWNpZmllZCBub2RlIGJ5IGFqYXggcmVxdWVzdFxuICAgICAgICAgIHZhciBub2RlSWQgPSAkdGhhdC5wYXJlbnQoKVswXS5pZDtcbiAgICAgICAgICAvLyBzdGFydCB1cCBsb2FkaW5nIHN0YXR1c1xuICAgICAgICAgIGlmICh0aGF0LnN0YXJ0TG9hZGluZygkdGhhdCwgJG5vZGUsIG9wdHMpKSB7XG4gICAgICAgICAgLy8gbG9hZCBuZXcgbm9kZXNcbiAgICAgICAgICAgICQuYWpheCh7ICd1cmwnOiAkLmlzRnVuY3Rpb24ob3B0cy5hamF4VVJMLnBhcmVudCkgPyBvcHRzLmFqYXhVUkwucGFyZW50KG5vZGVEYXRhKSA6IG9wdHMuYWpheFVSTC5wYXJlbnQgKyBub2RlSWQsICdkYXRhVHlwZSc6ICdqc29uJyB9KVxuICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICBpZiAoJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnaW5BamF4JykpIHtcbiAgICAgICAgICAgICAgICBpZiAoISQuaXNFbXB0eU9iamVjdChkYXRhKSkge1xuICAgICAgICAgICAgICAgICAgdGhhdC5hZGRQYXJlbnQoJG5vZGUsIGRhdGEsIG9wdHMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uKCkgeyBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGdldCBwYXJlbnQgbm9kZSBkYXRhJyk7IH0pXG4gICAgICAgICAgICAuYWx3YXlzKGZ1bmN0aW9uKCkgeyB0aGF0LmVuZExvYWRpbmcoJHRoYXQsICRub2RlLCBvcHRzKTsgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gYmluZCBjbGljayBldmVudCBoYW5kbGVyIGZvciB0aGUgYm90dG9tIGVkZ2VcbiAgICAgICRub2RlRGl2Lm9uKCdjbGljaycsICcuYm90dG9tRWRnZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB2YXIgJHRoYXQgPSAkKHRoaXMpO1xuICAgICAgICB2YXIgJG5vZGUgPSAkdGhhdC5wYXJlbnQoKTtcbiAgICAgICAgdmFyIGNoaWxkcmVuU3RhdGUgPSB0aGF0LmdldE5vZGVTdGF0ZSgkbm9kZSwgJ2NoaWxkcmVuJyk7XG4gICAgICAgIGlmIChjaGlsZHJlblN0YXRlLmV4aXN0KSB7XG4gICAgICAgICAgdmFyICRjaGlsZHJlbiA9ICRub2RlLmNsb3Nlc3QoJ3RyJykuc2libGluZ3MoJzpsYXN0Jyk7XG4gICAgICAgICAgaWYgKCRjaGlsZHJlbi5maW5kKCcubm9kZTp2aXNpYmxlJykuaXMoJy5zbGlkZScpKSB7IHJldHVybjsgfVxuICAgICAgICAgIC8vIGhpZGUgdGhlIGRlc2NlbmRhbnQgbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlXG4gICAgICAgICAgaWYgKGNoaWxkcmVuU3RhdGUudmlzaWJsZSkge1xuICAgICAgICAgICAgdGhhdC5oaWRlQ2hpbGRyZW4oJG5vZGUpO1xuICAgICAgICAgIH0gZWxzZSB7IC8vIHNob3cgdGhlIGRlc2NlbmRhbnRzXG4gICAgICAgICAgICB0aGF0LnNob3dDaGlsZHJlbigkbm9kZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgeyAvLyBsb2FkIHRoZSBuZXcgY2hpbGRyZW4gbm9kZXMgb2YgdGhlIHNwZWNpZmllZCBub2RlIGJ5IGFqYXggcmVxdWVzdFxuICAgICAgICAgIHZhciBub2RlSWQgPSAkdGhhdC5wYXJlbnQoKVswXS5pZDtcbiAgICAgICAgICBpZiAodGhhdC5zdGFydExvYWRpbmcoJHRoYXQsICRub2RlLCBvcHRzKSkge1xuICAgICAgICAgICAgJC5hamF4KHsgJ3VybCc6ICQuaXNGdW5jdGlvbihvcHRzLmFqYXhVUkwuY2hpbGRyZW4pID8gb3B0cy5hamF4VVJMLmNoaWxkcmVuKG5vZGVEYXRhKSA6IG9wdHMuYWpheFVSTC5jaGlsZHJlbiArIG5vZGVJZCwgJ2RhdGFUeXBlJzogJ2pzb24nIH0pXG4gICAgICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUikge1xuICAgICAgICAgICAgICBpZiAoJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnaW5BamF4JykpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgIHRoYXQuYWRkQ2hpbGRyZW4oJG5vZGUsIGRhdGEsICQuZXh0ZW5kKHt9LCBvcHRzLCB7IGRlcHRoOiAwIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZmFpbChmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBnZXQgY2hpbGRyZW4gbm9kZXMgZGF0YScpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hbHdheXMoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHRoYXQuZW5kTG9hZGluZygkdGhhdCwgJG5vZGUsIG9wdHMpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gZXZlbnQgaGFuZGxlciBmb3IgdG9nZ2xlIGJ1dHRvbnMgaW4gSHlicmlkKGhvcml6b250YWwgKyB2ZXJ0aWNhbCkgT3JnQ2hhcnRcbiAgICAgICRub2RlRGl2Lm9uKCdjbGljaycsICcudG9nZ2xlQnRuJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgdmFyICRkZXNjV3JhcHBlciA9ICR0aGlzLnBhcmVudCgpLm5leHQoKTtcbiAgICAgICAgdmFyICRkZXNjZW5kYW50cyA9ICRkZXNjV3JhcHBlci5maW5kKCcubm9kZScpO1xuICAgICAgICB2YXIgJGNoaWxkcmVuID0gJGRlc2NXcmFwcGVyLmNoaWxkcmVuKCkuY2hpbGRyZW4oJy5ub2RlJyk7XG4gICAgICAgIGlmICgkY2hpbGRyZW4uaXMoJy5zbGlkZScpKSB7IHJldHVybjsgfVxuICAgICAgICAkdGhpcy50b2dnbGVDbGFzcygnZmEtcGx1cy1zcXVhcmUgZmEtbWludXMtc3F1YXJlJyk7XG4gICAgICAgIGlmICgkZGVzY2VuZGFudHMuZXEoMCkuaXMoJy5zbGlkZS11cCcpKSB7XG4gICAgICAgICAgJGRlc2NXcmFwcGVyLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgICB0aGF0LnJlcGFpbnQoJGNoaWxkcmVuLmdldCgwKSk7XG4gICAgICAgICAgJGNoaWxkcmVuLmFkZENsYXNzKCdzbGlkZScpLnJlbW92ZUNsYXNzKCdzbGlkZS11cCcpLmVxKDApLm9uZSgndHJhbnNpdGlvbmVuZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJGNoaWxkcmVuLnJlbW92ZUNsYXNzKCdzbGlkZScpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICRkZXNjZW5kYW50cy5hZGRDbGFzcygnc2xpZGUgc2xpZGUtdXAnKS5lcSgwKS5vbmUoJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRkZXNjZW5kYW50cy5yZW1vdmVDbGFzcygnc2xpZGUnKTtcbiAgICAgICAgICAgIC8vICRkZXNjV3JhcHBlci5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgICAkZGVzY2VuZGFudHMuY2xvc2VzdCgndWwnKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgJGRlc2NlbmRhbnRzLmZpbmQoJy50b2dnbGVCdG4nKS5yZW1vdmVDbGFzcygnZmEtbWludXMtc3F1YXJlJykuYWRkQ2xhc3MoJ2ZhLXBsdXMtc3F1YXJlJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICAvLyBiaW5kIGNsaWNrIGV2ZW50IGhhbmRsZXIgZm9yIHRoZSBsZWZ0IGFuZCByaWdodCBlZGdlc1xuICAgICAgJG5vZGVEaXYub24oJ2NsaWNrJywgJy5sZWZ0RWRnZSwgLnJpZ2h0RWRnZScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB2YXIgJHRoYXQgPSAkKHRoaXMpO1xuICAgICAgICB2YXIgJG5vZGUgPSAkdGhhdC5wYXJlbnQoKTtcbiAgICAgICAgdmFyIHNpYmxpbmdzU3RhdGUgPSB0aGF0LmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3NpYmxpbmdzJyk7XG4gICAgICAgIGlmIChzaWJsaW5nc1N0YXRlLmV4aXN0KSB7XG4gICAgICAgICAgdmFyICRzaWJsaW5ncyA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkuc2libGluZ3MoKTtcbiAgICAgICAgICBpZiAoJHNpYmxpbmdzLmZpbmQoJy5ub2RlOnZpc2libGUnKS5pcygnLnNsaWRlJykpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgaWYgKG9wdHMudG9nZ2xlU2libGluZ3NSZXNwKSB7XG4gICAgICAgICAgICB2YXIgJHByZXZTaWIgPSAkbm9kZS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpLnByZXYoKTtcbiAgICAgICAgICAgIHZhciAkbmV4dFNpYiA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCkubmV4dCgpO1xuICAgICAgICAgICAgaWYgKCR0aGF0LmlzKCcubGVmdEVkZ2UnKSkge1xuICAgICAgICAgICAgICBpZiAoJHByZXZTaWIuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgICAgIHRoYXQuc2hvd1NpYmxpbmdzKCRub2RlLCAnbGVmdCcpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoYXQuaGlkZVNpYmxpbmdzKCRub2RlLCAnbGVmdCcpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZiAoJG5leHRTaWIuaXMoJy5oaWRkZW4nKSkge1xuICAgICAgICAgICAgICAgIHRoYXQuc2hvd1NpYmxpbmdzKCRub2RlLCAncmlnaHQnKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGF0LmhpZGVTaWJsaW5ncygkbm9kZSwgJ3JpZ2h0Jyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHNpYmxpbmdzU3RhdGUudmlzaWJsZSkge1xuICAgICAgICAgICAgICB0aGF0LmhpZGVTaWJsaW5ncygkbm9kZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGF0LnNob3dTaWJsaW5ncygkbm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGxvYWQgdGhlIG5ldyBzaWJsaW5nIG5vZGVzIG9mIHRoZSBzcGVjaWZpZWQgbm9kZSBieSBhamF4IHJlcXVlc3RcbiAgICAgICAgICB2YXIgbm9kZUlkID0gJHRoYXQucGFyZW50KClbMF0uaWQ7XG4gICAgICAgICAgdmFyIHVybCA9ICh0aGF0LmdldE5vZGVTdGF0ZSgkbm9kZSwgJ3BhcmVudCcpLmV4aXN0KSA/XG4gICAgICAgICAgICAoJC5pc0Z1bmN0aW9uKG9wdHMuYWpheFVSTC5zaWJsaW5ncykgPyBvcHRzLmFqYXhVUkwuc2libGluZ3Mobm9kZURhdGEpIDogb3B0cy5hamF4VVJMLnNpYmxpbmdzICsgbm9kZUlkKSA6XG4gICAgICAgICAgICAoJC5pc0Z1bmN0aW9uKG9wdHMuYWpheFVSTC5mYW1pbGllcykgPyBvcHRzLmFqYXhVUkwuZmFtaWxpZXMobm9kZURhdGEpIDogb3B0cy5hamF4VVJMLmZhbWlsaWVzICsgbm9kZUlkKTtcbiAgICAgICAgICBpZiAodGhhdC5zdGFydExvYWRpbmcoJHRoYXQsICRub2RlLCBvcHRzKSkge1xuICAgICAgICAgICAgJC5hamF4KHsgJ3VybCc6IHVybCwgJ2RhdGFUeXBlJzogJ2pzb24nIH0pXG4gICAgICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhLCB0ZXh0U3RhdHVzLCBqcVhIUikge1xuICAgICAgICAgICAgICBpZiAoJG5vZGUuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnaW5BamF4JykpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zaWJsaW5ncyB8fCBkYXRhLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICB0aGF0LmFkZFNpYmxpbmdzKCRub2RlLCBkYXRhLCBvcHRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZmFpbChmdW5jdGlvbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCB0byBnZXQgc2libGluZyBub2RlcyBkYXRhJyk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmFsd2F5cyhmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgdGhhdC5lbmRMb2FkaW5nKCR0aGF0LCAkbm9kZSwgb3B0cyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKG9wdHMuZHJhZ2dhYmxlKSB7XG4gICAgICAgICRub2RlRGl2Lm9uKCdkcmFnc3RhcnQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIHZhciBvcmlnRXZlbnQgPSBldmVudC5vcmlnaW5hbEV2ZW50O1xuICAgICAgICAgIHZhciBpc0ZpcmVmb3ggPSAvZmlyZWZveC8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICBpZiAoaXNGaXJlZm94KSB7XG4gICAgICAgICAgICBvcmlnRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvaHRtbCcsICdoYWNrIGZvciBmaXJlZm94Jyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIGlmIHVzZXJzIGVuYWJsZSB6b29tIG9yIGRpcmVjdGlvbiBvcHRpb25zXG4gICAgICAgICAgaWYgKCRub2RlRGl2LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmNzcygndHJhbnNmb3JtJykgIT09ICdub25lJykge1xuICAgICAgICAgICAgdmFyIGdob3N0Tm9kZSwgbm9kZUNvdmVyO1xuICAgICAgICAgICAgaWYgKCFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2hvc3Qtbm9kZScpKSB7XG4gICAgICAgICAgICAgIGdob3N0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsIFwic3ZnXCIpO1xuICAgICAgICAgICAgICBnaG9zdE5vZGUuY2xhc3NMaXN0LmFkZCgnZ2hvc3Qtbm9kZScpO1xuICAgICAgICAgICAgICBub2RlQ292ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywncmVjdCcpO1xuICAgICAgICAgICAgICBnaG9zdE5vZGUuYXBwZW5kQ2hpbGQobm9kZUNvdmVyKTtcbiAgICAgICAgICAgICAgJG5vZGVEaXYuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuYXBwZW5kKGdob3N0Tm9kZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBnaG9zdE5vZGUgPSAkbm9kZURpdi5jbG9zZXN0KCcub3JnY2hhcnQnKS5jaGlsZHJlbignLmdob3N0LW5vZGUnKS5nZXQoMCk7XG4gICAgICAgICAgICAgIG5vZGVDb3ZlciA9ICQoZ2hvc3ROb2RlKS5jaGlsZHJlbigpLmdldCgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0cmFuc1ZhbHVlcyA9ICRub2RlRGl2LmNsb3Nlc3QoJy5vcmdjaGFydCcpLmNzcygndHJhbnNmb3JtJykuc3BsaXQoJywnKTtcbiAgICAgICAgICAgIHZhciBzY2FsZSA9IE1hdGguYWJzKHdpbmRvdy5wYXJzZUZsb2F0KChvcHRzLmRpcmVjdGlvbiA9PT0gJ3QyYicgfHwgb3B0cy5kaXJlY3Rpb24gPT09ICdiMnQnKSA/IHRyYW5zVmFsdWVzWzBdLnNsaWNlKHRyYW5zVmFsdWVzWzBdLmluZGV4T2YoJygnKSArIDEpIDogdHJhbnNWYWx1ZXNbMV0pKTtcbiAgICAgICAgICAgIGdob3N0Tm9kZS5zZXRBdHRyaWJ1dGUoJ3dpZHRoJywgJG5vZGVEaXYub3V0ZXJXaWR0aChmYWxzZSkpO1xuICAgICAgICAgICAgZ2hvc3ROb2RlLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgJG5vZGVEaXYub3V0ZXJIZWlnaHQoZmFsc2UpKTtcbiAgICAgICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3gnLDUgKiBzY2FsZSk7XG4gICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCd5Jyw1ICogc2NhbGUpO1xuICAgICAgICAgICAgbm9kZUNvdmVyLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCAxMjAgKiBzY2FsZSk7XG4gICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdoZWlnaHQnLCA0MCAqIHNjYWxlKTtcbiAgICAgICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3J4JywgNCAqIHNjYWxlKTtcbiAgICAgICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3J5JywgNCAqIHNjYWxlKTtcbiAgICAgICAgICAgIG5vZGVDb3Zlci5zZXRBdHRyaWJ1dGUoJ3N0cm9rZS13aWR0aCcsIDEgKiBzY2FsZSk7XG4gICAgICAgICAgICB2YXIgeE9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRYICogc2NhbGU7XG4gICAgICAgICAgICB2YXIgeU9mZnNldCA9IG9yaWdFdmVudC5vZmZzZXRZICogc2NhbGU7XG4gICAgICAgICAgICBpZiAob3B0cy5kaXJlY3Rpb24gPT09ICdsMnInKSB7XG4gICAgICAgICAgICAgIHhPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WSAqIHNjYWxlO1xuICAgICAgICAgICAgICB5T2Zmc2V0ID0gb3JpZ0V2ZW50Lm9mZnNldFggKiBzY2FsZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0cy5kaXJlY3Rpb24gPT09ICdyMmwnKSB7XG4gICAgICAgICAgICAgIHhPZmZzZXQgPSAkbm9kZURpdi5vdXRlcldpZHRoKGZhbHNlKSAtIG9yaWdFdmVudC5vZmZzZXRZICogc2NhbGU7XG4gICAgICAgICAgICAgIHlPZmZzZXQgPSBvcmlnRXZlbnQub2Zmc2V0WCAqIHNjYWxlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChvcHRzLmRpcmVjdGlvbiA9PT0gJ2IydCcpIHtcbiAgICAgICAgICAgICAgeE9mZnNldCA9ICRub2RlRGl2Lm91dGVyV2lkdGgoZmFsc2UpIC0gb3JpZ0V2ZW50Lm9mZnNldFggKiBzY2FsZTtcbiAgICAgICAgICAgICAgeU9mZnNldCA9ICRub2RlRGl2Lm91dGVySGVpZ2h0KGZhbHNlKSAtIG9yaWdFdmVudC5vZmZzZXRZICogc2NhbGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNGaXJlZm94KSB7IC8vIGhhY2sgZm9yIG9sZCB2ZXJzaW9uIG9mIEZpcmVmb3goPCA0OC4wKVxuICAgICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdmaWxsJywgJ3JnYigyNTUsIDI1NSwgMjU1KScpO1xuICAgICAgICAgICAgICBub2RlQ292ZXIuc2V0QXR0cmlidXRlKCdzdHJva2UnLCAncmdiKDE5MSwgMCwgMCknKTtcbiAgICAgICAgICAgICAgdmFyIGdob3N0Tm9kZVdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgICAgICAgZ2hvc3ROb2RlV3JhcHBlci5zcmMgPSAnZGF0YTppbWFnZS9zdmcreG1sO3V0ZjgsJyArIChuZXcgWE1MU2VyaWFsaXplcigpKS5zZXJpYWxpemVUb1N0cmluZyhnaG9zdE5vZGUpO1xuICAgICAgICAgICAgICBvcmlnRXZlbnQuZGF0YVRyYW5zZmVyLnNldERyYWdJbWFnZShnaG9zdE5vZGVXcmFwcGVyLCB4T2Zmc2V0LCB5T2Zmc2V0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG9yaWdFdmVudC5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGdob3N0Tm9kZSwgeE9mZnNldCwgeU9mZnNldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciAkZHJhZ2dlZCA9ICQodGhpcyk7XG4gICAgICAgICAgdmFyICRkcmFnWm9uZSA9ICRkcmFnZ2VkLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCkuZXEoMCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcbiAgICAgICAgICB2YXIgJGRyYWdIaWVyID0gJGRyYWdnZWQuY2xvc2VzdCgndGFibGUnKS5maW5kKCcubm9kZScpO1xuICAgICAgICAgICRkcmFnZ2VkLmNsb3Nlc3QoJy5vcmdjaGFydCcpXG4gICAgICAgICAgICAuZGF0YSgnZHJhZ2dlZCcsICRkcmFnZ2VkKVxuICAgICAgICAgICAgLmZpbmQoJy5ub2RlJykuZWFjaChmdW5jdGlvbihpbmRleCwgbm9kZSkge1xuICAgICAgICAgICAgICBpZiAoJGRyYWdIaWVyLmluZGV4KG5vZGUpID09PSAtMSkge1xuICAgICAgICAgICAgICAgIGlmIChvcHRzLmRyb3BDcml0ZXJpYSkge1xuICAgICAgICAgICAgICAgICAgaWYgKG9wdHMuZHJvcENyaXRlcmlhKCRkcmFnZ2VkLCAkZHJhZ1pvbmUsICQobm9kZSkpKSB7XG4gICAgICAgICAgICAgICAgICAgICQobm9kZSkuYWRkQ2xhc3MoJ2FsbG93ZWREcm9wJyk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICQobm9kZSkuYWRkQ2xhc3MoJ2FsbG93ZWREcm9wJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdkcmFnb3ZlcicsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICBpZiAoISQodGhpcykuaXMoJy5hbGxvd2VkRHJvcCcpKSB7XG4gICAgICAgICAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gJ25vbmUnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLm9uKCdkcmFnZW5kJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmZpbmQoJy5hbGxvd2VkRHJvcCcpLnJlbW92ZUNsYXNzKCdhbGxvd2VkRHJvcCcpO1xuICAgICAgICB9KVxuICAgICAgICAub24oJ2Ryb3AnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgIHZhciAkZHJvcFpvbmUgPSAkKHRoaXMpO1xuICAgICAgICAgIHZhciAkb3JnY2hhcnQgPSAkZHJvcFpvbmUuY2xvc2VzdCgnLm9yZ2NoYXJ0Jyk7XG4gICAgICAgICAgdmFyICRkcmFnZ2VkID0gJG9yZ2NoYXJ0LmRhdGEoJ2RyYWdnZWQnKTtcbiAgICAgICAgICAkb3JnY2hhcnQuZmluZCgnLmFsbG93ZWREcm9wJykucmVtb3ZlQ2xhc3MoJ2FsbG93ZWREcm9wJyk7XG4gICAgICAgICAgdmFyICRkcmFnWm9uZSA9ICRkcmFnZ2VkLmNsb3Nlc3QoJy5ub2RlcycpLnNpYmxpbmdzKCkuZXEoMCkuY2hpbGRyZW4oKTtcbiAgICAgICAgICAvLyBmaXJzdGx5LCBkZWFsIHdpdGggdGhlIGhpZXJhcmNoeSBvZiBkcm9wIHpvbmVcbiAgICAgICAgICBpZiAoISRkcm9wWm9uZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCkubGVuZ3RoKSB7IC8vIGlmIHRoZSBkcm9wIHpvbmUgaXMgYSBsZWFmIG5vZGVcbiAgICAgICAgICAgICRkcm9wWm9uZS5hcHBlbmQoJzxpIGNsYXNzPVwiZWRnZSB2ZXJ0aWNhbEVkZ2UgYm90dG9tRWRnZSBmYVwiPjwvaT4nKVxuICAgICAgICAgICAgICAucGFyZW50KCkuYXR0cignY29sc3BhbicsIDIpXG4gICAgICAgICAgICAgIC5wYXJlbnQoKS5hZnRlcignPHRyIGNsYXNzPVwibGluZXNcIj48dGQgY29sc3Bhbj1cIjJcIj48ZGl2IGNsYXNzPVwiZG93bkxpbmVcIj48L2Rpdj48L3RkPjwvdHI+J1xuICAgICAgICAgICAgICArICc8dHIgY2xhc3M9XCJsaW5lc1wiPjx0ZCBjbGFzcz1cInJpZ2h0TGluZVwiPiZuYnNwOzwvdGQ+PHRkIGNsYXNzPVwibGVmdExpbmVcIj4mbmJzcDs8L3RkPjwvdHI+J1xuICAgICAgICAgICAgICArICc8dHIgY2xhc3M9XCJub2Rlc1wiPjwvdHI+JylcbiAgICAgICAgICAgICAgLnNpYmxpbmdzKCc6bGFzdCcpLmFwcGVuZCgkZHJhZ2dlZC5maW5kKCcuaG9yaXpvbnRhbEVkZ2UnKS5yZW1vdmUoKS5lbmQoKS5jbG9zZXN0KCd0YWJsZScpLnBhcmVudCgpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGRyb3BDb2xzcGFuID0gcGFyc2VJbnQoJGRyb3Bab25lLnBhcmVudCgpLmF0dHIoJ2NvbHNwYW4nKSkgKyAyO1xuICAgICAgICAgICAgdmFyIGhvcml6b250YWxFZGdlcyA9ICc8aSBjbGFzcz1cImVkZ2UgaG9yaXpvbnRhbEVkZ2UgcmlnaHRFZGdlIGZhXCI+PC9pPjxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSBsZWZ0RWRnZSBmYVwiPjwvaT4nO1xuICAgICAgICAgICAgJGRyb3Bab25lLmNsb3Nlc3QoJ3RyJykubmV4dCgpLmFkZEJhY2soKS5jaGlsZHJlbigpLmF0dHIoJ2NvbHNwYW4nLCBkcm9wQ29sc3Bhbik7XG4gICAgICAgICAgICBpZiAoISRkcmFnZ2VkLmZpbmQoJy5ob3Jpem9udGFsRWRnZScpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAkZHJhZ2dlZC5hcHBlbmQoaG9yaXpvbnRhbEVkZ2VzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRkcm9wWm9uZS5jbG9zZXN0KCd0cicpLnNpYmxpbmdzKCkuZXEoMSkuY2hpbGRyZW4oJzpsYXN0JykuYmVmb3JlKCc8dGQgY2xhc3M9XCJsZWZ0TGluZSB0b3BMaW5lXCI+Jm5ic3A7PC90ZD48dGQgY2xhc3M9XCJyaWdodExpbmUgdG9wTGluZVwiPiZuYnNwOzwvdGQ+JylcbiAgICAgICAgICAgICAgLmVuZCgpLm5leHQoKS5hcHBlbmQoJGRyYWdnZWQuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKSk7XG4gICAgICAgICAgICB2YXIgJGRyb3BTaWJzID0gJGRyYWdnZWQuY2xvc2VzdCgndGFibGUnKS5wYXJlbnQoKS5zaWJsaW5ncygpLmZpbmQoJy5ub2RlOmZpcnN0Jyk7XG4gICAgICAgICAgICBpZiAoJGRyb3BTaWJzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAkZHJvcFNpYnMuYXBwZW5kKGhvcml6b250YWxFZGdlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHNlY29uZGx5LCBkZWFsIHdpdGggdGhlIGhpZXJhcmNoeSBvZiBkcmFnZ2VkIG5vZGVcbiAgICAgICAgICB2YXIgZHJhZ0NvbHNwYW4gPSBwYXJzZUludCgkZHJhZ1pvbmUuYXR0cignY29sc3BhbicpKTtcbiAgICAgICAgICBpZiAoZHJhZ0NvbHNwYW4gPiAyKSB7XG4gICAgICAgICAgICAkZHJhZ1pvbmUuYXR0cignY29sc3BhbicsIGRyYWdDb2xzcGFuIC0gMilcbiAgICAgICAgICAgICAgLnBhcmVudCgpLm5leHQoKS5jaGlsZHJlbigpLmF0dHIoJ2NvbHNwYW4nLCBkcmFnQ29sc3BhbiAtIDIpXG4gICAgICAgICAgICAgIC5lbmQoKS5uZXh0KCkuY2hpbGRyZW4oKS5zbGljZSgxLCAzKS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHZhciAkZHJhZ1NpYnMgPSAkZHJhZ1pvbmUucGFyZW50KCkuc2libGluZ3MoJy5ub2RlcycpLmNoaWxkcmVuKCkuZmluZCgnLm5vZGU6Zmlyc3QnKTtcbiAgICAgICAgICAgIGlmICgkZHJhZ1NpYnMubGVuZ3RoID09PTEpIHtcbiAgICAgICAgICAgICAgJGRyYWdTaWJzLmZpbmQoJy5ob3Jpem9udGFsRWRnZScpLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkZHJhZ1pvbmUucmVtb3ZlQXR0cignY29sc3BhbicpXG4gICAgICAgICAgICAgIC5maW5kKCcuYm90dG9tRWRnZScpLnJlbW92ZSgpXG4gICAgICAgICAgICAgIC5lbmQoKS5lbmQoKS5zaWJsaW5ncygpLnJlbW92ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAkb3JnY2hhcnQudHJpZ2dlckhhbmRsZXIoeyAndHlwZSc6ICdub2RlZHJvcHBlZC5vcmdjaGFydCcsICdkcmFnZ2VkTm9kZSc6ICRkcmFnZ2VkLCAnZHJhZ1pvbmUnOiAkZHJhZ1pvbmUuY2hpbGRyZW4oKSwgJ2Ryb3Bab25lJzogJGRyb3Bab25lIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIGFsbG93IHVzZXIgdG8gYXBwZW5kIGRvbSBtb2RpZmljYXRpb24gYWZ0ZXIgZmluaXNoaW5nIG5vZGUgY3JlYXRlIG9mIG9yZ2NoYXJ0XG4gICAgICBpZiAob3B0cy5jcmVhdGVOb2RlKSB7XG4gICAgICAgIG9wdHMuY3JlYXRlTm9kZSgkbm9kZURpdiwgbm9kZURhdGEpO1xuICAgICAgfVxuICAgICAgZHRkLnJlc29sdmUoJG5vZGVEaXYpO1xuICAgICAgcmV0dXJuIGR0ZC5wcm9taXNlKCk7XG4gICAgfSxcbiAgICAvLyByZWN1cnNpdmVseSBidWlsZCB0aGUgdHJlZVxuICAgIGJ1aWxkSGllcmFyY2h5OiBmdW5jdGlvbiAoJGFwcGVuZFRvLCBub2RlRGF0YSwgbGV2ZWwsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJG5vZGVXcmFwcGVyO1xuICAgICAgLy8gQ29uc3RydWN0IHRoZSBub2RlXG4gICAgICB2YXIgJGNoaWxkTm9kZXMgPSBub2RlRGF0YS5jaGlsZHJlbjtcbiAgICAgIHZhciBoYXNDaGlsZHJlbiA9ICRjaGlsZE5vZGVzID8gJGNoaWxkTm9kZXMubGVuZ3RoIDogZmFsc2U7XG4gICAgICB2YXIgaXNWZXJ0aWNhbE5vZGUgPSAob3B0cy52ZXJ0aWNhbERlcHRoICYmIChsZXZlbCArIDEpID49IG9wdHMudmVydGljYWxEZXB0aCkgPyB0cnVlIDogZmFsc2U7XG4gICAgICBpZiAoT2JqZWN0LmtleXMobm9kZURhdGEpLmxlbmd0aCA+IDEpIHsgLy8gaWYgbm9kZURhdGEgaGFzIG5lc3RlZCBzdHJ1Y3R1cmVcbiAgICAgICAgJG5vZGVXcmFwcGVyID0gaXNWZXJ0aWNhbE5vZGUgPyAkYXBwZW5kVG8gOiAkKCc8dGFibGU+Jyk7XG4gICAgICAgIGlmICghaXNWZXJ0aWNhbE5vZGUpIHtcbiAgICAgICAgICAkYXBwZW5kVG8uYXBwZW5kKCRub2RlV3JhcHBlcik7XG4gICAgICAgIH1cbiAgICAgICAgJC53aGVuKHRoaXMuY3JlYXRlTm9kZShub2RlRGF0YSwgbGV2ZWwsIG9wdHMpKVxuICAgICAgICAuZG9uZShmdW5jdGlvbigkbm9kZURpdikge1xuICAgICAgICAgIGlmIChpc1ZlcnRpY2FsTm9kZSkge1xuICAgICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgkbm9kZURpdik7XG4gICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgkbm9kZURpdi53cmFwKCc8dHI+PHRkJyArIChoYXNDaGlsZHJlbiA/ICcgY29sc3Bhbj1cIicgKyAkY2hpbGROb2Rlcy5sZW5ndGggKiAyICsgJ1wiJyA6ICcnKSArICc+PC90ZD48L3RyPicpLmNsb3Nlc3QoJ3RyJykpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbigpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGNyZWF0IG5vZGUnKVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIENvbnN0cnVjdCB0aGUgaW5mZXJpb3Igbm9kZXMgYW5kIGNvbm5lY3Rpb25nIGxpbmVzXG4gICAgICBpZiAoaGFzQ2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5vZGVEYXRhKS5sZW5ndGggPT09IDEpIHsgLy8gaWYgbm9kZURhdGEgaXMganVzdCBhbiBhcnJheVxuICAgICAgICAgICRub2RlV3JhcHBlciA9ICRhcHBlbmRUbztcbiAgICAgICAgfVxuICAgICAgICB2YXIgaXNIaWRkZW4gPSAobGV2ZWwgKyAxID49IG9wdHMuZGVwdGggfHwgbm9kZURhdGEuY29sbGFwc2VkKSA/ICcgaGlkZGVuJyA6ICcnO1xuICAgICAgICB2YXIgaXNWZXJ0aWNhbExheWVyID0gKG9wdHMudmVydGljYWxEZXB0aCAmJiAobGV2ZWwgKyAyKSA+PSBvcHRzLnZlcnRpY2FsRGVwdGgpID8gdHJ1ZSA6IGZhbHNlO1xuXG4gICAgICAgIC8vIGRyYXcgdGhlIGxpbmUgY2xvc2UgdG8gcGFyZW50IG5vZGVcbiAgICAgICAgaWYgKCFpc1ZlcnRpY2FsTGF5ZXIpIHtcbiAgICAgICAgICAkbm9kZVdyYXBwZXIuYXBwZW5kKCc8dHIgY2xhc3M9XCJsaW5lcycgKyBpc0hpZGRlbiArICdcIj48dGQgY29sc3Bhbj1cIicgKyAkY2hpbGROb2Rlcy5sZW5ndGggKiAyICsgJ1wiPjxkaXYgY2xhc3M9XCJkb3duTGluZVwiPjwvZGl2PjwvdGQ+PC90cj4nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBkcmF3IHRoZSBsaW5lcyBjbG9zZSB0byBjaGlsZHJlbiBub2Rlc1xuICAgICAgICB2YXIgbGluZUxheWVyID0gJzx0ciBjbGFzcz1cImxpbmVzJyArIGlzSGlkZGVuICsgJ1wiPjx0ZCBjbGFzcz1cInJpZ2h0TGluZVwiPiZuYnNwOzwvdGQ+JztcbiAgICAgICAgZm9yICh2YXIgaT0xOyBpPCRjaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbGluZUxheWVyICs9ICc8dGQgY2xhc3M9XCJsZWZ0TGluZSB0b3BMaW5lXCI+Jm5ic3A7PC90ZD48dGQgY2xhc3M9XCJyaWdodExpbmUgdG9wTGluZVwiPiZuYnNwOzwvdGQ+JztcbiAgICAgICAgfVxuICAgICAgICBsaW5lTGF5ZXIgKz0gJzx0ZCBjbGFzcz1cImxlZnRMaW5lXCI+Jm5ic3A7PC90ZD48L3RyPic7XG4gICAgICAgIHZhciAkbm9kZUxheWVyO1xuICAgICAgICBpZiAoaXNWZXJ0aWNhbExheWVyKSB7XG4gICAgICAgICAgJG5vZGVMYXllciA9ICQoJzx1bD4nKTtcbiAgICAgICAgICBpZiAoaXNIaWRkZW4pIHtcbiAgICAgICAgICAgICRub2RlTGF5ZXIuYWRkQ2xhc3MoaXNIaWRkZW4pO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAobGV2ZWwgKyAyID09PSBvcHRzLnZlcnRpY2FsRGVwdGgpIHtcbiAgICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQoJzx0ciBjbGFzcz1cInZlcnRpY2FsTm9kZXMnICsgaXNIaWRkZW4gKyAnXCI+PHRkPjwvdGQ+PC90cj4nKVxuICAgICAgICAgICAgICAuZmluZCgnLnZlcnRpY2FsTm9kZXMnKS5jaGlsZHJlbigpLmFwcGVuZCgkbm9kZUxheWVyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJG5vZGVXcmFwcGVyLmFwcGVuZCgkbm9kZUxheWVyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJG5vZGVMYXllciA9ICQoJzx0ciBjbGFzcz1cIm5vZGVzJyArIGlzSGlkZGVuICsgJ1wiPicpO1xuICAgICAgICAgICRub2RlV3JhcHBlci5hcHBlbmQobGluZUxheWVyKS5hcHBlbmQoJG5vZGVMYXllcik7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVjdXJzZSB0aHJvdWdoIGNoaWxkcmVuIG5vZGVzXG4gICAgICAgICQuZWFjaCgkY2hpbGROb2RlcywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgdmFyICRub2RlQ2VsbCA9IGlzVmVydGljYWxMYXllciA/ICQoJzxsaT4nKSA6ICQoJzx0ZCBjb2xzcGFuPVwiMlwiPicpO1xuICAgICAgICAgICRub2RlTGF5ZXIuYXBwZW5kKCRub2RlQ2VsbCk7XG4gICAgICAgICAgdGhhdC5idWlsZEhpZXJhcmNoeSgkbm9kZUNlbGwsIHRoaXMsIGxldmVsICsgMSwgb3B0cywgY2FsbGJhY2spO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIGJ1aWxkIHRoZSBjaGlsZCBub2RlcyBvZiBzcGVjaWZpYyBub2RlXG4gICAgYnVpbGRDaGlsZE5vZGU6IGZ1bmN0aW9uICgkYXBwZW5kVG8sIG5vZGVEYXRhLCBvcHRzLCBjYWxsYmFjaykge1xuICAgICAgdmFyIG9wdHMgPSBvcHRzIHx8ICRhcHBlbmRUby5jbG9zZXN0KCcub3JnY2hhcnQnKS5kYXRhKCdvcHRpb25zJyk7XG4gICAgICB2YXIgZGF0YSA9IG5vZGVEYXRhLmNoaWxkcmVuIHx8IG5vZGVEYXRhLnNpYmxpbmdzO1xuICAgICAgJGFwcGVuZFRvLmZpbmQoJ3RkOmZpcnN0JykuYXR0cignY29sc3BhbicsIGRhdGEubGVuZ3RoICogMik7XG4gICAgICB0aGlzLmJ1aWxkSGllcmFyY2h5KCRhcHBlbmRUbywgeyAnY2hpbGRyZW4nOiBkYXRhIH0sIDAsIG9wdHMsIGNhbGxiYWNrKTtcbiAgICB9LFxuICAgIC8vIGV4cG9zZWQgbWV0aG9kXG4gICAgYWRkQ2hpbGRyZW46IGZ1bmN0aW9uICgkbm9kZSwgZGF0YSwgb3B0cykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyIG9wdHMgPSBvcHRzIHx8ICRub2RlLmNsb3Nlc3QoJy5vcmdjaGFydCcpLmRhdGEoJ29wdGlvbnMnKTtcbiAgICAgIHZhciBjb3VudCA9IDA7XG4gICAgICB0aGlzLmJ1aWxkQ2hpbGROb2RlKCRub2RlLmNsb3Nlc3QoJ3RhYmxlJyksIGRhdGEsIG9wdHMsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoKytjb3VudCA9PT0gZGF0YS5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoISRub2RlLmNoaWxkcmVuKCcuYm90dG9tRWRnZScpLmxlbmd0aCkge1xuICAgICAgICAgICAgJG5vZGUuYXBwZW5kKCc8aSBjbGFzcz1cImVkZ2UgdmVydGljYWxFZGdlIGJvdHRvbUVkZ2UgZmFcIj48L2k+Jyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICghJG5vZGUuZmluZCgnLnN5bWJvbCcpLmxlbmd0aCkge1xuICAgICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy50aXRsZScpLnByZXBlbmQoJzxpIGNsYXNzPVwiZmEgJysgb3B0cy5wYXJlbnROb2RlU3ltYm9sICsgJyBzeW1ib2xcIj48L2k+Jyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoYXQuc2hvd0NoaWxkcmVuKCRub2RlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyBidWlsZCB0aGUgcGFyZW50IG5vZGUgb2Ygc3BlY2lmaWMgbm9kZVxuICAgIGJ1aWxkUGFyZW50Tm9kZTogZnVuY3Rpb24gKCRjdXJyZW50Um9vdCwgbm9kZURhdGEsIG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICB2YXIgJHRhYmxlID0gJCgnPHRhYmxlPicpO1xuICAgICAgbm9kZURhdGEucmVsYXRpb25zaGlwID0gbm9kZURhdGEucmVsYXRpb25zaGlwIHx8ICcwMDEnO1xuICAgICAgJC53aGVuKHRoaXMuY3JlYXRlTm9kZShub2RlRGF0YSwgMCwgb3B0cyB8fCAkY3VycmVudFJvb3QuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpKSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oJG5vZGVEaXYpIHtcbiAgICAgICAgICAkdGFibGUuYXBwZW5kKCRub2RlRGl2LnJlbW92ZUNsYXNzKCdzbGlkZS11cCcpLmFkZENsYXNzKCdzbGlkZS1kb3duJykud3JhcCgnPHRyIGNsYXNzPVwiaGlkZGVuXCI+PHRkIGNvbHNwYW49XCIyXCI+PC90ZD48L3RyPicpLmNsb3Nlc3QoJ3RyJykpO1xuICAgICAgICAgICR0YWJsZS5hcHBlbmQoJzx0ciBjbGFzcz1cImxpbmVzIGhpZGRlblwiPjx0ZCBjb2xzcGFuPVwiMlwiPjxkaXYgY2xhc3M9XCJkb3duTGluZVwiPjwvZGl2PjwvdGQ+PC90cj4nKTtcbiAgICAgICAgICB2YXIgbGluZXNSb3cgPSAnPHRkIGNsYXNzPVwicmlnaHRMaW5lXCI+Jm5ic3A7PC90ZD48dGQgY2xhc3M9XCJsZWZ0TGluZVwiPiZuYnNwOzwvdGQ+JztcbiAgICAgICAgICAkdGFibGUuYXBwZW5kKCc8dHIgY2xhc3M9XCJsaW5lcyBoaWRkZW5cIj4nICsgbGluZXNSb3cgKyAnPC90cj4nKTtcbiAgICAgICAgICB2YXIgJGNoYXJ0ID0gdGhhdC4kY2hhcnQ7XG4gICAgICAgICAgJGNoYXJ0LnByZXBlbmQoJHRhYmxlKVxuICAgICAgICAgICAgLmNoaWxkcmVuKCd0YWJsZTpmaXJzdCcpLmFwcGVuZCgnPHRyIGNsYXNzPVwibm9kZXNcIj48dGQgY29sc3Bhbj1cIjJcIj48L3RkPjwvdHI+JylcbiAgICAgICAgICAgIC5jaGlsZHJlbigndHI6bGFzdCcpLmNoaWxkcmVuKCkuYXBwZW5kKCRjaGFydC5jaGlsZHJlbigndGFibGUnKS5sYXN0KCkpO1xuICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gY3JlYXRlIHBhcmVudCBub2RlJyk7XG4gICAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gZXhwb3NlZCBtZXRob2RcbiAgICBhZGRQYXJlbnQ6IGZ1bmN0aW9uICgkY3VycmVudFJvb3QsIGRhdGEsIG9wdHMpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHRoaXMuYnVpbGRQYXJlbnROb2RlKCRjdXJyZW50Um9vdCwgZGF0YSwgb3B0cywgZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICghJGN1cnJlbnRSb290LmNoaWxkcmVuKCcudG9wRWRnZScpLmxlbmd0aCkge1xuICAgICAgICAgICRjdXJyZW50Um9vdC5jaGlsZHJlbignLnRpdGxlJykuYWZ0ZXIoJzxpIGNsYXNzPVwiZWRnZSB2ZXJ0aWNhbEVkZ2UgdG9wRWRnZSBmYVwiPjwvaT4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGF0LnNob3dQYXJlbnQoJGN1cnJlbnRSb290KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy8gc3Vic2VxdWVudCBwcm9jZXNzaW5nIG9mIGJ1aWxkIHNpYmxpbmcgbm9kZXNcbiAgICBjb21wbGVtZW50TGluZTogZnVuY3Rpb24gKCRvbmVTaWJsaW5nLCBzaWJsaW5nQ291bnQsIGV4aXN0aW5nU2libGlnQ291bnQpIHtcbiAgICAgIHZhciBsaW5lcyA9ICcnO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleGlzdGluZ1NpYmxpZ0NvdW50OyBpKyspIHtcbiAgICAgICAgbGluZXMgKz0gJzx0ZCBjbGFzcz1cImxlZnRMaW5lIHRvcExpbmVcIj4mbmJzcDs8L3RkPjx0ZCBjbGFzcz1cInJpZ2h0TGluZSB0b3BMaW5lXCI+Jm5ic3A7PC90ZD4nO1xuICAgICAgfVxuICAgICAgJG9uZVNpYmxpbmcucGFyZW50KCkucHJldkFsbCgndHI6Z3QoMCknKS5jaGlsZHJlbigpLmF0dHIoJ2NvbHNwYW4nLCBzaWJsaW5nQ291bnQgKiAyKVxuICAgICAgICAuZW5kKCkubmV4dCgpLmNoaWxkcmVuKCc6Zmlyc3QnKS5hZnRlcihsaW5lcyk7XG4gICAgfSxcbiAgICAvLyBidWlsZCB0aGUgc2libGluZyBub2RlcyBvZiBzcGVjaWZpYyBub2RlXG4gICAgYnVpbGRTaWJsaW5nTm9kZTogZnVuY3Rpb24gKCRub2RlQ2hhcnQsIG5vZGVEYXRhLCBvcHRzLCBjYWxsYmFjaykge1xuICAgICAgdmFyIHRoYXQgPSB0aGlzO1xuICAgICAgdmFyIG9wdHMgPSBvcHRzIHx8ICRub2RlQ2hhcnQuY2xvc2VzdCgnLm9yZ2NoYXJ0JykuZGF0YSgnb3B0aW9ucycpO1xuICAgICAgdmFyIG5ld1NpYmxpbmdDb3VudCA9IG5vZGVEYXRhLnNpYmxpbmdzID8gbm9kZURhdGEuc2libGluZ3MubGVuZ3RoIDogbm9kZURhdGEuY2hpbGRyZW4ubGVuZ3RoO1xuICAgICAgdmFyIGV4aXN0aW5nU2libGlnQ291bnQgPSAkbm9kZUNoYXJ0LnBhcmVudCgpLmlzKCd0ZCcpID8gJG5vZGVDaGFydC5jbG9zZXN0KCd0cicpLmNoaWxkcmVuKCkubGVuZ3RoIDogMTtcbiAgICAgIHZhciBzaWJsaW5nQ291bnQgPSBleGlzdGluZ1NpYmxpZ0NvdW50ICsgbmV3U2libGluZ0NvdW50O1xuICAgICAgdmFyIGluc2VydFBvc3Rpb24gPSAoc2libGluZ0NvdW50ID4gMSkgPyBNYXRoLmZsb29yKHNpYmxpbmdDb3VudC8yIC0gMSkgOiAwO1xuICAgICAgLy8ganVzdCBidWlsZCB0aGUgc2libGluZyBub2RlcyBmb3IgdGhlIHNwZWNpZmljIG5vZGVcbiAgICAgIGlmICgkbm9kZUNoYXJ0LnBhcmVudCgpLmlzKCd0ZCcpKSB7XG4gICAgICAgIHZhciAkcGFyZW50ID0gJG5vZGVDaGFydC5jbG9zZXN0KCd0cicpLnByZXZBbGwoJ3RyOmxhc3QnKTtcbiAgICAgICAgJG5vZGVDaGFydC5jbG9zZXN0KCd0cicpLnByZXZBbGwoJ3RyOmx0KDIpJykucmVtb3ZlKCk7XG4gICAgICAgIHZhciBjaGlsZENvdW50ID0gMDtcbiAgICAgICAgdGhpcy5idWlsZENoaWxkTm9kZSgkbm9kZUNoYXJ0LnBhcmVudCgpLmNsb3Nlc3QoJ3RhYmxlJyksIG5vZGVEYXRhLCBvcHRzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpZiAoKytjaGlsZENvdW50ID09PSBuZXdTaWJsaW5nQ291bnQpIHtcbiAgICAgICAgICAgIHZhciAkc2libGluZ1RkcyA9ICRub2RlQ2hhcnQucGFyZW50KCkuY2xvc2VzdCgndGFibGUnKS5jaGlsZHJlbigndHI6bGFzdCcpLmNoaWxkcmVuKCd0ZCcpO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nU2libGlnQ291bnQgPiAxKSB7XG4gICAgICAgICAgICAgIHRoYXQuY29tcGxlbWVudExpbmUoJHNpYmxpbmdUZHMuZXEoMCkuYmVmb3JlKCRub2RlQ2hhcnQuY2xvc2VzdCgndGQnKS5zaWJsaW5ncygpLmFkZEJhY2soKS51bndyYXAoKSksIHNpYmxpbmdDb3VudCwgZXhpc3RpbmdTaWJsaWdDb3VudCk7XG4gICAgICAgICAgICAgICRzaWJsaW5nVGRzLmFkZENsYXNzKCdoaWRkZW4nKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1sZWZ0Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGF0LmNvbXBsZW1lbnRMaW5lKCRzaWJsaW5nVGRzLmVxKGluc2VydFBvc3Rpb24pLmFmdGVyKCRub2RlQ2hhcnQuY2xvc2VzdCgndGQnKS51bndyYXAoKSksIHNpYmxpbmdDb3VudCwgMSk7XG4gICAgICAgICAgICAgICRzaWJsaW5nVGRzLm5vdCgnOmVxKCcgKyBpbnNlcnRQb3N0aW9uICsgMSArICcpJykuYWRkQ2xhc3MoJ2hpZGRlbicpXG4gICAgICAgICAgICAgICAgLnNsaWNlKDAsIGluc2VydFBvc3Rpb24pLmZpbmQoJy5ub2RlJykuYWRkQ2xhc3MoJ3NsaWRlLXJpZ2h0JylcbiAgICAgICAgICAgICAgICAuZW5kKCkuZW5kKCkuc2xpY2UoaW5zZXJ0UG9zdGlvbikuZmluZCgnLm5vZGUnKS5hZGRDbGFzcygnc2xpZGUtbGVmdCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHsgLy8gYnVpbGQgdGhlIHNpYmxpbmcgbm9kZXMgYW5kIHBhcmVudCBub2RlIGZvciB0aGUgc3BlY2lmaWMgbmRvZVxuICAgICAgICB2YXIgbm9kZUNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5idWlsZEhpZXJhcmNoeSgkbm9kZUNoYXJ0LmNsb3Nlc3QoJy5vcmdjaGFydCcpLCBub2RlRGF0YSwgMCwgb3B0cywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKCsrbm9kZUNvdW50ID09PSBzaWJsaW5nQ291bnQpIHtcbiAgICAgICAgICAgIHRoYXQuY29tcGxlbWVudExpbmUoJG5vZGVDaGFydC5uZXh0KCkuY2hpbGRyZW4oJ3RyOmxhc3QnKVxuICAgICAgICAgICAgICAuY2hpbGRyZW4oKS5lcShpbnNlcnRQb3N0aW9uKS5hZnRlcigkKCc8dGQgY29sc3Bhbj1cIjJcIj4nKVxuICAgICAgICAgICAgICAuYXBwZW5kKCRub2RlQ2hhcnQpKSwgc2libGluZ0NvdW50LCAxKTtcbiAgICAgICAgICAgICRub2RlQ2hhcnQuY2xvc2VzdCgndHInKS5zaWJsaW5ncygpLmVxKDApLmFkZENsYXNzKCdoaWRkZW4nKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1kb3duJyk7XG4gICAgICAgICAgICAkbm9kZUNoYXJ0LnBhcmVudCgpLnNpYmxpbmdzKCkuYWRkQ2xhc3MoJ2hpZGRlbicpXG4gICAgICAgICAgICAgIC5zbGljZSgwLCBpbnNlcnRQb3N0aW9uKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1yaWdodCcpXG4gICAgICAgICAgICAgIC5lbmQoKS5lbmQoKS5zbGljZShpbnNlcnRQb3N0aW9uKS5maW5kKCcubm9kZScpLmFkZENsYXNzKCdzbGlkZS1sZWZ0Jyk7XG4gICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSxcbiAgICAvL1xuICAgIGFkZFNpYmxpbmdzOiBmdW5jdGlvbiAoJG5vZGUsIGRhdGEsIG9wdHMpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIHRoaXMuYnVpbGRTaWJsaW5nTm9kZSgkbm9kZS5jbG9zZXN0KCd0YWJsZScpLCBkYXRhLCBvcHRzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJG5vZGUuY2xvc2VzdCgnLm5vZGVzJykuZGF0YSgnc2libGluZ3NMb2FkZWQnLCB0cnVlKTtcbiAgICAgICAgaWYgKCEkbm9kZS5jaGlsZHJlbignLmxlZnRFZGdlJykubGVuZ3RoKSB7XG4gICAgICAgICAgJG5vZGUuY2hpbGRyZW4oJy50b3BFZGdlJykuYWZ0ZXIoJzxpIGNsYXNzPVwiZWRnZSBob3Jpem9udGFsRWRnZSByaWdodEVkZ2UgZmFcIj48L2k+PGkgY2xhc3M9XCJlZGdlIGhvcml6b250YWxFZGdlIGxlZnRFZGdlIGZhXCI+PC9pPicpO1xuICAgICAgICB9XG4gICAgICAgIHRoYXQuc2hvd1NpYmxpbmdzKCRub2RlKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgLy9cbiAgICByZW1vdmVOb2RlczogZnVuY3Rpb24gKCRub2RlKSB7XG4gICAgICB2YXIgJHBhcmVudCA9ICRub2RlLmNsb3Nlc3QoJ3RhYmxlJykucGFyZW50KCk7XG4gICAgICB2YXIgJHNpYnMgPSAkcGFyZW50LnBhcmVudCgpLnNpYmxpbmdzKCk7XG4gICAgICBpZiAoJHBhcmVudC5pcygndGQnKSkge1xuICAgICAgICBpZiAodGhpcy5nZXROb2RlU3RhdGUoJG5vZGUsICdzaWJsaW5ncycpLmV4aXN0KSB7XG4gICAgICAgICAgJHNpYnMuZXEoMikuY2hpbGRyZW4oJy50b3BMaW5lOmx0KDIpJykucmVtb3ZlKCk7XG4gICAgICAgICAgJHNpYnMuc2xpY2UoMCwgMikuY2hpbGRyZW4oKS5hdHRyKCdjb2xzcGFuJywgJHNpYnMuZXEoMikuY2hpbGRyZW4oKS5sZW5ndGgpO1xuICAgICAgICAgICRwYXJlbnQucmVtb3ZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJHNpYnMuZXEoMCkuY2hpbGRyZW4oKS5yZW1vdmVBdHRyKCdjb2xzcGFuJylcbiAgICAgICAgICAgIC5maW5kKCcuYm90dG9tRWRnZScpLnJlbW92ZSgpXG4gICAgICAgICAgICAuZW5kKCkuZW5kKCkuc2libGluZ3MoKS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHBhcmVudC5hZGQoJHBhcmVudC5zaWJsaW5ncygpKS5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vXG4gICAgZXhwb3J0OiBmdW5jdGlvbiAoZXhwb3J0RmlsZW5hbWUsIGV4cG9ydEZpbGVleHRlbnNpb24pIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcztcbiAgICAgIGV4cG9ydEZpbGVuYW1lID0gKHR5cGVvZiBleHBvcnRGaWxlbmFtZSAhPT0gJ3VuZGVmaW5lZCcpID8gIGV4cG9ydEZpbGVuYW1lIDogdGhpcy5vcHRpb25zLmV4cG9ydEZpbGVuYW1lO1xuICAgICAgZXhwb3J0RmlsZWV4dGVuc2lvbiA9ICh0eXBlb2YgZXhwb3J0RmlsZWV4dGVuc2lvbiAhPT0gJ3VuZGVmaW5lZCcpID8gIGV4cG9ydEZpbGVleHRlbnNpb24gOiB0aGlzLm9wdGlvbnMuZXhwb3J0RmlsZWV4dGVuc2lvbjtcbiAgICAgIGlmICgkKHRoaXMpLmNoaWxkcmVuKCcuc3Bpbm5lcicpLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgJGNoYXJ0Q29udGFpbmVyID0gdGhpcy4kY2hhcnRDb250YWluZXI7XG4gICAgICB2YXIgJG1hc2sgPSAkY2hhcnRDb250YWluZXIuZmluZCgnLm1hc2snKTtcbiAgICAgIGlmICghJG1hc2subGVuZ3RoKSB7XG4gICAgICAgICRjaGFydENvbnRhaW5lci5hcHBlbmQoJzxkaXYgY2xhc3M9XCJtYXNrXCI+PGkgY2xhc3M9XCJmYSBmYS1jaXJjbGUtby1ub3RjaCBmYS1zcGluIHNwaW5uZXJcIj48L2k+PC9kaXY+Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkbWFzay5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XG4gICAgICB9XG4gICAgICB2YXIgc291cmNlQ2hhcnQgPSAkY2hhcnRDb250YWluZXIuYWRkQ2xhc3MoJ2NhbnZhc0NvbnRhaW5lcicpLmZpbmQoJy5vcmdjaGFydDp2aXNpYmxlJykuZ2V0KDApO1xuICAgICAgdmFyIGZsYWcgPSB0aGF0Lm9wdGlvbnMuZGlyZWN0aW9uID09PSAnbDJyJyB8fCB0aGF0Lm9wdGlvbnMuZGlyZWN0aW9uID09PSAncjJsJztcbiAgICAgIGh0bWwyY2FudmFzKHNvdXJjZUNoYXJ0LCB7XG4gICAgICAgICd3aWR0aCc6IGZsYWcgPyBzb3VyY2VDaGFydC5jbGllbnRIZWlnaHQgOiBzb3VyY2VDaGFydC5jbGllbnRXaWR0aCxcbiAgICAgICAgJ2hlaWdodCc6IGZsYWcgPyBzb3VyY2VDaGFydC5jbGllbnRXaWR0aCA6IHNvdXJjZUNoYXJ0LmNsaWVudEhlaWdodCxcbiAgICAgICAgJ29uY2xvbmUnOiBmdW5jdGlvbiAoY2xvbmVEb2MpIHtcbiAgICAgICAgICAkKGNsb25lRG9jKS5maW5kKCcuY2FudmFzQ29udGFpbmVyJykuY3NzKCdvdmVyZmxvdycsICd2aXNpYmxlJylcbiAgICAgICAgICAgIC5maW5kKCcub3JnY2hhcnQ6dmlzaWJsZTpmaXJzdCcpLmNzcygndHJhbnNmb3JtJywgJycpO1xuICAgICAgICB9LFxuICAgICAgICAnb25yZW5kZXJlZCc6IGZ1bmN0aW9uIChjYW52YXMpIHtcbiAgICAgICAgICAkY2hhcnRDb250YWluZXIuZmluZCgnLm1hc2snKS5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgICAgaWYgKGV4cG9ydEZpbGVleHRlbnNpb24udG9Mb3dlckNhc2UoKSA9PT0gJ3BkZicpIHtcbiAgICAgICAgICAgIHZhciBkb2MgPSB7fTtcbiAgICAgICAgICAgIHZhciBkb2NXaWR0aCA9IE1hdGguZmxvb3IoY2FudmFzLndpZHRoICogMC4yNjQ2KTtcbiAgICAgICAgICAgIHZhciBkb2NIZWlnaHQgPSBNYXRoLmZsb29yKGNhbnZhcy5oZWlnaHQgKiAwLjI2NDYpO1xuICAgICAgICAgICAgaWYgKGRvY1dpZHRoID4gZG9jSGVpZ2h0KSB7XG4gICAgICAgICAgICAgIGRvYyA9IG5ldyBqc1BERignbCcsICdtbScsIFtkb2NXaWR0aCwgZG9jSGVpZ2h0XSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkb2MgPSBuZXcganNQREYoJ3AnLCAnbW0nLCBbZG9jSGVpZ2h0LCBkb2NXaWR0aF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZG9jLmFkZEltYWdlKGNhbnZhcy50b0RhdGFVUkwoKSwgJ3BuZycsIDAsIDApO1xuICAgICAgICAgICAgZG9jLnNhdmUoZXhwb3J0RmlsZW5hbWUgKyAnLnBkZicpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YXIgaXNXZWJraXQgPSAnV2Via2l0QXBwZWFyYW5jZScgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlO1xuICAgICAgICAgICAgdmFyIGlzRmYgPSAhIXdpbmRvdy5zaWRlYmFyO1xuICAgICAgICAgICAgdmFyIGlzRWRnZSA9IG5hdmlnYXRvci5hcHBOYW1lID09PSAnTWljcm9zb2Z0IEludGVybmV0IEV4cGxvcmVyJyB8fCAobmF2aWdhdG9yLmFwcE5hbWUgPT09IFwiTmV0c2NhcGVcIiAmJiBuYXZpZ2F0b3IuYXBwVmVyc2lvbi5pbmRleE9mKCdFZGdlJykgPiAtMSk7XG5cbiAgICAgICAgICAgIGlmICgoIWlzV2Via2l0ICYmICFpc0ZmKSB8fCBpc0VkZ2UpIHtcbiAgICAgICAgICAgICAgd2luZG93Lm5hdmlnYXRvci5tc1NhdmVCbG9iKGNhbnZhcy5tc1RvQmxvYigpLCBleHBvcnRGaWxlbmFtZSArICcucG5nJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB2YXIgc2VsZWN0b3IgPSAnLm9jLWRvd25sb2FkLWJ0bicgKyAodGhhdC5vcHRpb25zLmNoYXJ0Q2xhc3MgIT09ICcnID8gJy4nICsgdGhhdC5vcHRpb25zLmNoYXJ0Q2xhc3MgOiAnJyk7XG4gICAgICAgICAgICAgIGlmICghJGNoYXJ0Q29udGFpbmVyLmZpbmQoc2VsZWN0b3IpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICRjaGFydENvbnRhaW5lci5hcHBlbmQoJzxhIGNsYXNzPVwib2MtZG93bmxvYWQtYnRuJyArICh0aGF0Lm9wdGlvbnMuY2hhcnRDbGFzcyAhPT0gJycgPyAnICcgKyB0aGF0Lm9wdGlvbnMuY2hhcnRDbGFzcyA6ICcnKSArICdcIidcbiAgICAgICAgICAgICAgICAgICsgJyBkb3dubG9hZD1cIicgKyBleHBvcnRGaWxlbmFtZSArICcucG5nXCI+PC9hPicpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICRjaGFydENvbnRhaW5lci5maW5kKHNlbGVjdG9yKS5hdHRyKCdocmVmJywgY2FudmFzLnRvRGF0YVVSTCgpKVswXS5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJGNoYXJ0Q29udGFpbmVyLnJlbW92ZUNsYXNzKCdjYW52YXNDb250YWluZXInKTtcbiAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJGNoYXJ0Q29udGFpbmVyLnJlbW92ZUNsYXNzKCdjYW52YXNDb250YWluZXInKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAkLmZuLm9yZ2NoYXJ0ID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgICByZXR1cm4gbmV3IE9yZ0NoYXJ0KHRoaXMsIG9wdHMpLmluaXQoKTtcbiAgfTtcblxufSkpOyJdfQ==
