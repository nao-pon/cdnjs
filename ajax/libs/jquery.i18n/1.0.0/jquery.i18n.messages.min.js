!function(e,s,o){"use strict";var r=function(){this.messages={},this.sources={},this.locale=String.locale};r.prototype={init:function(s){var o=this;o.locale=s,o.log("initializing for "+s),e("link").each(function(s,r){var t=e(r),i=(t.attr("rel")||"").toLowerCase().split(/\s+/);-1!==e.inArray("localizations",i)?o.load(t.attr("href")):-1!==e.inArray("localization",i)&&o.queue((t.attr("hreflang")||"").toLowerCase(),t.attr("href"))})},load:function(e,s){var o=null,r=this,t=Object.prototype.hasOwnProperty;if(!e)return r.log("Resetting for locale "+s),void(r.messages={});if("string"==typeof e)r.log("Loading messages from: "+e),r.jsonMessageLoader(e).done(function(o,t){r.load(o,s),r.queue(s,e),r.markLoaded(s,e)});else for(o in e)t.call(e,o)&&(s?(r.messages[s]||(r.messages[s]={}),r.messages[s][o]=e[o],r.log("["+s+"]["+o+"] : "+e[o])):r.load(e[o],o))},log:function(){s.console&&e.i18n.debug&&s.console.log.apply(s.console,arguments)},markLoaded:function(e,s){var o,r=this.sources[e];for(r||(this.queue(e,s),r=this.sources[e]),this.sources[e]=this.sources[e]||[],o=0;o<r.length;o++)if(r[o].source.url===s)return void(r[o].source.loaded=!0)},queue:function(e,s){var o,r=this.sources[e];if(this.sources[e]=this.sources[e]||[],r)for(o=0;o<r.length;o++)if(r[o].source.url===s)return;this.log("Source for: "+e+" is "+s+" registered"),this.sources[e].push({source:{url:s,loaded:!1}})},loadFromQueue:function(e){var s,o=this.sources[e];if(o)for(s=0;s<o.length;s++)o[s].source.loaded||(this.load(o[s].source.url,e),this.sources[e][s].source.loaded=!0)},isLoaded:function(e,s){var o,r=this.sources[e],t=!1;if(r)for(o=0;o<r.length;o++)r[o].source.url===s&&(t=!0);return t},jsonMessageLoader:function(s){var o=this;return e.ajax({url:s,dataType:"json",async:!1}).fail(function(e,r,t){o.log("Error in loading messages from "+s+" Exception: "+t)})},get:function(e,s){return this.messages[e]||this.loadFromQueue(e),this.messages[e]&&this.messages[e][s]}},e.extend(e.i18n.messageStore,new r)}(jQuery,window);