!function(e){"use strict";var a,n,t=Array.prototype.slice;(n=function(a){this.options=e.extend({},n.defaults,a),this.parser=this.options.parser,this.locale=this.options.locale,this.messageStore=this.options.messageStore,this.languages={},this.init()}).prototype={init:function(){var a=this;String.locale=a.locale,String.prototype.toLocaleString=function(){var n,t,o,i,l,r,s;for(o=this.valueOf(),i=a.locale,l=0;i;){t=(n=i.toLowerCase().split("-")).length;do{if(r=n.slice(0,t).join("-"),s=a.messageStore.get(r,o))return s;t--}while(t);if("en"===i)break;i=e.i18n.fallbacks[a.locale]&&e.i18n.fallbacks[a.locale][l]||a.options.fallbackLocale,e.i18n.log("Trying fallback locale for "+a.locale+": "+i),l++}return""}},destroy:function(){e.removeData(document,"i18n")},load:function(e,a){return this.messageStore.load(e,a)},parse:function(a,n){var t=a.toLocaleString();return this.parser.language=e.i18n.languages[e.i18n().locale]||e.i18n.languages.default,""===t&&(t=a),this.parser.parse(t,n)}},e.i18n=function(a,o){var i,l=e.data(document,"i18n"),r="object"==typeof a&&a;return r&&r.locale&&l&&l.locale!==r.locale&&(String.locale=l.locale=r.locale),l||(l=new n(r),e.data(document,"i18n",l)),"string"==typeof a?(i=void 0!==o?t.call(arguments,1):[],l.parse(a,i)):l},e.fn.i18n=function(){var a=e.data(document,"i18n");return a||(a=new n,e.data(document,"i18n",a)),String.locale=a.locale,this.each(function(){var n=e(this),t=n.data("i18n");t?n.text(a.parse(t)):n.find("[data-i18n]").i18n()})},String.locale=String.locale||e("html").attr("lang"),String.locale||(void 0!==typeof window.navigator?(a=window.navigator,String.locale=a.language||a.userLanguage||""):String.locale=""),e.i18n.languages={},e.i18n.messageStore=e.i18n.messageStore||{},e.i18n.parser={parse:function(e,a){return e.replace(/\$(\d+)/g,function(e,n){var t=parseInt(n,10)-1;return void 0!==a[t]?a[t]:"$"+n})},emitter:{}},e.i18n.fallbacks={},e.i18n.debug=!1,e.i18n.log=function(){window.console&&e.i18n.debug&&window.console.log.apply(window.console,arguments)},n.defaults={locale:String.locale,fallbackLocale:"en",parser:e.i18n.parser,messageStore:e.i18n.messageStore},e.i18n.constructor=n}(jQuery);