!function(e,a,t,o){"use strict";var i=function(a){this.options=e.extend({},e.i18n.defaults,a),this.messages={},this.sources={},this.parser=this.options.parser,this.languages={},this.locale=this.options.locale,this.init()};i.prototype={init:function(){var a=this,t=e("link"),o=t.length;for(this.log("initializing for "+this.locale);o--;){var i=e(t[o]),r=(i.attr("rel")||"").toLowerCase().split(/\s+/);if(-1!==e.inArray("localizations",r))a.load(i.attr("href"));else if(-1!==e.inArray("localization",r)){var n={};n[(i.attr("hreflang")||"").toLowerCase()]=i.attr("href"),a.load(n)}}String.prototype.toLocaleString=function(){var e=a.locale.toLowerCase().split("-"),t=e.length,o=this.valueOf();do{var i=e.slice(0,t).join("-");if(a.sources[i]&&a.loadFormQueue(i),a.messages[i]&&a.messages[i][o])return a.messages[i][o]}while(t--);return o},String.locale=this.locale},destroy:function(){e("body").data("i18n",null)},load:function(e,a){var t=this,o=Object.prototype.hasOwnProperty;if(!e)return this.log("Resetting for locale"+a),void(t.messages={});var i=typeof e;if(a&&this.locale!==a)return a in this.sources||(this.sources[a]=[]),this.log("Queueing: "+a),void this.sources[a].push(e);if(arguments.length>0&&"number"!==i)if("string"===i)this.log("Loading messages from: "+e),r(e).done(function(e,o){t.load(e,a),delete t.sources[a]});else{var n=e;for(var s in n)if(o.call(n,s))if("string"===typeof s&&a)t.log("["+a+"]["+s+"] : "+n[s]),t.messages[a]=t.messages[a]||[],t.messages[a][s]=n[s];else{var l=s;this.log("Loading locale: "+l),t.load(n[l],l)}}},log:function(){void 0!==a.console&&a.console.log.apply(a.console,arguments)},loadFormQueue:function(e){for(var a=this,t=a.sources[e],o=0;o<t.length;o++)a.load(t[o],e);delete a.sources[e]},parse:function(a,t){var o=a.toLocaleString();return this.parser.language=e.i18n.languages[e.i18n().locale]||e.i18n.languages.default,this.parser.parse(o,t)}};var r=function(a){return e.ajax({url:a,dataType:"json",async:!1}).fail(function(e,t,o){throw new Error("Error in loading messages from "+a+" Exception: "+o)})};if(!String.locale&&(String.locale=e("html").attr("lang"),!String.locale))if(void 0!==typeof a.navigator){var n=a.navigator;String.locale=n.language||n.userLanguage||""}else String.locale="";e.i18n=function(a,t){var o=[],r=e("body").data("i18n"),n="object"==typeof a&&a;return n&&n.locale&&r&&r.locale!==n.locale&&(String.locale=r.locale=n.locale),r||(e("body").data("i18n",r=new i(n)),e("[data-i18n]").each(function(a){var t=e(this);t.data("i18n")&&t.text(e.i18n(t.data("i18n")))})),a?(void 0!==t&&(o=e.makeArray(arguments)).shift(),"string"==typeof a?r.parse(a,o):r):r};var s={parse:function(e,a){return e.replace(/\$(\d+)/g,function(e,t){var o=parseInt(t,10)-1;return void 0!==a[o]?a[o]:"$"+t})}};e.i18n.languages={},e.i18n.parser=s,e.i18n.parser.emitter={},e.i18n.defaults={locale:String.locale,fallbackLocale:"en",parser:e.i18n.parser},e.i18n.Constructor=i,a._=e.i18n}(jQuery,window,document);