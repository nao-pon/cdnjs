{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap e32f089d944739d0a0dd","webpack:///./src/browser.js","webpack:///./src/utils.js","webpack:///./src/persist.js","webpack:///./src/consts.js","webpack:///./src/index.js","webpack:///./src/storageManager.js"],"names":["win","window","document","history","localStorage","location","sessionStorage","navigator","JSON","RegExp","parseFloat","performance","userAgent","TYPE_BACK_FORWARD","navigation","isNeeded","isIOS","test","isMacSafari","isAndroid","isWebview","androidVersion","exec","undefined","isBackForwardNavigated","type","Persist","key","value","console","warn","arguments","length","setStateByKey","getStateByKey","VERSION","CONST_PERSIST","module","exports","isSupportState","isStorageAvailable","storage","TMP_KEY","setItem","getItem","e","strg","warnInvalidStorageValue","getStorageKey","href","getStorage","getState","state","stateStr","isValidStateStr","parse","isValidType","Array","Error","result","setState","stringify","removeItem","replaceState","title","message","data","beforeData","reset"],"mappings":"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","file":"persist.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Persist\"] = factory();\n\telse\n\t\troot[\"eg\"] = root[\"eg\"] || {}, root[\"eg\"][\"Persist\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e32f089d944739d0a0dd","const win = (typeof window !== `undefined` && window) || {};\n\nexport {win as window};\nexport const document = win.document;\nexport const history = win.history;\nexport const localStorage = win.localStorage;\nexport const location = win.location;\nexport const sessionStorage = win.sessionStorage;\nexport const navigator = win.navigator;\nexport const JSON = win.JSON;\nexport const RegExp = win.RegExp;\nexport const parseFloat = win.parseFloat;\nexport const performance = win.performance;\n\n\n\n// WEBPACK FOOTER //\n// ./src/browser.js","import {navigator, RegExp, parseFloat, performance} from \"./browser\";\n\nconst userAgent = navigator.userAgent;\nconst TYPE_BACK_FORWARD = performance.navigation.TYPE_BACK_FORWARD || 2;\n\nconst isNeeded = (function() {\n\tconst isIOS = (new RegExp(\"iPhone|iPad\", \"i\")).test(userAgent);\n\tconst isMacSafari = (new RegExp(\"Mac\", \"i\")).test(userAgent) &&\n\t\t!(new RegExp(\"Chrome\", \"i\")).test(userAgent) &&\n\t\t(new RegExp(\"Apple\", \"i\")).test(userAgent);\n\tconst isAndroid = (new RegExp(\"Android \", \"i\")).test(userAgent);\n\tconst isWebview = (new RegExp(\"wv; |inapp;\", \"i\")).test(userAgent);\n\tconst androidVersion = isAndroid ? parseFloat(new RegExp(\n\t\t\"(Android)\\\\s([\\\\d_\\\\.]+|\\\\d_0)\", \"i\"\n\t).exec(userAgent)[2]) : undefined;\n\n\treturn !(isIOS ||\n\t\t\tisMacSafari ||\n\t\t\t(isAndroid &&\n\t\t\t\t((androidVersion <= 4.3 && isWebview) || androidVersion < 3)));\n})();\n\n// In case of IE8, TYPE_BACK_FORWARD is undefined.\nfunction isBackForwardNavigated() {\n\treturn performance.navigation.type === TYPE_BACK_FORWARD;\n}\n\nexport default {\n\tisBackForwardNavigated,\n\tisNeeded,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","import StorageManager from \"./storageManager\";\nimport {isNeeded} from \"./utils\";\n\n/**\n * @namespace eg\n */\n\n/**\n* Get or store the current state of the web page using JSON.\n* @ko 웹 페이지의 현재 상태를 JSON 형식으로 저장하거나 읽는다.\n* @name eg#Persist\n* @alias eg.Persist\n* @method\n* @param {String} key The key of the state information to be stored <ko>저장할 상태 정보의 키</ko>\n* @param {Object} [state] The value to be stored in a given key <ko>키에 저장할 값</ko>\n* @example\n```javascript\neg.Persist(key);\neg.Persist(key, value);\n```\n**/\nfunction Persist(key, value) {\n\tif (typeof key !== \"string\") {\n\t\t/* eslint-disable no-console */\n\t\tconsole.warn(\"first param must be a string!\");\n\t\t/* eslint-enable no-console */\n\t\treturn undefined;\n\t}\n\n\tif (value || arguments.length === 2) {\n\t\tStorageManager.setStateByKey(key, value);\n\t}\n\n\treturn StorageManager.getStateByKey(key);\n}\n\n/**\n* Return whether you need \"Persist\" module by checking the bfCache support of the current browser\n* @ko 현재 브라우저의 bfCache 지원여부에 따라 persist 모듈의 필요여부를 반환한다.\n* @group eg.Persist\n* @name eg.Persist.isNeeded\n* @alias eg.Persist.isNeeded\n* @namespace\n* @property {function} isNeeded\n* @example\neg.Persist.isNeeded();\n*/\nPersist.isNeeded = function() {\n\treturn isNeeded;\n};\n\nPersist.VERSION = \"2.0.0-rc.1\";\n\nexport default Persist;\n\n\n\n// WEBPACK FOOTER //\n// ./src/persist.js","const CONST_PERSIST = \"___persist___\";\n\nexport default CONST_PERSIST;\n\n\n\n// WEBPACK FOOTER //\n// ./src/consts.js","/**\n* Copyright (c) 2015 NAVER Corp.\n* egjs-persist projects are licensed under the MIT license\n*/\nimport Persist from \"./persist\";\n\nmodule.exports = Persist;\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import {window, history, location, JSON, sessionStorage, localStorage} from \"./browser\";\nimport utils from \"./utils\";\nimport CONST_PERSIST from \"./consts\";\n\nconst isSupportState = \"replaceState\" in history && \"state\" in history;\n\nfunction isStorageAvailable(storage) {\n\tif (!storage) {\n\t\treturn undefined;\n\t}\n\tconst TMP_KEY = `__tmp__${CONST_PERSIST}`;\n\n\ttry {\n\t\t// In case of iOS safari private mode, calling setItem on storage throws error\n\t\tstorage.setItem(TMP_KEY, CONST_PERSIST);\n\n\t\t// In Chrome incognito mode, can not get saved value\n\t\t// In IE8, calling storage.getItem occasionally makes \"Permission denied\" error\n\t\treturn storage.getItem(TMP_KEY) === CONST_PERSIST;\n\t} catch (e) {\n\t\treturn false;\n\t}\n}\n\nconst storage = (function() {\n\tlet strg;\n\n\tif (isStorageAvailable(sessionStorage)) {\n\t\tstrg = sessionStorage;\n\t} else if (isStorageAvailable(localStorage)) {\n\t\tstrg = localStorage;\n\t}\n\n\treturn strg;\n})();\n\nfunction warnInvalidStorageValue() {\n\t/* eslint-disable no-console */\n\tconsole.warn(\"window.history or session/localStorage has no valid \" +\n\t\t\t\"format data to be handled in persist.\");\n\t/* eslint-enable no-console */\n}\n\nfunction getStorageKey() {\n\treturn storage ? location.href + CONST_PERSIST : undefined;\n}\n\nfunction getStorage() {\n\treturn storage;\n}\n\n/*\n * Get state value\n */\nfunction getState() {\n\tlet state;\n\tconst stateStr = storage ?\n\t\tstorage.getItem(location.href + CONST_PERSIST) : history.state;\n\n\t// the storage is clean\n\tif (stateStr === null) {\n\t\treturn {};\n\t}\n\n\t// \"null\" is not a valid\n\tconst isValidStateStr = typeof stateStr === \"string\" &&\n\t\t\t\t\t\t\t\tstateStr.length > 0 && stateStr !== \"null\";\n\n\ttry {\n\t\tstate = JSON.parse(stateStr);\n\n\t\t// like '[ ... ]', '1', '1.234', '\"123\"' is also not valid\n\t\tconst isValidType = !(typeof state !== \"object\" || state instanceof Array);\n\n\t\tif (!isValidStateStr || !isValidType) {\n\t\t\tthrow new Error();\n\t\t}\n\t} catch (e) {\n\t\twarnInvalidStorageValue();\n\t\tstate = {};\n\t}\n\n\t// Note2 (Android 4.3) return value is null\n\treturn state;\n}\n\nfunction getStateByKey(key) {\n\tif (!isSupportState && !storage) {\n\t\treturn undefined;\n\t}\n\n\tlet result = getState()[key];\n\n\t// some device returns \"null\" or undefined\n\tif (result === \"null\" || typeof result === \"undefined\") {\n\t\tresult = null;\n\t}\n\treturn result;\n}\n\n/*\n * Set state value\n */\nfunction setState(state) {\n\tif (storage) {\n\t\tif (state) {\n\t\t\tstorage.setItem(\n\t\t\t\tlocation.href + CONST_PERSIST, JSON.stringify(state));\n\t\t} else {\n\t\t\tstorage.removeItem(location.href + CONST_PERSIST);\n\t\t}\n\t} else {\n\t\ttry {\n\t\t\thistory.replaceState(\n\t\t\t\tstate === null ? null : JSON.stringify(state),\n\t\t\t\tdocument.title,\n\t\t\t\tlocation.href\n\t\t\t);\n\t\t} catch (e) {\n\t\t\t/* eslint-disable no-console */\n\t\t\tconsole.warn(e.message);\n\t\t\t/* eslint-enable no-console */\n\t\t}\n\t}\n\n\tstate ? window[CONST_PERSIST] = true : delete window[CONST_PERSIST];\n}\n\nfunction setStateByKey(key, data) {\n\tif (!isSupportState && !storage) {\n\t\treturn;\n\t}\n\n\tconst beforeData = getState();\n\n\tbeforeData[key] = data;\n\tsetState(beforeData);\n}\n\n/*\n * flush current history state\n */\nfunction reset() {\n\tsetState(null);\n}\n\n// in case of reload\n!utils.isBackForwardNavigated() && reset();\n\nexport default {\n\treset,\n\tsetStateByKey,\n\tgetStateByKey,\n\tgetStorageKey,\n\tgetStorage,\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/storageManager.js"],"sourceRoot":""}