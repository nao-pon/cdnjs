if("undefined"==typeof brutusin||"undefined"==typeof brutusin["json-forms"])throw new Error("brutusin-json-forms-bootstrap.js requires brutusin-json-forms.js");"undefined"==typeof markdown&&window.console&&console.warn("Include markdown.js (https://github.com/evilstreak/markdown-js) to add markdown support in property description popups"),"undefined"!=typeof $&&"undefined"!=typeof $.fn&&"undefined"!=typeof $.fn.selectpicker||!window.console||console.warn("Include bootstrap-select.js (https://github.com/silviomoreto/bootstrap-select) to turn native selects into bootstrap components"),function(){var e=brutusin["json-forms"];e.addDecorator(function(e,t){if(e.tagName){var o=e.tagName.toLowerCase();"input"===o&&"checkbox"!==e.type||"textarea"===o?e.className+=" form-control":"select"===o?e.className+=" chosen-select form-control":"button"===o?e.className+="btn btn-primary  btn-xs":"form"===o&&(e.className+=" form-inline")}}),e.addDecorator(function(e,t){if(e.tagName){var o=e.tagName.toLowerCase();if(("label"===o||"button"===o)&&e.title){var n=document.createElement("a");n.setAttribute("style","outline: 0; text-decoration: none; margin-left: 2px;"),n.setAttribute("tabIndex",-1),n.className="glyphicon glyphicon-info-sign",n.setAttribute("data-toggle","popover"),n.setAttribute("data-trigger","focus"),"undefined"==typeof markdown?n.setAttribute("data-content",e.title):n.setAttribute("data-content",markdown.toHTML(e.title)),t.title?n.title=t.title:n.title="Help",$(n).popover({placement:"top",container:"body",html:!("undefined"==typeof markdown)}),e.parentNode.appendChild(n)}}}),e.addDecorator(function(e,t){if(e.tagName){var o=e.tagName.toLowerCase();"undefined"!=typeof $&&"undefined"!=typeof $.fn&&"undefined"!=typeof $.fn.selectpicker&&"select"===o&&(e.title="",e.className+=" selectpicker",e.setAttribute("data-live-search",!0),$(e).selectpicker())}}),e.bootstrap=new Object,e.bootstrap.addFormatDecorator=function(t,o,n,a){e.addDecorator(function(e,i){if(e.tagName){var r=e.tagName.toLowerCase();if("input"===r&&"string"===i.type&&i.format===t&&(o&&(e.type=o),n)){var d=e.parentNode,s=document.createElement("table"),l=document.createElement("tr"),c=document.createElement("td");c.setAttribute("style","width:100%"),s.appendChild(l),l.appendChild(c),d.removeChild(e),c.appendChild(e),d.appendChild(s);var p=document.createElement("td");l.appendChild(p);var u=document.createElement("button");u.className="btn btn-default glyphicon "+n,u.title="Select file",u.onclick=function(){a(e)},p.appendChild(u)}}})},e.bootstrap.showLoading=function(e){if(e&&e.parentNode){var t=e.id+"_loading",o=e.id+"_loading-layer",n=document.getElementById(t),a=document.getElementById(o);if(!n){var i=e.tagName.toLowerCase();e.parentNode.style.position="relative",n=document.createElement("span"),n.id=t,n.className="glyphicon glyphicon-refresh glyphicon-refresh-animate","select"===i?n.className+=" loading-icon-select":"checkbox"===e.type?n.className+=" loading-icon-checkbox":n.className+=" loading-icon",e.parentNode.appendChild(n),a=document.createElement("div"),a.className="loading-layer",a.appendChild(document.createTextNode("")),a.id=o,e.parentNode.appendChild(a)}n.style.visibility="visible",a.style.visibility="visible"}},e.bootstrap.hideLoading=function(e){if(e){var t=e.id+"_loading",o=e.id+"_loading-layer",n=document.getElementById(t),a=document.getElementById(o);n&&(n.style.visibility="hidden"),a&&(a.style.visibility="hidden")}},e.onResolutionStarted=e.bootstrap.showLoading,e.onResolutionFinished=e.bootstrap.hideLoading,e.onValidationSuccess=function(e){e.parentNode.className=e.parentNode.className.replace(" has-error","")},e.onValidationError=function(e,t){setTimeout(function(){var o=e.getAttribute("data-toggle"),n=e.getAttribute("data-trigger"),a=e.getAttribute("data-content"),i=e.title;e.setAttribute("data-toggle","popover"),e.setAttribute("data-trigger","manual"),"undefined"==typeof markdown?e.setAttribute("data-content",t):e.setAttribute("data-content",markdown.toHTML(t)),e.title="Validation error",e.parentNode.className.includes("has-error")||(e.parentNode.className+=" has-error"),e.focus(),$(e).popover({placement:"top",container:"body",html:!0}),$(e).popover("show");var r=e.onblur;e.onblur=function(t){o?($(e).popover("hide"),e.setAttribute("data-toggle",o),e.setAttribute("data-trigger",n),e.setAttribute("data-content",a)):($(e).popover("destroy"),e.removeAttribute("data-toggle"),e.removeAttribute("data-trigger"),e.removeAttribute("data-content")),e.onblur=r,e.title=i,r&&(console.log("blur blur"),r())}},200)}}();