if("undefined"==typeof BrutusinForms)throw new Error("brutusin-json-forms-bootstrap.js requires brutusin-json-forms.js");"undefined"==typeof markdown&&window.console&&console.warn("Include markdown.js (https://github.com/evilstreak/markdown-js) to add markdown support in property description popups"),"undefined"!=typeof $&&"undefined"!=typeof $.fn&&"undefined"!=typeof $.fn.selectpicker||!window.console||console.warn("Include bootstrap-select.js (https://github.com/silviomoreto/bootstrap-select) to turn native selects into bootstrap components"),BrutusinForms.addDecorator(function(t,e){if(t.tagName){var o=t.tagName.toLowerCase();"input"===o&&"checkbox"!==t.type||"textarea"===o?t.className+=" form-control":"select"===o?t.className+=" chosen-select form-control":"button"===o?t.className+="btn btn-primary  btn-xs":"form"===o&&(t.className+=" form-inline")}}),BrutusinForms.addDecorator(function(t,e){if(t.tagName){var o=t.tagName.toLowerCase();if(("label"===o||"button"===o)&&t.title){var n=document.createElement("a");n.setAttribute("style","outline: 0; text-decoration: none; margin-left: 2px;"),n.setAttribute("tabIndex",-1),n.className="glyphicon glyphicon-info-sign",n.setAttribute("data-toggle","popover"),n.setAttribute("data-trigger","focus"),"undefined"==typeof markdown?n.setAttribute("data-content",t.title):n.setAttribute("data-content",markdown.toHTML(t.title)),e.title?n.title=e.title:n.title="Help",$(n).popover({placement:"top",container:"body",html:!("undefined"==typeof markdown)}),t.parentNode.appendChild(n)}}}),BrutusinForms.addDecorator(function(t,e){if(t.tagName){var o=t.tagName.toLowerCase();"undefined"!=typeof $&&"undefined"!=typeof $.fn&&"undefined"!=typeof $.fn.selectpicker&&"select"===o&&(t.title="",t.className+=" selectpicker",t.setAttribute("data-live-search",!0),$(t).selectpicker())}}),BrutusinForms.bootstrap=new Object,BrutusinForms.bootstrap.addFormatDecorator=function(t,e,o,n){BrutusinForms.addDecorator(function(a,r){if(a.tagName){var i=a.tagName.toLowerCase();if("input"===i&&"string"===r.type&&r.format===t&&(e&&(a.type=e),o)){var s=a.parentNode,d=document.createElement("table"),l=document.createElement("tr"),c=document.createElement("td");c.setAttribute("style","width:100%"),d.appendChild(l),l.appendChild(c),s.removeChild(a),c.appendChild(a),s.appendChild(d);var u=document.createElement("td");l.appendChild(u);var p=document.createElement("button");p.className="btn btn-default glyphicon "+o,p.title="Select file",p.onclick=function(){n(a)},u.appendChild(p)}}})},BrutusinForms.bootstrap.showLoading=function(t){if(t&&t.parentNode){var e=t.id+"_loading",o=t.id+"_loading-layer",n=document.getElementById(e),a=document.getElementById(o);if(!n){var r=t.tagName.toLowerCase();t.parentNode.style.position="relative",n=document.createElement("span"),n.id=e,n.className="glyphicon glyphicon-refresh glyphicon-refresh-animate","select"===r?n.className+=" loading-icon-select":"checkbox"===t.type?n.className+=" loading-icon-checkbox":n.className+=" loading-icon",t.parentNode.appendChild(n),a=document.createElement("div"),a.className="loading-layer",a.appendChild(document.createTextNode("")),a.id=o,t.parentNode.appendChild(a)}n.style.visibility="visible",a.style.visibility="visible"}},BrutusinForms.bootstrap.hideLoading=function(t){if(t){var e=t.id+"_loading",o=t.id+"_loading-layer",n=document.getElementById(e),a=document.getElementById(o);n&&(n.style.visibility="hidden"),a&&(a.style.visibility="hidden")}},BrutusinForms.onResolutionStarted=BrutusinForms.bootstrap.showLoading,BrutusinForms.onResolutionFinished=BrutusinForms.bootstrap.hideLoading,BrutusinForms.onValidationSuccess=function(t){t.parentNode.className=t.parentNode.className.replace(" has-error","")},BrutusinForms.onValidationError=function(t,e){setTimeout(function(){var o=t.getAttribute("data-toggle"),n=t.getAttribute("data-trigger"),a=t.getAttribute("data-content"),r=t.title;t.setAttribute("data-toggle","popover"),t.setAttribute("data-trigger","manual"),"undefined"==typeof markdown?t.setAttribute("data-content",e):t.setAttribute("data-content",markdown.toHTML(e)),t.title="Validation error",t.parentNode.className.includes("has-error")||(t.parentNode.className+=" has-error"),t.focus(),$(t).popover({placement:"top",container:"body",html:!0}),$(t).popover("show");var i=t.onblur;t.onblur=function(e){o?($(t).popover("hide"),t.setAttribute("data-toggle",o),t.setAttribute("data-trigger",n),t.setAttribute("data-content",a)):($(t).popover("destroy"),t.removeAttribute("data-toggle"),t.removeAttribute("data-trigger"),t.removeAttribute("data-content")),t.onblur=i,t.title=r,i&&(console.log("blur blur"),i())}},200)};