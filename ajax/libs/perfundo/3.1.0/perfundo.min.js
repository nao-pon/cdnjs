!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.perfundo=t()}(this,function(){"use strict";function e(e,t,n){return Object.keys(n).reduce(function(o,s){var i=e.getAttribute("data-"+s.toLowerCase());return o[s]=i||t[s]||n[s],o},{})}function t(e,n){var o=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.configure,r=e.context,a=e.defaultOptions,c=e.swipe,l="string"==typeof n?r.querySelectorAll(n):n;return l.length>1?[].slice.call(l).map(function(n){return new t(e,n,s)}):(this.context=r,this.element=l[0]||l,this.options=i(this.element,s,a),this.hasPrev=null!==this.element.querySelector("."+this.options.classNames.prev),this.hasNext=null!==this.element.querySelector("."+this.options.classNames.next),this.element.setAttribute(this.options.rootAttribute,!0),this.options.disableHistory&&this.element.addEventListener("click",function(e){e.preventDefault();var t=e.target.classList.contains(o.options.classNames.close)||e.target.classList.contains(o.options.classNames.overlay),n=e.target.classList.contains(o.options.classNames.link)||e.target.parentElement.classList.contains(o.options.classNames.link);t?o.close():n?o.open():e.target.classList.contains(o.options.classNames.prev)?o.prev():e.target.classList.contains(o.options.classNames.next)&&o.next()}),this.options.keyboard&&this.element.addEventListener("keyup",function(e){o.hasPrev&&37===e.keyCode?o.prev():o.hasNext&&39===e.keyCode&&o.next()}),this.options.swipe&&c(this.element,{wipeLeft:function(){return o.next()},wipeRight:function(){return o.prev()},preventDefaultEvents:this.options.disableHistory}),this)}"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var n=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){!function(t,n){e.exports=n()}(0,function(){function e(e,t){return void 0!==e?e:t}return function(t,n){function o(){t.removeEventListener("touchmove",s),r=null,l=!1}function s(e){if(c.preventDefaultEvents&&e.preventDefault(),l){var t=e.touches[0].pageX,n=e.touches[0].pageY,s=r-t,i=a-n;Math.abs(s)>=c.min_move_x?(o(),s>0?c.wipeLeft(e):c.wipeRight(e)):Math.abs(i)>=c.min_move_y&&(o(),i>0?c.wipeDown(e):c.wipeUp(e))}}function i(e){1===e.touches.length&&(r=e.touches[0].pageX,a=e.touches[0].pageY,l=!0,t.addEventListener("touchmove",s))}var r,a,c={min_move_x:e((n=n||{}).min_move_x,20),min_move_y:e(n.min_move_y,20),wipeLeft:n.wipeLeft||function(){},wipeRight:n.wipeRight||function(){},wipeUp:n.wipeUp||function(){},wipeDown:n.wipeDown||function(){},preventDefaultEvents:e(n.preventDefaultEvents,!0)},l=!1;return t.addEventListener("touchstart",i),{unbind:function(){t.removeEventListener("touchstart",i)}}}})}),o={disableHistory:!1,swipe:!0,keyboard:!0,rootAttribute:"data-perfundo",classNames:{link:"perfundo__link",overlay:"perfundo__overlay",content:"perfundo__content",close:"perfundo__close",prev:"perfundo__prev",next:"perfundo__next",untarget:"perfundo__untarget",active:"is-active"}};t.prototype.open=function(){this.element.querySelector("."+this.options.classNames.link).focus(),this.element.querySelector("."+this.options.classNames.overlay).classList.add(this.options.classNames.active)},t.prototype.close=function(){this.element.querySelector("."+this.options.classNames.overlay).classList.remove(this.options.classNames.active)},t.prototype.prev=function(){try{var e=this.element.querySelector("."+this.options.classNames.prev),t=this.context.querySelector(""+e.getAttribute("href")),n=this.getRootElement(t);n&&(this.close(),n.querySelector("."+this.options.classNames.link).click())}catch(e){throw new Error("Previous item not found.")}},t.prototype.next=function(){try{var e=this.element.querySelector("."+this.options.classNames.next),t=this.context.querySelector(""+e.getAttribute("href")),n=this.getRootElement(t);n&&(this.close(),n.querySelector("."+this.options.classNames.link).click())}catch(e){throw new Error("Next item not found.")}},t.prototype.getRootElement=function(e){for(var t=e.parentElement;t&&t!==this.context;){if(t.hasAttribute(this.options.rootAttribute))return t;t=t.parentElement}return null};return function(s,i){return new t({configure:e,context:arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,defaultOptions:o,swipe:n},s,i)}});