/*
 * Peppermint touch slider
 * v. 1.1.0 | https://github.com/wilddeer/Peppermint
 * Copyright Oleg Korsunsky | http://wd.dizaina.net/
 *
 * MIT License
 */
function Peppermint(a,b){function c(a){var b=["Webkit","Moz","O","ms"],c=document.createElement("div");if(void 0!==c.style[a])return!0;a=a.charAt(0).toUpperCase()+a.slice(1);for(var d in b)if(void 0!==c.style[b[d]+a])return!0;return!1}function d(a,b){a.className=(a.className+" "+b).replace(/^\s+|\s+$/g,"")}function e(a,b){a.className=(" "+a.className+" ").replace(" "+b+" ","").replace(/^\s+|\s+$/g,"")}function f(a,b){if(0>a?a=0:a>w-1&&(a=w-1),a!==x){for(var c=F.dots.length-1;c>=0;c--)e(F.dots[c],E.active);d(F.dots[a],E.active),x=a}return g(-a*F.width,void 0===b?v.speed:b),n(),v.onSlideChange&&v.onSlideChange(a),a}function g(a,b){var c=b?b+"ms":"";A.style.webkitTransitionDuration=A.style.MozTransitionDuration=A.style.msTransitionDuration=A.style.OTransitionDuration=A.style.transitionDuration=c,i(a)}function h(a,b){if(D&&clearInterval(D),!b)return i(a),void 0;var c=+new Date,d=F.left;D=setInterval(function(){function e(a,b){return(b-a)*j+a}var f,g,h=+new Date-c,j=h/b,k=[0,.7,1,1];return j>=1?(i(a),clearInterval(D),void 0):(f=a-d,g=e(e(e(k[0],k[1]),e(k[1],k[2])),e(e(k[1],k[2]),e(k[2],k[3]))),i(Math.floor(g*f+d)),void 0)},15)}function i(a){A.style.webkitTransform="translate("+a+"px,0) translateZ(0)",A.style.msTransform=A.style.MozTransform=A.style.OTransform=A.style.transform="translateX("+a+"px)",F.left=a}function j(a){A.style.left=a+"px",F.left=a}function k(){var a=x+1;return a>w-1&&(a=0),f(a)}function l(){var a=x-1;return 0>a&&(a=w-1),f(a)}function m(){C=!0,n()}function n(){C&&(B&&clearTimeout(B),B=setTimeout(function(){k()},v.slideshowInterval))}function o(){B&&clearTimeout(B)}function p(){C=!1,B&&clearTimeout(B)}function q(){function b(b,e){n=!0,k=e,u[k](b)||(s(document,r[k][1],c),s(document,r[k][2],h),s(document,r[k][3],h),k&&(b.preventDefault?b.preventDefault():b.returnValue=!1),l={x:k?b.clientX:b.touches[0].clientX,y:k?b.clientY:b.touches[0].clientY,time:+new Date},d(a,E.drag),j=void 0,m={})}function c(a){j||u[k](a)||(m.x=(k?a.clientX:a.touches[0].clientX)-l.x,m.x&&(n=!1),3!==k&&void 0===j&&(m.y=(k?a.clientY:a.touches[0].clientY)-l.y,j=Math.abs(m.x)<Math.abs(m.y))||(a.preventDefault?a.preventDefault():a.returnValue=!1,o(),m.x=m.x/(!x&&m.x>0||x==w-1&&m.x<0?Math.abs(m.x)/F.width*2+1:1),g(m.x-F.width*x)))}function h(b){if(b.target&&b.target.blur&&b.target.blur(),m.x){var c=Number(+new Date-l.time),d=Math.abs(m.x)/F.width,g=Math.floor(d)+(d-Math.floor(d)>.25?1:0),h=G+G*g/1.8>c&&Math.abs(m.x)-g*F.width>(g?-F.width/9:20);g+=h?1:0,m.x<0?f(x+g,v.touchSpeed):f(x-g,v.touchSpeed),v.stopSlideshowAfterInteraction&&p()}e(a,E.drag),i()}function i(){t(document,r[k][1],c),t(document,r[k][2],h),t(document,r[k][3],h)}var j,k,l={},m={},n=!0,q=H.pointerEvents?1:H.msPointerEvents?2:0,r=[["touchstart","touchmove","touchend","touchcancel"],["pointerdown","pointermove","pointerup","pointercancel"],["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"],["mousedown","mousemove","mouseup",!1]],u=[function(a){return a.touches&&a.touches.length>1||a.scale&&1!==a.scale},function(a){return!a.isPrimary||1!==a.buttons||!v.mouseDrag&&"touch"!==a.pointerType&&"pen"!==a.pointerType},function(a){return!a.isPrimary||a.buttons&&1!==a.buttons||!v.mouseDrag&&a.pointerType!==a.MSPOINTER_TYPE_TOUCH&&a.pointerType!==a.MSPOINTER_TYPE_PEN},function(a){return a.buttons&&1!==a.buttons}];s(A,r[q][0],function(a){b(a,q)}),s(A,"dragstart",function(){event.preventDefault?event.preventDefault():event.returnValue=!1}),v.mouseDrag&&!q&&s(A,r[3][0],function(a){b(a,3)}),s(A,"click",function(a){n||(a.preventDefault?a.preventDefault():a.returnValue=!1)})}function r(){F.width=a.offsetWidth,A.style.width=F.width*w+"px";for(var b=0;w>b;b++)F.slides[b].style.width=F.width+"px";g(-x*F.width)}function s(a,b,c){b&&(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c))}function t(a,b,c){b&&(a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c))}function u(){(!H.transforms||window.opera)&&(i=j),H.transitions||(g=h),A=document.createElement("div"),A.className="slides";for(var b=0,c=a.children.length;c>b;b++){var e=a.children[b],k=document.createElement("li"),l=e.getElementsByTagName("a");F.slides.push(e),k.setAttribute("tabindex","0"),k.setAttribute("role","button"),k.innerHTML="<span></span>",s(k,"click",function(a,b){return function(){b.blur(),f(a),v.stopSlideshowAfterInteraction&&p()}}(b,k)),s(k,"keyup",function(a){return function(b){13==b.keyCode&&(f(a),v.stopSlideshowAfterInteraction&&p())}}(b));for(var n=l.length-1;n>=0;n--)s(l[n],"focus",function(b){return function(){a.scrollLeft=0,setTimeout(function(){a.scrollLeft=0},0),f(b)}}(b));F.dots.push(k)}w=F.slides.length,y=100/w,d(a,E.active),v.mouseDrag&&d(a,E.mouse),F.width=a.offsetWidth,A.style.width=F.width*w+"px";for(var b=0;w>b;b++)F.slides[b].style.width=F.width+"px",A.appendChild(F.slides[b]);if(a.appendChild(A),v.dots){z=document.createElement("ul"),z.className="dots";for(var b=0,c=F.dots.length;c>b;b++)z.appendChild(F.dots[b]);v.dotsFirst?a.insertBefore(z,a.firstChild):a.appendChild(z)}s(window,"resize",r),s(window,"orientationchange",r),f(v.startSlide,0),v.slideshow&&m(),v.onSetup&&v.onSetup(w)}var v=b||{};v.speed=v.speed||300,v.touchSpeed=v.touchSpeed||300,v.slideshow=v.slideshow||!1,v.slideshowInterval=v.slideshowInterval||4e3,v.stopSlideshowAfterInteraction=v.stopSlideshowAfterInteraction||!1,v.startSlide=v.startSlide||0,v.dots=v.dots||!1,v.dotsFirst=v.dotsFirst||!1,v.mouseDrag=v.mouseDrag||!1,v.cssPrefix=v.cssPrefix||"";var w,x,y,z,A,B,C,D,E={active:v.cssPrefix+"active",mouse:v.cssPrefix+"mouse",drag:v.cssPrefix+"drag"},F={slides:[],dots:[],left:0},G=200,H={pointerEvents:!!window.navigator.pointerEnabled,msPointerEvents:!!window.navigator.msPointerEnabled,transforms:c("transform"),transitions:c("transition")};return setTimeout(function(){u(),q()},0),{slideTo:function(a){return f(parseInt(a,10))},next:function(){return k()},prev:function(){return l()},start:function(){m()},stop:function(){p()},pause:function(){o()},getCurrentPos:function(){return x},getSlidesNumber:function(){return w},recalcWidth:function(){r()}}}window.jQuery&&!function($){$.fn.Peppermint=function(a){this.each(function(){$(this).data("Peppermint",Peppermint($(this)[0],a))})}}(window.jQuery);