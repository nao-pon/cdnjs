!function(e,n){"function"==typeof define&&define.amd?define(["videojs"],n):"object"==typeof module&&module.exports?module.exports=n(require("video.js")):e.returnExports=n(e.videojs)}(this,function(e){e.OpusRecorderEngine=e.extend(e.RecordBase,{setup:function(e,n,t){this.inputStream=e,this.mediaType=n,this.debug=t,this.engine=new Recorder({leaveStreamOpen:!0,numberOfChannels:this.audioChannels,bufferLength:this.bufferSize,encoderSampleRate:this.sampleRate,encoderPath:this.audioWorkerURL}),this.engine.addEventListener("dataAvailable",this.onRecordingAvailable.bind(this)),this.engine.stream=e,this.engine.sourceNode=this.engine.audioContext.createMediaStreamSource(e),this.engine.sourceNode.connect(this.engine.filterNode||this.engine.scriptProcessorNode),this.engine.sourceNode.connect(this.engine.monitorNode),this.engine.eventTarget.dispatchEvent(new Event("streamReady"))},start:function(){this.engine.start()},stop:function(){this.engine.stop()},onRecordingAvailable:function(e){this.onStopRecording(e.detail)}})});