{"version":3,"sources":["recorder.js"],"names":["f","exports","module","define","amd","window","global","self","this","Recorder","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","./recorder","2","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","value","undefined","_inlineWorker2","obj","__esModule","default","source","cfg","_this","config","bufferLen","numChannels","mimeType","recording","callbacks","getBuffer","exportWAV","assign","context","node","createScriptProcessor","createJavaScriptNode","onaudioprocess","buffer","channel","push","inputBuffer","getChannelData","worker","postMessage","command","connect","destination","init","sampleRate","initBuffers","record","recBuffers","recLength","type","buffers","mergeBuffers","interleaved","dataview","encodeWAV","interleave","audioBlob","Blob","data","clear","result","Float32Array","offset","set","inputL","inputR","index","inputIndex","floatTo16BitPCM","output","input","Math","max","min","setInt16","writeString","view","string","setUint8","charCodeAt","samples","ArrayBuffer","DataView","setUint32","setUint16","onmessage","cb","pop","callback","url","URL","webkitURL","createObjectURL","blob","link","document","createElement","href","download","filename","click","createEvent","initEvent","dispatchEvent","inline-worker","3","./inline-worker","4","prop","WORKER_ENABLED","Worker","InlineWorker","func","functionBody","toString","trim","match","setTimeout"],"mappings":"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"}