{"version":3,"sources":["searchcursor.js"],"names":["mod","exports","module","require","define","amd","CodeMirror","doFold","noFold","Pos","ensureGlobal","regexp","global","RegExp","source","flags","ignoreCase","multiline","searchRegexpForward","doc","start","line","ch","last","lastLine","lastIndex","string","getLine","match","exec","from","index","to","length","lastMatchIn","cutOff","newMatch","adjustPos","orig","folded","pos","foldFunc","min","max","Math","mid","len","slice","SearchCursor","query","options","caseFold","this","atOccurrence","clipPos","matches","reverse","fold","lines","split","search","first","firstLine","found","lastIndexOf","i","top","topString","indexOf","cutFrom","end","endString","chunk","curLine","before","inside","startLine","startCh","test","String","prototype","normalize","str","toLowerCase","findNext","find","findPrevious","result","cmpPos","replace","newText","origin","splitLines","replaceRange","defineExtension","defineDocExtension","ranges","cur","getSearchCursor","getCursor","push","anchor","head","setSelections"],"mappings":"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"}