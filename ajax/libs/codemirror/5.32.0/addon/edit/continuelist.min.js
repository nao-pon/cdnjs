!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";var n=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,t=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,i=/[*+-]\s/;e.commands.newlineAndIndentContinueMarkdownList=function(r){if(r.getOption("disableInput"))return e.Pass;for(var l=r.listSelections(),s=[],c=0;c<l.length;c++){var o=l[c].head,a=r.getStateAfter(o.line),d=!1!==a.list,f=0!==a.quote,p=r.getLine(o.line),u=n.exec(p),h=/^\s*$/.test(p.slice(0,o.ch));if(!l[c].empty()||!d&&!f||!u||h)return void r.execCommand("newlineAndIndent");if(t.test(p))/>\s*$/.test(p)||r.replaceRange("",{line:o.line,ch:0},{line:o.line,ch:o.ch+1}),s[c]="\n";else{var g=u[1],m=u[5],x=i.test(u[2])||u[2].indexOf(">")>=0?u[2].replace("x"," "):parseInt(u[3],10)+1+u[4];s[c]="\n"+g+x+m,function(e,t){var i=t.line,r=0,l=0,s=n.exec(e.getLine(i)),c=s[1];do{var o=i+(r+=1),a=e.getLine(o),d=n.exec(a);if(d){var f=d[1],p=parseInt(s[3],10)+r-l,u=parseInt(d[3],10),h=u;if(c===f)p===u&&(h=u+1),p>u&&(h=p+1),e.replaceRange(a.replace(n,f+h+d[4]+d[5]),{line:o,ch:0},{line:o,ch:a.length});else{if(c.length>f.length)return;if(c.length<f.length&&1===r)return;l+=1}}}while(d)}(r,o)}}r.replaceSelections(s)}});