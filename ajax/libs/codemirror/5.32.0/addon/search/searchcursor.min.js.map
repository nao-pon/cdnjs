{"version":3,"sources":["searchcursor.js"],"names":["mod","exports","module","require","define","amd","CodeMirror","ensureGlobal","regexp","global","RegExp","source","flags","ignoreCase","multiline","regexpFlags","searchRegexpForward","doc","start","line","ch","last","lastLine","lastIndex","string","getLine","match","exec","from","Pos","index","to","length","lastMatchIn","cutOff","newMatch","adjustPos","orig","folded","pos","foldFunc","min","max","Math","mid","len","slice","SearchCursor","query","options","this","atOccurrence","clipPos","caseFold","matches","reverse","fold","doFold","noFold","lines","split","search","first","firstLine","found","lastIndexOf","i","top","topString","indexOf","cutFrom","end","endString","chunk","curLine","before","inside","startLine","startCh","test","maybeMultiline","String","prototype","normalize","str","toLowerCase","findNext","find","findPrevious","result","cmpPos","replace","newText","origin","splitLines","replaceRange","defineExtension","defineDocExtension","ranges","cur","getSearchCursor","getCursor","push","anchor","head","setSelections"],"mappings":"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"}