{"version":3,"file":"viewer.common.js","sources":["../src/js/defaults.js","../src/js/template.js","../src/js/constants.js","../src/js/utilities.js","../src/js/render.js","../src/js/events.js","../src/js/handlers.js","../src/js/methods.js","../src/js/others.js","../src/js/viewer.js"],"sourcesContent":["export default {\n  // Enable inline mode\n  inline: false,\n\n  // Show the button on the top-right of the viewer\n  button: true,\n\n  // Show the navbar\n  navbar: true,\n\n  // Show the title\n  title: true,\n\n  // Show the toolbar\n  toolbar: true,\n\n  // Show the tooltip with image ratio (percentage) when zoom in or zoom out\n  tooltip: true,\n\n  // Enable to move the image\n  movable: true,\n\n  // Enable to zoom the image\n  zoomable: true,\n\n  // Enable to rotate the image\n  rotatable: true,\n\n  // Enable to scale the image\n  scalable: true,\n\n  // Enable CSS3 Transition for some special elements\n  transition: true,\n\n  // Enable to request fullscreen when play\n  fullscreen: true,\n\n  // Enable keyboard support\n  keyboard: true,\n\n  // Define interval of each image when playing\n  interval: 5000,\n\n  // Min width of the viewer in inline mode\n  minWidth: 200,\n\n  // Min height of the viewer in inline mode\n  minHeight: 100,\n\n  // Define the ratio when zoom the image by wheeling mouse\n  zoomRatio: 0.1,\n\n  // Define the min ratio of the image when zoom out\n  minZoomRatio: 0.01,\n\n  // Define the max ratio of the image when zoom in\n  maxZoomRatio: 100,\n\n  // Define the CSS `z-index` value of viewer in modal mode.\n  zIndex: 2015,\n\n  // Define the CSS `z-index` value of viewer in inline mode.\n  zIndexInline: 0,\n\n  // Define where to get the original image URL for viewing\n  // Type: String (an image attribute) or Function (should return an image URL)\n  url: 'src',\n\n  // Event shortcuts\n  ready: null,\n  show: null,\n  shown: null,\n  hide: null,\n  hidden: null,\n  view: null,\n  viewed: null,\n};\n","export default (\n  '<div class=\"viewer-container\">' +\n    '<div class=\"viewer-canvas\"></div>' +\n    '<div class=\"viewer-footer\">' +\n      '<div class=\"viewer-title\"></div>' +\n      '<ul class=\"viewer-toolbar\">' +\n        '<li role=\"button\" class=\"viewer-zoom-in\" data-action=\"zoom-in\"></li>' +\n        '<li role=\"button\" class=\"viewer-zoom-out\" data-action=\"zoom-out\"></li>' +\n        '<li role=\"button\" class=\"viewer-one-to-one\" data-action=\"one-to-one\"></li>' +\n        '<li role=\"button\" class=\"viewer-reset\" data-action=\"reset\"></li>' +\n        '<li role=\"button\" class=\"viewer-prev\" data-action=\"prev\"></li>' +\n        '<li role=\"button\" class=\"viewer-play\" data-action=\"play\"></li>' +\n        '<li role=\"button\" class=\"viewer-next\" data-action=\"next\"></li>' +\n        '<li role=\"button\" class=\"viewer-rotate-left\" data-action=\"rotate-left\"></li>' +\n        '<li role=\"button\" class=\"viewer-rotate-right\" data-action=\"rotate-right\"></li>' +\n        '<li role=\"button\" class=\"viewer-flip-horizontal\" data-action=\"flip-horizontal\"></li>' +\n        '<li role=\"button\" class=\"viewer-flip-vertical\" data-action=\"flip-vertical\"></li>' +\n      '</ul>' +\n      '<div class=\"viewer-navbar\">' +\n        '<ul class=\"viewer-list\"></ul>' +\n      '</div>' +\n    '</div>' +\n    '<div class=\"viewer-tooltip\"></div>' +\n    '<div role=\"button\" class=\"viewer-button\" data-action=\"mix\"></div>' +\n    '<div class=\"viewer-player\"></div>' +\n  '</div>'\n);\n","const { PointerEvent } = window;\n\nexport const NAMESPACE = 'viewer';\n\n// Actions\nexport const ACTION_MOVE = 'move';\nexport const ACTION_SWITCH = 'switch';\nexport const ACTION_ZOOM = 'zoom';\n\n// Classes\nexport const CLASS_ACTIVE = `${NAMESPACE}-active`;\nexport const CLASS_CLOSE = `${NAMESPACE}-close`;\nexport const CLASS_FADE = `${NAMESPACE}-fade`;\nexport const CLASS_FIXED = `${NAMESPACE}-fixed`;\nexport const CLASS_FULLSCREEN = `${NAMESPACE}-fullscreen`;\nexport const CLASS_FULLSCREEN_EXIT = `${NAMESPACE}-fullscreen-exit`;\nexport const CLASS_HIDE = `${NAMESPACE}-hide`;\nexport const CLASS_HIDE_MD_DOWN = `${NAMESPACE}-hide-md-down`;\nexport const CLASS_HIDE_SM_DOWN = `${NAMESPACE}-hide-sm-down`;\nexport const CLASS_HIDE_XS_DOWN = `${NAMESPACE}-hide-xs-down`;\nexport const CLASS_IN = `${NAMESPACE}-in`;\nexport const CLASS_INVISIBLE = `${NAMESPACE}-invisible`;\nexport const CLASS_MOVE = `${NAMESPACE}-move`;\nexport const CLASS_OPEN = `${NAMESPACE}-open`;\nexport const CLASS_SHOW = `${NAMESPACE}-show`;\nexport const CLASS_TRANSITION = `${NAMESPACE}-transition`;\n\n// Events\nexport const EVENT_READY = 'ready';\nexport const EVENT_SHOW = 'show';\nexport const EVENT_SHOWN = 'shown';\nexport const EVENT_HIDE = 'hide';\nexport const EVENT_HIDDEN = 'hidden';\nexport const EVENT_VIEW = 'view';\nexport const EVENT_VIEWED = 'viewed';\nexport const EVENT_CLICK = 'click';\nexport const EVENT_DRAG_START = 'dragstart';\nexport const EVENT_KEY_DOWN = 'keydown';\nexport const EVENT_LOAD = 'load';\nexport const EVENT_POINTER_DOWN = PointerEvent ? 'pointerdown' : 'touchstart mousedown';\nexport const EVENT_POINTER_MOVE = PointerEvent ? 'pointermove' : 'mousemove touchmove';\nexport const EVENT_POINTER_UP = PointerEvent ? 'pointerup pointercancel' : 'touchend touchcancel mouseup';\nexport const EVENT_RESIZE = 'resize';\nexport const EVENT_TRANSITION_END = 'transitionend';\nexport const EVENT_WHEEL = 'wheel mousewheel DOMMouseScroll';\n","import {\n  CLASS_HIDE_XS_DOWN,\n  CLASS_HIDE_SM_DOWN,\n  CLASS_HIDE_MD_DOWN,\n} from './constants';\n\n/**\n * Check if the given value is a string.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a string, else `false`.\n */\nexport function isString(value) {\n  return typeof value === 'string';\n}\n\n/**\n * Check if the given value is not a number.\n */\nexport const isNaN = Number.isNaN || window.isNaN;\n\n/**\n * Check if the given value is a number.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n */\nexport function isNumber(value) {\n  return typeof value === 'number' && !isNaN(value);\n}\n\n/**\n * Check if the given value is undefined.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n */\nexport function isUndefined(value) {\n  return typeof value === 'undefined';\n}\n\n/**\n * Check if the given value is an object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n */\nexport function isObject(value) {\n  return typeof value === 'object' && value !== null;\n}\n\nconst { hasOwnProperty } = Object.prototype;\n\n/**\n * Check if the given value is a plain object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n */\nexport function isPlainObject(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n\n  try {\n    const { constructor } = value;\n    const { prototype } = constructor;\n\n    return constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Check if the given value is a function.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n */\nexport function isFunction(value) {\n  return typeof value === 'function';\n}\n\n/**\n * Iterate the given data.\n * @param {*} data - The data to iterate.\n * @param {Function} callback - The process function for each element.\n * @returns {*} The original data.\n */\nexport function each(data, callback) {\n  if (data && isFunction(callback)) {\n    if (Array.isArray(data) || isNumber(data.length)/* array-like */) {\n      const { length } = data;\n      let i;\n\n      for (i = 0; i < length; i += 1) {\n        if (callback.call(data, data[i], i, data) === false) {\n          break;\n        }\n      }\n    } else if (isObject(data)) {\n      Object.keys(data).forEach((key) => {\n        callback.call(data, data[key], key, data);\n      });\n    }\n  }\n\n  return data;\n}\n\n/**\n * Extend the given object.\n * @param {*} obj - The object to be extended.\n * @param {*} args - The rest objects which will be merged to the first object.\n * @returns {Object} The extended object.\n */\nexport function extend(obj, ...args) {\n  if (isObject(obj) && args.length > 0) {\n    if (Object.assign) {\n      return Object.assign(obj, ...args);\n    }\n\n    args.forEach((arg) => {\n      if (isObject(arg)) {\n        Object.keys(arg).forEach((key) => {\n          obj[key] = arg[key];\n        });\n      }\n    });\n  }\n\n  return obj;\n}\n\n/**\n * Takes a function and returns a new one that will always have a particular context.\n * @param {Function} fn - The target function.\n * @param {Object} context - The new context for the function.\n * @returns {Function} The new function.\n */\nexport function proxy(fn, context, ...args) {\n  return (...args2) => fn.apply(context, args.concat(args2));\n}\n\nconst REGEXP_SUFFIX = /^(width|height|left|top|marginLeft|marginTop)$/;\n\n/**\n * Apply styles to the given element.\n * @param {Element} element - The target element.\n * @param {Object} styles - The styles for applying.\n */\nexport function setStyle(element, styles) {\n  const { style } = element;\n\n  each(styles, (value, property) => {\n    if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n      value += 'px';\n    }\n\n    style[property] = value;\n  });\n}\n\n/**\n * Get the styles from the given element.\n * @param {Element} element - The target element.\n * @returns {Object} The styles of the element.\n */\nexport function getStyle(element) {\n  return window.getComputedStyle ?\n    window.getComputedStyle(element, null) :\n    element.currentStyle;\n}\n\n/**\n * Check if the given element has a special class.\n * @param {Element} element - The element to check.\n * @param {string} value - The class to search.\n * @returns {boolean} Returns `true` if the special class was found.\n */\nexport function hasClass(element, value) {\n  return element.classList ?\n    element.classList.contains(value) :\n    element.className.indexOf(value) > -1;\n}\n\n/**\n * Add classes to the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be added.\n */\nexport function addClass(element, value) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    each(element, (elem) => {\n      addClass(elem, value);\n    });\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.add(value);\n    return;\n  }\n\n  const className = element.className.trim();\n\n  if (!className) {\n    element.className = value;\n  } else if (className.indexOf(value) < 0) {\n    element.className = `${className} ${value}`;\n  }\n}\n\n/**\n * Remove classes from the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be removed.\n */\nexport function removeClass(element, value) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    each(element, (elem) => {\n      removeClass(elem, value);\n    });\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.remove(value);\n    return;\n  }\n\n  if (element.className.indexOf(value) >= 0) {\n    element.className = element.className.replace(value, '');\n  }\n}\n\n/**\n * Add or remove classes from the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be toggled.\n * @param {boolean} added - Add only.\n */\nexport function toggleClass(element, value, added) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    each(element, (elem) => {\n      toggleClass(elem, value, added);\n    });\n    return;\n  }\n\n  // IE10-11 doesn't support the second parameter of `classList.toggle`\n  if (added) {\n    addClass(element, value);\n  } else {\n    removeClass(element, value);\n  }\n}\n\nconst REGEXP_HYPHENATE = /([a-z\\d])([A-Z])/g;\n\n/**\n * Hyphenate the given value.\n * @param {string} value - The value to hyphenate.\n * @returns {string} The hyphenated value.\n */\nexport function hyphenate(value) {\n  return value.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();\n}\n\n/**\n * Get data from the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to get.\n * @returns {string} The data value.\n */\nexport function getData(element, name) {\n  if (isObject(element[name])) {\n    return element[name];\n  } else if (element.dataset) {\n    return element.dataset[name];\n  }\n\n  return element.getAttribute(`data-${hyphenate(name)}`);\n}\n\n/**\n * Set data to the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to set.\n * @param {string} data - The data value.\n */\nexport function setData(element, name, data) {\n  if (isObject(data)) {\n    element[name] = data;\n  } else if (element.dataset) {\n    element.dataset[name] = data;\n  } else {\n    element.setAttribute(`data-${hyphenate(name)}`, data);\n  }\n}\n\n/**\n * Remove data from the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to remove.\n */\nexport function removeData(element, name) {\n  if (isObject(element[name])) {\n    delete element[name];\n  } else if (element.dataset) {\n    // #128 Safari not allows to delete dataset property\n    try {\n      delete element.dataset[name];\n    } catch (e) {\n      element.dataset[name] = null;\n    }\n  } else {\n    element.removeAttribute(`data-${hyphenate(name)}`);\n  }\n}\n\nconst REGEXP_SPACES = /\\s+/;\n\n/**\n * Remove event listener from the given element.\n * @param {Element} element - The target element.\n * @param {string} type - The event type(s) to remove,\n * @param {Function} listener - The event listener to remove.\n * @param {Object} options - The event options.\n */\nexport function removeListener(element, type, listener, options = {}) {\n  const types = type.trim().split(REGEXP_SPACES);\n\n  if (types.length > 1) {\n    each(types, (t) => {\n      removeListener(element, t, listener);\n    });\n    return;\n  }\n\n  if (isFunction(listener.onceListener)) {\n    listener = listener.onceListener;\n    delete listener.onceListener;\n  }\n\n  if (element.removeEventListener) {\n    element.removeEventListener(type, listener, options);\n  } else if (element.detachEvent) {\n    element.detachEvent(`on${type}`, listener);\n  }\n}\n\n/**\n * Add event listener to the given element.\n * @param {Element} element - The target element.\n * @param {string} type - The event type(s) to add,\n * @param {Function} listener - The event listener to add.\n * @param {Object} options - The event options.\n */\nexport function addListener(element, type, listener, options = {}) {\n  const types = type.trim().split(REGEXP_SPACES);\n\n  if (types.length > 1) {\n    each(types, (t) => {\n      addListener(element, t, listener);\n    });\n    return;\n  }\n\n  if (options.once) {\n    const originalListener = listener;\n    const onceListener = (...args) => {\n      removeListener(element, type, onceListener);\n      return originalListener.apply(element, args);\n    };\n    originalListener.onceListener = onceListener;\n    listener = onceListener;\n  }\n\n  if (element.addEventListener) {\n    element.addEventListener(type, listener, options);\n  } else if (element.attachEvent) {\n    element.attachEvent(`on${type}`, listener);\n  }\n}\n\n/**\n * Dispatch event on the given element.\n * @param {Element} element - The target element.\n * @param {string} type - The event type(s) to dispatch,\n * @param {Object} data - The additional event data.\n * @returns {boolean} Indicate if the event is default prevented or not.\n */\nexport function dispatchEvent(element, type, data) {\n  if (element.dispatchEvent) {\n    let event;\n\n    // Event and CustomEvent on IE9-11 are global objects, not constructors\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      if (isUndefined(data)) {\n        event = new Event(type, {\n          bubbles: true,\n          cancelable: true,\n        });\n      } else {\n        event = new CustomEvent(type, {\n          detail: data,\n          bubbles: true,\n          cancelable: true,\n        });\n      }\n    } else if (isUndefined(data)) {\n      event = document.createEvent('Event');\n      event.initEvent(type, true, true);\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n\n    // IE9+\n    return element.dispatchEvent(event);\n  } else if (element.fireEvent) {\n    // IE6-10 (native events only)\n    return element.fireEvent(`on${type}`);\n  }\n\n  return true;\n}\n\n/**\n * Get the offset base on the document.\n * @param {Element} element - The target element.\n * @returns {Object} The offset data.\n */\nexport function getOffset(element) {\n  const doc = document.documentElement;\n  const box = element.getBoundingClientRect();\n\n  return {\n    left: box.left + (\n      (window.scrollX || (doc && doc.scrollLeft) || 0) - ((doc && doc.clientLeft) || 0)\n    ),\n    top: box.top + (\n      (window.scrollY || (doc && doc.scrollTop) || 0) - ((doc && doc.clientTop) || 0)\n    ),\n  };\n}\n\n/**\n * Empty an element.\n * @param {Element} element - The element to empty.\n */\nexport function empty(element) {\n  while (element.firstChild) {\n    element.removeChild(element.firstChild);\n  }\n}\n\n/**\n * Get transforms base on the given object.\n * @param {Object} obj - The target object.\n * @returns {string} A string contains transform values.\n */\nexport function getTransforms({ rotate, scaleX, scaleY }) {\n  const values = [];\n\n  if (isNumber(rotate) && rotate !== 0) {\n    values.push(`rotate(${rotate}deg)`);\n  }\n\n  if (isNumber(scaleX) && scaleX !== 1) {\n    values.push(`scaleX(${scaleX})`);\n  }\n\n  if (isNumber(scaleY) && scaleY !== 1) {\n    values.push(`scaleY(${scaleY})`);\n  }\n\n  const transform = values.length ? values.join(' ') : 'none';\n\n  return {\n    WebkitTransform: transform,\n    msTransform: transform,\n    transform,\n  };\n}\n\n/**\n * Get an image name from an image url.\n * @param {string} url - The target url.\n * @example\n * // picture.jpg\n * getImageNameFromURL('http://domain.com/path/to/picture.jpg?size=1280×960')\n * @returns {string} A string contains the image name.\n */\nexport function getImageNameFromURL(url) {\n  return isString(url) ? url.replace(/^.*\\//, '').replace(/[?&#].*$/, '') : '';\n}\n\nconst IS_SAFARI_OR_UIWEBVIEW = navigator && /(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent);\n\n/**\n * Get an image's natural sizes.\n * @param {string} image - The target image.\n * @param {Function} callback - The callback function.\n */\nexport function getImageNaturalSizes(image, callback) {\n  // Modern browsers (except Safari)\n  if (image.naturalWidth && !IS_SAFARI_OR_UIWEBVIEW) {\n    callback(image.naturalWidth, image.naturalHeight);\n    return;\n  }\n\n  const newImage = document.createElement('img');\n\n  newImage.onload = () => {\n    callback(newImage.width, newImage.height);\n  };\n\n  newImage.src = image.src;\n}\n\n/**\n * Get the related class name of a responsive type number.\n * @param {string} type - The responsive type.\n * @returns {string} The related class name.\n */\nexport function getResponsiveClass(type) {\n  switch (type) {\n    case 2:\n      return CLASS_HIDE_XS_DOWN;\n\n    case 3:\n      return CLASS_HIDE_SM_DOWN;\n\n    case 4:\n      return CLASS_HIDE_MD_DOWN;\n\n    default:\n      return '';\n  }\n}\n\n/**\n * Get the max ratio of a group of pointers.\n * @param {string} pointers - The target pointers.\n * @returns {number} The result ratio.\n */\nexport function getMaxZoomRatio(pointers) {\n  const pointers2 = extend({}, pointers);\n  const ratios = [];\n\n  each(pointers, (pointer, pointerId) => {\n    delete pointers2[pointerId];\n\n    each(pointers2, (pointer2) => {\n      const x1 = Math.abs(pointer.startX - pointer2.startX);\n      const y1 = Math.abs(pointer.startY - pointer2.startY);\n      const x2 = Math.abs(pointer.endX - pointer2.endX);\n      const y2 = Math.abs(pointer.endY - pointer2.endY);\n      const z1 = Math.sqrt((x1 * x1) + (y1 * y1));\n      const z2 = Math.sqrt((x2 * x2) + (y2 * y2));\n      const ratio = (z2 - z1) / z1;\n\n      ratios.push(ratio);\n    });\n  });\n\n  ratios.sort((a, b) => Math.abs(a) < Math.abs(b));\n\n  return ratios[0];\n}\n\n/**\n * Get a pointer from an event object.\n * @param {Object} event - The target event object.\n * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n * @returns {Object} The result pointer contains start and/or end point coordinates.\n */\nexport function getPointer({ pageX, pageY }, endOnly) {\n  const end = {\n    endX: pageX,\n    endY: pageY,\n  };\n\n  if (endOnly) {\n    return end;\n  }\n\n  return extend({\n    startX: pageX,\n    startY: pageY,\n  }, end);\n}\n\n/**\n * Get the center point coordinate of a group of pointers.\n * @param {Object} pointers - The target pointers.\n * @returns {Object} The center point coordinate.\n */\nexport function getPointersCenter(pointers) {\n  let pageX = 0;\n  let pageY = 0;\n  let count = 0;\n\n  each(pointers, ({ startX, startY }) => {\n    pageX += startX;\n    pageY += startY;\n    count += 1;\n  });\n\n  pageX /= count;\n  pageY /= count;\n\n  return {\n    pageX,\n    pageY,\n  };\n}\n","import {\n  CLASS_TRANSITION,\n  EVENT_LOAD,\n  EVENT_TRANSITION_END,\n  EVENT_VIEWED,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  each,\n  empty,\n  extend,\n  getImageNameFromURL,\n  getImageNaturalSizes,\n  getTransforms,\n  isFunction,\n  isString,\n  proxy,\n  removeClass,\n  setData,\n  setStyle,\n} from './utilities';\n\nexport default {\n  render() {\n    this.initContainer();\n    this.initViewer();\n    this.initList();\n    this.renderViewer();\n  },\n\n  initContainer() {\n    this.containerData = {\n      width: window.innerWidth,\n      height: window.innerHeight,\n    };\n  },\n\n  initViewer() {\n    const { options, parent } = this;\n    let viewerData;\n\n    if (options.inline) {\n      viewerData = {\n        width: Math.max(parent.offsetWidth, options.minWidth),\n        height: Math.max(parent.offsetHeight, options.minHeight),\n      };\n\n      this.parentData = viewerData;\n    }\n\n    if (this.fulled || !viewerData) {\n      viewerData = this.containerData;\n    }\n\n    this.viewerData = extend({}, viewerData);\n  },\n\n  renderViewer() {\n    if (this.options.inline && !this.fulled) {\n      setStyle(this.viewer, this.viewerData);\n    }\n  },\n\n  initList() {\n    const { element, options, list } = this;\n    const items = [];\n\n    each(this.images, (image, i) => {\n      const { src } = image;\n      const alt = image.alt || getImageNameFromURL(src);\n      let { url } = options;\n\n      if (!src) {\n        return;\n      }\n\n      if (isString(url)) {\n        url = image.getAttribute(url);\n      } else if (isFunction(url)) {\n        url = url.call(image, image);\n      }\n\n      items.push('<li>' +\n        '<img' +\n          ` src=\"${src}\"` +\n          ' role=\"button\"' +\n          ' data-action=\"view\"' +\n          ` data-index=\"${i}\"` +\n          ` data-original-url=\"${(url || src)}\"` +\n          ` alt=\"${alt}\"` +\n        '>' +\n      '</li>');\n    });\n\n    list.innerHTML = items.join('');\n\n    each(list.getElementsByTagName('img'), (image) => {\n      setData(image, 'filled', true);\n      addListener(image, EVENT_LOAD, proxy(this.loadImage, this), {\n        once: true,\n      });\n    });\n\n    this.items = list.getElementsByTagName('li');\n\n    if (options.transition) {\n      addListener(element, EVENT_VIEWED, () => {\n        addClass(list, CLASS_TRANSITION);\n      }, {\n        once: true,\n      });\n    }\n  },\n\n  renderList(index) {\n    const i = index || this.index;\n    const width = this.items[i].offsetWidth || 30;\n    const outerWidth = width + 1; // 1 pixel of `margin-left` width\n\n    // Place the active item in the center of the screen\n    setStyle(this.list, {\n      width: outerWidth * this.length,\n      marginLeft: ((this.viewerData.width - width) / 2) - (outerWidth * i),\n    });\n  },\n\n  resetList() {\n    empty(this.list);\n    removeClass(this.list, CLASS_TRANSITION);\n    setStyle({\n      marginLeft: 0,\n    });\n  },\n\n  initImage(callback) {\n    const { options, image, viewerData } = this;\n    const footerHeight = this.footer.offsetHeight;\n    const viewerWidth = viewerData.width;\n    const viewerHeight = Math.max(viewerData.height - footerHeight, footerHeight);\n    const oldImageData = this.ImageData || {};\n\n    getImageNaturalSizes(image, (naturalWidth, naturalHeight) => {\n      const aspectRatio = naturalWidth / naturalHeight;\n      let width = viewerWidth;\n      let height = viewerHeight;\n\n      if (viewerHeight * aspectRatio > viewerWidth) {\n        height = viewerWidth / aspectRatio;\n      } else {\n        width = viewerHeight * aspectRatio;\n      }\n\n      width = Math.min(width * 0.9, naturalWidth);\n      height = Math.min(height * 0.9, naturalHeight);\n\n      const imageData = {\n        naturalWidth,\n        naturalHeight,\n        aspectRatio,\n        ratio: width / naturalWidth,\n        width,\n        height,\n        left: (viewerWidth - width) / 2,\n        top: (viewerHeight - height) / 2,\n      };\n      const initialImageData = extend({}, imageData);\n\n      if (options.rotatable) {\n        imageData.rotate = oldImageData.rotate || 0;\n        initialImageData.rotate = 0;\n      }\n\n      if (options.scalable) {\n        imageData.scaleX = oldImageData.scaleX || 1;\n        imageData.scaleY = oldImageData.scaleY || 1;\n        initialImageData.scaleX = 1;\n        initialImageData.scaleY = 1;\n      }\n\n      this.imageData = imageData;\n      this.initialImageData = initialImageData;\n\n      if (isFunction(callback)) {\n        callback();\n      }\n    });\n  },\n\n  renderImage(callback) {\n    const { image, imageData } = this;\n\n    setStyle(image, extend({\n      width: imageData.width,\n      height: imageData.height,\n      marginLeft: imageData.left,\n      marginTop: imageData.top,\n    }, getTransforms(imageData)));\n\n    if (isFunction(callback)) {\n      if (this.transitioning) {\n        addListener(image, EVENT_TRANSITION_END, callback, {\n          once: true,\n        });\n      } else {\n        callback();\n      }\n    }\n  },\n\n  resetImage() {\n    const { image } = this;\n\n    // this.image only defined after viewed\n    if (image) {\n      image.parentNode.removeChild(image);\n      this.image = null;\n    }\n  },\n};\n","import {\n  EVENT_CLICK,\n  EVENT_DRAG_START,\n  EVENT_KEY_DOWN,\n  EVENT_POINTER_DOWN,\n  EVENT_POINTER_MOVE,\n  EVENT_POINTER_UP,\n  EVENT_RESIZE,\n  EVENT_VIEW,\n  EVENT_VIEWED,\n  EVENT_WHEEL,\n} from './constants';\nimport {\n  addListener,\n  isFunction,\n  proxy,\n  removeListener,\n} from './utilities';\n\nexport default {\n  bind() {\n    const { element, options, viewer } = this;\n\n    if (isFunction(options.view)) {\n      addListener(element, EVENT_VIEW, options.view);\n    }\n\n    if (isFunction(options.viewed)) {\n      addListener(element, EVENT_VIEWED, options.viewed);\n    }\n\n    addListener(viewer, EVENT_CLICK, (this.onClick = proxy(this.click, this)));\n    addListener(viewer, EVENT_WHEEL, (this.onWheel = proxy(this.wheel, this)));\n    addListener(viewer, EVENT_DRAG_START, (this.onDragStart = proxy(this.dragstart, this)));\n    addListener(\n      this.canvas, EVENT_POINTER_DOWN, (\n        this.onPointerDown = proxy(this.pointerdown, this)\n      ),\n    );\n    addListener(\n      document, EVENT_POINTER_MOVE, (\n        this.onPointerMove = proxy(this.pointermove, this)\n      ),\n    );\n    addListener(document, EVENT_POINTER_UP, (this.onPointerUp = proxy(this.pointerup, this)));\n    addListener(document, EVENT_KEY_DOWN, (this.onKeyDown = proxy(this.keydown, this)));\n    addListener(window, EVENT_RESIZE, (this.onResize = proxy(this.resize, this)));\n  },\n\n  unbind() {\n    const { element, options, viewer } = this;\n\n    if (isFunction(options.view)) {\n      removeListener(element, EVENT_VIEW, options.view);\n    }\n\n    if (isFunction(options.viewed)) {\n      removeListener(element, EVENT_VIEWED, options.viewed);\n    }\n\n    removeListener(viewer, EVENT_CLICK, this.onClick);\n    removeListener(viewer, EVENT_WHEEL, this.onWheel);\n    removeListener(viewer, EVENT_DRAG_START, this.onDragStart);\n    removeListener(this.canvas, EVENT_POINTER_DOWN, this.onPointerDown);\n    removeListener(document, EVENT_POINTER_MOVE, this.onPointerMove);\n    removeListener(document, EVENT_POINTER_UP, this.onPointerUp);\n    removeListener(document, EVENT_KEY_DOWN, this.onKeyDown);\n    removeListener(window, EVENT_RESIZE, this.onResize);\n  },\n};\n","import {\n  ACTION_MOVE,\n  ACTION_SWITCH,\n  ACTION_ZOOM,\n  CLASS_INVISIBLE,\n  CLASS_MOVE,\n  CLASS_TRANSITION,\n  EVENT_LOAD,\n  EVENT_VIEWED,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  dispatchEvent,\n  each,\n  extend,\n  getData,\n  getImageNaturalSizes,\n  getPointer,\n  hasClass,\n  proxy,\n  removeClass,\n  setStyle,\n  toggleClass,\n} from './utilities';\n\nexport default {\n  click({ target }) {\n    const { imageData } = this;\n    const action = getData(target, 'action');\n\n    switch (action) {\n      case 'mix':\n        if (this.played) {\n          this.stop();\n        } else if (this.options.inline) {\n          if (this.fulled) {\n            this.exit();\n          } else {\n            this.full();\n          }\n        } else {\n          this.hide();\n        }\n\n        break;\n\n      case 'view':\n        this.view(getData(target, 'index'));\n        break;\n\n      case 'zoom-in':\n        this.zoom(0.1, true);\n        break;\n\n      case 'zoom-out':\n        this.zoom(-0.1, true);\n        break;\n\n      case 'one-to-one':\n        this.toggle();\n        break;\n\n      case 'reset':\n        this.reset();\n        break;\n\n      case 'prev':\n        this.prev();\n        break;\n\n      case 'play':\n        this.play();\n        break;\n\n      case 'next':\n        this.next();\n        break;\n\n      case 'rotate-left':\n        this.rotate(-90);\n        break;\n\n      case 'rotate-right':\n        this.rotate(90);\n        break;\n\n      case 'flip-horizontal':\n        this.scaleX(-imageData.scaleX || -1);\n        break;\n\n      case 'flip-vertical':\n        this.scaleY(-imageData.scaleY || -1);\n        break;\n\n      default:\n        if (this.played) {\n          this.stop();\n        }\n    }\n  },\n\n  load() {\n    const {\n      options,\n      image,\n      index,\n      viewerData,\n    } = this;\n\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n      this.timeout = false;\n    }\n\n    if (!image) {\n      return;\n    }\n\n    removeClass(image, CLASS_INVISIBLE);\n\n    image.style.cssText = (\n      'width:0;' +\n      'height:0;' +\n      `margin-left:${viewerData.width / 2}px;` +\n      `margin-top:${viewerData.height / 2}px;` +\n      'max-width:none!important;' +\n      'visibility:visible;'\n    );\n\n    this.initImage(() => {\n      toggleClass(image, CLASS_TRANSITION, options.transition);\n      toggleClass(image, CLASS_MOVE, options.movable);\n\n      this.renderImage(() => {\n        this.viewed = true;\n        dispatchEvent(this.element, EVENT_VIEWED, {\n          originalImage: this.images[index],\n          index,\n          image,\n        });\n      });\n    });\n  },\n\n  loadImage(e) {\n    const image = e.target;\n    const parent = image.parentNode;\n    const parentWidth = parent.offsetWidth || 30;\n    const parentHeight = parent.offsetHeight || 50;\n    const filled = !!getData(image, 'filled');\n\n    getImageNaturalSizes(image, (naturalWidth, naturalHeight) => {\n      const aspectRatio = naturalWidth / naturalHeight;\n      let width = parentWidth;\n      let height = parentHeight;\n\n      if (parentHeight * aspectRatio > parentWidth) {\n        if (filled) {\n          width = parentHeight * aspectRatio;\n        } else {\n          height = parentWidth / aspectRatio;\n        }\n      } else if (filled) {\n        height = parentWidth / aspectRatio;\n      } else {\n        width = parentHeight * aspectRatio;\n      }\n\n      setStyle(image, {\n        width,\n        height,\n        marginLeft: (parentWidth - width) / 2,\n        marginTop: (parentHeight - height) / 2,\n      });\n    });\n  },\n\n  keydown(e) {\n    const { options } = this;\n    const key = e.keyCode || e.which || e.charCode;\n\n    if (!this.fulled || !options.keyboard) {\n      return;\n    }\n\n    switch (key) {\n      // (Key: Esc)\n      case 27:\n        if (this.played) {\n          this.stop();\n        } else if (options.inline) {\n          if (this.fulled) {\n            this.exit();\n          }\n        } else {\n          this.hide();\n        }\n\n        break;\n\n      // (Key: Space)\n      case 32:\n        if (this.played) {\n          this.stop();\n        }\n\n        break;\n\n      // View previous (Key: ←)\n      case 37:\n        this.prev();\n        break;\n\n      // Zoom in (Key: ↑)\n      case 38:\n\n        // Prevent scroll on Firefox\n        e.preventDefault();\n\n        this.zoom(options.zoomRatio, true);\n        break;\n\n      // View next (Key: →)\n      case 39:\n        this.next();\n        break;\n\n      // Zoom out (Key: ↓)\n      case 40:\n\n        // Prevent scroll on Firefox\n        e.preventDefault();\n\n        this.zoom(-options.zoomRatio, true);\n        break;\n\n      // Zoom out to initial size (Key: Ctrl + 0)\n      case 48:\n        // Fall through\n\n      // Zoom in to natural size (Key: Ctrl + 1)\n      // eslint-disable-next-line\n      case 49:\n        if (e.ctrlKey || e.shiftKey) {\n          e.preventDefault();\n          this.toggle();\n        }\n\n        break;\n\n      default:\n    }\n  },\n\n  dragstart(e) {\n    if (e.target.tagName.toLowerCase() === 'img') {\n      e.preventDefault();\n    }\n  },\n\n  pointerdown(e) {\n    const { options, pointers } = this;\n\n    if (!this.viewed || this.transitioning) {\n      return;\n    }\n\n    if (e.changedTouches) {\n      each(e.changedTouches, (touch) => {\n        pointers[touch.identifier] = getPointer(touch);\n      });\n    } else {\n      pointers[e.pointerId || 0] = getPointer(e);\n    }\n\n    let action = options.movable ? ACTION_MOVE : false;\n\n    if (Object.keys(pointers).length > 1) {\n      action = ACTION_ZOOM;\n    } else if ((e.pointerType === 'touch' || e.type === 'touchmove') && this.isSwitchable()) {\n      action = ACTION_SWITCH;\n    }\n\n    this.action = action;\n  },\n\n  pointermove(e) {\n    const {\n      options,\n      pointers,\n      action,\n      image,\n    } = this;\n\n    if (!this.viewed || !action) {\n      return;\n    }\n\n    e.preventDefault();\n\n    if (e.changedTouches) {\n      each(e.changedTouches, (touch) => {\n        extend(pointers[touch.identifier], getPointer(touch, true));\n      });\n    } else {\n      extend(pointers[e.pointerId || 0], getPointer(e, true));\n    }\n\n    if (action === ACTION_MOVE && options.transition && hasClass(image, CLASS_TRANSITION)) {\n      removeClass(image, CLASS_TRANSITION);\n    }\n\n    this.change(e);\n  },\n\n  pointerup(e) {\n    const { action, pointers } = this;\n\n    if (!this.viewed) {\n      return;\n    }\n\n    if (e.changedTouches) {\n      each(e.changedTouches, (touch) => {\n        delete pointers[touch.identifier];\n      });\n    } else {\n      delete pointers[e.pointerId || 0];\n    }\n\n    if (!action) {\n      return;\n    }\n\n    if (action === ACTION_MOVE && this.options.transition) {\n      addClass(this.image, CLASS_TRANSITION);\n    }\n\n    this.action = false;\n  },\n\n  resize() {\n    this.initContainer();\n    this.initViewer();\n    this.renderViewer();\n    this.renderList();\n\n    if (this.viewed) {\n      this.initImage(() => {\n        this.renderImage();\n      });\n    }\n\n    if (this.played) {\n      if (this.options.fullscreen && this.fulled &&\n        !document.fullscreenElement &&\n        !document.mozFullScreenElement &&\n        !document.webkitFullscreenElement &&\n        !document.msFullscreenElement) {\n        this.stop();\n        return;\n      }\n\n      each(this.player.getElementsByTagName('img'), (image) => {\n        addListener(image, EVENT_LOAD, proxy(this.loadImage, this), {\n          once: true,\n        });\n        dispatchEvent(image, EVENT_LOAD);\n      });\n    }\n  },\n\n  start({ target }) {\n\n    if (target.tagName.toLowerCase() === 'img') {\n      this.target = target;\n      this.show();\n    }\n  },\n\n  wheel(e) {\n    if (!this.viewed) {\n      return;\n    }\n\n    e.preventDefault();\n\n    // Limit wheel speed to prevent zoom too fast\n    if (this.wheeling) {\n      return;\n    }\n\n    this.wheeling = true;\n\n    setTimeout(() => {\n      this.wheeling = false;\n    }, 50);\n\n    const ratio = Number(this.options.zoomRatio) || 0.1;\n    let delta = 1;\n\n    if (e.deltaY) {\n      delta = e.deltaY > 0 ? 1 : -1;\n    } else if (e.wheelDelta) {\n      delta = -e.wheelDelta / 120;\n    } else if (e.detail) {\n      delta = e.detail > 0 ? 1 : -1;\n    }\n\n    this.zoom(-delta * ratio, true, e);\n  },\n};\n","import {\n  CLASS_ACTIVE,\n  CLASS_FADE,\n  CLASS_FIXED,\n  CLASS_FULLSCREEN_EXIT,\n  CLASS_HIDE,\n  CLASS_IN,\n  CLASS_INVISIBLE,\n  CLASS_SHOW,\n  CLASS_TRANSITION,\n  EVENT_CLICK,\n  EVENT_HIDE,\n  EVENT_LOAD,\n  EVENT_SHOW,\n  EVENT_SHOWN,\n  EVENT_TRANSITION_END,\n  EVENT_VIEW,\n  EVENT_VIEWED,\n  NAMESPACE,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  dispatchEvent,\n  each,\n  empty,\n  extend,\n  getData,\n  getOffset,\n  getPointersCenter,\n  hasClass,\n  isFunction,\n  isNumber,\n  isUndefined,\n  proxy,\n  removeClass,\n  removeData,\n  removeListener,\n  setStyle,\n  toggleClass,\n} from './utilities';\n\nexport default {\n  // Show the viewer (only available in modal mode)\n  show() {\n    const { element, options } = this;\n\n    if (options.inline || this.transitioning) {\n      return this;\n    }\n\n    if (!this.ready) {\n      this.build();\n    }\n\n    if (isFunction(options.show)) {\n      addListener(element, EVENT_SHOW, options.show, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_SHOW) === false) {\n      return this;\n    }\n\n    this.open();\n\n    const { viewer } = this;\n\n    removeClass(viewer, CLASS_HIDE);\n    addListener(element, EVENT_SHOWN, () => {\n      this.view(this.target ? [...this.images].indexOf(this.target) : this.index);\n      this.target = false;\n    }, {\n      once: true,\n    });\n\n    if (options.transition) {\n      this.transitioning = true;\n      addClass(viewer, CLASS_TRANSITION);\n\n      // Force reflow to enable CSS3 transition\n      // eslint-disable-next-line\n      viewer.offsetWidth;\n      addListener(viewer, EVENT_TRANSITION_END, proxy(this.shown, this), {\n        once: true,\n      });\n      addClass(viewer, CLASS_IN);\n    } else {\n      addClass(viewer, CLASS_IN);\n      this.shown();\n    }\n\n    return this;\n  },\n\n  // Hide the viewer (only available in modal mode)\n  hide() {\n    const { element, options, viewer } = this;\n\n    if (options.inline || this.transitioning || !this.visible) {\n      return this;\n    }\n\n    if (isFunction(options.hide)) {\n      addListener(element, EVENT_HIDE, options.hide, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_HIDE) === false) {\n      return this;\n    }\n\n    if (this.viewed && options.transition) {\n      this.transitioning = true;\n      addListener(this.image, EVENT_TRANSITION_END, () => {\n        addListener(viewer, EVENT_TRANSITION_END, proxy(this.hidden, this), {\n          once: true,\n        });\n        removeClass(viewer, CLASS_IN);\n      }, {\n        once: true,\n      });\n      this.zoomTo(0, false, false, true);\n    } else {\n      removeClass(viewer, CLASS_IN);\n      this.hidden();\n    }\n\n    return this;\n  },\n\n  /**\n   * View one of the images with image's index\n   * @param {number} index - The index of the image to view.\n   * @returns {Object} this\n   */\n  view(index) {\n    const { element, title, canvas } = this;\n\n    index = Number(index) || 0;\n\n    if (!this.ready || !this.visible || this.played || index < 0 || index >= this.length ||\n      (this.viewed && index === this.index)) {\n      return this;\n    }\n\n    const item = this.items[index];\n    const img = item.querySelector('img');\n    const url = getData(img, 'originalUrl');\n    const alt = img.getAttribute('alt');\n    const image = document.createElement('img');\n\n    image.src = url;\n    image.alt = alt;\n\n    if (dispatchEvent(element, EVENT_VIEW, {\n      originalImage: this.images[index],\n      index,\n      image,\n    }) === false) {\n      return this;\n    }\n\n    this.image = image;\n\n    removeClass(this.items[this.index], CLASS_ACTIVE);\n    addClass(item, CLASS_ACTIVE);\n\n    this.viewed = false;\n    this.index = index;\n    this.imageData = null;\n\n    addClass(image, CLASS_INVISIBLE);\n    empty(canvas);\n    canvas.appendChild(image);\n\n    // Center current item\n    this.renderList();\n\n    // Clear title\n    empty(title);\n\n    // Generate title after viewed\n    addListener(element, EVENT_VIEWED, () => {\n      const { imageData } = this;\n\n      title.textContent = `${alt} (${imageData.naturalWidth} × ${imageData.naturalHeight})`;\n    }, {\n      once: true,\n    });\n\n    if (image.complete) {\n      this.load();\n    } else {\n      addListener(image, EVENT_LOAD, proxy(this.load, this), {\n        once: true,\n      });\n\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n      }\n\n      // Make the image visible if it fails to load within 1s\n      this.timeout = setTimeout(() => {\n        removeClass(image, CLASS_INVISIBLE);\n        this.timeout = false;\n      }, 1000);\n    }\n\n    return this;\n  },\n\n  // View the previous image\n  prev() {\n    this.view(Math.max(this.index - 1, 0));\n\n    return this;\n  },\n\n  // View the next image\n  next() {\n    this.view(Math.min(this.index + 1, this.length - 1));\n\n    return this;\n  },\n\n  /**\n   * Move the image with relative offsets.\n   * @param {number} offsetX - The relative offset distance on the x-axis.\n   * @param {number} offsetY - The relative offset distance on the y-axis.\n   * @returns {Object} this\n   */\n  move(offsetX, offsetY) {\n    const { imageData } = this;\n\n    this.moveTo(\n      isUndefined(offsetX) ? offsetX : imageData.left + Number(offsetX),\n      isUndefined(offsetY) ? offsetY : imageData.top + Number(offsetY),\n    );\n\n    return this;\n  },\n\n  /**\n   * Move the image to an absolute point.\n   * @param {number} x - The x-axis coordinate.\n   * @param {number} [y=x] - The y-axis coordinate.\n   * @returns {Object} this\n   */\n  moveTo(x, y = x) {\n    const { imageData } = this;\n\n    x = Number(x);\n    y = Number(y);\n\n    if (this.viewed && !this.played && this.options.movable) {\n      let changed = false;\n\n      if (isNumber(x)) {\n        imageData.left = x;\n        changed = true;\n      }\n\n      if (isNumber(y)) {\n        imageData.top = y;\n        changed = true;\n      }\n\n      if (changed) {\n        this.renderImage();\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Zoom the image with a relative ratio.\n   * @param {number} ratio - The target ratio.\n   * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n   * @param {Event} [_originalEvent=null] - The original event if any.\n   * @returns {Object} this\n   */\n  zoom(ratio, hasTooltip = false, _originalEvent = null) {\n    const { imageData } = this;\n\n    ratio = Number(ratio);\n\n    if (ratio < 0) {\n      ratio = 1 / (1 - ratio);\n    } else {\n      ratio = 1 + ratio;\n    }\n\n    this.zoomTo((imageData.width * ratio) / imageData.naturalWidth, hasTooltip, _originalEvent);\n\n    return this;\n  },\n\n  /**\n   * Zoom the image to an absolute ratio.\n   * @param {number} ratio - The target ratio.\n   * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n   * @param {Event} [_originalEvent=null] - The original event if any.\n   * @param {Event} [_zoomable=false] - Indicates if the current zoom is available or not.\n   * @returns {Object} this\n   */\n  zoomTo(ratio, hasTooltip = false, _originalEvent = null, _zoomable = false) {\n    const { options, pointers, imageData } = this;\n\n    ratio = Math.max(0, ratio);\n\n    if (isNumber(ratio) && this.viewed && !this.played && (_zoomable || options.zoomable)) {\n      if (!_zoomable) {\n        const minZoomRatio = Math.max(0.01, options.minZoomRatio);\n        const maxZoomRatio = Math.min(100, options.maxZoomRatio);\n\n        ratio = Math.min(Math.max(ratio, minZoomRatio), maxZoomRatio);\n      }\n\n      if (_originalEvent && ratio > 0.95 && ratio < 1.05) {\n        ratio = 1;\n      }\n\n      const newWidth = imageData.naturalWidth * ratio;\n      const newHeight = imageData.naturalHeight * ratio;\n\n      if (_originalEvent) {\n        const offset = getOffset(this.viewer);\n        const center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n          pageX: _originalEvent.pageX,\n          pageY: _originalEvent.pageY,\n        };\n\n        // Zoom from the triggering point of the event\n        imageData.left -= (newWidth - imageData.width) * (\n          ((center.pageX - offset.left) - imageData.left) / imageData.width\n        );\n        imageData.top -= (newHeight - imageData.height) * (\n          ((center.pageY - offset.top) - imageData.top) / imageData.height\n        );\n      } else {\n        // Zoom from the center of the image\n        imageData.left -= (newWidth - imageData.width) / 2;\n        imageData.top -= (newHeight - imageData.height) / 2;\n      }\n\n      imageData.width = newWidth;\n      imageData.height = newHeight;\n      imageData.ratio = ratio;\n      this.renderImage();\n\n      if (hasTooltip) {\n        this.tooltip();\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Rotate the image with a relative degree.\n   * @param {number} degree - The rotate degree.\n   * @returns {Object} this\n   */\n  rotate(degree) {\n    this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n\n    return this;\n  },\n\n  /**\n   * Rotate the image to an absolute degree.\n   * @param {number} degree - The rotate degree.\n   * @returns {Object} this\n   */\n  rotateTo(degree) {\n    const { imageData } = this;\n\n    degree = Number(degree);\n\n    if (isNumber(degree) && this.viewed && !this.played && this.options.rotatable) {\n      imageData.rotate = degree;\n      this.renderImage();\n    }\n\n    return this;\n  },\n\n  /**\n   * Scale the image on the x-axis.\n   * @param {number} scaleX - The scale ratio on the x-axis.\n   * @returns {Object} this\n   */\n  scaleX(scaleX) {\n    this.scale(scaleX, this.imageData.scaleY);\n\n    return this;\n  },\n\n  /**\n   * Scale the image on the y-axis.\n   * @param {number} scaleY - The scale ratio on the y-axis.\n   * @returns {Object} this\n   */\n  scaleY(scaleY) {\n    this.scale(this.imageData.scaleX, scaleY);\n\n    return this;\n  },\n\n  /**\n   * Scale the image.\n   * @param {number} scaleX - The scale ratio on the x-axis.\n   * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n   * @returns {Object} this\n   */\n  scale(scaleX, scaleY = scaleX) {\n    const { imageData } = this;\n\n    scaleX = Number(scaleX);\n    scaleY = Number(scaleY);\n\n    if (this.viewed && !this.played && this.options.scalable) {\n      let changed = false;\n\n      if (isNumber(scaleX)) {\n        imageData.scaleX = scaleX;\n        changed = true;\n      }\n\n      if (isNumber(scaleY)) {\n        imageData.scaleY = scaleY;\n        changed = true;\n      }\n\n      if (changed) {\n        this.renderImage();\n      }\n    }\n\n    return this;\n  },\n\n  // Play the images\n  play() {\n    const { options, player } = this;\n    const load = proxy(this.loadImage, this);\n    const list = [];\n    let total = 0;\n    let index = 0;\n\n    if (!this.visible || this.played) {\n      return this;\n    }\n\n    if (options.fullscreen) {\n      this.requestFullscreen();\n    }\n\n    this.played = true;\n    this.onLoadWhenPlay = load;\n    addClass(player, CLASS_SHOW);\n\n    each(this.items, (item, i) => {\n      const img = item.querySelector('img');\n      const image = document.createElement('img');\n\n      image.src = getData(img, 'originalUrl');\n      image.alt = img.getAttribute('alt');\n      total += 1;\n\n      addClass(image, CLASS_FADE);\n      toggleClass(image, CLASS_TRANSITION, options.transition);\n\n      if (hasClass(item, CLASS_ACTIVE)) {\n        addClass(image, CLASS_IN);\n        index = i;\n      }\n\n      list.push(image);\n      addListener(image, EVENT_LOAD, load, {\n        once: true,\n      });\n      player.appendChild(image);\n    });\n\n    if (isNumber(options.interval) && options.interval > 0) {\n      const playing = () => {\n        this.playing = setTimeout(() => {\n          removeClass(list[index], CLASS_IN);\n          index += 1;\n          index = index < total ? index : 0;\n          addClass(list[index], CLASS_IN);\n\n          playing();\n        }, options.interval);\n      };\n\n      if (total > 1) {\n        playing();\n      }\n    }\n\n    return this;\n  },\n\n  // Stop play\n  stop() {\n    const { player } = this;\n\n    if (!this.played) {\n      return this;\n    }\n\n    if (this.options.fullscreen) {\n      this.exitFullscreen();\n    }\n\n    this.played = false;\n    clearTimeout(this.playing);\n    each(this.player.getElementsByTagName('img'), (image) => {\n      if (!image.complete) {\n        removeListener(image, EVENT_LOAD, this.onLoadWhenPlay);\n      }\n    });\n    removeClass(player, CLASS_SHOW);\n    empty(player);\n\n    return this;\n  },\n\n  // Enter modal mode (only available in inline mode)\n  full() {\n    const {\n      options,\n      viewer,\n      image,\n      list,\n    } = this;\n\n    if (!this.visible || this.played || this.fulled || !options.inline) {\n      return this;\n    }\n\n    this.fulled = true;\n    this.open();\n    addClass(this.button, CLASS_FULLSCREEN_EXIT);\n\n    if (options.transition) {\n      removeClass(image, CLASS_TRANSITION);\n      removeClass(list, CLASS_TRANSITION);\n    }\n\n    addClass(viewer, CLASS_FIXED);\n    viewer.setAttribute('style', '');\n    setStyle(viewer, {\n      zIndex: options.zIndex,\n    });\n\n    this.initContainer();\n    this.viewerData = extend({}, this.containerData);\n    this.renderList();\n    this.initImage(() => {\n      this.renderImage(() => {\n        if (options.transition) {\n          setTimeout(() => {\n            addClass(image, CLASS_TRANSITION);\n            addClass(list, CLASS_TRANSITION);\n          }, 0);\n        }\n      });\n    });\n\n    return this;\n  },\n\n  // Exit modal mode (only available in inline mode)\n  exit() {\n    const {\n      options,\n      viewer,\n      image,\n      list,\n    } = this;\n\n    if (!this.fulled) {\n      return this;\n    }\n\n    this.fulled = false;\n    this.close();\n    removeClass(this.button, CLASS_FULLSCREEN_EXIT);\n\n    if (options.transition) {\n      removeClass(image, CLASS_TRANSITION);\n      removeClass(list, CLASS_TRANSITION);\n    }\n\n    removeClass(viewer, CLASS_FIXED);\n    setStyle(viewer, {\n      zIndex: options.zIndexInline,\n    });\n\n    this.viewerData = extend({}, this.parentData);\n    this.renderViewer();\n    this.renderList();\n    this.initImage(() => {\n      this.renderImage(() => {\n        if (options.transition) {\n          setTimeout(() => {\n            addClass(image, CLASS_TRANSITION);\n            addClass(list, CLASS_TRANSITION);\n          }, 0);\n        }\n      });\n    });\n\n    return this;\n  },\n\n  // Show the current ratio of the image with percentage\n  tooltip() {\n    const { options, tooltipBox, imageData } = this;\n\n    if (!this.viewed || this.played || !options.tooltip) {\n      return this;\n    }\n\n    tooltipBox.textContent = `${Math.round(imageData.ratio * 100)}%`;\n\n    if (!this.tooltiping) {\n      if (options.transition) {\n        if (this.fading) {\n          dispatchEvent(tooltipBox, EVENT_TRANSITION_END);\n        }\n\n        addClass(tooltipBox, CLASS_SHOW);\n        addClass(tooltipBox, CLASS_FADE);\n        addClass(tooltipBox, CLASS_TRANSITION);\n\n        // Force reflow to enable CSS3 transition\n        // eslint-disable-next-line\n        tooltipBox.offsetWidth;\n        addClass(tooltipBox, CLASS_IN);\n      } else {\n        addClass(tooltipBox, CLASS_SHOW);\n      }\n    } else {\n      clearTimeout(this.tooltiping);\n    }\n\n    this.tooltiping = setTimeout(() => {\n      if (options.transition) {\n        addListener(tooltipBox, EVENT_TRANSITION_END, () => {\n          removeClass(tooltipBox, CLASS_SHOW);\n          removeClass(tooltipBox, CLASS_FADE);\n          removeClass(tooltipBox, CLASS_TRANSITION);\n          this.fading = false;\n        }, {\n          once: true,\n        });\n\n        removeClass(tooltipBox, CLASS_IN);\n        this.fading = true;\n      } else {\n        removeClass(tooltipBox, CLASS_SHOW);\n      }\n\n      this.tooltiping = false;\n    }, 1000);\n\n    return this;\n  },\n\n  // Toggle the image size between its natural size and initial size\n  toggle() {\n    if (this.imageData.ratio === 1) {\n      this.zoomTo(this.initialImageData.ratio, true);\n    } else {\n      this.zoomTo(1, true);\n    }\n\n    return this;\n  },\n\n  // Reset the image to its initial state\n  reset() {\n    if (this.viewed && !this.played) {\n      this.imageData = extend({}, this.initialImageData);\n      this.renderImage();\n    }\n\n    return this;\n  },\n\n  // Update viewer when images changed\n  update() {\n    const indexes = [];\n\n    // Destroy viewer if the target image was deleted\n    if (this.isImg && !this.element.parentNode) {\n      return this.destroy();\n    }\n\n    this.length = this.images.length;\n\n    if (this.ready) {\n      each(this.items, (item, i) => {\n        const img = item.querySelector('img');\n        const image = this.images[i];\n\n        if (image) {\n          if (image.src !== img.src) {\n            indexes.push(i);\n          }\n        } else {\n          indexes.push(i);\n        }\n      });\n\n      setStyle(this.list, {\n        width: 'auto',\n      });\n\n      this.initList();\n\n      if (this.visible) {\n        if (this.length) {\n          if (this.viewed) {\n            const index = indexes.indexOf(this.index);\n\n            if (index >= 0) {\n              this.viewed = false;\n              this.view(Math.max(this.index - (index + 1), 0));\n            } else {\n              addClass(this.items[this.index], CLASS_ACTIVE);\n            }\n          }\n        } else {\n          this.image = null;\n          this.viewed = false;\n          this.index = 0;\n          this.imageData = null;\n          empty(this.canvas);\n          empty(this.title);\n        }\n      }\n    }\n\n    return this;\n  },\n\n  // Destroy the viewer\n  destroy() {\n    const { element } = this;\n\n    if (this.options.inline) {\n      this.unbind();\n    } else {\n      if (this.visible) {\n        this.unbind();\n      }\n\n      removeListener(element, EVENT_CLICK, this.onStart);\n    }\n\n    this.unbuild();\n    removeData(element, NAMESPACE);\n\n    return this;\n  },\n};\n","import {\n  ACTION_MOVE,\n  ACTION_SWITCH,\n  ACTION_ZOOM,\n  CLASS_HIDE,\n  CLASS_OPEN,\n  EVENT_HIDDEN,\n  EVENT_SHOWN,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  dispatchEvent,\n  each,\n  getMaxZoomRatio,\n  isFunction,\n  removeClass,\n} from './utilities';\n\nconst { document } = window;\n\nexport default {\n  open() {\n    const { body } = this;\n\n    addClass(body, CLASS_OPEN);\n    body.style.paddingRight = `${this.scrollbarWidth}px`;\n  },\n\n  close() {\n    const { body } = this;\n\n    removeClass(body, CLASS_OPEN);\n    body.style.paddingRight = 0;\n  },\n\n  shown() {\n    const { element, options } = this;\n\n    this.transitioning = false;\n    this.fulled = true;\n    this.visible = true;\n    this.render();\n    this.bind();\n\n    if (isFunction(options.shown)) {\n      addListener(element, EVENT_SHOWN, options.shown, {\n        once: true,\n      });\n    }\n\n    dispatchEvent(element, EVENT_SHOWN);\n  },\n\n  hidden() {\n    const { element, options } = this;\n\n    this.transitioning = false;\n    this.viewed = false;\n    this.fulled = false;\n    this.visible = false;\n    this.unbind();\n    this.close();\n    addClass(this.viewer, CLASS_HIDE);\n    this.resetList();\n    this.resetImage();\n\n    if (isFunction(options.hidden)) {\n      addListener(element, EVENT_HIDDEN, options.hidden, {\n        once: true,\n      });\n    }\n\n    dispatchEvent(element, EVENT_HIDDEN);\n  },\n\n  requestFullscreen() {\n    if (this.fulled && !document.fullscreenElement && !document.mozFullScreenElement &&\n      !document.webkitFullscreenElement && !document.msFullscreenElement) {\n      const { documentElement } = document;\n\n      if (documentElement.requestFullscreen) {\n        documentElement.requestFullscreen();\n      } else if (documentElement.msRequestFullscreen) {\n        documentElement.msRequestFullscreen();\n      } else if (documentElement.mozRequestFullScreen) {\n        documentElement.mozRequestFullScreen();\n      } else if (documentElement.webkitRequestFullscreen) {\n        documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n      }\n    }\n  },\n\n  exitFullscreen() {\n    if (this.fulled) {\n      if (document.exitFullscreen) {\n        document.exitFullscreen();\n      } else if (document.msExitFullscreen) {\n        document.msExitFullscreen();\n      } else if (document.mozCancelFullScreen) {\n        document.mozCancelFullScreen();\n      } else if (document.webkitExitFullscreen) {\n        document.webkitExitFullscreen();\n      }\n    }\n  },\n\n  change(e) {\n    const { pointers } = this;\n    const pointer = pointers[Object.keys(pointers)[0]];\n    const offsetX = pointer.endX - pointer.startX;\n    const offsetY = pointer.endY - pointer.startY;\n\n    switch (this.action) {\n      // Move the current image\n      case ACTION_MOVE:\n        this.move(offsetX, offsetY);\n        break;\n\n      // Zoom the current image\n      case ACTION_ZOOM:\n        this.zoom(getMaxZoomRatio(pointers), false, e);\n        break;\n\n      case ACTION_SWITCH:\n        this.action = 'switched';\n\n        if (Math.abs(offsetX) > Math.abs(offsetY)) {\n          if (offsetX > 1) {\n            this.prev();\n          } else if (offsetX < -1) {\n            this.next();\n          }\n        }\n\n        break;\n\n      default:\n    }\n\n    // Override\n    each(pointers, (p) => {\n      p.startX = p.endX;\n      p.startY = p.endY;\n    });\n  },\n\n  isSwitchable() {\n    const { imageData, viewerData } = this;\n\n    return this.length > 1 && imageData.left >= 0 && imageData.top >= 0 &&\n      imageData.width <= viewerData.width &&\n      imageData.height <= viewerData.height;\n  },\n};\n","import DEFAULTS from './defaults';\nimport TEMPLATE from './template';\nimport render from './render';\nimport events from './events';\nimport handlers from './handlers';\nimport methods from './methods';\nimport others from './others';\nimport {\n  CLASS_CLOSE,\n  CLASS_FADE,\n  CLASS_FIXED,\n  CLASS_FULLSCREEN,\n  CLASS_HIDE,\n  CLASS_INVISIBLE,\n  EVENT_CLICK,\n  EVENT_LOAD,\n  EVENT_READY,\n  NAMESPACE,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  dispatchEvent,\n  each,\n  extend,\n  getData,\n  getResponsiveClass,\n  getStyle,\n  isFunction,\n  isPlainObject,\n  isUndefined,\n  proxy,\n  setData,\n  setStyle,\n  toggleClass,\n} from './utilities';\n\nlet AnotherViewer;\n\nclass Viewer {\n  /**\n   * Create a new Viewer.\n   * @param {Element} element - The target element for viewing.\n   * @param {Object} [options={}] - The configuration options.\n   */\n  constructor(element, options = {}) {\n    if (!element || element.nodeType !== 1) {\n      throw new Error('The first argument is required and must be an element.');\n    }\n\n\n    this.element = element;\n    this.options = extend({}, DEFAULTS, isPlainObject(options) && options);\n    this.isImg = false;\n    this.ready = false;\n    this.visible = false;\n    this.viewed = false;\n    this.fulled = false;\n    this.played = false;\n    this.wheeling = false;\n    this.playing = false;\n    this.fading = false;\n    this.tooltiping = false;\n    this.transitioning = false;\n    this.action = false;\n    this.target = false;\n    this.timeout = false;\n    this.index = 0;\n    this.length = 0;\n    this.pointers = {};\n    this.init();\n  }\n\n  init() {\n    const { element, options } = this;\n\n    if (getData(element, NAMESPACE)) {\n      return;\n    }\n\n    setData(element, NAMESPACE, this);\n\n    const isImg = element.tagName.toLowerCase() === 'img';\n    const images = isImg ? [element] : element.getElementsByTagName('img');\n    const { length } = images;\n\n    if (!length) {\n      return;\n    }\n\n    if (isFunction(options.ready)) {\n      addListener(element, EVENT_READY, options.ready, {\n        once: true,\n      });\n    }\n\n    // Override `transition` option if it is not supported\n    if (isUndefined(document.createElement(NAMESPACE).style.transition)) {\n      options.transition = false;\n    }\n\n    this.isImg = isImg;\n    this.length = length;\n    this.count = 0;\n    this.images = images;\n    this.body = document.body;\n    this.scrollbarWidth = window.innerWidth - document.body.clientWidth;\n\n    if (options.inline) {\n      const progress = proxy(this.progress, this);\n\n      addListener(element, EVENT_READY, () => {\n        this.view();\n      }, {\n        once: true,\n      });\n\n      each(images, (image) => {\n        if (image.complete) {\n          progress();\n        } else {\n          addListener(image, EVENT_LOAD, progress, {\n            once: true,\n          });\n        }\n      });\n    } else {\n      addListener(element, EVENT_CLICK, (this.onStart = proxy(this.start, this)));\n    }\n  }\n\n  progress() {\n    this.count += 1;\n\n    if (this.count === this.length) {\n      this.build();\n    }\n  }\n\n  build() {\n    const { options } = this;\n    const { element } = this;\n\n    if (this.ready) {\n      return;\n    }\n\n    const parent = element.parentNode;\n    const template = document.createElement('div');\n\n    template.innerHTML = TEMPLATE;\n\n    const viewer = template.querySelector(`.${NAMESPACE}-container`);\n    const title = viewer.querySelector(`.${NAMESPACE}-title`);\n    const toolbar = viewer.querySelector(`.${NAMESPACE}-toolbar`);\n    const navbar = viewer.querySelector(`.${NAMESPACE}-navbar`);\n    const button = viewer.querySelector(`.${NAMESPACE}-button`);\n\n    this.parent = parent;\n    this.viewer = viewer;\n    this.title = title;\n    this.toolbar = toolbar;\n    this.navbar = navbar;\n    this.button = button;\n    this.canvas = viewer.querySelector(`.${NAMESPACE}-canvas`);\n    this.footer = viewer.querySelector(`.${NAMESPACE}-footer`);\n    this.tooltipBox = viewer.querySelector(`.${NAMESPACE}-tooltip`);\n    this.player = viewer.querySelector(`.${NAMESPACE}-player`);\n    this.list = viewer.querySelector(`.${NAMESPACE}-list`);\n\n    addClass(title, !options.title ? CLASS_HIDE : getResponsiveClass(options.title));\n    addClass(toolbar, !options.toolbar ? CLASS_HIDE : getResponsiveClass(options.toolbar));\n    addClass(navbar, !options.navbar ? CLASS_HIDE : getResponsiveClass(options.navbar));\n    toggleClass(button, CLASS_HIDE, !options.button);\n\n    toggleClass(toolbar.querySelector(`.${NAMESPACE}-one-to-one`), CLASS_INVISIBLE, !options.zoomable);\n    toggleClass(toolbar.querySelectorAll('li[class*=\"zoom\"]'), CLASS_INVISIBLE, !options.zoomable);\n    toggleClass(toolbar.querySelectorAll('li[class*=\"flip\"]'), CLASS_INVISIBLE, !options.scalable);\n\n    if (!options.rotatable) {\n      const rotates = toolbar.querySelectorAll('li[class*=\"rotate\"]');\n\n      addClass(rotates, CLASS_INVISIBLE);\n      toolbar.appendChild(rotates);\n    }\n\n    if (options.inline) {\n      addClass(button, CLASS_FULLSCREEN);\n      setStyle(viewer, {\n        zIndex: options.zIndexInline,\n      });\n\n      if (getStyle(parent).position === 'static') {\n        setStyle(parent, {\n          position: 'relative',\n        });\n      }\n\n      parent.insertBefore(viewer, element.nextSibling);\n    } else {\n      addClass(button, CLASS_CLOSE);\n      addClass(viewer, CLASS_FIXED);\n      addClass(viewer, CLASS_FADE);\n      addClass(viewer, CLASS_HIDE);\n\n      setStyle(viewer, {\n        zIndex: options.zIndex,\n      });\n\n      document.body.appendChild(viewer);\n    }\n\n    if (options.inline) {\n      this.render();\n      this.bind();\n      this.visible = true;\n    }\n\n    this.ready = true;\n\n    dispatchEvent(element, EVENT_READY);\n  }\n\n  unbuild() {\n    if (!this.ready) {\n      return;\n    }\n\n    this.ready = false;\n    this.viewer.parentNode.removeChild(this.viewer);\n  }\n\n  /**\n   * Get the no conflict viewer class.\n   * @returns {Viewer} The viewer class.\n   */\n  static noConflict() {\n    window.Viewer = AnotherViewer;\n    return Viewer;\n  }\n\n  /**\n   * Change the default options.\n   * @param {Object} options - The new default options.\n   */\n  static setDefaults(options) {\n    extend(DEFAULTS, isPlainObject(options) && options);\n  }\n}\n\nextend(Viewer.prototype, render, events, handlers, methods, others);\n\nif (typeof window !== 'undefined') {\n  AnotherViewer = window.Viewer;\n  window.Viewer = Viewer;\n}\n\nexport default Viewer;\n"],"names":["window","PointerEvent","NAMESPACE","ACTION_MOVE","ACTION_SWITCH","ACTION_ZOOM","CLASS_ACTIVE","CLASS_CLOSE","CLASS_FADE","CLASS_FIXED","CLASS_FULLSCREEN","CLASS_FULLSCREEN_EXIT","CLASS_HIDE","CLASS_HIDE_MD_DOWN","CLASS_HIDE_SM_DOWN","CLASS_HIDE_XS_DOWN","CLASS_IN","CLASS_INVISIBLE","CLASS_MOVE","CLASS_OPEN","CLASS_SHOW","CLASS_TRANSITION","EVENT_READY","EVENT_SHOW","EVENT_SHOWN","EVENT_HIDE","EVENT_HIDDEN","EVENT_VIEW","EVENT_VIEWED","EVENT_CLICK","EVENT_DRAG_START","EVENT_KEY_DOWN","EVENT_LOAD","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_RESIZE","EVENT_TRANSITION_END","EVENT_WHEEL","isString","value","isNaN","Number","isNumber","isUndefined","isObject","hasOwnProperty","Object","prototype","isPlainObject","constructor","call","e","isFunction","each","data","callback","Array","isArray","length","i","keys","forEach","key","extend","obj","args","assign","arg","proxy","fn","context","args2","apply","concat","REGEXP_SUFFIX","setStyle","element","styles","style","property","test","getStyle","getComputedStyle","currentStyle","hasClass","classList","contains","className","indexOf","addClass","elem","add","trim","removeClass","remove","replace","toggleClass","added","REGEXP_HYPHENATE","hyphenate","toLowerCase","getData","name","dataset","getAttribute","setData","setAttribute","removeData","removeAttribute","REGEXP_SPACES","removeListener","type","listener","options","types","split","t","onceListener","removeEventListener","detachEvent","addListener","once","originalListener","addEventListener","attachEvent","dispatchEvent","event","Event","CustomEvent","document","createEvent","initEvent","initCustomEvent","fireEvent","getOffset","doc","documentElement","box","getBoundingClientRect","left","scrollX","scrollLeft","clientLeft","top","scrollY","scrollTop","clientTop","empty","firstChild","removeChild","getTransforms","rotate","scaleX","scaleY","values","push","transform","join","getImageNameFromURL","url","IS_SAFARI_OR_UIWEBVIEW","navigator","userAgent","getImageNaturalSizes","image","naturalWidth","naturalHeight","newImage","createElement","onload","width","height","src","getResponsiveClass","getMaxZoomRatio","pointers","pointers2","ratios","pointer","pointerId","pointer2","x1","Math","abs","startX","y1","startY","x2","endX","y2","endY","z1","sqrt","z2","ratio","sort","a","b","getPointer","endOnly","pageX","pageY","end","getPointersCenter","count","initContainer","initViewer","initList","renderViewer","containerData","innerWidth","innerHeight","parent","viewerData","inline","max","offsetWidth","minWidth","offsetHeight","minHeight","parentData","fulled","viewer","list","items","images","alt","innerHTML","getElementsByTagName","loadImage","transition","index","outerWidth","footerHeight","footer","viewerWidth","viewerHeight","oldImageData","ImageData","aspectRatio","min","imageData","initialImageData","rotatable","scalable","transitioning","parentNode","view","viewed","onClick","click","onWheel","wheel","onDragStart","dragstart","canvas","onPointerDown","pointerdown","onPointerMove","pointermove","onPointerUp","pointerup","onKeyDown","keydown","onResize","resize","target","action","played","stop","exit","full","hide","zoom","toggle","reset","prev","play","next","timeout","cssText","initImage","movable","renderImage","parentWidth","parentHeight","filled","keyCode","which","charCode","keyboard","preventDefault","zoomRatio","ctrlKey","shiftKey","tagName","changedTouches","touch","identifier","pointerType","isSwitchable","change","renderList","fullscreen","fullscreenElement","mozFullScreenElement","webkitFullscreenElement","msFullscreenElement","player","show","wheeling","delta","deltaY","wheelDelta","detail","ready","build","open","shown","visible","hidden","zoomTo","title","item","img","querySelector","appendChild","textContent","complete","load","setTimeout","offsetX","offsetY","moveTo","x","y","changed","hasTooltip","_originalEvent","_zoomable","zoomable","minZoomRatio","maxZoomRatio","newWidth","newHeight","offset","center","tooltip","degree","rotateTo","scale","total","requestFullscreen","onLoadWhenPlay","interval","playing","exitFullscreen","button","zIndex","close","zIndexInline","tooltipBox","round","tooltiping","fading","indexes","isImg","destroy","unbind","onStart","unbuild","body","paddingRight","scrollbarWidth","render","bind","resetList","resetImage","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","msExitFullscreen","mozCancelFullScreen","webkitExitFullscreen","move","p","AnotherViewer","Viewer","nodeType","Error","DEFAULTS","init","clientWidth","progress","start","template","TEMPLATE","toolbar","navbar","querySelectorAll","rotates","position","insertBefore","nextSibling","events","handlers","methods","others"],"mappings":"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"}