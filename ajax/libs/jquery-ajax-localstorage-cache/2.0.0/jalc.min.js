/*!
 * Copyright (c) Christopher Keefer, 2017.
 * jquery-ajax-localstorage-cache: V1.0.4.
 * This file is generated by grunt - do not edit directly.
 * Alter source files as needed, then run `grunt` in project directory.
 * Compiled: 2017-04-08 
 */


!function(a,b){"use strict";var c=function(a){var b;return a.cacheKey?"function"==typeof a.cacheKey?a.cacheKey(a):a.cacheKey:(b=a.url.replace(/jQuery.*/,""),a.cache===!1&&(b=b.replace(/([?&])_=[^&]*/,"")),b+a.type+(a.data||""))},d=function(a){if(!a)return!1;if(a===!0)return b.localStorage;if("object"==typeof a&&"getItem"in a&&"removeItem"in a&&"setItem"in a)return a;throw new TypeError("localCache must either be a boolean value, or an object which implements the Storage interface.")},e=function(a,b){a.removeItem(b),a.removeItem(b+"cachettl"),a.removeItem(b+"dataType")};a.ajaxPrefilter(function(a){var b,f,g=d(a.localCache),h=a.cacheTTL||5,i=a.cacheKey=c(a),j=a.isCacheValid,k=a.isResponseValid;g&&(b=g.getItem(i+"cachettl"),j&&"function"==typeof j&&!j()&&(e(g,i),b=0),b&&b<+new Date&&(e(g,i),b=0),f=g.getItem(i),f||(a.success&&(a.realsuccess=a.success),a.success=function(b,c,d){var f=b,j=this.dataType||d.getResponseHeader("Content-Type");if(!k||"function"!=typeof k||k(b,c,d)){-1!==j.toLowerCase().indexOf("json")&&(f=JSON.stringify(b));try{g.setItem(i,f),g.setItem(i+"cachettl",+new Date+36e5*h),g.setItem(i+"dataType",j)}catch(l){e(g,i),console.log("Cache Error:"+l,i,f)}}a.realsuccess&&a.realsuccess(b,c,d)}))}),a.ajaxTransport("+*",function(a){if(a.localCache){var b=a.cacheKey,c=d(a.localCache),e=a.dataType||c.getItem(b+"dataType")||"text",f=c?c.getItem(b):!1;if(f)return-1!==e.toLowerCase().indexOf("json")&&(f=JSON.parse(f)),{send:function(a,b){var c={};c[e]=f,b(200,"success",c,"")},abort:function(){console.log("Aborted ajax transport for json cache.")}}}})}(jQuery,window);
//# sourceMappingURL=jalc.min.map