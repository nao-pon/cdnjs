!function(e,t){"use strict";var a={skip:5};e.plugin("vast",function(e){var r=this,s=function(e){var t,a,r;for(a=1;a<arguments.length;a++){t=arguments[a];for(r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}return e}({},a,e||{});void 0!==r.ads?void 0!==s.url?(r.on("contentupdate",function(){r.vast.getContent(s.url)}),r.on("readyforpreroll",function(){r.vast.preroll()}),r.vast.getContent=function(e){t.client.get(e,function(e){if(e)for(var a=0;a<e.ads.length;a++){for(var s=e.ads[a],n=0;n<s.creatives.length;n++){var o=s.creatives[n];if("linear"===o.type&&o.mediaFiles.length){r.vast.sources=r.vast.createSourceObjects(o.mediaFiles),r.vastTracker=new t.tracker(s,o),r.on("canplay",function(){this.vastTracker.load()}),r.on("timeupdate",function(){isNaN(this.vastTracker.assetDuration)&&(this.vastTracker.assetDuration=this.duration()),this.vastTracker.setProgress(this.currentTime())}),r.on("play",function(){this.vastTracker.setPaused(!1)}),r.on("pause",function(){this.vastTracker.setPaused(!0)});break}}if(r.vastTracker){r.trigger("adsready");break}t.util.track(s.errorURLTemplates,{ERRORCODE:403})}r.vastTracker||r.trigger("adtimeout")})},r.vast.preroll=function(){r.ads.startLinearAdMode(),r.autoplay(!0);var e=r.vast.sources;r.src(e);var a=t.util.resolveURLTemplates([r.vastTracker.clickThroughURLTemplate],{CONTENTPLAYHEAD:r.vastTracker.progressFormated()})[0],s=document.createElement("a");s.className="vast-blocker",s.href=a,s.target="_blank",s.onclick=function(){var e=r.vastTracker.clickTrackingURLTemplate;e&&r.vastTracker.trackURLs(e)},r.vast.blocker=s,r.el().insertBefore(s,r.controlBar.el());var n=document.createElement("div");n.className="vast-skip-button",r.vast.skipButton=n,r.el().appendChild(n),r.on("timeupdate",r.vast.timeupdate),n.onclick=function(e){if((" "+r.vast.skipButton.className+" ").indexOf(" enabled ")>=0&&r.vast.tearDown(),void 0===Event.prototype.stopPropagation)return!1;e.stopPropagation()},r.one("ended",r.vast.tearDown)},r.vast.tearDown=function(){r.vast.skipButton.parentNode.removeChild(r.vast.skipButton),r.vast.blocker.parentNode.removeChild(r.vast.blocker),r.off("timeupdate",r.vast.timeupdate),r.off("ended",r.vast.tearDown),r.ads.endLinearAdMode()},r.vast.timeupdate=function(e){r.loadingSpinner.el().style.display="none";var t=Math.ceil(s.skip-r.currentTime());t>0?r.vast.skipButton.innerHTML="Skip in "+t+"...":-1===(" "+r.vast.skipButton.className+" ").indexOf(" enabled ")&&(r.vast.skipButton.className+=" enabled",r.vast.skipButton.innerHTML="Skip")},r.vast.createSourceObjects=function(e){for(var t={},a=["video/mp4","video/webm","video/ogv"],r=0;r<e.length;r++){var s=e[r].fileURL,n=e[r].mimeType;a.indexOf(n)>=0&&void 0===t[n]&&(t[n]=s)}for(var o=[],i=0;i<a.length;i++){var c=a[i];void 0!==t[c]&&o.push({type:c,src:t[c]})}return o}):r.trigger("adtimeout"):console.log("VAST requires videojs-contrib-ads")})}(window.videojs,window.DMVAST);