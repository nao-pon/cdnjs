!function(e,t){"use strict";var a={skip:5};e.plugin("vast",function(e){var r=this,n=function(e){var t,a,r;for(a=1;a<arguments.length;a++){t=arguments[a];for(r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}return e}({},a,e||{});void 0!==r.ads?void 0!==n.url?(r.on("contentupdate",function(){r.vast.getContent(n.url)}),r.on("readyforpreroll",function(){r.vast.preroll()}),r.vast.getContent=function(e){t.client.get(e,function(e){if(e)for(var a=0;a<e.ads.length;a++){for(var n=e.ads[a],s=0;s<n.creatives.length;s++){var o=n.creatives[s];if("linear"===o.type&&o.mediaFiles.length){r.vast.sources=r.vast.createSourceObjects(o.mediaFiles),r.vastTracker=new t.tracker(n,o),r.on("canplay",function(){this.vastTracker.load()}),r.on("timeupdate",function(){isNaN(o.duration)&&(o.duration=this.duration()),this.vastTracker.setProgress(this.currentTime())}),r.on("play",function(){this.vastTracker.setPaused(!1)}),r.on("pause",function(){this.vastTracker.setPaused(!0)});break}}if(r.vastTracker){r.trigger("adsready");break}t.util.track(n.errorURLTemplates,{ERRORCODE:403})}r.vastTracker||r.trigger("adtimeout")})},r.vast.preroll=function(){r.ads.startLinearAdMode(),r.autoplay(!0);var e=r.vast.sources;r.src(e);var a=t.util.resolveURLTemplates([r.vastTracker.clickThroughURLTemplate],{CONTENTPLAYHEAD:r.vastTracker.progressFormated()})[0],n=document.createElement("a");n.className="vast-blocker",n.href=a,n.target="_blank",n.onclick=function(){var e=r.vastTracker.clickTrackingURLTemplate;e&&r.vastTracker.trackURLs(e)},r.vast.blocker=n,r.el().insertBefore(n,r.controlBar.el());var s=document.createElement("div");s.className="vast-skip-button",r.vast.skipButton=s,r.el().appendChild(s),r.on("timeupdate",r.vast.timeupdate),s.onclick=function(e){if((" "+r.vast.skipButton.className+" ").indexOf(" enabled ")>=0&&r.vast.tearDown(),void 0===Event.prototype.stopPropagation)return!1;e.stopPropagation()},r.one("ended",r.vast.tearDown)},r.vast.tearDown=function(){r.vast.skipButton.parentNode.removeChild(r.vast.skipButton),r.vast.blocker.parentNode.removeChild(r.vast.blocker),r.off("timeupdate",r.vast.timeupdate),r.off("ended",r.vast.tearDown),r.ads.endLinearAdMode()},r.vast.timeupdate=function(e){r.loadingSpinner.el().style.display="none";var t=Math.ceil(n.skip-r.currentTime());t>0?r.vast.skipButton.innerHTML="Skip in "+t+"...":-1===(" "+r.vast.skipButton.className+" ").indexOf(" enabled ")&&(r.vast.skipButton.className+=" enabled",r.vast.skipButton.innerHTML="Skip")},r.vast.createSourceObjects=function(e){for(var t={},a=["video/mp4","video/webm","video/ogv"],r=0;r<e.length;r++){var n=e[r].fileURL,s=e[r].mimeType;a.indexOf(s)>=0&&void 0===t[s]&&(t[s]=n)}for(var o=[],i=0;i<a.length;i++){var c=a[i];void 0!==t[c]&&o.push({type:c,src:t[c]})}return o}):r.trigger("adtimeout"):console.log("VAST requires videojs-contrib-ads")})}(window.videojs,window.DMVAST);