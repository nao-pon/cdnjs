// Response 0.3.0 | responsejs.com | MIT License
window.Response=function(j,g,f,s,K){function L(a){var b="scroll."+j,c="allLoaded."+j,e=/webkit\//i.test(f.navigator.userAgent);B(a,function(a){a instanceof Object||i("create @args must be object(s)");var h=M(ea).configure(a),g,f=h.verge,a=h.breakpoints;a.length&&(g=a[0]||a[1]||!1,o.ready(function(){function a(){h.reset().each(function(a){h[a].decideValue().updateDOM()}).trigger(c)}function d(){h.each(function(a){C(h[a].$,f)&&h[a].updateDOM()})}h.target().each(function(a,b){h[a]=M(h).prepareData(b);
(!e||C(h[a].$,f))&&h[a].updateDOM()});if(h.dynamic&&g<p)k.on("resize."+j,a);e&&(k.on(b,d),h.$.one(c,function(){k.off(b,d)}))}))});return l}function D(){D.on||(g.fn.dataset=m,g.fn.deletes=N,E(["inX","inY","inViewport"],function(a,b){g.fn[b]=function(a,e){return g(F(this,function(d){return!e===l[b](d,a)}))}}),D.on=1);return l}var l,n=s.documentElement,o=g(s),k=g(f),O="i"+j,i=function(a){throw"Error using Response."+(a||"");},fa=!!f.JSON&&!!JSON.parse,ga=function(a){a.setAttribute("data-a-b",j);return!!(a.dataset&&
a.dataset.aB===j)}(s.createElement(j)),G=g!==f.jQuery?g:function(a){return a instanceof g?a:g(a)},M=Object.create||function(a){function b(){}b.prototype=a;return new b},q=Array.isArray||g.isArray,t=function(a,b,c){for(var e=[],d=-1,h=a.length;d++<h;)d in a&&(e[d]=b.call(c,a[d]));return e},E=function(a,b){for(var c=-1,e=a.length;c++<e;)c in a&&b(c,a[c])},ha=/[^a-z0-9\-\_\.]/gi,ia=/([a-z])([A-Z])/g,ja=/-(.)/g,H=/^data-(.+)$/,P=/\s+/,ka=/\./g,la=function(a){return a.replace(H,"$1").replace(ja,function(a,
c){return c.toUpperCase()})},I=function(a){return"data-"+(a?a.replace(H,"$1").replace(ia,"$1-$2").toLowerCase():a)},Q=function(a){var b;return!a||"string"!==typeof a?a:"true"===a?!0:"false"===a?!1:"undefined"===a?K:"null"===a?null:isFinite(b=parseFloat(a))?b:a},R=function(a,b,c){g.each(b,function(b,d){a[b]=d||c?d:a[b]});return a},B=function(a,b){return q(a)?t(a,b):b(a)},m=function(a,b){var c=arguments.length,e=this&&1===this.nodeType?this:this[0]&&1===this[0].nodeType?this[0]:i("dataset @elem"),d,
h=!1,f;if(c){q(a)&&(h=!0,a=a[0]);if("string"===typeof a){a=I(a);if(1===c)return d=e.getAttribute(a),h?Q(d):d;if(this===e||2>(f=this.length||1))e.setAttribute(a,b);else for(;f--;)f in this&&m.apply(this[f],arguments)}else if(a instanceof Object)for(f in a)a.hasOwnProperty(f)&&m.call(this,f,a[f]);return this}if(ga)return e.dataset;d={};g.each(e.attributes,function(a,b){if(H.test(b.nodeName)){var e=la(b.nodeName);d[e]=b.nodeValue}});return d},N=function(a){if("string"===typeof a){var b=G(this);E(a.split(P),
function(a,e){e&&b.removeAttr(I(e))})}return this},u=function(a,b,c){return 2<arguments.length?m.call(a,b,c):m.call(a,b)},F=function(a,b,c){var e,d=[],h=a.length;for(e=0;e<h;e++)!c!==!b(a[e],e)&&d.push(a[e]);return d},v=f.screen.width,w=f.screen.height,p=Math.max(v,w),x=n.clientWidth?function(){return n.clientWidth}:function(){return k.width()},y=n.clientHeight?function(){return n.clientHeight}:function(){return k.height()},z=function(a,b,c){b=b||0;return!c?a>=b:a>=b&&a<=c},S=function(){var a=o.width()-
x();return 0<a?a:0},T=function(){var a=o.height()-y();return 0<a?a:0},U=function(){return f.pageXOffset||n.scrollLeft},V=function(){return f.pageYOffset||n.scrollTop},W=function(a,b,c,e,d){d="number"===typeof d?d:0;return c+e>=a-d&&a+b>=c-d},X=function(a,b){a=G(a);return a.length&&W(a.offset().left,a.width(),U(),x(),b)},Y=function(a,b){a=G(a);return a.length&&W(a.offset().top,a.height(),V(),y(),b)},C=function(a,b){return(!S()||X(a,b))&&(!T()||Y(a,b))},Z=function(a,b){return z(x(),a,b)},$=function(a,
b){return z(y(),a,b)},J={band:function(a,b){return z(v,a,b)},wave:function(a,b){return z(w,a,b)}},A=f.matchMedia||f.msMatchMedia,r=function(a){var b=f.devicePixelRatio;if(!arguments.length)return b||(r(2)?2:r(1.5)?1.5:r(1)?1:0);if(!isFinite(a))return!1;if(b)return b>=a;a="only all and (min--moz-device-pixel-ratio:"+a+")";return!A?!1:A(a).matches||A(a.replace("-moz-","")).matches},aa=function(a){var b={IMG:1,INPUT:1,SOURCE:3,EMBED:3,TRACK:3,IFRAME:5,AUDIO:5,VIDEO:5,SCRIPT:5}[a.tagName.toUpperCase()]||
-1;return 4>b?b:"string"===typeof a.getAttribute("src")?5:-5},ba=function(a,b,c){a&&b||i("store");E(a,function(a,d){if(c||!u(d,b))u(d,b,0<aa(d)?d.getAttribute("src"):g(d).html()||"")});return l},ca=function(a){a=q(a)?a:"string"===typeof a?a.split(P):[];return g(t(a,function(a){return"["+I(a).replace(ka,"\\.")+"]"}).join())},da=function(a,b){a&&q(b)||i("access");return t(b,m,a)},ea=function(){var a=[],b={width:[0,320,481,641,961,1025,1281],height:[0,481],ratio:[1,1.5,2]},c={width:Z,height:$};c["device-width"]=
J.band;c["device-height"]=J.wave;c["device-pixel-ratio"]=r;return{e:0,$:0,mode:0,breakpoints:0,prefix:0,prop:"width",keys:[],dynamic:0,values:[],method:0,verge:K,newValue:0,currValue:1,cut:function(a,b){b=b||p;return F(a,function(a){return a<=b})},valid8:function(){var a=this.breakpoints,d=this.prop;if(!a)return b[d]||b[d.split("-").pop()]||i("create @prop");q(a)||i("create @breakpoints");d=a.length;a=F(a,isFinite).sort(function(a,b){return a-b});return d===a.length?a:!1},reset:function(){a=[!0];
return this},memoize:function(b){"boolean"!==typeof a[b]&&(a[b]=this.method(b));return a[b]},configure:function(a){var b=this;R(b,a,!0);b.verge=isFinite(b.verge)?b.verge:Math.min(p,500);b.prefix=("string"===typeof b.prefix?b.prefix.toLowerCase().replace(ha,""):!1)||i("create @prefix");b.method=c[b.prop]||i("create @prop");b.dynamic="d"!==b.prop[0];b.breakpoints=b.cut(b.valid8());b.keys=t(b.breakpoints,function(a){return b.prefix+a});return b},target:function(){this.$=ca(this.keys);ba(this.$,O);this.keys.push(O);
return this},each:function(a){for(var b=this.$,c=-1;c++<b.length;)c in b&&a(c,b[c]);return b},decideValue:function(){for(var a=0,b=this.breakpoints,c=b.length,f=c;!a&&f--;)this.memoize(b[f])&&(a=this.values[f]);this.newValue=a||this.values[c];return this},prepareData:function(a){this.e=a;this.$=g(a);this.mode=aa(this.e);this.values=da(this.$,this.keys);return this.decideValue()},updateDOM:function(){if(this.currValue===this.newValue)return this;this.currValue=this.newValue;return 0<this.mode?this.e.setAttribute("src",
this.newValue):this.$.html(this.newValue)}}}();l={viewportW:x,viewportH:y,deviceW:v,deviceH:w,deviceMax:p,deviceMin:v+w-p,inX:X,inY:Y,inViewport:C,scrollX:U,scrollY:V,overflowX:S,overflowY:T,band:Z,wave:$,device:J,dpr:r,action:function(a){B(a,function(a){"function"===typeof a||i("action");o.ready(a);k.resize(a)});return this},dataset:u,deletes:function(a,b){return N.call(a,b)},route:B,merge:R,store:ba,target:ca,access:da,create:L,media:A,render:Q,decide:function(){i("decide: method depreciated")},
chain:D};o.ready(function(a){if(a=u(s.body,"responsejs"))a=fa?JSON.parse(a):g.parseJSON?g.parseJSON(a):{},a.create&&L(a.create)});return l}("Response",this.jQuery||this.Zepto,this,this.document);