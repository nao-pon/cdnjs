!function(e){e.extend(!0,window,{Slick:{DraggableGrouping:function(o){var r,n,l,s,i,a,t,d={},c=new Slick.Event;var p=[];function u(r,s){var i=s.attr("id").replace(n,""),d=!0;p.forEach(function(e,o,r){e.id==i&&(d=!1)}),d&&(l.forEach(function(t,d,c){if(t.id==i&&null!=t.grouping&&!e.isEmptyObject(t.grouping)){var u=e("<div id='"+n+t.id+"_entry' data-id='"+t.id+"' class='slick-dropped-grouping'>"),f=e("<div style='display: inline-flex'>"+s.text()+"</div>");f.appendTo(u);var h=e("<div class='slick-groupby-remove'>&nbsp;</div>");o.deleteIconCssClass&&h.addClass(o.deleteIconCssClass),o.deleteIconImage&&h.css("background","url("+o.deleteIconImage+") no-repeat center right"),o.deleteIconCssClass||o.deleteIconImage||h.addClass("slick-groupby-remove-image"),h.appendTo(u),e("</div>").appendTo(u),u.appendTo(r),b=t,p.push(b),g(),v=t.id,m=u,e("#"+n+v+"_entry >.slick-groupby-remove").on("click",function(){e(this).off("click"),function(e,o,r){r.remove();var n=[];l.forEach(function(e,o,r){n[e.id]=e}),function(e){for(var o,r,n=arguments,l=n.length;l>1&&e.length;)for(o=n[--l];-1!=(r=e.indexOf(o));)e.splice(r,1)}(p,n[e]),0==p.length&&a.show(),g()}(v,0,m)})}var v,m,b}),t.css("display","block"))}function g(){if(0!=p.length){var e=[];p.forEach(function(o,r,n){e.push(o.grouping)}),s.setGrouping(e),c.notify({groupColumns:e})}else s.setGrouping([])}e.extend(this,{init:function(c){o=e.extend(!0,{},d,o),n=(r=c).getUID(),l=r.getColumns(),s=r.getData(),i=e(r.getPreHeaderPanel());var f=o.dropPlaceHolderText||"Drop a column header here to group by the column";i.html("<div class='slick-placeholder'>"+f+"</div><div class='slick-group-toggle-all expanded' style='display:none'></div>"),a=i.find(".slick-placeholder"),t=i.find(".slick-group-toggle-all"),i.droppable({activeClass:"ui-state-default",hoverClass:"ui-state-hover",accept:":not(.ui-sortable-helper)",deactivate:function(e,o){i.removeClass("slick-header-column-denied")},drop:function(e,o){u(this,o.draggable)},over:function(e,o){var r=o.draggable.attr("id").replace(n,"");l.forEach(function(e,o,n){e.id==r&&null==e.grouping&&i.addClass("slick-header-column-denied")})}}),i.sortable({items:"div.slick-dropped-grouping",cursor:"default",tolerance:"pointer",helper:"clone",update:function(o,r){for(var n=e(this).sortable("toArray",{attribute:"data-id"}),l=[],s=0,i=n.length;s<i;s++)for(var a=0,t=p.length;a<t;a++)if(p[a].id==n[s]){l.push(p[a]);break}p=l,g()}}),i.html(),t.on("click",function(e){this.classList.contains("collapsed")?(this.classList.remove("collapsed"),this.classList.add("expanded"),s.expandAllGroups()):(this.classList.add("collapsed"),this.classList.remove("expanded"),s.collapseAllGroups())}),r.onHeaderCellRendered.subscribe(function(r,n){var l=n.column,s=n.node;if(!e.isEmptyObject(l.grouping)){var i=e("<span class='slick-column-groupable' />");o.groupIconCssClass&&i.addClass(o.groupIconCssClass),o.groupIconImage&&i.css("background","url("+o.groupIconImage+") no-repeat center center"),e(s).css("cursor","pointer").append(i)}});for(var h=0;h<l.length;h++){var v=l[h].field;r.updateColumnHeader(v)}},destroy:function(){c.unsubscribe()},onGroupChanged:c,setDroppedGroups:function(o){groupingInfos=o instanceof Array?o:[o],a.hide();for(var n=0;n<groupingInfos.length;n++){var l=e(r.getHeaderColumn(groupingInfos[n]));u(i,l)}},clearDroppedGroups:function(){p=[],g(),c.notify({groupColumns:[]}),i.find(".slick-dropped-grouping").remove(),t.css("display","none"),a.show()},getSetupColumnReorder:function(o,r,n,l,s,i,a,t,d){r.filter(":ui-sortable").sortable("destroy");var c=e(o.getPreHeaderPanel());r.sortable({distance:3,cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",forcePlaceholderSize:!0,appendTo:"body",start:function(o,r){e(r.helper).addClass("slick-header-column-active"),c.find(".slick-placeholder").show(),c.find(".slick-dropped-grouping").hide()},beforeStop:function(o,r){e(r.helper).removeClass("slick-header-column-active");var n=c.find(".slick-dropped-grouping").length;n>0&&(c.find(".slick-placeholder").hide(),c.find(".slick-dropped-grouping").show())},stop:function(n){if(o.getEditorLock().commitCurrentEdit()){for(var c=r.sortable("toArray"),p=[],u=0;u<c.length;u++)p.push(i[a(c[u].replace(t,""))]);l(p),d(o.onColumnsReordered,{grid:o}),n.stopPropagation(),s()}else e(this).sortable("cancel")}})}})}}})}(jQuery);