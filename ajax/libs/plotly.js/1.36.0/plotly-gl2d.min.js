/**
* plotly.js (gl2d - minified) v1.36.0
* Copyright 2012-2018, Plotly, Inc.
* All rights reserved.
* Licensed under the MIT license
*/
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Plotly=t()}}(function(){var t=function(t){var e;return function(r){return e||t(e={exports:{},parent:r},e.exports),e.exports}},e=t(function(t,e){"use strict";var n,a,i,o,l=Object.prototype.isPrototypeOf,s=Object.defineProperty,u={configurable:!0,enumerable:!1,writable:!0,value:void 0};n=function(t,e){if(DE(t),null===e||QE(e))return t;throw new TypeError("Prototype must be null or an object")},t.exports=(a=function(){var t,e=Object.create(null),r={},n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(n){try{(t=n.set).call(e,r)}catch(t){}if(Object.getPrototypeOf(e)===r)return{set:t,level:2}}return e.__proto__=r,Object.getPrototypeOf(e)===r?{level:2}:((e={}).__proto__=r,Object.getPrototypeOf(e)===r&&{level:1})}())?(2===a.level?a.set?(o=a.set,i=function(t,e){return o.call(n(t,e),e),t}):i=function(t,e){return n(t,e).__proto__=e,t}:i=function t(e,r){var a;return n(e,r),(a=l.call(t.nullPolyfill,e))&&delete t.nullPolyfill.__proto__,null===r&&(r=t.nullPolyfill),e.__proto__=r,a&&s(t.nullPolyfill,"__proto__",u),e},Object.defineProperty(i,"level",{configurable:!1,enumerable:!1,writable:!1,value:a.level})):null,r({})}),r=t(function(t,r){"use strict";var n,a,i,o,l=Object.create;ZE()||(n=e({})),t.exports=n?1!==n.level?l:(a={},i={},o={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(t){i[t]="__proto__"!==t?o:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(a,i),Object.defineProperty(n,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:a}),function(t,e){return l(null===t?a:t,e)}):l}),n={exports:{}};!function(){var t={version:"3.5.17"},e=[].slice,r=function(t){return e.call(t)},a=this.document;function i(t){return t&&(t.ownerDocument||t.document||t).documentElement}function o(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(a)try{r(a.documentElement.childNodes)[0].nodeType}catch(t){r=function(t){for(var e=t.length,r=new Array(e);e--;)r[e]=t[e];return r}}if(Date.now||(Date.now=function(){return+new Date}),a)try{a.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var l=this.Element.prototype,s=l.setAttribute,u=l.setAttributeNS,c=this.CSSStyleDeclaration.prototype,f=c.setProperty;l.setAttribute=function(t,e){s.call(this,t,e+"")},l.setAttributeNS=function(t,e,r){u.call(this,t,e,r+"")},c.setProperty=function(t,e,r){f.call(this,t,e+"",r)}}function h(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function d(t){return null===t?NaN:+t}function p(t){return!isNaN(t)}function g(t){return{left:function(e,r,n,a){for(arguments.length<3&&(n=0),arguments.length<4&&(a=e.length);n<a;){var i=n+a>>>1;t(e[i],r)<0?n=i+1:a=i}return n},right:function(e,r,n,a){for(arguments.length<3&&(n=0),arguments.length<4&&(a=e.length);n<a;){var i=n+a>>>1;t(e[i],r)>0?a=i:n=i+1}return n}}}t.ascending=h,t.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},t.min=function(t,e){var r,n,a=-1,i=t.length;if(1===arguments.length){for(;++a<i;)if(null!=(n=t[a])&&n>=n){r=n;break}for(;++a<i;)null!=(n=t[a])&&r>n&&(r=n)}else{for(;++a<i;)if(null!=(n=e.call(t,t[a],a))&&n>=n){r=n;break}for(;++a<i;)null!=(n=e.call(t,t[a],a))&&r>n&&(r=n)}return r},t.max=function(t,e){var r,n,a=-1,i=t.length;if(1===arguments.length){for(;++a<i;)if(null!=(n=t[a])&&n>=n){r=n;break}for(;++a<i;)null!=(n=t[a])&&n>r&&(r=n)}else{for(;++a<i;)if(null!=(n=e.call(t,t[a],a))&&n>=n){r=n;break}for(;++a<i;)null!=(n=e.call(t,t[a],a))&&n>r&&(r=n)}return r},t.extent=function(t,e){var r,n,a,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(n=t[i])&&n>=n){r=a=n;break}for(;++i<o;)null!=(n=t[i])&&(r>n&&(r=n),a<n&&(a=n))}else{for(;++i<o;)if(null!=(n=e.call(t,t[i],i))&&n>=n){r=a=n;break}for(;++i<o;)null!=(n=e.call(t,t[i],i))&&(r>n&&(r=n),a<n&&(a=n))}return[r,a]},t.sum=function(t,e){var r,n=0,a=t.length,i=-1;if(1===arguments.length)for(;++i<a;)p(r=+t[i])&&(n+=r);else for(;++i<a;)p(r=+e.call(t,t[i],i))&&(n+=r);return n},t.mean=function(t,e){var r,n=0,a=t.length,i=-1,o=a;if(1===arguments.length)for(;++i<a;)p(r=d(t[i]))?n+=r:--o;else for(;++i<a;)p(r=d(e.call(t,t[i],i)))?n+=r:--o;if(o)return n/o},t.quantile=function(t,e){var r=(t.length-1)*e+1,n=Math.floor(r),a=+t[n-1],i=r-n;return i?a+i*(t[n]-a):a},t.median=function(e,r){var n,a=[],i=e.length,o=-1;if(1===arguments.length)for(;++o<i;)p(n=d(e[o]))&&a.push(n);else for(;++o<i;)p(n=d(r.call(e,e[o],o)))&&a.push(n);if(a.length)return t.quantile(a.sort(h),.5)},t.variance=function(t,e){var r,n,a=t.length,i=0,o=0,l=-1,s=0;if(1===arguments.length)for(;++l<a;)p(r=d(t[l]))&&(o+=(n=r-i)*(r-(i+=n/++s)));else for(;++l<a;)p(r=d(e.call(t,t[l],l)))&&(o+=(n=r-i)*(r-(i+=n/++s)));if(s>1)return o/(s-1)},t.deviation=function(){var e=t.variance.apply(this,arguments);return e?Math.sqrt(e):e};var v=g(h);function m(t){return t.length}t.bisectLeft=v.left,t.bisect=t.bisectRight=v.right,t.bisector=function(t){return g(1===t.length?function(e,r){return h(t(e),r)}:t)},t.shuffle=function(t,e,r){(i=arguments.length)<3&&(r=t.length,i<2&&(e=0));for(var n,a,i=r-e;i;)a=Math.random()*i--|0,n=t[i+e],t[i+e]=t[a+e],t[a+e]=n;return t},t.permute=function(t,e){for(var r=e.length,n=new Array(r);r--;)n[r]=t[e[r]];return n},t.pairs=function(t){for(var e=0,r=t.length-1,n=t[0],a=new Array(r<0?0:r);e<r;)a[e]=[n,n=t[++e]];return a},t.transpose=function(e){if(!(i=e.length))return[];for(var r=-1,n=t.min(e,m),a=new Array(n);++r<n;)for(var i,o=-1,l=a[r]=new Array(i);++o<i;)l[o]=e[o][r];return a},t.zip=function(){return t.transpose(arguments)},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e},t.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},t.entries=function(t){var e=[];for(var r in t)e.push({key:r,value:t[r]});return e},t.merge=function(t){for(var e,r,n,a=t.length,i=-1,o=0;++i<a;)o+=t[i].length;for(r=new Array(o);--a>=0;)for(e=(n=t[a]).length;--e>=0;)r[--o]=n[e];return r};var y=Math.abs;function x(t,e){for(var r in e)Object.defineProperty(t.prototype,r,{value:e[r],enumerable:!1})}function b(){this._=Object.create(null)}t.range=function(t,e,r){if(arguments.length<3&&(r=1,arguments.length<2&&(e=t,t=0)),(e-t)/r==1/0)throw new Error("infinite range");var n,a=[],i=function(t){var e=1;for(;t*e%1;)e*=10;return e}(y(r)),o=-1;if(t*=i,e*=i,(r*=i)<0)for(;(n=t+r*++o)>e;)a.push(n/i);else for(;(n=t+r*++o)<e;)a.push(n/i);return a},t.map=function(t,e){var r=new b;if(t instanceof b)t.forEach(function(t,e){r.set(t,e)});else if(Array.isArray(t)){var n,a=-1,i=t.length;if(1===arguments.length)for(;++a<i;)r.set(a,t[a]);else for(;++a<i;)r.set(e.call(t,n=t[a],a),n)}else for(var o in t)r.set(o,t[o]);return r};var _="__proto__",w="\0";function A(t){return(t+="")===_||t[0]===w?w+t:t}function M(t){return(t+="")[0]===w?t.slice(1):t}function T(t){return A(t)in this._}function k(t){return(t=A(t))in this._&&delete this._[t]}function E(){var t=[];for(var e in this._)t.push(M(e));return t}function C(){var t=0;for(var e in this._)++t;return t}function S(){for(var t in this._)return!1;return!0}function L(){this._=Object.create(null)}function O(t){return t}function D(t,e,r){return function(){var n=r.apply(e,arguments);return n===e?t:n}}function R(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var r=0,n=P.length;r<n;++r){var a=P[r]+e;if(a in t)return a}}x(b,{has:T,get:function(t){return this._[A(t)]},set:function(t,e){return this._[A(t)]=e},remove:k,keys:E,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:M(e),value:this._[e]});return t},size:C,empty:S,forEach:function(t){for(var e in this._)t.call(this,M(e),this._[e])}}),t.nest=function(){var e,r,n={},a=[],i=[];function o(t,i,l){if(l>=a.length)return r?r.call(n,i):e?i.sort(e):i;for(var s,u,c,f,h=-1,d=i.length,p=a[l++],g=new b;++h<d;)(f=g.get(s=p(u=i[h])))?f.push(u):g.set(s,[u]);return t?(u=t(),c=function(e,r){u.set(e,o(t,r,l))}):(u={},c=function(e,r){u[e]=o(t,r,l)}),g.forEach(c),u}return n.map=function(t,e){return o(e,t,0)},n.entries=function(e){return function t(e,r){if(r>=a.length)return e;var n=[],o=i[r++];return e.forEach(function(e,a){n.push({key:e,values:t(a,r)})}),o?n.sort(function(t,e){return o(t.key,e.key)}):n}(o(t.map,e,0),0)},n.key=function(t){return a.push(t),n},n.sortKeys=function(t){return i[a.length-1]=t,n},n.sortValues=function(t){return e=t,n},n.rollup=function(t){return r=t,n},n},t.set=function(t){var e=new L;if(t)for(var r=0,n=t.length;r<n;++r)e.add(t[r]);return e},x(L,{has:T,add:function(t){return this._[A(t+="")]=!0,t},remove:k,values:E,size:C,empty:S,forEach:function(t){for(var e in this._)t.call(this,M(e))}}),t.behavior={},t.rebind=function(t,e){for(var r,n=1,a=arguments.length;++n<a;)t[r=arguments[n]]=D(t,e,e[r]);return t};var P=["webkit","ms","moz","Moz","o","O"];function I(){}function B(){}function F(t){var e=[],r=new b;function n(){for(var r,n=e,a=-1,i=n.length;++a<i;)(r=n[a].on)&&r.apply(this,arguments);return t}return n.on=function(n,a){var i,o=r.get(n);return arguments.length<2?o&&o.on:(o&&(o.on=null,e=e.slice(0,i=e.indexOf(o)).concat(e.slice(i+1)),r.remove(n)),a&&e.push(r.set(n,{on:a})),t)},n}function z(){t.event.preventDefault()}function N(){for(var e,r=t.event;e=r.sourceEvent;)r=e;return r}function j(e){for(var r=new B,n=0,a=arguments.length;++n<a;)r[arguments[n]]=F(r);return r.of=function(n,a){return function(i){try{var o=i.sourceEvent=t.event;i.target=e,t.event=i,r[i.type].apply(n,a)}finally{t.event=o}}},r}t.dispatch=function(){for(var t=new B,e=-1,r=arguments.length;++e<r;)t[arguments[e]]=F(t);return t},B.prototype.on=function(t,e){var r=t.indexOf("."),n="";if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t)return arguments.length<2?this[t].on(n):this[t].on(n,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(n,null);return this}},t.event=null,t.requote=function(t){return t.replace(U,"\\$&")};var U=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,V={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)t[r]=e[r]};function H(t){return V(t,Y),t}var q=function(t,e){return e.querySelector(t)},G=function(t,e){return e.querySelectorAll(t)},X=function(t,e){var r=t.matches||t[R(t,"matchesSelector")];return(X=function(t,e){return r.call(t,e)})(t,e)};"function"==typeof Sizzle&&(q=function(t,e){return Sizzle(t,e)[0]||null},G=Sizzle,X=Sizzle.matchesSelector),t.selection=function(){return t.select(a.documentElement)};var Y=t.selection.prototype=[];function W(t){return"function"==typeof t?t:function(){return q(t,this)}}function Z(t){return"function"==typeof t?t:function(){return G(t,this)}}Y.select=function(t){var e,r,n,a,i=[];t=W(t);for(var o=-1,l=this.length;++o<l;){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=-1,u=n.length;++s<u;)(a=n[s])?(e.push(r=t.call(a,a.__data__,s,o)),r&&"__data__"in a&&(r.__data__=a.__data__)):e.push(null)}return H(i)},Y.selectAll=function(t){var e,n,a=[];t=Z(t);for(var i=-1,o=this.length;++i<o;)for(var l=this[i],s=-1,u=l.length;++s<u;)(n=l[s])&&(a.push(e=r(t.call(n,n.__data__,s,i))),e.parentNode=n);return H(a)};var J="http://www.w3.org/1999/xhtml",Q={svg:"http://www.w3.org/2000/svg",xhtml:J,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $(e,r){return e=t.ns.qualify(e),null==r?e.local?function(){this.removeAttributeNS(e.space,e.local)}:function(){this.removeAttribute(e)}:"function"==typeof r?e.local?function(){var t=r.apply(this,arguments);null==t?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}:function(){var t=r.apply(this,arguments);null==t?this.removeAttribute(e):this.setAttribute(e,t)}:e.local?function(){this.setAttributeNS(e.space,e.local,r)}:function(){this.setAttribute(e,r)}}function K(t){return t.trim().replace(/\s+/g," ")}function tt(e){return new RegExp("(?:^|\\s+)"+t.requote(e)+"(?:\\s+|$)","g")}function et(t){return(t+"").trim().split(/^|\s+/)}function rt(t,e){var r=(t=et(t).map(nt)).length;return"function"==typeof e?function(){for(var n=-1,a=e.apply(this,arguments);++n<r;)t[n](this,a)}:function(){for(var n=-1;++n<r;)t[n](this,e)}}function nt(t){var e=tt(t);return function(r,n){if(a=r.classList)return n?a.add(t):a.remove(t);var a=r.getAttribute("class")||"";n?(e.lastIndex=0,e.test(a)||r.setAttribute("class",K(a+" "+t))):r.setAttribute("class",K(a.replace(e," ")))}}function at(t,e,r){return null==e?function(){this.style.removeProperty(t)}:"function"==typeof e?function(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,r)}:function(){this.style.setProperty(t,e,r)}}function it(t,e){return null==e?function(){delete this[t]}:"function"==typeof e?function(){var r=e.apply(this,arguments);null==r?delete this[t]:this[t]=r}:function(){this[t]=e}}function ot(e){return"function"==typeof e?e:(e=t.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,r=this.namespaceURI;return r===J&&t.documentElement.namespaceURI===J?t.createElement(e):t.createElementNS(r,e)}}function lt(){var t=this.parentNode;t&&t.removeChild(this)}function st(t){return{__data__:t}}function ut(t){return function(){return X(this,t)}}function ct(t,e){for(var r=0,n=t.length;r<n;r++)for(var a,i=t[r],o=0,l=i.length;o<l;o++)(a=i[o])&&e(a,o,r);return t}function ft(t){return V(t,ht),t}t.ns={prefix:Q,qualify:function(t){var e=t.indexOf(":"),r=t;return e>=0&&"xmlns"!==(r=t.slice(0,e))&&(t=t.slice(e+1)),Q.hasOwnProperty(r)?{space:Q[r],local:t}:t}},Y.attr=function(e,r){if(arguments.length<2){if("string"==typeof e){var n=this.node();return(e=t.ns.qualify(e)).local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(r in e)this.each($(r,e[r]));return this}return this.each($(e,r))},Y.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var r=this.node(),n=(t=et(t)).length,a=-1;if(e=r.classList){for(;++a<n;)if(!e.contains(t[a]))return!1}else for(e=r.getAttribute("class");++a<n;)if(!tt(t[a]).test(e))return!1;return!0}for(e in t)this.each(rt(e,t[e]));return this}return this.each(rt(t,e))},Y.style=function(t,e,r){var n=arguments.length;if(n<3){if("string"!=typeof t){for(r in n<2&&(e=""),t)this.each(at(r,t[r],e));return this}if(n<2){var a=this.node();return o(a).getComputedStyle(a,null).getPropertyValue(t)}r=""}return this.each(at(t,e,r))},Y.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(it(e,t[e]));return this}return this.each(it(t,e))},Y.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Y.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Y.append=function(t){return t=ot(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Y.insert=function(t,e){return t=ot(t),e=W(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Y.remove=function(){return this.each(lt)},Y.data=function(t,e){var r,n,a=-1,i=this.length;if(!arguments.length){for(t=new Array(i=(r=this[0]).length);++a<i;)(n=r[a])&&(t[a]=n.__data__);return t}function o(t,r){var n,a,i,o=t.length,c=r.length,f=Math.min(o,c),h=new Array(c),d=new Array(c),p=new Array(o);if(e){var g,v=new b,m=new Array(o);for(n=-1;++n<o;)(a=t[n])&&(v.has(g=e.call(a,a.__data__,n))?p[n]=a:v.set(g,a),m[n]=g);for(n=-1;++n<c;)(a=v.get(g=e.call(r,i=r[n],n)))?!0!==a&&(h[n]=a,a.__data__=i):d[n]=st(i),v.set(g,!0);for(n=-1;++n<o;)n in m&&!0!==v.get(m[n])&&(p[n]=t[n])}else{for(n=-1;++n<f;)a=t[n],i=r[n],a?(a.__data__=i,h[n]=a):d[n]=st(i);for(;n<c;++n)d[n]=st(r[n]);for(;n<o;++n)p[n]=t[n]}d.update=h,d.parentNode=h.parentNode=p.parentNode=t.parentNode,l.push(d),s.push(h),u.push(p)}var l=ft([]),s=H([]),u=H([]);if("function"==typeof t)for(;++a<i;)o(r=this[a],t.call(r,r.parentNode.__data__,a));else for(;++a<i;)o(r=this[a],t);return s.enter=function(){return l},s.exit=function(){return u},s},Y.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Y.filter=function(t){var e,r,n,a=[];"function"!=typeof t&&(t=ut(t));for(var i=0,o=this.length;i<o;i++){a.push(e=[]),e.parentNode=(r=this[i]).parentNode;for(var l=0,s=r.length;l<s;l++)(n=r[l])&&t.call(n,n.__data__,l,i)&&e.push(n)}return H(a)},Y.order=function(){for(var t=-1,e=this.length;++t<e;)for(var r,n=this[t],a=n.length-1,i=n[a];--a>=0;)(r=n[a])&&(i&&i!==r.nextSibling&&i.parentNode.insertBefore(r,i),i=r);return this},Y.sort=function(t){t=function(t){arguments.length||(t=h);return function(e,r){return e&&r?t(e.__data__,r.__data__):!e-!r}}.apply(this,arguments);for(var e=-1,r=this.length;++e<r;)this[e].sort(t);return this.order()},Y.each=function(t){return ct(this,function(e,r,n){t.call(e,e.__data__,r,n)})},Y.call=function(t){var e=r(arguments);return t.apply(e[0]=this,e),this},Y.empty=function(){return!this.node()},Y.node=function(){for(var t=0,e=this.length;t<e;t++)for(var r=this[t],n=0,a=r.length;n<a;n++){var i=r[n];if(i)return i}return null},Y.size=function(){var t=0;return ct(this,function(){++t}),t};var ht=[];function dt(e,n,a){var i="__on"+e,o=e.indexOf("."),l=gt;o>0&&(e=e.slice(0,o));var s=pt.get(e);function u(){var t=this[i];t&&(this.removeEventListener(e,t,t.$),delete this[i])}return s&&(e=s,l=vt),o?n?function(){var t=l(n,r(arguments));u.call(this),this.addEventListener(e,this[i]=t,t.$=a),t._=n}:u:n?I:function(){var r,n=new RegExp("^__on([^.]+)"+t.requote(e)+"$");for(var a in this)if(r=a.match(n)){var i=this[a];this.removeEventListener(r[1],i,i.$),delete this[a]}}}t.selection.enter=ft,t.selection.enter.prototype=ht,ht.append=Y.append,ht.empty=Y.empty,ht.node=Y.node,ht.call=Y.call,ht.size=Y.size,ht.select=function(t){for(var e,r,n,a,i,o=[],l=-1,s=this.length;++l<s;){n=(a=this[l]).update,o.push(e=[]),e.parentNode=a.parentNode;for(var u=-1,c=a.length;++u<c;)(i=a[u])?(e.push(n[u]=r=t.call(a.parentNode,i.__data__,u,l)),r.__data__=i.__data__):e.push(null)}return H(o)},ht.insert=function(t,e){var r,n,a;return arguments.length<2&&(r=this,e=function(t,e,i){var o,l=r[i].update,s=l.length;for(i!=a&&(a=i,n=0),e>=n&&(n=e+1);!(o=l[n])&&++n<s;);return o}),Y.insert.call(this,t,e)},t.select=function(t){var e;return"string"==typeof t?(e=[q(t,a)]).parentNode=a.documentElement:(e=[t]).parentNode=i(t),H([e])},t.selectAll=function(t){var e;return"string"==typeof t?(e=r(G(t,a))).parentNode=a.documentElement:(e=r(t)).parentNode=null,H([e])},Y.on=function(t,e,r){var n=arguments.length;if(n<3){if("string"!=typeof t){for(r in n<2&&(e=!1),t)this.each(dt(r,t[r],e));return this}if(n<2)return(n=this.node()["__on"+t])&&n._;r=!1}return this.each(dt(t,e,r))};var pt=t.map({mouseenter:"mouseover",mouseleave:"mouseout"});function gt(e,r){return function(n){var a=t.event;t.event=n,r[0]=this.__data__;try{e.apply(this,r)}finally{t.event=a}}}function vt(t,e){var r=gt(t,e);return function(t){var e=t.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||r.call(this,t)}}a&&pt.forEach(function(t){"on"+t in a&&pt.remove(t)});var mt,yt=0;function xt(e){var r=".dragsuppress-"+ ++yt,n="click"+r,a=t.select(o(e)).on("touchmove"+r,z).on("dragstart"+r,z).on("selectstart"+r,z);if(null==mt&&(mt=!("onselectstart"in e)&&R(e.style,"userSelect")),mt){var l=i(e).style,s=l[mt];l[mt]="none"}return function(t){if(a.on(r,null),mt&&(l[mt]=s),t){var e=function(){a.on(n,null)};a.on(n,function(){z(),e()},!0),setTimeout(e,0)}}}t.mouse=function(t){return _t(t,N())};var bt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function _t(e,r){r.changedTouches&&(r=r.changedTouches[0]);var n=e.ownerSVGElement||e;if(n.createSVGPoint){var a=n.createSVGPoint();if(bt<0){var i=o(e);if(i.scrollX||i.scrollY){var l=(n=t.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();bt=!(l.f||l.e),n.remove()}}return bt?(a.x=r.pageX,a.y=r.pageY):(a.x=r.clientX,a.y=r.clientY),[(a=a.matrixTransform(e.getScreenCTM().inverse())).x,a.y]}var s=e.getBoundingClientRect();return[r.clientX-s.left-e.clientLeft,r.clientY-s.top-e.clientTop]}function wt(){return t.event.changedTouches[0].identifier}t.touch=function(t,e,r){if(arguments.length<3&&(r=e,e=N().changedTouches),e)for(var n,a=0,i=e.length;a<i;++a)if((n=e[a]).identifier===r)return _t(t,n)},t.behavior.drag=function(){var e=j(i,"drag","dragstart","dragend"),r=null,n=l(I,t.mouse,o,"mousemove","mouseup"),a=l(wt,t.touch,O,"touchmove","touchend");function i(){this.on("mousedown.drag",n).on("touchstart.drag",a)}function l(n,a,i,o,l){return function(){var s,u=t.event.target.correspondingElement||t.event.target,c=this.parentNode,f=e.of(this,arguments),h=0,d=n(),p=".drag"+(null==d?"":"-"+d),g=t.select(i(u)).on(o+p,function(){var t,e,r=a(c,d);if(!r)return;t=r[0]-m[0],e=r[1]-m[1],h|=t|e,m=r,f({type:"drag",x:r[0]+s[0],y:r[1]+s[1],dx:t,dy:e})}).on(l+p,function(){if(!a(c,d))return;g.on(o+p,null).on(l+p,null),v(h),f({type:"dragend"})}),v=xt(u),m=a(c,d);s=r?[(s=r.apply(this,arguments)).x-m[0],s.y-m[1]]:[0,0],f({type:"dragstart"})}}return i.origin=function(t){return arguments.length?(r=t,i):r},t.rebind(i,e,"on")},t.touches=function(t,e){return arguments.length<2&&(e=N().touches),e?r(e).map(function(e){var r=_t(t,e);return r.identifier=e.identifier,r}):[]};var At=1e-6,Mt=At*At,Tt=Math.PI,kt=2*Tt,Et=kt-At,Ct=Tt/2,St=Tt/180,Lt=180/Tt;function Ot(t){return t>0?1:t<0?-1:0}function Dt(t,e,r){return(e[0]-t[0])*(r[1]-t[1])-(e[1]-t[1])*(r[0]-t[0])}function Rt(t){return t>1?0:t<-1?Tt:Math.acos(t)}function Pt(t){return t>1?Ct:t<-1?-Ct:Math.asin(t)}function It(t){return((t=Math.exp(t))+1/t)/2}function Bt(t){return(t=Math.sin(t/2))*t}var Ft=Math.SQRT2;t.interpolateZoom=function(t,e){var r,n,a=t[0],i=t[1],o=t[2],l=e[0],s=e[1],u=e[2],c=l-a,f=s-i,h=c*c+f*f;if(h<Mt)n=Math.log(u/o)/Ft,r=function(t){return[a+t*c,i+t*f,o*Math.exp(Ft*t*n)]};else{var d=Math.sqrt(h),p=(u*u-o*o+4*h)/(2*o*2*d),g=(u*u-o*o-4*h)/(2*u*2*d),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);n=(m-v)/Ft,r=function(t){var e,r=t*n,l=It(v),s=o/(2*d)*(l*(e=Ft*r+v,((e=Math.exp(2*e))-1)/(e+1))-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[a+s*c,i+s*f,o*l/It(Ft*r+v)]}}return r.duration=1e3*n,r},t.behavior.zoom=function(){var e,r,n,i,l,s,u,c,f,h={x:0,y:0,k:1},d=[960,500],p=jt,g=250,v=0,m="mousedown.zoom",y="mousemove.zoom",x="mouseup.zoom",b="touchstart.zoom",_=j(w,"zoomstart","zoom","zoomend");function w(t){t.on(m,O).on(Nt+".zoom",R).on("dblclick.zoom",P).on(b,D)}function A(t){return[(t[0]-h.x)/h.k,(t[1]-h.y)/h.k]}function M(t){h.k=Math.max(p[0],Math.min(p[1],t))}function T(t,e){e=function(t){return[t[0]*h.k+h.x,t[1]*h.k+h.y]}(e),h.x+=t[0]-e[0],h.y+=t[1]-e[1]}function k(e,n,a,i){e.__chart__={x:h.x,y:h.y,k:h.k},M(Math.pow(2,i)),T(r=n,a),e=t.select(e),g>0&&(e=e.transition().duration(g)),e.call(w.event)}function E(){u&&u.domain(s.range().map(function(t){return(t-h.x)/h.k}).map(s.invert)),f&&f.domain(c.range().map(function(t){return(t-h.y)/h.k}).map(c.invert))}function C(t){v++||t({type:"zoomstart"})}function S(t){E(),t({type:"zoom",scale:h.k,translate:[h.x,h.y]})}function L(t){--v||(t({type:"zoomend"}),r=null)}function O(){var e=this,r=_.of(e,arguments),n=0,a=t.select(o(e)).on(y,function(){n=1,T(t.mouse(e),i),S(r)}).on(x,function(){a.on(y,null).on(x,null),l(n),L(r)}),i=A(t.mouse(e)),l=xt(e);ll.call(e),C(r)}function D(){var e,r=this,n=_.of(r,arguments),a={},i=0,o=".zoom-"+t.event.changedTouches[0].identifier,s="touchmove"+o,u="touchend"+o,c=[],f=t.select(r),d=xt(r);function p(){var n=t.touches(r);return e=h.k,n.forEach(function(t){t.identifier in a&&(a[t.identifier]=A(t))}),n}function g(){var e=t.event.target;t.select(e).on(s,v).on(u,y),c.push(e);for(var n=t.event.changedTouches,o=0,f=n.length;o<f;++o)a[n[o].identifier]=null;var d=p(),g=Date.now();if(1===d.length){if(g-l<500){var m=d[0];k(r,m,a[m.identifier],Math.floor(Math.log(h.k)/Math.LN2)+1),z()}l=g}else if(d.length>1){m=d[0];var x=d[1],b=m[0]-x[0],_=m[1]-x[1];i=b*b+_*_}}function v(){var o,s,u,c,f=t.touches(r);ll.call(r);for(var h=0,d=f.length;h<d;++h,c=null)if(u=f[h],c=a[u.identifier]){if(s)break;o=u,s=c}if(c){var p=(p=u[0]-o[0])*p+(p=u[1]-o[1])*p,g=i&&Math.sqrt(p/i);o=[(o[0]+u[0])/2,(o[1]+u[1])/2],s=[(s[0]+c[0])/2,(s[1]+c[1])/2],M(g*e)}l=null,T(o,s),S(n)}function y(){if(t.event.touches.length){for(var e=t.event.changedTouches,r=0,i=e.length;r<i;++r)delete a[e[r].identifier];for(var l in a)return void p()}t.selectAll(c).on(o,null),f.on(m,O).on(b,D),d(),L(n)}g(),C(n),f.on(m,null).on(b,g)}function R(){var a=_.of(this,arguments);i?clearTimeout(i):(ll.call(this),e=A(r=n||t.mouse(this)),C(a)),i=setTimeout(function(){i=null,L(a)},50),z(),M(Math.pow(2,.002*zt())*h.k),T(r,e),S(a)}function P(){var e=t.mouse(this),r=Math.log(h.k)/Math.LN2;k(this,e,A(e),t.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)}return Nt||(Nt="onwheel"in a?(zt=function(){return-t.event.deltaY*(t.event.deltaMode?120:1)},"wheel"):"onmousewheel"in a?(zt=function(){return t.event.wheelDelta},"mousewheel"):(zt=function(){return-t.event.detail},"MozMousePixelScroll")),w.event=function(e){e.each(function(){var e=_.of(this,arguments),n=h;cl?t.select(this).transition().each("start.zoom",function(){h=this.__chart__||{x:0,y:0,k:1},C(e)}).tween("zoom:zoom",function(){var a=d[0],i=d[1],o=r?r[0]:a/2,l=r?r[1]:i/2,s=t.interpolateZoom([(o-h.x)/h.k,(l-h.y)/h.k,a/h.k],[(o-n.x)/n.k,(l-n.y)/n.k,a/n.k]);return function(t){var r=s(t),n=a/r[2];this.__chart__=h={x:o-r[0]*n,y:l-r[1]*n,k:n},S(e)}}).each("interrupt.zoom",function(){L(e)}).each("end.zoom",function(){L(e)}):(this.__chart__=h,C(e),S(e),L(e))})},w.translate=function(t){return arguments.length?(h={x:+t[0],y:+t[1],k:h.k},E(),w):[h.x,h.y]},w.scale=function(t){return arguments.length?(h={x:h.x,y:h.y,k:null},M(+t),E(),w):h.k},w.scaleExtent=function(t){return arguments.length?(p=null==t?jt:[+t[0],+t[1]],w):p},w.center=function(t){return arguments.length?(n=t&&[+t[0],+t[1]],w):n},w.size=function(t){return arguments.length?(d=t&&[+t[0],+t[1]],w):d},w.duration=function(t){return arguments.length?(g=+t,w):g},w.x=function(t){return arguments.length?(u=t,s=t.copy(),h={x:0,y:0,k:1},w):u},w.y=function(t){return arguments.length?(f=t,c=t.copy(),h={x:0,y:0,k:1},w):f},t.rebind(w,_,"on")};var zt,Nt,jt=[0,1/0];function Ut(){}function Vt(t,e,r){return this instanceof Vt?(this.h=+t,this.s=+e,void(this.l=+r)):arguments.length<2?t instanceof Vt?new Vt(t.h,t.s,t.l):ce(""+t,fe,Vt):new Vt(t,e,r)}t.color=Ut,Ut.prototype.toString=function(){return this.rgb()+""},t.hsl=Vt;var Ht=Vt.prototype=new Ut;function qt(t,e,r){var n,a;function i(t){return Math.round(255*function(t){return t>360?t-=360:t<0&&(t+=360),t<60?n+(a-n)*t/60:t<180?a:t<240?n+(a-n)*(240-t)/60:n}(t))}return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,n=2*(r=r<0?0:r>1?1:r)-(a=r<=.5?r*(1+e):r+e-r*e),new ie(i(t+120),i(t),i(t-120))}function Gt(e,r,n){return this instanceof Gt?(this.h=+e,this.c=+r,void(this.l=+n)):arguments.length<2?e instanceof Gt?new Gt(e.h,e.c,e.l):ee(e instanceof Wt?e.l:(e=he((e=t.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new Gt(e,r,n)}Ht.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Vt(this.h,this.s,this.l/t)},Ht.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Vt(this.h,this.s,t*this.l)},Ht.rgb=function(){return qt(this.h,this.s,this.l)},t.hcl=Gt;var Xt=Gt.prototype=new Ut;function Yt(t,e,r){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new Wt(r,Math.cos(t*=St)*e,Math.sin(t)*e)}function Wt(t,e,r){return this instanceof Wt?(this.l=+t,this.a=+e,void(this.b=+r)):arguments.length<2?t instanceof Wt?new Wt(t.l,t.a,t.b):t instanceof Gt?Yt(t.h,t.c,t.l):he((t=ie(t)).r,t.g,t.b):new Wt(t,e,r)}Xt.brighter=function(t){return new Gt(this.h,this.c,Math.min(100,this.l+Zt*(arguments.length?t:1)))},Xt.darker=function(t){return new Gt(this.h,this.c,Math.max(0,this.l-Zt*(arguments.length?t:1)))},Xt.rgb=function(){return Yt(this.h,this.c,this.l).rgb()},t.lab=Wt;var Zt=18,Jt=.95047,Qt=1,$t=1.08883,Kt=Wt.prototype=new Ut;function te(t,e,r){var n=(t+16)/116,a=n+e/500,i=n-r/200;return new ie(ae(3.2404542*(a=re(a)*Jt)-1.5371385*(n=re(n)*Qt)-.4985314*(i=re(i)*$t)),ae(-.969266*a+1.8760108*n+.041556*i),ae(.0556434*a-.2040259*n+1.0572252*i))}function ee(t,e,r){return t>0?new Gt(Math.atan2(r,e)*Lt,Math.sqrt(e*e+r*r),t):new Gt(NaN,NaN,t)}function re(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ne(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function ae(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function ie(t,e,r){return this instanceof ie?(this.r=~~t,this.g=~~e,void(this.b=~~r)):arguments.length<2?t instanceof ie?new ie(t.r,t.g,t.b):ce(""+t,ie,qt):new ie(t,e,r)}function oe(t){return new ie(t>>16,t>>8&255,255&t)}function le(t){return oe(t)+""}Kt.brighter=function(t){return new Wt(Math.min(100,this.l+Zt*(arguments.length?t:1)),this.a,this.b)},Kt.darker=function(t){return new Wt(Math.max(0,this.l-Zt*(arguments.length?t:1)),this.a,this.b)},Kt.rgb=function(){return te(this.l,this.a,this.b)},t.rgb=ie;var se=ie.prototype=new Ut;function ue(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ce(t,e,r){var n,a,i,o=0,l=0,s=0;if(n=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(a=n[2].split(","),n[1]){case"hsl":return r(parseFloat(a[0]),parseFloat(a[1])/100,parseFloat(a[2])/100);case"rgb":return e(pe(a[0]),pe(a[1]),pe(a[2]))}return(i=ge.get(t))?e(i.r,i.g,i.b):(null==t||"#"!==t.charAt(0)||isNaN(i=parseInt(t.slice(1),16))||(4===t.length?(o=(3840&i)>>4,o|=o>>4,l=240&i,l|=l>>4,s=15&i,s|=s<<4):7===t.length&&(o=(16711680&i)>>16,l=(65280&i)>>8,s=255&i)),e(o,l,s))}function fe(t,e,r){var n,a,i=Math.min(t/=255,e/=255,r/=255),o=Math.max(t,e,r),l=o-i,s=(o+i)/2;return l?(a=s<.5?l/(o+i):l/(2-o-i),n=t==o?(e-r)/l+(e<r?6:0):e==o?(r-t)/l+2:(t-e)/l+4,n*=60):(n=NaN,a=s>0&&s<1?0:n),new Vt(n,a,s)}function he(t,e,r){var n=ne((.4124564*(t=de(t))+.3575761*(e=de(e))+.1804375*(r=de(r)))/Jt),a=ne((.2126729*t+.7151522*e+.072175*r)/Qt);return Wt(116*a-16,500*(n-a),200*(a-ne((.0193339*t+.119192*e+.9503041*r)/$t)))}function de(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function pe(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}se.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,r=this.g,n=this.b,a=30;return e||r||n?(e&&e<a&&(e=a),r&&r<a&&(r=a),n&&n<a&&(n=a),new ie(Math.min(255,e/t),Math.min(255,r/t),Math.min(255,n/t))):new ie(a,a,a)},se.darker=function(t){return new ie((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},se.hsl=function(){return fe(this.r,this.g,this.b)},se.toString=function(){return"#"+ue(this.r)+ue(this.g)+ue(this.b)};var ge=t.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function ve(t){return"function"==typeof t?t:function(){return t}}function me(t){return function(e,r,n){return 2===arguments.length&&"function"==typeof r&&(n=r,r=null),ye(e,r,t,n)}}function ye(e,n,a,i){var o={},l=t.dispatch("beforesend","progress","load","error"),s={},u=new XMLHttpRequest,c=null;function f(){var t,e=u.status;if(!e&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(u)||e>=200&&e<300||304===e){try{t=a.call(o,u)}catch(t){return void l.error.call(o,t)}l.load.call(o,t)}else l.error.call(o,u)}return!this.XDomainRequest||"withCredentials"in u||!/^(http(s)?:)?\/\//.test(e)||(u=new XDomainRequest),"onload"in u?u.onload=u.onerror=f:u.onreadystatechange=function(){u.readyState>3&&f()},u.onprogress=function(e){var r=t.event;t.event=e;try{l.progress.call(o,u)}finally{t.event=r}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(n=null==t?null:t+"",o):n},o.responseType=function(t){return arguments.length?(c=t,o):c},o.response=function(t){return a=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(r(arguments)))}}),o.send=function(t,r,a){if(2===arguments.length&&"function"==typeof r&&(a=r,r=null),u.open(t,e,!0),null==n||"accept"in s||(s.accept=n+",*/*"),u.setRequestHeader)for(var i in s)u.setRequestHeader(i,s[i]);return null!=n&&u.overrideMimeType&&u.overrideMimeType(n),null!=c&&(u.responseType=c),null!=a&&o.on("error",a).on("load",function(t){a(null,t)}),l.beforesend.call(o,u),u.send(null==r?null:r),o},o.abort=function(){return u.abort(),o},t.rebind(o,l,"on"),null==i?o:o.get(function(t){return 1===t.length?function(e,r){t(null==e?r:null)}:t}(i))}ge.forEach(function(t,e){ge.set(t,oe(e))}),t.functor=ve,t.xhr=me(O),t.dsv=function(t,e){var r=new RegExp('["'+t+"\n]"),n=t.charCodeAt(0);function a(t,r,n){arguments.length<3&&(n=r,r=null);var a=ye(t,e,null==r?i:o(r),n);return a.row=function(t){return arguments.length?a.response(null==(r=t)?i:o(t)):r},a}function i(t){return a.parse(t.responseText)}function o(t){return function(e){return a.parse(e.responseText,t)}}function l(e){return e.map(s).join(t)}function s(t){return r.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return a.parse=function(t,e){var r;return a.parseRows(t,function(t,n){if(r)return r(t,n-1);var a=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,r){return e(a(t),r)}:a})},a.parseRows=function(t,e){var r,a,i={},o={},l=[],s=t.length,u=0,c=0;function f(){if(u>=s)return o;if(a)return a=!1,i;var e=u;if(34===t.charCodeAt(e)){for(var r=e;r++<s;)if(34===t.charCodeAt(r)){if(34!==t.charCodeAt(r+1))break;++r}return u=r+2,13===(l=t.charCodeAt(r+1))?(a=!0,10===t.charCodeAt(r+2)&&++u):10===l&&(a=!0),t.slice(e+1,r).replace(/""/g,'"')}for(;u<s;){var l,c=1;if(10===(l=t.charCodeAt(u++)))a=!0;else if(13===l)a=!0,10===t.charCodeAt(u)&&(++u,++c);else if(l!==n)continue;return t.slice(e,u-c)}return t.slice(e)}for(;(r=f())!==o;){for(var h=[];r!==i&&r!==o;)h.push(r),r=f();e&&null==(h=e(h,c++))||l.push(h)}return l},a.format=function(e){if(Array.isArray(e[0]))return a.formatRows(e);var r=new L,n=[];return e.forEach(function(t){for(var e in t)r.has(e)||n.push(r.add(e))}),[n.map(s).join(t)].concat(e.map(function(e){return n.map(function(t){return s(e[t])}).join(t)})).join("\n")},a.formatRows=function(t){return t.map(l).join("\n")},a},t.csv=t.dsv(",","text/csv"),t.tsv=t.dsv("\t","text/tab-separated-values");var xe,be,_e,we,Ae=this[R(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function Me(t,e,r){var n=arguments.length;n<2&&(e=0),n<3&&(r=Date.now());var a={c:t,t:r+e,n:null};return be?be.n=a:xe=a,be=a,_e||(we=clearTimeout(we),_e=1,Ae(Te)),a}function Te(){var t=ke(),e=Ee()-t;e>24?(isFinite(e)&&(clearTimeout(we),we=setTimeout(Te,e)),_e=0):(_e=1,Ae(Te))}function ke(){for(var t=Date.now(),e=xe;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Ee(){for(var t,e=xe,r=1/0;e;)e.c?(e.t<r&&(r=e.t),e=(t=e).n):e=t?t.n=e.n:xe=e.n;return be=t,r}function Ce(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}t.timer=function(){Me.apply(this,arguments)},t.timer.flush=function(){ke(),Ee()},t.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var Se=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(function(t,e){var r=Math.pow(10,3*y(8-e));return{scale:e>8?function(t){return t/r}:function(t){return t*r},symbol:t}});t.formatPrefix=function(e,r){var n=0;return(e=+e)&&(e<0&&(e*=-1),r&&(e=t.round(e,Ce(e,r))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),Se[8+n/3]};var Le=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Oe=t.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(e,r){return(e=t.round(e,Ce(e,r))).toFixed(Math.max(0,Math.min(20,Ce(e*(1+1e-15),r))))}});function De(t){return t+""}var Re=t.time={},Pe=Date;function Ie(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}Ie.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Be.setUTCDate.apply(this._,arguments)},setDay:function(){Be.setUTCDay.apply(this._,arguments)},setFullYear:function(){Be.setUTCFullYear.apply(this._,arguments)},setHours:function(){Be.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Be.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Be.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Be.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Be.setUTCSeconds.apply(this._,arguments)},setTime:function(){Be.setTime.apply(this._,arguments)}};var Be=Date.prototype;function Fe(t,e,r){function n(e){var r=t(e),n=i(r,1);return e-r<n-e?r:n}function a(r){return e(r=t(new Pe(r-1)),1),r}function i(t,r){return e(t=new Pe(+t),r),t}function o(t,n,i){var o=a(t),l=[];if(i>1)for(;o<n;)r(o)%i||l.push(new Date(+o)),e(o,1);else for(;o<n;)l.push(new Date(+o)),e(o,1);return l}t.floor=t,t.round=n,t.ceil=a,t.offset=i,t.range=o;var l=t.utc=ze(t);return l.floor=l,l.round=ze(n),l.ceil=ze(a),l.offset=ze(i),l.range=function(t,e,r){try{Pe=Ie;var n=new Ie;return n._=t,o(n,e,r)}finally{Pe=Date}},t}function ze(t){return function(e,r){try{Pe=Ie;var n=new Ie;return n._=e,t(n,r)._}finally{Pe=Date}}}Re.year=Fe(function(t){return(t=Re.day(t)).setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),Re.years=Re.year.range,Re.years.utc=Re.year.utc.range,Re.day=Fe(function(t){var e=new Pe(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),Re.days=Re.day.range,Re.days.utc=Re.day.utc.range,Re.dayOfYear=function(t){var e=Re.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var r=Re[t]=Fe(function(t){return(t=Re.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var r=Re.year(t).getDay();return Math.floor((Re.dayOfYear(t)+(r+e)%7)/7)-(r!==e)});Re[t+"s"]=r.range,Re[t+"s"].utc=r.utc.range,Re[t+"OfYear"]=function(t){var r=Re.year(t).getDay();return Math.floor((Re.dayOfYear(t)+(r+e)%7)/7)}}),Re.week=Re.sunday,Re.weeks=Re.sunday.range,Re.weeks.utc=Re.sunday.utc.range,Re.weekOfYear=Re.sundayOfYear;var Ne={"-":"",_:" ",0:"0"},je=/^\s*\d+/,Ue=/^%/;function Ve(t,e,r){var n=t<0?"-":"",a=(n?-t:t)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(e)+a:a)}function He(e){return new RegExp("^(?:"+e.map(t.requote).join("|")+")","i")}function qe(t){for(var e=new b,r=-1,n=t.length;++r<n;)e.set(t[r].toLowerCase(),r);return e}function Ge(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Xe(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r));return n?(t.U=+n[0],r+n[0].length):-1}function Ye(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r));return n?(t.W=+n[0],r+n[0].length):-1}function We(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function Ze(t,e,r){je.lastIndex=0;var n,a=je.exec(e.slice(r,r+2));return a?(t.y=(n=+a[0])+(n>68?1900:2e3),r+a[0].length):-1}function Je(t,e,r){return/^[+-]\d{4}$/.test(e=e.slice(r,r+5))?(t.Z=-e,r+5):-1}function Qe(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function $e(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function Ke(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+3));return n?(t.j=+n[0],r+n[0].length):-1}function tr(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function er(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function rr(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function nr(t,e,r){je.lastIndex=0;var n=je.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function ar(t){var e=t.getTimezoneOffset(),r=e>0?"-":"+",n=y(e)/60|0,a=y(e)%60;return r+Ve(n,"0",2)+Ve(a,"0",2)}function ir(t,e,r){Ue.lastIndex=0;var n=Ue.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function or(t){for(var e=t.length,r=-1;++r<e;)t[r][0]=this(t[r][0]);return function(e){for(var r=0,n=t[r];!n[1](e);)n=t[++r];return n[0](e)}}t.locale=function(e){return{numberFormat:function(e){var r=e.decimal,n=e.thousands,a=e.grouping,i=e.currency,o=a&&n?function(t,e){for(var r=t.length,i=[],o=0,l=a[0],s=0;r>0&&l>0&&(s+l+1>e&&(l=Math.max(1,e-s)),i.push(t.substring(r-=l,r+l)),!((s+=l+1)>e));)l=a[o=(o+1)%a.length];return i.reverse().join(n)}:O;return function(e){var n=Le.exec(e),a=n[1]||" ",l=n[2]||">",s=n[3]||"-",u=n[4]||"",c=n[5],f=+n[6],h=n[7],d=n[8],p=n[9],g=1,v="",m="",y=!1,x=!0;switch(d&&(d=+d.substring(1)),(c||"0"===a&&"="===l)&&(c=a="0",l="="),p){case"n":h=!0,p="g";break;case"%":g=100,m="%",p="f";break;case"p":g=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===u&&(v="0"+p.toLowerCase());case"c":x=!1;case"d":y=!0,d=0;break;case"s":g=-1,p="r"}"$"===u&&(v=i[0],m=i[1]),"r"!=p||d||(p="g"),null!=d&&("g"==p?d=Math.max(1,Math.min(21,d)):"e"!=p&&"f"!=p||(d=Math.max(0,Math.min(20,d)))),p=Oe.get(p)||De;var b=c&&h;return function(e){var n=m;if(y&&e%1)return"";var i=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===s?"":s;if(g<0){var u=t.formatPrefix(e,d);e=u.scale(e),n=u.symbol+m}else e*=g;var _,w,A=(e=p(e,d)).lastIndexOf(".");if(A<0){var M=x?e.lastIndexOf("e"):-1;M<0?(_=e,w=""):(_=e.substring(0,M),w=e.substring(M))}else _=e.substring(0,A),w=r+e.substring(A+1);!c&&h&&(_=o(_,1/0));var T=v.length+_.length+w.length+(b?0:i.length),k=T<f?new Array(T=f-T+1).join(a):"";return b&&(_=o(k+_,k.length?f-w.length:1/0)),i+=v,e=_+w,("<"===l?i+e+k:">"===l?k+i+e:"^"===l?k.substring(0,T>>=1)+i+e+k.substring(T):i+(b?e:k+e))+n}}}(e),timeFormat:function(e){var r=e.dateTime,n=e.date,a=e.time,i=e.periods,o=e.days,l=e.shortDays,s=e.months,u=e.shortMonths;function c(t){var e=t.length;function r(r){for(var n,a,i,o=[],l=-1,s=0;++l<e;)37===t.charCodeAt(l)&&(o.push(t.slice(s,l)),null!=(a=Ne[n=t.charAt(++l)])&&(n=t.charAt(++l)),(i=_[n])&&(n=i(r,null==a?"e"===n?" ":"0":a)),o.push(n),s=l+1);return o.push(t.slice(s,l)),o.join("")}return r.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(f(r,t,e,0)!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var n=null!=r.Z&&Pe!==Ie,a=new(n?Ie:Pe);return"j"in r?a.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),n?a._:a},r.toString=function(){return t},r}function f(t,e,r,n){for(var a,i,o,l=0,s=e.length,u=r.length;l<s;){if(n>=u)return-1;if(37===(a=e.charCodeAt(l++))){if(o=e.charAt(l++),!(i=w[o in Ne?e.charAt(l++):o])||(n=i(t,r,n))<0)return-1}else if(a!=r.charCodeAt(n++))return-1}return n}c.utc=function(t){var e=c(t);function r(t){try{var r=new(Pe=Ie);return r._=t,e(r)}finally{Pe=Date}}return r.parse=function(t){try{Pe=Ie;var r=e.parse(t);return r&&r._}finally{Pe=Date}},r.toString=e.toString,r},c.multi=c.utc.multi=or;var h=t.map(),d=He(o),p=qe(o),g=He(l),v=qe(l),m=He(s),y=qe(s),x=He(u),b=qe(u);i.forEach(function(t,e){h.set(t.toLowerCase(),e)});var _={a:function(t){return l[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return u[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:c(r),d:function(t,e){return Ve(t.getDate(),e,2)},e:function(t,e){return Ve(t.getDate(),e,2)},H:function(t,e){return Ve(t.getHours(),e,2)},I:function(t,e){return Ve(t.getHours()%12||12,e,2)},j:function(t,e){return Ve(1+Re.dayOfYear(t),e,3)},L:function(t,e){return Ve(t.getMilliseconds(),e,3)},m:function(t,e){return Ve(t.getMonth()+1,e,2)},M:function(t,e){return Ve(t.getMinutes(),e,2)},p:function(t){return i[+(t.getHours()>=12)]},S:function(t,e){return Ve(t.getSeconds(),e,2)},U:function(t,e){return Ve(Re.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Ve(Re.mondayOfYear(t),e,2)},x:c(n),X:c(a),y:function(t,e){return Ve(t.getFullYear()%100,e,2)},Y:function(t,e){return Ve(t.getFullYear()%1e4,e,4)},Z:ar,"%":function(){return"%"}},w={a:function(t,e,r){g.lastIndex=0;var n=g.exec(e.slice(r));return n?(t.w=v.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(t,e,r){d.lastIndex=0;var n=d.exec(e.slice(r));return n?(t.w=p.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(t,e,r){x.lastIndex=0;var n=x.exec(e.slice(r));return n?(t.m=b.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(t,e,r){m.lastIndex=0;var n=m.exec(e.slice(r));return n?(t.m=y.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(t,e,r){return f(t,_.c.toString(),e,r)},d:$e,e:$e,H:tr,I:tr,j:Ke,L:nr,m:Qe,M:er,p:function(t,e,r){var n=h.get(e.slice(r,r+=2).toLowerCase());return null==n?-1:(t.p=n,r)},S:rr,U:Xe,w:Ge,W:Ye,x:function(t,e,r){return f(t,_.x.toString(),e,r)},X:function(t,e,r){return f(t,_.X.toString(),e,r)},y:Ze,Y:We,Z:Je,"%":ir};return c}(e)}};var lr=t.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function sr(){}t.format=lr.numberFormat,t.geo={},sr.prototype={s:0,t:0,add:function(t){cr(t,this.t,ur),cr(ur.s,this.s,this),this.s?this.t+=ur.t:this.s=ur.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ur=new sr;function cr(t,e,r){var n=r.s=t+e,a=n-t,i=n-a;r.t=t-i+(e-a)}function fr(t,e){t&&dr.hasOwnProperty(t.type)&&dr[t.type](t,e)}t.geo.stream=function(t,e){t&&hr.hasOwnProperty(t.type)?hr[t.type](t,e):fr(t,e)};var hr={Feature:function(t,e){fr(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,n=-1,a=r.length;++n<a;)fr(r[n].geometry,e)}},dr={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var r=t.coordinates,n=-1,a=r.length;++n<a;)t=r[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){pr(t.coordinates,e,0)},MultiLineString:function(t,e){for(var r=t.coordinates,n=-1,a=r.length;++n<a;)pr(r[n],e,0)},Polygon:function(t,e){gr(t.coordinates,e)},MultiPolygon:function(t,e){for(var r=t.coordinates,n=-1,a=r.length;++n<a;)gr(r[n],e)},GeometryCollection:function(t,e){for(var r=t.geometries,n=-1,a=r.length;++n<a;)fr(r[n],e)}};function pr(t,e,r){var n,a=-1,i=t.length-r;for(e.lineStart();++a<i;)n=t[a],e.point(n[0],n[1],n[2]);e.lineEnd()}function gr(t,e){var r=-1,n=t.length;for(e.polygonStart();++r<n;)pr(t[r],e,1);e.polygonEnd()}t.geo.area=function(e){return vr=0,t.geo.stream(e,Sr),vr};var vr,mr,yr,xr,br,_r,wr,Ar,Mr,Tr,kr,Er,Cr=new sr,Sr={sphere:function(){vr+=4*Tt},point:I,lineStart:I,lineEnd:I,polygonStart:function(){Cr.reset(),Sr.lineStart=Lr},polygonEnd:function(){var t=2*Cr;vr+=t<0?4*Tt+t:t,Sr.lineStart=Sr.lineEnd=Sr.point=I}};function Lr(){var t,e,r,n,a;function i(t,e){e=e*St/2+Tt/4;var i=(t*=St)-r,o=i>=0?1:-1,l=o*i,s=Math.cos(e),u=Math.sin(e),c=a*u,f=n*s+c*Math.cos(l),h=c*o*Math.sin(l);Cr.add(Math.atan2(h,f)),r=t,n=s,a=u}Sr.point=function(o,l){Sr.point=i,r=(t=o)*St,n=Math.cos(l=(e=l)*St/2+Tt/4),a=Math.sin(l)},Sr.lineEnd=function(){i(t,e)}}function Or(t){var e=t[0],r=t[1],n=Math.cos(r);return[n*Math.cos(e),n*Math.sin(e),Math.sin(r)]}function Dr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Rr(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Pr(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Ir(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Br(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Fr(t){return[Math.atan2(t[1],t[0]),Pt(t[2])]}function zr(t,e){return y(t[0]-e[0])<At&&y(t[1]-e[1])<At}t.geo.bounds=function(){var e,r,n,a,i,o,l,s,u,c,f,h={point:d,lineStart:g,lineEnd:v,polygonStart:function(){h.point=m,h.lineStart=x,h.lineEnd=b,u=0,Sr.polygonStart()},polygonEnd:function(){Sr.polygonEnd(),h.point=d,h.lineStart=g,h.lineEnd=v,Cr<0?(e=-(n=180),r=-(a=90)):u>At?a=90:u<-At&&(r=-90),f[0]=e,f[1]=n}};function d(t,i){c.push(f=[e=t,n=t]),i<r&&(r=i),i>a&&(a=i)}function p(t,o){var l=Or([t*St,o*St]);if(s){var u=Rr(s,l),c=Rr([u[1],-u[0],0],u);Br(c),c=Fr(c);var f=t-i,h=f>0?1:-1,p=c[0]*Lt*h,g=y(f)>180;if(g^(h*i<p&&p<h*t))(v=c[1]*Lt)>a&&(a=v);else if(g^(h*i<(p=(p+360)%360-180)&&p<h*t)){var v;(v=-c[1]*Lt)<r&&(r=v)}else o<r&&(r=o),o>a&&(a=o);g?t<i?_(e,t)>_(e,n)&&(n=t):_(t,n)>_(e,n)&&(e=t):n>=e?(t<e&&(e=t),t>n&&(n=t)):t>i?_(e,t)>_(e,n)&&(n=t):_(t,n)>_(e,n)&&(e=t)}else d(t,o);s=l,i=t}function g(){h.point=p}function v(){f[0]=e,f[1]=n,h.point=d,s=null}function m(t,e){if(s){var r=t-i;u+=y(r)>180?r+(r>0?360:-360):r}else o=t,l=e;Sr.point(t,e),p(t,e)}function x(){Sr.lineStart()}function b(){m(o,l),Sr.lineEnd(),y(u)>At&&(e=-(n=180)),f[0]=e,f[1]=n,s=null}function _(t,e){return(e-=t)<0?e+360:e}function w(t,e){return t[0]-e[0]}function A(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}return function(i){if(a=n=-(e=r=1/0),c=[],t.geo.stream(i,h),u=c.length){c.sort(w);for(var o=1,l=[g=c[0]];o<u;++o)A((d=c[o])[0],g)||A(d[1],g)?(_(g[0],d[1])>_(g[0],g[1])&&(g[1]=d[1]),_(d[0],g[1])>_(g[0],g[1])&&(g[0]=d[0])):l.push(g=d);for(var s,u,d,p=-1/0,g=(o=0,l[u=l.length-1]);o<=u;g=d,++o)d=l[o],(s=_(g[1],d[0]))>p&&(p=s,e=d[0],n=g[1])}return c=f=null,e===1/0||r===1/0?[[NaN,NaN],[NaN,NaN]]:[[e,r],[n,a]]}}(),t.geo.centroid=function(e){mr=yr=xr=br=_r=wr=Ar=Mr=Tr=kr=Er=0,t.geo.stream(e,Nr);var r=Tr,n=kr,a=Er,i=r*r+n*n+a*a;return i<Mt&&(r=wr,n=Ar,a=Mr,yr<At&&(r=xr,n=br,a=_r),(i=r*r+n*n+a*a)<Mt)?[NaN,NaN]:[Math.atan2(n,r)*Lt,Pt(a/Math.sqrt(i))*Lt]};var Nr={sphere:I,point:jr,lineStart:Vr,lineEnd:Hr,polygonStart:function(){Nr.lineStart=qr},polygonEnd:function(){Nr.lineStart=Vr}};function jr(t,e){t*=St;var r=Math.cos(e*=St);Ur(r*Math.cos(t),r*Math.sin(t),Math.sin(e))}function Ur(t,e,r){xr+=(t-xr)/++mr,br+=(e-br)/mr,_r+=(r-_r)/mr}function Vr(){var t,e,r;function n(n,a){n*=St;var i=Math.cos(a*=St),o=i*Math.cos(n),l=i*Math.sin(n),s=Math.sin(a),u=Math.atan2(Math.sqrt((u=e*s-r*l)*u+(u=r*o-t*s)*u+(u=t*l-e*o)*u),t*o+e*l+r*s);yr+=u,wr+=u*(t+(t=o)),Ar+=u*(e+(e=l)),Mr+=u*(r+(r=s)),Ur(t,e,r)}Nr.point=function(a,i){a*=St;var o=Math.cos(i*=St);t=o*Math.cos(a),e=o*Math.sin(a),r=Math.sin(i),Nr.point=n,Ur(t,e,r)}}function Hr(){Nr.point=jr}function qr(){var t,e,r,n,a;function i(t,e){t*=St;var i=Math.cos(e*=St),o=i*Math.cos(t),l=i*Math.sin(t),s=Math.sin(e),u=n*s-a*l,c=a*o-r*s,f=r*l-n*o,h=Math.sqrt(u*u+c*c+f*f),d=r*o+n*l+a*s,p=h&&-Rt(d)/h,g=Math.atan2(h,d);Tr+=p*u,kr+=p*c,Er+=p*f,yr+=g,wr+=g*(r+(r=o)),Ar+=g*(n+(n=l)),Mr+=g*(a+(a=s)),Ur(r,n,a)}Nr.point=function(o,l){t=o,e=l,Nr.point=i,o*=St;var s=Math.cos(l*=St);r=s*Math.cos(o),n=s*Math.sin(o),a=Math.sin(l),Ur(r,n,a)},Nr.lineEnd=function(){i(t,e),Nr.lineEnd=Hr,Nr.point=jr}}function Gr(t,e){function r(r,n){return r=t(r,n),e(r[0],r[1])}return t.invert&&e.invert&&(r.invert=function(r,n){return(r=e.invert(r,n))&&t.invert(r[0],r[1])}),r}function Xr(){return!0}function Yr(t,e,r,n,a){var i=[],o=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,r=t[0],n=t[e];if(zr(r,n)){a.lineStart();for(var l=0;l<e;++l)a.point((r=t[l])[0],r[1]);a.lineEnd()}else{var s=new Zr(r,t,null,!0),u=new Zr(r,null,s,!1);s.o=u,i.push(s),o.push(u),u=new Zr(n,null,s=new Zr(n,t,null,!1),!0),s.o=u,i.push(s),o.push(u)}}}),o.sort(e),Wr(i),Wr(o),i.length){for(var l=0,s=r,u=o.length;l<u;++l)o[l].e=s=!s;for(var c,f,h=i[0];;){for(var d=h,p=!0;d.v;)if((d=d.n)===h)return;c=d.z,a.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(l=0,u=c.length;l<u;++l)a.point((f=c[l])[0],f[1]);else n(d.x,d.n.x,1,a);d=d.n}else{if(p)for(l=(c=d.p.z).length-1;l>=0;--l)a.point((f=c[l])[0],f[1]);else n(d.x,d.p.x,-1,a);d=d.p}c=(d=d.o).z,p=!p}while(!d.v);a.lineEnd()}}}function Wr(t){if(e=t.length){for(var e,r,n=0,a=t[0];++n<e;)a.n=r=t[n],r.p=a,a=r;a.n=r=t[0],r.p=a}}function Zr(t,e,r,n){this.x=t,this.z=e,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function Jr(e,r,n,a){return function(i,o){var l,s=r(o),u=i.invert(a[0],a[1]),c={point:f,lineStart:d,lineEnd:p,polygonStart:function(){c.point=b,c.lineStart=_,c.lineEnd=w,l=[],g=[]},polygonEnd:function(){c.point=f,c.lineStart=d,c.lineEnd=p,l=t.merge(l);var e=function(t,e){var r=t[0],n=t[1],a=[Math.sin(r),-Math.cos(r),0],i=0,o=0;Cr.reset();for(var l=0,s=e.length;l<s;++l){var u=e[l],c=u.length;if(c)for(var f=u[0],h=f[0],d=f[1]/2+Tt/4,p=Math.sin(d),g=Math.cos(d),v=1;;){v===c&&(v=0);var m=(t=u[v])[0],y=t[1]/2+Tt/4,x=Math.sin(y),b=Math.cos(y),_=m-h,w=_>=0?1:-1,A=w*_,M=A>Tt,T=p*x;if(Cr.add(Math.atan2(T*w*Math.sin(A),g*b+T*Math.cos(A))),i+=M?_+w*kt:_,M^h>=r^m>=r){var k=Rr(Or(f),Or(t));Br(k);var E=Rr(a,k);Br(E);var C=(M^_>=0?-1:1)*Pt(E[2]);(n>C||n===C&&(k[0]||k[1]))&&(o+=M^_>=0?1:-1)}if(!v++)break;h=m,p=x,g=b,f=t}}return(i<-At||i<At&&Cr<-At)^1&o}(u,g);l.length?(x||(o.polygonStart(),x=!0),Yr(l,Kr,e,n,o)):e&&(x||(o.polygonStart(),x=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),x&&(o.polygonEnd(),x=!1),l=g=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function f(t,r){var n=i(t,r);e(t=n[0],r=n[1])&&o.point(t,r)}function h(t,e){var r=i(t,e);s.point(r[0],r[1])}function d(){c.point=h,s.lineStart()}function p(){c.point=f,s.lineEnd()}var g,v,m=$r(),y=r(m),x=!1;function b(t,e){v.push([t,e]);var r=i(t,e);y.point(r[0],r[1])}function _(){y.lineStart(),v=[]}function w(){b(v[0][0],v[0][1]),y.lineEnd();var t,e=y.clean(),r=m.buffer(),n=r.length;if(v.pop(),g.push(v),v=null,n)if(1&e){var a,i=-1;if((n=(t=r[0]).length-1)>0){for(x||(o.polygonStart(),x=!0),o.lineStart();++i<n;)o.point((a=t[i])[0],a[1]);o.lineEnd()}}else n>1&&2&e&&r.push(r.pop().concat(r.shift())),l.push(r.filter(Qr))}return c}}function Qr(t){return t.length>1}function $r(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,r){t.push([e,r])},lineEnd:I,buffer:function(){var r=e;return e=[],t=null,r},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Kr(t,e){return((t=t.x)[0]<0?t[1]-Ct-At:Ct-t[1])-((e=e.x)[0]<0?e[1]-Ct-At:Ct-e[1])}var tn=Jr(Xr,function(t){var e,r=NaN,n=NaN,a=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(i,o){var l=i>0?Tt:-Tt,s=y(i-r);y(s-Tt)<At?(t.point(r,n=(n+o)/2>0?Ct:-Ct),t.point(a,n),t.lineEnd(),t.lineStart(),t.point(l,n),t.point(i,n),e=0):a!==l&&s>=Tt&&(y(r-a)<At&&(r-=a*At),y(i-l)<At&&(i-=l*At),n=function(t,e,r,n){var a,i,o=Math.sin(t-r);return y(o)>At?Math.atan((Math.sin(e)*(i=Math.cos(n))*Math.sin(r)-Math.sin(n)*(a=Math.cos(e))*Math.sin(t))/(a*i*o)):(e+n)/2}(r,n,i,o),t.point(a,n),t.lineEnd(),t.lineStart(),t.point(l,n),e=0),t.point(r=i,n=o),a=l},lineEnd:function(){t.lineEnd(),r=n=NaN},clean:function(){return 2-e}}},function(t,e,r,n){var a;if(null==t)a=r*Ct,n.point(-Tt,a),n.point(0,a),n.point(Tt,a),n.point(Tt,0),n.point(Tt,-a),n.point(0,-a),n.point(-Tt,-a),n.point(-Tt,0),n.point(-Tt,a);else if(y(t[0]-e[0])>At){var i=t[0]<e[0]?Tt:-Tt;a=r*i/2,n.point(-i,a),n.point(0,a),n.point(i,a)}else n.point(e[0],e[1])},[-Tt,-Tt/2]);function en(t,e,r,n){return function(a){var i,o=a.a,l=a.b,s=o.x,u=o.y,c=0,f=1,h=l.x-s,d=l.y-u;if(i=t-s,h||!(i>0)){if(i/=h,h<0){if(i<c)return;i<f&&(f=i)}else if(h>0){if(i>f)return;i>c&&(c=i)}if(i=r-s,h||!(i<0)){if(i/=h,h<0){if(i>f)return;i>c&&(c=i)}else if(h>0){if(i<c)return;i<f&&(f=i)}if(i=e-u,d||!(i>0)){if(i/=d,d<0){if(i<c)return;i<f&&(f=i)}else if(d>0){if(i>f)return;i>c&&(c=i)}if(i=n-u,d||!(i<0)){if(i/=d,d<0){if(i>f)return;i>c&&(c=i)}else if(d>0){if(i<c)return;i<f&&(f=i)}return c>0&&(a.a={x:s+c*h,y:u+c*d}),f<1&&(a.b={x:s+f*h,y:u+f*d}),a}}}}}}var rn=1e9;function nn(e,r,n,a){return function(s){var u,c,f,h,d,p,g,v,m,y,x,b=s,_=$r(),w=en(e,r,n,a),A={point:k,lineStart:function(){A.point=E,c&&c.push(f=[]);y=!0,m=!1,g=v=NaN},lineEnd:function(){u&&(E(h,d),p&&m&&_.rejoin(),u.push(_.buffer()));A.point=k,m&&s.lineEnd()},polygonStart:function(){s=_,u=[],c=[],x=!0},polygonEnd:function(){s=b,u=t.merge(u);var r=function(t){for(var e=0,r=c.length,n=t[1],a=0;a<r;++a)for(var i,o=1,l=c[a],s=l.length,u=l[0];o<s;++o)i=l[o],u[1]<=n?i[1]>n&&Dt(u,i,t)>0&&++e:i[1]<=n&&Dt(u,i,t)<0&&--e,u=i;return 0!==e}([e,a]),n=x&&r,i=u.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),M(null,null,1,s),s.lineEnd()),i&&Yr(u,o,r,M,s),s.polygonEnd()),u=c=f=null}};function M(t,o,s,u){var c=0,f=0;if(null==t||(c=i(t,s))!==(f=i(o,s))||l(t,o)<0^s>0)do{u.point(0===c||3===c?e:n,c>1?a:r)}while((c=(c+s+4)%4)!==f);else u.point(o[0],o[1])}function T(t,i){return e<=t&&t<=n&&r<=i&&i<=a}function k(t,e){T(t,e)&&s.point(t,e)}function E(t,e){var r=T(t=Math.max(-rn,Math.min(rn,t)),e=Math.max(-rn,Math.min(rn,e)));if(c&&f.push([t,e]),y)h=t,d=e,p=r,y=!1,r&&(s.lineStart(),s.point(t,e));else if(r&&m)s.point(t,e);else{var n={a:{x:g,y:v},b:{x:t,y:e}};w(n)?(m||(s.lineStart(),s.point(n.a.x,n.a.y)),s.point(n.b.x,n.b.y),r||s.lineEnd(),x=!1):r&&(s.lineStart(),s.point(t,e),x=!1)}g=t,v=e,m=r}return A};function i(t,a){return y(t[0]-e)<At?a>0?0:3:y(t[0]-n)<At?a>0?2:1:y(t[1]-r)<At?a>0?1:0:a>0?3:2}function o(t,e){return l(t.x,e.x)}function l(t,e){var r=i(t,1),n=i(e,1);return r!==n?r-n:0===r?e[1]-t[1]:1===r?t[0]-e[0]:2===r?t[1]-e[1]:e[0]-t[0]}}function an(t){var e=0,r=Tt/3,n=En(t),a=n(e,r);return a.parallels=function(t){return arguments.length?n(e=t[0]*Tt/180,r=t[1]*Tt/180):[e/Tt*180,r/Tt*180]},a}function on(t,e){var r=Math.sin(t),n=(r+Math.sin(e))/2,a=1+r*(2*n-r),i=Math.sqrt(a)/n;function o(t,e){var r=Math.sqrt(a-2*n*Math.sin(e))/n;return[r*Math.sin(t*=n),i-r*Math.cos(t)]}return o.invert=function(t,e){var r=i-e;return[Math.atan2(t,r)/n,Pt((a-(t*t+r*r)*n*n)/(2*n))]},o}t.geo.clipExtent=function(){var t,e,r,n,a,i,o={stream:function(t){return a&&(a.valid=!1),(a=i(t)).valid=!0,a},extent:function(l){return arguments.length?(i=nn(t=+l[0][0],e=+l[0][1],r=+l[1][0],n=+l[1][1]),a&&(a.valid=!1,a=null),o):[[t,e],[r,n]]}};return o.extent([[0,0],[960,500]])},(t.geo.conicEqualArea=function(){return an(on)}).raw=on,t.geo.albers=function(){return t.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},t.geo.albersUsa=function(){var e,r,n,a,i=t.geo.albers(),o=t.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=t.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s={point:function(t,r){e=[t,r]}};function u(t){var i=t[0],o=t[1];return e=null,r(i,o),e||(n(i,o),e)||a(i,o),e}return u.invert=function(t){var e=i.scale(),r=i.translate(),n=(t[0]-r[0])/e,a=(t[1]-r[1])/e;return(a>=.12&&a<.234&&n>=-.425&&n<-.214?o:a>=.166&&a<.234&&n>=-.214&&n<-.115?l:i).invert(t)},u.stream=function(t){var e=i.stream(t),r=o.stream(t),n=l.stream(t);return{point:function(t,a){e.point(t,a),r.point(t,a),n.point(t,a)},sphere:function(){e.sphere(),r.sphere(),n.sphere()},lineStart:function(){e.lineStart(),r.lineStart(),n.lineStart()},lineEnd:function(){e.lineEnd(),r.lineEnd(),n.lineEnd()},polygonStart:function(){e.polygonStart(),r.polygonStart(),n.polygonStart()},polygonEnd:function(){e.polygonEnd(),r.polygonEnd(),n.polygonEnd()}}},u.precision=function(t){return arguments.length?(i.precision(t),o.precision(t),l.precision(t),u):i.precision()},u.scale=function(t){return arguments.length?(i.scale(t),o.scale(.35*t),l.scale(t),u.translate(i.translate())):i.scale()},u.translate=function(t){if(!arguments.length)return i.translate();var e=i.scale(),c=+t[0],f=+t[1];return r=i.translate(t).clipExtent([[c-.455*e,f-.238*e],[c+.455*e,f+.238*e]]).stream(s).point,n=o.translate([c-.307*e,f+.201*e]).clipExtent([[c-.425*e+At,f+.12*e+At],[c-.214*e-At,f+.234*e-At]]).stream(s).point,a=l.translate([c-.205*e,f+.212*e]).clipExtent([[c-.214*e+At,f+.166*e+At],[c-.115*e-At,f+.234*e-At]]).stream(s).point,u},u.scale(1070)};var ln,sn,un,cn,fn,hn,dn={point:I,lineStart:I,lineEnd:I,polygonStart:function(){sn=0,dn.lineStart=pn},polygonEnd:function(){dn.lineStart=dn.lineEnd=dn.point=I,ln+=y(sn/2)}};function pn(){var t,e,r,n;function a(t,e){sn+=n*t-r*e,r=t,n=e}dn.point=function(i,o){dn.point=a,t=r=i,e=n=o},dn.lineEnd=function(){a(t,e)}}var gn={point:function(t,e){t<un&&(un=t);t>fn&&(fn=t);e<cn&&(cn=e);e>hn&&(hn=e)},lineStart:I,lineEnd:I,polygonStart:I,polygonEnd:I};function vn(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var mn,yn={point:xn,lineStart:bn,lineEnd:_n,polygonStart:function(){yn.lineStart=wn},polygonEnd:function(){yn.point=xn,yn.lineStart=bn,yn.lineEnd=_n}};function xn(t,e){xr+=t,br+=e,++_r}function bn(){var t,e;function r(r,n){var a=r-t,i=n-e,o=Math.sqrt(a*a+i*i);wr+=o*(t+r)/2,Ar+=o*(e+n)/2,Mr+=o,xn(t=r,e=n)}yn.point=function(n,a){yn.point=r,xn(t=n,e=a)}}function _n(){yn.point=xn}function wn(){var t,e,r,n;function a(t,e){var a=t-r,i=e-n,o=Math.sqrt(a*a+i*i);wr+=o*(r+t)/2,Ar+=o*(n+e)/2,Mr+=o,Tr+=(o=n*t-r*e)*(r+t),kr+=o*(n+e),Er+=3*o,xn(r=t,n=e)}yn.point=function(i,o){yn.point=a,xn(t=r=i,e=n=o)},yn.lineEnd=function(){a(t,e)}}function An(t){var e=.5,r=Math.cos(30*St),n=16;function a(e){return(n?function(e){var r,a,o,l,s,u,c,f,h,d,p,g,v={point:m,lineStart:y,lineEnd:b,polygonStart:function(){e.polygonStart(),v.lineStart=_},polygonEnd:function(){e.polygonEnd(),v.lineStart=y}};function m(r,n){r=t(r,n),e.point(r[0],r[1])}function y(){f=NaN,v.point=x,e.lineStart()}function x(r,a){var o=Or([r,a]),l=t(r,a);i(f,h,c,d,p,g,f=l[0],h=l[1],c=r,d=o[0],p=o[1],g=o[2],n,e),e.point(f,h)}function b(){v.point=m,e.lineEnd()}function _(){y(),v.point=w,v.lineEnd=A}function w(t,e){x(r=t,e),a=f,o=h,l=d,s=p,u=g,v.point=x}function A(){i(f,h,c,d,p,g,a,o,r,l,s,u,n,e),v.lineEnd=b,b()}return v}:function(e){return Tn(e,function(r,n){r=t(r,n),e.point(r[0],r[1])})})(e)}function i(n,a,o,l,s,u,c,f,h,d,p,g,v,m){var x=c-n,b=f-a,_=x*x+b*b;if(_>4*e&&v--){var w=l+d,A=s+p,M=u+g,T=Math.sqrt(w*w+A*A+M*M),k=Math.asin(M/=T),E=y(y(M)-1)<At||y(o-h)<At?(o+h)/2:Math.atan2(A,w),C=t(E,k),S=C[0],L=C[1],O=S-n,D=L-a,R=b*O-x*D;(R*R/_>e||y((x*O+b*D)/_-.5)>.3||l*d+s*p+u*g<r)&&(i(n,a,o,l,s,u,S,L,E,w/=T,A/=T,M,v,m),m.point(S,L),i(S,L,E,w,A,M,c,f,h,d,p,g,v,m))}}return a.precision=function(t){return arguments.length?(n=(e=t*t)>0&&16,a):Math.sqrt(e)},a}function Mn(t){this.stream=t}function Tn(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function kn(t){return En(function(){return t})()}function En(e){var r,n,a,i,o,l,s=An(function(t,e){return[(t=r(t,e))[0]*u+i,o-t[1]*u]}),u=150,c=480,f=250,h=0,d=0,p=0,g=0,v=0,m=tn,x=O,b=null,_=null;function w(t){return[(t=a(t[0]*St,t[1]*St))[0]*u+i,o-t[1]*u]}function A(t){return(t=a.invert((t[0]-i)/u,(o-t[1])/u))&&[t[0]*Lt,t[1]*Lt]}function M(){a=Gr(n=On(p,g,v),r);var t=r(h,d);return i=c-t[0]*u,o=f+t[1]*u,T()}function T(){return l&&(l.valid=!1,l=null),w}return w.stream=function(t){return l&&(l.valid=!1),(l=Cn(m(n,s(x(t))))).valid=!0,l},w.clipAngle=function(t){return arguments.length?(m=null==t?(b=t,tn):function(t){var e=Math.cos(t),r=e>0,n=y(e)>At;return Jr(a,function(t){var e,l,s,u,c;return{lineStart:function(){u=s=!1,c=1},point:function(f,h){var d,p=[f,h],g=a(f,h),v=r?g?0:o(f,h):g?o(f+(f<0?Tt:-Tt),h):0;if(!e&&(u=s=g)&&t.lineStart(),g!==s&&(d=i(e,p),(zr(e,d)||zr(p,d))&&(p[0]+=At,p[1]+=At,g=a(p[0],p[1]))),g!==s)c=0,g?(t.lineStart(),d=i(p,e),t.point(d[0],d[1])):(d=i(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(n&&e&&r^g){var m;v&l||!(m=i(p,e,!0))||(c=0,r?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||e&&zr(e,p)||t.point(p[0],p[1]),e=p,s=g,l=v},lineEnd:function(){s&&t.lineEnd(),e=null},clean:function(){return c|(u&&s)<<1}}},In(t,6*St),r?[0,-t]:[-Tt,t-Tt]);function a(t,r){return Math.cos(t)*Math.cos(r)>e}function i(t,r,n){var a=[1,0,0],i=Rr(Or(t),Or(r)),o=Dr(i,i),l=i[0],s=o-l*l;if(!s)return!n&&t;var u=e*o/s,c=-e*l/s,f=Rr(a,i),h=Ir(a,u);Pr(h,Ir(i,c));var d=f,p=Dr(h,d),g=Dr(d,d),v=p*p-g*(Dr(h,h)-1);if(!(v<0)){var m=Math.sqrt(v),x=Ir(d,(-p-m)/g);if(Pr(x,h),x=Fr(x),!n)return x;var b,_=t[0],w=r[0],A=t[1],M=r[1];w<_&&(b=_,_=w,w=b);var T=w-_,k=y(T-Tt)<At;if(!k&&M<A&&(b=A,A=M,M=b),k||T<At?k?A+M>0^x[1]<(y(x[0]-_)<At?A:M):A<=x[1]&&x[1]<=M:T>Tt^(_<=x[0]&&x[0]<=w)){var E=Ir(d,(-p+m)/g);return Pr(E,h),[x,Fr(E)]}}}function o(e,n){var a=r?t:Tt-t,i=0;return e<-a?i|=1:e>a&&(i|=2),n<-a?i|=4:n>a&&(i|=8),i}}((b=+t)*St),T()):b},w.clipExtent=function(t){return arguments.length?(_=t,x=t?nn(t[0][0],t[0][1],t[1][0],t[1][1]):O,T()):_},w.scale=function(t){return arguments.length?(u=+t,M()):u},w.translate=function(t){return arguments.length?(c=+t[0],f=+t[1],M()):[c,f]},w.center=function(t){return arguments.length?(h=t[0]%360*St,d=t[1]%360*St,M()):[h*Lt,d*Lt]},w.rotate=function(t){return arguments.length?(p=t[0]%360*St,g=t[1]%360*St,v=t.length>2?t[2]%360*St:0,M()):[p*Lt,g*Lt,v*Lt]},t.rebind(w,s,"precision"),function(){return r=e.apply(this,arguments),w.invert=r.invert&&A,M()}}function Cn(t){return Tn(t,function(e,r){t.point(e*St,r*St)})}function Sn(t,e){return[t,e]}function Ln(t,e){return[t>Tt?t-kt:t<-Tt?t+kt:t,e]}function On(t,e,r){return t?e||r?Gr(Rn(t),Pn(e,r)):Rn(t):e||r?Pn(e,r):Ln}function Dn(t){return function(e,r){return[(e+=t)>Tt?e-kt:e<-Tt?e+kt:e,r]}}function Rn(t){var e=Dn(t);return e.invert=Dn(-t),e}function Pn(t,e){var r=Math.cos(t),n=Math.sin(t),a=Math.cos(e),i=Math.sin(e);function o(t,e){var o=Math.cos(e),l=Math.cos(t)*o,s=Math.sin(t)*o,u=Math.sin(e),c=u*r+l*n;return[Math.atan2(s*a-c*i,l*r-u*n),Pt(c*a+s*i)]}return o.invert=function(t,e){var o=Math.cos(e),l=Math.cos(t)*o,s=Math.sin(t)*o,u=Math.sin(e),c=u*a-s*i;return[Math.atan2(s*a+u*i,l*r+c*n),Pt(c*r-l*n)]},o}function In(t,e){var r=Math.cos(t),n=Math.sin(t);return function(a,i,o,l){var s=o*e;null!=a?(a=Bn(r,a),i=Bn(r,i),(o>0?a<i:a>i)&&(a+=o*kt)):(a=t+o*kt,i=t-.5*s);for(var u,c=a;o>0?c>i:c<i;c-=s)l.point((u=Fr([r,-n*Math.cos(c),-n*Math.sin(c)]))[0],u[1])}}function Bn(t,e){var r=Or(e);r[0]-=t,Br(r);var n=Rt(-r[1]);return((-r[2]<0?-n:n)+2*Math.PI-At)%(2*Math.PI)}function Fn(e,r,n){var a=t.range(e,r-At,n).concat(r);return function(t){return a.map(function(e){return[t,e]})}}function zn(e,r,n){var a=t.range(e,r-At,n).concat(r);return function(t){return a.map(function(e){return[e,t]})}}function Nn(t){return t.source}function jn(t){return t.target}t.geo.path=function(){var e,r,n,a,i,o=4.5;function l(e){return e&&("function"==typeof o&&a.pointRadius(+o.apply(this,arguments)),i&&i.valid||(i=n(a)),t.geo.stream(e,i)),a.result()}function s(){return i=null,l}return l.area=function(e){return ln=0,t.geo.stream(e,n(dn)),ln},l.centroid=function(e){return xr=br=_r=wr=Ar=Mr=Tr=kr=Er=0,t.geo.stream(e,n(yn)),Er?[Tr/Er,kr/Er]:Mr?[wr/Mr,Ar/Mr]:_r?[xr/_r,br/_r]:[NaN,NaN]},l.bounds=function(e){return fn=hn=-(un=cn=1/0),t.geo.stream(e,n(gn)),[[un,cn],[fn,hn]]},l.projection=function(t){return arguments.length?(n=(e=t)?t.stream||(r=t,a=An(function(t,e){return r([t*Lt,e*Lt])}),function(t){return Cn(a(t))}):O,s()):e;var r,a},l.context=function(t){return arguments.length?(a=null==(r=t)?new function(){var t=vn(4.5),e=[],r={point:n,lineStart:function(){r.point=a},lineEnd:o,polygonStart:function(){r.lineEnd=l},polygonEnd:function(){r.lineEnd=o,r.point=n},pointRadius:function(e){return t=vn(e),r},result:function(){if(e.length){var t=e.join("");return e=[],t}}};function n(r,n){e.push("M",r,",",n,t)}function a(t,n){e.push("M",t,",",n),r.point=i}function i(t,r){e.push("L",t,",",r)}function o(){r.point=n}function l(){e.push("Z")}return r}:new function(t){var e=4.5,r={point:n,lineStart:function(){r.point=a},lineEnd:o,polygonStart:function(){r.lineEnd=l},polygonEnd:function(){r.lineEnd=o,r.point=n},pointRadius:function(t){return e=t,r},result:I};function n(r,n){t.moveTo(r+e,n),t.arc(r,n,e,0,kt)}function a(e,n){t.moveTo(e,n),r.point=i}function i(e,r){t.lineTo(e,r)}function o(){r.point=n}function l(){t.closePath()}return r}(t),"function"!=typeof o&&a.pointRadius(o),s()):r},l.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(a.pointRadius(+t),+t),l):o},l.projection(t.geo.albersUsa()).context(null)},t.geo.transform=function(t){return{stream:function(e){var r=new Mn(e);for(var n in t)r[n]=t[n];return r}}},Mn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},t.geo.projection=kn,t.geo.projectionMutator=En,(t.geo.equirectangular=function(){return kn(Sn)}).raw=Sn.invert=Sn,t.geo.rotation=function(t){function e(e){return(e=t(e[0]*St,e[1]*St))[0]*=Lt,e[1]*=Lt,e}return t=On(t[0]%360*St,t[1]*St,t.length>2?t[2]*St:0),e.invert=function(e){return(e=t.invert(e[0]*St,e[1]*St))[0]*=Lt,e[1]*=Lt,e},e},Ln.invert=Sn,t.geo.circle=function(){var t,e,r=[0,0],n=6;function a(){var t="function"==typeof r?r.apply(this,arguments):r,n=On(-t[0]*St,-t[1]*St,0).invert,a=[];return e(null,null,1,{point:function(t,e){a.push(t=n(t,e)),t[0]*=Lt,t[1]*=Lt}}),{type:"Polygon",coordinates:[a]}}return a.origin=function(t){return arguments.length?(r=t,a):r},a.angle=function(r){return arguments.length?(e=In((t=+r)*St,n*St),a):t},a.precision=function(r){return arguments.length?(e=In(t*St,(n=+r)*St),a):n},a.angle(90)},t.geo.distance=function(t,e){var r,n=(e[0]-t[0])*St,a=t[1]*St,i=e[1]*St,o=Math.sin(n),l=Math.cos(n),s=Math.sin(a),u=Math.cos(a),c=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((r=f*o)*r+(r=u*c-s*f*l)*r),s*c+u*f*l)},t.geo.graticule=function(){var e,r,n,a,i,o,l,s,u,c,f,h,d=10,p=d,g=90,v=360,m=2.5;function x(){return{type:"MultiLineString",coordinates:b()}}function b(){return t.range(Math.ceil(a/g)*g,n,g).map(f).concat(t.range(Math.ceil(s/v)*v,l,v).map(h)).concat(t.range(Math.ceil(r/d)*d,e,d).filter(function(t){return y(t%g)>At}).map(u)).concat(t.range(Math.ceil(o/p)*p,i,p).filter(function(t){return y(t%v)>At}).map(c))}return x.lines=function(){return b().map(function(t){return{type:"LineString",coordinates:t}})},x.outline=function(){return{type:"Polygon",coordinates:[f(a).concat(h(l).slice(1),f(n).reverse().slice(1),h(s).reverse().slice(1))]}},x.extent=function(t){return arguments.length?x.majorExtent(t).minorExtent(t):x.minorExtent()},x.majorExtent=function(t){return arguments.length?(a=+t[0][0],n=+t[1][0],s=+t[0][1],l=+t[1][1],a>n&&(t=a,a=n,n=t),s>l&&(t=s,s=l,l=t),x.precision(m)):[[a,s],[n,l]]},x.minorExtent=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],o=+t[0][1],i=+t[1][1],r>e&&(t=r,r=e,e=t),o>i&&(t=o,o=i,i=t),x.precision(m)):[[r,o],[e,i]]},x.step=function(t){return arguments.length?x.majorStep(t).minorStep(t):x.minorStep()},x.majorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],x):[g,v]},x.minorStep=function(t){return arguments.length?(d=+t[0],p=+t[1],x):[d,p]},x.precision=function(t){return arguments.length?(m=+t,u=Fn(o,i,90),c=zn(r,e,m),f=Fn(s,l,90),h=zn(a,n,m),x):m},x.majorExtent([[-180,-90+At],[180,90-At]]).minorExtent([[-180,-80-At],[180,80+At]])},t.geo.greatArc=function(){var e,r,n=Nn,a=jn;function i(){return{type:"LineString",coordinates:[e||n.apply(this,arguments),r||a.apply(this,arguments)]}}return i.distance=function(){return t.geo.distance(e||n.apply(this,arguments),r||a.apply(this,arguments))},i.source=function(t){return arguments.length?(n=t,e="function"==typeof t?null:t,i):n},i.target=function(t){return arguments.length?(a=t,r="function"==typeof t?null:t,i):a},i.precision=function(){return arguments.length?i:0},i},t.geo.interpolate=function(t,e){return r=t[0]*St,n=t[1]*St,a=e[0]*St,i=e[1]*St,o=Math.cos(n),l=Math.sin(n),s=Math.cos(i),u=Math.sin(i),c=o*Math.cos(r),f=o*Math.sin(r),h=s*Math.cos(a),d=s*Math.sin(a),p=2*Math.asin(Math.sqrt(Bt(i-n)+o*s*Bt(a-r))),g=1/Math.sin(p),(v=p?function(t){var e=Math.sin(t*=p)*g,r=Math.sin(p-t)*g,n=r*c+e*h,a=r*f+e*d,i=r*l+e*u;return[Math.atan2(a,n)*Lt,Math.atan2(i,Math.sqrt(n*n+a*a))*Lt]}:function(){return[r*Lt,n*Lt]}).distance=p,v;var r,n,a,i,o,l,s,u,c,f,h,d,p,g,v},t.geo.length=function(e){return mn=0,t.geo.stream(e,Un),mn};var Un={sphere:I,point:I,lineStart:function(){var t,e,r;function n(n,a){var i=Math.sin(a*=St),o=Math.cos(a),l=y((n*=St)-t),s=Math.cos(l);mn+=Math.atan2(Math.sqrt((l=o*Math.sin(l))*l+(l=r*i-e*o*s)*l),e*i+r*o*s),t=n,e=i,r=o}Un.point=function(a,i){t=a*St,e=Math.sin(i*=St),r=Math.cos(i),Un.point=n},Un.lineEnd=function(){Un.point=Un.lineEnd=I}},lineEnd:I,polygonStart:I,polygonEnd:I};function Vn(t,e){function r(e,r){var n=Math.cos(e),a=Math.cos(r),i=t(n*a);return[i*a*Math.sin(e),i*Math.sin(r)]}return r.invert=function(t,r){var n=Math.sqrt(t*t+r*r),a=e(n),i=Math.sin(a),o=Math.cos(a);return[Math.atan2(t*i,n*o),Math.asin(n&&r*i/n)]},r}var Hn=Vn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(t.geo.azimuthalEqualArea=function(){return kn(Hn)}).raw=Hn;var qn=Vn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},O);function Gn(t,e){var r=Math.cos(t),n=function(t){return Math.tan(Tt/4+t/2)},a=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(n(e)/n(t)),i=r*Math.pow(n(t),a)/a;if(!a)return Wn;function o(t,e){i>0?e<-Ct+At&&(e=-Ct+At):e>Ct-At&&(e=Ct-At);var r=i/Math.pow(n(e),a);return[r*Math.sin(a*t),i-r*Math.cos(a*t)]}return o.invert=function(t,e){var r=i-e,n=Ot(a)*Math.sqrt(t*t+r*r);return[Math.atan2(t,r)/a,2*Math.atan(Math.pow(i/n,1/a))-Ct]},o}function Xn(t,e){var r=Math.cos(t),n=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),a=r/n+t;if(y(n)<At)return Sn;function i(t,e){var r=a-e;return[r*Math.sin(n*t),a-r*Math.cos(n*t)]}return i.invert=function(t,e){var r=a-e;return[Math.atan2(t,r)/n,a-Ot(n)*Math.sqrt(t*t+r*r)]},i}(t.geo.azimuthalEquidistant=function(){return kn(qn)}).raw=qn,(t.geo.conicConformal=function(){return an(Gn)}).raw=Gn,(t.geo.conicEquidistant=function(){return an(Xn)}).raw=Xn;var Yn=Vn(function(t){return 1/t},Math.atan);function Wn(t,e){return[t,Math.log(Math.tan(Tt/4+e/2))]}function Zn(t){var e,r=kn(t),n=r.scale,a=r.translate,i=r.clipExtent;return r.scale=function(){var t=n.apply(r,arguments);return t===r?e?r.clipExtent(null):r:t},r.translate=function(){var t=a.apply(r,arguments);return t===r?e?r.clipExtent(null):r:t},r.clipExtent=function(t){var o=i.apply(r,arguments);if(o===r){if(e=null==t){var l=Tt*n(),s=a();i([[s[0]-l,s[1]-l],[s[0]+l,s[1]+l]])}}else e&&(o=null);return o},r.clipExtent(null)}(t.geo.gnomonic=function(){return kn(Yn)}).raw=Yn,Wn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ct]},(t.geo.mercator=function(){return Zn(Wn)}).raw=Wn;var Jn=Vn(function(){return 1},Math.asin);(t.geo.orthographic=function(){return kn(Jn)}).raw=Jn;var Qn=Vn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function $n(t,e){return[Math.log(Math.tan(Tt/4+e/2)),-t]}function Kn(t){return t[0]}function ta(t){return t[1]}function ea(t){for(var e=t.length,r=[0,1],n=2,a=2;a<e;a++){for(;n>1&&Dt(t[r[n-2]],t[r[n-1]],t[a])<=0;)--n;r[n++]=a}return r.slice(0,n)}function ra(t,e){return t[0]-e[0]||t[1]-e[1]}(t.geo.stereographic=function(){return kn(Qn)}).raw=Qn,$n.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Ct]},(t.geo.transverseMercator=function(){var t=Zn($n),e=t.center,r=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return t?r([t[0],t[1],t.length>2?t[2]+90:90]):[(t=r())[0],t[1],t[2]-90]},r([0,0,90])}).raw=$n,t.geom={},t.geom.hull=function(t){var e=Kn,r=ta;if(arguments.length)return n(t);function n(t){if(t.length<3)return[];var n,a=ve(e),i=ve(r),o=t.length,l=[],s=[];for(n=0;n<o;n++)l.push([+a.call(this,t[n],n),+i.call(this,t[n],n),n]);for(l.sort(ra),n=0;n<o;n++)s.push([l[n][0],-l[n][1]]);var u=ea(l),c=ea(s),f=c[0]===u[0],h=c[c.length-1]===u[u.length-1],d=[];for(n=u.length-1;n>=0;--n)d.push(t[l[u[n]][2]]);for(n=+f;n<c.length-h;++n)d.push(t[l[c[n]][2]]);return d}return n.x=function(t){return arguments.length?(e=t,n):e},n.y=function(t){return arguments.length?(r=t,n):r},n},t.geom.polygon=function(t){return V(t,na),t};var na=t.geom.polygon.prototype=[];function aa(t,e,r){return(r[0]-e[0])*(t[1]-e[1])<(r[1]-e[1])*(t[0]-e[0])}function ia(t,e,r,n){var a=t[0],i=r[0],o=e[0]-a,l=n[0]-i,s=t[1],u=r[1],c=e[1]-s,f=n[1]-u,h=(l*(s-u)-f*(a-i))/(f*o-l*c);return[a+h*o,s+h*c]}function oa(t){var e=t[0],r=t[t.length-1];return!(e[0]-r[0]||e[1]-r[1])}na.area=function(){for(var t,e=-1,r=this.length,n=this[r-1],a=0;++e<r;)t=n,n=this[e],a+=t[1]*n[0]-t[0]*n[1];return.5*a},na.centroid=function(t){var e,r,n=-1,a=this.length,i=0,o=0,l=this[a-1];for(arguments.length||(t=-1/(6*this.area()));++n<a;)e=l,l=this[n],r=e[0]*l[1]-l[0]*e[1],i+=(e[0]+l[0])*r,o+=(e[1]+l[1])*r;return[i*t,o*t]},na.clip=function(t){for(var e,r,n,a,i,o,l=oa(t),s=-1,u=this.length-oa(this),c=this[u-1];++s<u;){for(e=t.slice(),t.length=0,a=this[s],i=e[(n=e.length-l)-1],r=-1;++r<n;)aa(o=e[r],c,a)?(aa(i,c,a)||t.push(ia(i,o,c,a)),t.push(o)):aa(i,c,a)&&t.push(ia(i,o,c,a)),i=o;l&&t.push(t[0]),c=a}return t};var la,sa,ua,ca,fa,ha=[],da=[];function pa(t){var e=ha.pop()||new function(){La(this),this.edge=this.site=this.circle=null};return e.site=t,e}function ga(t){Aa(t),ua.remove(t),ha.push(t),La(t)}function va(t){var e=t.circle,r=e.x,n=e.cy,a={x:r,y:n},i=t.P,o=t.N,l=[t];ga(t);for(var s=i;s.circle&&y(r-s.circle.x)<At&&y(n-s.circle.cy)<At;)i=s.P,l.unshift(s),ga(s),s=i;l.unshift(s),Aa(s);for(var u=o;u.circle&&y(r-u.circle.x)<At&&y(n-u.circle.cy)<At;)o=u.N,l.push(u),ga(u),u=o;l.push(u),Aa(u);var c,f=l.length;for(c=1;c<f;++c)u=l[c],s=l[c-1],Ea(u.edge,s.site,u.site,a);s=l[0],(u=l[f-1]).edge=ka(s.site,u.site,null,a),wa(s),wa(u)}function ma(t){for(var e,r,n,a,i=t.x,o=t.y,l=ua._;l;)if((n=ya(l,o)-i)>At)l=l.L;else{if(!((a=i-xa(l,o))>At)){n>-At?(e=l.P,r=l):a>-At?(e=l,r=l.N):e=r=l;break}if(!l.R){e=l;break}l=l.R}var s=pa(t);if(ua.insert(e,s),e||r){if(e===r)return Aa(e),r=pa(e.site),ua.insert(s,r),s.edge=r.edge=ka(e.site,s.site),wa(e),void wa(r);if(r){Aa(e),Aa(r);var u=e.site,c=u.x,f=u.y,h=t.x-c,d=t.y-f,p=r.site,g=p.x-c,v=p.y-f,m=2*(h*v-d*g),y=h*h+d*d,x=g*g+v*v,b={x:(v*y-d*x)/m+c,y:(h*x-g*y)/m+f};Ea(r.edge,u,p,b),s.edge=ka(u,t,null,b),r.edge=ka(t,p,null,b),wa(e),wa(r)}else s.edge=ka(e.site,s.site)}}function ya(t,e){var r=t.site,n=r.x,a=r.y,i=a-e;if(!i)return n;var o=t.P;if(!o)return-1/0;var l=(r=o.site).x,s=r.y,u=s-e;if(!u)return l;var c=l-n,f=1/i-1/u,h=c/u;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*u)-s+u/2+a-i/2)))/f+n:(n+l)/2}function xa(t,e){var r=t.N;if(r)return ya(r,e);var n=t.site;return n.y===e?n.x:1/0}function ba(t){this.site=t,this.edges=[]}function _a(t,e){return e.angle-t.angle}function wa(t){var e=t.P,r=t.N;if(e&&r){var n=e.site,a=t.site,i=r.site;if(n!==i){var o=a.x,l=a.y,s=n.x-o,u=n.y-l,c=i.x-o,f=2*(s*(v=i.y-l)-u*c);if(!(f>=-Mt)){var h=s*s+u*u,d=c*c+v*v,p=(v*h-u*d)/f,g=(s*d-c*h)/f,v=g+l,m=da.pop()||new function(){La(this),this.x=this.y=this.arc=this.site=this.cy=null};m.arc=t,m.site=a,m.x=p+o,m.y=v+Math.sqrt(p*p+g*g),m.cy=v,t.circle=m;for(var y=null,x=fa._;x;)if(m.y<x.y||m.y===x.y&&m.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}fa.insert(y,m),y||(ca=m)}}}}function Aa(t){var e=t.circle;e&&(e.P||(ca=e.N),fa.remove(e),da.push(e),La(e),t.circle=null)}function Ma(t,e){var r=t.b;if(r)return!0;var n,a,i=t.a,o=e[0][0],l=e[1][0],s=e[0][1],u=e[1][1],c=t.l,f=t.r,h=c.x,d=c.y,p=f.x,g=f.y,v=(h+p)/2,m=(d+g)/2;if(g===d){if(v<o||v>=l)return;if(h>p){if(i){if(i.y>=u)return}else i={x:v,y:s};r={x:v,y:u}}else{if(i){if(i.y<s)return}else i={x:v,y:u};r={x:v,y:s}}}else if(a=m-(n=(h-p)/(g-d))*v,n<-1||n>1)if(h>p){if(i){if(i.y>=u)return}else i={x:(s-a)/n,y:s};r={x:(u-a)/n,y:u}}else{if(i){if(i.y<s)return}else i={x:(u-a)/n,y:u};r={x:(s-a)/n,y:s}}else if(d<g){if(i){if(i.x>=l)return}else i={x:o,y:n*o+a};r={x:l,y:n*l+a}}else{if(i){if(i.x<o)return}else i={x:l,y:n*l+a};r={x:o,y:n*o+a}}return t.a=i,t.b=r,!0}function Ta(t,e){this.l=t,this.r=e,this.a=this.b=null}function ka(t,e,r,n){var a=new Ta(t,e);return la.push(a),r&&Ea(a,t,e,r),n&&Ea(a,e,t,n),sa[t.i].edges.push(new Ca(a,t,e)),sa[e.i].edges.push(new Ca(a,e,t)),a}function Ea(t,e,r,n){t.a||t.b?t.l===r?t.b=n:t.a=n:(t.a=n,t.l=e,t.r=r)}function Ca(t,e,r){var n=t.a,a=t.b;this.edge=t,this.site=e,this.angle=r?Math.atan2(r.y-e.y,r.x-e.x):t.l===e?Math.atan2(a.x-n.x,n.y-a.y):Math.atan2(n.x-a.x,a.y-n.y)}function Sa(){this._=null}function La(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Oa(t,e){var r=e,n=e.R,a=r.U;a?a.L===r?a.L=n:a.R=n:t._=n,n.U=a,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function Da(t,e){var r=e,n=e.L,a=r.U;a?a.L===r?a.L=n:a.R=n:t._=n,n.U=a,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function Ra(t){for(;t.L;)t=t.L;return t}function Pa(t,e){var r,n,a,i=t.sort(Ia).pop();for(la=[],sa=new Array(t.length),ua=new Sa,fa=new Sa;;)if(a=ca,i&&(!a||i.y<a.y||i.y===a.y&&i.x<a.x))i.x===r&&i.y===n||(sa[i.i]=new ba(i),ma(i),r=i.x,n=i.y),i=t.pop();else{if(!a)break;va(a.arc)}e&&(function(t){for(var e,r=la,n=en(t[0][0],t[0][1],t[1][0],t[1][1]),a=r.length;a--;)(!Ma(e=r[a],t)||!n(e)||y(e.a.x-e.b.x)<At&&y(e.a.y-e.b.y)<At)&&(e.a=e.b=null,r.splice(a,1))}(e),function(t){for(var e,r,n,a,i,o,l,s,u,c,f=t[0][0],h=t[1][0],d=t[0][1],p=t[1][1],g=sa,v=g.length;v--;)if((i=g[v])&&i.prepare())for(s=(l=i.edges).length,o=0;o<s;)n=(c=l[o].end()).x,a=c.y,e=(u=l[++o%s].start()).x,r=u.y,(y(n-e)>At||y(a-r)>At)&&(l.splice(o,0,new Ca((m=i.site,x=c,b=y(n-f)<At&&p-a>At?{x:f,y:y(e-f)<At?r:p}:y(a-p)<At&&h-n>At?{x:y(r-p)<At?e:h,y:p}:y(n-h)<At&&a-d>At?{x:h,y:y(e-h)<At?r:d}:y(a-d)<At&&n-f>At?{x:y(r-d)<At?e:f,y:d}:null,_=void 0,_=new Ta(m,null),_.a=x,_.b=b,la.push(_),_),i.site,null)),++s);var m,x,b,_}(e));var o={cells:sa,edges:la};return ua=fa=la=sa=null,o}function Ia(t,e){return e.y-t.y||e.x-t.x}ba.prototype.prepare=function(){for(var t,e=this.edges,r=e.length;r--;)(t=e[r].edge).b&&t.a||e.splice(r,1);return e.sort(_a),e.length},Ca.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Sa.prototype={insert:function(t,e){var r,n,a;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;r=t}else this._?(t=Ra(this._),e.P=null,e.N=t,t.P=t.L=e,r=t):(e.P=e.N=null,this._=e,r=null);for(e.L=e.R=null,e.U=r,e.C=!0,t=e;r&&r.C;)r===(n=r.U).L?(a=n.R)&&a.C?(r.C=a.C=!1,n.C=!0,t=n):(t===r.R&&(Oa(this,r),r=(t=r).U),r.C=!1,n.C=!0,Da(this,n)):(a=n.L)&&a.C?(r.C=a.C=!1,n.C=!0,t=n):(t===r.L&&(Da(this,r),r=(t=r).U),r.C=!1,n.C=!0,Oa(this,n)),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,r,n,a=t.U,i=t.L,o=t.R;if(r=i?o?Ra(o):i:o,a?a.L===t?a.L=r:a.R=r:this._=r,i&&o?(n=r.C,r.C=t.C,r.L=i,i.U=r,r!==o?(a=r.U,r.U=t.U,t=r.R,a.L=t,r.R=o,o.U=r):(r.U=a,a=r,t=r.R)):(n=t.C,t=r),t&&(t.U=a),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===a.L){if((e=a.R).C&&(e.C=!1,a.C=!0,Oa(this,a),e=a.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Da(this,e),e=a.R),e.C=a.C,a.C=e.R.C=!1,Oa(this,a),t=this._;break}}else if((e=a.L).C&&(e.C=!1,a.C=!0,Da(this,a),e=a.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Oa(this,e),e=a.L),e.C=a.C,a.C=e.L.C=!1,Da(this,a),t=this._;break}e.C=!0,t=a,a=a.U}while(!t.C);t&&(t.C=!1)}}},t.geom.voronoi=function(t){var e=Kn,r=ta,n=e,a=r,i=Ba;if(t)return o(t);function o(t){var e=new Array(t.length),r=i[0][0],n=i[0][1],a=i[1][0],o=i[1][1];return Pa(l(t),i).cells.forEach(function(i,l){var s=i.edges,u=i.site;(e[l]=s.length?s.map(function(t){var e=t.start();return[e.x,e.y]}):u.x>=r&&u.x<=a&&u.y>=n&&u.y<=o?[[r,o],[a,o],[a,n],[r,n]]:[]).point=t[l]}),e}function l(t){return t.map(function(t,e){return{x:Math.round(n(t,e)/At)*At,y:Math.round(a(t,e)/At)*At,i:e}})}return o.links=function(t){return Pa(l(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},o.triangles=function(t){var e=[];return Pa(l(t)).cells.forEach(function(r,n){for(var a,i,o,l,s=r.site,u=r.edges.sort(_a),c=-1,f=u.length,h=u[f-1].edge,d=h.l===s?h.r:h.l;++c<f;)h,a=d,d=(h=u[c].edge).l===s?h.r:h.l,n<a.i&&n<d.i&&(o=a,l=d,((i=s).x-l.x)*(o.y-i.y)-(i.x-o.x)*(l.y-i.y)<0)&&e.push([t[n],t[a.i],t[d.i]])}),e},o.x=function(t){return arguments.length?(n=ve(e=t),o):e},o.y=function(t){return arguments.length?(a=ve(r=t),o):r},o.clipExtent=function(t){return arguments.length?(i=null==t?Ba:t,o):i===Ba?null:i},o.size=function(t){return arguments.length?o.clipExtent(t&&[[0,0],t]):i===Ba?null:i&&i[1]},o};var Ba=[[-1e6,-1e6],[1e6,1e6]];function Fa(t){return t.x}function za(t){return t.y}function Na(e,r){e=t.rgb(e),r=t.rgb(r);var n=e.r,a=e.g,i=e.b,o=r.r-n,l=r.g-a,s=r.b-i;return function(t){return"#"+ue(Math.round(n+o*t))+ue(Math.round(a+l*t))+ue(Math.round(i+s*t))}}function ja(t,e){var r,n={},a={};for(r in t)r in e?n[r]=Ga(t[r],e[r]):a[r]=t[r];for(r in e)r in t||(a[r]=e[r]);return function(t){for(r in n)a[r]=n[r](t);return a}}function Ua(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function Va(t,e){var r,n,a,i=Ha.lastIndex=qa.lastIndex=0,o=-1,l=[],s=[];for(t+="",e+="";(r=Ha.exec(t))&&(n=qa.exec(e));)(a=n.index)>i&&(a=e.slice(i,a),l[o]?l[o]+=a:l[++o]=a),(r=r[0])===(n=n[0])?l[o]?l[o]+=n:l[++o]=n:(l[++o]=null,s.push({i:o,x:Ua(r,n)})),i=qa.lastIndex;return i<e.length&&(a=e.slice(i),l[o]?l[o]+=a:l[++o]=a),l.length<2?s[0]?(e=s[0].x,function(t){return e(t)+""}):function(){return e}:(e=s.length,function(t){for(var r,n=0;n<e;++n)l[(r=s[n]).i]=r.x(t);return l.join("")})}t.geom.delaunay=function(e){return t.geom.voronoi().triangles(e)},t.geom.quadtree=function(t,e,r,n,a){var i,o=Kn,l=ta;if(i=arguments.length)return o=Fa,l=za,3===i&&(a=r,n=e,r=e=0),s(t);function s(t){var s,u,c,f,h,d,p,g,v,m=ve(o),x=ve(l);if(null!=e)d=e,p=r,g=n,v=a;else if(g=v=-(d=p=1/0),u=[],c=[],h=t.length,i)for(f=0;f<h;++f)(s=t[f]).x<d&&(d=s.x),s.y<p&&(p=s.y),s.x>g&&(g=s.x),s.y>v&&(v=s.y),u.push(s.x),c.push(s.y);else for(f=0;f<h;++f){var b=+m(s=t[f],f),_=+x(s,f);b<d&&(d=b),_<p&&(p=_),b>g&&(g=b),_>v&&(v=_),u.push(b),c.push(_)}var w=g-d,A=v-p;function M(t,e,r,n,a,i,o,l){if(!isNaN(r)&&!isNaN(n))if(t.leaf){var s=t.x,u=t.y;if(null!=s)if(y(s-r)+y(u-n)<.01)T(t,e,r,n,a,i,o,l);else{var c=t.point;t.x=t.y=t.point=null,T(t,c,s,u,a,i,o,l),T(t,e,r,n,a,i,o,l)}else t.x=r,t.y=n,t.point=e}else T(t,e,r,n,a,i,o,l)}function T(t,e,r,n,a,i,o,l){var s=.5*(a+o),u=.5*(i+l),c=r>=s,f=n>=u,h=f<<1|c;t.leaf=!1,t=t.nodes[h]||(t.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){M(k,t,+m(t,++f),+x(t,f),d,p,g,v)}}),c?a=s:o=s,f?i=u:l=u,M(t,e,r,n,a,i,o,l)}w>A?v=p+w:g=d+A;var k={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){M(k,t,+m(t,++f),+x(t,f),d,p,g,v)}};if(k.visit=function(t){!function t(e,r,n,a,i,o){if(!e(r,n,a,i,o)){var l=.5*(n+i),s=.5*(a+o),u=r.nodes;u[0]&&t(e,u[0],n,a,l,s),u[1]&&t(e,u[1],l,a,i,s),u[2]&&t(e,u[2],n,s,l,o),u[3]&&t(e,u[3],l,s,i,o)}}(t,k,d,p,g,v)},k.find=function(t){return function(t,e,r,n,a,i,o){var l,s=1/0;return function t(u,c,f,h,d){if(!(c>i||f>o||h<n||d<a)){if(p=u.point){var p,g=e-u.x,v=r-u.y,m=g*g+v*v;if(m<s){var y=Math.sqrt(s=m);n=e-y,a=r-y,i=e+y,o=r+y,l=p}}for(var x=u.nodes,b=.5*(c+h),_=.5*(f+d),w=(r>=_)<<1|e>=b,A=w+4;w<A;++w)if(u=x[3&w])switch(3&w){case 0:t(u,c,f,b,_);break;case 1:t(u,b,f,h,_);break;case 2:t(u,c,_,b,d);break;case 3:t(u,b,_,h,d)}}}(t,n,a,i,o),l}(k,t[0],t[1],d,p,g,v)},f=-1,null==e){for(;++f<h;)M(k,t[f],u[f],c[f],d,p,g,v);--f}else t.forEach(k.add);return u=c=t=s=null,k}return s.x=function(t){return arguments.length?(o=t,s):o},s.y=function(t){return arguments.length?(l=t,s):l},s.extent=function(t){return arguments.length?(null==t?e=r=n=a=null:(e=+t[0][0],r=+t[0][1],n=+t[1][0],a=+t[1][1]),s):null==e?null:[[e,r],[n,a]]},s.size=function(t){return arguments.length?(null==t?e=r=n=a=null:(e=r=0,n=+t[0],a=+t[1]),s):null==e?null:[n-e,a-r]},s},t.interpolateRgb=Na,t.interpolateObject=ja,t.interpolateNumber=Ua,t.interpolateString=Va;var Ha=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qa=new RegExp(Ha.source,"g");function Ga(e,r){for(var n,a=t.interpolators.length;--a>=0&&!(n=t.interpolators[a](e,r)););return n}function Xa(t,e){var r,n=[],a=[],i=t.length,o=e.length,l=Math.min(t.length,e.length);for(r=0;r<l;++r)n.push(Ga(t[r],e[r]));for(;r<i;++r)a[r]=t[r];for(;r<o;++r)a[r]=e[r];return function(t){for(r=0;r<l;++r)a[r]=n[r](t);return a}}t.interpolate=Ga,t.interpolators=[function(t,e){var r=typeof e;return("string"===r?ge.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?Na:Va:e instanceof Ut?Na:Array.isArray(e)?Xa:"object"===r&&isNaN(e)?ja:Ua)(t,e)}],t.interpolateArray=Xa;var Ya=function(){return O},Wa=t.map({linear:Ya,poly:function(t){return function(e){return Math.pow(e,t)}},quad:function(){return $a},cubic:function(){return Ka},sin:function(){return ei},exp:function(){return ri},circle:function(){return ni},elastic:function(t,e){var r;arguments.length<2&&(e=.45);arguments.length?r=e/kt*Math.asin(1/t):(t=1,r=e/4);return function(n){return 1+t*Math.pow(2,-10*n)*Math.sin((n-r)*kt/e)}},back:function(t){t||(t=1.70158);return function(e){return e*e*((t+1)*e-t)}},bounce:function(){return ai}}),Za=t.map({in:O,out:Ja,"in-out":Qa,"out-in":function(t){return Qa(Ja(t))}});function Ja(t){return function(e){return 1-t(1-e)}}function Qa(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function $a(t){return t*t}function Ka(t){return t*t*t}function ti(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}function ei(t){return 1-Math.cos(t*Ct)}function ri(t){return Math.pow(2,10*(t-1))}function ni(t){return 1-Math.sqrt(1-t*t)}function ai(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function ii(t,e){return e-=t,function(r){return Math.round(t+e*r)}}function oi(t){var e,r,n,a=[t.a,t.b],i=[t.c,t.d],o=si(a),l=li(a,i),s=si(((e=i)[0]+=(n=-l)*(r=a)[0],e[1]+=n*r[1],e))||0;a[0]*i[1]<i[0]*a[1]&&(a[0]*=-1,a[1]*=-1,o*=-1,l*=-1),this.rotate=(o?Math.atan2(a[1],a[0]):Math.atan2(-i[0],i[1]))*Lt,this.translate=[t.e,t.f],this.scale=[o,s],this.skew=s?Math.atan2(l,s)*Lt:0}function li(t,e){return t[0]*e[0]+t[1]*e[1]}function si(t){var e=Math.sqrt(li(t,t));return e&&(t[0]/=e,t[1]/=e),e}t.ease=function(t){var r,n=t.indexOf("-"),a=n>=0?t.slice(0,n):t,i=n>=0?t.slice(n+1):"in";return a=Wa.get(a)||Ya,i=Za.get(i)||O,r=i(a.apply(null,e.call(arguments,1))),function(t){return t<=0?0:t>=1?1:r(t)}},t.interpolateHcl=function(e,r){e=t.hcl(e),r=t.hcl(r);var n=e.h,a=e.c,i=e.l,o=r.h-n,l=r.c-a,s=r.l-i;isNaN(l)&&(l=0,a=isNaN(a)?r.c:a);isNaN(o)?(o=0,n=isNaN(n)?r.h:n):o>180?o-=360:o<-180&&(o+=360);return function(t){return Yt(n+o*t,a+l*t,i+s*t)+""}},t.interpolateHsl=function(e,r){e=t.hsl(e),r=t.hsl(r);var n=e.h,a=e.s,i=e.l,o=r.h-n,l=r.s-a,s=r.l-i;isNaN(l)&&(l=0,a=isNaN(a)?r.s:a);isNaN(o)?(o=0,n=isNaN(n)?r.h:n):o>180?o-=360:o<-180&&(o+=360);return function(t){return qt(n+o*t,a+l*t,i+s*t)+""}},t.interpolateLab=function(e,r){e=t.lab(e),r=t.lab(r);var n=e.l,a=e.a,i=e.b,o=r.l-n,l=r.a-a,s=r.b-i;return function(t){return te(n+o*t,a+l*t,i+s*t)+""}},t.interpolateRound=ii,t.transform=function(e){var r=a.createElementNS(t.ns.prefix.svg,"g");return(t.transform=function(t){if(null!=t){r.setAttribute("transform",t);var e=r.transform.baseVal.consolidate()}return new oi(e?e.matrix:ui)})(e)},oi.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ui={a:1,b:0,c:0,d:1,e:0,f:0};function ci(t){return t.length?t.pop()+",":""}function fi(e,r){var n=[],a=[];return e=t.transform(e),r=t.transform(r),function(t,e,r,n){if(t[0]!==e[0]||t[1]!==e[1]){var a=r.push("translate(",null,",",null,")");n.push({i:a-4,x:Ua(t[0],e[0])},{i:a-2,x:Ua(t[1],e[1])})}else(e[0]||e[1])&&r.push("translate("+e+")")}(e.translate,r.translate,n,a),function(t,e,r,n){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),n.push({i:r.push(ci(r)+"rotate(",null,")")-2,x:Ua(t,e)})):e&&r.push(ci(r)+"rotate("+e+")")}(e.rotate,r.rotate,n,a),function(t,e,r,n){t!==e?n.push({i:r.push(ci(r)+"skewX(",null,")")-2,x:Ua(t,e)}):e&&r.push(ci(r)+"skewX("+e+")")}(e.skew,r.skew,n,a),function(t,e,r,n){if(t[0]!==e[0]||t[1]!==e[1]){var a=r.push(ci(r)+"scale(",null,",",null,")");n.push({i:a-4,x:Ua(t[0],e[0])},{i:a-2,x:Ua(t[1],e[1])})}else 1===e[0]&&1===e[1]||r.push(ci(r)+"scale("+e+")")}(e.scale,r.scale,n,a),e=r=null,function(t){for(var e,r=-1,i=a.length;++r<i;)n[(e=a[r]).i]=e.x(t);return n.join("")}}function hi(t,e){return e=(e-=t=+t)||1/e,function(r){return(r-t)/e}}function di(t,e){return e=(e-=t=+t)||1/e,function(r){return Math.max(0,Math.min(1,(r-t)/e))}}function pi(t){for(var e=t.source,r=t.target,n=function(t,e){if(t===e)return t;var r=gi(t),n=gi(e),a=r.pop(),i=n.pop(),o=null;for(;a===i;)o=a,a=r.pop(),i=n.pop();return o}(e,r),a=[e];e!==n;)e=e.parent,a.push(e);for(var i=a.length;r!==n;)a.splice(i,0,r),r=r.parent;return a}function gi(t){for(var e=[],r=t.parent;null!=r;)e.push(t),t=r,r=r.parent;return e.push(t),e}function vi(t){t.fixed|=2}function mi(t){t.fixed&=-7}function yi(t){t.fixed|=4,t.px=t.x,t.py=t.y}function xi(t){t.fixed&=-5}t.interpolateTransform=fi,t.layout={},t.layout.bundle=function(){return function(t){for(var e=[],r=-1,n=t.length;++r<n;)e.push(pi(t[r]));return e}},t.layout.chord=function(){var e,r,n,a,i,o,l,s={},u=0;function c(){var s,c,h,d,p,g={},v=[],m=t.range(a),y=[];for(e=[],r=[],s=0,d=-1;++d<a;){for(c=0,p=-1;++p<a;)c+=n[d][p];v.push(c),y.push(t.range(a)),s+=c}for(i&&m.sort(function(t,e){return i(v[t],v[e])}),o&&y.forEach(function(t,e){t.sort(function(t,r){return o(n[e][t],n[e][r])})}),s=(kt-u*a)/s,c=0,d=-1;++d<a;){for(h=c,p=-1;++p<a;){var x=m[d],b=y[x][p],_=n[x][b],w=c,A=c+=_*s;g[x+"-"+b]={index:x,subindex:b,startAngle:w,endAngle:A,value:_}}r[x]={index:x,startAngle:h,endAngle:c,value:v[x]},c+=u}for(d=-1;++d<a;)for(p=d-1;++p<a;){var M=g[d+"-"+p],T=g[p+"-"+d];(M.value||T.value)&&e.push(M.value<T.value?{source:T,target:M}:{source:M,target:T})}l&&f()}function f(){e.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}return s.matrix=function(t){return arguments.length?(a=(n=t)&&n.length,e=r=null,s):n},s.padding=function(t){return arguments.length?(u=t,e=r=null,s):u},s.sortGroups=function(t){return arguments.length?(i=t,e=r=null,s):i},s.sortSubgroups=function(t){return arguments.length?(o=t,e=null,s):o},s.sortChords=function(t){return arguments.length?(l=t,e&&f(),s):l},s.chords=function(){return e||c(),e},s.groups=function(){return r||c(),r},s},t.layout.force=function(){var e,r,n,a,i,o,l={},s=t.dispatch("start","tick","end"),u=[1,1],c=.9,f=bi,h=_i,d=-30,p=wi,g=.1,v=.64,m=[],y=[];function x(t){return function(e,r,n,a){if(e.point!==t){var i=e.cx-t.x,o=e.cy-t.y,l=a-r,s=i*i+o*o;if(l*l/v<s){if(s<p){var u=e.charge/s;t.px-=i*u,t.py-=o*u}return!0}if(e.point&&s&&s<p){u=e.pointCharge/s;t.px-=i*u,t.py-=o*u}}return!e.charge}}function b(e){e.px=t.event.x,e.py=t.event.y,l.resume()}return l.tick=function(){if((n*=.99)<.005)return e=null,s.end({type:"end",alpha:n=0}),!0;var r,l,f,h,p,v,b,_,w,A=m.length,M=y.length;for(l=0;l<M;++l)h=(f=y[l]).source,(v=(_=(p=f.target).x-h.x)*_+(w=p.y-h.y)*w)&&(_*=v=n*i[l]*((v=Math.sqrt(v))-a[l])/v,w*=v,p.x-=_*(b=h.weight+p.weight?h.weight/(h.weight+p.weight):.5),p.y-=w*b,h.x+=_*(b=1-b),h.y+=w*b);if((b=n*g)&&(_=u[0]/2,w=u[1]/2,l=-1,b))for(;++l<A;)(f=m[l]).x+=(_-f.x)*b,f.y+=(w-f.y)*b;if(d)for(!function t(e,r,n){var a=0,i=0;e.charge=0;if(!e.leaf)for(var o,l=e.nodes,s=l.length,u=-1;++u<s;)null!=(o=l[u])&&(t(o,r,n),e.charge+=o.charge,a+=o.charge*o.cx,i+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var c=r*n[e.point.index];e.charge+=e.pointCharge=c,a+=c*e.point.x,i+=c*e.point.y}e.cx=a/e.charge;e.cy=i/e.charge}(r=t.geom.quadtree(m),n,o),l=-1;++l<A;)(f=m[l]).fixed||r.visit(x(f));for(l=-1;++l<A;)(f=m[l]).fixed?(f.x=f.px,f.y=f.py):(f.x-=(f.px-(f.px=f.x))*c,f.y-=(f.py-(f.py=f.y))*c);s.tick({type:"tick",alpha:n})},l.nodes=function(t){return arguments.length?(m=t,l):m},l.links=function(t){return arguments.length?(y=t,l):y},l.size=function(t){return arguments.length?(u=t,l):u},l.linkDistance=function(t){return arguments.length?(f="function"==typeof t?t:+t,l):f},l.distance=l.linkDistance,l.linkStrength=function(t){return arguments.length?(h="function"==typeof t?t:+t,l):h},l.friction=function(t){return arguments.length?(c=+t,l):c},l.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,l):d},l.chargeDistance=function(t){return arguments.length?(p=t*t,l):Math.sqrt(p)},l.gravity=function(t){return arguments.length?(g=+t,l):g},l.theta=function(t){return arguments.length?(v=t*t,l):Math.sqrt(v)},l.alpha=function(t){return arguments.length?(t=+t,n?t>0?n=t:(e.c=null,e.t=NaN,e=null,s.end({type:"end",alpha:n=0})):t>0&&(s.start({type:"start",alpha:n=t}),e=Me(l.tick)),l):n},l.start=function(){var t,e,r,n=m.length,s=y.length,c=u[0],p=u[1];for(t=0;t<n;++t)(r=m[t]).index=t,r.weight=0;for(t=0;t<s;++t)"number"==typeof(r=y[t]).source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(t=0;t<n;++t)r=m[t],isNaN(r.x)&&(r.x=g("x",c)),isNaN(r.y)&&(r.y=g("y",p)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(a=[],"function"==typeof f)for(t=0;t<s;++t)a[t]=+f.call(this,y[t],t);else for(t=0;t<s;++t)a[t]=f;if(i=[],"function"==typeof h)for(t=0;t<s;++t)i[t]=+h.call(this,y[t],t);else for(t=0;t<s;++t)i[t]=h;if(o=[],"function"==typeof d)for(t=0;t<n;++t)o[t]=+d.call(this,m[t],t);else for(t=0;t<n;++t)o[t]=d;function g(r,a){if(!e){for(e=new Array(n),u=0;u<n;++u)e[u]=[];for(u=0;u<s;++u){var i=y[u];e[i.source.index].push(i.target),e[i.target.index].push(i.source)}}for(var o,l=e[t],u=-1,c=l.length;++u<c;)if(!isNaN(o=l[u][r]))return o;return Math.random()*a}return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){if(r||(r=t.behavior.drag().origin(O).on("dragstart.force",vi).on("drag.force",b).on("dragend.force",mi)),!arguments.length)return r;this.on("mouseover.force",yi).on("mouseout.force",xi).call(r)},t.rebind(l,s,"on")};var bi=20,_i=1,wi=1/0;function Ai(e,r){return t.rebind(e,r,"sort","children","value"),e.nodes=e,e.links=Si,e}function Mi(t,e){for(var r=[t];null!=(t=r.pop());)if(e(t),(a=t.children)&&(n=a.length))for(var n,a;--n>=0;)r.push(a[n])}function Ti(t,e){for(var r=[t],n=[];null!=(t=r.pop());)if(n.push(t),(i=t.children)&&(a=i.length))for(var a,i,o=-1;++o<a;)r.push(i[o]);for(;null!=(t=n.pop());)e(t)}function ki(t){return t.children}function Ei(t){return t.value}function Ci(t,e){return e.value-t.value}function Si(e){return t.merge(e.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}t.layout.hierarchy=function(){var t=Ci,e=ki,r=Ei;function n(a){var i,o=[a],l=[];for(a.depth=0;null!=(i=o.pop());)if(l.push(i),(u=e.call(n,i,i.depth))&&(s=u.length)){for(var s,u,c;--s>=0;)o.push(c=u[s]),c.parent=i,c.depth=i.depth+1;r&&(i.value=0),i.children=u}else r&&(i.value=+r.call(n,i,i.depth)||0),delete i.children;return Ti(a,function(e){var n,a;t&&(n=e.children)&&n.sort(t),r&&(a=e.parent)&&(a.value+=e.value)}),l}return n.sort=function(e){return arguments.length?(t=e,n):t},n.children=function(t){return arguments.length?(e=t,n):e},n.value=function(t){return arguments.length?(r=t,n):r},n.revalue=function(t){return r&&(Mi(t,function(t){t.children&&(t.value=0)}),Ti(t,function(t){var e;t.children||(t.value=+r.call(n,t,t.depth)||0),(e=t.parent)&&(e.value+=t.value)})),t},n},t.layout.partition=function(){var e=t.layout.hierarchy(),r=[1,1];function n(t,n){var a=e.call(this,t,n);return function t(e,r,n,a){var i=e.children;if(e.x=r,e.y=e.depth*a,e.dx=n,e.dy=a,i&&(o=i.length)){var o,l,s,u=-1;for(n=e.value?n/e.value:0;++u<o;)t(l=i[u],r,s=l.value*n,a),r+=s}}(a[0],0,r[0],r[1]/function t(e){var r=e.children,n=0;if(r&&(a=r.length))for(var a,i=-1;++i<a;)n=Math.max(n,t(r[i]));return 1+n}(a[0])),a}return n.size=function(t){return arguments.length?(r=t,n):r},Ai(n,e)},t.layout.pie=function(){var e=Number,r=Li,n=0,a=kt,i=0;function o(l){var s,u=l.length,c=l.map(function(t,r){return+e.call(o,t,r)}),f=+("function"==typeof n?n.apply(this,arguments):n),h=("function"==typeof a?a.apply(this,arguments):a)-f,d=Math.min(Math.abs(h)/u,+("function"==typeof i?i.apply(this,arguments):i)),p=d*(h<0?-1:1),g=t.sum(c),v=g?(h-u*p)/g:0,m=t.range(u),y=[];return null!=r&&m.sort(r===Li?function(t,e){return c[e]-c[t]}:function(t,e){return r(l[t],l[e])}),m.forEach(function(t){y[t]={data:l[t],value:s=c[t],startAngle:f,endAngle:f+=s*v+p,padAngle:d}}),y}return o.value=function(t){return arguments.length?(e=t,o):e},o.sort=function(t){return arguments.length?(r=t,o):r},o.startAngle=function(t){return arguments.length?(n=t,o):n},o.endAngle=function(t){return arguments.length?(a=t,o):a},o.padAngle=function(t){return arguments.length?(i=t,o):i},o};var Li={};function Oi(t){return t.x}function Di(t){return t.y}function Ri(t,e,r){t.y0=e,t.y=r}t.layout.stack=function(){var e=O,r=Bi,n=Fi,a=Ri,i=Oi,o=Di;function l(s,u){if(!(d=s.length))return s;var c=s.map(function(t,r){return e.call(l,t,r)}),f=c.map(function(t){return t.map(function(t,e){return[i.call(l,t,e),o.call(l,t,e)]})}),h=r.call(l,f,u);c=t.permute(c,h),f=t.permute(f,h);var d,p,g,v,m=n.call(l,f,u),y=c[0].length;for(g=0;g<y;++g)for(a.call(l,c[0][g],v=m[g],f[0][g][1]),p=1;p<d;++p)a.call(l,c[p][g],v+=f[p-1][g][1],f[p][g][1]);return s}return l.values=function(t){return arguments.length?(e=t,l):e},l.order=function(t){return arguments.length?(r="function"==typeof t?t:Pi.get(t)||Bi,l):r},l.offset=function(t){return arguments.length?(n="function"==typeof t?t:Ii.get(t)||Fi,l):n},l.x=function(t){return arguments.length?(i=t,l):i},l.y=function(t){return arguments.length?(o=t,l):o},l.out=function(t){return arguments.length?(a=t,l):a},l};var Pi=t.map({"inside-out":function(e){var r,n,a=e.length,i=e.map(zi),o=e.map(Ni),l=t.range(a).sort(function(t,e){return i[t]-i[e]}),s=0,u=0,c=[],f=[];for(r=0;r<a;++r)n=l[r],s<u?(s+=o[n],c.push(n)):(u+=o[n],f.push(n));return f.reverse().concat(c)},reverse:function(e){return t.range(e.length).reverse()},default:Bi}),Ii=t.map({silhouette:function(t){var e,r,n,a=t.length,i=t[0].length,o=[],l=0,s=[];for(r=0;r<i;++r){for(e=0,n=0;e<a;e++)n+=t[e][r][1];n>l&&(l=n),o.push(n)}for(r=0;r<i;++r)s[r]=(l-o[r])/2;return s},wiggle:function(t){var e,r,n,a,i,o,l,s,u,c=t.length,f=t[0],h=f.length,d=[];for(d[0]=s=u=0,r=1;r<h;++r){for(e=0,a=0;e<c;++e)a+=t[e][r][1];for(e=0,i=0,l=f[r][0]-f[r-1][0];e<c;++e){for(n=0,o=(t[e][r][1]-t[e][r-1][1])/(2*l);n<e;++n)o+=(t[n][r][1]-t[n][r-1][1])/l;i+=o*t[e][r][1]}d[r]=s-=a?i/a*l:0,s<u&&(u=s)}for(r=0;r<h;++r)d[r]-=u;return d},expand:function(t){var e,r,n,a=t.length,i=t[0].length,o=1/a,l=[];for(r=0;r<i;++r){for(e=0,n=0;e<a;e++)n+=t[e][r][1];if(n)for(e=0;e<a;e++)t[e][r][1]/=n;else for(e=0;e<a;e++)t[e][r][1]=o}for(r=0;r<i;++r)l[r]=0;return l},zero:Fi});function Bi(e){return t.range(e.length)}function Fi(t){for(var e=-1,r=t[0].length,n=[];++e<r;)n[e]=0;return n}function zi(t){for(var e,r=1,n=0,a=t[0][1],i=t.length;r<i;++r)(e=t[r][1])>a&&(n=r,a=e);return n}function Ni(t){return t.reduce(ji,0)}function ji(t,e){return t+e[1]}function Ui(t,e){return Vi(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Vi(t,e){for(var r=-1,n=+t[0],a=(t[1]-n)/e,i=[];++r<=e;)i[r]=a*r+n;return i}function Hi(e){return[t.min(e),t.max(e)]}function qi(t,e){return t.value-e.value}function Gi(t,e){var r=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=r,r._pack_prev=e}function Xi(t,e){t._pack_next=e,e._pack_prev=t}function Yi(t,e){var r=e.x-t.x,n=e.y-t.y,a=t.r+e.r;return.999*a*a>r*r+n*n}function Wi(t){if((e=t.children)&&(s=e.length)){var e,r,n,a,i,o,l,s,u=1/0,c=-1/0,f=1/0,h=-1/0;if(e.forEach(Zi),(r=e[0]).x=-r.r,r.y=0,x(r),s>1&&((n=e[1]).x=n.r,n.y=0,x(n),s>2))for(Qi(r,n,a=e[2]),x(a),Gi(r,a),r._pack_prev=a,Gi(a,n),n=r._pack_next,i=3;i<s;i++){Qi(r,n,a=e[i]);var d=0,p=1,g=1;for(o=n._pack_next;o!==n;o=o._pack_next,p++)if(Yi(o,a)){d=1;break}if(1==d)for(l=r._pack_prev;l!==o._pack_prev&&!Yi(l,a);l=l._pack_prev,g++);d?(p<g||p==g&&n.r<r.r?Xi(r,n=o):Xi(r=l,n),i--):(Gi(r,a),n=a,x(a))}var v=(u+c)/2,m=(f+h)/2,y=0;for(i=0;i<s;i++)(a=e[i]).x-=v,a.y-=m,y=Math.max(y,a.r+Math.sqrt(a.x*a.x+a.y*a.y));t.r=y,e.forEach(Ji)}function x(t){u=Math.min(t.x-t.r,u),c=Math.max(t.x+t.r,c),f=Math.min(t.y-t.r,f),h=Math.max(t.y+t.r,h)}}function Zi(t){t._pack_next=t._pack_prev=t}function Ji(t){delete t._pack_next,delete t._pack_prev}function Qi(t,e,r){var n=t.r+r.r,a=e.x-t.x,i=e.y-t.y;if(n&&(a||i)){var o=e.r+r.r,l=a*a+i*i,s=.5+((n*=n)-(o*=o))/(2*l),u=Math.sqrt(Math.max(0,2*o*(n+l)-(n-=l)*n-o*o))/(2*l);r.x=t.x+s*a+u*i,r.y=t.y+s*i-u*a}else r.x=t.x+n,r.y=t.y}function $i(t,e){return t.parent==e.parent?1:2}function Ki(t){var e=t.children;return e.length?e[0]:t.t}function to(t){var e,r=t.children;return(e=r.length)?r[e-1]:t.t}function eo(t,e,r){var n=r/(e.i-t.i);e.c-=n,e.s+=r,t.c+=n,e.z+=r,e.m+=r}function ro(t,e,r){return t.a.parent===e.parent?t.a:r}function no(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function ao(t,e){var r=t.x+e[3],n=t.y+e[0],a=t.dx-e[1]-e[3],i=t.dy-e[0]-e[2];return a<0&&(r+=a/2,a=0),i<0&&(n+=i/2,i=0),{x:r,y:n,dx:a,dy:i}}function io(t){var e=t[0],r=t[t.length-1];return e<r?[e,r]:[r,e]}function oo(t){return t.rangeExtent?t.rangeExtent():io(t.range())}function lo(t,e,r,n){var a=r(t[0],t[1]),i=n(e[0],e[1]);return function(t){return i(a(t))}}function so(t,e){var r,n=0,a=t.length-1,i=t[n],o=t[a];return o<i&&(r=n,n=a,a=r,r=i,i=o,o=r),t[n]=e.floor(i),t[a]=e.ceil(o),t}function uo(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:co}t.layout.histogram=function(){var e=!0,r=Number,n=Hi,a=Ui;function i(i,o){for(var l,s,u=[],c=i.map(r,this),f=n.call(this,c,o),h=a.call(this,f,c,o),d=(o=-1,c.length),p=h.length-1,g=e?1:1/d;++o<p;)(l=u[o]=[]).dx=h[o+1]-(l.x=h[o]),l.y=0;if(p>0)for(o=-1;++o<d;)(s=c[o])>=f[0]&&s<=f[1]&&((l=u[t.bisect(h,s,1,p)-1]).y+=g,l.push(i[o]));return u}return i.value=function(t){return arguments.length?(r=t,i):r},i.range=function(t){return arguments.length?(n=ve(t),i):n},i.bins=function(t){return arguments.length?(a="number"==typeof t?function(e){return Vi(e,t)}:ve(t),i):a},i.frequency=function(t){return arguments.length?(e=!!t,i):e},i},t.layout.pack=function(){var e,r=t.layout.hierarchy().sort(qi),n=0,a=[1,1];function i(t,i){var o=r.call(this,t,i),l=o[0],s=a[0],u=a[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(l.x=l.y=0,Ti(l,function(t){t.r=+c(t.value)}),Ti(l,Wi),n){var f=n*(e?1:Math.max(2*l.r/s,2*l.r/u))/2;Ti(l,function(t){t.r+=f}),Ti(l,Wi),Ti(l,function(t){t.r-=f})}return function t(e,r,n,a){var i=e.children;e.x=r+=a*e.x;e.y=n+=a*e.y;e.r*=a;if(i)for(var o=-1,l=i.length;++o<l;)t(i[o],r,n,a)}(l,s/2,u/2,e?1:1/Math.max(2*l.r/s,2*l.r/u)),o}return i.size=function(t){return arguments.length?(a=t,i):a},i.radius=function(t){return arguments.length?(e=null==t||"function"==typeof t?t:+t,i):e},i.padding=function(t){return arguments.length?(n=+t,i):n},Ai(i,r)},t.layout.tree=function(){var e=t.layout.hierarchy().sort(null).value(null),r=$i,n=[1,1],a=null;function i(t,i){var u=e.call(this,t,i),c=u[0],f=function(t){var e,r={A:null,children:[t]},n=[r];for(;null!=(e=n.pop());)for(var a,i=e.children,o=0,l=i.length;o<l;++o)n.push((i[o]=a={_:i[o],parent:e,children:(a=i[o].children)&&a.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=a);return r.children[0]}(c);if(Ti(f,o),f.parent.m=-f.z,Mi(f,l),a)Mi(c,s);else{var h=c,d=c,p=c;Mi(c,function(t){t.x<h.x&&(h=t),t.x>d.x&&(d=t),t.depth>p.depth&&(p=t)});var g=r(h,d)/2-h.x,v=n[0]/(d.x+r(d,h)/2+g),m=n[1]/(p.depth||1);Mi(c,function(t){t.x=(t.x+g)*v,t.y=t.depth*m})}return u}function o(t){var e=t.children,n=t.parent.children,a=t.i?n[t.i-1]:null;if(e.length){!function(t){var e,r=0,n=0,a=t.children,i=a.length;for(;--i>=0;)(e=a[i]).z+=r,e.m+=r,r+=e.s+(n+=e.c)}(t);var i=(e[0].z+e[e.length-1].z)/2;a?(t.z=a.z+r(t._,a._),t.m=t.z-i):t.z=i}else a&&(t.z=a.z+r(t._,a._));t.parent.A=function(t,e,n){if(e){for(var a,i=t,o=t,l=e,s=i.parent.children[0],u=i.m,c=o.m,f=l.m,h=s.m;l=to(l),i=Ki(i),l&&i;)s=Ki(s),(o=to(o)).a=t,(a=l.z+f-i.z-u+r(l._,i._))>0&&(eo(ro(l,t,n),t,a),u+=a,c+=a),f+=l.m,u+=i.m,h+=s.m,c+=o.m;l&&!to(o)&&(o.t=l,o.m+=f-c),i&&!Ki(s)&&(s.t=i,s.m+=u-h,n=t)}return n}(t,a,t.parent.A||n[0])}function l(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=n[0],t.y=t.depth*n[1]}return i.separation=function(t){return arguments.length?(r=t,i):r},i.size=function(t){return arguments.length?(a=null==(n=t)?s:null,i):a?null:n},i.nodeSize=function(t){return arguments.length?(a=null==(n=t)?null:s,i):a?n:null},Ai(i,e)},t.layout.cluster=function(){var e=t.layout.hierarchy().sort(null).value(null),r=$i,n=[1,1],a=!1;function i(i,o){var l,s=e.call(this,i,o),u=s[0],c=0;Ti(u,function(e){var n=e.children;n&&n.length?(e.x=function(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}(n),e.y=function(e){return 1+t.max(e,function(t){return t.y})}(n)):(e.x=l?c+=r(e,l):0,e.y=0,l=e)});var f=function t(e){var r=e.children;return r&&r.length?t(r[0]):e}(u),h=function t(e){var r,n=e.children;return n&&(r=n.length)?t(n[r-1]):e}(u),d=f.x-r(f,h)/2,p=h.x+r(h,f)/2;return Ti(u,a?function(t){t.x=(t.x-u.x)*n[0],t.y=(u.y-t.y)*n[1]}:function(t){t.x=(t.x-d)/(p-d)*n[0],t.y=(1-(u.y?t.y/u.y:1))*n[1]}),s}return i.separation=function(t){return arguments.length?(r=t,i):r},i.size=function(t){return arguments.length?(a=null==(n=t),i):a?null:n},i.nodeSize=function(t){return arguments.length?(a=null!=(n=t),i):a?n:null},Ai(i,e)},t.layout.treemap=function(){var e,r=t.layout.hierarchy(),n=Math.round,a=[1,1],i=null,o=no,l=!1,s="squarify",u=.5*(1+Math.sqrt(5));function c(t,e){for(var r,n,a=-1,i=t.length;++a<i;)n=(r=t[a]).value*(e<0?0:e),r.area=isNaN(n)||n<=0?0:n}function f(t){var e=t.children;if(e&&e.length){var r,n,a,i=o(t),l=[],u=e.slice(),h=1/0,g="slice"===s?i.dx:"dice"===s?i.dy:"slice-dice"===s?1&t.depth?i.dy:i.dx:Math.min(i.dx,i.dy);for(c(u,i.dx*i.dy/t.value),l.area=0;(a=u.length)>0;)l.push(r=u[a-1]),l.area+=r.area,"squarify"!==s||(n=d(l,g))<=h?(u.pop(),h=n):(l.area-=l.pop().area,p(l,g,i,!1),g=Math.min(i.dx,i.dy),l.length=l.area=0,h=1/0);l.length&&(p(l,g,i,!0),l.length=l.area=0),e.forEach(f)}}function h(t){var e=t.children;if(e&&e.length){var r,n=o(t),a=e.slice(),i=[];for(c(a,n.dx*n.dy/t.value),i.area=0;r=a.pop();)i.push(r),i.area+=r.area,null!=r.z&&(p(i,r.z?n.dx:n.dy,n,!a.length),i.length=i.area=0);e.forEach(h)}}function d(t,e){for(var r,n=t.area,a=0,i=1/0,o=-1,l=t.length;++o<l;)(r=t[o].area)&&(r<i&&(i=r),r>a&&(a=r));return e*=e,(n*=n)?Math.max(e*a*u/n,n/(e*i*u)):1/0}function p(t,e,r,a){var i,o=-1,l=t.length,s=r.x,u=r.y,c=e?n(t.area/e):0;if(e==r.dx){for((a||c>r.dy)&&(c=r.dy);++o<l;)(i=t[o]).x=s,i.y=u,i.dy=c,s+=i.dx=Math.min(r.x+r.dx-s,c?n(i.area/c):0);i.z=!0,i.dx+=r.x+r.dx-s,r.y+=c,r.dy-=c}else{for((a||c>r.dx)&&(c=r.dx);++o<l;)(i=t[o]).x=s,i.y=u,i.dx=c,u+=i.dy=Math.min(r.y+r.dy-u,c?n(i.area/c):0);i.z=!1,i.dy+=r.y+r.dy-u,r.x+=c,r.dx-=c}}function g(t){var n=e||r(t),i=n[0];return i.x=i.y=0,i.value?(i.dx=a[0],i.dy=a[1]):i.dx=i.dy=0,e&&r.revalue(i),c([i],i.dx*i.dy/i.value),(e?h:f)(i),l&&(e=n),n}return g.size=function(t){return arguments.length?(a=t,g):a},g.padding=function(t){if(!arguments.length)return i;function e(e){return ao(e,t)}var r;return o=null==(i=t)?no:"function"==(r=typeof t)?function(e){var r=t.call(g,e,e.depth);return null==r?no(e):ao(e,"number"==typeof r?[r,r,r,r]:r)}:"number"===r?(t=[t,t,t,t],e):e,g},g.round=function(t){return arguments.length?(n=t?Math.round:Number,g):n!=Number},g.sticky=function(t){return arguments.length?(l=t,e=null,g):l},g.ratio=function(t){return arguments.length?(u=t,g):u},g.mode=function(t){return arguments.length?(s=t+"",g):s},Ai(g,r)},t.random={normal:function(t,e){var r=arguments.length;return r<2&&(e=1),r<1&&(t=0),function(){var r,n,a;do{a=(r=2*Math.random()-1)*r+(n=2*Math.random()-1)*n}while(!a||a>1);return t+e*r*Math.sqrt(-2*Math.log(a)/a)}},logNormal:function(){var e=t.random.normal.apply(t,arguments);return function(){return Math.exp(e())}},bates:function(e){var r=t.random.irwinHall(e);return function(){return r()/e}},irwinHall:function(t){return function(){for(var e=0,r=0;r<t;r++)e+=Math.random();return e}}},t.scale={};var co={floor:O,ceil:O};function fo(e,r,n,a){var i=[],o=[],l=0,s=Math.min(e.length,r.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),r=r.slice().reverse());++l<=s;)i.push(n(e[l-1],e[l])),o.push(a(r[l-1],r[l]));return function(r){var n=t.bisect(e,r,1,s)-1;return o[n](i[n](r))}}function ho(e,r){return t.rebind(e,r,"range","rangeRound","interpolate","clamp")}function po(t,e){return so(t,uo(go(t,e)[2])),so(t,uo(go(t,e)[2])),t}function go(t,e){null==e&&(e=10);var r=io(t),n=r[1]-r[0],a=Math.pow(10,Math.floor(Math.log(n/e)/Math.LN10)),i=e/n*a;return i<=.15?a*=10:i<=.35?a*=5:i<=.75&&(a*=2),r[0]=Math.ceil(r[0]/a)*a,r[1]=Math.floor(r[1]/a)*a+.5*a,r[2]=a,r}function vo(e,r){return t.range.apply(t,go(e,r))}function mo(e,r,n){var a=go(e,r);if(n){var i=Le.exec(n);if(i.shift(),"s"===i[8]){var o=t.formatPrefix(Math.max(y(a[0]),y(a[1])));return i[7]||(i[7]="."+xo(o.scale(a[2]))),i[8]="f",n=t.format(i.join("")),function(t){return n(o.scale(t))+o.symbol}}i[7]||(i[7]="."+function(t,e){var r=xo(e[2]);return t in yo?Math.abs(r-xo(Math.max(y(e[0]),y(e[1]))))+ +("e"!==t):r-2*("%"===t)}(i[8],a)),n=i.join("")}else n=",."+xo(a[2])+"f";return t.format(n)}t.scale.linear=function(){return function t(e,r,n,a){var i,o;function l(){var t=Math.min(e.length,r.length)>2?fo:lo,l=a?di:hi;return i=t(e,r,l,n),o=t(r,e,l,Ga),s}function s(t){return i(t)}s.invert=function(t){return o(t)};s.domain=function(t){return arguments.length?(e=t.map(Number),l()):e};s.range=function(t){return arguments.length?(r=t,l()):r};s.rangeRound=function(t){return s.range(t).interpolate(ii)};s.clamp=function(t){return arguments.length?(a=t,l()):a};s.interpolate=function(t){return arguments.length?(n=t,l()):n};s.ticks=function(t){return vo(e,t)};s.tickFormat=function(t,r){return mo(e,t,r)};s.nice=function(t){return po(e,t),l()};s.copy=function(){return t(e,r,n,a)};return l()}([0,1],[0,1],Ga,!1)};var yo={s:1,g:1,p:1,r:1,e:1};function xo(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}t.scale.log=function(){return function e(r,n,a,i){function o(t){return(a?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(n)}function l(t){return a?Math.pow(n,t):-Math.pow(n,-t)}function s(t){return r(o(t))}s.invert=function(t){return l(r.invert(t))};s.domain=function(t){return arguments.length?(a=t[0]>=0,r.domain((i=t.map(Number)).map(o)),s):i};s.base=function(t){return arguments.length?(n=+t,r.domain(i.map(o)),s):n};s.nice=function(){var t=so(i.map(o),a?Math:_o);return r.domain(t),i=t.map(l),s};s.ticks=function(){var t=io(i),e=[],r=t[0],s=t[1],u=Math.floor(o(r)),c=Math.ceil(o(s)),f=n%1?2:n;if(isFinite(c-u)){if(a){for(;u<c;u++)for(var h=1;h<f;h++)e.push(l(u)*h);e.push(l(u))}else for(e.push(l(u));u++<c;)for(var h=f-1;h>0;h--)e.push(l(u)*h);for(u=0;e[u]<r;u++);for(c=e.length;e[c-1]>s;c--);e=e.slice(u,c)}return e};s.tickFormat=function(e,r){if(!arguments.length)return bo;arguments.length<2?r=bo:"function"!=typeof r&&(r=t.format(r));var a=Math.max(1,n*e/s.ticks().length);return function(t){var e=t/l(Math.round(o(t)));return e*n<n-.5&&(e*=n),e<=a?r(t):""}};s.copy=function(){return e(r.copy(),n,a,i)};return ho(s,r)}(t.scale.linear().domain([0,1]),10,!0,[1,10])};var bo=t.format(".0e"),_o={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function wo(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}t.scale.pow=function(){return function t(e,r,n){var a=wo(r),i=wo(1/r);function o(t){return e(a(t))}o.invert=function(t){return i(e.invert(t))};o.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(a)),o):n};o.ticks=function(t){return vo(n,t)};o.tickFormat=function(t,e){return mo(n,t,e)};o.nice=function(t){return o.domain(po(n,t))};o.exponent=function(t){return arguments.length?(a=wo(r=t),i=wo(1/r),e.domain(n.map(a)),o):r};o.copy=function(){return t(e.copy(),r,n)};return ho(o,e)}(t.scale.linear(),1,[0,1])},t.scale.sqrt=function(){return t.scale.pow().exponent(.5)},t.scale.ordinal=function(){return function e(r,n){var a,i,o;function l(t){return i[((a.get(t)||("range"===n.t?a.set(t,r.push(t)):NaN))-1)%i.length]}function s(e,n){return t.range(r.length).map(function(t){return e+n*t})}l.domain=function(t){if(!arguments.length)return r;r=[],a=new b;for(var e,i=-1,o=t.length;++i<o;)a.has(e=t[i])||a.set(e,r.push(e));return l[n.t].apply(l,n.a)};l.range=function(t){return arguments.length?(i=t,o=0,n={t:"range",a:arguments},l):i};l.rangePoints=function(t,e){arguments.length<2&&(e=0);var a=t[0],u=t[1],c=r.length<2?(a=(a+u)/2,0):(u-a)/(r.length-1+e);return i=s(a+c*e/2,c),o=0,n={t:"rangePoints",a:arguments},l};l.rangeRoundPoints=function(t,e){arguments.length<2&&(e=0);var a=t[0],u=t[1],c=r.length<2?(a=u=Math.round((a+u)/2),0):(u-a)/(r.length-1+e)|0;return i=s(a+Math.round(c*e/2+(u-a-(r.length-1+e)*c)/2),c),o=0,n={t:"rangeRoundPoints",a:arguments},l};l.rangeBands=function(t,e,a){arguments.length<2&&(e=0),arguments.length<3&&(a=e);var u=t[1]<t[0],c=t[u-0],f=t[1-u],h=(f-c)/(r.length-e+2*a);return i=s(c+h*a,h),u&&i.reverse(),o=h*(1-e),n={t:"rangeBands",a:arguments},l};l.rangeRoundBands=function(t,e,a){arguments.length<2&&(e=0),arguments.length<3&&(a=e);var u=t[1]<t[0],c=t[u-0],f=t[1-u],h=Math.floor((f-c)/(r.length-e+2*a));return i=s(c+Math.round((f-c-(r.length-e)*h)/2),h),u&&i.reverse(),o=Math.round(h*(1-e)),n={t:"rangeRoundBands",a:arguments},l};l.rangeBand=function(){return o};l.rangeExtent=function(){return io(n.a[0])};l.copy=function(){return e(r,n)};return l.domain(r)}([],{t:"range",a:[[]]})},t.scale.category10=function(){return t.scale.ordinal().range(Ao)},t.scale.category20=function(){return t.scale.ordinal().range(Mo)},t.scale.category20b=function(){return t.scale.ordinal().range(To)},t.scale.category20c=function(){return t.scale.ordinal().range(ko)};var Ao=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(le),Mo=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(le),To=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(le),ko=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(le);function Eo(){return 0}t.scale.quantile=function(){return function e(r,n){var a;function i(){var e=0,i=n.length;for(a=[];++e<i;)a[e-1]=t.quantile(r,e/i);return o}function o(e){if(!isNaN(e=+e))return n[t.bisect(a,e)]}o.domain=function(t){return arguments.length?(r=t.map(d).filter(p).sort(h),i()):r};o.range=function(t){return arguments.length?(n=t,i()):n};o.quantiles=function(){return a};o.invertExtent=function(t){return(t=n.indexOf(t))<0?[NaN,NaN]:[t>0?a[t-1]:r[0],t<a.length?a[t]:r[r.length-1]]};o.copy=function(){return e(r,n)};return i()}([],[])},t.scale.quantize=function(){return function t(e,r,n){var a,i;function o(t){return n[Math.max(0,Math.min(i,Math.floor(a*(t-e))))]}function l(){return a=n.length/(r-e),i=n.length-1,o}o.domain=function(t){return arguments.length?(e=+t[0],r=+t[t.length-1],l()):[e,r]};o.range=function(t){return arguments.length?(n=t,l()):n};o.invertExtent=function(t){return[t=(t=n.indexOf(t))<0?NaN:t/a+e,t+1/a]};o.copy=function(){return t(e,r,n)};return l()}(0,1,[0,1])},t.scale.threshold=function(){return function e(r,n){function a(e){if(e<=e)return n[t.bisect(r,e)]}a.domain=function(t){return arguments.length?(r=t,a):r};a.range=function(t){return arguments.length?(n=t,a):n};a.invertExtent=function(t){return t=n.indexOf(t),[r[t-1],r[t]]};a.copy=function(){return e(r,n)};return a}([.5],[0,1])},t.scale.identity=function(){return function t(e){function r(t){return+t}r.invert=r;r.domain=r.range=function(t){return arguments.length?(e=t.map(r),r):e};r.ticks=function(t){return vo(e,t)};r.tickFormat=function(t,r){return mo(e,t,r)};r.copy=function(){return t(e)};return r}([0,1])},t.svg={},t.svg.arc=function(){var t=So,e=Lo,r=Eo,n=Co,a=Oo,i=Do,o=Ro;function l(){var l=Math.max(0,+t.apply(this,arguments)),u=Math.max(0,+e.apply(this,arguments)),c=a.apply(this,arguments)-Ct,f=i.apply(this,arguments)-Ct,h=Math.abs(f-c),d=c>f?0:1;if(u<l&&(p=u,u=l,l=p),h>=Et)return s(u,d)+(l?s(l,1-d):"")+"Z";var p,g,v,m,y,x,b,_,w,A,M,T,k=0,E=0,C=[];if((m=(+o.apply(this,arguments)||0)/2)&&(v=n===Co?Math.sqrt(l*l+u*u):+n.apply(this,arguments),d||(E*=-1),u&&(E=Pt(v/u*Math.sin(m))),l&&(k=Pt(v/l*Math.sin(m)))),u){y=u*Math.cos(c+E),x=u*Math.sin(c+E),b=u*Math.cos(f-E),_=u*Math.sin(f-E);var S=Math.abs(f-c-2*E)<=Tt?0:1;if(E&&Po(y,x,b,_)===d^S){var L=(c+f)/2;y=u*Math.cos(L),x=u*Math.sin(L),b=_=null}}else y=x=0;if(l){w=l*Math.cos(f-k),A=l*Math.sin(f-k),M=l*Math.cos(c+k),T=l*Math.sin(c+k);var O=Math.abs(c-f+2*k)<=Tt?0:1;if(k&&Po(w,A,M,T)===1-d^O){var D=(c+f)/2;w=l*Math.cos(D),A=l*Math.sin(D),M=T=null}}else w=A=0;if(h>At&&(p=Math.min(Math.abs(u-l)/2,+r.apply(this,arguments)))>.001){g=l<u^d?0:1;var R=p,P=p;if(h<Tt){var I=null==M?[w,A]:null==b?[y,x]:ia([y,x],[M,T],[b,_],[w,A]),B=y-I[0],F=x-I[1],z=b-I[0],N=_-I[1],j=1/Math.sin(Math.acos((B*z+F*N)/(Math.sqrt(B*B+F*F)*Math.sqrt(z*z+N*N)))/2),U=Math.sqrt(I[0]*I[0]+I[1]*I[1]);P=Math.min(p,(l-U)/(j-1)),R=Math.min(p,(u-U)/(j+1))}if(null!=b){var V=Io(null==M?[w,A]:[M,T],[y,x],u,R,d),H=Io([b,_],[w,A],u,R,d);p===R?C.push("M",V[0],"A",R,",",R," 0 0,",g," ",V[1],"A",u,",",u," 0 ",1-d^Po(V[1][0],V[1][1],H[1][0],H[1][1]),",",d," ",H[1],"A",R,",",R," 0 0,",g," ",H[0]):C.push("M",V[0],"A",R,",",R," 0 1,",g," ",H[0])}else C.push("M",y,",",x);if(null!=M){var q=Io([y,x],[M,T],l,-P,d),G=Io([w,A],null==b?[y,x]:[b,_],l,-P,d);p===P?C.push("L",G[0],"A",P,",",P," 0 0,",g," ",G[1],"A",l,",",l," 0 ",d^Po(G[1][0],G[1][1],q[1][0],q[1][1]),",",1-d," ",q[1],"A",P,",",P," 0 0,",g," ",q[0]):C.push("L",G[0],"A",P,",",P," 0 0,",g," ",q[0])}else C.push("L",w,",",A)}else C.push("M",y,",",x),null!=b&&C.push("A",u,",",u," 0 ",S,",",d," ",b,",",_),C.push("L",w,",",A),null!=M&&C.push("A",l,",",l," 0 ",O,",",1-d," ",M,",",T);return C.push("Z"),C.join("")}function s(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}return l.innerRadius=function(e){return arguments.length?(t=ve(e),l):t},l.outerRadius=function(t){return arguments.length?(e=ve(t),l):e},l.cornerRadius=function(t){return arguments.length?(r=ve(t),l):r},l.padRadius=function(t){return arguments.length?(n=t==Co?Co:ve(t),l):n},l.startAngle=function(t){return arguments.length?(a=ve(t),l):a},l.endAngle=function(t){return arguments.length?(i=ve(t),l):i},l.padAngle=function(t){return arguments.length?(o=ve(t),l):o},l.centroid=function(){var r=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,n=(+a.apply(this,arguments)+ +i.apply(this,arguments))/2-Ct;return[Math.cos(n)*r,Math.sin(n)*r]},l};var Co="auto";function So(t){return t.innerRadius}function Lo(t){return t.outerRadius}function Oo(t){return t.startAngle}function Do(t){return t.endAngle}function Ro(t){return t&&t.padAngle}function Po(t,e,r,n){return(t-r)*e-(e-n)*t>0?0:1}function Io(t,e,r,n,a){var i=t[0]-e[0],o=t[1]-e[1],l=(a?n:-n)/Math.sqrt(i*i+o*o),s=l*o,u=-l*i,c=t[0]+s,f=t[1]+u,h=e[0]+s,d=e[1]+u,p=(c+h)/2,g=(f+d)/2,v=h-c,m=d-f,y=v*v+m*m,x=r-n,b=c*d-h*f,_=(m<0?-1:1)*Math.sqrt(Math.max(0,x*x*y-b*b)),w=(b*m-v*_)/y,A=(-b*v-m*_)/y,M=(b*m+v*_)/y,T=(-b*v+m*_)/y,k=w-p,E=A-g,C=M-p,S=T-g;return k*k+E*E>C*C+S*S&&(w=M,A=T),[[w-s,A-u],[w*r/x,A*r/x]]}function Bo(t){var e=Kn,r=ta,n=Xr,a=zo,i=a.key,o=.7;function l(i){var l,s=[],u=[],c=-1,f=i.length,h=ve(e),d=ve(r);function p(){s.push("M",a(t(u),o))}for(;++c<f;)n.call(this,l=i[c],c)?u.push([+h.call(this,l,c),+d.call(this,l,c)]):u.length&&(p(),u=[]);return u.length&&p(),s.length?s.join(""):null}return l.x=function(t){return arguments.length?(e=t,l):e},l.y=function(t){return arguments.length?(r=t,l):r},l.defined=function(t){return arguments.length?(n=t,l):n},l.interpolate=function(t){return arguments.length?(i="function"==typeof t?a=t:(a=Fo.get(t)||zo).key,l):i},l.tension=function(t){return arguments.length?(o=t,l):o},l}t.svg.line=function(){return Bo(O)};var Fo=t.map({linear:zo,"linear-closed":No,step:function(t){var e=0,r=t.length,n=t[0],a=[n[0],",",n[1]];for(;++e<r;)a.push("H",(n[0]+(n=t[e])[0])/2,"V",n[1]);r>1&&a.push("H",n[0]);return a.join("")},"step-before":jo,"step-after":Uo,basis:qo,"basis-open":function(t){if(t.length<4)return zo(t);var e,r=[],n=-1,a=t.length,i=[0],o=[0];for(;++n<3;)e=t[n],i.push(e[0]),o.push(e[1]);r.push(Go(Wo,i)+","+Go(Wo,o)),--n;for(;++n<a;)e=t[n],i.shift(),i.push(e[0]),o.shift(),o.push(e[1]),Zo(r,i,o);return r.join("")},"basis-closed":function(t){var e,r,n=-1,a=t.length,i=a+4,o=[],l=[];for(;++n<4;)r=t[n%a],o.push(r[0]),l.push(r[1]);e=[Go(Wo,o),",",Go(Wo,l)],--n;for(;++n<i;)r=t[n%a],o.shift(),o.push(r[0]),l.shift(),l.push(r[1]),Zo(e,o,l);return e.join("")},bundle:function(t,e){var r=t.length-1;if(r)for(var n,a,i=t[0][0],o=t[0][1],l=t[r][0]-i,s=t[r][1]-o,u=-1;++u<=r;)n=t[u],a=u/r,n[0]=e*n[0]+(1-e)*(i+a*l),n[1]=e*n[1]+(1-e)*(o+a*s);return qo(t)},cardinal:function(t,e){return t.length<3?zo(t):t[0]+Vo(t,Ho(t,e))},"cardinal-open":function(t,e){return t.length<4?zo(t):t[1]+Vo(t.slice(1,-1),Ho(t,e))},"cardinal-closed":function(t,e){return t.length<3?No(t):t[0]+Vo((t.push(t[0]),t),Ho([t[t.length-2]].concat(t,[t[1]]),e))},monotone:function(t){return t.length<3?zo(t):t[0]+Vo(t,function(t){var e,r,n,a,i=[],o=function(t){var e=0,r=t.length-1,n=[],a=t[0],i=t[1],o=n[0]=Jo(a,i);for(;++e<r;)n[e]=(o+(o=Jo(a=i,i=t[e+1])))/2;return n[e]=o,n}(t),l=-1,s=t.length-1;for(;++l<s;)e=Jo(t[l],t[l+1]),y(e)<At?o[l]=o[l+1]=0:(r=o[l]/e,n=o[l+1]/e,(a=r*r+n*n)>9&&(a=3*e/Math.sqrt(a),o[l]=a*r,o[l+1]=a*n));l=-1;for(;++l<=s;)a=(t[Math.min(s,l+1)][0]-t[Math.max(0,l-1)][0])/(6*(1+o[l]*o[l])),i.push([a||0,o[l]*a||0]);return i}(t))}});function zo(t){return t.length>1?t.join("L"):t+"Z"}function No(t){return t.join("L")+"Z"}function jo(t){for(var e=0,r=t.length,n=t[0],a=[n[0],",",n[1]];++e<r;)a.push("V",(n=t[e])[1],"H",n[0]);return a.join("")}function Uo(t){for(var e=0,r=t.length,n=t[0],a=[n[0],",",n[1]];++e<r;)a.push("H",(n=t[e])[0],"V",n[1]);return a.join("")}function Vo(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return zo(t);var r=t.length!=e.length,n="",a=t[0],i=t[1],o=e[0],l=o,s=1;if(r&&(n+="Q"+(i[0]-2*o[0]/3)+","+(i[1]-2*o[1]/3)+","+i[0]+","+i[1],a=t[1],s=2),e.length>1){l=e[1],i=t[s],s++,n+="C"+(a[0]+o[0])+","+(a[1]+o[1])+","+(i[0]-l[0])+","+(i[1]-l[1])+","+i[0]+","+i[1];for(var u=2;u<e.length;u++,s++)i=t[s],l=e[u],n+="S"+(i[0]-l[0])+","+(i[1]-l[1])+","+i[0]+","+i[1]}if(r){var c=t[s];n+="Q"+(i[0]+2*l[0]/3)+","+(i[1]+2*l[1]/3)+","+c[0]+","+c[1]}return n}function Ho(t,e){for(var r,n=[],a=(1-e)/2,i=t[0],o=t[1],l=1,s=t.length;++l<s;)r=i,i=o,o=t[l],n.push([a*(o[0]-r[0]),a*(o[1]-r[1])]);return n}function qo(t){if(t.length<3)return zo(t);var e=1,r=t.length,n=t[0],a=n[0],i=n[1],o=[a,a,a,(n=t[1])[0]],l=[i,i,i,n[1]],s=[a,",",i,"L",Go(Wo,o),",",Go(Wo,l)];for(t.push(t[r-1]);++e<=r;)n=t[e],o.shift(),o.push(n[0]),l.shift(),l.push(n[1]),Zo(s,o,l);return t.pop(),s.push("L",n),s.join("")}function Go(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}Fo.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Xo=[0,2/3,1/3,0],Yo=[0,1/3,2/3,0],Wo=[0,1/6,2/3,1/6];function Zo(t,e,r){t.push("C",Go(Xo,e),",",Go(Xo,r),",",Go(Yo,e),",",Go(Yo,r),",",Go(Wo,e),",",Go(Wo,r))}function Jo(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Qo(t){for(var e,r,n,a=-1,i=t.length;++a<i;)r=(e=t[a])[0],n=e[1]-Ct,e[0]=r*Math.cos(n),e[1]=r*Math.sin(n);return t}function $o(t){var e=Kn,r=Kn,n=0,a=ta,i=Xr,o=zo,l=o.key,s=o,u="L",c=.7;function f(l){var f,h,d,p=[],g=[],v=[],m=-1,y=l.length,x=ve(e),b=ve(n),_=e===r?function(){return h}:ve(r),w=n===a?function(){return d}:ve(a);function A(){p.push("M",o(t(v),c),u,s(t(g.reverse()),c),"Z")}for(;++m<y;)i.call(this,f=l[m],m)?(g.push([h=+x.call(this,f,m),d=+b.call(this,f,m)]),v.push([+_.call(this,f,m),+w.call(this,f,m)])):g.length&&(A(),g=[],v=[]);return g.length&&A(),p.length?p.join(""):null}return f.x=function(t){return arguments.length?(e=r=t,f):r},f.x0=function(t){return arguments.length?(e=t,f):e},f.x1=function(t){return arguments.length?(r=t,f):r},f.y=function(t){return arguments.length?(n=a=t,f):a},f.y0=function(t){return arguments.length?(n=t,f):n},f.y1=function(t){return arguments.length?(a=t,f):a},f.defined=function(t){return arguments.length?(i=t,f):i},f.interpolate=function(t){return arguments.length?(l="function"==typeof t?o=t:(o=Fo.get(t)||zo).key,s=o.reverse||o,u=o.closed?"M":"L",f):l},f.tension=function(t){return arguments.length?(c=t,f):c},f}function Ko(t){return t.radius}function tl(t){return[t.x,t.y]}function el(){return 64}function rl(){return"circle"}function nl(t){var e=Math.sqrt(t/Tt);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}t.svg.line.radial=function(){var t=Bo(Qo);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},jo.reverse=Uo,Uo.reverse=jo,t.svg.area=function(){return $o(O)},t.svg.area.radial=function(){var t=$o(Qo);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},t.svg.chord=function(){var t=Nn,e=jn,r=Ko,n=Oo,a=Do;function i(r,n){var a,i,u=o(this,t,r,n),c=o(this,e,r,n);return"M"+u.p0+l(u.r,u.p1,u.a1-u.a0)+(i=c,(a=u).a0==i.a0&&a.a1==i.a1?s(u.r,u.p1,u.r,u.p0):s(u.r,u.p1,c.r,c.p0)+l(c.r,c.p1,c.a1-c.a0)+s(c.r,c.p1,u.r,u.p0))+"Z"}function o(t,e,i,o){var l=e.call(t,i,o),s=r.call(t,l,o),u=n.call(t,l,o)-Ct,c=a.call(t,l,o)-Ct;return{r:s,a0:u,a1:c,p0:[s*Math.cos(u),s*Math.sin(u)],p1:[s*Math.cos(c),s*Math.sin(c)]}}function l(t,e,r){return"A"+t+","+t+" 0 "+ +(r>Tt)+",1 "+e}function s(t,e,r,n){return"Q 0,0 "+n}return i.radius=function(t){return arguments.length?(r=ve(t),i):r},i.source=function(e){return arguments.length?(t=ve(e),i):t},i.target=function(t){return arguments.length?(e=ve(t),i):e},i.startAngle=function(t){return arguments.length?(n=ve(t),i):n},i.endAngle=function(t){return arguments.length?(a=ve(t),i):a},i},t.svg.diagonal=function(){var t=Nn,e=jn,r=tl;function n(n,a){var i=t.call(this,n,a),o=e.call(this,n,a),l=(i.y+o.y)/2,s=[i,{x:i.x,y:l},{x:o.x,y:l},o];return"M"+(s=s.map(r))[0]+"C"+s[1]+" "+s[2]+" "+s[3]}return n.source=function(e){return arguments.length?(t=ve(e),n):t},n.target=function(t){return arguments.length?(e=ve(t),n):e},n.projection=function(t){return arguments.length?(r=t,n):r},n},t.svg.diagonal.radial=function(){var e=t.svg.diagonal(),r=tl,n=e.projection;return e.projection=function(t){return arguments.length?n(function(t){return function(){var e=t.apply(this,arguments),r=e[0],n=e[1]-Ct;return[r*Math.cos(n),r*Math.sin(n)]}}(r=t)):r},e},t.svg.symbol=function(){var t=rl,e=el;function r(r,n){return(al.get(t.call(this,r,n))||nl)(e.call(this,r,n))}return r.type=function(e){return arguments.length?(t=ve(e),r):t},r.size=function(t){return arguments.length?(e=ve(t),r):e},r};var al=t.map({circle:nl,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*ol)),r=e*ol;return"M0,"+-e+"L"+r+",0 0,"+e+" "+-r+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/il),r=e*il/2;return"M0,"+r+"L"+e+","+-r+" "+-e+","+-r+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/il),r=e*il/2;return"M0,"+-r+"L"+e+","+r+" "+-e+","+r+"Z"}});t.svg.symbolTypes=al.keys();var il=Math.sqrt(3),ol=Math.tan(30*St);Y.transition=function(t){for(var e,r,n=cl||++dl,a=vl(t),i=[],o=fl||{time:Date.now(),ease:ti,delay:0,duration:250},l=-1,s=this.length;++l<s;){i.push(e=[]);for(var u=this[l],c=-1,f=u.length;++c<f;)(r=u[c])&&ml(r,c,a,n,o),e.push(r)}return ul(i,a,n)},Y.interrupt=function(t){return this.each(null==t?ll:sl(vl(t)))};var ll=sl(vl());function sl(t){return function(){var e,r,n;(e=this[t])&&(n=e[r=e.active])&&(n.timer.c=null,n.timer.t=NaN,--e.count?delete e[r]:delete this[t],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function ul(t,e,r){return V(t,hl),t.namespace=e,t.id=r,t}var cl,fl,hl=[],dl=0;function pl(t,e,r,n){var a=t.id,i=t.namespace;return ct(t,"function"==typeof r?function(t,o,l){t[i][a].tween.set(e,n(r.call(t,t.__data__,o,l)))}:(r=n(r),function(t){t[i][a].tween.set(e,r)}))}function gl(t){return null==t&&(t=""),function(){this.textContent=t}}function vl(t){return null==t?"__transition__":"__transition_"+t+"__"}function ml(t,e,r,n,a){var i,o,l,s,u,c=t[r]||(t[r]={active:0,count:0}),f=c[n];function h(r){var a=c.active,h=c[a];for(var p in h&&(h.timer.c=null,h.timer.t=NaN,--c.count,delete c[a],h.event&&h.event.interrupt.call(t,t.__data__,h.index)),c)if(+p<n){var g=c[p];g.timer.c=null,g.timer.t=NaN,--c.count,delete c[p]}o.c=d,Me(function(){return o.c&&d(r||1)&&(o.c=null,o.t=NaN),1},0,i),c.active=n,f.event&&f.event.start.call(t,t.__data__,e),u=[],f.tween.forEach(function(r,n){(n=n.call(t,t.__data__,e))&&u.push(n)}),s=f.ease,l=f.duration}function d(a){for(var i=a/l,o=s(i),h=u.length;h>0;)u[--h].call(t,o);if(i>=1)return f.event&&f.event.end.call(t,t.__data__,e),--c.count?delete c[n]:delete t[r],1}f||(i=a.time,o=Me(function(t){var e=f.delay;if(o.t=e+i,e<=t)return h(t-e);o.c=h},0,i),f=c[n]={tween:new b,time:i,timer:o,delay:a.delay,duration:a.duration,ease:a.ease,index:e},a=null,++c.count)}hl.call=Y.call,hl.empty=Y.empty,hl.node=Y.node,hl.size=Y.size,t.transition=function(e,r){return e&&e.transition?cl?e.transition(r):e:t.selection().transition(e)},t.transition.prototype=hl,hl.select=function(t){var e,r,n,a=this.id,i=this.namespace,o=[];t=W(t);for(var l=-1,s=this.length;++l<s;){o.push(e=[]);for(var u=this[l],c=-1,f=u.length;++c<f;)(n=u[c])&&(r=t.call(n,n.__data__,c,l))?("__data__"in n&&(r.__data__=n.__data__),ml(r,c,i,a,n[i][a]),e.push(r)):e.push(null)}return ul(o,i,a)},hl.selectAll=function(t){var e,r,n,a,i,o=this.id,l=this.namespace,s=[];t=Z(t);for(var u=-1,c=this.length;++u<c;)for(var f=this[u],h=-1,d=f.length;++h<d;)if(n=f[h]){i=n[l][o],r=t.call(n,n.__data__,h,u),s.push(e=[]);for(var p=-1,g=r.length;++p<g;)(a=r[p])&&ml(a,p,l,o,i),e.push(a)}return ul(s,l,o)},hl.filter=function(t){var e,r,n=[];"function"!=typeof t&&(t=ut(t));for(var a=0,i=this.length;a<i;a++){n.push(e=[]);for(var o,l=0,s=(o=this[a]).length;l<s;l++)(r=o[l])&&t.call(r,r.__data__,l,a)&&e.push(r)}return ul(n,this.namespace,this.id)},hl.tween=function(t,e){var r=this.id,n=this.namespace;return arguments.length<2?this.node()[n][r].tween.get(t):ct(this,null==e?function(e){e[n][r].tween.remove(t)}:function(a){a[n][r].tween.set(t,e)})},hl.attr=function(e,r){if(arguments.length<2){for(r in e)this.attr(r,e[r]);return this}var n="transform"==e?fi:Ga,a=t.ns.qualify(e);function i(){this.removeAttribute(a)}function o(){this.removeAttributeNS(a.space,a.local)}return pl(this,"attr."+e,r,a.local?function(t){return null==t?o:(t+="",function(){var e,r=this.getAttributeNS(a.space,a.local);return r!==t&&(e=n(r,t),function(t){this.setAttributeNS(a.space,a.local,e(t))})})}:function(t){return null==t?i:(t+="",function(){var e,r=this.getAttribute(a);return r!==t&&(e=n(r,t),function(t){this.setAttribute(a,e(t))})})})},hl.attrTween=function(e,r){var n=t.ns.qualify(e);return this.tween("attr."+e,n.local?function(t,e){var a=r.call(this,t,e,this.getAttributeNS(n.space,n.local));return a&&function(t){this.setAttributeNS(n.space,n.local,a(t))}}:function(t,e){var a=r.call(this,t,e,this.getAttribute(n));return a&&function(t){this.setAttribute(n,a(t))}})},hl.style=function(t,e,r){var n=arguments.length;if(n<3){if("string"!=typeof t){for(r in n<2&&(e=""),t)this.style(r,t[r],e);return this}r=""}function a(){this.style.removeProperty(t)}return pl(this,"style."+t,e,function(e){return null==e?a:(e+="",function(){var n,a=o(this).getComputedStyle(this,null).getPropertyValue(t);return a!==e&&(n=Ga(a,e),function(e){this.style.setProperty(t,n(e),r)})})})},hl.styleTween=function(t,e,r){return arguments.length<3&&(r=""),this.tween("style."+t,function(n,a){var i=e.call(this,n,a,o(this).getComputedStyle(this,null).getPropertyValue(t));return i&&function(e){this.style.setProperty(t,i(e),r)}})},hl.text=function(t){return pl(this,"text",t,gl)},hl.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},hl.ease=function(e){var r=this.id,n=this.namespace;return arguments.length<1?this.node()[n][r].ease:("function"!=typeof e&&(e=t.ease.apply(t,arguments)),ct(this,function(t){t[n][r].ease=e}))},hl.delay=function(t){var e=this.id,r=this.namespace;return arguments.length<1?this.node()[r][e].delay:ct(this,"function"==typeof t?function(n,a,i){n[r][e].delay=+t.call(n,n.__data__,a,i)}:(t=+t,function(n){n[r][e].delay=t}))},hl.duration=function(t){var e=this.id,r=this.namespace;return arguments.length<1?this.node()[r][e].duration:ct(this,"function"==typeof t?function(n,a,i){n[r][e].duration=Math.max(1,t.call(n,n.__data__,a,i))}:(t=Math.max(1,t),function(n){n[r][e].duration=t}))},hl.each=function(e,r){var n=this.id,a=this.namespace;if(arguments.length<2){var i=fl,o=cl;try{cl=n,ct(this,function(t,r,i){fl=t[a][n],e.call(t,t.__data__,r,i)})}finally{fl=i,cl=o}}else ct(this,function(i){var o=i[a][n];(o.event||(o.event=t.dispatch("start","end","interrupt"))).on(e,r)});return this},hl.transition=function(){for(var t,e,r,n=this.id,a=++dl,i=this.namespace,o=[],l=0,s=this.length;l<s;l++){o.push(t=[]);for(var u,c=0,f=(u=this[l]).length;c<f;c++)(e=u[c])&&ml(e,c,i,a,{time:(r=e[i][n]).time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration}),t.push(e)}return ul(o,i,a)},t.svg.axis=function(){var e,n=t.scale.linear(),a=yl,i=6,o=6,l=3,s=[10],u=null;function c(r){r.each(function(){var r,c=t.select(this),f=this.__chart__||n,h=this.__chart__=n.copy(),d=null==u?h.ticks?h.ticks.apply(h,s):h.domain():u,p=null==e?h.tickFormat?h.tickFormat.apply(h,s):O:e,g=c.selectAll(".tick").data(d,h),v=g.enter().insert("g",".domain").attr("class","tick").style("opacity",At),m=t.transition(g.exit()).style("opacity",At).remove(),y=t.transition(g.order()).style("opacity",1),x=Math.max(i,0)+l,b=oo(h),_=c.selectAll(".domain").data([0]),w=(_.enter().append("path").attr("class","domain"),t.transition(_));v.append("line"),v.append("text");var A,M,T,k,E=v.select("line"),C=y.select("line"),S=g.select("text").text(p),L=v.select("text"),D=y.select("text"),R="top"===a||"left"===a?-1:1;if("bottom"===a||"top"===a?(r=bl,A="x",T="y",M="x2",k="y2",S.attr("dy",R<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+b[0]+","+R*o+"V0H"+b[1]+"V"+R*o)):(r=_l,A="y",T="x",M="y2",k="x2",S.attr("dy",".32em").style("text-anchor",R<0?"end":"start"),w.attr("d","M"+R*o+","+b[0]+"H0V"+b[1]+"H"+R*o)),E.attr(k,R*i),L.attr(T,R*x),C.attr(M,0).attr(k,R*i),D.attr(A,0).attr(T,R*x),h.rangeBand){var P=h,I=P.rangeBand()/2;f=h=function(t){return P(t)+I}}else f.rangeBand?f=h:m.call(r,h,f);v.call(r,f,h),y.call(r,h,h)})}return c.scale=function(t){return arguments.length?(n=t,c):n},c.orient=function(t){return arguments.length?(a=t in xl?t+"":yl,c):a},c.ticks=function(){return arguments.length?(s=r(arguments),c):s},c.tickValues=function(t){return arguments.length?(u=t,c):u},c.tickFormat=function(t){return arguments.length?(e=t,c):e},c.tickSize=function(t){var e=arguments.length;return e?(i=+t,o=+arguments[e-1],c):i},c.innerTickSize=function(t){return arguments.length?(i=+t,c):i},c.outerTickSize=function(t){return arguments.length?(o=+t,c):o},c.tickPadding=function(t){return arguments.length?(l=+t,c):l},c.tickSubdivide=function(){return arguments.length&&c},c};var yl="bottom",xl={top:1,right:1,bottom:1,left:1};function bl(t,e,r){t.attr("transform",function(t){var n=e(t);return"translate("+(isFinite(n)?n:r(t))+",0)"})}function _l(t,e,r){t.attr("transform",function(t){var n=e(t);return"translate(0,"+(isFinite(n)?n:r(t))+")"})}t.svg.brush=function(){var e,r,n=j(h,"brushstart","brush","brushend"),a=null,i=null,l=[0,0],s=[0,0],u=!0,c=!0,f=Al[0];function h(e){e.each(function(){var e=t.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",v).on("touchstart.brush",v),r=e.selectAll(".background").data([0]);r.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var n=e.selectAll(".resize").data(f,O);n.exit().remove(),n.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return wl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),n.style("display",h.empty()?"none":null);var o,l=t.transition(e),s=t.transition(r);a&&(o=oo(a),s.attr("x",o[0]).attr("width",o[1]-o[0]),p(l)),i&&(o=oo(i),s.attr("y",o[0]).attr("height",o[1]-o[0]),g(l)),d(l)})}function d(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+l[+/e$/.test(t)]+","+s[+/^s/.test(t)]+")"})}function p(t){t.select(".extent").attr("x",l[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function g(t){t.select(".extent").attr("y",s[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",s[1]-s[0])}function v(){var f,v,m=this,y=t.select(t.event.target),x=n.of(m,arguments),b=t.select(m),_=y.datum(),w=!/^(n|s)$/.test(_)&&a,A=!/^(e|w)$/.test(_)&&i,M=y.classed("extent"),T=xt(m),k=t.mouse(m),E=t.select(o(m)).on("keydown.brush",function(){32==t.event.keyCode&&(M||(f=null,k[0]-=l[1],k[1]-=s[1],M=2),z())}).on("keyup.brush",function(){32==t.event.keyCode&&2==M&&(k[0]+=l[1],k[1]+=s[1],M=0,z())});if(t.event.changedTouches?E.on("touchmove.brush",L).on("touchend.brush",D):E.on("mousemove.brush",L).on("mouseup.brush",D),b.interrupt().selectAll("*").interrupt(),M)k[0]=l[0]-k[0],k[1]=s[0]-k[1];else if(_){var C=+/w$/.test(_),S=+/^n/.test(_);v=[l[1-C]-k[0],s[1-S]-k[1]],k[0]=l[C],k[1]=s[S]}else t.event.altKey&&(f=k.slice());function L(){var e=t.mouse(m),r=!1;v&&(e[0]+=v[0],e[1]+=v[1]),M||(t.event.altKey?(f||(f=[(l[0]+l[1])/2,(s[0]+s[1])/2]),k[0]=l[+(e[0]<f[0])],k[1]=s[+(e[1]<f[1])]):f=null),w&&O(e,a,0)&&(p(b),r=!0),A&&O(e,i,1)&&(g(b),r=!0),r&&(d(b),x({type:"brush",mode:M?"move":"resize"}))}function O(t,n,a){var i,o,h=oo(n),d=h[0],p=h[1],g=k[a],v=a?s:l,m=v[1]-v[0];if(M&&(d-=g,p-=m+g),i=(a?c:u)?Math.max(d,Math.min(p,t[a])):t[a],M?o=(i+=g)+m:(f&&(g=Math.max(d,Math.min(p,2*f[a]-i))),g<i?(o=i,i=g):o=g),v[0]!=i||v[1]!=o)return a?r=null:e=null,v[0]=i,v[1]=o,!0}function D(){L(),b.style("pointer-events","all").selectAll(".resize").style("display",h.empty()?"none":null),t.select("body").style("cursor",null),E.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),T(),x({type:"brushend"})}b.style("pointer-events","none").selectAll(".resize").style("display",null),t.select("body").style("cursor",y.style("cursor")),x({type:"brushstart"}),L()}return h.event=function(a){a.each(function(){var a=n.of(this,arguments),i={x:l,y:s,i:e,j:r},o=this.__chart__||i;this.__chart__=i,cl?t.select(this).transition().each("start.brush",function(){e=o.i,r=o.j,l=o.x,s=o.y,a({type:"brushstart"})}).tween("brush:brush",function(){var t=Xa(l,i.x),n=Xa(s,i.y);return e=r=null,function(e){l=i.x=t(e),s=i.y=n(e),a({type:"brush",mode:"resize"})}}).each("end.brush",function(){e=i.i,r=i.j,a({type:"brush",mode:"resize"}),a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})},h.x=function(t){return arguments.length?(f=Al[!(a=t)<<1|!i],h):a},h.y=function(t){return arguments.length?(f=Al[!a<<1|!(i=t)],h):i},h.clamp=function(t){return arguments.length?(a&&i?(u=!!t[0],c=!!t[1]):a?u=!!t:i&&(c=!!t),h):a&&i?[u,c]:a?u:i?c:null},h.extent=function(t){var n,o,u,c,f;return arguments.length?(a&&(n=t[0],o=t[1],i&&(n=n[0],o=o[0]),e=[n,o],a.invert&&(n=a(n),o=a(o)),o<n&&(f=n,n=o,o=f),n==l[0]&&o==l[1]||(l=[n,o])),i&&(u=t[0],c=t[1],a&&(u=u[1],c=c[1]),r=[u,c],i.invert&&(u=i(u),c=i(c)),c<u&&(f=u,u=c,c=f),u==s[0]&&c==s[1]||(s=[u,c])),h):(a&&(e?(n=e[0],o=e[1]):(n=l[0],o=l[1],a.invert&&(n=a.invert(n),o=a.invert(o)),o<n&&(f=n,n=o,o=f))),i&&(r?(u=r[0],c=r[1]):(u=s[0],c=s[1],i.invert&&(u=i.invert(u),c=i.invert(c)),c<u&&(f=u,u=c,c=f))),a&&i?[[n,u],[o,c]]:a?[n,o]:i&&[u,c])},h.clear=function(){return h.empty()||(l=[0,0],s=[0,0],e=r=null),h},h.empty=function(){return!!a&&l[0]==l[1]||!!i&&s[0]==s[1]},t.rebind(h,n,"on")};var wl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Al=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Ml=Re.format=lr.timeFormat,Tl=Ml.utc,kl=Tl("%Y-%m-%dT%H:%M:%S.%LZ");function El(t){return t.toISOString()}function Cl(e,r,n){function a(t){return e(t)}function i(e,n){var a=(e[1]-e[0])/n,i=t.bisect(Ll,a);return i==Ll.length?[r.year,go(e.map(function(t){return t/31536e6}),n)[2]]:i?r[a/Ll[i-1]<Ll[i]/a?i-1:i]:[Rl,go(e,n)[2]]}return a.invert=function(t){return Sl(e.invert(t))},a.domain=function(t){return arguments.length?(e.domain(t),a):e.domain().map(Sl)},a.nice=function(t,e){var r=a.domain(),n=io(r),o=null==t?i(n,10):"number"==typeof t&&i(n,t);function l(r){return!isNaN(r)&&!t.range(r,Sl(+r+1),e).length}return o&&(t=o[0],e=o[1]),a.domain(so(r,e>1?{floor:function(e){for(;l(e=t.floor(e));)e=Sl(e-1);return e},ceil:function(e){for(;l(e=t.ceil(e));)e=Sl(+e+1);return e}}:t))},a.ticks=function(t,e){var r=io(a.domain()),n=null==t?i(r,10):"number"==typeof t?i(r,t):!t.range&&[{range:t},e];return n&&(t=n[0],e=n[1]),t.range(r[0],Sl(+r[1]+1),e<1?1:e)},a.tickFormat=function(){return n},a.copy=function(){return Cl(e.copy(),r,n)},ho(a,e)}function Sl(t){return new Date(t)}Ml.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?El:kl,El.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},El.toString=kl.toString,Re.second=Fe(function(t){return new Pe(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),Re.seconds=Re.second.range,Re.seconds.utc=Re.second.utc.range,Re.minute=Fe(function(t){return new Pe(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),Re.minutes=Re.minute.range,Re.minutes.utc=Re.minute.utc.range,Re.hour=Fe(function(t){var e=t.getTimezoneOffset()/60;return new Pe(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),Re.hours=Re.hour.range,Re.hours.utc=Re.hour.utc.range,Re.month=Fe(function(t){return(t=Re.day(t)).setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),Re.months=Re.month.range,Re.months.utc=Re.month.utc.range;var Ll=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Ol=[[Re.second,1],[Re.second,5],[Re.second,15],[Re.second,30],[Re.minute,1],[Re.minute,5],[Re.minute,15],[Re.minute,30],[Re.hour,1],[Re.hour,3],[Re.hour,6],[Re.hour,12],[Re.day,1],[Re.day,2],[Re.week,1],[Re.month,1],[Re.month,3],[Re.year,1]],Dl=Ml.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Xr]]),Rl={range:function(e,r,n){return t.range(Math.ceil(e/n)*n,+r,n).map(Sl)},floor:O,ceil:O};Ol.year=Re.year,Re.scale=function(){return Cl(t.scale.linear(),Ol,Dl)};var Pl=Ol.map(function(t){return[t[0].utc,t[1]]}),Il=Tl.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Xr]]);function Bl(t){return JSON.parse(t.responseText)}function Fl(t){var e=a.createRange();return e.selectNode(a.body),e.createContextualFragment(t.responseText)}Pl.year=Re.year.utc,Re.scale.utc=function(){return Cl(t.scale.linear(),Pl,Il)},t.text=me(function(t){return t.responseText}),t.json=function(t,e){return ye(t,"application/json",Bl,e)},t.html=function(t,e){return ye(t,"text/html",Fl,e)},t.xml=me(function(t){return t.responseXML}),"function"==typeof CC&&CC.amd?(this.d3=t,CC(t)):n.exports?n.exports=t:this.d3=t}(),n=n.exports;var a=function(t){var e=typeof t;if("string"===e){var r=t;if(0===(t=+t)&&function(t){for(var e,r=t.length,n=0;n<r;n++)if(((e=t.charCodeAt(n))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}(r))return!1}else if("number"!==e)return!1;return t-t<1},i={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEAVGYEAR:315576e5,ONEAVGMONTH:26298e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,MINUS_SIGN:"\u2212"},o={},l=Math.PI;o.deg2rad=function(t){return t/180*l},o.rad2deg=function(t){return t/l*180},o.wrap360=function(t){var e=t%360;return e<0?e+360:e},o.wrap180=function(t){return Math.abs(t)>180&&(t-=360*Math.round(t/360)),t};var s=i.BADNUM,u=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g,c={exports:{}};!function(t){var e=/^\s+/,r=/\s+$/,n=0,a=t.round,i=t.min,o=t.max,l=t.random;function s(l,u){if(l=l||"",u=u||{},l instanceof s)return l;if(!(this instanceof s))return new s(l,u);var c=function(n){var a={r:0,g:0,b:0},l=1,s=null,u=null,c=null,f=!1,h=!1;"string"==typeof n&&(n=function(t){t=t.replace(e,"").replace(r,"").toLowerCase();var n,a=!1;if(E[t])t=E[t],a=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(n=j.rgb.exec(t))return{r:n[1],g:n[2],b:n[3]};if(n=j.rgba.exec(t))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=j.hsl.exec(t))return{h:n[1],s:n[2],l:n[3]};if(n=j.hsla.exec(t))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=j.hsv.exec(t))return{h:n[1],s:n[2],v:n[3]};if(n=j.hsva.exec(t))return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=j.hex8.exec(t))return{r:D(n[1]),g:D(n[2]),b:D(n[3]),a:B(n[4]),format:a?"name":"hex8"};if(n=j.hex6.exec(t))return{r:D(n[1]),g:D(n[2]),b:D(n[3]),format:a?"name":"hex"};if(n=j.hex4.exec(t))return{r:D(n[1]+""+n[1]),g:D(n[2]+""+n[2]),b:D(n[3]+""+n[3]),a:B(n[4]+""+n[4]),format:a?"name":"hex8"};if(n=j.hex3.exec(t))return{r:D(n[1]+""+n[1]),g:D(n[2]+""+n[2]),b:D(n[3]+""+n[3]),format:a?"name":"hex"};return!1}(n));"object"==typeof n&&(U(n.r)&&U(n.g)&&U(n.b)?(d=n.r,p=n.g,g=n.b,a={r:255*L(d,255),g:255*L(p,255),b:255*L(g,255)},f=!0,h="%"===String(n.r).substr(-1)?"prgb":"rgb"):U(n.h)&&U(n.s)&&U(n.v)?(s=P(n.s),u=P(n.v),a=function(e,r,n){e=6*L(e,360),r=L(r,100),n=L(n,100);var a=t.floor(e),i=e-a,o=n*(1-r),l=n*(1-i*r),s=n*(1-(1-i)*r),u=a%6;return{r:255*[n,l,o,o,s,n][u],g:255*[s,n,n,l,o,o][u],b:255*[o,o,s,n,n,l][u]}}(n.h,s,u),f=!0,h="hsv"):U(n.h)&&U(n.s)&&U(n.l)&&(s=P(n.s),c=P(n.l),a=function(t,e,r){var n,a,i;function o(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}if(t=L(t,360),e=L(e,100),r=L(r,100),0===e)n=a=i=r;else{var l=r<.5?r*(1+e):r+e-r*e,s=2*r-l;n=o(s,l,t+1/3),a=o(s,l,t),i=o(s,l,t-1/3)}return{r:255*n,g:255*a,b:255*i}}(n.h,s,c),f=!0,h="hsl"),n.hasOwnProperty("a")&&(l=n.a));var d,p,g;return l=S(l),{ok:f,format:n.format||h,r:i(255,o(a.r,0)),g:i(255,o(a.g,0)),b:i(255,o(a.b,0)),a:l}}(l);this._originalInput=l,this._r=c.r,this._g=c.g,this._b=c.b,this._a=c.a,this._roundA=a(100*this._a)/100,this._format=u.format||c.format,this._gradientType=u.gradientType,this._r<1&&(this._r=a(this._r)),this._g<1&&(this._g=a(this._g)),this._b<1&&(this._b=a(this._b)),this._ok=c.ok,this._tc_id=n++}function u(t,e,r){t=L(t,255),e=L(e,255),r=L(r,255);var n,a,l=o(t,e,r),s=i(t,e,r),u=(l+s)/2;if(l==s)n=a=0;else{var c=l-s;switch(a=u>.5?c/(2-l-s):c/(l+s),l){case t:n=(e-r)/c+(e<r?6:0);break;case e:n=(r-t)/c+2;break;case r:n=(t-e)/c+4}n/=6}return{h:n,s:a,l:u}}function f(t,e,r){t=L(t,255),e=L(e,255),r=L(r,255);var n,a,l=o(t,e,r),s=i(t,e,r),u=l,c=l-s;if(a=0===l?0:c/l,l==s)n=0;else{switch(l){case t:n=(e-r)/c+(e<r?6:0);break;case e:n=(r-t)/c+2;break;case r:n=(t-e)/c+4}n/=6}return{h:n,s:a,v:u}}function h(t,e,r,n){var i=[R(a(t).toString(16)),R(a(e).toString(16)),R(a(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function d(t,e,r,n){return[R(I(n)),R(a(t).toString(16)),R(a(e).toString(16)),R(a(r).toString(16))].join("")}function p(t,e){e=0===e?0:e||10;var r=s(t).toHsl();return r.s-=e/100,r.s=O(r.s),s(r)}function g(t,e){e=0===e?0:e||10;var r=s(t).toHsl();return r.s+=e/100,r.s=O(r.s),s(r)}function v(t){return s(t).desaturate(100)}function m(t,e){e=0===e?0:e||10;var r=s(t).toHsl();return r.l+=e/100,r.l=O(r.l),s(r)}function y(t,e){e=0===e?0:e||10;var r=s(t).toRgb();return r.r=o(0,i(255,r.r-a(-e/100*255))),r.g=o(0,i(255,r.g-a(-e/100*255))),r.b=o(0,i(255,r.b-a(-e/100*255))),s(r)}function x(t,e){e=0===e?0:e||10;var r=s(t).toHsl();return r.l-=e/100,r.l=O(r.l),s(r)}function b(t,e){var r=s(t).toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,s(r)}function _(t){var e=s(t).toHsl();return e.h=(e.h+180)%360,s(e)}function w(t){var e=s(t).toHsl(),r=e.h;return[s(t),s({h:(r+120)%360,s:e.s,l:e.l}),s({h:(r+240)%360,s:e.s,l:e.l})]}function A(t){var e=s(t).toHsl(),r=e.h;return[s(t),s({h:(r+90)%360,s:e.s,l:e.l}),s({h:(r+180)%360,s:e.s,l:e.l}),s({h:(r+270)%360,s:e.s,l:e.l})]}function M(t){var e=s(t).toHsl(),r=e.h;return[s(t),s({h:(r+72)%360,s:e.s,l:e.l}),s({h:(r+216)%360,s:e.s,l:e.l})]}function T(t,e,r){e=e||6,r=r||30;var n=s(t).toHsl(),a=360/r,i=[s(t)];for(n.h=(n.h-(a*e>>1)+720)%360;--e;)n.h=(n.h+a)%360,i.push(s(n));return i}function k(t,e){e=e||6;for(var r=s(t).toHsv(),n=r.h,a=r.s,i=r.v,o=[],l=1/e;e--;)o.push(s({h:n,s:a,v:i})),i=(i+l)%1;return o}s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var e,r,n,a=this.toRgb();return e=a.r/255,r=a.g/255,n=a.b/255,.2126*(e<=.03928?e/12.92:t.pow((e+.055)/1.055,2.4))+.7152*(r<=.03928?r/12.92:t.pow((r+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:t.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=S(t),this._roundA=a(100*this._a)/100,this},toHsv:function(){var t=f(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=f(this._r,this._g,this._b),e=a(360*t.h),r=a(100*t.s),n=a(100*t.v);return 1==this._a?"hsv("+e+", "+r+"%, "+n+"%)":"hsva("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=u(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=u(this._r,this._g,this._b),e=a(360*t.h),r=a(100*t.s),n=a(100*t.l);return 1==this._a?"hsl("+e+", "+r+"%, "+n+"%)":"hsla("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return h(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,r,n,i){var o=[R(a(t).toString(16)),R(a(e).toString(16)),R(a(r).toString(16)),R(I(n))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:a(this._r),g:a(this._g),b:a(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+a(this._r)+", "+a(this._g)+", "+a(this._b)+")":"rgba("+a(this._r)+", "+a(this._g)+", "+a(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:a(100*L(this._r,255))+"%",g:a(100*L(this._g,255))+"%",b:a(100*L(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+a(100*L(this._r,255))+"%, "+a(100*L(this._g,255))+"%, "+a(100*L(this._b,255))+"%)":"rgba("+a(100*L(this._r,255))+"%, "+a(100*L(this._g,255))+"%, "+a(100*L(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(C[h(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+d(this._r,this._g,this._b,this._a),r=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var a=s(t);r="#"+d(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+r+")"},toString:function(t){var e=!!t;t=t||this._format;var r=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex4"===t&&(r=this.toHex8String(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),"hsv"===t&&(r=this.toHsvString()),r||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return s(this.toString())},_applyModification:function(t,e){var r=t.apply(null,[this].concat([].slice.call(e)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(y,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(g,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(T,arguments)},complement:function(){return this._applyCombination(_,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(M,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(A,arguments)}},s.fromRatio=function(t,e){if("object"==typeof t){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]="a"===n?t[n]:P(t[n]));t=r}return s(t,e)},s.equals=function(t,e){return!(!t||!e)&&s(t).toRgbString()==s(e).toRgbString()},s.random=function(){return s.fromRatio({r:l(),g:l(),b:l()})},s.mix=function(t,e,r){r=0===r?0:r||50;var n=s(t).toRgb(),a=s(e).toRgb(),i=r/100;return s({r:(a.r-n.r)*i+n.r,g:(a.g-n.g)*i+n.g,b:(a.b-n.b)*i+n.b,a:(a.a-n.a)*i+n.a})},s.readability=function(e,r){var n=s(e),a=s(r);return(t.max(n.getLuminance(),a.getLuminance())+.05)/(t.min(n.getLuminance(),a.getLuminance())+.05)},s.isReadable=function(t,e,r){var n,a,i=s.readability(t,e);switch(a=!1,(n=function(t){var e,r;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==r&&"large"!==r&&(r="small");return{level:e,size:r}}(r)).level+n.size){case"AAsmall":case"AAAlarge":a=i>=4.5;break;case"AAlarge":a=i>=3;break;case"AAAsmall":a=i>=7}return a},s.mostReadable=function(t,e,r){var n,a,i,o,l=null,u=0;a=(r=r||{}).includeFallbackColors,i=r.level,o=r.size;for(var c=0;c<e.length;c++)(n=s.readability(t,e[c]))>u&&(u=n,l=s(e[c]));return s.isReadable(t,l,{level:i,size:o})||!a?l:(r.includeFallbackColors=!1,s.mostReadable(t,["#fff","#000"],r))};var E=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},C=s.hexNames=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}(E);function S(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function L(e,r){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(e)&&(e="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(e);return e=i(r,o(0,parseFloat(e))),n&&(e=parseInt(e*r,10)/100),t.abs(e-r)<1e-6?1:e%r/parseFloat(r)}function O(t){return i(1,o(0,t))}function D(t){return parseInt(t,16)}function R(t){return 1==t.length?"0"+t:""+t}function P(t){return t<=1&&(t=100*t+"%"),t}function I(e){return t.round(255*parseFloat(e)).toString(16)}function B(t){return D(t)/255}var F,z,N,j=(z="[\\s|\\(]+("+(F="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+F+")[,|\\s]+("+F+")\\s*\\)?",N="[\\s|\\(]+("+F+")[,|\\s]+("+F+")[,|\\s]+("+F+")[,|\\s]+("+F+")\\s*\\)?",{CSS_UNIT:new RegExp(F),rgb:new RegExp("rgb"+z),rgba:new RegExp("rgba"+N),hsl:new RegExp("hsl"+z),hsla:new RegExp("hsla"+N),hsv:new RegExp("hsv"+z),hsva:new RegExp("hsva"+N),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function U(t){return!!j.CSS_UNIT.exec(t)}c.exports?c.exports=s:"function"==typeof CC&&CC.amd?CC(function(){return s}):window.tinycolor=s}(Math),c=c.exports;var f={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},h=f.RdBu,d=function(t){var e=0;if(!Array.isArray(t)||t.length<2)return!1;if(!t[0]||!t[t.length-1])return!1;if(0!=+t[0][0]||1!=+t[t.length-1][0])return!1;for(var r=0;r<t.length;r++){var n=t[r];if(2!==n.length||+n[0]<e||!c(n[1]).isValid())return!1;e=+n[0]}return!0},p=function(t,e){if(e||(e=h),!t)return e;function r(){try{t=f[t]||JSON.parse(t)}catch(r){t=e}}return"string"==typeof t&&(r(),"string"==typeof t&&r()),d(t)?t:e},g={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DBLCLICKDELAY:300,DESELECTDIM:.2},v={},m="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},y="undefined"==typeof DataView?function(){}:DataView;v.isTypedArray=function(t){return m.isView(t)&&!(t instanceof y)},v.isArrayOrTypedArray=function(t){return Array.isArray(t)||v.isTypedArray(t)};var x=function(t){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(t):"[object Object]"===Object.prototype.toString.call(t)&&Object.getPrototypeOf(t)===Object.prototype},b={},_=Array.isArray;function w(t,e,r,n){var a,i,o,l,s,u,c=t[0],f=t.length;if(2===f&&_(c)&&_(t[1])&&0===c.length){if(function(t,e){var r,n;for(r=0;r<t.length;r++){if(null!==(n=t[r])&&"object"==typeof n)return!1;void 0!==n&&(e[r]=n)}return!0}(t[1],c))return c;c.splice(0,c.length)}for(var h=1;h<f;h++)for(i in a=t[h])o=c[i],l=a[i],n&&_(l)?c[i]=l:e&&l&&(x(l)||(s=_(l)))?(s?(s=!1,u=o&&_(o)?o:[]):u=o&&x(o)?o:{},c[i]=w([u,l],e,r,n)):(void 0!==l||r)&&(c[i]=l);return c}b.extendFlat=function(){return w(arguments,!1,!1,!1)},b.extendDeep=function(){return w(arguments,!0,!1,!1)},b.extendDeepAll=function(){return w(arguments,!0,!0,!1)},b.extendDeepNoArrays=function(){return w(arguments,!0,!1,!0)};var A={staticPlot:!1,editable:!1,edits:{annotationPosition:!1,annotationTail:!1,annotationText:!1,axisTitleText:!1,colorbarPosition:!1,colorbarTitleText:!1,legendPosition:!1,legendText:!1,shapePosition:!1,titleText:!1},autosizable:!1,queueLength:0,fillFrame:!1,frameMargins:0,scrollZoom:!1,doubleClick:"reset+autosize",showTips:!0,showAxisDragHandles:!0,showAxisRangeEntryBoxes:!0,showLink:!1,sendData:!0,linkText:"Edit chart",showSources:!1,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:!1,displaylogo:!0,plotGlPixelRatio:2,setBackground:"transparent",topojsonURL:"https://cdn.plot.ly/",mapboxAccessToken:null,logging:1,globalTransforms:[],locale:"en-US",locales:{}},M={},T=M={};function k(t,e){if(t.apply)t.apply(t,e);else for(var r=0;r<e.length;r++)t(e[r])}T.log=function(){if(A.logging>1){for(var t=["LOG:"],e=0;e<arguments.length;e++)t.push(arguments[e]);k(console.trace||console.log,t)}},T.warn=function(){if(A.logging>0){for(var t=["WARN:"],e=0;e<arguments.length;e++)t.push(arguments[e]);k(console.trace||console.log,t)}},T.error=function(){if(A.logging>0){for(var t=["ERROR:"],e=0;e<arguments.length;e++)t.push(arguments[e]);k(console.error,t)}};var E=function(){},C=function(t,e){if(e instanceof RegExp){var r,n=e.toString();for(r=0;r<t.length;r++)if(t[r]instanceof RegExp&&t[r].toString()===n)return t;t.push(e)}else!e&&0!==e||-1!==t.indexOf(e)||t.push(e);return t},S=function(t){var e=t.editType,r=t.colorEditType;void 0===r&&(r=e);var n={family:{valType:"string",noBlank:!0,strict:!0,editType:e},size:{valType:"number",min:1,editType:e},color:{valType:"color",editType:r},editType:e};return t.arrayOk&&(n.family.arrayOk=!0,n.size.arrayOk=!0,n.color.arrayOk=!0),n},L={hoverlabel:{bgcolor:{valType:"color",arrayOk:!0,editType:"none"},bordercolor:{valType:"color",arrayOk:!0,editType:"none"},font:S({arrayOk:!0,editType:"none"}),namelength:{valType:"integer",min:-1,arrayOk:!0,editType:"none"},editType:"calc"}},O={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes"},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",dflt:"",editType:"calc"},ids:{valType:"data_array",editType:"calc"},customdata:{valType:"data_array",editType:"calc"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:L.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"}},D={defaults:["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],defaultLine:"#444",lightLine:"#eee",background:"#fff",borderLine:"#BEC8D9",lightFraction:1e3/11},R=S({editType:"calc"});R.family.dflt='"Open Sans", verdana, arial, sans-serif',R.size.dflt=12,R.color.dflt=D.defaultLine;var P={font:R,title:{valType:"string",editType:"layoutstyle"},titlefont:S({editType:"layoutstyle"}),autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},paper_bgcolor:{valType:"color",dflt:D.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:D.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:D.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"}},I={},B=b.extendFlat,F=b.extendDeepAll;function z(t){var e=t.name,r=t.categories,n=t.meta;if(I.modules[e])M.log("Type "+e+" already registered");else{I.subplotsRegistry[t.basePlotModule.name]||function(t){var e=t.name;if(I.subplotsRegistry[e])return void M.log("Plot type "+e+" already registered.");for(var r in V(t),I.subplotsRegistry[e]=t,I.componentsRegistry)G(r,t.name)}(t.basePlotModule);for(var a={},i=0;i<r.length;i++)a[r[i]]=!0,I.allCategories[r[i]]=!0;for(var o in I.modules[e]={_module:t,categories:a},n&&Object.keys(n).length&&(I.modules[e].meta=n),I.allTypes.push(e),I.componentsRegistry)H(o,e);t.layoutAttributes&&B(I.traceLayoutAttributes,t.layoutAttributes)}}function N(t){if("string"!=typeof t.name)throw new Error("Component module *name* must be a string.");var e=t.name;for(var r in I.componentsRegistry[e]=t,t.layoutAttributes&&(t.layoutAttributes._isLinkedToArray&&C(I.layoutArrayContainers,e),V(t)),I.modules)H(e,r);for(var n in I.subplotsRegistry)G(e,n);for(var a in I.transformsRegistry)q(e,a);t.schema&&t.schema.layout&&F(P,t.schema.layout)}function j(t){if("string"!=typeof t.name)throw new Error("Transform module *name* must be a string.");var e="Transform module "+t.name,r="function"==typeof t.transform,n="function"==typeof t.calcTransform;if(!r&&!n)throw new Error(e+" is missing a *transform* or *calcTransform* method.");for(var a in r&&n&&M.log([e+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),x(t.attributes)||M.log(e+" registered without an *attributes* object."),"function"!=typeof t.supplyDefaults&&M.log(e+" registered without a *supplyDefaults* method."),I.transformsRegistry[t.name]=t,I.componentsRegistry)q(a,t.name)}function U(t){var e=t.name,r=e.split("-")[0],n=t.dictionary,a=t.format,i=n&&Object.keys(n).length,o=a&&Object.keys(a).length,l=I.localeRegistry,s=l[e];if(s||(l[e]=s={}),r!==e){var u=l[r];u||(l[r]=u={}),i&&u.dictionary===s.dictionary&&(u.dictionary=n),o&&u.format===s.format&&(u.format=a)}i&&(s.dictionary=n),o&&(s.format=a)}function V(t){if(t.layoutAttributes){var e=t.layoutAttributes._arrayAttrRegexps;if(e)for(var r=0;r<e.length;r++)C(I.layoutArrayRegexes,e[r])}}function H(t,e){var r=I.componentsRegistry[t].schema;if(r&&r.traces){var n=r.traces[e];n&&F(I.modules[e]._module.attributes,n)}}function q(t,e){var r=I.componentsRegistry[t].schema;if(r&&r.transforms){var n=r.transforms[e];n&&F(I.transformsRegistry[e].attributes,n)}}function G(t,e){var r=I.componentsRegistry[t].schema;if(r&&r.subplots){var n=I.subplotsRegistry[e],a=n.layoutAttributes,i="subplot"===n.attr?n.name:n.attr;Array.isArray(i)&&(i=i[0]);var o=r.subplots[i];a&&o&&F(a,o)}}function X(t){return"object"==typeof t&&(t=t.type),t}I.modules={},I.allCategories={},I.allTypes=[],I.subplotsRegistry={},I.transformsRegistry={},I.componentsRegistry={},I.layoutArrayContainers=[],I.layoutArrayRegexes=[],I.traceLayoutAttributes={},I.localeRegistry={},I.apiMethodRegistry={},I.register=function(t){if(!t)throw new Error("No argument passed to Plotly.register.");t&&!Array.isArray(t)&&(t=[t]);for(var e=0;e<t.length;e++){var r=t[e];if(!r)throw new Error("Invalid module was attempted to be registered!");switch(r.moduleType){case"trace":z(r);break;case"transform":j(r);break;case"component":N(r);break;case"locale":U(r);break;case"apiMethod":var n=r.name;I.apiMethodRegistry[n]=r.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},I.getModule=function(t){var e=I.modules[X(t)];return!!e&&e._module},I.traceIs=function(t,e){if("various"===(t=X(t)))return!1;var r=I.modules[t];return r||(t&&"area"!==t&&M.log("Unrecognized trace type "+t+"."),r=I.modules[O.type.dflt]),!!r.categories[e]},I.getTransformIndices=function(t,e){for(var r=[],n=t.transforms||[],a=0;a<n.length;a++)n[a].type===e&&r.push(a);return r},I.hasTransform=function(t,e){for(var r=t.transforms||[],n=0;n<r.length;n++)if(r[n].type===e)return!0;return!1},I.getComponentMethod=function(t,e){var r=I.componentsRegistry[t];return r&&r[e]||E},I.call=function(){var t=arguments[0],e=[].slice.call(arguments,1);return I.apiMethodRegistry[t].apply(null,e)};var Y=function(t){for(var e,r,n=I.layoutArrayContainers,a=I.layoutArrayRegexes,i=t.split("[")[0],o=0;o<a.length;o++)if((r=t.match(a[o]))&&0===r.index){e=r[0];break}if(e||(e=n[n.indexOf(i)]),!e)return!1;var l=t.substr(e.length);return l?!!(r=l.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:e,index:Number(r[1]),property:r[3]||""}:{array:e,index:"",property:""}},W=v.isArrayOrTypedArray,Z=function(t,e){if(a(e))e=String(e);else if("string"!=typeof e||"[-1]"===e.substr(e.length-4))throw"bad property string";for(var r,n,i,o=0,l=e.split(".");o<l.length;){if(r=String(l[o]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(r[1])l[o]=r[1];else{if(0!==o)throw"bad property string";l.splice(0,1)}for(n=r[2].substr(1,r[2].length-2).split("]["),i=0;i<n.length;i++)o++,l.splice(o,0,Number(n[i]))}o++}return"object"!=typeof t?function(t,e,r){return{set:function(){throw"bad container"},get:function(){},astr:e,parts:r,obj:t}}(t,e,l):{set:K(t,l,e),get:function t(e,r){return function(){var n,a,i,o,l,s=e;for(o=0;o<r.length-1;o++){if(-1===(n=r[o])){for(a=!0,i=[],l=0;l<s.length;l++)i[l]=t(s[l],r.slice(o+1))(),i[l]!==i[0]&&(a=!1);return a?i[0]:i}if("number"==typeof n&&!W(s))return;if("object"!=typeof(s=s[n])||null===s)return}if("object"==typeof s&&null!==s&&null!==(i=s[r[o]]))return i}}(t,l),astr:e,parts:l,obj:t}};var J=/(^|\.)((domain|range)(\.[xy])?|args|parallels)$/,Q=/(^|\.)args\[/;function $(t,e){if(void 0!==(r=t)&&null!==r&&("object"!=typeof r||(W(r)?r.length:Object.keys(r).length))||x(t)&&"]"===e.charAt(e.length-1)||e.match(Q)&&void 0!==t)return!1;var r;if(!W(t))return!0;if(e.match(J))return!0;var n=Y(e);return n&&""===n.index}function K(t,e,r){return function(n){var a,i,o=t,l="",s=[[t,l]],u=$(n,r);for(i=0;i<e.length-1;i++){if("number"==typeof(a=e[i])&&!W(o))throw"array index but container is not an array";if(-1===a){if(u=!et(o,e.slice(i+1),n,r))break;return}if(!rt(o,a,e[i+1],u))break;if("object"!=typeof(o=o[a])||null===o)throw"container is not an object";l=tt(l,a),s.push([o,l])}u?(i===e.length-1&&delete o[e[i]],function(t){var e,r,n,a,i,o;for(e=t.length-1;e>=0;e--){if(n=t[e][0],a=t[e][1],o=!1,W(n))for(r=n.length-1;r>=0;r--)$(n[r],tt(a,r))?o?n[r]=void 0:n.pop():o=!0;else if("object"==typeof n&&null!==n)for(i=Object.keys(n),o=!1,r=i.length-1;r>=0;r--)$(n[i[r]],tt(a,i[r]))?delete n[i[r]]:o=!0;if(o)return}}(s)):o[e[i]]=n}}function tt(t,e){var r=e;return a(e)?r="["+e+"]":t&&(r="."+e),t+r}function et(t,e,r,n){var a,i=W(r),o=!0,l=r,s=n.replace("-1",0),u=!i&&$(r,s),c=e[0];for(a=0;a<t.length;a++)s=n.replace("-1",a),i&&(u=$(l=r[a%r.length],s)),u&&(o=!1),rt(t,a,c,u)&&K(t[a],e,n.replace("-1",a))(l);return o}function rt(t,e,r,n){if(void 0===t[e]){if(n)return!1;t[e]="number"==typeof r?[]:{}}return!0}var nt={counter:function(t,e,r){var n=(e||"")+(r?"":"$");return"xy"===t?new RegExp("^x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+n):new RegExp("^"+t+"([2-9]|[1-9][0-9]+)?"+n)}},at={},it=(Object.keys(f),nt.counter),ot=g.DESELECTDIM,lt=o.wrap180,st=v.isArrayOrTypedArray;at.valObjectMeta={data_array:{coerceFunction:function(t,e,r){st(t)?e.set(t):void 0!==r&&e.set(r)}},enumerated:{coerceFunction:function(t,e,r,n){n.coerceNumber&&(t=+t),-1===n.values.indexOf(t)?e.set(r):e.set(t)},validateFunction:function(t,e){e.coerceNumber&&(t=+t);for(var r=e.values,n=0;n<r.length;n++){var a=String(r[n]);if("/"===a.charAt(0)&&"/"===a.charAt(a.length-1)){if(new RegExp(a.substr(1,a.length-2)).test(t))return!0}else if(t===r[n])return!0}return!1}},boolean:{coerceFunction:function(t,e,r){!0===t||!1===t?e.set(t):e.set(r)}},number:{coerceFunction:function(t,e,r,n){!a(t)||void 0!==n.min&&t<n.min||void 0!==n.max&&t>n.max?e.set(r):e.set(+t)}},integer:{coerceFunction:function(t,e,r,n){t%1||!a(t)||void 0!==n.min&&t<n.min||void 0!==n.max&&t>n.max?e.set(r):e.set(+t)}},string:{coerceFunction:function(t,e,r,n){if("string"!=typeof t){var a="number"==typeof t;!0!==n.strict&&a?e.set(String(t)):e.set(r)}else n.noBlank&&!t?e.set(r):e.set(t)}},color:{coerceFunction:function(t,e,r){c(t).isValid()?e.set(t):e.set(r)}},colorlist:{coerceFunction:function(t,e,r){Array.isArray(t)&&t.length&&t.every(function(t){return c(t).isValid()})?e.set(t):e.set(r)}},colorscale:{coerceFunction:function(t,e,r){e.set(p(t,r))}},angle:{coerceFunction:function(t,e,r){"auto"===t?e.set("auto"):a(t)?e.set(lt(+t)):e.set(r)}},subplotid:{coerceFunction:function(t,e,r,n){var a=n.regex||it(r);"string"==typeof t&&a.test(t)?e.set(t):e.set(r)},validateFunction:function(t,e){var r=e.dflt;return t===r||"string"==typeof t&&!!it(r).test(t)}},flaglist:{coerceFunction:function(t,e,r,n){if("string"==typeof t)if(-1===(n.extras||[]).indexOf(t)){for(var a=t.split("+"),i=0;i<a.length;){var o=a[i];-1===n.flags.indexOf(o)||a.indexOf(o)<i?a.splice(i,1):i++}a.length?e.set(a.join("+")):e.set(r)}else e.set(t);else e.set(r)}},any:{coerceFunction:function(t,e,r){void 0===t?e.set(r):e.set(t)}},info_array:{coerceFunction:function(t,e,r,n){function a(t,e,r){var n,a={set:function(t){n=t}};return void 0===r&&(r=e.dflt),at.valObjectMeta[e.valType].coerceFunction(t,a,r,e),n}var i=2===n.dimensions||"1-2"===n.dimensions&&Array.isArray(t)&&Array.isArray(t[0]);if(Array.isArray(t)){var o,l,s,u,c,f,h=n.items,d=[],p=Array.isArray(h),g=p&&i&&Array.isArray(h[0]),v=i&&p&&!g,m=p&&!v?h.length:t.length;if(r=Array.isArray(r)?r:[],i)for(o=0;o<m;o++)for(d[o]=[],s=Array.isArray(t[o])?t[o]:[],c=v?h.length:p?h[o].length:s.length,l=0;l<c;l++)u=v?h[l]:p?h[o][l]:h,void 0!==(f=a(s[l],u,(r[o]||[])[l]))&&(d[o][l]=f);else for(o=0;o<m;o++)void 0!==(f=a(t[o],p?h[o]:h,r[o]))&&(d[o]=f);e.set(d)}else e.set(r)},validateFunction:function(t,e){if(!Array.isArray(t))return!1;var r=e.items,n=Array.isArray(r),a=2===e.dimensions;if(!e.freeLength&&t.length!==r.length)return!1;for(var i=0;i<t.length;i++)if(a){if(!Array.isArray(t[i])||!e.freeLength&&t[i].length!==r[i].length)return!1;for(var o=0;o<t[i].length;o++)if(!at.validate(t[i][o],n?r[i][o]:r))return!1}else if(!at.validate(t[i],n?r[i]:r))return!1;return!0}}},at.coerce=function(t,e,r,n,a){var i=Z(r,n).get(),o=Z(t,n),l=Z(e,n),s=o.get();return void 0===a&&(a=i.dflt),i.arrayOk&&st(s)?(l.set(s),s):(at.valObjectMeta[i.valType].coerceFunction(s,l,a,i),l.get())},at.coerce2=function(t,e,r,n,a){var i=Z(t,n),o=at.coerce(t,e,r,n,a),l=i.get();return void 0!==l&&null!==l&&o},at.coerceFont=function(t,e,r){var n={};return r=r||{},n.family=t(e+".family",r.family),n.size=t(e+".size",r.size),n.color=t(e+".color",r.color),n},at.coerceHoverinfo=function(t,e,r){var n,a=e._module.attributes,i=a.hoverinfo?a:O,o=i.hoverinfo;if(1===r._dataLength){var l="all"===o.dflt?o.flags.slice():o.dflt.split("+");l.splice(l.indexOf("name"),1),n=l.join("+")}return at.coerce(t,e,i,"hoverinfo",n)},at.coerceSelectionMarkerOpacity=function(t,e){if(t.marker){var r,n,a=t.marker.opacity;if(void 0!==a)st(a)||t.selected||t.unselected||(r=a,n=ot*a),e("selected.marker.opacity",r),e("unselected.marker.opacity",n)}},at.validate=function(t,e){var r=at.valObjectMeta[e.valType];if(e.arrayOk&&st(t))return!0;if(r.validateFunction)return r.validateFunction(t,e);var n={},a=n,i={set:function(t){a=t}};return r.coerceFunction(t,i,n,e),a!==n};var ut,ct,ft=function(t,e){var r=t%e;return r<0?r+e:r},ht={},dt=i.BADNUM,pt=i.ONEDAY,gt=i.ONEHOUR,vt=i.ONEMIN,mt=i.ONESEC,yt=i.EPOCHJD,xt=n.time.format.utc,bt=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,_t=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,wt=(new Date).getFullYear()-70;function At(t){return t&&I.componentsRegistry.calendars&&"string"==typeof t&&"gregorian"!==t}function Mt(t,e){return String(t+Math.pow(10,e)).substr(1)}ht.dateTick0=function(t,e){return At(t)?e?I.getComponentMethod("calendars","CANONICAL_SUNDAY")[t]:I.getComponentMethod("calendars","CANONICAL_TICK")[t]:e?"2000-01-02":"2000-01-01"},ht.dfltRange=function(t){return At(t)?I.getComponentMethod("calendars","DFLTRANGE")[t]:["2000-01-01","2001-01-01"]},ht.isJSDate=function(t){return"object"==typeof t&&null!==t&&"function"==typeof t.getTime},ht.dateTime2ms=function(t,e){if(ht.isJSDate(t))return(t=Number(t)-t.getTimezoneOffset()*vt)>=ut&&t<=ct?t:dt;if("string"!=typeof t&&"number"!=typeof t)return dt;t=String(t);var r=At(e),n=t.charAt(0);!r||"G"!==n&&"g"!==n||(t=t.substr(1),e="");var a=r&&"chinese"===e.substr(0,7),i=t.match(a?_t:bt);if(!i)return dt;var o=i[1],l=i[3]||"1",s=Number(i[5]||1),u=Number(i[7]||0),c=Number(i[9]||0),f=Number(i[11]||0);if(r){if(2===o.length)return dt;var h;o=Number(o);try{var d=I.getComponentMethod("calendars","getCal")(e);if(a){var p="i"===l.charAt(l.length-1);l=parseInt(l,10),h=d.newDate(o,d.toMonthIndex(o,l,p),s)}else h=d.newDate(o,Number(l),s)}catch(t){return dt}return h?(h.toJD()-yt)*pt+u*gt+c*vt+f*mt:dt}o=2===o.length?(Number(o)+2e3-wt)%100+wt:Number(o),l-=1;var g=new Date(Date.UTC(2e3,l,s,u,c));return g.setUTCFullYear(o),g.getUTCMonth()!==l?dt:g.getUTCDate()!==s?dt:g.getTime()+f*mt},ut=ht.MIN_MS=ht.dateTime2ms("-9999"),ct=ht.MAX_MS=ht.dateTime2ms("9999-12-31 23:59:59.9999"),ht.isDateTime=function(t,e){return ht.dateTime2ms(t,e)!==dt};var Tt=90*pt,kt=3*gt,Et=5*vt;function Ct(t,e,r,n,a){if((e||r||n||a)&&(t+=" "+Mt(e,2)+":"+Mt(r,2),(n||a)&&(t+=":"+Mt(n,2),a))){for(var i=4;a%10==0;)i-=1,a/=10;t+="."+Mt(a,i)}return t}ht.ms2DateTime=function(t,e,r){if("number"!=typeof t||!(t>=ut&&t<=ct))return dt;e||(e=0);var n,a,i,o,l,s,u=Math.floor(10*ft(t+.05,1)),c=Math.round(t-u/10);if(At(r)){var f=Math.floor(c/pt)+yt,h=Math.floor(ft(t,pt));try{n=I.getComponentMethod("calendars","getCal")(r).fromJD(f).formatDate("yyyy-mm-dd")}catch(t){n=xt("G%Y-%m-%d")(new Date(c))}if("-"===n.charAt(0))for(;n.length<11;)n="-0"+n.substr(1);else for(;n.length<10;)n="0"+n;a=e<Tt?Math.floor(h/gt):0,i=e<Tt?Math.floor(h%gt/vt):0,o=e<kt?Math.floor(h%vt/mt):0,l=e<Et?h%mt*10+u:0}else s=new Date(c),n=xt("%Y-%m-%d")(s),a=e<Tt?s.getUTCHours():0,i=e<Tt?s.getUTCMinutes():0,o=e<kt?s.getUTCSeconds():0,l=e<Et?10*s.getUTCMilliseconds()+u:0;return Ct(n,a,i,o,l)},ht.ms2DateTimeLocal=function(t){if(!(t>=ut+pt&&t<=ct-pt))return dt;var e=Math.floor(10*ft(t+.05,1)),r=new Date(Math.round(t-e/10));return Ct(n.time.format("%Y-%m-%d")(r),r.getHours(),r.getMinutes(),r.getSeconds(),10*r.getUTCMilliseconds()+e)},ht.cleanDate=function(t,e,r){if(ht.isJSDate(t)||"number"==typeof t){if(At(r))return M.error("JS Dates and milliseconds are incompatible with world calendars",t),e;if(!(t=ht.ms2DateTimeLocal(+t))&&void 0!==e)return e}else if(!ht.isDateTime(t,r))return M.error("unrecognized date",t),e;return t};var St=/%\d?f/g;function Lt(t,e,r,n){t=t.replace(St,function(t){var r=Math.min(+t.charAt(1)||6,6);return(e/1e3%1+2).toFixed(r).substr(2).replace(/0+$/,"")||"0"});var a=new Date(Math.floor(e+.05));if(At(n))try{t=I.getComponentMethod("calendars","worldCalFmt")(t,e,n)}catch(t){return"Invalid"}return r(t)(a)}var Ot=[59,59.9,59.99,59.999,59.9999];ht.formatDate=function(t,e,r,n,i,o){if(i=At(i)&&i,!e)if("y"===r)e=o.year;else if("m"===r)e=o.month;else{if("d"!==r)return function(t,e){var r=ft(t+.05,pt),n=Mt(Math.floor(r/gt),2)+":"+Mt(ft(Math.floor(r/vt),60),2);if("M"!==e){a(e)||(e=0);var i=(100+Math.min(ft(t/mt,60),Ot[e])).toFixed(e).substr(1);e>0&&(i=i.replace(/0+$/,"").replace(/[\.]$/,"")),n+=":"+i}return n}(t,r)+"\n"+Lt(o.dayMonthYear,t,n,i);e=o.dayMonth+"\n"+o.year}return Lt(e,t,n,i)};var Dt=3*pt;ht.incrementMonth=function(t,e,r){r=At(r)&&r;var n=ft(t,pt);if(t=Math.round(t-n),r)try{var a=Math.round(t/pt)+yt,i=I.getComponentMethod("calendars","getCal")(r),o=i.fromJD(a);return e%12?i.add(o,e,"m"):i.add(o,e/12,"y"),(o.toJD()-yt)*pt+n}catch(e){M.error("invalid ms "+t+" in calendar "+r)}var l=new Date(t+Dt);return l.setUTCMonth(l.getUTCMonth()+e)+n-Dt},ht.findExactDates=function(t,e){for(var r,n,i=0,o=0,l=0,s=0,u=At(e)&&I.getComponentMethod("calendars","getCal")(e),c=0;c<t.length;c++)if(n=t[c],a(n)){if(!(n%pt))if(u)try{1===(r=u.fromJD(n/pt+yt)).day()?1===r.month()?i++:o++:l++}catch(t){}else 1===(r=new Date(n)).getUTCDate()?0===r.getUTCMonth()?i++:o++:l++}else s++;l+=o+=i;var f=t.length-s;return{exactYears:i/f,exactMonths:o/f,exactDays:l/f}};function Rt(t){return!0===t.visible}function Pt(t){return!0===t[0].trace.visible}var It,Bt,Ft,zt={};function Nt(t,e,r,n,a,i,o,l){var s=r-t,u=a-t,c=o-a,f=n-e,h=i-e,d=l-i,p=s*d-c*f;if(0===p)return null;var g=(u*d-c*h)/p,v=(u*f-s*h)/p;return v<0||v>1||g<0||g>1?null:{x:t+s*g,y:e+f*g}}function jt(t,e,r,n,a){var i=n*t+a*e;if(i<0)return n*n+a*a;if(i>r){var o=n-t,l=a-e;return o*o+l*l}var s=n*e-a*t;return s*s/r}zt.segmentsIntersect=Nt,zt.segmentDistance=function(t,e,r,n,a,i,o,l){if(Nt(t,e,r,n,a,i,o,l))return 0;var s=r-t,u=n-e,c=o-a,f=l-i,h=s*s+u*u,d=c*c+f*f,p=Math.min(jt(s,u,h,a-t,i-e),jt(s,u,h,o-t,l-e),jt(c,f,d,t-a,e-i),jt(c,f,d,r-a,n-i));return Math.sqrt(p)},zt.getTextLocation=function(t,e,r,n){if(t===Bt&&n===Ft||(It={},Bt=t,Ft=n),It[r])return It[r];var a=t.getPointAtLength(ft(r-n/2,e)),i=t.getPointAtLength(ft(r+n/2,e)),o=Math.atan((i.y-a.y)/(i.x-a.x)),l=t.getPointAtLength(ft(r,e)),s={x:(4*l.x+a.x+i.x)/6,y:(4*l.y+a.y+i.y)/6,theta:o};return It[r]=s,s},zt.clearLocationCache=function(){Bt=null},zt.getVisibleSegment=function(t,e,r){var n,a,i=e.left,o=e.right,l=e.top,s=e.bottom,u=0,c=t.getTotalLength(),f=c;function h(e){var r=t.getPointAtLength(e);0===e?n=r:e===c&&(a=r);var u=r.x<i?i-r.x:r.x>o?r.x-o:0,f=r.y<l?l-r.y:r.y>s?r.y-s:0;return Math.sqrt(u*u+f*f)}for(var d=h(u);d;){if((u+=d+r)>f)return;d=h(u)}for(d=h(f);d;){if(u>(f-=d+r))return;d=h(f)}return{min:u,max:f,len:f-u,total:c,isClosed:0===u&&f===c&&Math.abs(n.x-a.x)<.1&&Math.abs(n.y-a.y)<.1}},zt.findPointOnPath=function(t,e,r,n){for(var a,i,o,l=(n=n||{}).pathLength||t.getTotalLength(),s=n.tolerance||.001,u=n.iterationLimit||30,c=t.getPointAtLength(0)[r]>t.getPointAtLength(l)[r]?-1:1,f=0,h=0,d=l;f<u;){if(a=(h+d)/2,o=(i=t.getPointAtLength(a))[r]-e,Math.abs(o)<s)return i;c*o>0?d=a:h=a,f++}return i};var Ut=function(t){var e;if("string"==typeof t){if(null===(e=document.getElementById(t)))throw new Error("No DOM element with id '"+t+"' exists on the page.");return e}if(null===t||void 0===t)throw new Error("DOM element provided is null or undefined");return t},Vt=function(t){return t},Ht=/^\w*$/,qt={init2dArray:function(t,e){for(var r=new Array(t),n=0;n<t;n++)r[n]=new Array(e);return r},transposeRagged:function(t){var e,r,n=0,a=t.length;for(e=0;e<a;e++)n=Math.max(n,t[e].length);var i=new Array(n);for(e=0;e<n;e++)for(i[e]=new Array(a),r=0;r<a;r++)i[e][r]=t[r][e];return i},dot:function(t,e){if(!t.length||!e.length||t.length!==e.length)return null;var r,n,a=t.length;if(t[0].length)for(r=new Array(a),n=0;n<a;n++)r[n]=qt.dot(t[n],e);else if(e[0].length){var i=qt.transposeRagged(e);for(r=new Array(i.length),n=0;n<i.length;n++)r[n]=qt.dot(t,i[n])}else for(r=0,n=0;n<a;n++)r+=t[n]*e[n];return r},translationMatrix:function(t,e){return[[1,0,t],[0,1,e],[0,0,1]]},rotationMatrix:function(t){var e=t*Math.PI/180;return[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]]},rotationXYMatrix:function(t,e,r){return qt.dot(qt.dot(qt.translationMatrix(e,r),qt.rotationMatrix(t)),qt.translationMatrix(-e,-r))},apply2DTransform:function(t){return function(){var e=arguments;3===e.length&&(e=e[0]);var r=1===arguments.length?e[0]:[e[0],e[1]];return qt.dot(t,[r[0],r[1],1]).slice(0,2)}},apply2DTransform2:function(t){var e=qt.apply2DTransform(t);return function(t){return e(t.slice(0,2)).concat(e(t.slice(2,4)))}}},Gt=[],Xt=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,Yt=/^[^\.\[\]]+$/,Wt=v.isArrayOrTypedArray,Zt={};function Jt(t,e){return t<e}function Qt(t,e){return t<=e}function $t(t,e){return t>e}function Kt(t,e){return t>=e}Zt.findBin=function(t,e,r){if(a(e.start))return r?Math.ceil((t-e.start)/e.size-1e-9)-1:Math.floor((t-e.start)/e.size+1e-9);var n,i,o=0,l=e.length,s=0,u=l>1?(e[l-1]-e[0])/(l-1):1;for(i=u>=0?r?Jt:Qt:r?Kt:$t,t+=1e-9*u*(r?-1:1)*(u>=0?1:-1);o<l&&s++<100;)i(e[n=Math.floor((o+l)/2)],t)?o=n+1:l=n;return s>90&&M.log("Long binary search..."),o-1},Zt.sorterAsc=function(t,e){return t-e},Zt.sorterDes=function(t,e){return e-t},Zt.distinctVals=function(t){var e=t.slice();e.sort(Zt.sorterAsc);for(var r=e.length-1,n=e[r]-e[0]||1,a=n/(r||1)/1e4,i=[e[0]],o=0;o<r;o++)e[o+1]>e[o]+a&&(n=Math.min(n,e[o+1]-e[o]),i.push(e[o+1]));return{vals:i,minDiff:n}},Zt.roundUp=function(t,e,r){for(var n,a=0,i=e.length-1,o=0,l=r?0:1,s=r?1:0,u=r?Math.ceil:Math.floor;a<i&&o++<100;)e[n=u((a+i)/2)]<=t?a=n+l:i=n-s;return e[a]};var te={},ee=v.isArrayOrTypedArray;te.aggNums=function(t,e,r,n){var i,o;if((!n||n>r.length)&&(n=r.length),a(e)||(e=!1),ee(r[0])){for(o=new Array(n),i=0;i<n;i++)o[i]=te.aggNums(t,e,r[i]);r=o}for(i=0;i<n;i++)a(e)?a(r[i])&&(e=t(+e,+r[i])):e=r[i];return e},te.len=function(t){return te.aggNums(function(t){return t+1},0,t)},te.mean=function(t,e){return e||(e=te.len(t)),te.aggNums(function(t,e){return t+e},0,t)/e},te.variance=function(t,e,r){return e||(e=te.len(t)),a(r)||(r=te.mean(t,e)),te.aggNums(function(t,e){return t+Math.pow(e-r,2)},0,t)/e},te.stdev=function(t,e,r){return Math.sqrt(te.variance(t,e,r))},te.interp=function(t,e){if(!a(e))throw"n should be a finite number";if((e=e*t.length-.5)<0)return t[0];if(e>t.length-1)return t[t.length-1];var r=e%1;return r*t[Math.ceil(e)]+(1-r)*t[Math.floor(e)]};var re={},ne={};function ae(t){t&&null!==t.timer&&(clearTimeout(t.timer),t.timer=null)}re.throttle=function(t,e,r){var n=ne[t],a=Date.now();if(!n){for(var i in ne)ne[i].ts<a-6e4&&delete ne[i];n=ne[t]={ts:0,timer:null}}function o(){r(),n.ts=Date.now(),n.onDone&&(n.onDone(),n.onDone=null)}ae(n),a>n.ts+e?o():n.timer=setTimeout(function(){o(),n.timer=null},e)},re.done=function(t){var e=ne[t];return e&&e.timer?new Promise(function(t){var r=e.onDone;e.onDone=function(){r&&r(),t(),e.onDone=null}}):Promise.resolve()},re.clear=function(t){if(t)ae(ne[t]),delete ne[t];else for(var e in ne)re.clear(e)};var ie=function(t,e){if(t>0)return Math.log(t)/Math.LN10;var r=Math.log(Math.min(e[0],e[1]))/Math.LN10;return a(r)||(r=Math.log(Math.max(e[0],e[1]))/Math.LN10-6),r},oe={},le=i.FP_SAFE,se=i.BADNUM,ue=oe={};ue.nestedProperty=Z,ue.keyedContainer=function(t,e,r,n){var a,i;r=r||"name",n=n||"value";var o={};i=e&&e.length?Z(t,e).get():t,e=e||"",i=i||[];var l={};for(a=0;a<i.length;a++)l[i[a][r]]=a;var s=Ht.test(n),u={set:function(t,e){var a=null===e?4:0,c=l[t];void 0===c?(a|=3,c=i.length,l[t]=c):e!==(s?i[c][n]:Z(i[c],n).get())&&(a|=2);var f=i[c]=i[c]||{};return f[r]=t,s?f[n]=e:Z(f,n).set(e),null!==e&&(a&=-5),o[c]=o[c]|a,u},get:function(t){var e=l[t];return void 0===e?void 0:s?i[e][n]:Z(i[e],n).get()},rename:function(t,e){var n=l[t];return void 0===n?u:(o[n]=1|o[n],l[e]=n,delete l[t],i[n][r]=e,u)},remove:function(t){var e=l[t];if(void 0===e)return u;var c=i[e];if(Object.keys(c).length>2)return o[e]=2|o[e],u.set(t,null);if(s){for(a=e;a<i.length;a++)o[a]=3|o[a];for(a=e;a<i.length;a++)l[i[a][r]]--;i.splice(e,1),delete l[t]}else Z(c,n).set(null),o[e]=6|o[e];return u},constructUpdate:function(){for(var t,a,l={},u=Object.keys(o),c=0;c<u.length;c++)a=u[c],t=e+"["+a+"]",i[a]?(1&o[a]&&(l[t+"."+r]=i[a][r]),2&o[a]&&(l[t+"."+n]=s?4&o[a]?null:i[a][n]:4&o[a]?null:Z(i[a],n).get())):l[t]=null;return l}};return u},ue.relativeAttr=function(t,e){for(;e;){var r=t.match(Xt);if(r)t=r[1];else{if(!t.match(Yt))throw new Error("bad relativeAttr call:"+[t,e]);t=""}if("^"!==e.charAt(0))break;e=e.slice(1)}return t&&"["!==e.charAt(0)?t+"."+e:t+e},ue.isPlainObject=x,ue.mod=ft,ue.toLogRange=ie,ue.relinkPrivateKeys=function t(e,r){for(var n in r){var a=r[n],i=e[n];if(i!==a)if("_"===n.charAt(0)||"function"==typeof a){if(n in e)continue;e[n]=a}else if(Wt(a)&&Wt(i)&&x(a[0])){if("customdata"===n||"ids"===n)continue;for(var o=Math.min(a.length,i.length),l=0;l<o;l++)i[l]!==a[l]&&x(a[l])&&x(i[l])&&t(i[l],a[l])}else x(a)&&x(i)&&(t(i,a),Object.keys(i).length||delete e[n])}},ue.ensureArray=function(t,e){return Array.isArray(t)||(t=[]),t.length=e,t},ue.isTypedArray=v.isTypedArray,ue.isArrayOrTypedArray=v.isArrayOrTypedArray,ue.valObjectMeta=at.valObjectMeta,ue.coerce=at.coerce,ue.coerce2=at.coerce2,ue.coerceFont=at.coerceFont,ue.coerceHoverinfo=at.coerceHoverinfo,ue.coerceSelectionMarkerOpacity=at.coerceSelectionMarkerOpacity,ue.validate=at.validate,ue.dateTime2ms=ht.dateTime2ms,ue.isDateTime=ht.isDateTime,ue.ms2DateTime=ht.ms2DateTime,ue.ms2DateTimeLocal=ht.ms2DateTimeLocal,ue.cleanDate=ht.cleanDate,ue.isJSDate=ht.isJSDate,ue.formatDate=ht.formatDate,ue.incrementMonth=ht.incrementMonth,ue.dateTick0=ht.dateTick0,ue.dfltRange=ht.dfltRange,ue.findExactDates=ht.findExactDates,ue.MIN_MS=ht.MIN_MS,ue.MAX_MS=ht.MAX_MS,ue.findBin=Zt.findBin,ue.sorterAsc=Zt.sorterAsc,ue.sorterDes=Zt.sorterDes,ue.distinctVals=Zt.distinctVals,ue.roundUp=Zt.roundUp,ue.aggNums=te.aggNums,ue.len=te.len,ue.mean=te.mean,ue.variance=te.variance,ue.stdev=te.stdev,ue.interp=te.interp,ue.init2dArray=qt.init2dArray,ue.transposeRagged=qt.transposeRagged,ue.dot=qt.dot,ue.translationMatrix=qt.translationMatrix,ue.rotationMatrix=qt.rotationMatrix,ue.rotationXYMatrix=qt.rotationXYMatrix,ue.apply2DTransform=qt.apply2DTransform,ue.apply2DTransform2=qt.apply2DTransform2,ue.deg2rad=o.deg2rad,ue.rad2deg=o.rad2deg,ue.wrap360=o.wrap360,ue.wrap180=o.wrap180,ue.segmentsIntersect=zt.segmentsIntersect,ue.segmentDistance=zt.segmentDistance,ue.getTextLocation=zt.getTextLocation,ue.clearLocationCache=zt.clearLocationCache,ue.getVisibleSegment=zt.getVisibleSegment,ue.findPointOnPath=zt.findPointOnPath,ue.extendFlat=b.extendFlat,ue.extendDeep=b.extendDeep,ue.extendDeepAll=b.extendDeepAll,ue.extendDeepNoArrays=b.extendDeepNoArrays,ue.log=M.log,ue.warn=M.warn,ue.error=M.error,ue.counterRegex=nt.counter,ue.throttle=re.throttle,ue.throttleDone=re.done,ue.clearThrottle=re.clear,ue.getGraphDiv=Ut,ue._=function(t,e){for(var r=t._context.locale,n=0;n<2;n++){for(var a=t._context.locales,i=0;i<2;i++){var o=(a[r]||{}).dictionary;if(o){var l=o[e];if(l)return l}a=I.localeRegistry}var s=r.split("-")[0];if(s===r)break;r=s}return e},ue.notifier=function(t,e){if(-1===Gt.indexOf(t)){Gt.push(t);var r=1e3;a(e)?r=e:"long"===e&&(r=3e3);var i=n.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0),i.selectAll(".notifier-note").data(Gt).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(t){var e=n.select(this);e.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){e.transition().call(o)});for(var a=e.append("p"),i=t.split(/<br\s*\/?>/g),l=0;l<i.length;l++)l&&a.append("br"),a.append("span").text(i[l]);e.transition().duration(700).style("opacity",1).transition().delay(r).call(o)})}function o(t){t.duration(700).style("opacity",0).each("end",function(t){var e=Gt.indexOf(t);-1!==e&&Gt.splice(e,1),n.select(this).remove()})}},ue.filterUnique=function(t){for(var e={},r=[],n=0,a=0;a<t.length;a++){var i=t[a];1!==e[i]&&(e[i]=1,r[n++]=i)}return r},ue.filterVisible=function(t){for(var e,r=(e=t,Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace?Pt:Rt),n=[],a=0;a<t.length;a++){var i=t[a];r(i)&&n.push(i)}return n},ue.pushUnique=C,ue.cleanNumber=function(t){return"string"==typeof t&&(t=t.replace(u,"")),a(t)?Number(t):s},ue.ensureNumber=function(t){return a(t)?(t=Number(t))<-le||t>le?se:a(t)?Number(t):se:se},ue.noop=E,ue.identity=Vt,ue.swapAttrs=function(t,e,r,n){r||(r="x"),n||(n="y");for(var a=0;a<e.length;a++){var i=e[a],o=ue.nestedProperty(t,i.replace("?",r)),l=ue.nestedProperty(t,i.replace("?",n)),s=o.get();o.set(l.get()),l.set(s)}},ue.raiseToTop=function(t){t.parentNode.appendChild(t)},ue.cancelTransition=function(t){return t.transition().duration(0)},ue.constrain=function(t,e,r){return e>r?Math.max(r,Math.min(e,t)):Math.max(e,Math.min(r,t))},ue.bBoxIntersect=function(t,e,r){return r=r||0,t.left<=e.right+r&&e.left<=t.right+r&&t.top<=e.bottom+r&&e.top<=t.bottom+r},ue.simpleMap=function(t,e,r,n){for(var a=t.length,i=new Array(a),o=0;o<a;o++)i[o]=e(t[o],r,n);return i},ue.randstr=function t(e,r,n){if(n||(n=16),void 0===r&&(r=24),r<=0)return"0";var a,i,o=Math.log(Math.pow(2,r))/Math.log(n),l="";for(a=2;o===1/0;a*=2)o=Math.log(Math.pow(2,r/a))/Math.log(n)*a;var s=o-Math.floor(o);for(a=0;a<Math.floor(o);a++)l=Math.floor(Math.random()*n).toString(n)+l;s&&(i=Math.pow(n,s),l=Math.floor(Math.random()*i).toString(n)+l);var u=parseInt(l,n);return e&&e.indexOf(l)>-1||u!==1/0&&u>=Math.pow(2,r)?t(e,r,n):l},ue.OptionControl=function(t,e){t||(t={}),e||(e="opt");var r={optionList:[],_newoption:function(n){n[e]=t,r[n.name]=n,r.optionList.push(n)}};return r["_"+e]=t,r},ue.smooth=function(t,e){if((e=Math.round(e)||0)<2)return t;var r,n,a,i,o=t.length,l=2*o,s=2*e-1,u=new Array(s),c=new Array(o);for(r=0;r<s;r++)u[r]=(1-Math.cos(Math.PI*(r+1)/e))/(2*e);for(r=0;r<o;r++){for(i=0,n=0;n<s;n++)(a=r+n+1-e)<-o?a-=l*Math.round(a/l):a>=l&&(a-=l*Math.floor(a/l)),a<0?a=-1-a:a>=o&&(a=l-1-a),i+=t[a]*u[n];c[r]=i}return c},ue.syncOrAsync=function(t,e,r){var n;function a(){return ue.syncOrAsync(t,e,r)}for(;t.length;)if((n=(0,t.splice(0,1)[0])(e))&&n.then)return n.then(a).then(void 0,ue.promiseError);return r&&r(e)},ue.stripTrailingSlash=function(t){return"/"===t.substr(-1)?t.substr(0,t.length-1):t},ue.noneOrAll=function(t,e,r){if(t){var n,a,i=!1,o=!0;for(n=0;n<r.length;n++)void 0!==(a=t[r[n]])&&null!==a?i=!0:o=!1;if(i&&!o)for(n=0;n<r.length;n++)t[r[n]]=e[r[n]]}},ue.mergeArray=function(t,e,r){if(ue.isArrayOrTypedArray(t))for(var n=Math.min(t.length,e.length),a=0;a<n;a++)e[a][r]=t[a]},ue.fillArray=function(t,e,r,n){if(n=n||ue.identity,ue.isArrayOrTypedArray(t))for(var a=0;a<e.length;a++)e[a][r]=n(t[a])},ue.castOption=function(t,e,r,n){n=n||ue.identity;var a=ue.nestedProperty(t,r).get();return ue.isArrayOrTypedArray(a)?Array.isArray(e)&&ue.isArrayOrTypedArray(a[e[0]])?n(a[e[0]][e[1]]):n(a[e]):a},ue.extractOption=function(t,e,r,n){if(r in t)return t[r];var a=ue.nestedProperty(e,n).get();return Array.isArray(a)?void 0:a},ue.tagSelected=function(t,e,r){var n,i,o=e.selectedpoints,l=e._indexToPoints;if(l)for(var s in n={},l)for(var u=l[s],c=0;c<u.length;c++)n[u[c]]=s;function f(e){return void 0!==e&&e<t.length}for(var h=0;h<o.length;h++){var d=o[h];if(a(i=d)&&i>=0&&i%1==0){var p=n?n[d]:d,g=r?r[p]:p;f(g)&&(t[g].selected=1)}}},ue.getTargetArray=function(t,e){var r=e.target;if("string"==typeof r&&r){var n=ue.nestedProperty(t,r).get();return!!Array.isArray(n)&&n}return!!Array.isArray(r)&&r},ue.minExtend=function(t,e){var r={};"object"!=typeof e&&(e={});var n,a,i,o=Object.keys(t);for(n=0;n<o.length;n++)i=t[a=o[n]],"_"!==a.charAt(0)&&"function"!=typeof i&&("module"===a?r[a]=i:Array.isArray(i)?r[a]=i.slice(0,3):r[a]=i&&"object"==typeof i?ue.minExtend(t[a],e[a]):i);for(o=Object.keys(e),n=0;n<o.length;n++)"object"==typeof(i=e[a=o[n]])&&a in r&&"object"==typeof r[a]||(r[a]=i);return r},ue.titleCase=function(t){return t.charAt(0).toUpperCase()+t.substr(1)},ue.containsAny=function(t,e){for(var r=0;r<e.length;r++)if(-1!==t.indexOf(e[r]))return!0;return!1},ue.isPlotDiv=function(t){var e=n.select(t);return e.node()instanceof HTMLElement&&e.size()&&e.classed("js-plotly-plot")},ue.removeElement=function(t){var e=t&&t.parentNode;e&&e.removeChild(t)},ue.addStyleRule=function(t,e){if(!ue.styleSheet){var r=document.createElement("style");r.appendChild(document.createTextNode("")),document.head.appendChild(r),ue.styleSheet=r.sheet}var n=ue.styleSheet;n.insertRule?n.insertRule(t+"{"+e+"}",0):n.addRule?n.addRule(t,e,0):ue.warn("addStyleRule failed")},ue.isIE=function(){return void 0!==window.navigator.msSaveBlob},ue.isD3Selection=function(t){return t&&"function"==typeof t.classed},ue.ensureSingle=function(t,e,r,n){var a=t.select(e+(r?"."+r:""));if(a.size())return a;var i=t.append(e).classed(r,!0);return n&&i.call(n),i},ue.ensureSingleById=function(t,e,r,n){var a=t.select(e+"#"+r);if(a.size())return a;var i=t.append(e).attr("id",r);return n&&i.call(n),i},ue.objectFromPath=function(t,e){for(var r,n=t.split("."),a=r={},i=0;i<n.length;i++){var o=n[i],l=null,s=n[i].match(/(.*)\[([0-9]+)\]/);s?(o=s[1],l=s[2],r=r[o]=[],i===n.length-1?r[l]=e:r[l]={},r=r[l]):(i===n.length-1?r[o]=e:r[o]={},r=r[o])}return a};var ce=/^([^\[\.]+)\.(.+)?/,fe=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;ue.expandObjectPaths=function(t){var e,r,n,a,i,o,l;if("object"==typeof t&&!Array.isArray(t))for(r in t)t.hasOwnProperty(r)&&((e=r.match(ce))?(a=t[r],n=e[1],delete t[r],t[n]=ue.extendDeepNoArrays(t[n]||{},ue.objectFromPath(r,ue.expandObjectPaths(a))[n])):(e=r.match(fe))?(a=t[r],n=e[1],i=parseInt(e[2]),delete t[r],t[n]=t[n]||[],"."===e[3]?(l=e[4],o=t[n][i]=t[n][i]||{},ue.extendDeepNoArrays(o,ue.objectFromPath(l,ue.expandObjectPaths(a)))):t[n][i]=ue.expandObjectPaths(a)):t[r]=ue.expandObjectPaths(t[r]));return t},ue.numSeparate=function(t,e,r){if(r||(r=!1),"string"!=typeof e||0===e.length)throw new Error("Separator string required for formatting!");"number"==typeof t&&(t=String(t));var n=/(\d+)(\d{3})/,a=e.charAt(0),i=e.charAt(1),o=t.split("."),l=o[0],s=o.length>1?a+o[1]:"";if(i&&(o.length>1||l.length>4||r))for(;n.test(l);)l=l.replace(n,"$1"+i+"$2");return l+s};var he=/%{([^\s%{}]*)}/g,de=/^\w*$/;ue.templateString=function(t,e){var r={};return t.replace(he,function(t,n){return de.test(n)?e[n]||"":(r[n]=r[n]||ue.nestedProperty(e,n).get,r[n]()||"")})};ue.subplotSort=function(t,e){for(var r=Math.min(t.length,e.length)+1,n=0,a=0,i=0;i<r;i++){var o=t.charCodeAt(i)||0,l=e.charCodeAt(i)||0,s=o>=48&&o<=57,u=l>=48&&l<=57;if(s&&(n=10*n+o-48),u&&(a=10*a+l-48),!s||!u){if(n!==a)return n-a;if(o!==l)return o-l}}return a-n};var pe=2e9;ue.seedPseudoRandom=function(){pe=2e9},ue.pseudoRandom=function(){var t=pe;return pe=(69069*pe+1)%4294967296,Math.abs(pe-t)<429496729?ue.pseudoRandom():pe/4294967296};var ge=oe.extendFlat,ve=oe.isPlainObject,me={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","clearAxisTypes","plot","style","colorbars"]},ye={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","plot","legend","ticks","axrange","margins","layoutstyle","modebar","camera","arraydraw"]},xe=me.flags.slice().concat(["clearCalc","fullReplot"]),be=ye.flags.slice().concat("layoutReplot"),_e={traces:me,layout:ye,traceFlags:function(){return we(xe)},layoutFlags:function(){return we(be)},update:function(t,e){var r=e.editType;if(r&&"none"!==r)for(var n=r.split("+"),a=0;a<n.length;a++)t[n[a]]=!0},overrideAll:Ae};function we(t){for(var e={},r=0;r<t.length;r++)e[t[r]]=!1;return e}function Ae(t,e,r){var n=ge({},t);for(var a in n){var i=n[a];ve(i)&&(n[a]=Me(i,e,r,a))}return"from-root"===r&&(n.editType=e),n}function Me(t,e,r,n){if(t.valType){var a=ge({},t);if(a.editType=e,Array.isArray(t.items)){a.items=new Array(t.items.length);for(var i=0;i<t.items.length;i++)a.items[i]=Me(t.items[i],e,"from-root")}return a}return Ae(t,e,"_"===n.charAt(0)?"nested":"from-root")}var Te={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"},ke=S({editType:"none"});ke.family.dflt=Te.HOVERFONT,ke.size.dflt=Te.HOVERFONTSIZE;var Ee={dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable"],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:ke,namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}},Ce={xmlns:"http://www.w3.org/2000/xmlns/",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"};Ce.svgAttrs={xmlns:Ce.svg,"xmlns:xlink":Ce.xlink};var Se={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}},Le=nt.counter,Oe={idRegex:{x:Le("x"),y:Le("y")},attrRegex:Le("[xy]axis"),xAxisMatch:Le("xaxis"),yAxisMatch:Le("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","maplayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scatterlayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}},De={id2name:function(t){if("string"==typeof t&&t.match(Oe.AX_ID_PATTERN)){var e=t.substr(1);return"1"===e&&(e=""),t.charAt(0)+"axis"+e}},name2id:function(t){if(t.match(Oe.AX_NAME_PATTERN)){var e=t.substr(5);return"1"===e&&(e=""),t.charAt(0)+e}},cleanId:function(t,e){if(t.match(Oe.AX_ID_PATTERN)&&(!e||t.charAt(0)===e)){var r=t.substr(1).replace(/^0+/,"");return"1"===r&&(r=""),t.charAt(0)+r}},list:function(t,e,r){var n=t._fullLayout;if(!n)return[];var a,i=De.listIds(t,e),o=new Array(i.length);for(a=0;a<i.length;a++){var l=i[a];o[a]=n[l.charAt(0)+"axis"+l.substr(1)]}if(!r){var s=n._subplots.gl3d||[];for(a=0;a<s.length;a++){var u=n[s[a]];e?o.push(u[e+"axis"]):o.push(u.xaxis,u.yaxis,u.zaxis)}}return o},listIds:function(t,e){var r=t._fullLayout;if(!r)return[];var n=r._subplots;return e?n[e+"axis"]:n.xaxis.concat(n.yaxis)},getFromId:function(t,e,r){var n=t._fullLayout;return"x"===r?e=e.replace(/y[0-9]*/,""):"y"===r&&(e=e.replace(/x[0-9]*/,"")),n[De.id2name(e)]},getFromTrace:function(t,e,r){var n=t._fullLayout,a=null;if(I.traceIs(e,"gl3d")){var i=e.scene;"scene"===i.substr(0,5)&&(a=n[i][r+"axis"])}else a=De.getFromId(t,e[r+"axis"]||r);return a},idSort:function(t,e){var r=t.charAt(0),n=e.charAt(0);return r!==n?r>n?1:-1:+(t.substr(1)||1)-+(e.substr(1)||1)}},Re={};(function(t){"use strict";var e;e="function"!=typeof t.matchMedia||!t.matchMedia("(hover: none)").matches,Re=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Pe=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}(),Ie={left:0,top:0},Be=function(t,e,r){e=e||t.currentTarget||t.srcElement,Array.isArray(r)||(r=[0,0]);var n=t.clientX||0,a=t.clientY||0,i=(o=e,o===window||o===document||o===document.body?Ie:o.getBoundingClientRect());var o;return r[0]=n-i.left,r[1]=a-i.top,r};var Fe=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];function ze(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}var Ne=ze;function je(t){return"function"==typeof t}function Ue(t){return"object"==typeof t&&null!==t}function Ve(t){return void 0===t}ze.EventEmitter=ze,ze.prototype._events=void 0,ze.prototype._maxListeners=void 0,ze.defaultMaxListeners=10,ze.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},ze.prototype.emit=function(t){var e,r,n,a,i,o;if(this._events||(this._events={}),"error"===t&&(!this._events.error||Ue(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(Ve(r=this._events[t]))return!1;if(je(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(Ue(r))for(a=Array.prototype.slice.call(arguments,1),n=(o=r.slice()).length,i=0;i<n;i++)o[i].apply(this,a);return!0},ze.prototype.addListener=function(t,e){var r;if(!je(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,je(e.listener)?e.listener:e),this._events[t]?Ue(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,Ue(this._events[t])&&!this._events[t].warned&&(r=Ve(this._maxListeners)?ze.defaultMaxListeners:this._maxListeners)&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},ze.prototype.on=ze.prototype.addListener,ze.prototype.once=function(t,e){if(!je(e))throw TypeError("listener must be a function");var r=!1;function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}return n.listener=e,this.on(t,n),this},ze.prototype.removeListener=function(t,e){var r,n,a,i;if(!je(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(a=(r=this._events[t]).length,n=-1,r===e||je(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(Ue(r)){for(i=a;i-- >0;)if(r[i]===e||r[i].listener&&r[i].listener===e){n=i;break}if(n<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},ze.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(je(r=this._events[t]))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},ze.prototype.listeners=function(t){return this._events&&this._events[t]?je(this._events[t])?[this._events[t]]:this._events[t].slice():[]},ze.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(je(e))return 1;if(e)return e.length}return 0},ze.listenerCount=function(t,e){return t.listenerCount(e)};var He,qe=Ne.EventEmitter,Ge={init:function(t){if(t._ev instanceof qe)return t;var e=new qe,r=new qe;return t._ev=e,t._internalEv=r,t.on=e.on.bind(e),t.once=e.once.bind(e),t.removeListener=e.removeListener.bind(e),t.removeAllListeners=e.removeAllListeners.bind(e),t._internalOn=r.on.bind(r),t._internalOnce=r.once.bind(r),t._removeInternalListener=r.removeListener.bind(r),t._removeAllInternalListeners=r.removeAllListeners.bind(r),t.emit=function(n,a){"undefined"!=typeof jQuery&&jQuery(t).trigger(n,a),e.emit(n,a),r.emit(n,a)},t},triggerHandler:function(t,e,r){var n,a;"undefined"!=typeof jQuery&&(n=jQuery(t).triggerHandler(e,r));var i=t._ev;if(!i)return n;var o=i._events[e];if(!o)return n;"function"==typeof o&&(o=[o]);for(var l=o.pop(),s=0;s<o.length;s++)o[s](r);return a=l(r),void 0!==n?n:a},purge:function(t){return delete t._ev,delete t.on,delete t.once,delete t.removeListener,delete t.removeAllListeners,delete t.emit,delete t._ev,delete t._internalEv,delete t._internalOn,delete t._internalOnce,delete t._removeInternalListener,delete t._removeAllInternalListeners,t}},Xe=He={};Xe.wrapped=function(t,e,r){(t=Ut(t))._fullLayout&&re.clear(t._fullLayout._uid+Te.HOVERID),Xe.raw(t,e,r)},Xe.raw=function(t,e){var r=t._fullLayout,n=t._hoverdata;e||(e={}),e.target&&!1===Ge.triggerHandler(t,"plotly_beforehover",e)||(r._hoverlayer.selectAll("g").remove(),r._hoverlayer.selectAll("line").remove(),r._hoverlayer.selectAll("circle").remove(),t._hoverdata=void 0,e.target&&n&&t.emit("plotly_unhover",{event:e,points:n}))};var Ye={},We=Ye={};function Ze(){var t=document.createElement("div");t.className="dragcover";var e=t.style;return e.position="fixed",e.left=0,e.right=0,e.top=0,e.bottom=0,e.zIndex=999999999,e.background="none",document.body.appendChild(t),t}function Je(t){return Be(t.changedTouches?t.changedTouches[0]:t,document.body)}We.align=function(t,e,r,n,a){var i=(t-r)/(n-r),o=i+e/(n-r),l=(i+o)/2;return"left"===a||"bottom"===a?i:"center"===a||"middle"===a?l:"right"===a||"top"===a?o:i<2/3-l?i:o>4/3-l?o:l},We.getCursor=function(t,e,r,n){return t="left"===r?0:"center"===r?1:"right"===r?2:oe.constrain(Math.floor(3*t),0,2),e="bottom"===n?0:"middle"===n?1:"top"===n?2:oe.constrain(Math.floor(3*e),0,2),Fe[e][t]},We.unhover=He.wrapped,We.unhoverRaw=He.raw,We.init=function(t){var e,r,n,a,i,o,l,s,u=t.gd,c=1,f=g.DBLCLICKDELAY,h=t.element;u._mouseDownTime||(u._mouseDownTime=0),h.style.pointerEvents="all",h.onmousedown=p,Pe?(h._ontouchstart&&h.removeEventListener("touchstart",h._ontouchstart),h._ontouchstart=p,h.addEventListener("touchstart",p,{passive:!1})):h.ontouchstart=p;var d=t.clampFn||function(t,e,r){return Math.abs(t)<r&&(t=0),Math.abs(e)<r&&(e=0),[t,e]};function p(d){d.preventDefault(),u._dragged=!1,u._dragging=!0;var p=Je(d);e=p[0],r=p[1],l=d.target,o=d,s=2===d.buttons||d.ctrlKey,(n=(new Date).getTime())-u._mouseDownTime<f?c+=1:(c=1,u._mouseDownTime=n),t.prepFn&&t.prepFn(d,e,r),Re&&!s?(i=Ze()).style.cursor=window.getComputedStyle(h).cursor:Re||(i=document,a=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(h).cursor),document.addEventListener("mousemove",v),document.addEventListener("mouseup",m),document.addEventListener("touchmove",v),document.addEventListener("touchend",m)}function v(n){n.preventDefault();var a=Je(n),i=t.minDrag||Oe.MINDRAG,o=d(a[0]-e,a[1]-r,i),l=o[0],c=o[1];(l||c)&&(u._dragged=!0,We.unhover(u)),u._dragged&&t.moveFn&&!s&&t.moveFn(l,c)}function m(e){if(document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",m),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",m),e.preventDefault(),Re?oe.removeElement(i):a&&(i.documentElement.style.cursor=a,a=null),u._dragging){if(u._dragging=!1,(new Date).getTime()-u._mouseDownTime>f&&(c=Math.max(c-1,1)),u._dragged)t.doneFn&&t.doneFn(e);else if(t.clickFn&&t.clickFn(c,o),!s){var r;try{r=new MouseEvent("click",e)}catch(t){var n=Je(e);(r=document.createEvent("MouseEvents")).initMouseEvent("click",e.bubbles,e.cancelable,e.view,e.detail,e.screenX,e.screenY,n[0],n[1],e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}l.dispatchEvent(r)}!function(t){t._dragging=!1,t._replotPending&&I.call("plot",t)}(u),u._dragged=!1}else u._dragged=!1}},We.coverSlip=Ze;function Qe(t,e,r,n){n=n||oe.identity,Array.isArray(t)&&(e[0][r]=n(t))}var $e={},Ke=$e={};Ke.defaults=D.defaults;var tr=Ke.defaultLine=D.defaultLine;Ke.lightLine=D.lightLine;var er=Ke.background=D.background;function rr(t){if(a(t)||"string"!=typeof t)return t;var e=t.trim();if("rgb"!==e.substr(0,3))return t;var r=e.match(/^rgba?\s*\(([^()]*)\)$/);if(!r)return t;var n=r[1].trim().split(/\s*[\s,]\s*/),i="a"===e.charAt(3)&&4===n.length;if(!i&&3!==n.length)return t;for(var o=0;o<n.length;o++){if(!n[o].length)return t;if(n[o]=Number(n[o]),!(n[o]>=0))return t;if(3===o)n[o]>1&&(n[o]=1);else if(n[o]>=1)return t}var l=Math.round(255*n[0])+", "+Math.round(255*n[1])+", "+Math.round(255*n[2]);return i?"rgba("+l+", "+n[3]+")":"rgb("+l+")"}Ke.tinyRGB=function(t){var e=t.toRgb();return"rgb("+Math.round(e.r)+", "+Math.round(e.g)+", "+Math.round(e.b)+")"},Ke.rgb=function(t){return Ke.tinyRGB(c(t))},Ke.opacity=function(t){return t?c(t).getAlpha():0},Ke.addOpacity=function(t,e){var r=c(t).toRgb();return"rgba("+Math.round(r.r)+", "+Math.round(r.g)+", "+Math.round(r.b)+", "+e+")"},Ke.combine=function(t,e){var r=c(t).toRgb();if(1===r.a)return c(t).toRgbString();var n=c(e||er).toRgb(),a=1===n.a?n:{r:255*(1-n.a)+n.r*n.a,g:255*(1-n.a)+n.g*n.a,b:255*(1-n.a)+n.b*n.a},i={r:a.r*(1-r.a)+r.r*r.a,g:a.g*(1-r.a)+r.g*r.a,b:a.b*(1-r.a)+r.b*r.a};return c(i).toRgbString()},Ke.contrast=function(t,e,r){var n=c(t);return 1!==n.getAlpha()&&(n=c(Ke.combine(t,er))),(n.isDark()?e?n.lighten(e):er:r?n.darken(r):tr).toString()},Ke.stroke=function(t,e){var r=c(e);t.style({stroke:Ke.tinyRGB(r),"stroke-opacity":r.getAlpha()})},Ke.fill=function(t,e){var r=c(e);t.style({fill:Ke.tinyRGB(r),"fill-opacity":r.getAlpha()})},Ke.clean=function(t){if(t&&"object"==typeof t){var e,r,n,a,i=Object.keys(t);for(e=0;e<i.length;e++)if(a=t[n=i[e]],"color"===n.substr(n.length-5))if(Array.isArray(a))for(r=0;r<a.length;r++)a[r]=rr(a[r]);else t[n]=rr(a);else if("colorscale"===n.substr(n.length-10)&&Array.isArray(a))for(r=0;r<a.length;r++)Array.isArray(a[r])&&(a[r][1]=rr(a[r][1]));else if(Array.isArray(a)){var o=a[0];if(!Array.isArray(o)&&o&&"object"==typeof o)for(r=0;r<a.length;r++)Ke.clean(a[r])}else a&&"object"==typeof a&&Ke.clean(a)}};var nr={zauto:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{zmin:void 0,zmax:void 0}},zmin:{valType:"number",dflt:null,editType:"plot",impliedEdits:{zauto:!1}},zmax:{valType:"number",dflt:null,editType:"plot",impliedEdits:{zauto:!1}},colorscale:{valType:"colorscale",editType:"calc",impliedEdits:{autocolorscale:!1}},autocolorscale:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{colorscale:void 0}},reversescale:{valType:"boolean",dflt:!1,editType:"calc"},showscale:{valType:"boolean",dflt:!0,editType:"calc"}},ar=function(t){for(var e,r=t.length,n=new Array(r),a=r-1,i=0;a>=0;a--,i++)e=t[a],n[i]=[1-e[0],e[1]];return n},ir=function(t,e,r,n){var a,i;r?(a=oe.nestedProperty(t,r).get(),i=oe.nestedProperty(t._input,r).get()):(a=t,i=t._input);var o=n+"auto",l=n+"min",s=n+"max",u=a[o],c=a[l],h=a[s],d=a.colorscale;!1===u&&void 0!==c||(c=oe.aggNums(Math.min,null,e)),!1===u&&void 0!==h||(h=oe.aggNums(Math.max,null,e)),c===h&&(c-=.5,h+=.5),a[l]=c,a[s]=h,i[l]=c,i[s]=h,i[o]=!1!==u||void 0===c&&void 0===h,a.autocolorscale&&(d=c*h<0?f.RdBu:c>=0?f.Reds:f.Blues,i.colorscale=d,a.reversescale&&(d=ar(d)),a.colorscale=d)},or={dash:{valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"}},lr=or.dash,sr=b.extendFlat,ur={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:D.defaultLine,editType:"ticks"},title:{valType:"string",editType:"ticks+margins"},titlefont:S({editType:"ticks+margins"}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange+margins",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"axrange+margins",impliedEdits:{"^autorange":!1}}],editType:"axrange+margins",impliedEdits:{autorange:!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[Oe.idRegex.x.toString(),Oe.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks+margins",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks+margins"},tick0:{valType:"any",editType:"ticks+margins",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks+margins",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks+margins"},ticktext:{valType:"data_array",editType:"ticks+margins"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks+margins"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:D.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks+margins"},automargin:{valType:"boolean",dflt:!1,editType:"ticks+margins"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:sr({},lr,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor"],dflt:"data",editType:"none"},tickfont:S({editType:"ticks+margins"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks+margins"},tickprefix:{valType:"string",dflt:"",editType:"ticks+margins"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks+margins"},ticksuffix:{valType:"string",dflt:"",editType:"ticks+margins"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks+margins"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks+margins"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks+margins"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks+margins"},tickformat:{valType:"string",dflt:"",editType:"ticks+margins"},tickformatstops:{_isLinkedToArray:"tickformatstop",dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks+margins"},{valType:"any",editType:"ticks+margins"}],editType:"ticks+margins"},value:{valType:"string",dflt:"",editType:"ticks+margins"},editType:"ticks+margins"},hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"layoutstyle"},linecolor:{valType:"color",dflt:D.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:D.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:D.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",Oe.idRegex.x.toString(),Oe.idRegex.y.toString()],editType:"plot+margins"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot+margins"},overlaying:{valType:"enumerated",values:["free",Oe.idRegex.x.toString(),Oe.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot+margins"},{valType:"number",min:0,max:1,editType:"plot+margins"}],dflt:[0,1],editType:"plot+margins"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot+margins"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks+margins"}}},cr=b.extendFlat,fr=(0,_e.overrideAll)({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:ur.linecolor,outlinewidth:ur.linewidth,bordercolor:ur.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:ur.tickmode,nticks:ur.nticks,tick0:ur.tick0,dtick:ur.dtick,tickvals:ur.tickvals,ticktext:ur.ticktext,ticks:cr({},ur.ticks,{dflt:""}),ticklen:ur.ticklen,tickwidth:ur.tickwidth,tickcolor:ur.tickcolor,showticklabels:ur.showticklabels,tickfont:S({}),tickangle:ur.tickangle,tickformat:ur.tickformat,tickformatstops:ur.tickformatstops,tickprefix:ur.tickprefix,showtickprefix:ur.showtickprefix,ticksuffix:ur.ticksuffix,showticksuffix:ur.showticksuffix,separatethousands:ur.separatethousands,exponentformat:ur.exponentformat,showexponent:ur.showexponent,title:{valType:"string"},titlefont:S({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},"colorbars","from-root"),hr=function(t,e,r,n,a){var i=function(t){var e=["showexponent","showtickprefix","showticksuffix"].filter(function(e){return void 0!==t[e]});if(e.every(function(r){return t[r]===t[e[0]]})||1===e.length)return t[e[0]]}(t);if(r("tickprefix")&&r("showtickprefix",i),r("ticksuffix",a.tickSuffixDflt)&&r("showticksuffix",i),r("showticklabels")){var o=a.font||{},l=e.color===t.color?e.color:o.color;if(oe.coerceFont(r,"tickfont",{family:o.family,size:o.size,color:l}),r("tickangle"),"category"!==n){var s=r("tickformat");!function(t,e){var r,n,a=t.tickformatstops,i=e.tickformatstops=[];if(!Array.isArray(a))return;function o(t,e){return oe.coerce(r,n,ur.tickformatstops,t,e)}for(var l=0;l<a.length;l++)r=a[l],n={},o("dtickrange"),o("value"),i.push(n)}(t,e),s||"date"===n||(r("showexponent",i),r("exponentformat"),r("separatethousands"))}}};var dr=function(t,e,r,n){var a=oe.coerce2(t,e,ur,"ticklen"),i=oe.coerce2(t,e,ur,"tickwidth"),o=oe.coerce2(t,e,ur,"tickcolor",e.color);r("ticks",n.outerTicks||a||i||o?"outside":"")||(delete e.ticklen,delete e.tickwidth,delete e.tickcolor)},pr=i.ONEDAY,gr=function(t,e,r,n){var i="auto";"array"!==t.tickmode||"log"!==n&&"date"!==n||(t.tickmode="auto"),Array.isArray(t.tickvals)?i="array":t.dtick&&(i="linear");var o=r("tickmode",i);if("auto"===o)r("nticks");else if("linear"===o){var l="date"===n?pr:1,s=r("dtick",l);if(a(s))e.dtick=s>0?Number(s):l;else if("string"!=typeof s)e.dtick=l;else{var u=s.charAt(0),c=s.substr(1);((c=a(c)?Number(c):0)<=0||!("date"===n&&"M"===u&&c===Math.round(c)||"log"===n&&"L"===u||"log"===n&&"D"===u&&(1===c||2===c)))&&(e.dtick=l)}var f="date"===n?oe.dateTick0(e.calendar):0,h=r("tick0",f);"date"===n?e.tick0=oe.cleanDate(h,f):a(h)&&"D1"!==s&&"D2"!==s?e.tick0=Number(h):e.tick0=f}else{void 0===r("tickvals")?e.tickmode="auto":r("ticktext")}},vr=function(t){return void 0!==f[t]||d(t)},mr=function(t,e,r,n,i){var o,l=i.prefix,s=i.cLetter,u=l.slice(0,l.length-1),c=l?oe.nestedProperty(t,u).get()||{}:t,f=l?oe.nestedProperty(e,u).get()||{}:e,h=c[s+"min"],d=c[s+"max"],p=c.colorscale;n(l+s+"auto",!(a(h)&&a(d)&&h<d)),n(l+s+"min"),n(l+s+"max"),void 0!==p&&(o=!vr(p)),n(l+"autocolorscale",o);var g,v,m=n(l+"colorscale");(n(l+"reversescale")&&(f.colorscale=ar(m)),"marker.line."!==l)&&(l&&(v=c,g=oe.isPlainObject(v.colorbar)),n(l+"showscale",g)&&function(t,e,r){var n=e.colorbar={},a=t.colorbar||{};function i(t,e){return oe.coerce(a,n,fr,t,e)}i("thickness","fraction"===i("thicknessmode")?30/(r.width-r.margin.l-r.margin.r):30),i("len","fraction"===i("lenmode")?1:r.height-r.margin.t-r.margin.b),i("x"),i("xanchor"),i("xpad"),i("y"),i("yanchor"),i("ypad"),oe.noneOrAll(a,n,["x","y"]),i("outlinecolor"),i("outlinewidth"),i("bordercolor"),i("borderwidth"),i("bgcolor"),gr(a,n,i,"linear");var o={outerTicks:!1,font:r.font};hr(a,n,i,"linear",o),dr(a,n,i,"linear"),i("title",r._dfltTitle.colorbar),oe.coerceFont(i,"titlefont",r.font),i("titleside")}(c,f,r))},yr=function(t,e){var r=e?oe.nestedProperty(t,e).get()||{}:t,n=r.color,i=!1;if(oe.isArrayOrTypedArray(n))for(var o=0;o<n.length;o++)if(a(n[o])){i=!0;break}return oe.isPlainObject(r)&&(i||!0===r.showscale||a(r.cmin)&&a(r.cmax)||vr(r.colorscale)||oe.isPlainObject(r.colorbar))};function xr(t){var e={r:t[0],g:t[1],b:t[2],a:t[3]};return c(e).toRgbString()}var br={};br.scales=f,br.defaultScale=h,br.attributes=nr,br.handleDefaults=mr,br.calc=ir,br.hasColorscale=yr,br.isValidScale=vr,br.getScale=p,br.flipScale=ar,br.extractScale=function(t,e,r){for(var n=t.length,a=new Array(n),i=new Array(n),o=0;o<n;o++){var l=t[o];a[o]=e+l[0]*(r-e),i[o]=l[1]}return{domain:a,range:i}},br.makeColorScaleFunc=function(t,e){e=e||{};for(var r=t.domain,i=t.range,o=i.length,l=new Array(o),s=0;s<o;s++){var u=c(i[s]).toRgb();l[s]=[u.r,u.g,u.b,u.a]}var f,h=n.scale.linear().domain(r).range(l).clamp(!0),d=e.noNumericCheck,p=e.returnArray;return(f=d&&p?h:d?function(t){return xr(h(t))}:p?function(t){return a(t)?h(t):c(t).isValid()?t:$e.defaultLine}:function(t){return a(t)?xr(h(t)):c(t).isValid()?t:$e.defaultLine}).domain=h.domain,f.range=function(){return i},f};var _r={circle:{n:0,f:function(t){var e=n.round(t,2);return"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"}},square:{n:1,f:function(t){var e=n.round(t,2);return"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"}},diamond:{n:2,f:function(t){var e=n.round(1.3*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"Z"}},cross:{n:3,f:function(t){var e=n.round(.4*t,2),r=n.round(1.2*t,2);return"M"+r+","+e+"H"+e+"V"+r+"H-"+e+"V"+e+"H-"+r+"V-"+e+"H-"+e+"V-"+r+"H"+e+"V-"+e+"H"+r+"Z"}},x:{n:4,f:function(t){var e=n.round(.8*t/Math.sqrt(2),2),r="l"+e+","+e,a="l"+e+",-"+e,i="l-"+e+",-"+e,o="l-"+e+","+e;return"M0,"+e+r+a+i+a+i+o+i+o+r+o+r+"Z"}},"triangle-up":{n:5,f:function(t){var e=n.round(2*t/Math.sqrt(3),2);return"M-"+e+","+n.round(t/2,2)+"H"+e+"L0,-"+n.round(t,2)+"Z"}},"triangle-down":{n:6,f:function(t){var e=n.round(2*t/Math.sqrt(3),2);return"M-"+e+",-"+n.round(t/2,2)+"H"+e+"L0,"+n.round(t,2)+"Z"}},"triangle-left":{n:7,f:function(t){var e=n.round(2*t/Math.sqrt(3),2);return"M"+n.round(t/2,2)+",-"+e+"V"+e+"L-"+n.round(t,2)+",0Z"}},"triangle-right":{n:8,f:function(t){var e=n.round(2*t/Math.sqrt(3),2);return"M-"+n.round(t/2,2)+",-"+e+"V"+e+"L"+n.round(t,2)+",0Z"}},"triangle-ne":{n:9,f:function(t){var e=n.round(.6*t,2),r=n.round(1.2*t,2);return"M-"+r+",-"+e+"H"+e+"V"+r+"Z"}},"triangle-se":{n:10,f:function(t){var e=n.round(.6*t,2),r=n.round(1.2*t,2);return"M"+e+",-"+r+"V"+e+"H-"+r+"Z"}},"triangle-sw":{n:11,f:function(t){var e=n.round(.6*t,2),r=n.round(1.2*t,2);return"M"+r+","+e+"H-"+e+"V-"+r+"Z"}},"triangle-nw":{n:12,f:function(t){var e=n.round(.6*t,2),r=n.round(1.2*t,2);return"M-"+e+","+r+"V-"+e+"H"+r+"Z"}},pentagon:{n:13,f:function(t){var e=n.round(.951*t,2),r=n.round(.588*t,2),a=n.round(-t,2),i=n.round(-.309*t,2);return"M"+e+","+i+"L"+r+","+n.round(.809*t,2)+"H-"+r+"L-"+e+","+i+"L0,"+a+"Z"}},hexagon:{n:14,f:function(t){var e=n.round(t,2),r=n.round(t/2,2),a=n.round(t*Math.sqrt(3)/2,2);return"M"+a+",-"+r+"V"+r+"L0,"+e+"L-"+a+","+r+"V-"+r+"L0,-"+e+"Z"}},hexagon2:{n:15,f:function(t){var e=n.round(t,2),r=n.round(t/2,2),a=n.round(t*Math.sqrt(3)/2,2);return"M-"+r+","+a+"H"+r+"L"+e+",0L"+r+",-"+a+"H-"+r+"L-"+e+",0Z"}},octagon:{n:16,f:function(t){var e=n.round(.924*t,2),r=n.round(.383*t,2);return"M-"+r+",-"+e+"H"+r+"L"+e+",-"+r+"V"+r+"L"+r+","+e+"H-"+r+"L-"+e+","+r+"V-"+r+"Z"}},star:{n:17,f:function(t){var e=1.4*t,r=n.round(.225*e,2),a=n.round(.951*e,2),i=n.round(.363*e,2),o=n.round(.588*e,2),l=n.round(-e,2),s=n.round(-.309*e,2),u=n.round(.118*e,2),c=n.round(.809*e,2);return"M"+r+","+s+"H"+a+"L"+i+","+u+"L"+o+","+c+"L0,"+n.round(.382*e,2)+"L-"+o+","+c+"L-"+i+","+u+"L-"+a+","+s+"H-"+r+"L0,"+l+"Z"}},hexagram:{n:18,f:function(t){var e=n.round(.66*t,2),r=n.round(.38*t,2),a=n.round(.76*t,2);return"M-"+a+",0l-"+r+",-"+e+"h"+a+"l"+r+",-"+e+"l"+r+","+e+"h"+a+"l-"+r+","+e+"l"+r+","+e+"h-"+a+"l-"+r+","+e+"l-"+r+",-"+e+"h-"+a+"Z"}},"star-triangle-up":{n:19,f:function(t){var e=n.round(t*Math.sqrt(3)*.8,2),r=n.round(.8*t,2),a=n.round(1.6*t,2),i=n.round(4*t,2),o="A "+i+","+i+" 0 0 1 ";return"M-"+e+","+r+o+e+","+r+o+"0,-"+a+o+"-"+e+","+r+"Z"}},"star-triangle-down":{n:20,f:function(t){var e=n.round(t*Math.sqrt(3)*.8,2),r=n.round(.8*t,2),a=n.round(1.6*t,2),i=n.round(4*t,2),o="A "+i+","+i+" 0 0 1 ";return"M"+e+",-"+r+o+"-"+e+",-"+r+o+"0,"+a+o+e+",-"+r+"Z"}},"star-square":{n:21,f:function(t){var e=n.round(1.1*t,2),r=n.round(2*t,2),a="A "+r+","+r+" 0 0 1 ";return"M-"+e+",-"+e+a+"-"+e+","+e+a+e+","+e+a+e+",-"+e+a+"-"+e+",-"+e+"Z"}},"star-diamond":{n:22,f:function(t){var e=n.round(1.4*t,2),r=n.round(1.9*t,2),a="A "+r+","+r+" 0 0 1 ";return"M-"+e+",0"+a+"0,"+e+a+e+",0"+a+"0,-"+e+a+"-"+e+",0Z"}},"diamond-tall":{n:23,f:function(t){var e=n.round(.7*t,2),r=n.round(1.4*t,2);return"M0,"+r+"L"+e+",0L0,-"+r+"L-"+e+",0Z"}},"diamond-wide":{n:24,f:function(t){var e=n.round(1.4*t,2),r=n.round(.7*t,2);return"M0,"+r+"L"+e+",0L0,-"+r+"L-"+e+",0Z"}},hourglass:{n:25,f:function(t){var e=n.round(t,2);return"M"+e+","+e+"H-"+e+"L"+e+",-"+e+"H-"+e+"Z"},noDot:!0},bowtie:{n:26,f:function(t){var e=n.round(t,2);return"M"+e+","+e+"V-"+e+"L-"+e+","+e+"V-"+e+"Z"},noDot:!0},"circle-cross":{n:27,f:function(t){var e=n.round(t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(t){var e=n.round(t,2),r=n.round(t/Math.sqrt(2),2);return"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r+"M"+e+",0A"+e+","+e+" 0 1,1 0,-"+e+"A"+e+","+e+" 0 0,1 "+e+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(t){var e=n.round(t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(t){var e=n.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e+"M"+e+","+e+"H-"+e+"V-"+e+"H"+e+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(t){var e=n.round(1.3*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM0,-"+e+"V"+e+"M-"+e+",0H"+e},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(t){var e=n.round(1.3*t,2),r=n.round(.65*t,2);return"M"+e+",0L0,"+e+"L-"+e+",0L0,-"+e+"ZM-"+r+",-"+r+"L"+r+","+r+"M-"+r+","+r+"L"+r+",-"+r},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(t){var e=n.round(1.4*t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(t){var e=n.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e+"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(t){var e=n.round(1.2*t,2),r=n.round(.85*t,2);return"M0,"+e+"V-"+e+"M"+e+",0H-"+e+"M"+r+","+r+"L-"+r+",-"+r+"M"+r+",-"+r+"L-"+r+","+r},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(t){var e=n.round(t/2,2),r=n.round(t,2);return"M"+e+","+r+"V-"+r+"m-"+r+",0V"+r+"M"+r+","+e+"H-"+r+"m0,-"+r+"H"+r},needLine:!0,noFill:!0},"y-up":{n:37,f:function(t){var e=n.round(1.2*t,2),r=n.round(1.6*t,2),a=n.round(.8*t,2);return"M-"+e+","+a+"L0,0M"+e+","+a+"L0,0M0,-"+r+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(t){var e=n.round(1.2*t,2),r=n.round(1.6*t,2),a=n.round(.8*t,2);return"M-"+e+",-"+a+"L0,0M"+e+",-"+a+"L0,0M0,"+r+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(t){var e=n.round(1.2*t,2),r=n.round(1.6*t,2),a=n.round(.8*t,2);return"M"+a+","+e+"L0,0M"+a+",-"+e+"L0,0M-"+r+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(t){var e=n.round(1.2*t,2),r=n.round(1.6*t,2),a=n.round(.8*t,2);return"M-"+a+","+e+"L0,0M-"+a+",-"+e+"L0,0M"+r+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(t){var e=n.round(1.4*t,2);return"M"+e+",0H-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(t){var e=n.round(1.4*t,2);return"M0,"+e+"V-"+e},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(t){var e=n.round(t,2);return"M"+e+",-"+e+"L-"+e+","+e},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(t){var e=n.round(t,2);return"M"+e+","+e+"L-"+e+",-"+e},needLine:!0,noDot:!0,noFill:!0}},wr={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}},Ar={entityToUnicode:{mu:"\u03bc","#956":"\u03bc",amp:"&","#28":"&",lt:"<","#60":"<",gt:">","#62":">",nbsp:"\xa0","#160":"\xa0",times:"\xd7","#215":"\xd7",plusmn:"\xb1","#177":"\xb1",deg:"\xb0","#176":"\xb0"}},Mr={},Tr=wr.LINE_SPACING;function kr(t,e){return t.node().getBoundingClientRect()[e]}var Er=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;Mr.convertToTspans=function(t,e,r){var a=t.text(),i=!t.attr("data-notex")&&"undefined"!=typeof MathJax&&a.match(Er),o=n.select(t.node().parentNode);if(!o.empty()){var l=t.attr("class")?t.attr("class").split(" ")[0]:"text";return l+="-math",o.selectAll("svg."+l).remove(),o.selectAll("g."+l+"-group").remove(),t.style("display",null).attr({"data-unformatted":a,"data-math":"N"}),i?(e&&e._promises||[]).push(new Promise(function(e){t.style("display","none");var u=parseInt(t.node().style.fontSize,10),c={fontSize:u};!function(t,e,r){var a="math-output-"+oe.randstr([],64),i=n.select("body").append("div").attr({id:a}).style({visibility:"hidden",position:"absolute"}).style({"font-size":e.fontSize+"px"}).text((o=t,o.replace(Cr,"\\lt ").replace(Sr,"\\gt ")));var o;MathJax.Hub.Queue(["Typeset",MathJax.Hub,i.node()],function(){var e=n.select("body").select("#MathJax_SVG_glyphs");if(i.select(".MathJax_SVG").empty()||!i.select("svg").node())oe.log("There was an error in the tex syntax.",t),r();else{var a=i.select("svg").node().getBoundingClientRect();r(i.select(".MathJax_SVG"),e,a)}i.remove()})}(i[2],c,function(n,i,c){o.selectAll("svg."+l).remove(),o.selectAll("g."+l+"-group").remove();var f=n&&n.select("svg");if(!f||!f.node())return s(),void e();var h=o.append("g").classed(l+"-group",!0).attr({"pointer-events":"none","data-unformatted":a,"data-math":"Y"});h.node().appendChild(f.node()),i&&i.node()&&f.node().insertBefore(i.node().cloneNode(!0),f.node().firstChild),f.attr({class:l,height:c.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var d=t.node().style.fill||"black";f.select("g").attr({fill:d,stroke:d});var p=kr(f,"width"),g=kr(f,"height"),v=+t.attr("x")-p*{start:0,middle:.5,end:1}[t.attr("text-anchor")||"start"],m=-(u||kr(t,"height"))/4;"y"===l[0]?(h.attr({transform:"rotate("+[-90,+t.attr("x"),+t.attr("y")]+") translate("+[-p/2,m-g/2]+")"}),f.attr({x:+t.attr("x"),y:+t.attr("y")})):"l"===l[0]?f.attr({x:t.attr("x"),y:m-g/2}):"a"===l[0]?f.attr({x:0,y:m}):f.attr({x:v,y:+t.attr("y")+m-g/2}),r&&r.call(t,h),e(h)})})):s(),t}function s(){o.empty()||(l=t.attr("class")+"-math",o.select("svg."+l).remove()),t.text("").style("white-space","pre"),function(t,e){e=(r=e,function(t,e){if(!t)return"";for(var r=0;r<e.length;r++){var n=e[r];t=t.replace(n.regExp,n.sub)}return t}(r,Br)).replace(Fr," ");var r;var a,i=!1,o=[],l=-1;function s(){l++;var e=document.createElementNS(Ce.svg,"tspan");n.select(e).attr({class:"line",dy:l*Tr+"em"}),t.appendChild(e),a=e;var r=o;if(o=[{node:e}],r.length>1)for(var i=1;i<r.length;i++)u(r[i])}function u(t){var e,r=t.type,i={};if("a"===r){e="a";var l=t.target,s=t.href,u=t.popup;s&&(i={"xlink:xlink:show":"_blank"===l||"_"!==l.charAt(0)?"new":"replace",target:l,"xlink:xlink:href":s},u&&(i.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+u+'");return false;'))}else e="tspan";t.style&&(i.style=t.style);var f=document.createElementNS(Ce.svg,e);if("sup"===r||"sub"===r){c(a,Rr),a.appendChild(f);var h=document.createElementNS(Ce.svg,"tspan");c(h,Rr),n.select(h).attr("dy",Dr[r]),i.dy=Or[r],a.appendChild(f),a.appendChild(h)}else a.appendChild(f);n.select(f).attr(i),a=t.node=f,o.push(t)}function c(t,e){t.appendChild(document.createTextNode(e))}function f(t){if(1!==o.length){var r=o.pop();t!==r.type&&oe.log("Start tag <"+r.type+"> doesnt match end tag <"+t+">. Pretending it did match.",e),a=o[o.length-1].node}else oe.log("Ignoring unexpected end tag </"+t+">.",e)}jr.test(e)?s():(a=t,o=[{node:t}]);for(var h=e.split(zr),d=0;d<h.length;d++){var p=h[d],g=p.match(Nr),v=g&&g[2].toLowerCase(),m=Lr[v];if("br"===v)s();else if(void 0===m)c(a,p);else if(g[1])f(v);else{var y=g[4],x={type:v},b=Gr(y,Ur);if(b?(b=b.replace(Xr,"$1 fill:"),m&&(b+=";"+m)):m&&(b=m),b&&(x.style=b),"a"===v){i=!0;var _=Gr(y,Vr);if(_){var w=document.createElement("a");w.href=_,-1!==Pr.indexOf(w.protocol)&&(x.href=encodeURI(decodeURI(_)),x.target=Gr(y,Hr)||"_blank",x.popup=Gr(y,qr))}}u(x)}}return i}(t.node(),a)&&t.style("pointer-events","all"),Mr.positionText(t),r&&r.call(t)}};var Cr=/(<|&lt;|&#60;)/g,Sr=/(>|&gt;|&#62;)/g;var Lr={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},Or={sub:"0.3em",sup:"-0.6em"},Dr={sub:"-0.21em",sup:"0.42em"},Rr="\u200b",Pr=["http:","https:","mailto:","",void 0,":"],Ir=new RegExp("</?("+Object.keys(Lr).join("|")+")( [^>]*)?/?>","g"),Br=Object.keys(Ar.entityToUnicode).map(function(t){return{regExp:new RegExp("&"+t+";","g"),sub:Ar.entityToUnicode[t]}}),Fr=/(\r\n?|\n)/g,zr=/(<[^<>]*>)/,Nr=/<(\/?)([^ >]*)(\s+(.*))?>/i,jr=/<br(\s+.*)?>/i,Ur=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,Vr=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,Hr=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,qr=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function Gr(t,e){if(!t)return null;var r=t.match(e);return r&&(r[3]||r[4])}var Xr=/(^|;)\s*color:/;function Yr(t,e,r){var n,a,i,o=r.horizontalAlign,l=r.verticalAlign||"top",s=t.node().getBoundingClientRect(),u=e.node().getBoundingClientRect();return a="bottom"===l?function(){return s.bottom-n.height}:"middle"===l?function(){return s.top+(s.height-n.height)/2}:function(){return s.top},i="right"===o?function(){return s.right-n.width}:"center"===o?function(){return s.left+(s.width-n.width)/2}:function(){return s.left},function(){return n=this.node().getBoundingClientRect(),this.style({top:a()-u.top+"px",left:i()-u.left+"px","z-index":1e3}),this}}Mr.plainText=function(t){return(t||"").replace(Ir," ")},Mr.lineCount=function(t){return t.selectAll("tspan.line").size()||1},Mr.positionText=function(t,e,r){return t.each(function(){var t=n.select(this);function a(e,r){return void 0===r?null===(r=t.attr(e))&&(t.attr(e,0),r=0):t.attr(e,r),r}var i=a("x",e),o=a("y",r);"text"===this.nodeName&&t.selectAll("tspan.line").attr({x:i,y:o})})},Mr.makeEditable=function(t,e){var r=e.gd,a=e.delegate,i=n.dispatch("edit","input","cancel"),o=a||t;if(t.style({"pointer-events":a?"none":"all"}),1!==t.size())throw new Error("boo");function l(){var a,l,u,c;a=n.select(r).select(".svg-container"),l=a.append("div"),u=t.node().style,c=parseFloat(u.fontSize||12),l.classed("plugin-editable editable",!0).style({position:"absolute","font-family":u.fontFamily||"Arial","font-size":c,color:e.fill||u.fill||"black",opacity:1,"background-color":e.background||"transparent",outline:"#ffffff33 1px solid",margin:[-c/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(e.text||t.attr("data-unformatted")).call(Yr(t,a,e)).on("blur",function(){r._editing=!1,t.text(this.textContent).style({opacity:1});var e,a=n.select(this).attr("class");(e=a?"."+a.split(" ")[0]+"-math-group":"[class*=-math-group]")&&n.select(t.node().parentNode).select(e).style({opacity:0});var o=this.textContent;n.select(this).transition().duration(0).remove(),n.select(document).on("mouseup",null),i.edit.call(t,o)}).on("focus",function(){var t=this;r._editing=!0,n.select(document).on("mouseup",function(){if(n.event.target===t)return!1;document.activeElement===l.node()&&l.node().blur()})}).on("keyup",function(){27===n.event.which?(r._editing=!1,t.style({opacity:1}),n.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),i.cancel.call(t,this.textContent)):(i.input.call(t,this.textContent),n.select(this).call(Yr(t,a,e)))}).on("keydown",function(){13===n.event.which&&this.blur()}).call(s),t.style({opacity:0});var f,h=o.attr("class");(f=h?"."+h.split(" ")[0]+"-math-group":"[class*=-math-group]")&&n.select(t.node().parentNode).select(f).style({opacity:0})}function s(t){var e=t.node(),r=document.createRange();r.selectNodeContents(e);var n=window.getSelection();n.removeAllRanges(),n.addRange(r),e.focus()}return e.immediate?l():o.on("click",l),n.rebind(t,i,"on")};var Wr=function(t){var e=t.marker,r=e.sizeref||1,n=e.sizemin||0,i="area"===e.sizemode?function(t){return Math.sqrt(t/r)}:function(t){return t/r};return function(t){var e=i(t/2);return a(e)&&e>0?Math.max(e,n):0}},Zr={hasLines:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("lines")},hasMarkers:function(t){return t.visible&&(t.mode&&-1!==t.mode.indexOf("markers")||"splom"===t.type)},hasText:function(t){return t.visible&&t.mode&&-1!==t.mode.indexOf("text")},isBubble:function(t){return oe.isPlainObject(t.marker)&&oe.isArrayOrTypedArray(t.marker.size)}},Jr={},Qr=wr.LINE_SPACING,$r=g.DESELECTDIM,Kr=Jr={};Kr.font=function(t,e,r,n){oe.isPlainObject(e)&&(n=e.color,r=e.size,e=e.family),e&&t.style("font-family",e),r+1&&t.style("font-size",r+"px"),n&&t.call($e.fill,n)},Kr.setPosition=function(t,e,r){t.attr("x",e).attr("y",r)},Kr.setSize=function(t,e,r){t.attr("width",e).attr("height",r)},Kr.setRect=function(t,e,r,n,a){t.call(Kr.setPosition,e,r).call(Kr.setSize,n,a)},Kr.translatePoint=function(t,e,r,n){var i=r.c2p(t.x),o=n.c2p(t.y);return!!(a(i)&&a(o)&&e.node())&&("text"===e.node().nodeName?e.attr("x",i).attr("y",o):e.attr("transform","translate("+i+","+o+")"),!0)},Kr.translatePoints=function(t,e,r){t.each(function(t){var a=n.select(this);Kr.translatePoint(t,a,e,r)})},Kr.hideOutsideRangePoint=function(t,e,r,n,a,i){e.attr("display",r.isPtWithinRange(t,a)&&n.isPtWithinRange(t,i)?null:"none")},Kr.hideOutsideRangePoints=function(t,e,r){if(e._hasClipOnAxisFalse){r=r||".point,.textpoint";var a=e.xaxis,i=e.yaxis;t.each(function(e){var o=e[0].trace,l=o.xcalendar,s=o.ycalendar;t.selectAll(r).each(function(t){Kr.hideOutsideRangePoint(t,n.select(this),a,i,l,s)})})}},Kr.crispRound=function(t,e,r){return e&&a(e)?t._context.staticPlot?e:e<1?1:Math.round(e):r||0},Kr.singleLineStyle=function(t,e,r,n,a){e.style("fill","none");var i=(((t||[])[0]||{}).trace||{}).line||{},o=r||i.width||0,l=a||i.dash||"";$e.stroke(e,n||i.color),Kr.dashLine(e,l,o)},Kr.lineGroupStyle=function(t,e,r,a){t.style("fill","none").each(function(t){var i=(((t||[])[0]||{}).trace||{}).line||{},o=e||i.width||0,l=a||i.dash||"";n.select(this).call($e.stroke,r||i.color).call(Kr.dashLine,l,o)})},Kr.dashLine=function(t,e,r){r=+r||0,e=Kr.dashStyle(e,r),t.style({"stroke-dasharray":e,"stroke-width":r+"px"})},Kr.dashStyle=function(t,e){e=+e||1;var r=Math.max(e,3);return"solid"===t?t="":"dot"===t?t=r+"px,"+r+"px":"dash"===t?t=3*r+"px,"+3*r+"px":"longdash"===t?t=5*r+"px,"+5*r+"px":"dashdot"===t?t=3*r+"px,"+r+"px,"+r+"px,"+r+"px":"longdashdot"===t&&(t=5*r+"px,"+2*r+"px,"+r+"px,"+2*r+"px"),t},Kr.singleFillStyle=function(t){var e=(((n.select(t.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;e&&t.call($e.fill,e)},Kr.fillGroupStyle=function(t){t.style("stroke-width",0).each(function(e){var r=n.select(this);try{r.call($e.fill,e[0].trace.fillcolor)}catch(e){oe.error(e,t),r.remove()}})},Kr.symbolNames=[],Kr.symbolFuncs=[],Kr.symbolNeedLines={},Kr.symbolNoDot={},Kr.symbolNoFill={},Kr.symbolList=[],Object.keys(_r).forEach(function(t){var e=_r[t];Kr.symbolList=Kr.symbolList.concat([e.n,t,e.n+100,t+"-open"]),Kr.symbolNames[e.n]=t,Kr.symbolFuncs[e.n]=e.f,e.needLine&&(Kr.symbolNeedLines[e.n]=!0),e.noDot?Kr.symbolNoDot[e.n]=!0:Kr.symbolList=Kr.symbolList.concat([e.n+200,t+"-dot",e.n+300,t+"-open-dot"]),e.noFill&&(Kr.symbolNoFill[e.n]=!0)});var tn=Kr.symbolNames.length,en="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";function rn(t,e){var r=t%100;return Kr.symbolFuncs[r](e)+(t>=200?en:"")}Kr.symbolNumber=function(t){if("string"==typeof t){var e=0;t.indexOf("-open")>0&&(e=100,t=t.replace("-open","")),t.indexOf("-dot")>0&&(e+=200,t=t.replace("-dot","")),(t=Kr.symbolNames.indexOf(t))>=0&&(t+=e)}return t%100>=tn||t>=400?0:Math.floor(Math.max(t,0))};var nn={x1:1,x2:0,y1:0,y2:0},an={x1:0,x2:0,y1:1,y2:0};Kr.gradient=function(t,e,r,a,i,o){var l=e._fullLayout._defs.select(".gradients").selectAll("#"+r).data([a+i+o],oe.identity);l.exit().remove(),l.enter().append("radial"===a?"radialGradient":"linearGradient").each(function(){var t=n.select(this);"horizontal"===a?t.attr(nn):"vertical"===a&&t.attr(an),t.attr("id",r);var e=c(i),l=c(o);t.append("stop").attr({offset:"0%","stop-color":$e.tinyRGB(l),"stop-opacity":l.getAlpha()}),t.append("stop").attr({offset:"100%","stop-color":$e.tinyRGB(e),"stop-opacity":e.getAlpha()})}),t.style({fill:"url(#"+r+")","fill-opacity":null})},Kr.initGradients=function(t){oe.ensureSingle(t._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove()},Kr.singlePointStyle=function(t,e,r,n,a,i){var o=r.marker;!function(t,e,r,n,a,i,o,l){if(I.traceIs(r,"symbols")){var s=Wr(r);e.attr("d",function(t){var e;e="various"===t.ms||"various"===i.size?3:Zr.isBubble(r)?s(t.ms):(i.size||6)/2,t.mrc=e;var n=Kr.symbolNumber(t.mx||i.symbol)||0;return t.om=n%200>=100,rn(n,e)})}e.style("opacity",function(t){return(t.mo+1||i.opacity+1)-1});var u,c,f,h=!1;if(t.so?(f=o.outlierwidth,c=o.outliercolor,u=i.outliercolor):(f=(t.mlw+1||o.width+1||(t.trace?t.trace.marker.line.width:0)+1)-1,c="mlc"in t?t.mlcc=a(t.mlc):oe.isArrayOrTypedArray(o.color)?$e.defaultLine:o.color,oe.isArrayOrTypedArray(i.color)&&(u=$e.defaultLine,h=!0),u="mc"in t?t.mcc=n(t.mc):i.color||"rgba(0,0,0,0)"),t.om)e.call($e.stroke,u).style({"stroke-width":(f||1)+"px",fill:"none"});else{e.style("stroke-width",f+"px");var d=i.gradient,p=t.mgt;if(p?h=!0:p=d&&d.type,p&&"none"!==p){var g=t.mgc;g?h=!0:g=d.color;var v="g"+l._fullLayout._uid+"-"+r.uid;h&&(v+="-"+t.i),e.call(Kr.gradient,l,v,p,u,g)}else e.call($e.fill,u);f&&e.call($e.stroke,c)}}(t,e,r,n,a,o,o.line,i)},Kr.pointStyle=function(t,e,r){if(t.size()){var a=e.marker,i=Kr.tryColorscale(a,""),o=Kr.tryColorscale(a,"line");t.each(function(t){Kr.singlePointStyle(t,n.select(this),e,i,o,r)})}},Kr.makeSelectedPointStyleFns=function(t){var e={},r=t.selected||{},n=t.unselected||{},a=t.marker||{},i=r.marker||{},o=n.marker||{},l=a.opacity,s=i.opacity,u=o.opacity,c=void 0!==s,f=void 0!==u;e.opacityFn=function(t){var e=t.mo,r=void 0!==e;if(r||c||f){if(!t.selected)return f?u:$r*(r?e:l);if(c)return s}};var h=i.color,d=o.color;(h||d)&&(e.colorFn=function(t){if(t.selected){if(h)return h}else if(d)return d});var p=i.size,g=o.size,v=void 0!==p,m=void 0!==g;return(v||m)&&(e.sizeFn=function(t){var e=t.mrc;return t.selected?v?p/2:e:m?g/2:e}),e},Kr.selectedPointStyle=function(t,e){if(t.size()&&e.selectedpoints){var r=Kr.makeSelectedPointStyleFns(e),a=e.marker||{};t.each(function(t){var e=n.select(this),a=r.opacityFn(t);void 0!==a&&e.style("opacity",a)}),r.colorFn&&t.each(function(t){var e=n.select(this),a=r.colorFn(t);a&&$e.fill(e,a)}),I.traceIs(e,"symbols")&&r.sizeFn&&t.each(function(t){var e=n.select(this),i=t.mx||a.symbol||0,o=r.sizeFn(t);e.attr("d",rn(Kr.symbolNumber(i),o)),t.mrc2=o})}},Kr.tryColorscale=function(t,e){var r=e?oe.nestedProperty(t,e).get():t,n=r.colorscale,a=r.color;return n&&oe.isArrayOrTypedArray(a)?br.makeColorScaleFunc(br.extractScale(n,r.cmin,r.cmax)):oe.identity};var on={start:1,end:-1,middle:0,bottom:1,top:-1};function ln(t,e,r,a){var i=n.select(t.node().parentNode),o=-1!==e.indexOf("top")?"top":-1!==e.indexOf("bottom")?"bottom":"middle",l=-1!==e.indexOf("left")?"end":-1!==e.indexOf("right")?"start":"middle",s=a?a/.8+1:0,u=(Mr.lineCount(t)-1)*Qr+1,c=on[l]*s,f=.75*r+on[o]*s+(on[o]-1)*u*r/2;t.attr("text-anchor",l),i.attr("transform","translate("+c+","+f+")")}function sn(t,e){var r=t.ts||e.textfont.size;return a(r)&&r>0?r:0}Kr.textPointStyle=function(t,e,r){t.each(function(t){var a=n.select(this),i=oe.extractOption(t,e,"tx","text");if(i){var o=t.tp||e.textposition,l=sn(t,e);a.call(Kr.font,t.tf||e.textfont.family,l,t.tc||e.textfont.color).text(i).call(Mr.convertToTspans,r).call(ln,o,l,t.mrc)}else a.remove()})},Kr.selectedTextStyle=function(t,e){if(t.size()&&e.selectedpoints){var r=e.selected||{},a=e.unselected||{};t.each(function(t){var i,o=n.select(this),l=t.tc||e.textfont.color,s=t.tp||e.textposition,u=sn(t,e),c=(r.textfont||{}).color,f=(a.textfont||{}).color;t.selected?c&&(i=c):f?i=f:c||(i=$e.addOpacity(l,$r)),i&&$e.fill(o,i),ln(o,s,u,t.mrc2||t.mrc)})}};var un=.5;function cn(t,e,r,a){var i=t[0]-e[0],o=t[1]-e[1],l=r[0]-e[0],s=r[1]-e[1],u=Math.pow(i*i+o*o,un/2),c=Math.pow(l*l+s*s,un/2),f=(c*c*i-u*u*l)*a,h=(c*c*o-u*u*s)*a,d=3*c*(u+c),p=3*u*(u+c);return[[n.round(e[0]+(d&&f/d),2),n.round(e[1]+(d&&h/d),2)],[n.round(e[0]-(p&&f/p),2),n.round(e[1]-(p&&h/p),2)]]}Kr.smoothopen=function(t,e){if(t.length<3)return"M"+t.join("L");var r,n="M"+t[0],a=[];for(r=1;r<t.length-1;r++)a.push(cn(t[r-1],t[r],t[r+1],e));for(n+="Q"+a[0][0]+" "+t[1],r=2;r<t.length-1;r++)n+="C"+a[r-2][1]+" "+a[r-1][0]+" "+t[r];return n+="Q"+a[t.length-3][1]+" "+t[t.length-1]},Kr.smoothclosed=function(t,e){if(t.length<3)return"M"+t.join("L")+"Z";var r,n="M"+t[0],a=t.length-1,i=[cn(t[a],t[0],t[1],e)];for(r=1;r<a;r++)i.push(cn(t[r-1],t[r],t[r+1],e));for(i.push(cn(t[a-1],t[a],t[0],e)),r=1;r<=a;r++)n+="C"+i[r-1][1]+" "+i[r][0]+" "+t[r];return n+="C"+i[a][1]+" "+i[0][0]+" "+t[0]+"Z"};var fn={hv:function(t,e){return"H"+n.round(e[0],2)+"V"+n.round(e[1],2)},vh:function(t,e){return"V"+n.round(e[1],2)+"H"+n.round(e[0],2)},hvh:function(t,e){return"H"+n.round((t[0]+e[0])/2,2)+"V"+n.round(e[1],2)+"H"+n.round(e[0],2)},vhv:function(t,e){return"V"+n.round((t[1]+e[1])/2,2)+"H"+n.round(e[0],2)+"V"+n.round(e[1],2)}},hn=function(t,e){return"L"+n.round(e[0],2)+","+n.round(e[1],2)};Kr.steps=function(t){var e=fn[t]||hn;return function(t){for(var r="M"+n.round(t[0][0],2)+","+n.round(t[0][1],2),a=1;a<t.length;a++)r+=e(t[a-1],t[a]);return r}},Kr.makeTester=function(){var t=oe.ensureSingleById(n.select("body"),"svg","js-plotly-tester",function(t){t.attr(Ce.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),e=oe.ensureSingle(t,"path","js-reference-point",function(t){t.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});Kr.tester=t,Kr.testref=e},Kr.savedBBoxes={};var dn=0;function pn(t){var e=t.getAttribute("data-unformatted");if(null!==e)return e+t.getAttribute("data-math")+t.getAttribute("text-anchor")+t.getAttribute("style")}Kr.bBox=function(t,e,r){var a,i,o;if(r||(r=pn(t)),r){if(a=Kr.savedBBoxes[r])return oe.extendFlat({},a)}else if(1===t.childNodes.length){var l=t.childNodes[0];if(r=pn(l)){var s=+l.getAttribute("x")||0,u=+l.getAttribute("y")||0,c=l.getAttribute("transform");if(!c){var f=Kr.bBox(l,!1,r);return s&&(f.left+=s,f.right+=s),u&&(f.top+=u,f.bottom+=u),f}if(r+="~"+s+"~"+u+"~"+c,a=Kr.savedBBoxes[r])return oe.extendFlat({},a)}}e?i=t:(o=Kr.tester.node(),i=t.cloneNode(!0),o.appendChild(i)),n.select(i).attr("transform",null).call(Mr.positionText,0,0);var h=i.getBoundingClientRect(),d=Kr.testref.node().getBoundingClientRect();e||o.removeChild(i);var p={height:h.height,width:h.width,left:h.left-d.left,top:h.top-d.top,right:h.right-d.left,bottom:h.bottom-d.top};return dn>=1e4&&(Kr.savedBBoxes={},dn=0),r&&(Kr.savedBBoxes[r]=p),dn++,oe.extendFlat({},p)},Kr.setClipUrl=function(t,e){if(e){if(void 0===Kr.baseUrl){var r=n.select("base");r.size()&&r.attr("href")?Kr.baseUrl=window.location.href.split("#")[0]:Kr.baseUrl=""}t.attr("clip-path","url("+Kr.baseUrl+"#"+e+")")}else t.attr("clip-path",null)},Kr.getTranslate=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(t,e,r){return[e,r].join(" ")}).split(" ");return{x:+e[0]||0,y:+e[1]||0}},Kr.setTranslate=function(t,e,r){var n=t.attr?"attr":"getAttribute",a=t.attr?"attr":"setAttribute",i=t[n]("transform")||"";return e=e||0,r=r||0,i=i.replace(/(\btranslate\(.*?\);?)/,"").trim(),i=(i+=" translate("+e+", "+r+")").trim(),t[a]("transform",i),i},Kr.getScale=function(t){var e=(t[t.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(t,e,r){return[e,r].join(" ")}).split(" ");return{x:+e[0]||1,y:+e[1]||1}},Kr.setScale=function(t,e,r){var n=t.attr?"attr":"getAttribute",a=t.attr?"attr":"setAttribute",i=t[n]("transform")||"";return e=e||1,r=r||1,i=i.replace(/(\bscale\(.*?\);?)/,"").trim(),i=(i+=" scale("+e+", "+r+")").trim(),t[a]("transform",i),i},Kr.setPointGroupScale=function(t,e,r){var n,a,i;return e=e||1,r=r||1,a=1===e&&1===r?"":" scale("+e+","+r+")",i=/\s*sc.*/,t.each(function(){n=(this.getAttribute("transform")||"").replace(i,""),n=(n+=a).trim(),this.setAttribute("transform",n)}),a};var gn=/translate\([^)]*\)\s*$/;Kr.setTextPointsScale=function(t,e,r){t.each(function(){var t,a=n.select(this),i=a.select("text");if(i.node()){var o=parseFloat(i.attr("x")||0),l=parseFloat(i.attr("y")||0),s=(a.attr("transform")||"").match(gn);t=1===e&&1===r?[]:["translate("+o+","+l+")","scale("+e+","+r+")","translate("+-o+","+-l+")"],s&&t.push(s),a.attr("transform",t.join(" "))}})};var vn={getSubplot:function(t){return t.subplot||t.xaxis+t.yaxis||t.geo},isTraceInSubplots:function(t,e){if("splom"===t.type){for(var r=t.xaxes||[],n=t.yaxes||[],a=0;a<r.length;a++)for(var i=0;i<n.length;i++)if(-1!==e.indexOf(r[a]+n[i]))return!0;return!1}return-1!==e.indexOf(vn.getSubplot(t))},flat:function(t,e){for(var r=new Array(t.length),n=0;n<t.length;n++)r[n]=e;return r},p2c:function(t,e){for(var r=new Array(t.length),n=0;n<t.length;n++)r[n]=t[n].p2c(e);return r},getDistanceFunction:function(t,e,r,n){return"closest"===t?n||vn.quadrature(e,r):"x"===t?e:r},getClosest:function(t,e,r){if(!1!==r.index)r.index>=0&&r.index<t.length?r.distance=0:r.index=!1;else for(var n=0;n<t.length;n++){var a=e(t[n]);a<=r.distance&&(r.index=n,r.distance=a)}return r},inbox:function(t,e,r){return t*e<0||0===t?r:1/0},quadrature:function(t,e){return function(r){var n=t(r),a=e(r);return Math.sqrt(n*n+a*a)}},makeEventData:function(t,e,r){var n="index"in t?t.index:t.pointNumber,a={data:e._input,fullData:e,curveNumber:e.index,pointNumber:n};if(e._indexToPoints){var i=e._indexToPoints[n];1===i.length?a.pointIndex=i[0]:a.pointIndices=i}else a.pointIndex=n;return e._module.eventData?a=e._module.eventData(a,t,e,r,n):("xVal"in t?a.x=t.xVal:"x"in t&&(a.x=t.x),"yVal"in t?a.y=t.yVal:"y"in t&&(a.y=t.y),t.xa&&(a.xaxis=t.xa),t.ya&&(a.yaxis=t.ya),void 0!==t.zLabelVal&&(a.z=t.zLabelVal)),vn.appendArrayPointValue(a,e,n),a},appendArrayPointValue:function(t,e,r){var n=e._arrayAttrs;if(n)for(var a=0;a<n.length;a++){var i=n[a],o=yn(i);if(void 0===t[o]){var l=xn(oe.nestedProperty(e,i).get(),r);void 0!==l&&(t[o]=l)}}},appendArrayMultiPointValues:function(t,e,r){var n=e._arrayAttrs;if(n)for(var a=0;a<n.length;a++){var i=n[a],o=yn(i);if(void 0===t[o]){for(var l=oe.nestedProperty(e,i).get(),s=new Array(r.length),u=0;u<r.length;u++)s[u]=xn(l,r[u]);t[o]=s}}}},mn={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color"};function yn(t){return mn[t]||t}function xn(t,e){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(t[e[0]])?t[e[0]][e[1]]:void 0:t[e]}var bn=function(t,e){(t.attr("class")||"").split(" ").forEach(function(e){0===e.indexOf("cursor-")&&t.classed(e,!1)}),e&&t.classed("cursor-"+e,!0)},_n="data-savedcursor",wn=function(t,e){var r=t.attr(_n);if(e){if(!r){for(var n=(t.attr("class")||"").split(" "),a=0;a<n.length;a++){var i=n[a];0===i.indexOf("cursor-")&&t.attr(_n,i.substr(7)).classed(i,!1)}t.attr(_n)||t.attr(_n,"!!")}bn(t,e)}else r&&(t.attr(_n,null),"!!"===r?bn(t):bn(t,r))},An={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"]}}},Mn={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}},Tn=b.extendFlat,kn=function(t,e,r){return{color:{valType:"color",arrayOk:!0,editType:e||"style"},colorscale:Tn({},nr.colorscale,{}),cauto:Tn({},nr.zauto,{impliedEdits:{cmin:void 0,cmax:void 0}}),cmax:Tn({},nr.zmax,{editType:e||nr.zmax.editType,impliedEdits:{cauto:!1}}),cmin:Tn({},nr.zmin,{editType:e||nr.zmin.editType,impliedEdits:{cauto:!1}}),autocolorscale:Tn({},nr.autocolorscale,{dflt:!1===r?r:nr.autocolorscale.dflt}),reversescale:Tn({},nr.reversescale,{})}},En={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20},Cn=or.dash,Sn=b.extendFlat,Ln={x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:Sn({},Cn,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],dflt:"none",editType:"calc"},fillcolor:{valType:"color",editType:"style"},marker:Sn({symbol:{valType:"enumerated",values:Jr.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style"},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calcIfAutorange"},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},showscale:{valType:"boolean",dflt:!1,editType:"calc"},colorbar:fr,line:Sn({width:{valType:"number",min:0,arrayOk:!0,editType:"style"},editType:"calc"},kn()),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},kn()),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:S({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}},On=Ln.marker,Dn={r:Ln.r,t:Ln.t,marker:{color:On.color,size:On.size,symbol:On.symbol,opacity:On.opacity,editType:"calc"}},Rn=b.extendFlat,Pn=_e.overrideAll,In=Rn({},ur.domain,{});function Bn(t,e){return Rn({},e,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number"},visible:{valType:"boolean"}})}var Fn=Pn({radialaxis:Bn(0,{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:In,orientation:{valType:"number"}}),angularaxis:Bn(0,{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:In}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested"),zn={},Nn=oe.extendFlat,jn=oe.extendDeepAll,Un=oe.isPlainObject,Vn="_isSubplotObj",Hn="_isLinkedToArray",qn=[Vn,Hn,"_arrayAttrRegexps","_deprecated"];function Gn(t,e,r){if(!t)return!1;if(t._isLinkedToArray)if(Xn(e[r]))r++;else if(r<e.length)return!1;for(;r<e.length;r++){var n=t[e[r]];if(!Un(n))break;if(t=n,r===e.length-1)break;if(t._isLinkedToArray){if(!Xn(e[++r]))return!1}else if("info_array"===t.valType){var a=e[++r];if(!Xn(a))return!1;var i=t.items;if(Array.isArray(i)){if(a>=i.length)return!1;if(2===t.dimensions){if(r++,e.length===r)return t;var o=e[r];if(!Xn(o))return!1;t=i[a][o]}else t=i[a]}else t=i}}return t}function Xn(t){return t===Math.round(t)&&t>=0}function Yn(t){return function(t){zn.crawl(t,function(t,e,r){zn.isValObject(t)?"data_array"===t.valType?(t.role="data",r[e+"src"]={valType:"string",editType:"none"}):!0===t.arrayOk&&(r[e+"src"]={valType:"string",editType:"none"}):Un(t)&&(t.role="object")})}(t),function(t){zn.crawl(t,function(t,e,r){if(!t)return;var n=t[Hn];if(!n)return;delete t[Hn],r[e]={items:{}},r[e].items[n]=t,r[e].role="object"})}(t),function(t){!function t(e){for(var r in e)if(Un(e[r]))t(e[r]);else if(Array.isArray(e[r]))for(var n=0;n<e[r].length;n++)t(e[r][n]);else e[r]instanceof RegExp&&(e[r]=e[r].toString())}(t)}(t),t}function Wn(t,e,r){var n=oe.nestedProperty(t,r),a=jn({},e.layoutAttributes);a[Vn]=!0,n.set(a)}function Zn(t,e,r){var n=oe.nestedProperty(t,r);n.set(jn(n.get()||{},e))}zn.IS_SUBPLOT_OBJ=Vn,zn.IS_LINKED_TO_ARRAY=Hn,zn.DEPRECATED="_deprecated",zn.UNDERSCORE_ATTRS=qn,zn.get=function(){var t={};I.allTypes.concat("area").forEach(function(e){t[e]=function(t){var e,r;"area"===t?(e={attributes:Dn},r={}):(e=I.modules[t]._module,r=e.basePlotModule);var n={type:null};jn(n,O),jn(n,e.attributes),r.attributes&&jn(n,r.attributes);n.type=t;var a={meta:e.meta||{},attributes:Yn(n)};if(e.layoutAttributes){var i={};jn(i,e.layoutAttributes),a.layoutAttributes=Yn(i)}return a}(e)});var e,r={};return Object.keys(I.transformsRegistry).forEach(function(t){r[t]=function(t){var e=I.transformsRegistry[t],r=jn({},e.attributes);return Object.keys(I.componentsRegistry).forEach(function(e){var n=I.componentsRegistry[e];n.schema&&n.schema.transforms&&n.schema.transforms[t]&&Object.keys(n.schema.transforms[t]).forEach(function(e){Zn(r,n.schema.transforms[t][e],e)})}),{attributes:Yn(r)}}(t)}),{defs:{valObjects:oe.valObjectMeta,metaKeys:qn.concat(["description","role","editType","impliedEdits"]),editType:{traces:_e.traces,layout:_e.layout},impliedEdits:{}},traces:t,layout:function(){var t,e,r={};for(t in jn(r,P),I.subplotsRegistry)if((e=I.subplotsRegistry[t]).layoutAttributes)if(Array.isArray(e.attr))for(var n=0;n<e.attr.length;n++)Wn(r,e,e.attr[n]);else{var a="subplot"===e.attr?e.name:e.attr;Wn(r,e,a)}for(t in r=function(t){return Nn(t,{radialaxis:Fn.radialaxis,angularaxis:Fn.angularaxis}),Nn(t,Fn.layout),t}(r),I.componentsRegistry){var i=(e=I.componentsRegistry[t]).schema;if(i&&(i.subplots||i.layout)){var o=i.subplots;if(o&&o.xaxis&&!o.yaxis)for(var l in o.xaxis)delete r.yaxis[l]}else e.layoutAttributes&&Zn(r,e.layoutAttributes,e.name)}return{layoutAttributes:Yn(r)}}(),transforms:r,frames:(e={frames:oe.extendDeepAll({},Mn)},Yn(e),e.frames),animation:Yn(An)}},zn.crawl=function(t,e,r,n){var a=r||0;n=n||"",Object.keys(t).forEach(function(r){var i=t[r];if(-1===qn.indexOf(r)){var o=(n?n+".":"")+r;e(i,r,t,a,o),zn.isValObject(i)||Un(i)&&"impliedEdits"!==r&&zn.crawl(i,e,a+1,o)}})},zn.isValObject=function(t){return t&&void 0!==t.valType},zn.findArrayAttributes=function(t){var e=[],r=[];function n(n,a,i,o){if(r=r.slice(0,o).concat([a]),n&&("data_array"===n.valType||!0===n.arrayOk)&&!("colorbar"===r[o-1]&&("ticktext"===a||"tickvals"===a))){var l=function(t){return t.join(".")}(r),s=oe.nestedProperty(t,l).get();oe.isArrayOrTypedArray(s)&&e.push(l)}}if(zn.crawl(O,n),t._module&&t._module.attributes&&zn.crawl(t._module.attributes,n),t.transforms)for(var a=t.transforms,i=0;i<a.length;i++){var o=a[i]._module;o&&(r=["transforms["+i+"]"],zn.crawl(o.attributes,n,1))}return t._fullInput&&t._fullInput._module&&t._fullInput._module.attributes&&(zn.crawl(t._fullInput._module.attributes,n),e=oe.filterUnique(e)),e},zn.getTraceValObject=function(t,e){var r,n,a=e[0],i=1;if("transforms"===a){var o=t.transforms;if(!Array.isArray(o)||!o.length)return!1;var l=e[1];if(!Xn(l)||l>=o.length)return!1;n=(r=(I.transformsRegistry[o[l].type]||{}).attributes)&&r[e[2]],i=3}else if("area"===t.type)n=Dn[a];else{var s=t._module;if(s||(s=(I.modules[t.type||O.type.dflt]||{})._module),!s)return!1;if(!(n=(r=s.attributes)&&r[a])){var u=s.basePlotModule;u&&u.attributes&&(n=u.attributes[a])}n||(n=O[a])}return Gn(n,e,i)},zn.getLayoutValObject=function(t,e){return Gn(function(t,e){var r,n,a,i,o=t._basePlotModules;if(o){var l;for(r=0;r<o.length;r++){if((a=o[r]).attrRegex&&a.attrRegex.test(e)){if(a.layoutAttrOverrides)return a.layoutAttrOverrides;!l&&a.layoutAttributes&&(l=a.layoutAttributes)}var s=a.baseLayoutAttrOverrides;if(s&&e in s)return s[e]}if(l)return l}var u=t._modules;if(u)for(r=0;r<u.length;r++)if((i=u[r].layoutAttributes)&&e in i)return i[e];for(n in I.componentsRegistry)if(!(a=I.componentsRegistry[n]).schema&&e===a.name)return a.layoutAttributes;if(e in P)return P[e];if("radialaxis"===e||"angularaxis"===e)return Fn[e];return Fn.layout[e]||!1}(t,e[0]),e,1)};var Jn={};function Qn(t,e,r){var n,a,i,o=!1;if("data"===e.type)n=t._fullData[null!==e.traces?e.traces[0]:0];else{if("layout"!==e.type)return!1;n=t._fullLayout}return a=oe.nestedProperty(n,e.prop).get(),(i=r[e.type]=r[e.type]||{}).hasOwnProperty(e.prop)&&i[e.prop]!==a&&(o=!0),i[e.prop]=a,{changed:o,value:a}}function $n(t,e){var r=[],n=e[0],a={};if("string"==typeof n)a[n]=e[1];else{if(!oe.isPlainObject(n))return r;a=n}return ta(a,function(t,e,n){r.push({type:"layout",prop:t,value:n})},"",0),r}function Kn(t,e){var r,n,a,i,o=[];if(n=e[0],a=e[1],r=e[2],i={},"string"==typeof n)i[n]=a;else{if(!oe.isPlainObject(n))return o;i=n,void 0===r&&(r=a)}return void 0===r&&(r=null),ta(i,function(e,n,a){var i;if(Array.isArray(a)){var l=Math.min(a.length,t.data.length);r&&(l=Math.min(l,r.length)),i=[];for(var s=0;s<l;s++)i[s]=r?r[s]:s}else i=r?r.slice(0):null;if(null===i)Array.isArray(a)&&(a=a[0]);else if(Array.isArray(i)){if(!Array.isArray(a)){var u=a;a=[];for(var c=0;c<i.length;c++)a[c]=u}a.length=Math.min(i.length,a.length)}o.push({type:"data",prop:e,traces:i,value:a})},"",0),o}function ta(t,e,r,n){Object.keys(t).forEach(function(a){var i=t[a];if("_"!==a[0]){var o=r+(n>0?".":"")+a;oe.isPlainObject(i)?ta(i,e,o,n+1):e(o,a,i)}})}function ea(t,e){return"splom"===t?-1:"splom"===e?1:0}Jn.manageCommandObserver=function(t,e,r,n){var a={},i=!0;e&&e._commandObserver&&(a=e._commandObserver),a.cache||(a.cache={}),a.lookupTable={};var o=Jn.hasSimpleAPICommandBindings(t,r,a.lookupTable);if(e&&e._commandObserver){if(o)return a;if(e._commandObserver.remove)return e._commandObserver.remove(),e._commandObserver=null,a}if(o){Qn(t,o,a.cache),a.check=function(){if(i){var e=Qn(t,o,a.cache);return e.changed&&n&&void 0!==a.lookupTable[e.value]&&(a.disable(),Promise.resolve(n({value:e.value,type:o.type,prop:o.prop,traces:o.traces,index:a.lookupTable[e.value]})).then(a.enable,a.enable)),e.changed}};for(var l=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],s=0;s<l.length;s++)t._internalOn(l[s],a.check);a.remove=function(){for(var e=0;e<l.length;e++)t._removeInternalListener(l[e],a.check)}}else oe.log("Unable to automatically bind plot updates to API command"),a.lookupTable={},a.remove=function(){};return a.disable=function(){i=!1},a.enable=function(){i=!0},e&&(e._commandObserver=a),a},Jn.hasSimpleAPICommandBindings=function(t,e,r){var n,a,i=e.length;for(n=0;n<i;n++){var o,l=e[n],s=l.method,u=l.args;if(Array.isArray(u)||(u=[]),!s)return!1;var c=Jn.computeAPICommandBindings(t,s,u);if(1!==c.length)return!1;if(a){if((o=c[0]).type!==a.type)return!1;if(o.prop!==a.prop)return!1;if(Array.isArray(a.traces)){if(!Array.isArray(o.traces))return!1;o.traces.sort();for(var f=0;f<a.traces.length;f++)if(a.traces[f]!==o.traces[f])return!1}else if(o.prop!==a.prop)return!1}else a=c[0],Array.isArray(a.traces)&&a.traces.sort();var h=(o=c[0]).value;if(Array.isArray(h)){if(1!==h.length)return!1;h=h[0]}r&&(r[h]=n)}return a},Jn.executeAPICommand=function(t,e,r){if("skip"===e)return Promise.resolve();var n=I.apiMethodRegistry[e],a=[t];Array.isArray(r)||(r=[]);for(var i=0;i<r.length;i++)a.push(r[i]);return n.apply(null,a).catch(function(t){return oe.warn("API call to Plotly."+e+" rejected.",t),Promise.reject(t)})},Jn.computeAPICommandBindings=function(t,e,r){var n;switch(Array.isArray(r)||(r=[]),e){case"restyle":n=Kn(t,r);break;case"relayout":n=$n(t,r);break;case"update":n=Kn(t,[r[0],r[2]]).concat($n(t,[r[1]]));break;case"animate":n=function(t,e){return Array.isArray(e[0])&&1===e[0].length&&-1!==["string","number"].indexOf(typeof e[0][0])?[{type:"layout",prop:"_currentFrame",value:e[0][0].toString()}]:[]}(0,r);break;default:n=[]}return n};var ra=ea,na={},aa=i.BADNUM,ia=function(t,e){return ea(t.name,e.name)},oa=oe.relinkPrivateKeys,la=oe._,sa=na={};oe.extendFlat(sa,I),sa.attributes=O,sa.attributes.type.values=sa.allTypes,sa.fontAttrs=S,sa.layoutAttributes=P,sa.fontWeight="normal";var ua=sa.transformsRegistry;sa.executeAPICommand=Jn.executeAPICommand,sa.computeAPICommandBindings=Jn.computeAPICommandBindings,sa.manageCommandObserver=Jn.manageCommandObserver,sa.hasSimpleAPICommandBindings=Jn.hasSimpleAPICommandBindings,sa.redrawText=function(t){if(!((t=oe.getGraphDiv(t)).data&&t.data[0]&&t.data[0].r))return new Promise(function(e){setTimeout(function(){I.getComponentMethod("annotations","draw")(t),I.getComponentMethod("legend","draw")(t),(t.calcdata||[]).forEach(function(t){t[0]&&t[0].t&&t[0].t.cb&&t[0].t.cb()}),e(sa.previousPromises(t))},300)})},sa.resize=function(t){return t=oe.getGraphDiv(t),new Promise(function(e,r){t&&!function(t){var e=window.getComputedStyle(t).display;return!e||"none"===e}(t)||r(new Error("Resize must be passed a displayed plot div element.")),t._redrawTimer&&clearTimeout(t._redrawTimer),t._redrawTimer=setTimeout(function(){if(t.layout.width&&t.layout.height)e(t);else{delete t.layout.width,delete t.layout.height;var r=t.changed;t.autoplay=!0,I.call("relayout",t,{autosize:!0}).then(function(){t.changed=r,e(t)})}},100)})},sa.previousPromises=function(t){if((t._promises||[]).length)return Promise.all(t._promises).then(function(){t._promises=[]})},sa.addLinks=function(t){if(t._context.showLink||t._context.showSources){var e=t._fullLayout,r=oe.ensureSingle(e._paper,"text","js-plot-link-container",function(t){t.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:$e.defaultLine,"pointer-events":"all"}).each(function(){var t=n.select(this);t.append("tspan").classed("js-link-to-tool",!0),t.append("tspan").classed("js-link-spacer",!0),t.append("tspan").classed("js-sourcelinks",!0)})}),a=r.node(),i={y:e._paper.attr("height")-9};document.body.contains(a)&&a.getComputedTextLength()>=e.width-20?(i["text-anchor"]="start",i.x=5):(i["text-anchor"]="end",i.x=e._paper.attr("width")-7),r.attr(i);var o=r.select(".js-link-to-tool"),l=r.select(".js-link-spacer"),s=r.select(".js-sourcelinks");t._context.showSources&&t._context.showSources(t),t._context.showLink&&function(t,e){e.text("");var r=e.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(t._context.linkText+" "+String.fromCharCode(187));if(t._context.sendData)r.on("click",function(){sa.sendDataToCloud(t)});else{var n=window.location.pathname.split("/"),a=window.location.search;r.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+n[2].split(".")[0]+"/"+n[1]+a})}}(t,o),l.text(o.text()&&s.text()?" - ":"")}},sa.sendDataToCloud=function(t){t.emit("plotly_beforeexport");var e=window.PLOTLYENV&&window.PLOTLYENV.BASE_URL||"https://plot.ly",r=n.select(t).append("div").attr("id","hiddenform").style("display","none"),a=r.append("form").attr({action:e+"/external",method:"post",target:"_blank"});return a.append("input").attr({type:"text",name:"data"}).node().value=sa.graphJson(t,!1,"keepdata"),a.node().submit(),r.remove(),t.emit("plotly_afterexport"),!1};var ca,fa=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],ha=["year","month","dayMonth","dayMonthYear"];function da(t,e){var r,n,a=t.trace,i=a._arrayAttrs,o={};for(r=0;r<i.length;r++)o[n=i[r]]=oe.nestedProperty(a,n).get().slice();for(t.trace=e,r=0;r<i.length;r++)n=i[r],oe.nestedProperty(t.trace,n).set(o[n])}function pa(t,e){var r=t._context.locale,n=!1,a={};function i(t){for(var r=!0,i=0;i<e.length;i++){var o=e[i];a[o]||(t[o]?a[o]=t[o]:r=!1)}r&&(n=!0)}for(var o=0;o<2;o++){for(var l=t._context.locales,s=0;s<2;s++){var u=(l[r]||{}).format;if(u&&(i(u),n))break;l=I.localeRegistry}var c=r.split("-")[0];if(n||c===r)break;r=c}return n||i(I.localeRegistry.en.format),a}function ga(t,e,r,n){for(var a=t.transforms,i=[t],o=0;o<a.length;o++){var l=a[o],s=ua[l.type];s&&s.transform&&(i=s.transform(i,{transform:l,fullTrace:t,fullData:e,layout:r,fullLayout:n,transformIndex:o}))}return i}function va(t){for(var e=0;e<t.length;e++)t[e].clearCalc()}sa.supplyDefaults=function(t){var e=t._fullLayout||{};if(e._skipDefaults)delete e._skipDefaults;else{var r,a=t._fullLayout={},i=t.layout||{},o=t._fullData||[],l=t._fullData=[],s=t.data||[],u=t.calcdata||[],c=t._context||{};t._transitionData||sa.createTransitionData(t),a._dfltTitle={plot:la(t,"Click to enter Plot title"),x:la(t,"Click to enter X axis title"),y:la(t,"Click to enter Y axis title"),colorbar:la(t,"Click to enter Colorscale title"),annotation:la(t,"new text")},a._traceWord=la(t,"trace");var f=pa(t,fa);if(a._mapboxAccessToken=c.mapboxAccessToken,e._initialAutoSizeIsDone){var h=e.width,d=e.height;sa.supplyLayoutGlobalDefaults(i,a,f),i.width||(a.width=h),i.height||(a.height=d)}else{sa.supplyLayoutGlobalDefaults(i,a,f);var p=!i.width||!i.height,g=a.autosize,v=c.autosizable;p&&(g||v)?sa.plotAutoSize(t,i,a):p&&sa.sanitizeMargins(t),!g&&p&&(i.width=a.width,i.height=a.height)}a._d3locale=function(t,e){return t.decimal=e.charAt(0),t.thousands=e.charAt(1),n.locale(t)}(f,a.separators),a._extraFormat=pa(t,ha),a._initialAutoSizeIsDone=!0,a._dataLength=s.length,a._modules=[],a._basePlotModules=[];var m=a._subplots=function(){var t,e,r={};if(!ca){ca=[];var n=I.subplotsRegistry;for(var a in n){var i=n[a],o=i.attr;if(o&&(ca.push(a),Array.isArray(o)))for(e=0;e<o.length;e++)oe.pushUnique(ca,o[e])}}for(t=0;t<ca.length;t++)r[ca[t]]=[];return r}(),y=a._splomAxes={x:{},y:{}},x=a._splomSubplots={};a._requestRangeslider={},a._globalTransforms=(t._context||{}).globalTransforms,sa.supplyDataDefaults(s,l,i,a);var b=Object.keys(y.x),_=Object.keys(y.y);if(b.length>1&&_.length>1){for(I.getComponentMethod("grid","sizeDefaults")(i,a),r=0;r<b.length;r++)oe.pushUnique(m.xaxis,b[r]);for(r=0;r<_.length;r++)oe.pushUnique(m.yaxis,_[r]);for(var w in x)oe.pushUnique(m.cartesian,w)}a._has=sa._hasPlotType.bind(a);var A=a._modules;for(r=0;r<A.length;r++){var M=A[r];M.cleanData&&M.cleanData(l)}if(o.length===l.length)for(r=0;r<l.length;r++)oa(l[r],o[r]);sa.supplyLayoutModuleDefaults(i,a,l,t._transitionData),a._hasOnlyLargeSploms=1===a._basePlotModules.length&&"splom"===a._basePlotModules[0].name&&b.length>15&&_.length>15&&0===a.shapes.length&&0===a.images.length,a._hasCartesian=a._has("cartesian"),a._hasGeo=a._has("geo"),a._hasGL3D=a._has("gl3d"),a._hasGL2D=a._has("gl2d"),a._hasTernary=a._has("ternary"),a._hasPie=a._has("pie"),sa.cleanPlot(l,a,o,e,u),sa.linkSubplots(l,a,o,e),oa(a,e),sa.doAutoMargin(t);var T=De.list(t);for(r=0;r<T.length;r++){T[r].setScale()}if(u.length===l.length)for(r=0;r<l.length;r++){var k=l[r],E=u[r][0];E&&E.trace&&(E.trace._hasCalcTransform?da(E,k):E.trace=k)}a._basePlotModules.sort(ia)}},sa.createTransitionData=function(t){t._transitionData||(t._transitionData={}),t._transitionData._frames||(t._transitionData._frames=[]),t._transitionData._frameHash||(t._transitionData._frameHash={}),t._transitionData._counter||(t._transitionData._counter=0),t._transitionData._interruptCallbacks||(t._transitionData._interruptCallbacks=[])},sa._hasPlotType=function(t){var e,r=this._basePlotModules||[];for(e=0;e<r.length;e++)if(r[e].name===t)return!0;var n=this._modules||[];for(e=0;e<n.length;e++){var a=n[e].name;if(a===t)return!0;var i=I.modules[a];if(i&&i.categories[t])return!0}return!1},sa.cleanPlot=function(t,e,r,n,a){var i,o,l=n._basePlotModules||[];for(i=0;i<l.length;i++){var s=l[i];s.clean&&s.clean(t,e,r,n,a)}var u=!!n._paper,c=!!n._infolayer,f=n._has&&n._has("gl"),h=e._has&&e._has("gl");f&&!h&&void 0!==n._glcontainer&&(n._glcontainer.selectAll(".gl-canvas").remove(),n._glcanvas=null);t:for(i=0;i<r.length;i++){var d=r[i].uid;for(o=0;o<t.length;o++){if(d===t[o].uid)continue t}var p=".hm"+d+",.contour"+d+",.carpet"+d+",#clip"+d+",.trace"+d;u&&n._paper.selectAll(p).remove(),c&&(n._infolayer.selectAll(".cb"+d).remove(),n._infolayer.selectAll("g.rangeslider-container").selectAll(p).remove())}n._zoomlayer&&n._zoomlayer.selectAll(".select-outline").remove()},sa.linkSubplots=function(t,e,r,n){var a,i,o,l,s=n._plots||{},u=e._plots={},c=e._subplots,f={_fullData:t,_fullLayout:e},h=c.cartesian.concat(c.gl2d||[]);for(a=0;a<h.length;a++){var d,p=s[o=h[a]],g=De.getFromId(f,o,"x"),v=De.getFromId(f,o,"y");for(p?((d=u[o]=p).xaxis.layer!==g.layer&&(d.xlines.attr("d",null),d.xaxislayer.selectAll("*").remove()),d.yaxis.layer!==v.layer&&(d.ylines.attr("d",null),d.yaxislayer.selectAll("*").remove())):(d=u[o]={}).id=o,d.xaxis=g,d.yaxis=v,d._hasClipOnAxisFalse=!1,i=0;i<t.length;i++){var m=t[i];if(m.xaxis===d.xaxis._id&&m.yaxis===d.yaxis._id&&!1===m.cliponaxis){d._hasClipOnAxisFalse=!0;break}}}var y=De.list(f,null,!0);for(a=0;a<y.length;a++){var x=null;(l=y[a]).overlaying&&(x=De.getFromId(f,l.overlaying))&&x.overlaying&&(l.overlaying=!1,x=null),l._mainAxis=x||l,x&&(l.domain=x.domain.slice()),l._anchorAxis="free"===l.anchor?null:De.getFromId(f,l.anchor)}for(a=0;a<y.length;a++){var b="x"===(l=y[a])._id.charAt(0),_=l._mainAxis._anchorAxis,w="",A="",M="";if(_&&(M=_._mainAxis._id,w=b?l._id+M:M+l._id),!w||-1===h.indexOf(w))for(w="",i=0;i<h.length;i++){var T=(o=h[i]).indexOf("y"),k=b?o.substr(0,T):o.substr(T),E=b?o.substr(T):o.substr(0,T);if(k===l._id){A||(A=o);var C=De.getFromId(f,E);if(M&&C.overlaying===M){w=o;break}}}l._mainSubplot=w||A}},sa.clearExpandedTraceDefaultColors=function(t){var e,r,n;for(r=[],(e=t._module._colorAttrs)||(t._module._colorAttrs=e=[],zn.crawl(t._module.attributes,function(t,n,a,i){r[i]=n,r.length=i+1,"color"===t.valType&&void 0===t.dflt&&e.push(r.join("."))})),n=0;n<e.length;n++){oe.nestedProperty(t,"_input."+e[n]).get()||oe.nestedProperty(t,e[n]).set(null)}},sa.supplyDataDefaults=function(t,e,r,n){var a,i,o,l=n._modules,s=n._basePlotModules,u=0,c=0;function f(t){e.push(t);var r=t._module;r&&(!0===t.visible&&oe.pushUnique(l,r),oe.pushUnique(s,t._module.basePlotModule),u++,!1!==t._input.visible&&c++)}n._transformModules=[];var h={},d=[];for(a=0;a<t.length;a++){if(o=t[a],(i=sa.supplyTraceDefaults(o,c,n,a)).index=a,i._input=o,i._expandedIndex=u,i.transforms&&i.transforms.length)for(var p=ga(i,e,r,n),g=0;g<p.length;g++){var v=p[g],m=sa.supplyTraceDefaults(v,u,n,a);oa(m,v),v.uid=m.uid=i.uid+g,m.index=a,m._input=o,m._fullInput=i,m._expandedIndex=u,m._expandedInput=v,f(m)}else i._fullInput=i,i._expandedInput=i,f(i);I.traceIs(i,"carpetAxis")&&(h[i.carpet]=i),I.traceIs(i,"carpetDependent")&&d.push(a)}for(a=0;a<d.length;a++)if((i=e[d[a]]).visible){var y=h[i.carpet];i._carpet=y,y&&y.visible?(i.xaxis=y.xaxis,i.yaxis=y.yaxis):i.visible=!1}},sa.supplyAnimationDefaults=function(t){var e;t=t||{};var r={};function n(e,n){return oe.coerce(t||{},r,An,e,n)}if(n("mode"),n("direction"),n("fromcurrent"),Array.isArray(t.frame))for(r.frame=[],e=0;e<t.frame.length;e++)r.frame[e]=sa.supplyAnimationFrameDefaults(t.frame[e]||{});else r.frame=sa.supplyAnimationFrameDefaults(t.frame||{});if(Array.isArray(t.transition))for(r.transition=[],e=0;e<t.transition.length;e++)r.transition[e]=sa.supplyAnimationTransitionDefaults(t.transition[e]||{});else r.transition=sa.supplyAnimationTransitionDefaults(t.transition||{});return r},sa.supplyAnimationFrameDefaults=function(t){var e={};function r(r,n){return oe.coerce(t||{},e,An.frame,r,n)}return r("duration"),r("redraw"),e},sa.supplyAnimationTransitionDefaults=function(t){var e={};function r(r,n){return oe.coerce(t||{},e,An.transition,r,n)}return r("duration"),r("easing"),e},sa.supplyFrameDefaults=function(t){var e={};function r(r,n){return oe.coerce(t,e,Mn,r,n)}return r("group"),r("name"),r("traces"),r("baseframe"),r("data"),r("layout"),e},sa.supplyTraceDefaults=function(t,e,r,n){var a,i=r.colorway||$e.defaults,o={},l=i[e%i.length];function s(e,r){return oe.coerce(t,o,sa.attributes,e,r)}var u=s("visible");s("type"),s("uid"),s("name",r._traceWord+" "+n);var c=sa.getModule(o);if(o._module=c,c){var f=c.basePlotModule,h=f.attr,d=f.attributes;if(h&&d){var p=r._subplots,g="";if("gl2d"!==f.name||u){if(Array.isArray(h))for(a=0;a<h.length;a++){var v=h[a],m=oe.coerce(t,o,d,v);p[v]&&oe.pushUnique(p[v],m),g+=m}else g=oe.coerce(t,o,d,h);p[f.name]&&oe.pushUnique(p[f.name],g)}}}return u&&(s("customdata"),s("ids"),I.traceIs(o,"showLegend")&&(s("showlegend"),s("legendgroup")),I.getComponentMethod("fx","supplyDefaults")(t,o,l,r),c&&(c.supplyDefaults(t,o,l,r),oe.coerceHoverinfo(t,o,r)),I.traceIs(o,"noOpacity")||s("opacity"),I.traceIs(o,"notLegendIsolatable")&&(o.visible=!!o.visible),c&&c.selectPoints&&s("selectedpoints"),sa.supplyTransformDefaults(t,o,r)),o},sa.supplyTransformDefaults=function(t,e,r){var n=r._globalTransforms||[],a=r._transformModules||[];if(Array.isArray(t.transforms)||0!==n.length)for(var i=t.transforms||[],o=n.concat(i),l=e.transforms=[],s=0;s<o.length;s++){var u,c=o[s],f=c.type,h=ua[f],d=!(c._module&&c._module===h),p=h&&"function"==typeof h.transform;h||oe.warn("Unrecognized transform type "+f+"."),h&&h.supplyDefaults&&(d||p)?((u=h.supplyDefaults(c,e,r,t)).type=f,u._module=h,oe.pushUnique(a,h)):u=oe.extendFlat({},c),l.push(u)}},sa.supplyLayoutGlobalDefaults=function(t,e,r){function n(r,n){return oe.coerce(t,e,sa.layoutAttributes,r,n)}var a=oe.coerceFont(n,"font");n("title",e._dfltTitle.plot),oe.coerceFont(n,"titlefont",{family:a.family,size:Math.round(1.4*a.size),color:a.color}),n("autosize",!(t.width&&t.height)),n("width"),n("height"),n("margin.l"),n("margin.r"),n("margin.t"),n("margin.b"),n("margin.pad"),n("margin.autoexpand"),t.width&&t.height&&sa.sanitizeMargins(e),I.getComponentMethod("grid","sizeDefaults")(t,e),n("paper_bgcolor"),n("separators",r.decimal+r.thousands),n("hidesources"),n("colorway"),n("datarevision"),I.getComponentMethod("calendars","handleDefaults")(t,e,"calendar"),I.getComponentMethod("fx","supplyLayoutGlobalDefaults")(t,e,n)},sa.plotAutoSize=function(t,e,r){var n,i,o=t._context||{},l=o.frameMargins,s=oe.isPlotDiv(t);if(s&&t.emit("plotly_autosize"),o.fillFrame)n=window.innerWidth,i=window.innerHeight,document.body.style.overflow="hidden";else if(a(l)&&l>0){var u=function(t){var e,r={left:0,right:0,bottom:0,top:0};if(t)for(e in t)t.hasOwnProperty(e)&&(r.left+=t[e].left||0,r.right+=t[e].right||0,r.bottom+=t[e].bottom||0,r.top+=t[e].top||0);return r}(t._boundingBoxMargins),c=u.left+u.right,f=u.bottom+u.top,h=1-2*l,d=r._container&&r._container.node?r._container.node().getBoundingClientRect():{width:r.width,height:r.height};n=Math.round(h*(d.width-c)),i=Math.round(h*(d.height-f))}else{var p=s?window.getComputedStyle(t):{};n=parseFloat(p.width)||r.width,i=parseFloat(p.height)||r.height}var g=sa.layoutAttributes.width.min,v=sa.layoutAttributes.height.min;n<g&&(n=g),i<v&&(i=v);var m=!e.width&&Math.abs(r.width-n)>1,y=!e.height&&Math.abs(r.height-i)>1;(y||m)&&(m&&(r.width=n),y&&(r.height=i)),t._initialAutoSize||(t._initialAutoSize={width:n,height:i}),sa.sanitizeMargins(r)},sa.supplyLayoutModuleDefaults=function(t,e,r,n){var a,i,o,l=I.componentsRegistry,s=e._basePlotModules,u=I.subplotsRegistry.cartesian;for(a in l)(o=l[a]).includeBasePlot&&o.includeBasePlot(t,e);for(var c in s.length||s.push(u),e._has("cartesian")&&(I.getComponentMethod("grid","contentDefaults")(t,e),u.finalizeSubplots(t,e)),e._subplots)e._subplots[c].sort(oe.subplotSort);for(i=0;i<s.length;i++)(o=s[i]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,r);var f=e._modules;for(i=0;i<f.length;i++)(o=f[i]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,r);var h=e._transformModules;for(i=0;i<h.length;i++)(o=h[i]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,r,n);for(a in l)(o=l[a]).supplyLayoutDefaults&&o.supplyLayoutDefaults(t,e,r)},sa.purge=function(t){var e=t._fullLayout||{};void 0!==e._glcontainer&&(e._glcontainer.selectAll(".gl-canvas").remove(),e._glcontainer.remove(),e._glcanvas=null),void 0!==e._geocontainer&&e._geocontainer.remove(),e._modeBar&&e._modeBar.destroy(),t._transitionData&&(t._transitionData._interruptCallbacks&&(t._transitionData._interruptCallbacks.length=0),t._transitionData._animationRaf&&window.cancelAnimationFrame(t._transitionData._animationRaf)),oe.clearThrottle(),delete t.data,delete t.layout,delete t._fullData,delete t._fullLayout,delete t.calcdata,delete t.framework,delete t.empty,delete t.fid,delete t.undoqueue,delete t.undonum,delete t.autoplay,delete t.changed,delete t._promises,delete t._redrawTimer,delete t.firstscatter,delete t._hmlumcount,delete t._hmpixcount,delete t._transitionData,delete t._transitioning,delete t._initialAutoSize,delete t._transitioningWithDuration,delete t._dragging,delete t._dragged,delete t._hoverdata,delete t._snapshotInProgress,delete t._editing,delete t._replotPending,delete t._mouseDownTime,delete t._legendMouseDownTime,t.removeAllListeners&&t.removeAllListeners()},sa.style=function(t){var e,r=t._fullLayout._modules,n=[];for(e=0;e<r.length;e++){var a=r[e];a.style&&oe.pushUnique(n,a.style)}for(e=0;e<n.length;e++)n[e](t)},sa.sanitizeMargins=function(t){if(t&&t.margin){var e,r=t.width,n=t.height,a=t.margin,i=r-(a.l+a.r),o=n-(a.t+a.b);i<0&&(e=(r-1)/(a.l+a.r),a.l=Math.floor(e*a.l),a.r=Math.floor(e*a.r)),o<0&&(e=(n-1)/(a.t+a.b),a.t=Math.floor(e*a.t),a.b=Math.floor(e*a.b))}},sa.autoMargin=function(t,e,r){var n=t._fullLayout;if(n._pushmargin||(n._pushmargin={}),!1!==n.margin.autoexpand){if(r){var a=void 0===r.pad?12:r.pad;r.l+r.r>.5*n.width&&(r.l=r.r=0),r.b+r.t>.5*n.height&&(r.b=r.t=0),n._pushmargin[e]={l:{val:r.x,size:r.l+a},r:{val:r.x,size:r.r+a},b:{val:r.y,size:r.b+a},t:{val:r.y,size:r.t+a}}}else delete n._pushmargin[e];n._replotting||sa.doAutoMargin(t)}},sa.doAutoMargin=function(t){var e=t._fullLayout;e._size||(e._size={}),e._pushmargin||(e._pushmargin={});var r=e._size,n=JSON.stringify(r),i=Math.max(e.margin.l||0,0),o=Math.max(e.margin.r||0,0),l=Math.max(e.margin.t||0,0),s=Math.max(e.margin.b||0,0),u=e._pushmargin;if(!1!==e.margin.autoexpand)for(var c in u.base={l:{val:0,size:i},r:{val:1,size:o},t:{val:1,size:l},b:{val:0,size:s}},u){var f=u[c].l||{},h=u[c].b||{},d=f.val,p=f.size,g=h.val,v=h.size;for(var m in u){if(a(p)&&u[m].r){var y=u[m].r.val,x=u[m].r.size;if(y>d){var b=(p*y+(x-e.width)*d)/(y-d),_=(x*(1-d)+(p-e.width)*(1-y))/(y-d);b>=0&&_>=0&&b+_>i+o&&(i=b,o=_)}}if(a(v)&&u[m].t){var w=u[m].t.val,A=u[m].t.size;if(w>g){var M=(v*w+(A-e.height)*g)/(w-g),T=(A*(1-g)+(v-e.height)*(1-w))/(w-g);M>=0&&T>=0&&M+T>s+l&&(s=M,l=T)}}}}if(r.l=Math.round(i),r.r=Math.round(o),r.t=Math.round(l),r.b=Math.round(s),r.p=Math.round(e.margin.pad),r.w=Math.round(e.width)-r.l-r.r,r.h=Math.round(e.height)-r.t-r.b,!e._replotting&&"{}"!==n&&n!==JSON.stringify(e._size))return I.call("plot",t)},sa.graphJson=function(t,e,r,n,a){(a&&e&&!t._fullData||a&&!e&&!t._fullLayout)&&sa.supplyDefaults(t);var i=a?t._fullData:t.data,o=a?t._fullLayout:t.layout,l=(t._transitionData||{})._frames;function s(t){if("function"==typeof t)return null;if(oe.isPlainObject(t)){var e,n,a={};for(e in t)if("function"!=typeof t[e]&&-1===["_","["].indexOf(e.charAt(0))){if("keepdata"===r){if("src"===e.substr(e.length-3))continue}else if("keepstream"===r){if("string"==typeof(n=t[e+"src"])&&n.indexOf(":")>0&&!oe.isPlainObject(t.stream))continue}else if("keepall"!==r&&"string"==typeof(n=t[e+"src"])&&n.indexOf(":")>0)continue;a[e]=s(t[e])}return a}return Array.isArray(t)?t.map(s):oe.isJSDate(t)?oe.ms2DateTimeLocal(+t):t}var u={data:(i||[]).map(function(t){var r=s(t);return e&&delete r.fit,r})};return e||(u.layout=s(o)),t.framework&&t.framework.isPolar&&(u=t.framework.getConfig()),l&&(u.frames=s(l)),"object"===n?u:JSON.stringify(u)},sa.modifyFrames=function(t,e){var r,n,a,i=t._transitionData._frames,o=t._transitionData._frameHash;for(r=0;r<e.length;r++)switch((n=e[r]).type){case"replace":a=n.value;var l=(i[n.index]||{}).name,s=a.name;i[n.index]=o[s]=a,s!==l&&(delete o[l],o[s]=a);break;case"insert":o[(a=n.value).name]=a,i.splice(n.index,0,a);break;case"delete":delete o[(a=i[n.index]).name],i.splice(n.index,1)}return Promise.resolve()},sa.computeFrame=function(t,e){var r,n,a,i,o=t._transitionData._frameHash;if(!e)throw new Error("computeFrame must be given a string frame name");var l=o[e.toString()];if(!l)return!1;for(var s=[l],u=[l.name];l.baseframe&&(l=o[l.baseframe.toString()])&&-1===u.indexOf(l.name);)s.push(l),u.push(l.name);for(var c={};l=s.pop();)if(l.layout&&(c.layout=sa.extendLayout(c.layout,l.layout)),l.data){if(c.data||(c.data=[]),!(n=l.traces))for(n=[],r=0;r<l.data.length;r++)n[r]=r;for(c.traces||(c.traces=[]),r=0;r<l.data.length;r++)void 0!==(a=n[r])&&null!==a&&(-1===(i=c.traces.indexOf(a))&&(i=c.data.length,c.traces[i]=a),c.data[i]=sa.extendTrace(c.data[i],l.data[r]))}return c},sa.recomputeFrameHash=function(t){for(var e=t._transitionData._frameHash={},r=t._transitionData._frames,n=0;n<r.length;n++){var a=r[n];a&&a.name&&(e[a.name]=a)}},sa.extendObjectWithContainers=function(t,e,r){var n,a,i,o,l,s,u,c=oe.extendDeepNoArrays({},e||{}),f=oe.expandObjectPaths(c),h={};if(r&&r.length)for(i=0;i<r.length;i++)void 0===(a=(n=oe.nestedProperty(f,r[i])).get())?oe.nestedProperty(h,r[i]).set(null):(n.set(null),oe.nestedProperty(h,r[i]).set(a));if(t=oe.extendDeepNoArrays(t||{},f),r&&r.length)for(i=0;i<r.length;i++)if(s=oe.nestedProperty(h,r[i]).get()){for(u=(l=oe.nestedProperty(t,r[i])).get(),Array.isArray(u)||(u=[],l.set(u)),o=0;o<s.length;o++){var d=s[o];u[o]=null===d?null:sa.extendObjectWithContainers(u[o],d)}l.set(u)}return t},sa.dataArrayContainers=["transforms","dimensions"],sa.layoutArrayContainers=I.layoutArrayContainers,sa.extendTrace=function(t,e){return sa.extendObjectWithContainers(t,e,sa.dataArrayContainers)},sa.extendLayout=function(t,e){return sa.extendObjectWithContainers(t,e,sa.layoutArrayContainers)},sa.transition=function(t,e,r,n,a,i){var o,l,s=Array.isArray(e)?e.length:0,u=n.slice(0,s),c=[];var f=!1;for(o=0;o<u.length;o++){l=u[o];t._fullData[l]._module}var h=[sa.previousPromises,function(){if(t._transitionData)return t._transitioning=!1,function(t){var e=Promise.resolve();if(!t)return e;for(;t.length;)e=e.then(t.shift());return e}(t._transitionData._interruptCallbacks)},function(){var n;for(n=0;n<u.length;n++){var a=u[n],i=t._fullData[a]._module;i&&(i.animatable&&c.push(a),t.data[u[n]]=sa.extendTrace(t.data[u[n]],e[n]))}var o=oe.expandObjectPaths(oe.extendDeepNoArrays({},r)),l=/^[xy]axis[0-9]*$/;for(var s in o)l.test(s)&&delete o[s].range;return sa.extendLayout(t.layout,o),delete t.calcdata,sa.supplyDefaults(t),sa.doCalcdata(t),I.getComponentMethod("errorbars","calc")(t),Promise.resolve()},sa.rehover,function(){return t.emit("plotly_transitioning",[]),new Promise(function(e){t._transitioning=!0,i.duration>0&&(t._transitioningWithDuration=!0),t._transitionData._interruptCallbacks.push(function(){f=!0}),a.redraw&&t._transitionData._interruptCallbacks.push(function(){return I.call("redraw",t)}),t._transitionData._interruptCallbacks.push(function(){t.emit("plotly_transitioninterrupted",[])});var n,o,l=0,s=0;function u(){return l++,function(){var r;f||++s!==l||(r=e,t._transitionData&&(function(t){if(t)for(;t.length;)t.shift()}(t._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(a.redraw)return I.call("redraw",t)}).then(function(){t._transitioning=!1,t._transitioningWithDuration=!1,t.emit("plotly_transitioned",[])}).then(r)))}}var h=t._fullLayout._basePlotModules,d=!1;if(r)for(o=0;o<h.length;o++)if(h[o].transitionAxes){var p=oe.expandObjectPaths(r);d=h[o].transitionAxes(t,p,i,u)||d}for(d?(n=oe.extendFlat({},i)).duration=0:n=i,o=0;o<h.length;o++)h[o].plot(t,c,n,u);setTimeout(u())})}],d=oe.syncOrAsync(h,t);return d&&d.then||(d=Promise.resolve()),d.then(function(){return t})},sa.doCalcdata=function(t,e){var r,n,a,i,o=De.list(t),l=t._fullData,s=t._fullLayout,u=new Array(l.length),c=(t.calcdata||[]).slice(0);for(t.calcdata=u,t.firstscatter=!0,s._numBoxes=0,s._numViolins=0,s._violinScaleGroupStats={},t._hmpixcount=0,t._hmlumcount=0,s._piecolormap={},s._piecolorway=null,s._piedefaultcolorcount=0,a=0;a<l.length;a++)Array.isArray(e)&&-1===e.indexOf(a)&&(u[a]=c[a]);for(a=0;a<l.length;a++)(r=l[a])._arrayAttrs=zn.findArrayAttributes(r);var f=s._subplots.polar||[];for(a=0;a<f.length;a++)o.push(s[f[a]].radialaxis,s[f[a]].angularaxis);va(o);var h=!1;for(a=0;a<l.length;a++)if(!0===(r=l[a]).visible&&r.transforms)for((n=r._module)&&n.calc&&n.calc(t,r),i=0;i<r.transforms.length;i++){var d=r.transforms[i];(n=ua[d.type])&&n.calcTransform&&(r._hasCalcTransform=!0,h=!0,n.calcTransform(t,r,d))}function p(e,a){if(r=l[e],!!(n=r._module).isContainer===a){var o=[];if(!0===r.visible){var s=r.transforms||[];for(i=s.length-1;i>=0;i--)if(s[i].enabled){r._indexToPoints=s[i]._indexToPoints;break}n&&n.calc&&(o=n.calc(t,r))}Array.isArray(o)&&o[0]||(o=[{x:aa,y:aa}]),o[0].t||(o[0].t={}),o[0].trace=r,u[e]=o}}for(h&&va(o),a=0;a<l.length;a++)p(a,!0);for(a=0;a<l.length;a++)p(a,!1);I.getComponentMethod("fx","calc")(t)},sa.rehover=function(t){t._fullLayout._rehover&&t._fullLayout._rehover()},sa.generalUpdatePerTraceModule=function(t,e,r,n){var a,i=e.traceHash,o={};for(a=0;a<r.length;a++){var l=r[a],s=l[0].trace;s.visible&&(o[s.type]=o[s.type]||[],o[s.type].push(l))}for(var u in i)if(!o[u]){var c=i[u][0];c[0].trace.visible=!1,o[u]=[c]}for(var f in o){var h=o[f];h[0][0].trace._module.plot(t,e,oe.filterVisible(h),n)}e.traceHash=o};var ma={draw:function(t,e,r){var i,o=r.propContainer,l=r.propName,s=r.placeholder,u=r.traceIndex,c=r.avoid||{},f=r.attributes,h=r.transform,d=r.containerGroup,p=t._fullLayout,v=o.titlefont||{},m=v.family,y=v.size,x=v.color,b=1,_=!1,w=(o.title||"").trim();"title"===l?i="titleText":-1!==l.indexOf("axis")?i="axisTitleText":l.indexOf(!0)&&(i="colorbarTitleText");var A=t._context.edits[i];""===w?b=0:w.replace(ya," % ")===s.replace(ya," % ")&&(b=.2,_=!0,A||(w=""));var M=w||A;d||(d=oe.ensureSingle(p._infolayer,"g","g-"+e));var T=d.selectAll("text").data(M?[0]:[]);if(T.enter().append("text"),T.text(w).attr("class",e),T.exit().remove(),!M)return d;function k(t){oe.syncOrAsync([E,C],t)}function E(e){var r;return h?(r="",h.rotate&&(r+="rotate("+[h.rotate,f.x,f.y]+")"),h.offset&&(r+="translate(0, "+h.offset+")")):r=null,e.attr("transform",r),e.style({"font-family":m,"font-size":n.round(y,2)+"px",fill:$e.rgb(x),opacity:b*$e.opacity(x),"font-weight":na.fontWeight}).attr(f).call(Mr.convertToTspans,t),na.previousPromises(t)}function C(t){var e=n.select(t.node().parentNode);if(c&&c.selection&&c.side&&w){e.attr("transform",null);var r=0,i={left:"right",right:"left",top:"bottom",bottom:"top"}[c.side],o=-1!==["left","top"].indexOf(c.side)?-1:1,l=a(c.pad)?c.pad:2,s=Jr.bBox(e.node()),u={left:0,top:0,right:p.width,bottom:p.height},f=c.maxShift||(u[c.side]-s[c.side])*("left"===c.side||"top"===c.side?-1:1);if(f<0)r=f;else{var h=c.offsetLeft||0,d=c.offsetTop||0;s.left-=h,s.right-=h,s.top-=d,s.bottom-=d,c.selection.each(function(){var t=Jr.bBox(this);oe.bBoxIntersect(s,t,l)&&(r=Math.max(r,o*(t[c.side]-s[i])+l))}),r=Math.min(f,r)}if(r>0||f<0){var g={left:[-r,0],right:[r,0],top:[0,-r],bottom:[0,r]}[c.side];e.attr("transform","translate("+g+")")}}}T.call(k),A&&(w?T.on(".opacity",null):(b=0,_=!0,T.text(s).on("mouseover.opacity",function(){n.select(this).transition().duration(g.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){n.select(this).transition().duration(g.HIDE_PLACEHOLDER).style("opacity",0)})),T.call(Mr.makeEditable,{gd:t}).on("edit",function(e){void 0!==u?I.call("restyle",t,l,e,u):I.call("relayout",t,l,e)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(k)}).on("input",function(t){this.text(t||" ").call(Mr.positionText,f.x,f.y)}));return T.classed("js-placeholder",_),d}},ya=/ [XY][0-9]* /;var xa=i.FP_SAFE,ba=Ma,_a=Ta,wa=function(t){t._length||t.setScale();var e,r=t._min&&t._max&&t._min.length&&t._max.length;t.autorange&&r&&(t.range=Ma(t),t._r=t.range.slice(),t._rl=oe.simpleMap(t._r,t.r2l),(e=t._input).range=t.range.slice(),e.autorange=t.autorange);if(t._anchorAxis&&t._anchorAxis.rangeslider){var n=t._anchorAxis.rangeslider[t._name];n&&"auto"===n.rangemode&&(n.range=r?Ma(t):t._rangeInitial?t._rangeInitial.slice():t.range.slice()),(e=t._anchorAxis._input).rangeslider[t._name]=oe.extendFlat({},n)}},Aa=function(t,e,r){if(!function(t){return t.autorange||t._rangesliderAutorange}(t)||!e)return;t._min||(t._min=[]);t._max||(t._max=[]);r||(r={});t._m||t.setScale();var n,i,o,l,s,u,c,f,h,d,p,g,v=e.length,m=r.padded||!1,y=r.tozero&&("linear"===t.type||"-"===t.type),x="log"===t.type,b=!1;function _(t){if(Array.isArray(t))return b=!0,function(e){return Math.max(Number(t[e]||0),0)};var e=Math.max(Number(t||0),0);return function(){return e}}var w=_((t._m>0?r.ppadplus:r.ppadminus)||r.ppad||0),A=_((t._m>0?r.ppadminus:r.ppadplus)||r.ppad||0),M=_(r.vpadplus||r.vpad),T=_(r.vpadminus||r.vpad);if(!b){if(p=1/0,g=-1/0,x)for(n=0;n<v;n++)(l=e[n])<p&&l>0&&(p=l),l>g&&l<xa&&(g=l);else for(n=0;n<v;n++)(l=e[n])<p&&l>-xa&&(p=l),l>g&&l<xa&&(g=l);e=[p,g],v=2}function k(r){if(s=e[r],a(s))for(f=w(r),h=A(r),p=s-T(r),g=s+M(r),x&&p<g/10&&(p=g/10),u=t.c2l(p),c=t.c2l(g),y&&(u=Math.min(0,u),c=Math.max(0,c)),o=0;o<2;o++){var n=o?c:u;if(ka(n)){var v=o?t._max:t._min,b=o?f:h,_=o?Ca:Ea;for(d=!0,i=0;i<v.length&&d;i++){if(l=v[i],_(l.val,n)&&l.pad>=b&&(l.extrapad||!m)){d=!1;break}_(n,l.val)&&l.pad<=b&&(m||!l.extrapad)&&(v.splice(i,1),i--)}if(d){var k=y&&0===n;v.push({val:n,pad:k?0:b,extrapad:!k&&m})}}}}var E=Math.min(6,v);for(n=0;n<E;n++)k(n);for(n=v-1;n>=E;n--)k(n)};function Ma(t){var e,r,n,a,i,o,l,s,u=[],c=t._min[0].val,f=t._max[0].val,h=0,d=!1,p=Ta(t);for(e=1;e<t._min.length&&c===f;e++)c=Math.min(c,t._min[e].val);for(e=1;e<t._max.length&&c===f;e++)f=Math.max(f,t._max[e].val);if(t.range){var g=oe.simpleMap(t.range,t.r2l);d=g[1]<g[0]}for("reversed"===t.autorange&&(d=!0,t.autorange=!0),e=0;e<t._min.length;e++)for(n=t._min[e],r=0;r<t._max.length;r++)s=(a=t._max[r]).val-n.val,l=t._length-p(n)-p(a),s>0&&l>0&&s/l>h&&(i=n,o=a,h=s/l);if(c===f){var v=c-1,m=c+1;u="tozero"===t.rangemode?c<0?[v,0]:[0,m]:"nonnegative"===t.rangemode?[Math.max(0,v),Math.max(0,m)]:[v,m]}else h&&("linear"!==t.type&&"-"!==t.type||("tozero"===t.rangemode?(i.val>=0&&(i={val:0,pad:0}),o.val<=0&&(o={val:0,pad:0})):"nonnegative"===t.rangemode&&(i.val-h*p(i)<0&&(i={val:0,pad:0}),o.val<0&&(o={val:1,pad:0})),h=(o.val-i.val)/(t._length-p(i)-p(o))),u=[i.val-h*p(i),o.val+h*p(o)]);return u[0]===u[1]&&("tozero"===t.rangemode?u=u[0]<0?[u[0],0]:u[0]>0?[0,u[0]]:[0,1]:(u=[u[0]-1,u[0]+1],"nonnegative"===t.rangemode&&(u[0]=Math.max(0,u[0])))),d&&u.reverse(),oe.simpleMap(u,t.l2r||Number)}function Ta(t){var e=t._length/20;return"domain"===t.constrain&&t._inputDomain&&(e*=(t._inputDomain[1]-t._inputDomain[0])/(t.domain[1]-t.domain[0])),function(t){return t.pad+(t.extrapad?e:0)}}function ka(t){return a(t)&&Math.abs(t)<xa}function Ea(t,e){return t<=e}function Ca(t,e){return t>=e}var Sa=i.BADNUM,La=function(t,e){return function(t,e){for(var r,n=0,i=0,o=Math.max(1,(t.length-1)/1e3),l=0;l<t.length;l+=o)r=t[Math.round(l)],oe.isDateTime(r,e)&&(n+=1),a(r)&&(i+=1);return n>2*i}(t,e)?"date":function(t){for(var e,r=Math.max(1,(t.length-1)/1e3),n=0,a=0,i=0;i<t.length;i+=r)e=t[Math.round(i)],oe.cleanNumber(e)!==Sa?n++:"string"==typeof e&&""!==e&&"None"!==e&&a++;return a>2*n}(t)?"category":function(t){if(!t)return!1;for(var e=0;e<t.length;e++)if(a(t[e]))return!0;return!1}(t)?"linear":"-"};var Oa=oe.cleanNumber,Da=oe.ms2DateTime,Ra=oe.dateTime2ms,Pa=oe.ensureNumber,Ia=i.FP_SAFE,Ba=i.BADNUM;function Fa(t){return Math.pow(10,t)}var za=function(t,e){e=e||{};var r=(t._id||"x").charAt(0),i=10;function o(e,r){if(e>0)return Math.log(e)/Math.LN10;if(e<=0&&r&&t.range&&2===t.range.length){var n=t.range[0],a=t.range[1];return.5*(n+a-3*i*Math.abs(n-a))}return Ba}function l(e,r,n){var i=Ra(e,n||t.calendar);if(i===Ba){if(!a(e))return Ba;i=Ra(new Date(+e))}return i}function s(e,r,n){return Da(e,r,n||t.calendar)}function u(e){return t._categories[Math.round(e)]}function c(e){if(t._categoriesMap){var r=t._categoriesMap[e];if(void 0!==r)return r}if(a(e))return+e}function f(e){return a(e)?n.round(t._b+t._m*e,2):Ba}function h(e){return(e-t._b)/t._m}t.c2l="log"===t.type?o:Pa,t.l2c="log"===t.type?Fa:Pa,t.l2p=f,t.p2l=h,t.c2p="log"===t.type?function(t,e){return f(o(t,e))}:f,t.p2c="log"===t.type?function(t){return Fa(h(t))}:h,-1!==["linear","-"].indexOf(t.type)?(t.d2r=t.r2d=t.d2c=t.r2c=t.d2l=t.r2l=Oa,t.c2d=t.c2r=t.l2d=t.l2r=Pa,t.d2p=t.r2p=function(e){return t.l2p(Oa(e))},t.p2d=t.p2r=h,t.cleanPos=Pa):"log"===t.type?(t.d2r=t.d2l=function(t,e){return o(Oa(t),e)},t.r2d=t.r2c=function(t){return Fa(Oa(t))},t.d2c=t.r2l=Oa,t.c2d=t.l2r=Pa,t.c2r=o,t.l2d=Fa,t.d2p=function(e,r){return t.l2p(t.d2r(e,r))},t.p2d=function(t){return Fa(h(t))},t.r2p=function(e){return t.l2p(Oa(e))},t.p2r=h,t.cleanPos=Pa):"date"===t.type?(t.d2r=t.r2d=oe.identity,t.d2c=t.r2c=t.d2l=t.r2l=l,t.c2d=t.c2r=t.l2d=t.l2r=s,t.d2p=t.r2p=function(e,r,n){return t.l2p(l(e,0,n))},t.p2d=t.p2r=function(t,e,r){return s(h(t),e,r)},t.cleanPos=function(e){return oe.cleanDate(e,Ba,t.calendar)}):"category"===t.type&&(t.d2c=t.d2l=function(e){if(null!==e&&void 0!==e){if(void 0===t._categoriesMap&&(t._categoriesMap={}),void 0!==t._categoriesMap[e])return t._categoriesMap[e];t._categories.push(e);var r=t._categories.length-1;return t._categoriesMap[e]=r,r}return Ba},t.r2d=t.c2d=t.l2d=u,t.d2r=t.d2l_noadd=c,t.r2c=function(e){var r=c(e);return void 0!==r?r:t.fraction2r(.5)},t.l2r=t.c2r=Pa,t.r2l=c,t.d2p=function(e){return t.l2p(t.r2c(e))},t.p2d=function(t){return u(h(t))},t.r2p=t.d2p,t.p2r=h,t.cleanPos=function(t){return"string"==typeof t&&""!==t?t:Pa(t)}),t.fraction2r=function(e){var r=t.r2l(t.range[0]),n=t.r2l(t.range[1]);return t.l2r(r+e*(n-r))},t.r2fraction=function(e){var r=t.r2l(t.range[0]),n=t.r2l(t.range[1]);return(t.r2l(e)-r)/(n-r)},t.cleanRange=function(e,n){n||(n={}),e||(e="range");var i,o,l=oe.nestedProperty(t,e).get();if(o=(o="date"===t.type?oe.dfltRange(t.calendar):"y"===r?Oe.DFLTRANGEY:n.dfltRange||Oe.DFLTRANGEX).slice(),l&&2===l.length)for("date"===t.type&&(l[0]=oe.cleanDate(l[0],Ba,t.calendar),l[1]=oe.cleanDate(l[1],Ba,t.calendar)),i=0;i<2;i++)if("date"===t.type){if(!oe.isDateTime(l[i],t.calendar)){t[e]=o;break}if(t.r2l(l[0])===t.r2l(l[1])){var s=oe.constrain(t.r2l(l[0]),oe.MIN_MS+1e3,oe.MAX_MS-1e3);l[0]=t.l2r(s-1e3),l[1]=t.l2r(s+1e3);break}}else{if(!a(l[i])){if(!a(l[1-i])){t[e]=o;break}l[i]=l[1-i]*(i?10:.1)}if(l[i]<-Ia?l[i]=-Ia:l[i]>Ia&&(l[i]=Ia),l[0]===l[1]){var u=Math.max(1,Math.abs(1e-6*l[0]));l[0]-=u,l[1]+=u}}else oe.nestedProperty(t,e).set(o)},t.setScale=function(n){var a=e._size;if(t._categories||(t._categories=[]),t._categoriesMap||(t._categoriesMap={}),t.overlaying){var i=De.getFromId({_fullLayout:e},t.overlaying);t.domain=i.domain}var o=n&&t._r?"_r":"range",l=t.calendar;t.cleanRange(o);var s=t.r2l(t[o][0],l),u=t.r2l(t[o][1],l);if("y"===r?(t._offset=a.t+(1-t.domain[1])*a.h,t._length=a.h*(t.domain[1]-t.domain[0]),t._m=t._length/(s-u),t._b=-t._m*u):(t._offset=a.l+t.domain[0]*a.w,t._length=a.w*(t.domain[1]-t.domain[0]),t._m=t._length/(u-s),t._b=-t._m*s),!isFinite(t._m)||!isFinite(t._b))throw e._replotting=!1,new Error("Something went wrong with axis scaling")},t.makeCalcdata=function(e,r){var n,a,i,o,l=t.type,s="date"===l&&e[r+"calendar"];if(r in e){if(n=e[r],o=e._length||n.length,oe.isTypedArray(n)&&("linear"===l||"log"===l)){if(o===n.length)return n;if(n.subarray)return n.subarray(0,o)}for(a=new Array(o),i=0;i<o;i++)a[i]=t.d2c(n[i],0,s)}else{var u=r+"0"in e?t.d2c(e[r+"0"],0,s):0,c=e["d"+r]?Number(e["d"+r]):1;for(n=e[{x:"y",y:"x"}[r]],o=e._length||n.length,a=new Array(o),i=0;i<o;i++)a[i]=u+i*c}return a},t.isValidRange=function(e){return Array.isArray(e)&&2===e.length&&a(t.r2l(e[0]))&&a(t.r2l(e[1]))},t.isPtWithinRange=function(e,n){var a=t.c2l(e[r],null,n),i=t.r2l(t.range[0]),o=t.r2l(t.range[1]);return i<o?i<=a&&a<=o:o<=a&&a<=i},t.clearCalc=function(){t._min=[],t._max=[],t._categories=(t._initialCategories||[]).slice(),t._categoriesMap={};for(var e=0;e<t._categories.length;e++)t._categoriesMap[t._categories[e]]=e};var d=e._d3locale;"date"===t.type&&(t._dateFormat=d?d.timeFormat.utc:n.time.format.utc,t._extraFormat=e._extraFormat),t._separators=e.separators,t._numFormat=d?d.numberFormat:n.format,delete t._minDtick,delete t._forceTick0},Na={},ja=i.ONEAVGYEAR,Ua=i.ONEAVGMONTH,Va=i.ONEDAY,Ha=i.ONEHOUR,qa=i.ONEMIN,Ga=i.ONESEC,Xa=i.MINUS_SIGN,Ya=i.BADNUM,Wa=wr.MID_SHIFT,Za=wr.LINE_SPACING,Ja=Na={};Ja.setConvert=za,Ja.id2name=De.id2name,Ja.name2id=De.name2id,Ja.cleanId=De.cleanId,Ja.list=De.list,Ja.listIds=De.listIds,Ja.getFromId=De.getFromId,Ja.getFromTrace=De.getFromTrace,Ja.expand=Aa,Ja.getAutoRange=ba,Ja.coerceRef=function(t,e,r,n,a,i){var o=n.charAt(n.length-1),l=r._fullLayout._subplots[o+"axis"],s=n+"ref",u={};return a||(a=l[0]||i),i||(i=a),u[s]={valType:"enumerated",values:l.concat(i?[i]:[]),dflt:a},oe.coerce(t,e,u,s)},Ja.coercePosition=function(t,e,r,n,a,i){var o,l;if("paper"===n||"pixel"===n)o=oe.ensureNumber,l=r(a,i);else{var s=Ja.getFromId(e,n);l=r(a,i=s.fraction2r(i)),o=s.cleanPos}t[a]=o(l)},Ja.cleanPosition=function(t,e,r){return("paper"===r||"pixel"===r?oe.ensureNumber:Ja.getFromId(e,r).cleanPos)(t)};var Qa=Ja.getDataConversions=function(t,e,r,n){var a,i="x"===r||"y"===r||"z"===r?r:n;if(Array.isArray(i)){if(a={type:La(n),_categories:[]},Ja.setConvert(a),"category"===a.type)for(var o=0;o<n.length;o++)a.d2c(n[o])}else a=Ja.getFromTrace(t,e,i);return a?{d2c:a.d2c,c2d:a.c2d}:"ids"===i?{d2c:Ka,c2d:Ka}:{d2c:$a,c2d:$a}};function $a(t){return+t}function Ka(t){return String(t)}Ja.getDataToCoordFunc=function(t,e,r,n){return Qa(t,e,r,n).d2c},Ja.counterLetter=function(t){var e=t.charAt(0);return"x"===e?"y":"y"===e?"x":void 0},Ja.minDtick=function(t,e,r,n){-1===["log","category"].indexOf(t.type)&&n?void 0===t._minDtick?(t._minDtick=e,t._forceTick0=r):t._minDtick&&((t._minDtick/e+1e-6)%1<2e-6&&((r-t._forceTick0)/e%1+1.000001)%1<2e-6?(t._minDtick=e,t._forceTick0=r):((e/t._minDtick+1e-6)%1>2e-6||((r-t._forceTick0)/t._minDtick%1+1.000001)%1>2e-6)&&(t._minDtick=0)):t._minDtick=0},Ja.saveRangeInitial=function(t,e){for(var r=Ja.list(t,"",!0),n=!1,a=0;a<r.length;a++){var i=r[a],o=void 0===i._rangeInitial,l=o||!(i.range[0]===i._rangeInitial[0]&&i.range[1]===i._rangeInitial[1]);(o&&!1===i.autorange||e&&l)&&(i._rangeInitial=i.range.slice(),n=!0)}return n},Ja.saveShowSpikeInitial=function(t,e){for(var r=Ja.list(t,"",!0),n=!1,a="on",i=0;i<r.length;i++){var o=r[i],l=void 0===o._showSpikeInitial,s=l||!(o.showspikes===o._showspikes);(l||e&&s)&&(o._showSpikeInitial=o.showspikes,n=!0),"on"!==a||o.showspikes||(a="off")}return t._fullLayout._cartesianSpikesEnabled=a,n},Ja.autoBin=function(t,e,r,n,i){var o,l,s=oe.aggNums(Math.min,null,t),u=oe.aggNums(Math.max,null,t);if(i||(i=e.calendar),"category"===e.type)return{start:s-.5,end:u+.5,size:1,_dataSpan:u-s};if(r)o=(u-s)/r;else{var c=oe.distinctVals(t),f=Math.pow(10,Math.floor(Math.log(c.minDiff)/Math.LN10)),h=f*oe.roundUp(c.minDiff/f,[.9,1.9,4.9,9.9],!0);o=Math.max(h,2*oe.stdev(t)/Math.pow(t.length,n?.25:.4)),a(o)||(o=1)}l="log"===e.type?{type:"linear",range:[s,u]}:{type:e.type,range:oe.simpleMap([s,u],e.c2r,0,i),calendar:i},Ja.setConvert(l),Ja.autoTicks(l,o);var d,p=Ja.tickIncrement(Ja.tickFirst(l),l.dtick,"reverse",i);if("number"==typeof l.dtick)d=(p=function(t,e,r,n,i){var o=0,l=0,s=0,u=0;function c(e){return(1+100*(e-t)/r.dtick)%100<2}for(var f=0;f<e.length;f++)e[f]%1==0?s++:a(e[f])||u++,c(e[f])&&o++,c(e[f]+r.dtick/2)&&l++;var h=e.length-u;if(s===h&&"date"!==r.type)r.dtick<1?t=n-.5*r.dtick:(t-=.5)+r.dtick<n&&(t+=r.dtick);else if(l<.1*h&&(o>.3*h||c(n)||c(i))){var d=r.dtick/2;t+=t+d<n?d:-d}return t}(p,t,l,s,u))+(1+Math.floor((u-p)/l.dtick))*l.dtick;else for("M"===l.dtick.charAt(0)&&(p=function(t,e,r,n,a){var i=oe.findExactDates(e,a);if(i.exactDays>.8){var o=Number(r.substr(1));i.exactYears>.8&&o%12==0?t=Ja.tickIncrement(t,"M6","reverse")+1.5*Va:i.exactMonths>.8?t=Ja.tickIncrement(t,"M1","reverse")+15.5*Va:t-=Va/2;var l=Ja.tickIncrement(t,r);if(l<=n)return l}return t}(p,t,l.dtick,s,i)),d=p,0;d<=u;)d=Ja.tickIncrement(d,l.dtick,!1,i),0;return{start:e.c2r(p,0,i),end:e.c2r(d,0,i),size:l.dtick,_dataSpan:u-s}},Ja.prepTicks=function(t){var e=oe.simpleMap(t.range,t.r2l);if("auto"===t.tickmode||!t.dtick){var r,n=t.nticks;n||("category"===t.type?(r=t.tickfont?1.2*(t.tickfont.size||12):15,n=t._length/r):(r="y"===t._id.charAt(0)?40:80,n=oe.constrain(t._length/r,4,9)+1),"radialaxis"===t._name&&(n*=2)),"array"===t.tickmode&&(n*=100),Ja.autoTicks(t,Math.abs(e[1]-e[0])/n),t._minDtick>0&&t.dtick<2*t._minDtick&&(t.dtick=t._minDtick,t.tick0=t.l2r(t._forceTick0))}t.tick0||(t.tick0="date"===t.type?"2000-01-01":0),si(t)},Ja.calcTicks=function(t){Ja.prepTicks(t);var e=oe.simpleMap(t.range,t.r2l);if("array"===t.tickmode)return function(t){var e,r,n=t.tickvals,a=t.ticktext,i=new Array(n.length),o=oe.simpleMap(t.range,t.r2l),l=1.0001*o[0]-1e-4*o[1],s=1.0001*o[1]-1e-4*o[0],u=Math.min(l,s),c=Math.max(l,s),f=0;Array.isArray(a)||(a=[]);var h="category"===t.type?t.d2l_noadd:t.d2l;"log"===t.type&&"L"!==String(t.dtick).charAt(0)&&(t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1));for(r=0;r<n.length;r++)(e=h(n[r]))>u&&e<c&&(void 0===a[r]?i[f]=Ja.tickText(t,e):i[f]=ui(t,e,String(a[r])),f++);f<n.length&&i.splice(f,n.length-f);return i}(t);t._tmin=Ja.tickFirst(t);var r=1.0001*e[0]-1e-4*e[1],n=1.0001*e[1]-1e-4*e[0],a=e[1]<e[0];if(t._tmin<r!==a)return[];var i=[];"category"===t.type&&(n=a?Math.max(-.5,n):Math.min(t._categories.length-.5,n));for(var o=null,l=Math.max(1e3,t._length||0),s=t._tmin;(a?s>=n:s<=n)&&!(i.length>l||s===o);s=Ja.tickIncrement(s,t.dtick,a,t.calendar))o=s,i.push(s);"angular"===t._id&&360===Math.abs(e[1]-e[0])&&i.pop(),t._tmax=i[i.length-1],t._prevDateHead="",t._inCalcTicks=!0;for(var u=new Array(i.length),c=0;c<i.length;c++)u[c]=Ja.tickText(t,i[c]);return t._inCalcTicks=!1,u};var ti=[2,5,10],ei=[1,2,3,6,12],ri=[1,2,5,10,15,30],ni=[1,2,3,7,14],ai=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],ii=[-.301,0,.301,.699,1],oi=[15,30,45,90,180];function li(t,e,r){return e*oe.roundUp(t/e,r)}function si(t){var e=t.dtick;if(t._tickexponent=0,a(e)||"string"==typeof e||(e=1),"category"===t.type&&(t._tickround=null),"date"===t.type){var r=t.r2l(t.tick0),n=t.l2r(r).replace(/(^-|i)/g,""),i=n.length;if("M"===String(e).charAt(0))i>10||"01-01"!==n.substr(5)?t._tickround="d":t._tickround=+e.substr(1)%12==0?"y":"m";else if(e>=Va&&i<=10||e>=15*Va)t._tickround="d";else if(e>=qa&&i<=16||e>=Ha)t._tickround="M";else if(e>=Ga&&i<=19||e>=qa)t._tickround="S";else{var o=t.l2r(r+e).replace(/^-/,"").length;t._tickround=Math.max(i,o)-20}}else if(a(e)||"L"===e.charAt(0)){var l=t.range.map(t.r2d||Number);a(e)||(e=Number(e.substr(1))),t._tickround=2-Math.floor(Math.log(e)/Math.LN10+.01);var s=Math.max(Math.abs(l[0]),Math.abs(l[1])),u=Math.floor(Math.log(s)/Math.LN10+.01);Math.abs(u)>3&&(fi(t.exponentformat)&&!hi(u)?t._tickexponent=3*Math.round((u-1)/3):t._tickexponent=u)}else t._tickround=null}function ui(t,e,r){var n=t.tickfont||{};return{x:e,dx:0,dy:0,text:r||"",fontSize:n.size,font:n.family,fontColor:n.color}}Ja.autoTicks=function(t,e){var r;function n(t){return Math.pow(t,Math.floor(Math.log(e)/Math.LN10))}if("date"===t.type){t.tick0=oe.dateTick0(t.calendar);var i=2*e;i>ja?(e/=ja,r=n(10),t.dtick="M"+12*li(e,r,ti)):i>Ua?(e/=Ua,t.dtick="M"+li(e,1,ei)):i>Va?(t.dtick=li(e,Va,ni),t.tick0=oe.dateTick0(t.calendar,!0)):i>Ha?t.dtick=li(e,Ha,ei):i>qa?t.dtick=li(e,qa,ri):i>Ga?t.dtick=li(e,Ga,ri):(r=n(10),t.dtick=li(e,r,ti))}else if("log"===t.type){t.tick0=0;var o=oe.simpleMap(t.range,t.r2l);if(e>.7)t.dtick=Math.ceil(e);else if(Math.abs(o[1]-o[0])<1){var l=1.5*Math.abs((o[1]-o[0])/e);e=Math.abs(Math.pow(10,o[1])-Math.pow(10,o[0]))/l,r=n(10),t.dtick="L"+li(e,r,ti)}else t.dtick=e>.3?"D2":"D1"}else"category"===t.type?(t.tick0=0,t.dtick=Math.ceil(Math.max(e,1))):"angular"===t._id?(t.tick0=0,r=1,t.dtick=li(e,r,oi)):(t.tick0=0,r=n(10),t.dtick=li(e,r,ti));if(0===t.dtick&&(t.dtick=1),!a(t.dtick)&&"string"!=typeof t.dtick){var s=t.dtick;throw t.dtick=1,"ax.dtick error: "+String(s)}},Ja.tickIncrement=function(t,e,r,i){var o=r?-1:1;if(a(e))return t+o*e;var l=e.charAt(0),s=o*Number(e.substr(1));if("M"===l)return oe.incrementMonth(t,s,i);if("L"===l)return Math.log(Math.pow(10,t)+s)/Math.LN10;if("D"===l){var u="D2"===e?ii:ai,c=t+.01*o,f=oe.roundUp(oe.mod(c,1),u,r);return Math.floor(c)+Math.log(n.round(Math.pow(10,f),1))/Math.LN10}throw"unrecognized dtick "+String(e)},Ja.tickFirst=function(t){var e=t.r2l||Number,r=oe.simpleMap(t.range,e),i=r[1]<r[0],o=i?Math.floor:Math.ceil,l=1.0001*r[0]-1e-4*r[1],s=t.dtick,u=e(t.tick0);if(a(s)){var c=o((l-u)/s)*s+u;return"category"===t.type&&(c=oe.constrain(c,0,t._categories.length-1)),c}var f=s.charAt(0),h=Number(s.substr(1));if("M"===f){for(var d,p,g,v=0,m=u;v<10;){if(((d=Ja.tickIncrement(m,s,i,t.calendar))-l)*(m-l)<=0)return i?Math.min(m,d):Math.max(m,d);p=(l-(m+d)/2)/(d-m),g=f+(Math.abs(Math.round(p))||1)*h,m=Ja.tickIncrement(m,g,p<0?!i:i,t.calendar),v++}return oe.error("tickFirst did not converge",t),m}if("L"===f)return Math.log(o((Math.pow(10,l)-u)/h)*h+u)/Math.LN10;if("D"===f){var y="D2"===s?ii:ai,x=oe.roundUp(oe.mod(l,1),y,i);return Math.floor(l)+Math.log(n.round(Math.pow(10,x),1))/Math.LN10}throw"unrecognized dtick "+String(s)},Ja.tickText=function(t,e,r){var n,i,o=ui(t,e),l="array"===t.tickmode,s=r||l,u="category"===t.type?t.d2l_noadd:t.d2l;if(l&&Array.isArray(t.ticktext)){var c=oe.simpleMap(t.range,t.r2l),f=Math.abs(c[1]-c[0])/1e4;for(i=0;i<t.ticktext.length&&!(Math.abs(e-u(t.tickvals[i]))<f);i++);if(i<t.ticktext.length)return o.text=String(t.ticktext[i]),o}function h(n){var a;return void 0===n||(r?"none"===n:(a={first:t._tmin,last:t._tmax}[n],"all"!==n&&e!==a))}return n=r?"never":"none"!==t.exponentformat&&h(t.showexponent)?"hide":"","date"===t.type?function(t,e,r,n){var i=t._tickround,o=r&&t.hoverformat||Ja.getTickFormat(t);n&&(i=a(i)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[i]);var l,s=oe.formatDate(e.x,o,i,t._dateFormat,t.calendar,t._extraFormat),u=s.indexOf("\n");-1!==u&&(l=s.substr(u+1),s=s.substr(0,u));n&&("00:00:00"===s||"00:00"===s?(s=l,l=""):8===s.length&&(s=s.replace(/:00$/,"")));l&&(r?"d"===i?s+=", "+l:s=l+(s?", "+s:""):t._inCalcTicks&&l===t._prevDateHead||(s+="<br>"+l,t._prevDateHead=l));e.text=s}(t,o,r,s):"log"===t.type?function(t,e,r,n,i){var o=t.dtick,l=e.x,s=t.tickformat;"never"===i&&(i="");!n||"string"==typeof o&&"L"===o.charAt(0)||(o="L3");if(s||"string"==typeof o&&"L"===o.charAt(0))e.text=di(Math.pow(10,l),t,i,n);else if(a(o)||"D"===o.charAt(0)&&oe.mod(l+.01,1)<.1){var u=Math.round(l);-1!==["e","E","power"].indexOf(t.exponentformat)||fi(t.exponentformat)&&hi(u)?(e.text=0===u?1:1===u?"10":u>1?"10<sup>"+u+"</sup>":"10<sup>"+Xa+-u+"</sup>",e.fontSize*=1.25):(e.text=di(Math.pow(10,l),t,"","fakehover"),"D1"===o&&"y"===t._id.charAt(0)&&(e.dy-=e.fontSize/6))}else{if("D"!==o.charAt(0))throw"unrecognized dtick "+String(o);e.text=String(Math.round(Math.pow(10,oe.mod(l,1)))),e.fontSize*=.75}if("D1"===t.dtick){var c=String(e.text).charAt(0);"0"!==c&&"1"!==c||("y"===t._id.charAt(0)?e.dx-=e.fontSize/4:(e.dy+=e.fontSize/2,e.dx+=(t.range[1]>t.range[0]?1:-1)*e.fontSize*(l<0?.5:.25)))}}(t,o,0,s,n):"category"===t.type?function(t,e){var r=t._categories[Math.round(e.x)];void 0===r&&(r="");e.text=String(r)}(t,o):"angular"===t._id?function(t,e,r,n,a){if("radians"!==t.thetaunit||r)e.text=di(e.x,t,a,n);else{var i=e.x/180;if(0===i)e.text="0";else{var o=function(t){function e(t,e){return Math.abs(t-e)<=1e-6}var r=function(t){var r=1;for(;!e(Math.round(t*r)/r,t);)r*=10;return r}(t),n=t*r,a=Math.abs(function t(r,n){return e(n,0)?r:t(n,r%n)}(n,r));return[Math.round(n/a),Math.round(r/a)]}(i);if(o[1]>=100)e.text=di(oe.deg2rad(e.x),t,a,n);else{var l=e.x<0;1===o[1]?1===o[0]?e.text="\u03c0":e.text=o[0]+"\u03c0":e.text=["<sup>",o[0],"</sup>","\u2044","<sub>",o[1],"</sub>","\u03c0"].join(""),l&&(e.text=Xa+e.text)}}}}(t,o,r,s,n):function(t,e,r,n,a){"never"===a?a="":"all"===t.showexponent&&Math.abs(e.x/t.dtick)<1e-6&&(a="hide");e.text=di(e.x,t,a,n)}(t,o,0,s,n),t.tickprefix&&!h(t.showtickprefix)&&(o.text=t.tickprefix+o.text),t.ticksuffix&&!h(t.showticksuffix)&&(o.text+=t.ticksuffix),o},Ja.hoverLabelText=function(t,e,r){if(r!==Ya&&r!==e)return Ja.hoverLabelText(t,e)+" - "+Ja.hoverLabelText(t,r);var n="log"===t.type&&e<=0,a=Ja.tickText(t,t.c2l(n?-e:e),"hover").text;return n?0===e?"0":Xa+a:a};var ci=["f","p","n","\u03bc","m","","k","M","G","T"];function fi(t){return"SI"===t||"B"===t}function hi(t){return t>14||t<-15}function di(t,e,r,n){var i=t<0,o=e._tickround,l=r||e.exponentformat||"B",s=e._tickexponent,u=Ja.getTickFormat(e),c=e.separatethousands;if(n){var f={exponentformat:l,dtick:"none"===e.showexponent?e.dtick:a(t)&&Math.abs(t)||1,range:"none"===e.showexponent?e.range.map(e.r2d):[0,t||1]};si(f),o=(Number(f._tickround)||0)+4,s=f._tickexponent,e.hoverformat&&(u=e.hoverformat)}if(u)return e._numFormat(u)(t).replace(/-/g,Xa);var h,d=Math.pow(10,-o)/2;if("none"===l&&(s=0),(t=Math.abs(t))<d)t="0",i=!1;else{if(t+=d,s&&(t*=Math.pow(10,-s),o+=s),0===o)t=String(Math.floor(t));else if(o<0){t=(t=String(Math.round(t))).substr(0,t.length+o);for(var p=o;p<0;p++)t+="0"}else{var g=(t=String(t)).indexOf(".")+1;g&&(t=t.substr(0,g+o).replace(/\.?0+$/,""))}t=oe.numSeparate(t,e._separators,c)}s&&"hide"!==l&&(fi(l)&&hi(s)&&(l="power"),h=s<0?Xa+-s:"power"!==l?"+"+s:String(s),"e"===l?t+="e"+h:"E"===l?t+="E"+h:"power"===l?t+="\xd710<sup>"+h+"</sup>":"B"===l&&9===s?t+="B":fi(l)&&(t+=ci[s/3+5]));return i?Xa+t:t}function pi(t,e){for(var r=0;r<e.length;r++)-1===t.indexOf(e[r])&&t.push(e[r])}function gi(t,e,r){var n,a,i=[],o=[],l=t.layout;for(n=0;n<e.length;n++)i.push(Ja.getFromId(t,e[n]));for(n=0;n<r.length;n++)o.push(Ja.getFromId(t,r[n]));var s=Object.keys(i[0]),u=["anchor","domain","overlaying","position","side","tickangle"],c=["linear","log"];for(n=0;n<s.length;n++){var f=s[n],h=i[0][f],d=o[0][f],p=!0,g=!1,v=!1;if("_"!==f.charAt(0)&&"function"!=typeof h&&-1===u.indexOf(f)){for(a=1;a<i.length&&p;a++){var m=i[a][f];"type"===f&&-1!==c.indexOf(h)&&-1!==c.indexOf(m)&&h!==m?g=!0:m!==h&&(p=!1)}for(a=1;a<o.length&&p;a++){var y=o[a][f];"type"===f&&-1!==c.indexOf(d)&&-1!==c.indexOf(y)&&d!==y?v=!0:o[a][f]!==d&&(p=!1)}p&&(g&&(l[i[0]._name].type="linear"),v&&(l[o[0]._name].type="linear"),vi(l,f,i,o,t._fullLayout._dfltTitle))}}for(n=0;n<t._fullLayout.annotations.length;n++){var x=t._fullLayout.annotations[n];-1!==e.indexOf(x.xref)&&-1!==r.indexOf(x.yref)&&oe.swapAttrs(l.annotations[n],["?"])}}function vi(t,e,r,n,a){var i,o=oe.nestedProperty,l=o(t[r[0]._name],e).get(),s=o(t[n[0]._name],e).get();for("title"===e&&(l===a.x&&(l=a.y),s===a.y&&(s=a.x)),i=0;i<r.length;i++)o(t,r[i]._name+"."+e).set(s);for(i=0;i<n.length;i++)o(t,n[i]._name+"."+e).set(l)}Ja.getTickFormat=function(t){var e,r,n,a,i,o,l;function s(t){return"string"!=typeof t?t:Number(t.replace("M",""))*Ua}function u(t,e){var r=["L","D"];if(typeof t==typeof e){if("number"==typeof t)return t-e;var n=r.indexOf(t.charAt(0)),a=r.indexOf(e.charAt(0));return n===a?Number(t.replace(/(L|D)/g,""))-Number(e.replace(/(L|D)/g,"")):n-a}return"number"==typeof t?1:-1}function c(t,e){var r=null===e[0],n=null===e[1],a=u(t,e[0])>=0,i=u(t,e[1])<=0;return(r||a)&&(n||i)}if(t.tickformatstops&&t.tickformatstops.length>0)switch(t.type){case"date":case"linear":for(e=0;e<t.tickformatstops.length;e++)if(n=t.dtick,a=t.tickformatstops[e].dtickrange,i=void 0,void 0,void 0,i=s||function(t){return t},o=a[0],l=a[1],(!o&&"number"!=typeof o||i(o)<=i(n))&&(!l&&"number"!=typeof l||i(l)>=i(n))){r=t.tickformatstops[e];break}break;case"log":for(e=0;e<t.tickformatstops.length;e++)if(c(t.dtick,t.tickformatstops[e].dtickrange)){r=t.tickformatstops[e];break}}return r?r.value:t.tickformat},Ja.getSubplots=function(t,e){var r=t._fullLayout._subplots,n=r.cartesian.concat(r.gl2d||[]),a=e?Ja.findSubplotsWithAxis(n,e):n;return a.sort(function(t,e){var r=t.substr(1).split("y"),n=e.substr(1).split("y");return r[0]===n[0]?+r[1]-+n[1]:+r[0]-+n[0]}),a},Ja.findSubplotsWithAxis=function(t,e){for(var r=new RegExp("x"===e._id.charAt(0)?"^"+e._id+"y":e._id+"$"),n=[],a=0;a<t.length;a++){var i=t[a];r.test(i)&&n.push(i)}return n},Ja.makeClipPaths=function(t){var e,r,a=t._fullLayout,i={_offset:0,_length:a.width,_id:""},o={_offset:0,_length:a.height,_id:""},l=Ja.list(t,"x",!0),s=Ja.list(t,"y",!0),u=[];for(e=0;e<l.length;e++)for(u.push({x:l[e],y:o}),r=0;r<s.length;r++)0===e&&u.push({x:i,y:s[r]}),u.push({x:l[e],y:s[r]});var c=a._clips.selectAll(".axesclip").data(u,function(t){return t.x._id+t.y._id});c.enter().append("clipPath").classed("axesclip",!0).attr("id",function(t){return"clip"+a._uid+t.x._id+t.y._id}).append("rect"),c.exit().remove(),c.each(function(t){n.select(this).select("rect").attr({x:t.x._offset||0,y:t.y._offset||0,width:t.x._length||1,height:t.y._length||1})})},Ja.doTicks=function(t,e,r){var i,o=t._fullLayout,l=!1;if("object"==typeof e)e=(i=e)._id,l=!0;else if(i=Ja.getFromId(t,e),"redraw"===e&&o._paper.selectAll("g.subplot").each(function(t){var e=o._plots[t],r=e.xaxis,n=e.yaxis;e.xaxislayer.selectAll("."+r._id+"tick").remove(),e.yaxislayer.selectAll("."+n._id+"tick").remove(),e.gridlayer&&e.gridlayer.selectAll("path").remove(),e.zerolinelayer&&e.zerolinelayer.selectAll("path").remove(),o._infolayer.select(".g-"+r._id+"title").remove(),o._infolayer.select(".g-"+n._id+"title").remove()}),!e||"redraw"===e)return oe.syncOrAsync(Ja.list(t,"",!0).map(function(e){return function(){if(e._id){var r=Ja.doTicks(t,e._id);return e._r=e.range.slice(),e._rl=oe.simpleMap(e._r,e.r2l),r}}}));i.setScale();var s,u,c,f,h,d,p=e.charAt(0),g=Ja.counterLetter(e),v=i._vals=Ja.calcTicks(i),m=function(t){return[t.text,t.x,i.mirror,t.font,t.fontSize,t.fontColor].join("_")},y=e+"tick",x=e+"grid",b=e+"zl",_=(i.linewidth||1)/2,w="outside"===i.ticks?i.ticklen:0,A=0,M=Jr.crispRound(t,i.gridwidth,1),T=Jr.crispRound(t,i.zerolinewidth,M),k=Jr.crispRound(t,i.tickwidth,1);if(i._counterangle&&"outside"===i.ticks){var E=i._counterangle*Math.PI/180;w=i.ticklen*Math.cos(E)+1,A=i.ticklen*Math.sin(E)}if(i.showticklabels&&("outside"===i.ticks||i.showline)&&(w+=.2*i.tickfont.size),"x"===p)s=["bottom","top"],u=i._transfn||function(t){return"translate("+(i._offset+i.l2p(t.x))+",0)"},c=function(t,e){if(i._counterangle){var r=i._counterangle*Math.PI/180;return"M0,"+t+"l"+Math.sin(r)*e+","+Math.cos(r)*e}return"M0,"+t+"v"+e};else if("y"===p)s=["left","right"],u=i._transfn||function(t){return"translate(0,"+(i._offset+i.l2p(t.x))+")"},c=function(t,e){if(i._counterangle){var r=i._counterangle*Math.PI/180;return"M"+t+",0l"+Math.cos(r)*e+","+-Math.sin(r)*e}return"M"+t+",0h"+e};else{if("angular"!==e)return void oe.warn("Unrecognized doTicks axis:",e);s=["left","right"],u=i._transfn,c=function(t,e){return"M"+t+",0h"+e}}var C=i.side||s[0],S=[-1,1,C===s[1]?1:-1];if("inside"!==i.ticks==("x"===p)&&(S=S.map(function(t){return-t})),i.visible){i._tickFilter&&(v=v.filter(i._tickFilter));var L=v.filter(z);if("angular"===i._id&&(L=v),l){if(N(i._axislayer,c(i._pos+_*S[2],S[2]*i.ticklen)),i._counteraxis)H({gridlayer:i._gridlayer,zerolinelayer:i._zerolinelayer},i._counteraxis);return j(i._axislayer,i._pos)}if(o._has("cartesian")){var O={};(f=Ja.getSubplots(t,i)).map(function(t){var e=o._plots[t],r=e[g+"axis"],n=r._mainAxis._id;O[n]||(O[n]=1,H(e,r,t))});var D=i._mainSubplot,R=o._plots[D],P=[];if(i.ticks){var B=S[2],F=c(i._mainLinePosition+_*B,B*i.ticklen);i._anchorAxis&&i.mirror&&!0!==i.mirror&&(F+=c(i._mainMirrorPosition-_*B,-B*i.ticklen)),N(R[p+"axislayer"],F),P=Object.keys(i._linepositions||{})}return P.map(function(t){var e=o._plots[t][p+"axislayer"],r=i._linepositions[t]||[];function n(t){var e=S[t];return c(r[t]+_*e,e*i.ticklen)}N(e,n(0)+n(1))}),j(R[p+"axislayer"],i._mainLinePosition)}}function z(t){var e=i.l2p(t.x);return e>1&&e<i._length-1}function N(t,e){var r=t.selectAll("path."+y).data("inside"===i.ticks?L:v,m);e&&i.ticks?(r.enter().append("path").classed(y,1).classed("ticks",1).classed("crisp",1).call($e.stroke,i.tickcolor).style("stroke-width",k+"px").attr("d",e),r.attr("transform",u),r.exit().remove()):r.remove()}function j(r,l){if(h=r.selectAll("g."+y).data(v,m),!a(l))return h.remove(),void U();if(!i.showticklabels)return h.remove(),U(),void S();var s,c,g,x,b;"x"===p?(s=function(t){return t.dx+A*b},x=l+(w+_)*(b="bottom"===C?1:-1),c=function(t){return t.dy+x+t.fontSize*("bottom"===C?1:-.2)},g=function(t){return a(t)&&0!==t&&180!==t?t*b<0?"end":"start":"middle"}):"y"===p?(b="right"===C?1:-1,c=function(t){return t.dy+t.fontSize*Wa-A*b},s=function(t){return t.dx+l+(w+_+(90===Math.abs(i.tickangle)?t.fontSize/2:0))*b},g=function(t){return a(t)&&90===Math.abs(t)?"middle":"right"===C?"start":"end"}):"angular"===e&&(i._labelShift=A,i._labelStandoff=w,i._pad=_,s=i._labelx,c=i._labely,g=i._labelanchor);var M=0,T=0,k=[];function E(t,e){t.each(function(t){var r=g(e,t),i=n.select(this),o=i.select(".text-math-group"),l=u.call(i.node(),t)+(a(e)&&0!=+e?" rotate("+e+","+s(t)+","+(c(t)-t.fontSize/2)+")":""),f=function(t,e,r){var n=(t-1)*e;if("x"===p){if(r<-60||60<r)return-.5*n;if("top"===C)return-n}else{if((r*="left"===C?1:-1)<-30)return-n;if(r<30)return-.5*n}return 0}(Mr.lineCount(i),Za*t.fontSize,a(e)?+e:0);if(f&&(l+=" translate(0, "+f+")"),o.empty())i.select("text").attr({transform:l,"text-anchor":r});else{var h=Jr.bBox(o.node()).width*{end:-.5,start:.5}[r];o.attr("transform",l+(h?"translate("+h+",0)":""))}})}function S(){if(i.showticklabels){var e=t.getBoundingClientRect(),n=r.node().getBoundingClientRect();i._boundingBox={width:n.width,height:n.height,left:n.left-e.left,right:n.right-e.left,top:n.top-e.top,bottom:n.bottom-e.top}}else{var a,l=o._size;"x"===p?(a="free"===i.anchor?l.t+l.h*(1-i.position):l.t+l.h*(1-i._anchorAxis.domain[{bottom:0,top:1}[i.side]]),i._boundingBox={top:a,bottom:a,left:i._offset,right:i._offset+i._length,width:i._length,height:0}):(a="free"===i.anchor?l.l+l.w*i.position:l.l+l.w*i._anchorAxis.domain[{left:0,right:1}[i.side]],i._boundingBox={left:a,right:a,bottom:i._offset+i._length,top:i._offset,height:i._length,width:0})}if(f){var s=i._counterSpan=[1/0,-1/0];for(d=0;d<f.length;d++){var u=o._plots[f[d]]["x"===p?"yaxis":"xaxis"];c(s,[u._offset,u._offset+u._length])}"free"===i.anchor&&c(s,"x"===p?[i._boundingBox.bottom,i._boundingBox.top]:[i._boundingBox.right,i._boundingBox.left])}function c(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.max(t[1],e[1])}}h.enter().append("g").classed(y,1).append("text").attr("text-anchor","middle").each(function(e){var r=n.select(this),a=t._promises.length;r.call(Mr.positionText,s(e),c(e)).call(Jr.font,e.font,e.fontSize,e.fontColor).text(e.text).call(Mr.convertToTspans,t),(a=t._promises[a])?k.push(t._promises.pop().then(function(){E(r,i.tickangle)})):E(r,i.tickangle)}),h.exit().remove(),h.each(function(t){M=Math.max(M,t.fontSize)}),"angular"===e&&h.each(function(t){n.select(this).select("text").call(Mr.positionText,s(t),c(t))}),E(h,i._lastangle||i.tickangle);var L=oe.syncOrAsync([function(){return k.length&&Promise.all(k)},function(){if(E(h,i.tickangle),"x"===p&&!a(i.tickangle)&&("log"!==i.type||"D"!==String(i.dtick).charAt(0))){var t=[];for(h.each(function(e){var r=n.select(this),a=r.select(".text-math-group"),o=i.l2p(e.x);a.empty()&&(a=r.select("text"));var l=Jr.bBox(a.node());t.push({top:0,bottom:10,height:10,left:o-l.width/2,right:o+l.width/2+2,width:l.width+2})}),d=0;d<t.length-1;d++)if(oe.bBoxIntersect(t[d],t[d+1])){T=30;break}T&&(Math.abs((v[v.length-1].x-v[0].x)*i._m)/(v.length-1)<2.5*M&&(T=90),E(h,T)),i._lastangle=T}return U(),e+" done"},S,function(){if(i.automargin&&("x"===p||"y"===p)){var e=i.side[0],r={x:0,y:0,r:0,l:0,t:0,b:0};"x"===p?(r.y="free"===i.anchor?i.position:i._anchorAxis.domain["t"===e?1:0],r[e]+=i._boundingBox.height):(r.x="free"===i.anchor?i.position:i._anchorAxis.domain["r"===e?1:0],r[e]+=i._boundingBox.width),i.title!==o._dfltTitle[p]&&(r[e]+=i.titlefont.size);var n=i._name+".automargin",a=o._pushmargin[n];(!a||a[e].size<r[e])&&na.autoMargin(t,n,r)}}]);return L&&L.then&&t._promises.push(L),L}function U(){if(!(r||i.rangeslider&&i.rangeslider.visible&&i._boundingBox&&"bottom"===i.side)){var n,a,l,s,u={selection:h,side:i.side},c=e.charAt(0),f=t._fullLayout._size,d=i.titlefont.size;if(h.size()){var p=Jr.getTranslate(h.node().parentNode);u.offsetLeft=p.x,u.offsetTop=p.y}var g=10+1.5*d+(i.linewidth?i.linewidth-1:0);"x"===c?(a="free"===i.anchor?{_offset:f.t+(1-(i.position||0))*f.h,_length:0}:De.getFromId(t,i.anchor),l=i._offset+i._length/2,s="top"===i.side?-g-d*(i.showticklabels?1:0):a._length+g+d*(i.showticklabels?1.5:.5),s+=a._offset,u.side||(u.side="bottom")):(a="free"===i.anchor?{_offset:f.l+(i.position||0)*f.w,_length:0}:De.getFromId(t,i.anchor),s=i._offset+i._length/2,l="right"===i.side?a._length+g+d*(i.showticklabels?1:.5):-g-d*(i.showticklabels?.5:0),l+=a._offset,n={rotate:"-90",offset:0},u.side||(u.side="left")),ma.draw(t,e+"title",{propContainer:i,propName:i._name+".title",placeholder:o._dfltTitle[c],avoid:u,transform:n,attributes:{x:l,y:s,"text-anchor":"middle"}})}}function V(t,e){return!0===t.visible&&t.xaxis+t.yaxis===e&&(!(!I.traceIs(t,"bar")||t.orientation!=={x:"h",y:"v"}[p])||t.fill&&t.fill.charAt(t.fill.length-1)===p)}function H(r,a,l){if(!o._hasOnlyLargeSploms){var s=r.gridlayer.selectAll("."+e),c=r.zerolinelayer,f=r["hidegrid"+p]?[]:L,h=i._gridpath||("x"===p?"M0,"+a._offset+"v":"M"+a._offset+",0h")+a._length,d=s.selectAll("path."+x).data(!1===i.showgrid?[]:f,m);if(d.enter().append("path").classed(x,1).classed("crisp",1).attr("d",h).each(function(t){i.zeroline&&("linear"===i.type||"-"===i.type)&&Math.abs(t.x)<i.dtick/100&&n.select(this).remove()}),d.attr("transform",u).call($e.stroke,i.gridcolor||"#ddd").style("stroke-width",M+"px"),"function"==typeof h&&d.attr("d",h),d.exit().remove(),c){for(var g=!1,v=0;v<t._fullData.length;v++)if(V(t._fullData[v],l)){g=!0;break}var y=oe.simpleMap(i.range,i.r2l),_=y[0]*y[1]<=0&&i.zeroline&&("linear"===i.type||"-"===i.type)&&f.length&&(g||z({x:0})||!i.showline),w=c.selectAll("path."+b).data(_?[{x:0,id:e}]:[]);w.enter().append("path").classed(b,1).classed("zl",1).classed("crisp",1).attr("d",h).each(function(){c.selectAll("path").sort(function(t,e){return De.idSort(t.id,e.id)})}),w.attr("transform",u).call($e.stroke,i.zerolinecolor||$e.defaultLine).style("stroke-width",T+"px"),w.exit().remove()}}}},Ja.swap=function(t,e){for(var r=function(t,e){var r,n,a=[];for(r=0;r<e.length;r++){var i=[],o=t._fullData[e[r]].xaxis,l=t._fullData[e[r]].yaxis;if(o&&l){for(n=0;n<a.length;n++)-1===a[n].x.indexOf(o)&&-1===a[n].y.indexOf(l)||i.push(n);if(i.length){var s,u=a[i[0]];if(i.length>1)for(n=1;n<i.length;n++)s=a[i[n]],pi(u.x,s.x),pi(u.y,s.y);pi(u.x,[o]),pi(u.y,[l])}else a.push({x:[o],y:[l]})}}return a}(t,e),n=0;n<r.length;n++)gi(t,r[n].x,r[n].y)};var mi={},yi=Te.YANGLE,xi=Math.PI*yi/180,bi=1/Math.sin(xi),_i=Math.cos(xi),wi=Math.sin(xi),Ai=Te.HOVERARROWSIZE,Mi=Te.HOVERTEXTPAD;function Ti(t,e,r){var a=e.hovermode,i=e.rotateLabels,o=e.bgColor,l=e.container,s=e.outerContainer,u=e.commonLabelOpts||{},c=e.fontFamily||Te.HOVERFONT,f=e.fontSize||Te.HOVERFONTSIZE,h=t[0],d=h.xa,p=h.ya,g="y"===a?"yLabel":"xLabel",v=h[g],m=(String(v)||"").split(" ")[0],y=s.node().getBoundingClientRect(),x=y.top,b=y.width,_=y.height,w=void 0!==v&&h.distance<=e.hoverdistance&&("x"===a||"y"===a);if(w){var A,M,T=!0;for(A=0;A<t.length;A++){T&&void 0===t[A].zLabel&&(T=!1),M=t[A].hoverinfo||t[A].trace.hoverinfo;var k=Array.isArray(M)?M:M.split("+");if(-1===k.indexOf("all")&&-1===k.indexOf(a)){w=!1;break}}T&&(w=!1)}var E=l.selectAll("g.axistext").data(w?[0]:[]);E.enter().append("g").classed("axistext",!0),E.exit().remove(),E.each(function(){var e=n.select(this),i=oe.ensureSingle(e,"path","",function(t){t.style({"stroke-width":"1px"})}),o=oe.ensureSingle(e,"text","",function(t){t.attr("data-notex",1)});i.style({fill:u.bgcolor||$e.defaultLine,stroke:u.bordercolor||$e.background}),o.text(v).call(Jr.font,u.font.family||c,u.font.size||f,u.font.color||$e.background).call(Mr.positionText,0,0).call(Mr.convertToTspans,r),e.attr("transform","");var l=o.node().getBoundingClientRect();if("x"===a){o.attr("text-anchor","middle").call(Mr.positionText,0,"top"===d.side?x-l.bottom-Ai-Mi:x-l.top+Ai+Mi);var s="top"===d.side?"-":"";i.attr("d","M0,0L"+Ai+","+s+Ai+"H"+(Mi+l.width/2)+"v"+s+(2*Mi+l.height)+"H-"+(Mi+l.width/2)+"V"+s+Ai+"H-"+Ai+"Z"),e.attr("transform","translate("+(d._offset+(h.x0+h.x1)/2)+","+(p._offset+("top"===d.side?0:p._length))+")")}else{o.attr("text-anchor","right"===p.side?"start":"end").call(Mr.positionText,("right"===p.side?1:-1)*(Mi+Ai),x-l.top-l.height/2);var y="right"===p.side?"":"-";i.attr("d","M0,0L"+y+Ai+","+Ai+"V"+(Mi+l.height/2)+"h"+y+(2*Mi+l.width)+"V-"+(Mi+l.height/2)+"H"+y+Ai+"V-"+Ai+"Z"),e.attr("transform","translate("+(d._offset+("right"===p.side?d._length:0))+","+(p._offset+(h.y0+h.y1)/2)+")")}t=t.filter(function(t){return void 0!==t.zLabelVal||(t[g]||"").split(" ")[0]===m})});var C=l.selectAll("g.hovertext").data(t,function(t){return[t.trace.index,t.index,t.x0,t.y0,t.name,t.attr,t.xa,t.ya||""].join(",")});return C.enter().append("g").classed("hovertext",!0).each(function(){var t=n.select(this);t.append("rect").call($e.fill,$e.addOpacity(o,.8)),t.append("text").classed("name",!0),t.append("path").style("stroke-width","1px"),t.append("text").classed("nums",!0).call(Jr.font,c,f)}),C.exit().remove(),C.each(function(t){var e=n.select(this).attr("transform",""),l="",s="",u=$e.opacity(t.color)?t.color:$e.defaultLine,h=$e.combine(u,o),d=t.borderColor||$e.contrast(h);if(void 0!==t.nameOverride&&(t.name=t.nameOverride),t.name){l=Mr.plainText(t.name||"");var p=Math.round(t.nameLength);p>-1&&l.length>p&&(l=p>3?l.substr(0,p-3)+"...":l.substr(0,p))}void 0!==t.zLabel?(void 0!==t.xLabel&&(s+="x: "+t.xLabel+"<br>"),void 0!==t.yLabel&&(s+="y: "+t.yLabel+"<br>"),s+=(s?"z: ":"")+t.zLabel):w&&t[a+"Label"]===v?s=t[("x"===a?"y":"x")+"Label"]||"":void 0===t.xLabel?void 0!==t.yLabel&&(s=t.yLabel):s=void 0===t.yLabel?t.xLabel:"("+t.xLabel+", "+t.yLabel+")",t.text&&!Array.isArray(t.text)&&(s+=(s?"<br>":"")+t.text),void 0!==t.extraText&&(s+=(s?"<br>":"")+t.extraText),""===s&&(""===l&&e.remove(),s=l);var g=e.select("text.nums").call(Jr.font,t.fontFamily||c,t.fontSize||f,t.fontColor||d).text(s).attr("data-notex",1).call(Mr.positionText,0,0).call(Mr.convertToTspans,r),m=e.select("text.name"),y=0;l&&l!==s?(m.call(Jr.font,t.fontFamily||c,t.fontSize||f,h).text(l).attr("data-notex",1).call(Mr.positionText,0,0).call(Mr.convertToTspans,r),y=m.node().getBoundingClientRect().width+2*Mi):(m.remove(),e.select("rect").remove()),e.select("path").style({fill:h,stroke:d});var A,M,T=g.node().getBoundingClientRect(),k=t.xa._offset+(t.x0+t.x1)/2,E=t.ya._offset+(t.y0+t.y1)/2,C=Math.abs(t.x1-t.x0),S=Math.abs(t.y1-t.y0),L=T.width+Ai+Mi+y;t.ty0=x-T.top,t.bx=T.width+2*Mi,t.by=T.height+2*Mi,t.anchor="start",t.txwidth=T.width,t.tx2width=y,t.offset=0,i?(t.pos=k,A=E+S/2+L<=_,M=E-S/2-L>=0,"top"!==t.idealAlign&&A||!M?A?(E+=S/2,t.anchor="start"):t.anchor="middle":(E-=S/2,t.anchor="end")):(t.pos=E,A=k+C/2+L<=b,M=k-C/2-L>=0,"left"!==t.idealAlign&&A||!M?A?(k+=C/2,t.anchor="start"):t.anchor="middle":(k-=C/2,t.anchor="end")),g.attr("text-anchor",t.anchor),y&&m.attr("text-anchor",t.anchor),e.attr("transform","translate("+k+","+E+")"+(i?"rotate("+yi+")":""))}),C}function ki(t,e){t.each(function(t){var r=n.select(this);if(t.del)r.remove();else{var a="end"===t.anchor?-1:1,i=r.select("text.nums"),o={start:1,end:-1,middle:0}[t.anchor],l=o*(Ai+Mi),s=l+o*(t.txwidth+Mi),u=0,c=t.offset;"middle"===t.anchor&&(l-=t.tx2width/2,s+=t.txwidth/2+Mi),e&&(c*=-wi,u=t.offset*_i),r.select("path").attr("d","middle"===t.anchor?"M-"+(t.bx/2+t.tx2width/2)+","+(c-t.by/2)+"h"+t.bx+"v"+t.by+"h-"+t.bx+"Z":"M0,0L"+(a*Ai+u)+","+(Ai+c)+"v"+(t.by/2-Ai)+"h"+a*t.bx+"v-"+t.by+"H"+(a*Ai+u)+"V"+(c-Ai)+"Z"),i.call(Mr.positionText,l+u,c+t.ty0-t.by/2+Mi),t.tx2width&&(r.select("text.name").call(Mr.positionText,s+o*Mi+u,c+t.ty0-t.by/2+Mi),r.select("rect").call(Jr.setRect,s+(o-1)*t.tx2width/2+u,c-t.by/2-1,t.tx2width,t.by+2))}})}function Ei(t,e){var r=t.index,n=t.trace||{},a=t.cd[0],i=t.cd[r]||{},o=Array.isArray(r)?function(t,e){return oe.castOption(a,r,t)||oe.extractOption({},n,"",e)}:function(t,e){return oe.extractOption(i,n,t,e)};function l(e,r,n){var a=o(r,n);a&&(t[e]=a)}if(l("hoverinfo","hi","hoverinfo"),l("color","hbg","hoverlabel.bgcolor"),l("borderColor","hbc","hoverlabel.bordercolor"),l("fontFamily","htf","hoverlabel.font.family"),l("fontSize","hts","hoverlabel.font.size"),l("fontColor","htc","hoverlabel.font.color"),l("nameLength","hnl","hoverlabel.namelength"),t.posref="y"===e?t.xa._offset+(t.x0+t.x1)/2:t.ya._offset+(t.y0+t.y1)/2,t.x0=oe.constrain(t.x0,0,t.xa._length),t.x1=oe.constrain(t.x1,0,t.xa._length),t.y0=oe.constrain(t.y0,0,t.ya._length),t.y1=oe.constrain(t.y1,0,t.ya._length),void 0!==t.xLabelVal&&(t.xLabel="xLabel"in t?t.xLabel:Na.hoverLabelText(t.xa,t.xLabelVal),t.xVal=t.xa.c2d(t.xLabelVal)),void 0!==t.yLabelVal&&(t.yLabel="yLabel"in t?t.yLabel:Na.hoverLabelText(t.ya,t.yLabelVal),t.yVal=t.ya.c2d(t.yLabelVal)),void 0!==t.zLabelVal&&void 0===t.zLabel&&(t.zLabel=String(t.zLabelVal)),!(isNaN(t.xerr)||"log"===t.xa.type&&t.xerr<=0)){var s=Na.tickText(t.xa,t.xa.c2l(t.xerr),"hover").text;void 0!==t.xerrneg?t.xLabel+=" +"+s+" / -"+Na.tickText(t.xa,t.xa.c2l(t.xerrneg),"hover").text:t.xLabel+=" \xb1 "+s,"x"===e&&(t.distance+=1)}if(!(isNaN(t.yerr)||"log"===t.ya.type&&t.yerr<=0)){var u=Na.tickText(t.ya,t.ya.c2l(t.yerr),"hover").text;void 0!==t.yerrneg?t.yLabel+=" +"+u+" / -"+Na.tickText(t.ya,t.ya.c2l(t.yerrneg),"hover").text:t.yLabel+=" \xb1 "+u,"y"===e&&(t.distance+=1)}var c=t.hoverinfo||t.trace.hoverinfo;return"all"!==c&&(-1===(c=Array.isArray(c)?c:c.split("+")).indexOf("x")&&(t.xLabel=void 0),-1===c.indexOf("y")&&(t.yLabel=void 0),-1===c.indexOf("z")&&(t.zLabel=void 0),-1===c.indexOf("text")&&(t.text=void 0),-1===c.indexOf("name")&&(t.name=void 0)),t}function Ci(t,e){var r,n,a=e.container,i=e.fullLayout,o=e.event,l=!!t.hLinePoint,s=!!t.vLinePoint;if(a.selectAll(".spikeline").remove(),s||l){var u=$e.combine(i.plot_bgcolor,i.paper_bgcolor);if(l){var f,h,d=t.hLinePoint;r=d&&d.xa,"cursor"===(n=d&&d.ya).spikesnap?(f=o.pointerX,h=o.pointerY):(f=r._offset+d.x,h=n._offset+d.y);var p,g,v=c.readability(d.color,u)<1.5?$e.contrast(u):d.color,m=n.spikemode,y=n.spikethickness,x=n.spikecolor||v,b=n._boundingBox,_=(b.left+b.right)/2<f?b.right:b.left;-1===m.indexOf("toaxis")&&-1===m.indexOf("across")||(-1!==m.indexOf("toaxis")&&(p=_,g=f),-1!==m.indexOf("across")&&(p=n._counterSpan[0],g=n._counterSpan[1]),a.insert("line",":first-child").attr({x1:p,x2:g,y1:h,y2:h,"stroke-width":y,stroke:x,"stroke-dasharray":Jr.dashStyle(n.spikedash,y)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:p,x2:g,y1:h,y2:h,"stroke-width":y+2,stroke:u}).classed("spikeline",!0).classed("crisp",!0)),-1!==m.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:_+("right"!==n.side?y:-y),cy:h,r:y,fill:x}).classed("spikeline",!0)}if(s){var w,A,M=t.vLinePoint;r=M&&M.xa,n=M&&M.ya,"cursor"===r.spikesnap?(w=o.pointerX,A=o.pointerY):(w=r._offset+M.x,A=n._offset+M.y);var T,k,E=c.readability(M.color,u)<1.5?$e.contrast(u):M.color,C=r.spikemode,S=r.spikethickness,L=r.spikecolor||E,O=r._boundingBox,D=(O.top+O.bottom)/2<A?O.bottom:O.top;-1===C.indexOf("toaxis")&&-1===C.indexOf("across")||(-1!==C.indexOf("toaxis")&&(T=D,k=A),-1!==C.indexOf("across")&&(T=r._counterSpan[0],k=r._counterSpan[1]),a.insert("line",":first-child").attr({x1:w,x2:w,y1:T,y2:k,"stroke-width":S,stroke:L,"stroke-dasharray":Jr.dashStyle(r.spikedash,S)}).classed("spikeline",!0).classed("crisp",!0),a.insert("line",":first-child").attr({x1:w,x2:w,y1:T,y2:k,"stroke-width":S+2,stroke:u}).classed("spikeline",!0).classed("crisp",!0)),-1!==C.indexOf("marker")&&a.insert("circle",":first-child").attr({cx:w,cy:D-("top"!==r.side?S:-S),r:S,fill:L}).classed("spikeline",!0)}}}function Si(t,e){return!e||(e.vLinePoint!==t._spikepoints.vLinePoint||e.hLinePoint!==t._spikepoints.hLinePoint)}mi.hover=function(t,e,r,i){t=oe.getGraphDiv(t),oe.throttle(t._fullLayout._uid+Te.HOVERID,Te.HOVERMINTIME,function(){!function(t,e,r,i){r||(r="xy");var o=Array.isArray(r)?r:[r],l=t._fullLayout,s=l._plots||[],u=s[r],c=l._has("cartesian");if(u){var f=u.overlays.map(function(t){return t.id});o=o.concat(f)}for(var h=o.length,d=new Array(h),p=new Array(h),g=!1,v=0;v<h;v++){var m=o[v],y=s[m];if(y)g=!0,d[v]=Na.getFromId(t,y.xaxis._id),p[v]=Na.getFromId(t,y.yaxis._id);else{var x=l[m]._subplot;d[v]=x.xaxis,p[v]=x.yaxis}}var b=e.hovermode||l.hovermode;b&&!g&&(b="closest");if(-1===["x","y","closest"].indexOf(b)||!t.calcdata||t.querySelector(".zoombox")||t._dragging)return Ye.unhoverRaw(t,e);var _,w,A,M,T,k,E,C,S,L,O,D,R,P=-1===l.hoverdistance?1/0:l.hoverdistance,B=-1===l.spikedistance?1/0:l.spikedistance,F=[],z=[],N={hLinePoint:null,vLinePoint:null};if(Array.isArray(e))for(b="array",A=0;A<e.length;A++)"skip"!==(T=t.calcdata[e[A].curveNumber||0])[0].trace.hoverinfo&&z.push(T);else{for(M=0;M<t.calcdata.length;M++)T=t.calcdata[M],"skip"!==(k=T[0].trace).hoverinfo&&vn.isTraceInSubplots(k,o)&&z.push(T);var j,U,V=!e.target;if(V)j="xpx"in e?e.xpx:d[0]._length/2,e.pointerX=j+d[0]._offset,U="ypx"in e?e.ypx:p[0]._length/2,e.pointerY=U+p[0]._offset;else{if(!1===Ge.triggerHandler(t,"plotly_beforehover",e))return;var H=e.target.getBoundingClientRect();if(j=e.clientX-H.left,U=e.clientY-H.top,j<0||j>H.width||U<0||U>H.height)return Ye.unhoverRaw(t,e);e.pointerX=e.offsetX,e.pointerY=e.offsetY}if(_="xval"in e?vn.flat(o,e.xval):vn.p2c(d,j),w="yval"in e?vn.flat(o,e.yval):vn.p2c(p,U),!a(_[0])||!a(w[0]))return oe.warn("Fx.hover failed",e,t),Ye.unhoverRaw(t,e)}var q=1/0;for(M=0;M<z.length;M++)if((T=z[M])&&T[0]&&T[0].trace&&!0===T[0].trace.visible&&(k=T[0].trace,-1===["carpet","contourcarpet"].indexOf(k._module.name))){if("splom"===k.type?E=o[C=0]:(E=vn.getSubplot(k),C=o.indexOf(E)),S=b,D={cd:T,trace:k,xa:d[C],ya:p[C],maxHoverDistance:P,maxSpikeDistance:B,index:!1,distance:Math.min(q,P),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:$e.defaultLine,name:k.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},l[E]&&(D.subplot=l[E]._subplot),R=F.length,"array"===S){var G=e[M];"pointNumber"in G?(D.index=G.pointNumber,S="closest"):(S="","xval"in G&&(L=G.xval,S="x"),"yval"in G&&(O=G.yval,S=S?"closest":"y"))}else L=_[C],O=w[C];if(0!==P)if(k._module&&k._module.hoverPoints){var X=k._module.hoverPoints(D,L,O,S,l._hoverlayer);if(X)for(var Y,W=0;W<X.length;W++)Y=X[W],a(Y.x0)&&a(Y.y0)&&F.push(Ei(Y,b))}else oe.log("Unrecognized trace type in hover:",k);if("closest"===b&&F.length>R&&(F.splice(0,R),q=F[0].distance),c&&0!==B&&0===F.length){D.distance=B,D.index=!1;var Z=k._module.hoverPoints(D,L,O,"closest",l._hoverlayer);if(Z&&(Z=Z.filter(function(t){return t.spikeDistance<=B})),Z&&Z.length){var J,Q=Z.filter(function(t){return t.xa.showspikes});if(Q.length){var $=Q[0];a($.x0)&&a($.y0)&&(J=rt($),(!N.vLinePoint||N.vLinePoint.spikeDistance>J.spikeDistance)&&(N.vLinePoint=J))}var K=Z.filter(function(t){return t.ya.showspikes});if(K.length){var tt=K[0];a(tt.x0)&&a(tt.y0)&&(J=rt(tt),(!N.hLinePoint||N.hLinePoint.spikeDistance>J.spikeDistance)&&(N.hLinePoint=J))}}}}function et(t,e){for(var r,n=null,a=1/0,i=0;i<t.length;i++)(r=t[i].spikeDistance)<a&&r<=e&&(n=t[i],a=r);return n}function rt(t){return t?{xa:t.xa,ya:t.ya,x:void 0!==t.xSpike?t.xSpike:(t.x0+t.x1)/2,y:void 0!==t.ySpike?t.ySpike:(t.y0+t.y1)/2,distance:t.distance,spikeDistance:t.spikeDistance,curveNumber:t.trace.index,color:t.color,pointNumber:t.index}:null}var nt={fullLayout:l,container:l._hoverlayer,outerContainer:l._paperdiv,event:e},at=t._spikepoints,it={vLinePoint:N.vLinePoint,hLinePoint:N.hLinePoint};if(t._spikepoints=it,c&&0!==B&&0!==F.length){var ot=F.filter(function(t){return t.ya.showspikes}),lt=et(ot,B);N.hLinePoint=rt(lt);var st=F.filter(function(t){return t.xa.showspikes}),ut=et(st,B);N.vLinePoint=rt(ut)}if(0===F.length){var ct=Ye.unhoverRaw(t,e);return!c||null===N.hLinePoint&&null===N.vLinePoint||Si(at)&&Ci(N,nt),ct}c&&Si(at)&&Ci(N,nt);F.sort(function(t,e){return t.distance-e.distance});var ft=t._hoverdata,ht=[];for(A=0;A<F.length;A++){var dt=F[A];ht.push(vn.makeEventData(dt,dt.trace,dt.cd))}t._hoverdata=ht;var pt="y"===b&&z.length>1,gt=$e.combine(l.plot_bgcolor||$e.background,l.paper_bgcolor),vt={hovermode:b,rotateLabels:pt,bgColor:gt,container:l._hoverlayer,outerContainer:l._paperdiv,commonLabelOpts:l.hoverlabel,hoverdistance:l.hoverdistance},mt=Ti(F,vt,t);if(function(t,e,r){var n,a,i,o,l,s,u,c=0,f=t.map(function(t,n){var a=t[e];return[{i:n,dp:0,pos:t.pos,posref:t.posref,size:t.by*("x"===a._id.charAt(0)?bi:1)/2,pmin:0,pmax:"x"===a._id.charAt(0)?r.width:r.height}]}).sort(function(t,e){return t[0].posref-e[0].posref});function h(t){var e=t[0],r=t[t.length-1];if(a=e.pmin-e.pos-e.dp+e.size,i=r.pos+r.dp+r.size-e.pmax,a>.01){for(l=t.length-1;l>=0;l--)t[l].dp+=a;n=!1}if(!(i<.01)){if(a<-.01){for(l=t.length-1;l>=0;l--)t[l].dp-=i;n=!1}if(n){var u=0;for(o=0;o<t.length;o++)(s=t[o]).pos+s.dp+s.size>e.pmax&&u++;for(o=t.length-1;o>=0&&!(u<=0);o--)(s=t[o]).pos>e.pmax-1&&(s.del=!0,u--);for(o=0;o<t.length&&!(u<=0);o++)if((s=t[o]).pos<e.pmin+1)for(s.del=!0,u--,i=2*s.size,l=t.length-1;l>=0;l--)t[l].dp-=i;for(o=t.length-1;o>=0&&!(u<=0);o--)(s=t[o]).pos+s.dp+s.size>e.pmax&&(s.del=!0,u--)}}}for(;!n&&c<=t.length;){for(c++,n=!0,o=0;o<f.length-1;){var d=f[o],p=f[o+1],g=d[d.length-1],v=p[0];if((a=g.pos+g.dp+g.size-v.pos-v.dp+v.size)>.01&&g.pmin===v.pmin&&g.pmax===v.pmax){for(l=p.length-1;l>=0;l--)p[l].dp+=a;for(d.push.apply(d,p),f.splice(o+1,1),u=0,l=d.length-1;l>=0;l--)u+=d[l].dp;for(i=u/d.length,l=d.length-1;l>=0;l--)d[l].dp-=i;n=!1}else o++}f.forEach(h)}for(o=f.length-1;o>=0;o--){var m=f[o];for(l=m.length-1;l>=0;l--){var y=m[l],x=t[y.i];x.offset=y.dp,x.del=y.del}}}(F,pt?"xa":"ya",l),ki(mt,pt),e.target&&e.target.tagName){var yt=I.getComponentMethod("annotations","hasClickToShow")(t,ht);wn(n.select(e.target),yt?"pointer":"")}if(!e.target||i||!function(t,e,r){if(!r||r.length!==t._hoverdata.length)return!0;for(var n=r.length-1;n>=0;n--){var a=r[n],i=t._hoverdata[n];if(a.curveNumber!==i.curveNumber||String(a.pointNumber)!==String(i.pointNumber))return!0}return!1}(t,0,ft))return;ft&&t.emit("plotly_unhover",{event:e,points:ft});t.emit("plotly_hover",{event:e,points:t._hoverdata,xaxes:d,yaxes:p,xvals:_,yvals:w})}(t,e,r,i)})},mi.loneHover=function(t,e){var r={color:t.color||$e.defaultLine,x0:t.x0||t.x||0,x1:t.x1||t.x||0,y0:t.y0||t.y||0,y1:t.y1||t.y||0,xLabel:t.xLabel,yLabel:t.yLabel,zLabel:t.zLabel,text:t.text,name:t.name,idealAlign:t.idealAlign,borderColor:t.borderColor,fontFamily:t.fontFamily,fontSize:t.fontSize,fontColor:t.fontColor,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0},a=n.select(e.container),i=e.outerContainer?n.select(e.outerContainer):a,o={hovermode:"closest",rotateLabels:!1,bgColor:e.bgColor||$e.background,container:a,outerContainer:i},l=Ti([r],o,e.gd);return ki(l,o.rotateLabels),l.node()};var Li=mi.hover,Oi=function(t,e,r,n){r("hoverlabel.bgcolor",(n=n||{}).bgcolor),r("hoverlabel.bordercolor",n.bordercolor),r("hoverlabel.namelength",n.namelength),oe.coerceFont(r,"hoverlabel.font",n.font)};var Di={moduleType:"component",name:"fx",constants:Te,schema:{layout:Ee},attributes:L,layoutAttributes:Ee,supplyLayoutGlobalDefaults:function(t,e){Oi(0,0,function(r,n){return oe.coerce(t,e,Ee,r,n)})},supplyDefaults:function(t,e,r,n){Oi(0,0,function(r,n){return oe.coerce(t,e,L,r,n)},n.hoverlabel)},supplyLayoutDefaults:function(t,e,r){function n(r,n){return oe.coerce(t,e,Ee,r,n)}var a;"select"===n("dragmode")&&n("selectdirection"),e._has("cartesian")?(e._isHoriz=function(t){for(var e=!0,r=0;r<t.length;r++){var n=t[r];if("h"!==n.orientation){e=!1;break}}return e}(r),a=e._isHoriz?"y":"x"):a="closest",n("hovermode",a)&&(n("hoverdistance"),n("spikedistance"));var i=e._has("mapbox"),o=e._has("geo"),l=e._basePlotModules.length;"zoom"===e.dragmode&&((i||o)&&1===l||i&&o&&2===l)&&(e.dragmode="pan")},calc:function(t){var e=t.calcdata,r=t._fullLayout;function n(t){return function(e){return oe.coerceHoverinfo({hoverinfo:e},{_module:t._module},r)}}for(var a=0;a<e.length;a++){var i=e[a],o=i[0].trace;if(!I.traceIs(o,"pie")){var l=I.traceIs(o,"2dMap")?Qe:oe.fillArray;l(o.hoverinfo,i,"hi",n(o)),o.hoverlabel&&(l(o.hoverlabel.bgcolor,i,"hbg"),l(o.hoverlabel.bordercolor,i,"hbc"),l(o.hoverlabel.font.size,i,"hts"),l(o.hoverlabel.font.color,i,"htc"),l(o.hoverlabel.font.family,i,"htf"),l(o.hoverlabel.namelength,i,"hnl"))}}},getDistanceFunction:vn.getDistanceFunction,getClosest:vn.getClosest,inbox:vn.inbox,quadrature:vn.quadrature,appendArrayPointValue:vn.appendArrayPointValue,castHoverOption:function(t,e,r){return oe.castOption(t,e,"hoverlabel."+r)},castHoverinfo:function(t,e,r){return oe.castOption(t,r,"hoverinfo",function(r){return oe.coerceHoverinfo({hoverinfo:r},{_module:t._module},e)})},hover:mi.hover,unhover:Ye.unhover,loneHover:mi.loneHover,loneUnhover:function(t){var e=oe.isD3Selection(t)?t:n.select(t);e.selectAll("g.hovertext").remove(),e.selectAll(".spikeline").remove()},click:function(t,e,r){var n=I.getComponentMethod("annotations","onClick")(t,t._hoverdata);function a(){t.emit("plotly_click",{points:t._hoverdata,event:e})}void 0!==r&&Li(t,e,r,!0),t._hoverdata&&e&&e.target&&(n&&n.then?n.then(a):a(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}};var Ri=function(t){var e=t._fullLayout;e._glcanvas&&e._glcanvas.size()&&e._glcanvas.each(function(t){t.regl&&t.regl.clear({color:!0,depth:!0})})},Pi=wr.FROM_BL,Ii=function(t,e,r){void 0===r&&(r=Pi[t.constraintoward||"center"]);var n=[t.r2l(t.range[0]),t.r2l(t.range[1])],a=n[0]+(n[1]-n[0])*r;t.range=t._input.range=[t.l2r(a+(n[0]-a)*e),t.l2r(a+(n[1]-a)*e)]};var Bi=function(){var t,e=0,r=!1;function n(e,r){return t.list.push({type:e,data:r?JSON.parse(JSON.stringify(r)):void 0}),t}return t={list:[],segmentId:function(){return e++},checkIntersection:function(t,e){return n("check",{seg1:t,seg2:e})},segmentChop:function(t,e){return n("div_seg",{seg:t,pt:e}),n("chop",{seg:t,pt:e})},statusRemove:function(t){return n("pop_seg",{seg:t})},segmentUpdate:function(t){return n("seg_update",{seg:t})},segmentNew:function(t,e){return n("new_seg",{seg:t,primary:e})},segmentRemove:function(t){return n("rem_seg",{seg:t})},tempStatus:function(t,e,r){return n("temp_status",{seg:t,above:e,below:r})},rewind:function(t){return n("rewind",{seg:t})},status:function(t,e,r){return n("status",{seg:t,above:e,below:r})},vert:function(e){return e===r?t:(r=e,n("vert",{x:e}))},log:function(t){return"string"!=typeof t&&(t=JSON.stringify(t,!1,"  ")),n("log",{txt:t})},reset:function(){return n("reset")},selected:function(t){return n("selected",{segs:t})},chainStart:function(t){return n("chain_start",{seg:t})},chainRemoveHead:function(t,e){return n("chain_rem_head",{index:t,pt:e})},chainRemoveTail:function(t,e){return n("chain_rem_tail",{index:t,pt:e})},chainNew:function(t,e){return n("chain_new",{pt1:t,pt2:e})},chainMatch:function(t){return n("chain_match",{index:t})},chainClose:function(t){return n("chain_close",{index:t})},chainAddHead:function(t,e){return n("chain_add_head",{index:t,pt:e})},chainAddTail:function(t,e){return n("chain_add_tail",{index:t,pt:e})},chainConnect:function(t,e){return n("chain_con",{index1:t,index2:e})},chainReverse:function(t){return n("chain_rev",{index:t})},chainJoin:function(t,e){return n("chain_join",{index1:t,index2:e})},done:function(){return n("done")}}};var Fi={toPolygon:function(t,e){function r(e){if(e.length<=0)return t.segments({inverted:!1,regions:[]});function r(e){var r=e.slice(0,e.length-1);return t.segments({inverted:!1,regions:[r]})}for(var n=r(e[0]),a=1;a<e.length;a++)n=t.selectDifference(t.combine(n,r(e[a])));return n}if("Polygon"===e.type)return t.polygon(r(e.coordinates));if("MultiPolygon"===e.type){for(var n=t.segments({inverted:!1,regions:[]}),a=0;a<e.coordinates.length;a++)n=t.selectUnion(t.combine(n,r(e.coordinates[a])));return t.polygon(n)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(t,e,r){function n(t,r){return e.pointInsideRegion([.5*(t[0][0]+t[1][0]),.5*(t[0][1]+t[1][1])],r)}function a(t){return{region:t,children:[]}}r=t.polygon(t.segments(r));var i=a(null);function o(t,e){for(var r=0;r<t.children.length;r++){if(n(e,(l=t.children[r]).region))return void o(l,e)}var i=a(e);for(r=0;r<t.children.length;r++){var l;n((l=t.children[r]).region,e)&&(i.children.push(l),t.children.splice(r,1),r--)}t.children.push(i)}for(var l=0;l<r.regions.length;l++){var s=r.regions[l];s.length<3||o(i,s)}function u(t,e){for(var r=0,n=t[t.length-1][0],a=t[t.length-1][1],i=[],o=0;o<t.length;o++){var l=t[o][0],s=t[o][1];i.push([l,s]),r+=s*n-l*a,n=l,a=s}return r<0!==e&&i.reverse(),i.push([i[0][0],i[0][1]]),i}var c=[];function f(t){var e=[u(t.region,!1)];c.push(e);for(var r=0;r<t.children.length;r++)e.push(h(t.children[r]))}function h(t){for(var e=0;e<t.children.length;e++)f(t.children[e]);return u(t.region,!0)}for(l=0;l<i.children.length;l++)f(i.children[l]);return c.length<=0?{type:"Polygon",coordinates:[]}:1==c.length?{type:"Polygon",coordinates:c[0]}:{type:"MultiPolygon",coordinates:c}}},zi={create:function(){var t={root:{root:!0,next:null},exists:function(e){return null!==e&&e!==t.root},isEmpty:function(){return null===t.root.next},getHead:function(){return t.root.next},insertBefore:function(e,r){for(var n=t.root,a=t.root.next;null!==a;){if(r(a))return e.prev=a.prev,e.next=a,a.prev.next=e,void(a.prev=e);n=a,a=a.next}n.next=e,e.prev=n,e.next=null},findTransition:function(e){for(var r=t.root,n=t.root.next;null!==n&&!e(n);)r=n,n=n.next;return{before:r===t.root?null:r,after:n,insert:function(t){return t.prev=r,t.next=n,r.next=t,null!==n&&(n.prev=t),t}}}};return t},node:function(t){return t.prev=null,t.next=null,t.remove=function(){t.prev.next=t.next,t.next&&(t.next.prev=t.prev),t.prev=null,t.next=null},t}};var Ni=function(t,e,r){function n(t,e,n){return{id:r?r.segmentId():-1,start:t,end:e,myFill:{above:n.myFill.above,below:n.myFill.below},otherFill:null}}var a=zi.create();function i(t,r){a.insertBefore(t,function(n){return function(t,r,n,a,i,o){var l=e.pointsCompare(r,i);return 0!==l?l:e.pointsSame(n,o)?0:t!==a?t?1:-1:e.pointAboveOrOnLine(n,a?i:o,a?o:i)?1:-1}(t.isStart,t.pt,r,n.isStart,n.pt,n.other.pt)<0})}function o(t,e){var r=function(t,e){var r=zi.node({isStart:!0,pt:t.start,seg:t,primary:e,other:null,status:null});return i(r,t.end),r}(t,e);return function(t,e,r){var n=zi.node({isStart:!1,pt:e.end,seg:e,primary:r,other:t,status:null});t.other=n,i(n,t.pt)}(r,t,e),r}function l(t,e){var a=n(e,t.seg.end,t.seg);return function(t,e){r&&r.segmentChop(t.seg,e),t.other.remove(),t.seg.end=e,t.other.pt=e,i(t.other,t.pt)}(t,e),o(a,t.primary)}function s(n,i){var o=zi.create();function s(t){return o.findTransition(function(r){var n,a,i,o,l,s;return n=t,a=r.ev,i=n.seg.start,o=n.seg.end,l=a.seg.start,s=a.seg.end,(e.pointsCollinear(i,l,s)?e.pointsCollinear(o,l,s)?1:e.pointAboveOrOnLine(o,l,s)?1:-1:e.pointAboveOrOnLine(i,l,s)?1:-1)>0})}function u(t,n){var a=t.seg,i=n.seg,o=a.start,s=a.end,u=i.start,c=i.end;r&&r.checkIntersection(a,i);var f=e.linesIntersect(o,s,u,c);if(!1===f){if(!e.pointsCollinear(o,s,u))return!1;if(e.pointsSame(o,c)||e.pointsSame(s,u))return!1;var h=e.pointsSame(o,u),d=e.pointsSame(s,c);if(h&&d)return n;var p=!h&&e.pointBetween(o,u,c),g=!d&&e.pointBetween(s,u,c);if(h)return g?l(n,s):l(t,c),n;p&&(d||(g?l(n,s):l(t,c)),l(n,o))}else 0===f.alongA&&(-1===f.alongB?l(t,u):0===f.alongB?l(t,f.pt):1===f.alongB&&l(t,c)),0===f.alongB&&(-1===f.alongA?l(n,o):0===f.alongA?l(n,f.pt):1===f.alongA&&l(n,s));return!1}for(var c=[];!a.isEmpty();){var f=a.getHead();if(r&&r.vert(f.pt[0]),f.isStart){r&&r.segmentNew(f.seg,f.primary);var h=s(f),d=h.before?h.before.ev:null,p=h.after?h.after.ev:null;function g(){if(d){var t=u(f,d);if(t)return t}return!!p&&u(f,p)}r&&r.tempStatus(f.seg,!!d&&d.seg,!!p&&p.seg);var v,m,y=g();if(y)t?(m=null===f.seg.myFill.below||f.seg.myFill.above!==f.seg.myFill.below)&&(y.seg.myFill.above=!y.seg.myFill.above):y.seg.otherFill=f.seg.myFill,r&&r.segmentUpdate(y.seg),f.other.remove(),f.remove();if(a.getHead()!==f){r&&r.rewind(f.seg);continue}t?(m=null===f.seg.myFill.below||f.seg.myFill.above!==f.seg.myFill.below,f.seg.myFill.below=p?p.seg.myFill.above:n,f.seg.myFill.above=m?!f.seg.myFill.below:f.seg.myFill.below):null===f.seg.otherFill&&(v=p?f.primary===p.primary?p.seg.otherFill.above:p.seg.myFill.above:f.primary?i:n,f.seg.otherFill={above:v,below:v}),r&&r.status(f.seg,!!d&&d.seg,!!p&&p.seg),f.other.status=h.insert(zi.node({ev:f}))}else{var x=f.status;if(null===x)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(o.exists(x.prev)&&o.exists(x.next)&&u(x.prev.ev,x.next.ev),r&&r.statusRemove(x.ev.seg),x.remove(),!f.primary){var b=f.seg.myFill;f.seg.myFill=f.seg.otherFill,f.seg.otherFill=b}c.push(f.seg)}a.getHead().remove()}return r&&r.done(),c}return t?{addRegion:function(t){for(var n,a,i,l=t[t.length-1],s=0;s<t.length;s++){n=l,l=t[s];var u=e.pointsCompare(n,l);0!==u&&o((a=u<0?n:l,i=u<0?l:n,{id:r?r.segmentId():-1,start:a,end:i,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(t){return s(t,!1)}}:{calculate:function(t,e,r,a){return t.forEach(function(t){o(n(t.start,t.end,t),!0)}),r.forEach(function(t){o(n(t.start,t.end,t),!1)}),s(e,a)}}};var ji=function(t,e,r){var n=[],a=[];return t.forEach(function(t){var i=t.start,o=t.end;if(e.pointsSame(i,o))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{r&&r.chainStart(t);for(var l={index:0,matches_head:!1,matches_pt1:!1},s={index:0,matches_head:!1,matches_pt1:!1},u=l,c=0;c<n.length;c++){var f=(v=n[c])[0],h=(v[1],v[v.length-1]);if(v[v.length-2],e.pointsSame(f,i)){if(M(c,!0,!0))break}else if(e.pointsSame(f,o)){if(M(c,!0,!1))break}else if(e.pointsSame(h,i)){if(M(c,!1,!0))break}else if(e.pointsSame(h,o)&&M(c,!1,!1))break}if(u===l)return n.push([i,o]),void(r&&r.chainNew(i,o));if(u===s){r&&r.chainMatch(l.index);var d=l.index,p=l.matches_pt1?o:i,g=l.matches_head,v=n[d],m=g?v[0]:v[v.length-1],y=g?v[1]:v[v.length-2],x=g?v[v.length-1]:v[0],b=g?v[v.length-2]:v[1];return e.pointsCollinear(y,m,p)&&(g?(r&&r.chainRemoveHead(l.index,p),v.shift()):(r&&r.chainRemoveTail(l.index,p),v.pop()),m=y),e.pointsSame(x,p)?(n.splice(d,1),e.pointsCollinear(b,x,m)&&(g?(r&&r.chainRemoveTail(l.index,m),v.pop()):(r&&r.chainRemoveHead(l.index,m),v.shift())),r&&r.chainClose(l.index),void a.push(v)):void(g?(r&&r.chainAddHead(l.index,p),v.unshift(p)):(r&&r.chainAddTail(l.index,p),v.push(p)))}var _=l.index,w=s.index;r&&r.chainConnect(_,w);var A=n[_].length<n[w].length;l.matches_head?s.matches_head?A?(T(_),k(_,w)):(T(w),k(w,_)):k(w,_):s.matches_head?k(_,w):A?(T(_),k(w,_)):(T(w),k(_,w))}function M(t,e,r){return u.index=t,u.matches_head=e,u.matches_pt1=r,u===l?(u=s,!1):(u=null,!0)}function T(t){r&&r.chainReverse(t),n[t].reverse()}function k(t,a){var i=n[t],o=n[a],l=i[i.length-1],s=i[i.length-2],u=o[0],c=o[1];e.pointsCollinear(s,l,u)&&(r&&r.chainRemoveTail(t,l),i.pop(),l=s),e.pointsCollinear(l,u,c)&&(r&&r.chainRemoveHead(a,u),o.shift()),r&&r.chainJoin(t,a),n[t]=i.concat(o),n.splice(a,1)}}),a};function Ui(t,e,r){var n=[];return t.forEach(function(t){var a=(t.myFill.above?8:0)+(t.myFill.below?4:0)+(t.otherFill&&t.otherFill.above?2:0)+(t.otherFill&&t.otherFill.below?1:0);0!==e[a]&&n.push({id:r?r.segmentId():-1,start:t.start,end:t.end,myFill:{above:1===e[a],below:2===e[a]},otherFill:null})}),r&&r.selected(n),n}var Vi,Hi={union:function(t,e){return Ui(t,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],e)},intersect:function(t,e){return Ui(t,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],e)},difference:function(t,e){return Ui(t,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],e)},differenceRev:function(t,e){return Ui(t,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],e)},xor:function(t,e){return Ui(t,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],e)}},qi=!1,Gi=function(t){"number"!=typeof t&&(t=1e-10);var e={epsilon:function(e){return"number"==typeof e&&(t=e),t},pointAboveOrOnLine:function(e,r,n){var a=r[0],i=r[1],o=n[0],l=n[1],s=e[0];return(o-a)*(e[1]-i)-(l-i)*(s-a)>=-t},pointBetween:function(e,r,n){var a=e[1]-r[1],i=n[0]-r[0],o=e[0]-r[0],l=n[1]-r[1],s=o*i+a*l;return!(s<t||s-(i*i+l*l)>-t)},pointsSameX:function(e,r){return Math.abs(e[0]-r[0])<t},pointsSameY:function(e,r){return Math.abs(e[1]-r[1])<t},pointsSame:function(t,r){return e.pointsSameX(t,r)&&e.pointsSameY(t,r)},pointsCompare:function(t,r){return e.pointsSameX(t,r)?e.pointsSameY(t,r)?0:t[1]<r[1]?-1:1:t[0]<r[0]?-1:1},pointsCollinear:function(e,r,n){var a=e[0]-r[0],i=e[1]-r[1],o=r[0]-n[0],l=r[1]-n[1];return Math.abs(a*l-o*i)<t},linesIntersect:function(e,r,n,a){var i=r[0]-e[0],o=r[1]-e[1],l=a[0]-n[0],s=a[1]-n[1],u=i*s-o*l;if(Math.abs(u)<t)return!1;var c=e[0]-n[0],f=e[1]-n[1],h=(l*f-s*c)/u,d=(i*f-o*c)/u,p={alongA:0,alongB:0,pt:[e[0]+h*i,e[1]+h*o]};return p.alongA=h<=-t?-2:h<t?-1:h-1<=-t?0:h-1<t?1:2,p.alongB=d<=-t?-2:d<t?-1:d-1<=-t?0:d-1<t?1:2,p},pointInsideRegion:function(e,r){for(var n=e[0],a=e[1],i=r[r.length-1][0],o=r[r.length-1][1],l=!1,s=0;s<r.length;s++){var u=r[s][0],c=r[s][1];c-a>t!=o-a>t&&(i-u)*(a-c)/(o-c)+u-n>t&&(l=!l),i=u,o=c}return l}};return e}();function Xi(t,e,r){var n=Vi.segments(t),a=Vi.segments(e),i=r(Vi.combine(n,a));return Vi.polygon(i)}Vi={buildLog:function(t){return!0===t?qi=Bi():!1===t&&(qi=!1),!1!==qi&&qi.list},epsilon:function(t){return Gi.epsilon(t)},segments:function(t){var e=Ni(!0,Gi,qi);return t.regions.forEach(e.addRegion),{segments:e.calculate(t.inverted),inverted:t.inverted}},combine:function(t,e){return{combined:Ni(!1,Gi,qi).calculate(t.segments,t.inverted,e.segments,e.inverted),inverted1:t.inverted,inverted2:e.inverted}},selectUnion:function(t){return{segments:Hi.union(t.combined,qi),inverted:t.inverted1||t.inverted2}},selectIntersect:function(t){return{segments:Hi.intersect(t.combined,qi),inverted:t.inverted1&&t.inverted2}},selectDifference:function(t){return{segments:Hi.difference(t.combined,qi),inverted:t.inverted1&&!t.inverted2}},selectDifferenceRev:function(t){return{segments:Hi.differenceRev(t.combined,qi),inverted:!t.inverted1&&t.inverted2}},selectXor:function(t){return{segments:Hi.xor(t.combined,qi),inverted:t.inverted1!==t.inverted2}},polygon:function(t){return{regions:ji(t.segments,Gi,qi),inverted:t.inverted}},polygonFromGeoJSON:function(t){return Fi.toPolygon(Vi,t)},polygonToGeoJSON:function(t){return Fi.fromPolygon(Vi,Gi,t)},union:function(t,e){return Xi(t,e,Vi.selectUnion)},intersect:function(t,e){return Xi(t,e,Vi.selectIntersect)},difference:function(t,e){return Xi(t,e,Vi.selectDifference)},differenceRev:function(t,e){return Xi(t,e,Vi.selectDifferenceRev)},xor:function(t,e){return Xi(t,e,Vi.selectXor)}},"object"==typeof window&&(window.PolyBool=Vi);var Yi,Wi=Vi,Zi=qt.dot,Ji=i.BADNUM,Qi=Yi={};Qi.tester=function(t){if(Array.isArray(t[0][0]))return Qi.multitester(t);var e,r=t.slice(),n=r[0][0],a=n,i=r[0][1],o=i;for(r.push(r[0]),e=1;e<r.length;e++)n=Math.min(n,r[e][0]),a=Math.max(a,r[e][0]),i=Math.min(i,r[e][1]),o=Math.max(o,r[e][1]);var l,s=!1;5===r.length&&(r[0][0]===r[1][0]?r[2][0]===r[3][0]&&r[0][1]===r[3][1]&&r[1][1]===r[2][1]&&(s=!0,l=function(t){return t[0]===r[0][0]}):r[0][1]===r[1][1]&&r[2][1]===r[3][1]&&r[0][0]===r[3][0]&&r[1][0]===r[2][0]&&(s=!0,l=function(t){return t[1]===r[0][1]}));var u=!0,c=r[0];for(e=1;e<r.length;e++)if(c[0]!==r[e][0]||c[1]!==r[e][1]){u=!1;break}return{xmin:n,xmax:a,ymin:i,ymax:o,pts:r,contains:s?function(t,e){var r=t[0],s=t[1];return!(r===Ji||r<n||r>a||s===Ji||s<i||s>o||e&&l(t))}:function(t,e){var l=t[0],s=t[1];if(l===Ji||l<n||l>a||s===Ji||s<i||s>o)return!1;var u,c,f,h,d,p=r.length,g=r[0][0],v=r[0][1],m=0;for(u=1;u<p;u++)if(c=g,f=v,g=r[u][0],v=r[u][1],!(l<(h=Math.min(c,g))||l>Math.max(c,g)||s>Math.max(f,v)))if(s<Math.min(f,v))l!==h&&m++;else{if(s===(d=g===c?s:f+(l-c)*(v-f)/(g-c)))return 1!==u||!e;s<=d&&l!==h&&m++}return m%2==1},isRect:s,degenerate:u}},Qi.multitester=function(t){for(var e=[],r=t[0][0][0],n=r,a=t[0][0][1],i=a,o=0;o<t.length;o++){var l=Qi.tester(t[o]);l.subtract=t[o].subtract,e.push(l),r=Math.min(r,l.xmin),n=Math.max(n,l.xmax),a=Math.min(a,l.ymin),i=Math.max(i,l.ymax)}return{xmin:r,xmax:n,ymin:a,ymax:i,pts:[],contains:function(t,r){for(var n=!1,a=0;a<e.length;a++)e[a].contains(t,r)&&(n=!1===e[a].subtract);return n},isRect:!1,degenerate:!1}};var $i=Qi.isSegmentBent=function(t,e,r,n){var a,i,o,l=t[e],s=[t[r][0]-l[0],t[r][1]-l[1]],u=Zi(s,s),c=Math.sqrt(u),f=[-s[1]/c,s[0]/c];for(a=e+1;a<r;a++)if(i=[t[a][0]-l[0],t[a][1]-l[1]],(o=Zi(i,s))<0||o>u||Math.abs(Zi(i,f))>n)return!0;return!1};Qi.filter=function(t,e){var r=[t[0]],n=0,a=0;function i(i){t.push(i);var o=r.length,l=n;r.splice(a+1);for(var s=l+1;s<t.length;s++)(s===t.length-1||$i(t,l,s+1,e))&&(r.push(t[s]),r.length<o-2&&(n=s,a=r.length-1),l=s)}t.length>1&&i(t.pop());return{addPt:i,raw:t,filtered:r}};var Ki=vn.makeEventData,to=De.getFromId,eo=ra,ro=Oe.MINSELECT,no=Yi.filter,ao=Yi.tester,io=Yi.multitester;function oo(t){return t._id}function lo(t,e,r){var n,a,i,o;if(r){var l=r.points||[];for(n=0;n<e.length;n++)(o=e[n].cd[0].trace).selectedpoints=[],o._input.selectedpoints=[];for(n=0;n<l.length;n++){var s=l[n],u=s.data,c=s.fullData;s.pointIndices?([].push.apply(u.selectedpoints,s.pointIndices),[].push.apply(c.selectedpoints,s.pointIndices)):(u.selectedpoints.push(s.pointIndex),c.selectedpoints.push(s.pointIndex))}}else for(n=0;n<e.length;n++)delete(o=e[n].cd[0].trace).selectedpoints,delete o._input.selectedpoints;var f={};for(n=0;n<e.length;n++){var h=(i=e[n])._module.name;f[h]?f[h].push(i):f[h]=[i]}var d=Object.keys(f).sort(eo);for(n=0;n<d.length;n++){var p=f[d[n]],g=p.length,v=p[0],m=v.cd[0].trace;if(I.traceIs(m,"regl")){var y=new Array(g);for(a=0;a<g;a++)y[a]=p[a].cd;v._module.style(t,y)}else for(a=0;a<g;a++)v._module.style(t,p[a].cd)}}function so(t,e){if(Array.isArray(t))for(var r=e.cd,n=e.cd[0].trace,a=0;a<t.length;a++)t[a]=Ki(t[a],n,r);return t}function uo(t){t.selectAll(".select-outline").remove()}var co=function(t,e,r,n,a){var i,o,l,s,u,c,f,h,d,p=n.gd,g=p._fullLayout,v=g._zoomlayer,m=n.element.getBoundingClientRect(),y=n.plotinfo,x=y.xaxis._offset,b=y.yaxis._offset,_=e-m.left,w=r-m.top,A=_,M=w,T="M"+_+","+w,k=n.xaxes[0]._length,E=n.yaxes[0]._length,C=n.xaxes.map(oo),S=n.yaxes.map(oo),L=n.xaxes.concat(n.yaxes),O=t.altKey,D=g._lastSelectedSubplot&&g._lastSelectedSubplot===y.id;D&&(t.shiftKey||t.altKey)&&y.selection&&y.selection.polygons&&!n.polygons?(n.polygons=y.selection.polygons,n.mergedPolygons=y.selection.mergedPolygons):(!t.shiftKey&&!t.altKey||(t.shiftKey||t.altKey)&&!y.selection)&&(y.selection={},y.selection.polygons=n.polygons=[],y.selection.mergedPolygons=n.mergedPolygons=[]),D||(uo(v),g._lastSelectedSubplot=y.id),"lasso"===a&&(i=no([[_,w]],Oe.BENDPX));var R=v.selectAll("path.select-outline-"+y.id).data([1,2]);R.enter().append("path").attr("class",function(t){return"select-outline select-outline-"+t+" select-outline-"+y.id}).attr("transform","translate("+x+", "+b+")").attr("d",T+"Z");var P,I=v.append("path").attr("class","zoombox-corners").style({fill:$e.background,stroke:$e.defaultLine,"stroke-width":1}).attr("transform","translate("+x+", "+b+")").attr("d","M0,0Z"),B=[],F=g._uid+Oe.SELECTID,z=[];for(u=0;u<p.calcdata.length;u++)if(!0===(f=(c=p.calcdata[u])[0].trace).visible&&f._module&&f._module.selectPoints)if(n.subplot)f.subplot!==n.subplot&&f.geo!==n.subplot||B.push({_module:f._module,cd:c,xaxis:n.xaxes[0],yaxis:n.yaxes[0]});else if("splom"===f.type&&f._xaxes[C[0]]&&f._yaxes[S[0]])B.push({_module:f._module,cd:c,xaxis:n.xaxes[0],yaxis:n.yaxes[0]});else{if(-1===C.indexOf(f.xaxis))continue;if(-1===S.indexOf(f.yaxis))continue;B.push({_module:f._module,cd:c,xaxis:to(p,f.xaxis),yaxis:to(p,f.yaxis)})}function N(t){var e="y"===t._id.charAt(0)?1:0;return function(r){return t.p2d(r[e])}}function j(t,e){return t-e}P=y.fillRangeItems?y.fillRangeItems:"select"===a?function(t,e){var r=t.range={};for(u=0;u<L.length;u++){var n=L[u],a=n._id.charAt(0);r[n._id]=[n.p2d(e[a+"min"]),n.p2d(e[a+"max"])].sort(j)}}:function(t,e,r){var n=t.lassoPoints={};for(u=0;u<L.length;u++){var a=L[u];n[a._id]=r.filtered.map(N(a))}},n.moveFn=function(t,e){A=Math.max(0,Math.min(k,t+_)),M=Math.max(0,Math.min(E,e+w));var r=Math.abs(A-_),c=Math.abs(M-w);if("select"===a){var f=g.selectdirection;"h"===(f="any"===g.selectdirection?c<Math.min(.6*r,ro)?"h":r<Math.min(.6*c,ro)?"v":"d":g.selectdirection)?((s=[[_,0],[_,E],[A,E],[A,0]]).xmin=Math.min(_,A),s.xmax=Math.max(_,A),s.ymin=Math.min(0,E),s.ymax=Math.max(0,E),I.attr("d","M"+s.xmin+","+(w-ro)+"h-4v"+2*ro+"h4ZM"+(s.xmax-1)+","+(w-ro)+"h4v"+2*ro+"h-4Z")):"v"===f?((s=[[0,w],[0,M],[k,M],[k,w]]).xmin=Math.min(0,k),s.xmax=Math.max(0,k),s.ymin=Math.min(w,M),s.ymax=Math.max(w,M),I.attr("d","M"+(_-ro)+","+s.ymin+"v-4h"+2*ro+"v4ZM"+(_-ro)+","+(s.ymax-1)+"v4h"+2*ro+"v-4Z")):"d"===f&&((s=[[_,w],[_,M],[A,M],[A,w]]).xmin=Math.min(_,A),s.xmax=Math.max(_,A),s.ymin=Math.min(w,M),s.ymax=Math.max(w,M),I.attr("d","M0,0Z"))}else"lasso"===a&&(i.addPt([A,M]),s=i.filtered);n.polygons&&n.polygons.length?(l=function(t,e,r){return r?Wi.difference({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions:Wi.union({regions:t,inverted:!1},{regions:[e],inverted:!1}).regions}(n.mergedPolygons,s,O),s.subtract=O,o=io(n.polygons.concat([s]))):(l=[s],o=ao(s));var v=[];for(u=0;u<l.length;u++){var m=l[u];v.push(m.join("L")+"L"+m[0])}R.attr("d","M"+v.join("M")+"Z"),re.throttle(F,Oe.SELECTDELAY,function(){z=[];var t,e,r=[];for(u=0;u<B.length;u++)if(e=(h=B[u])._module.selectPoints(h,o),r.push(e),t=so(e,h),z.length)for(var a=0;a<t.length;a++)z.push(t[a]);else z=t;lo(p,B,d={points:z}),P(d,s,i),n.gd.emit("plotly_selecting",d)})},n.clickFn=function(t,e){I.remove(),re.done(F).then(function(){if(re.clear(F),2===t){for(R.remove(),u=0;u<B.length;u++)(h=B[u])._module.selectPoints(h,!1);lo(p,B),p.emit("plotly_deselect",null)}else p.emit("plotly_selected",void 0);Di.click(p,e)})},n.doneFn=function(){I.remove(),re.done(F).then(function(){re.clear(F),n.gd.emit("plotly_selected",d),s&&n.polygons&&(s.subtract=O,n.polygons.push(s),n.mergedPolygons.length=0,[].push.apply(n.mergedPolygons,l))})}},fo=uo,ho=wr.FROM_TL,po=Na.doTicks,go=De.getFromId,vo=co,mo=fo,yo=Oe.MINDRAG,xo=Oe.MINZOOM,bo=!0;function _o(t,e,r,n){var a=oe.ensureSingle(t.draglayer,e,r,function(e){e.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",t.id)});return a.call(bn,n),a.node()}function wo(t,e,r,a,i,o,l){var s=_o(t,"rect",e,r);return n.select(s).call(Jr.setRect,a,i,o,l),s}function Ao(t,e){for(var r=0;r<t.length;r++)if(!t[r].fixedrange)return e;return""}function Mo(t,e,r,n,a){var i,o,l,s;for(i=0;i<t.length;i++)(o=t[i]).fixedrange||(l=o._rl[0],s=o._rl[1]-l,o.range=[o.l2r(l+s*e),o.l2r(l+s*r)],n[o._name+".range[0]"]=o.range[0],n[o._name+".range[1]"]=o.range[1]);if(a&&a.length){var u=(e+(1-r))/2;Mo(a,u,1-u,n)}}function To(t,e){for(var r=0;r<t.length;r++){var n=t[r];n.fixedrange||(n.range=[n.l2r(n._rl[0]-e/n._m),n.l2r(n._rl[1]-e/n._m)])}}function ko(t){return 1-(t>=0?Math.min(t,.9):1/(1/Math.max(t,-.3)+3.222))}function Eo(t,e,r,n,a){return t.append("path").attr("class","zoombox").style({fill:e>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+r+", "+n+")").attr("d",a+"Z")}function Co(t,e,r){return t.append("path").attr("class","zoombox-corners").style({fill:$e.background,stroke:$e.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+e+", "+r+")").attr("d","M0,0Z")}function So(t,e,r,n,a,i){t.attr("d",n+"M"+r.l+","+r.t+"v"+r.h+"h"+r.w+"v-"+r.h+"h-"+r.w+"Z"),Lo(t,e,a,i)}function Lo(t,e,r,n){r||(t.transition().style("fill",n>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),e.transition().style("opacity",1).duration(200))}function Oo(t){n.select(t).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function Do(t){bo&&t.data&&t._context.showTips&&(oe.notifier(oe._(t,"Double-click to zoom back out"),"long"),bo=!1)}function Ro(t){return"lasso"===t||"select"===t}function Po(t){var e=Math.floor(Math.min(t.b-t.t,t.r-t.l,xo)/2);return"M"+(t.l-3.5)+","+(t.t-.5+e)+"h3v"+-e+"h"+e+"v-3h-"+(e+3)+"ZM"+(t.r+3.5)+","+(t.t-.5+e)+"h-3v"+-e+"h"+-e+"v-3h"+(e+3)+"ZM"+(t.r+3.5)+","+(t.b+.5-e)+"h-3v"+e+"h"+-e+"v3h"+(e+3)+"ZM"+(t.l-3.5)+","+(t.b+.5-e)+"h3v"+e+"h"+e+"v3h-"+(e+3)+"Z"}function Io(t,e){if(Pe){var r=void 0!==t.onwheel?"wheel":"mousewheel";t._onwheel&&t.removeEventListener(r,t._onwheel),t._onwheel=e,t.addEventListener(r,e,{passive:!1})}else void 0!==t.onwheel?t.onwheel=e:void 0!==t.onmousewheel&&(t.onmousewheel=e)}function Bo(t){var e=[];for(var r in t)e.push(t[r]);return e}var Fo={},zo=function(t,e,r,a,i,o,l,s){var u,f,h,d,p,g,v,m,y,x,b,_,w,A,M,T,k,E=t._fullLayout._zoomlayer,C=l+s==="nsew",S=1===(l+s).length;function L(){if(u=e.xaxis,f=e.yaxis,y=u._length,x=f._length,v=u._offset,m=f._offset,(h={})[u._id]=u,(d={})[f._id]=f,l&&s)for(var r=e.overlays,n=0;n<r.length;n++){var a=r[n].xaxis;h[a._id]=a;var i=r[n].yaxis;d[i._id]=i}p=Bo(h),g=Bo(d),_=Ao(p,s),w=Ao(g,l),A=!w&&!_,b=function(t,e,r){for(var n,a,i,o,l=t._fullLayout._axisConstraintGroups,s=!1,u={},c={},f=0;f<l.length;f++){var h=l[f];for(n in e)if(h[n]){for(i in h)("x"===i.charAt(0)?e:r)[i]||(u[i]=1);for(a in r)h[a]&&(s=!0)}for(a in r)if(h[a])for(o in h)("x"===o.charAt(0)?e:r)[o]||(c[o]=1)}s&&(oe.extendFlat(u,c),c={});var d={},p=[];for(i in u){var g=go(t,i);p.push(g),d[g._id]=g}var v={},m=[];for(o in c){var y=go(t,o);m.push(y),v[y._id]=y}return{xaHash:d,yaHash:v,xaxes:p,yaxes:m,isSubplotConstrained:s}}(t,h,d),M=b.isSubplotConstrained,T=s||M,k=l||M}L();var O=function(t,e,r){return t?"nsew"===t?r?"":"pan"===e?"move":"crosshair":t.toLowerCase()+"-resize":"pointer"}(w+_,t._fullLayout.dragmode,C),D=wo(e,l+s+"drag",O,r,a,i,o);if(A&&!C)return D.onmousedown=null,D.style.pointerEvents="none",D;var R,P,B,F,z,N,j,U,V,H={element:D,gd:t,plotinfo:e,prepFn:function(e,r,n){var a=t._fullLayout.dragmode;L(),A||(C?e.shiftKey?"pan"===a?a="zoom":Ro(a)||(a="pan"):e.ctrlKey&&(a="pan"):a="pan"),H.minDrag="lasso"===a?1:void 0,Ro(a)?(H.xaxes=p,H.yaxes=g,vo(e,r,n,H,a)):A?mo(E):"zoom"===a?(H.moveFn=G,H.doneFn=X,H.minDrag=1,function(e,r,n){var a=D.getBoundingClientRect();R=r-a.left,P=n-a.top,B={l:R,r:R,w:0,t:P,b:P,h:0},F=t._hmpixcount?t._hmlumcount/t._hmpixcount:c(t._fullLayout.plot_bgcolor).getLuminance(),N=!1,j="xy",U=Eo(E,F,v,m,z="M0,0H"+y+"V"+x+"H0V0"),V=Co(E,v,m),mo(E)}(0,r,n)):"pan"===a&&(H.moveFn=Q,H.doneFn=K,mo(E))},clickFn:function(r,a){if(Oo(t),2!==r||S||function(){if(!t._transitioningWithDuration){var e,r,n,a=t._context.doubleClick,i=(_?p:[]).concat(w?g:[]),o={};if("reset+autosize"===a)for(a="autosize",r=0;r<i.length;r++)if((e=i[r])._rangeInitial&&(e.range[0]!==e._rangeInitial[0]||e.range[1]!==e._rangeInitial[1])||!e._rangeInitial&&!e.autorange){a="reset";break}if("autosize"===a)for(r=0;r<i.length;r++)(e=i[r]).fixedrange||(o[e._name+".autorange"]=!0);else if("reset"===a)for((_||M)&&(i=i.concat(b.xaxes)),w&&!M&&(i=i.concat(b.yaxes)),M&&(_?w||(i=i.concat(g)):i=i.concat(p)),r=0;r<i.length;r++)(e=i[r])._rangeInitial?(n=e._rangeInitial,o[e._name+".range[0]"]=n[0],o[e._name+".range[1]"]=n[1]):o[e._name+".autorange"]=!0;t.emit("plotly_doubleclick",null),I.call("relayout",t,o)}}(),C)Di.click(t,a,e.id);else if(1===r&&S){var i=l?f:u,o="s"===l||"w"===s?0:1,c=i._name+".range["+o+"]",h=function(t,e){var r,a=t.range[e],i=Math.abs(a-t.range[1-e]);return"date"===t.type?a:"log"===t.type?(r=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,n.format("."+r+"g")(Math.pow(10,a))):(r=Math.floor(Math.log(Math.abs(a))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,n.format("."+String(r)+"g")(a))}(i,o),d="left",v="middle";if(i.fixedrange)return;l?(v="n"===l?"top":"bottom","right"===i.side&&(d="right")):"e"===s&&(d="right"),t._context.showAxisRangeEntryBoxes&&n.select(D).call(Mr.makeEditable,{gd:t,immediate:!0,background:t._fullLayout.paper_bgcolor,text:String(h),fill:i.tickfont?i.tickfont.color:"#444",horizontalAlign:d,verticalAlign:v}).on("edit",function(e){var r=i.d2r(e);void 0!==r&&I.call("relayout",t,c,r)})}}};Ye.init(H);var q={};function G(e,r){if(t._transitioningWithDuration)return!1;var n=Math.max(0,Math.min(y,e+R)),a=Math.max(0,Math.min(x,r+P)),i=Math.abs(n-R),o=Math.abs(a-P);function l(){j="",B.r=B.l,B.t=B.b,V.attr("d","M0,0Z")}B.l=Math.min(R,n),B.r=Math.max(R,n),B.t=Math.min(P,a),B.b=Math.max(P,a),M?i>xo||o>xo?(j="xy",i/y>o/x?(o=i*x/y,P>a?B.t=P-o:B.b=P+o):(i=o*y/x,R>n?B.l=R-i:B.r=R+i),V.attr("d",Po(B))):l():!w||o<Math.min(Math.max(.6*i,yo),xo)?i<yo?l():(B.t=0,B.b=x,j="x",V.attr("d",function(t,e){return"M"+(t.l-.5)+","+(e-xo-.5)+"h-3v"+(2*xo+1)+"h3ZM"+(t.r+.5)+","+(e-xo-.5)+"h3v"+(2*xo+1)+"h-3Z"}(B,P))):!_||i<Math.min(.6*o,xo)?(B.l=0,B.r=y,j="y",V.attr("d",function(t,e){return"M"+(e-xo-.5)+","+(t.t-.5)+"v-3h"+(2*xo+1)+"v3ZM"+(e-xo-.5)+","+(t.b+.5)+"v3h"+(2*xo+1)+"v-3Z"}(B,R))):(j="xy",V.attr("d",Po(B))),B.w=B.r-B.l,B.h=B.b-B.t,So(U,V,B,z,N,F),N=!0}function X(){if(Math.min(B.h,B.w)<2*yo)return Oo(t);"xy"!==j&&"x"!==j||Mo(p,B.l/y,B.r/y,q,b.xaxes),"xy"!==j&&"y"!==j||Mo(g,(x-B.b)/x,(x-B.t)/x,q,b.yaxes),Oo(t),K(),Do(t)}var Y=[0,0,y,x],W=null,Z=Oe.REDRAWDELAY,J=e.mainplot?t._fullLayout._plots[e.mainplot]:e;function Q(e,r){if(!t._transitioningWithDuration){if("ew"===_||"ns"===w)return _&&To(p,e),w&&To(g,r),tt([_?-e:0,w?-r:0,y,x]),void $(w,_);if(M&&_&&w){var n="w"===_==("n"===w)?1:-1,a=(e/y+n*r/x)/2;e=a*y,r=n*a*x}"w"===_?e=s(p,0,e):"e"===_?e=s(p,1,-e):_||(e=0),"n"===w?r=s(g,1,r):"s"===w?r=s(g,0,-r):w||(r=0);var i="w"===_?e:0,o="n"===w?r:0;if(M){var l;if(!_&&1===w.length){for(l=0;l<p.length;l++)p[l].range=p[l]._r.slice(),Ii(p[l],1-r/x);i=(e=r*y/x)/2}if(!w&&1===_.length){for(l=0;l<g.length;l++)g[l].range=g[l]._r.slice(),Ii(g[l],1-e/y);o=(r=e*x/y)/2}}tt([i,o,y-e,x-r]),$(w,_)}function s(t,e,r){for(var n,a,i=1-e,o=0;o<t.length;o++){var l=t[o];if(!l.fixedrange){n=l,a=l._rl[i]+(l._rl[e]-l._rl[i])/ko(r/l._length);var s=l.l2r(a);!1!==s&&void 0!==s&&(l.range[e]=s)}}return n._length*(n._rl[e]-a)/(n._rl[e]-n._rl[i])}}function $(e,r){var n,a=[];function i(t){for(n=0;n<t.length;n++)t[n].fixedrange||a.push(t[n]._id)}for(T&&(i(p),i(b.xaxes)),k&&(i(g),i(b.yaxes)),q={},n=0;n<a.length;n++){var o=a[n];po(t,o,!0);var l=go(t,o);q[l._name+".range[0]"]=l.range[0],q[l._name+".range[1]"]=l.range[1]}function s(i,o,l){for(n=0;n<i.length;n++){var s=i[n];if((r&&-1!==a.indexOf(s.xref)||e&&-1!==a.indexOf(s.yref))&&(o(t,n),l))return}}s(t._fullLayout.annotations||[],I.getComponentMethod("annotations","drawOne")),s(t._fullLayout.shapes||[],I.getComponentMethod("shapes","drawOne")),s(t._fullLayout.images||[],I.getComponentMethod("images","draw"),!0)}function K(){tt([0,0,y,x]),oe.syncOrAsync([na.previousPromises,function(){I.call("relayout",t,q)}],t)}function tt(e){var r,n,a,i,o=t._fullLayout,c=o._plots,p=o._subplots.cartesian,g=o._has("scattergl"),v=o._hasOnlyLargeSploms,m=v||o._has("splom"),y=o._has("svg"),x=o._has("draggedPts");if((m||g)&&Ri(t),!m||(I.subplotsRegistry.splom.drag(t),!v)){if(g)for(r=0;r<p.length;r++){a=(n=c[p[r]]).xaxis,i=n.yaxis;var b=n._scene;if(b){var _=oe.simpleMap(a.range,a.r2l),w=oe.simpleMap(i.range,i.r2l);b.update({range:[_[0],w[0],_[1],w[1]]})}}if(y){var A=e[2]/u._length,M=e[3]/f._length;for(r=0;r<p.length;r++){a=(n=c[p[r]]).xaxis,i=n.yaxis;var E,C,S,L,O=T&&!a.fixedrange&&h[a._id],D=k&&!i.fixedrange&&d[i._id];if(O?(E=A,S=s?e[0]:nt(a,E)):S=rt(a,E=et(a,A,M)),D?(C=M,L=l?e[1]:nt(i,C)):L=rt(i,C=et(i,A,M)),E||C){E||(E=1),C||(C=1);var R=a._offset-S/E,P=i._offset-L/C;if(n.clipRect.call(Jr.setTranslate,S,L).call(Jr.setScale,E,C),n.plot.call(Jr.setTranslate,R,P).call(Jr.setScale,1/E,1/C),x){var B=n.plot.selectAll(".scatterlayer .trace, .boxlayer .trace, .violinlayer .trace");B.selectAll(".point").call(Jr.setPointGroupScale,E,C),B.selectAll(".textpoint").call(Jr.setTextPointsScale,E,C),B.call(Jr.hideOutsideRangePoints,n),n.plot.selectAll(".barlayer .trace").call(Jr.hideOutsideRangePoints,n,".bartext")}}}}}}function et(t,e,r){return t.fixedrange?0:T&&b.xaHash[t._id]?e:k&&(M?b.xaHash:b.yaHash)[t._id]?r:0}function rt(t,e){return e?(t.range=t._r.slice(),Ii(t,e),nt(t,e)):0}function nt(t,e){return t._length*(1-e)*ho[t.constraintoward||"middle"]}return l.length*s.length!=1&&Io(D,function(e){if(t._context.scrollZoom||t._fullLayout._enablescrollzoom){if(null===W&&mo(E),t._transitioningWithDuration)return e.preventDefault(),void e.stopPropagation();var r=t.querySelector(".plotly");if(L(),!(r.scrollHeight-r.clientHeight>10||r.scrollWidth-r.clientWidth>10)){clearTimeout(W);var n=-e.deltaY;if(isFinite(n)||(n=e.wheelDelta/10),isFinite(n)){var a,i=Math.exp(-Math.min(Math.max(n,-20),20)/200),o=J.draglayer.select(".nsewdrag").node().getBoundingClientRect(),u=(e.clientX-o.left)/o.width,c=(o.bottom-e.clientY)/o.height;if(T){for(s||(u=.5),a=0;a<p.length;a++)f(p[a],u,i);Y[2]*=i,Y[0]+=Y[2]*u*(1/i-1)}if(k){for(l||(c=.5),a=0;a<g.length;a++)f(g[a],c,i);Y[3]*=i,Y[1]+=Y[3]*(1-c)*(1/i-1)}tt(Y),$(l,s),W=setTimeout(function(){Y=[0,0,y,x],K()},Z),e.preventDefault()}else oe.log("Did not find wheel motion attributes: ",e)}}function f(t,e,r){if(!t.fixedrange){var n=oe.simpleMap(t.range,t.r2l),a=n[0]+(n[1]-n[0])*e;t.range=n.map(function(e){return t.l2r(a+(e-a)*r)})}}}),D},No=Oe.DRAGGERSIZE;Fo.initInteractions=function(t){var e=t._fullLayout;if(t._context.staticPlot)n.select(t).selectAll(".drag").remove();else if(e._has("cartesian")||e._has("gl2d")||e._has("splom")){Object.keys(e._plots||{}).sort(function(t,r){if((e._plots[t].mainplot&&!0)===(e._plots[r].mainplot&&!0)){var n=t.split("y"),a=r.split("y");return n[0]===a[0]?Number(n[1]||1)-Number(a[1]||1):Number(n[0]||1)-Number(a[0]||1)}return e._plots[t].mainplot?1:-1}).forEach(function(r){var n=e._plots[r],a=n.xaxis,i=n.yaxis;if(!n.mainplot){var o=zo(t,n,a._offset,i._offset,a._length,i._length,"ns","ew");o.onmousemove=function(e){t._fullLayout._rehover=function(){t._fullLayout._hoversubplot===r&&Di.hover(t,e,r)},Di.hover(t,e,r),t._fullLayout._lasthover=o,t._fullLayout._hoversubplot=r},o.onmouseout=function(e){t._dragging||(t._fullLayout._hoversubplot=null,Ye.unhover(t,e))},t._context.showAxisDragHandles&&(zo(t,n,a._offset-No,i._offset-No,No,No,"n","w"),zo(t,n,a._offset+a._length,i._offset-No,No,No,"n","e"),zo(t,n,a._offset-No,i._offset+i._length,No,No,"s","w"),zo(t,n,a._offset+a._length,i._offset+i._length,No,No,"s","e"))}if(t._context.showAxisDragHandles){if(r===a._mainSubplot){var l=a._mainLinePosition;"top"===a.side&&(l-=No),zo(t,n,a._offset+.1*a._length,l,.8*a._length,No,"","ew"),zo(t,n,a._offset,l,.1*a._length,No,"","w"),zo(t,n,a._offset+.9*a._length,l,.1*a._length,No,"","e")}if(r===i._mainSubplot){var s=i._mainLinePosition;"right"!==i.side&&(s-=No),zo(t,n,s,i._offset+.1*i._length,No,.8*i._length,"ns",""),zo(t,n,s,i._offset+.9*i._length,No,.1*i._length,"s",""),zo(t,n,s,i._offset,No,.1*i._length,"n","")}}});var r=e._hoverlayer.node();r.onmousemove=function(r){r.target=t._fullLayout._lasthover,Di.hover(t,r,e._hoversubplot)},r.onclick=function(e){e.target=t._fullLayout._lasthover,Di.click(t,e)},r.onmousedown=function(e){t._fullLayout._lasthover.onmousedown(e)},Fo.updateFx(e)}},Fo.updateFx=function(t){var e="pan"===t.dragmode?"move":"crosshair";bn(t._draggers,e)};var jo=function(t,e,r,n){if("category"===e.type){var a,i=t.categoryarray,o=Array.isArray(i)&&i.length>0;o&&(a="array");var l,s=r("categoryorder",a);"array"===s&&(l=r("categoryarray")),o||"array"!==s||(s=e.categoryorder="trace"),"trace"===s?e._initialCategories=[]:"array"===s?e._initialCategories=l.slice():(l=function(t,e){var r,n,a,i=e.dataAttr||t._id.charAt(0),o={};if(e.axData)r=e.axData;else for(r=[],n=0;n<e.data.length;n++){var l=e.data[n];l[i+"axis"]===t._id&&r.push(l)}for(n=0;n<r.length;n++){var s=r[n][i];for(a=0;a<s.length;a++){var u=s[a];null!==u&&void 0!==u&&(o[u]=1)}}return Object.keys(o)}(e,n).sort(),"category ascending"===s?e._initialCategories=l:"category descending"===s&&(e._initialCategories=l.reverse()))}},Uo=c.mix,Vo=D.lightFraction,Ho=function(t,e,r,n,a){var i=n.letter,o=e._id,l=n.font||{},s=r("visible",!n.cheateronly),u=e.type;"date"===u&&I.getComponentMethod("calendars","handleDefaults")(t,e,"calendar",n.calendar);za(e,a);var c=r("autorange",!e.isValidRange(t.range));if(e._rangesliderAutorange=!1,c&&r("rangemode"),r("range"),e.cleanRange(),jo(t,e,r,n),"category"===u||n.noHover||r("hoverformat"),!s)return e;var f=r("color"),h=f===t.color?f:l.color;return r("title",((a._splomAxes||{})[i]||{})[o]||a._dfltTitle[i]),oe.coerceFont(r,"titlefont",{family:l.family,size:Math.round(1.2*l.size),color:h}),gr(t,e,r,u),hr(t,e,r,u,n),dr(t,e,r,n),function(t,e,r,n){var a=(n=n||{}).dfltColor;function i(r,a){return oe.coerce2(t,e,n.attributes,r,a)}var o=i("linecolor",a),l=i("linewidth");r("showline",n.showLine||!!o||!!l)||(delete e.linecolor,delete e.linewidth);var s=i("gridcolor",Uo(a,n.bgColor,n.blend||Vo).toRgbString()),u=i("gridwidth");if(r("showgrid",n.showGrid||!!s||!!u)||(delete e.gridcolor,delete e.gridwidth),!n.noZeroLine){var c=i("zerolinecolor",a),f=i("zerolinewidth");r("zeroline",n.showGrid||!!c||!!f)||(delete e.zerolinecolor,delete e.zerolinewidth)}}(t,e,r,{dfltColor:f,bgColor:n.bgColor,showGrid:n.showGrid,attributes:ur}),(e.showline||e.ticks)&&r("mirror"),n.automargin&&r("automargin"),e},qo=De.id2name,Go=function(t,e,r,n,a){var i=a._axisConstraintGroups,o=e._id,l=o.charAt(0);if(!e.fixedrange&&(r("constrain"),oe.coerce(t,e,{constraintoward:{valType:"enumerated",values:"x"===l?["left","center","right"]:["bottom","middle","top"],dflt:"x"===l?"center":"middle"}},"constraintoward"),t.scaleanchor)){var s=function(t,e,r,n){var a,i,o,l,s=n[qo(e)].type,u=[];for(i=0;i<r.length;i++)(o=r[i])!==e&&((l=n[qo(o)]).type!==s||l.fixedrange||u.push(o));for(a=0;a<t.length;a++)if(t[a][e]){var c=t[a],f=[];for(i=0;i<u.length;i++)o=u[i],c[o]||f.push(o);return{linkableAxes:f,thisGroup:c}}return{linkableAxes:u,thisGroup:null}}(i,o,n,a),u=oe.coerce(t,e,{scaleanchor:{valType:"enumerated",values:s.linkableAxes}},"scaleanchor");if(u){var c=r("scaleratio");c||(c=e.scaleratio=1),function(t,e,r,n,a){var i,o,l,s,u;null===e?((e={})[r]=1,u=t.length,t.push(e)):u=t.indexOf(e);var c=Object.keys(e);for(i=0;i<t.length;i++)if(l=t[i],i!==u&&l[n]){var f=l[n];for(o=0;o<c.length;o++)s=c[o],l[s]=f*a*e[s];return void t.splice(u,1)}if(1!==a)for(o=0;o<c.length;o++)e[c[o]]*=a;e[n]=1}(i,s.thisGroup,o,u,c)}else-1!==n.indexOf(t.scaleanchor)&&oe.warn("ignored "+e._name+'.scaleanchor: "'+t.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the targetaxis has fixed range.')}};var Xo=function(t,e,r,n){var i,o,l,s,u=n.counterAxes||[],c=n.overlayableAxes||[],f=n.letter,h=n.grid;h&&(o=h._domains[f][h._axisMap[e._id]],i=h._anchors[e._id],o&&(l=h[f+"side"].split(" ")[0],s=h.domain[f]["right"===l||"top"===l?1:0])),o=o||[0,1],i=i||(a(t.position)?"free":u[0]||"free"),l=l||("x"===f?"bottom":"left"),s=s||0,"free"===oe.coerce(t,e,{anchor:{valType:"enumerated",values:["free"].concat(u),dflt:i}},"anchor")&&r("position",s),oe.coerce(t,e,{side:{valType:"enumerated",values:"x"===f?["bottom","top"]:["left","right"],dflt:l}},"side");var d=!1;if(c.length&&(d=oe.coerce(t,e,{overlaying:{valType:"enumerated",values:[!1].concat(c),dflt:!1}},"overlaying")),!d){var p=r("domain",o);p[0]>p[1]-.01&&(e.domain=o),oe.noneOrAll(t.domain,e.domain,o)}return r("layer"),e},Yo=De.name2id,Wo=function(t,e,r,n,a){a&&(e._name=a,e._id=Yo(a)),"-"===r("type")&&(!function(t,e){if("-"!==t.type)return;var r=t._id,n=r.charAt(0);-1!==r.indexOf("scene")&&(r=n);var a=function(t,e,r){for(var n=0;n<t.length;n++){var a=t[n];if("splom"===a.type&&a._commonLength>0&&a["_"+r+"axes"][e])return a;if((a[r+"axis"]||r)===e){if(Jo(a,r))return a;if((a[r]||[]).length||a[r+"0"])return a}}}(e,r,n);if(!a)return;if("histogram"===a.type&&n==={v:"y",h:"x"}[a.orientation||"v"])return void(t.type="linear");var i,o=n+"calendar",l=a[o];if(Jo(a,n)){var s=Zo(a),u=[];for(i=0;i<e.length;i++){var c=e[i];I.traceIs(c,"box-violin")&&(c[n+"axis"]||n)===r&&(void 0!==c[s]?u.push(c[s][0]):void 0!==c.name?u.push(c.name):u.push("text"),c[o]!==l&&(l=void 0))}t.type=La(u,l)}else if("splom"===a.type){var f=a.dimensions;for(i=0;i<f.length;i++){var h=f[i];if(h.visible){t.type=La(h.values,l);break}}}else t.type=La(a[n]||[a[n+"0"]],l)}(e,n),"-"===e.type?e.type="linear":t.type=e.type)};function Zo(t){return{v:"x",h:"y"}[t.orientation||"v"]}function Jo(t,e){var r=Zo(t),n=I.traceIs(t,"box-violin"),a=I.traceIs(t._fullInput||{},"candlestick");return n&&!a&&e===r&&void 0===t[r]&&void 0===t[r+"0"]}var Qo=Oe.attrRegex,$o={},Ko=Oe.SUBPLOT_PATTERN;$o.getSubplotCalcData=function(t,e,r){var n=I.subplotsRegistry[e];if(!n)return[];for(var a=n.attr,i=[],o=0;o<t.length;o++){var l=t[o];l[0].trace[a]===r&&i.push(l)}return i},$o.getModuleCalcData=function(t,e){var r=[],n=[],a="string"==typeof e?I.getModule(e):e;if(!a)return[r,t];for(var i=0;i<t.length;i++){var o=t[i],l=o[0].trace;!0===l.visible&&(l._module.plot===a.plot?r.push(o):n.push(o))}return[r,n]},$o.getSubplotData=function(t,e,r){if(!I.subplotsRegistry[e])return[];var n,a,i,o=I.subplotsRegistry[e].attr,l=[];if("gl2d"===e){var s=r.match(Ko);a="x"+s[1],i="y"+s[2]}for(var u=0;u<t.length;u++)n=t[u],"gl2d"===e&&I.traceIs(n,"gl2d")?n[o[0]]===a&&n[o[1]]===i&&l.push(n):n[o]===r&&l.push(n);return l};var tl={},el=$o.getModuleCalcData,rl=oe.ensureSingle;function nl(t,e,r){return oe.ensureSingle(t,e,r,function(t){t.datum(r)})}function al(t,e,r,n,a){var i=t._fullLayout._modules;e.plot&&e.plot.selectAll("g:not(.scatterlayer):not(.ohlclayer)").selectAll("g.trace").remove();for(var o=0;o<i.length;o++){var l=i[o];if(l.plot&&"cartesian"===l.basePlotModule.name){var s=el(r,l),u=s[0];r=s[1],l.plot(t,e,u,n,a)}}}function il(t,e){var r=e.plotgroup,n=e.id,a=Oe.layerValue2layerClass[e.xaxis.layer],i=Oe.layerValue2layerClass[e.yaxis.layer],o=t._fullLayout._hasOnlyLargeSploms;if(e.mainplot){var l=e.mainplotinfo,s=l.plotgroup,u=n+"-x",c=n+"-y";e.gridlayer=l.gridlayer,e.zerolinelayer=l.zerolinelayer,rl(l.overlinesBelow,"path",u),rl(l.overlinesBelow,"path",c),rl(l.overaxesBelow,"g",u),rl(l.overaxesBelow,"g",c),e.plot=rl(l.overplot,"g",n),rl(l.overlinesAbove,"path",u),rl(l.overlinesAbove,"path",c),rl(l.overaxesAbove,"g",u),rl(l.overaxesAbove,"g",c),e.xlines=s.select(".overlines-"+a).select("."+u),e.ylines=s.select(".overlines-"+i).select("."+c),e.xaxislayer=s.select(".overaxes-"+a).select("."+u),e.yaxislayer=s.select(".overaxes-"+i).select("."+c)}else if(o)e.plot=rl(r,"g","plot"),e.xlines=rl(r,"path","xlines-above"),e.ylines=rl(r,"path","ylines-above"),e.xaxislayer=rl(r,"g","xaxislayer-above"),e.yaxislayer=rl(r,"g","yaxislayer-above");else{var f=rl(r,"g","layer-subplot");e.shapelayer=rl(f,"g","shapelayer"),e.imagelayer=rl(f,"g","imagelayer"),e.gridlayer=rl(r,"g","gridlayer"),e.zerolinelayer=rl(r,"g","zerolinelayer"),rl(r,"path","xlines-below"),rl(r,"path","ylines-below"),e.overlinesBelow=rl(r,"g","overlines-below"),rl(r,"g","xaxislayer-below"),rl(r,"g","yaxislayer-below"),e.overaxesBelow=rl(r,"g","overaxes-below"),e.plot=rl(r,"g","plot"),e.overplot=rl(r,"g","overplot"),e.xlines=rl(r,"path","xlines-above"),e.ylines=rl(r,"path","ylines-above"),e.overlinesAbove=rl(r,"g","overlines-above"),rl(r,"g","xaxislayer-above"),rl(r,"g","yaxislayer-above"),e.overaxesAbove=rl(r,"g","overaxes-above"),e.xlines=r.select(".xlines-"+a),e.ylines=r.select(".ylines-"+i),e.xaxislayer=r.select(".xaxislayer-"+a),e.yaxislayer=r.select(".yaxislayer-"+i)}if(!o){nl(e.gridlayer,"g",e.xaxis._id),nl(e.gridlayer,"g",e.yaxis._id),e.gridlayer.selectAll("g").sort(De.idSort);for(var h=0;h<Oe.traceLayerClasses.length;h++)rl(e.plot,"g",Oe.traceLayerClasses[h])}e.xlines.style("fill","none").classed("crisp",!0),e.ylines.style("fill","none").classed("crisp",!0)}function ol(t,e){if(t){var r={};t.each(function(t){n.select(this).remove(),ll(t,e),r[t]=!0});for(var a=e._plots,i=Object.keys(a),o=0;o<i.length;o++)for(var l=a[i[o]].overlays||[],s=0;s<l.length;s++){var u=l[s];r[u.id]&&u.plot.selectAll(".trace").remove()}}}function ll(t,e){e._draggers.selectAll("g."+t).remove(),e._defs.select("#clip"+e._uid+t+"plot").remove()}tl.name="cartesian",tl.attr=["xaxis","yaxis"],tl.idRoot=["x","y"],tl.idRegex=Oe.idRegex,tl.attrRegex=Oe.attrRegex,tl.attributes=Se,tl.layoutAttributes=ur,tl.supplyLayoutDefaults=function(t,e,r){var n,a={},i={},o={},l={};for(n=0;n<r.length;n++){var s=r[n];if(I.traceIs(s,"cartesian")||I.traceIs(s,"gl2d")){var u=De.id2name(s.xaxis),c=De.id2name(s.yaxis);I.traceIs(s,"carpet")&&("carpet"!==s.type||s._cheater)||u&&(i[u]=1),"carpet"===s.type&&s._cheater&&u&&(a[u]=1),I.traceIs(s,"2dMap")&&(o[u]=!0,o[c]=!0),I.traceIs(s,"oriented")&&(l["h"===s.orientation?c:u]=!0)}}var f=e._subplots,h=f.xaxis,d=f.yaxis,p=oe.simpleMap(h,De.id2name),g=oe.simpleMap(d,De.id2name),v=p.concat(g),m=$e.background;h.length&&d.length&&(m=oe.coerce(t,e,P,"plot_bgcolor"));var y,x,b,_,w=$e.combine(m,e.paper_bgcolor);function A(t,e){return oe.coerce(b,_,ur,t,e)}function M(t,e){return oe.coerce2(b,_,ur,t,e)}function T(t){return"x"===t?d:h}var k={x:T("x"),y:T("y")};function E(e,r){for(var n="x"===e?p:g,a=[],i=0;i<n.length;i++){var o=n[i];o===r||(t[o]||{}).overlaying||a.push(De.name2id(o))}return a}for(n=0;n<v.length;n++){y=v[n],oe.isPlainObject(t[y])||(t[y]={}),b=t[y],_=e[y]={},Wo(b,_,A,r,y);var C=E(x=y.charAt(0),y),S={letter:x,font:e.font,outerTicks:o[y],showGrid:!l[y],data:r,bgColor:w,calendar:e.calendar,automargin:!0,cheateronly:"x"===x&&a[y]&&!i[y]};Ho(b,_,A,S,e);var L=M("spikecolor"),O=M("spikethickness"),D=M("spikedash"),R=M("spikemode"),B=M("spikesnap");A("showspikes",!!(L||O||D||R||B))||(delete _.spikecolor,delete _.spikethickness,delete _.spikedash,delete _.spikemode,delete _.spikesnap);var F={letter:x,counterAxes:k[x],overlayableAxes:C,grid:e.grid};Xo(b,_,A,F),_._input=b}var z=I.getComponentMethod("rangeslider","handleDefaults"),N=I.getComponentMethod("rangeselector","handleDefaults");for(n=0;n<p.length;n++)y=p[n],b=t[y],_=e[y],z(t,e,y),"date"===_.type&&N(b,_,e,g,_.calendar),A("fixedrange");for(n=0;n<g.length;n++){y=g[n],b=t[y],_=e[y];var j=e[De.id2name(_.anchor)];A("fixedrange",j&&j.rangeslider&&j.rangeslider.visible)}e._axisConstraintGroups=[];var U=k.x.concat(k.y);for(n=0;n<v.length;n++)x=(y=v[n]).charAt(0),b=t[y],_=e[y],Go(b,_,A,U,e)},tl.transitionAxes=function(t,e,r,a){var i=t._fullLayout,o=[];var l,s,u,c,f=function(t){var e,r,n,a,l={};for(e in t)if((r=e.split("."))[0].match(Qo)){var s=e.charAt(0),u=r[0];if(n=i[u],a={},Array.isArray(t[e])?a.to=t[e].slice(0):Array.isArray(t[e].range)&&(a.to=t[e].range.slice(0)),!a.to)continue;a.axisName=u,a.length=n._length,o.push(s),l[s]=a}return l}(e),h=Object.keys(f),d=function(t,e,r){var n,a,i,o=t._plots,l=[];for(n in o){var s=o[n];if(-1===l.indexOf(s)){var u=s.xaxis._id,c=s.yaxis._id,f=s.xaxis.range,h=s.yaxis.range;s.xaxis._r=s.xaxis.range.slice(),s.yaxis._r=s.yaxis.range.slice(),a=r[u]?r[u].to:f,i=r[c]?r[c].to:h,f[0]===a[0]&&f[1]===a[1]&&h[0]===i[0]&&h[1]===i[1]||-1===e.indexOf(u)&&-1===e.indexOf(c)||l.push(s)}}return l}(i,h,f);if(!d.length)return function(){function e(e,r,n){for(var a=0;a<e.length;a++)if(r(t,a),n)return}e(i.annotations||[],I.getComponentMethod("annotations","drawOne")),e(i.shapes||[],I.getComponentMethod("shapes","drawOne")),e(i.images||[],I.getComponentMethod("images","draw"),!0)}(),!1;function p(t){var e=t.xaxis,r=t.yaxis;i._defs.select("#"+t.clipId+"> rect").call(Jr.setTranslate,0,0).call(Jr.setScale,1,1),t.plot.call(Jr.setTranslate,e._offset,r._offset).call(Jr.setScale,1,1);var n=t.plot.selectAll(".scatterlayer .trace");n.selectAll(".point").call(Jr.setPointGroupScale,1,1),n.selectAll(".textpoint").call(Jr.setTextPointsScale,1,1),n.call(Jr.hideOutsideRangePoints,t)}function g(e,r){var n,a,o,l=f[e.xaxis._id],s=f[e.yaxis._id],u=[];if(l){a=(n=t._fullLayout[l.axisName])._r,o=l.to,u[0]=(a[0]*(1-r)+r*o[0]-a[0])/(a[1]-a[0])*e.xaxis._length;var c=a[1]-a[0],h=o[1]-o[0];n.range[0]=a[0]*(1-r)+r*o[0],n.range[1]=a[1]*(1-r)+r*o[1],u[2]=e.xaxis._length*(1-r+r*h/c)}else u[0]=0,u[2]=e.xaxis._length;if(s){a=(n=t._fullLayout[s.axisName])._r,o=s.to,u[1]=(a[1]*(1-r)+r*o[1]-a[1])/(a[0]-a[1])*e.yaxis._length;var d=a[1]-a[0],p=o[1]-o[0];n.range[0]=a[0]*(1-r)+r*o[0],n.range[1]=a[1]*(1-r)+r*o[1],u[3]=e.yaxis._length*(1-r+r*p/d)}else u[1]=0,u[3]=e.yaxis._length;!function(e,r){var n,a=[];for(a=[e._id,r._id],n=0;n<a.length;n++)Na.doTicks(t,a[n],!0);function o(e,r,i){for(n=0;n<e.length;n++){var o=e[n];if(-1===a.indexOf(o.xref)&&-1===a.indexOf(o.yref)||r(t,n),i)return}}o(i.annotations||[],I.getComponentMethod("annotations","drawOne")),o(i.shapes||[],I.getComponentMethod("shapes","drawOne")),o(i.images||[],I.getComponentMethod("images","draw"),!0)}(e.xaxis,e.yaxis);var g=e.xaxis,v=e.yaxis,m=!!l,y=!!s,x=m?g._length/u[2]:1,b=y?v._length/u[3]:1,_=m?u[0]:0,w=y?u[1]:0,A=m?u[0]/u[2]*g._length:0,M=y?u[1]/u[3]*v._length:0,T=g._offset-A,k=v._offset-M;e.clipRect.call(Jr.setTranslate,_,w).call(Jr.setScale,1/x,1/b),e.plot.call(Jr.setTranslate,T,k).call(Jr.setScale,x,b).selectAll(".points").selectAll(".point").call(Jr.setPointGroupScale,1/x,1/b),e.plot.selectAll(".points").selectAll(".textpoint").call(Jr.setTextPointsScale,1/x,1/b)}a&&(l=a());var v=n.ease(r.easing);return t._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(c),c=null,function(){for(var e={},r=0;r<h.length;r++){var n=t._fullLayout[h[r]+"axis"];e[n._name+".range[0]"]=n.range[0],e[n._name+".range[1]"]=n.range[1],n.range=n._r.slice()}return I.call("relayout",t,e).then(function(){for(var t=0;t<d.length;t++)p(d[t])})}()}),s=Date.now(),c=window.requestAnimationFrame(function e(){u=Date.now();for(var n=Math.min(1,(u-s)/r.duration),a=v(n),i=0;i<d.length;i++)g(d[i],a);u-s>r.duration?(function(){for(var e={},r=0;r<h.length;r++){var n=t._fullLayout[f[h[r]].axisName],a=f[h[r]].to;e[n._name+".range[0]"]=a[0],e[n._name+".range[1]"]=a[1],n.range=a.slice()}l&&l(),I.call("relayout",t,e).then(function(){for(var t=0;t<d.length;t++)p(d[t])})}(),c=window.cancelAnimationFrame(e)):c=window.requestAnimationFrame(e)}),Promise.resolve()},tl.finalizeSubplots=function(t,e){var r,n,a,i=e._subplots,o=i.xaxis,l=i.yaxis,s=i.cartesian,u=s.concat(i.gl2d||[]),c={},f={};for(r=0;r<u.length;r++){var h=u[r].split("y");c[h[0]]=1,f["y"+h[1]]=1}for(r=0;r<o.length;r++)c[n=o[r]]||(a=(t[De.id2name(n)]||{}).anchor,Oe.idRegex.y.test(a)||(a="y"),s.push(n+a),u.push(n+a),f[a]||(f[a]=1,oe.pushUnique(l,a)));for(r=0;r<l.length;r++)f[a=l[r]]||(n=(t[De.id2name(a)]||{}).anchor,Oe.idRegex.x.test(n)||(n="x"),s.push(n+a),u.push(n+a),c[n]||(c[n]=1,oe.pushUnique(o,n)));if(!u.length){for(var d in n="",a="",t){if(Oe.attrRegex.test(d))"x"===d.charAt(0)?(!n||+d.substr(5)<+n.substr(5))&&(n=d):(!a||+d.substr(5)<+a.substr(5))&&(a=d)}n=n?De.name2id(n):"x",a=a?De.name2id(a):"y",o.push(n),l.push(a),s.push(n+a)}},tl.plot=function(t,e,r,n){var a,i=t._fullLayout,o=i._subplots.cartesian,l=t.calcdata;if(!Array.isArray(e))for(e=[],a=0;a<l.length;a++)e.push(a);for(a=0;a<o.length;a++){for(var s,u=o[a],c=i._plots[u],f=[],h=0;h<l.length;h++){var d=l[h],p=d[0].trace;p.xaxis+p.yaxis===u&&((-1!==e.indexOf(p.index)||p.carpet)&&(s&&s[0].trace.xaxis+s[0].trace.yaxis===u&&-1!==["tonextx","tonexty","tonext"].indexOf(p.fill)&&-1===f.indexOf(s)&&f.push(s),f.push(d)),s=d)}al(t,c,f,r,n)}},tl.clean=function(t,e,r,n){var a,i,o,l,s,u,c,f,h,d,p=n._modules||[],g=e._modules||[],v=n._plots||{};if(n._hasOnlyLargeSploms&&!e._hasOnlyLargeSploms)for(f in v)(h=v[f]).plotgroup&&h.plotgroup.remove();for(c=0;c<p.length;c++)"scatter"===(d=p[c].name)?a=!0:"scattergl"===d?s=!0:"ohlc"===d&&(o=!0);for(c=0;c<g.length;c++)"scatter"===(d=g[c].name)?i=!0:"scattergl"===d?u=!0:"ohlc"===d&&(l=!0);var m=[];if(a&&!i&&m.push("g.scatterlayer"),o&&!l&&m.push("g.ohlclayer"),m.length)for(var y=0;y<m.length;y++){for(f in v)(h=v[f]).plot&&h.plot.select(m[y]).selectAll("g.trace").remove();n._infolayer.selectAll("g.rangeslider-container").select(m[y]).selectAll("g.trace").remove()}if(s&&!u)for(f in v)(h=v[f])._scene&&h._scene.destroy();var x=n._subplots||{},b=e._subplots||{xaxis:[],yaxis:[]};if(x.xaxis&&x.yaxis){var _=x.xaxis.concat(x.yaxis),w=b.xaxis.concat(b.yaxis);for(c=0;c<_.length;c++)-1===w.indexOf(_[c])&&n._infolayer.selectAll(".g-"+_[c]+"title").remove()}var A=n._has&&n._has("cartesian"),M=e._has&&e._has("cartesian");if(A&&!M)ol(n._cartesianlayer.selectAll(".subplot"),n),n._defs.selectAll(".axesclip").remove(),delete n._axisConstraintGroups;else if(x.cartesian)for(c=0;c<x.cartesian.length;c++){var T=x.cartesian[c];if(-1===b.cartesian.indexOf(T)){var k="."+T+",."+T+"-x,."+T+"-y";n._cartesianlayer.selectAll(k).remove(),ll(T,n)}}},tl.drawFramework=function(t){var e=t._fullLayout,r=function(t){var e=t._fullLayout,r=[],n=[];for(var a in e._plots){var i=e._plots[a],o=i.xaxis._mainAxis,l=i.yaxis._mainAxis,s=o._id+l._id;s!==a&&e._plots[s]?(i.mainplot=s,i.mainplotinfo=e._plots[s],n.push(a)):(r.push(a),i.mainplot=void 0)}return r=r.concat(n)}(t),a=e._cartesianlayer.selectAll(".subplot").data(r,oe.identity);a.enter().append("g").attr("class",function(t){return"subplot "+t}),a.order(),a.exit().call(ol,e),a.each(function(r){var a=e._plots[r];(a.plotgroup=n.select(this),a.overlays=[],il(t,a),a.mainplot)&&e._plots[a.mainplot].overlays.push(a);a.draglayer=rl(e._draggers,"g",r)})},tl.rangePlot=function(t,e,r){il(t,e),al(t,e,r),na.style(t)},tl.toSVG=function(t){var e=t._fullLayout._glimages,r=n.select(t).selectAll(".svg-container");r.filter(function(t,e){return e===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this.toDataURL("image/png");e.append("svg:image").attr({xmlns:Ce.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})})},tl.updateFx=Fo.updateFx;var sl=function(t,e,r){return 0===t.length?t:e?(r||t.sort(e),function(t,e){for(var r=1,n=t.length,a=t[0],i=t[0],o=1;o<n;++o)if(i=a,e(a=t[o],i)){if(o===r){r++;continue}t[r++]=a}return t.length=r,t}(t,e)):(r||t.sort(),function(t){for(var e=1,r=t.length,n=t[0],a=t[0],i=1;i<r;++i,a=n)if(a=n,(n=t[i])!==a){if(i===e){e++;continue}t[e++]=n}return t.length=e,t}(t))};function ul(t,e,r){var n,a,i=t.length,o=e.arrayArgs.length,l=e.indexArgs.length>0,s=[],u=[],c=0,f=0;for(n=0;n<i;++n)u.push(["i",n,"=0"].join(""));for(a=0;a<o;++a)for(n=0;n<i;++n)f=c,c=t[n],0===n?u.push(["d",a,"s",n,"=t",a,"p",c].join("")):u.push(["d",a,"s",n,"=(t",a,"p",c,"-s",f,"*t",a,"p",f,")"].join(""));for(u.length>0&&s.push("var "+u.join(",")),n=i-1;n>=0;--n)c=t[n],s.push(["for(i",n,"=0;i",n,"<s",c,";++i",n,"){"].join(""));for(s.push(r),n=0;n<i;++n){for(f=c,c=t[n],a=0;a<o;++a)s.push(["p",a,"+=d",a,"s",n].join(""));l&&(n>0&&s.push(["index[",f,"]-=s",f].join("")),s.push(["++index[",c,"]"].join(""))),s.push("}")}return s.join("\n")}function cl(t,e,r){for(var n=t.body,a=[],i=[],o=0;o<t.args.length;++o){var l=t.args[o];if(!(l.count<=0)){var s=new RegExp(l.name,"g"),u="",c=e.arrayArgs.indexOf(o);switch(e.argTypes[o]){case"offset":var f=e.offsetArgIndex.indexOf(o);c=e.offsetArgs[f].array,u="+q"+f;case"array":u="p"+c+u;var h="l"+o,d="a"+c;if(0===e.arrayBlockIndices[c])1===l.count?"generic"===r[c]?l.lvalue?(a.push(["var ",h,"=",d,".get(",u,")"].join("")),n=n.replace(s,h),i.push([d,".set(",u,",",h,")"].join(""))):n=n.replace(s,[d,".get(",u,")"].join("")):n=n.replace(s,[d,"[",u,"]"].join("")):"generic"===r[c]?(a.push(["var ",h,"=",d,".get(",u,")"].join("")),n=n.replace(s,h),l.lvalue&&i.push([d,".set(",u,",",h,")"].join(""))):(a.push(["var ",h,"=",d,"[",u,"]"].join("")),n=n.replace(s,h),l.lvalue&&i.push([d,"[",u,"]=",h].join("")));else{for(var p=[l.name],g=[u],v=0;v<Math.abs(e.arrayBlockIndices[c]);v++)p.push("\\s*\\[([^\\]]+)\\]"),g.push("$"+(v+1)+"*t"+c+"b"+v);if(s=new RegExp(p.join(""),"g"),u=g.join("+"),"generic"===r[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");n=n.replace(s,[d,"[",u,"]"].join(""))}break;case"scalar":n=n.replace(s,"Y"+e.scalarArgs.indexOf(o));break;case"index":n=n.replace(s,"index");break;case"shape":n=n.replace(s,"shape")}}}return[a.join("\n"),n,i.join("\n")].join("\n").trim()}var fl=function(t,e){for(var r=e[1].length-Math.abs(t.arrayBlockIndices[0])|0,n=new Array(t.arrayArgs.length),a=new Array(t.arrayArgs.length),i=0;i<t.arrayArgs.length;++i)a[i]=e[2*i],n[i]=e[2*i+1];var o=[],l=[],s=[],u=[],c=[];for(i=0;i<t.arrayArgs.length;++i){t.arrayBlockIndices[i]<0?(s.push(0),u.push(r),o.push(r),l.push(r+t.arrayBlockIndices[i])):(s.push(t.arrayBlockIndices[i]),u.push(t.arrayBlockIndices[i]+r),o.push(0),l.push(t.arrayBlockIndices[i]));for(var f=[],h=0;h<n[i].length;h++)s[i]<=n[i][h]&&n[i][h]<u[i]&&f.push(n[i][h]-s[i]);c.push(f)}var d=["SS"],p=["'use strict'"],g=[];for(h=0;h<r;++h)g.push(["s",h,"=SS[",h,"]"].join(""));for(i=0;i<t.arrayArgs.length;++i){for(d.push("a"+i),d.push("t"+i),d.push("p"+i),h=0;h<r;++h)g.push(["t",i,"p",h,"=t",i,"[",s[i]+h,"]"].join(""));for(h=0;h<Math.abs(t.arrayBlockIndices[i]);++h)g.push(["t",i,"b",h,"=t",i,"[",o[i]+h,"]"].join(""))}for(i=0;i<t.scalarArgs.length;++i)d.push("Y"+i);if(t.shapeArgs.length>0&&g.push("shape=SS.slice(0)"),t.indexArgs.length>0){var v=new Array(r);for(i=0;i<r;++i)v[i]="0";g.push(["index=[",v.join(","),"]"].join(""))}for(i=0;i<t.offsetArgs.length;++i){var m=t.offsetArgs[i],y=[];for(h=0;h<m.offset.length;++h)0!==m.offset[h]&&(1===m.offset[h]?y.push(["t",m.array,"p",h].join("")):y.push([m.offset[h],"*t",m.array,"p",h].join("")));0===y.length?g.push("q"+i+"=0"):g.push(["q",i,"=",y.join("+")].join(""))}var x=sl([].concat(t.pre.thisVars).concat(t.body.thisVars).concat(t.post.thisVars));for((g=g.concat(x)).length>0&&p.push("var "+g.join(",")),i=0;i<t.arrayArgs.length;++i)p.push("p"+i+"|=0");t.pre.body.length>3&&p.push(cl(t.pre,t,a));var b=cl(t.body,t,a),_=function(t){for(var e=0,r=t[0].length;e<r;){for(var n=1;n<t.length;++n)if(t[n][e]!==t[0][e])return e;++e}return e}(c);_<r?p.push(function(t,e,r,n){for(var a=e.length,i=r.arrayArgs.length,o=r.blockSize,l=r.indexArgs.length>0,s=[],u=0;u<i;++u)s.push(["var offset",u,"=p",u].join(""));for(u=t;u<a;++u)s.push(["for(var j"+u+"=SS[",e[u],"]|0;j",u,">0;){"].join("")),s.push(["if(j",u,"<",o,"){"].join("")),s.push(["s",e[u],"=j",u].join("")),s.push(["j",u,"=0"].join("")),s.push(["}else{s",e[u],"=",o].join("")),s.push(["j",u,"-=",o,"}"].join("")),l&&s.push(["index[",e[u],"]=j",u].join(""));for(u=0;u<i;++u){for(var c=["offset"+u],f=t;f<a;++f)c.push(["j",f,"*t",u,"p",e[f]].join(""));s.push(["p",u,"=(",c.join("+"),")"].join(""))}for(s.push(ul(e,r,n)),u=t;u<a;++u)s.push("}");return s.join("\n")}(_,c[0],t,b)):p.push(ul(c[0],t,b)),t.post.body.length>3&&p.push(cl(t.post,t,a)),t.debug&&console.log("-----Generated cwise routine for ",e,":\n"+p.join("\n")+"\n----------");var w=[t.funcName||"unnamed","_cwise_loop_",n[0].join("s"),"m",_,function(t){for(var e=new Array(t.length),r=!0,n=0;n<t.length;++n){var a=t[n],i=a.match(/\d+/);i=i?i[0]:"",0===a.charAt(0)?e[n]="u"+a.charAt(1)+i:e[n]=a.charAt(0)+i,n>0&&(r=r&&e[n]===e[n-1])}return r?e[0]:e.join("")}(a)].join("");return new Function(["function ",w,"(",d.join(","),"){",p.join("\n"),"} return ",w].join(""))()};var hl=function(t){var e=["'use strict'","var CACHED={}"],r=[],n=t.funcName+"_cwise_thunk";e.push(["return function ",n,"(",t.shimArgs.join(","),"){"].join(""));for(var a=[],i=[],o=[["array",t.arrayArgs[0],".shape.slice(",Math.max(0,t.arrayBlockIndices[0]),t.arrayBlockIndices[0]<0?","+t.arrayBlockIndices[0]+")":")"].join("")],l=[],s=[],u=0;u<t.arrayArgs.length;++u){var c=t.arrayArgs[u];r.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),a.push("t"+c),a.push("r"+c),i.push("t"+c),i.push("r"+c+".join()"),o.push("array"+c+".data"),o.push("array"+c+".stride"),o.push("array"+c+".offset|0"),u>0&&(l.push("array"+t.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(t.arrayBlockIndices[0])-Math.abs(t.arrayBlockIndices[u]))),s.push("array"+t.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,t.arrayBlockIndices[u])+"]"))}for(t.arrayArgs.length>1&&(e.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),e.push("for(var shapeIndex=array"+t.arrayArgs[0]+".shape.length-"+Math.abs(t.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),e.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),e.push("}")),u=0;u<t.scalarArgs.length;++u)o.push("scalar"+t.scalarArgs[u]);return r.push(["type=[",i.join(","),"].join()"].join("")),r.push("proc=CACHED[type]"),e.push("var "+r.join(",")),e.push(["if(!proc){","CACHED[type]=proc=compile([",a.join(","),"])}","return proc(",o.join(","),")}"].join("")),t.debug&&console.log("-----Generated thunk:\n"+e.join("\n")+"\n----------"),new Function("compile",e.join("\n"))(fl.bind(void 0,t))};var dl=function(t){var e=new function(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1};e.pre=t.pre,e.body=t.body,e.post=t.post;var r=t.args.slice(0);e.argTypes=r;for(var n=0;n<r.length;++n){var a=r[n];if("array"===a||"object"==typeof a&&a.blockIndices){if(e.argTypes[n]="array",e.arrayArgs.push(n),e.arrayBlockIndices.push(a.blockIndices?a.blockIndices:0),e.shimArgs.push("array"+n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array args");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)e.scalarArgs.push(n),e.shimArgs.push("scalar"+n);else if("index"===a){if(e.indexArgs.push(n),n<e.pre.args.length&&e.pre.args[n].count>0)throw new Error("cwise: pre() block may not reference array index");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array index");if(n<e.post.args.length&&e.post.args[n].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(e.shapeArgs.push(n),n<e.pre.args.length&&e.pre.args[n].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(n<e.body.args.length&&e.body.args[n].lvalue)throw new Error("cwise: body() block may not write to array shape");if(n<e.post.args.length&&e.post.args[n].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+r[n]);e.argTypes[n]="offset",e.offsetArgs.push({array:a.array,offset:a.offset}),e.offsetArgIndex.push(n)}}if(e.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(e.pre.args.length>r.length)throw new Error("cwise: Too many arguments in pre() block");if(e.body.args.length>r.length)throw new Error("cwise: Too many arguments in body() block");if(e.post.args.length>r.length)throw new Error("cwise: Too many arguments in post() block");return e.debug=!!t.printCode||!!t.debug,e.funcName=t.funcName||"cwise",e.blockSize=t.blockSize||64,hl(e)},pl={},vl={body:"",args:[],thisVars:[],localVars:[]};function ml(t){if(!t)return vl;for(var e=0;e<t.args.length;++e){var r=t.args[e];t.args[e]=0===e?{name:r,lvalue:!0,rvalue:!!t.rvalue,count:t.count||1}:{name:r,lvalue:!1,rvalue:!0,count:1}}return t.thisVars||(t.thisVars=[]),t.localVars||(t.localVars=[]),t}function yl(t){for(var e=[],r=0;r<t.args.length;++r)e.push("a"+r);return new Function("P",["return function ",t.funcName,"_ndarrayops(",e.join(","),") {P(",e.join(","),");return a0}"].join(""))(function(t){return dl({args:t.args,pre:ml(t.pre),body:ml(t.body),post:ml(t.proc),funcName:t.funcName})}(t))}var xl={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var t in xl){var e=xl[t];pl[t]=yl({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),pl[t+"eq"]=yl({args:["array","array"],body:{args:["a","b"],body:"a"+e+"=b"},rvalue:!0,funcName:t+"eq"}),pl[t+"s"]=yl({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),pl[t+"seq"]=yl({args:["array","scalar"],body:{args:["a","s"],body:"a"+e+"=s"},rvalue:!0,funcName:t+"seq"})}}();var bl={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var t in bl){var e=bl[t];pl[t]=yl({args:["array","array"],body:{args:["a","b"],body:"a="+e+"b"},funcName:t}),pl[t+"eq"]=yl({args:["array"],body:{args:["a"],body:"a="+e+"a"},rvalue:!0,count:2,funcName:t+"eq"})}}();var _l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var t in _l){var e=_l[t];pl[t]=yl({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+e+"c"},funcName:t}),pl[t+"s"]=yl({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+e+"s"},funcName:t+"s"}),pl[t+"eq"]=yl({args:["array","array"],body:{args:["a","b"],body:"a=a"+e+"b"},rvalue:!0,count:2,funcName:t+"eq"}),pl[t+"seq"]=yl({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+e+"s"},rvalue:!0,count:2,funcName:t+"seq"})}}();var wl=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var t=0;t<wl.length;++t){var e=wl[t];pl[e]=yl({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:e}),pl[e+"eq"]=yl({args:["array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"})}}();var Al=["max","min","atan2","pow"];!function(){for(var t=0;t<Al.length;++t){var e=Al[t];pl[e]=yl({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e}),pl[e+"s"]=yl({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:e+"s"}),pl[e+"eq"]=yl({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"eq"}),pl[e+"seq"]=yl({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"seq"})}}();var Ml=["atan2","pow"];!function(){for(var t=0;t<Ml.length;++t){var e=Ml[t];pl[e+"op"]=yl({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"op"}),pl[e+"ops"]=yl({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:e+"ops"}),pl[e+"opeq"]=yl({args:["array","array"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opeq"}),pl[e+"opseq"]=yl({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+e,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:e+"opseq"})}}(),pl.any=dl({args:["array"],pre:vl,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),pl.all=dl({args:["array"],pre:vl,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),pl.sum=dl({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),pl.prod=dl({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),pl.norm2squared=dl({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),pl.norm2=dl({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),pl.norminf=dl({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),pl.norm1=dl({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),pl.sup=dl({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),pl.inf=dl({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),pl.argmin=dl({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),pl.argmax=dl({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),pl.random=yl({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),pl.assign=yl({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),pl.assigns=yl({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),pl.equals=dl({args:["array","array"],pre:vl,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"});var Tl=function(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e},kl=function(t){return null!=t&&(El(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&El(t.slice(0,0))}(t)||!!t._isBuffer)};function El(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}var Cl="undefined"!=typeof Float64Array;function Sl(t,e){return t[0]-e[0]}function Ll(){var t,e=this.stride,r=new Array(e.length);for(t=0;t<r.length;++t)r[t]=[Math.abs(e[t]),t];r.sort(Sl);var n=new Array(r.length);for(t=0;t<n.length;++t)n[t]=r[t][1];return n}function Ol(t,e){var r=["View",e,"d",t].join("");e<0&&(r="View_Nil"+t);var n="generic"===t;if(-1===e){var a="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}";return new Function(a)()}if(0===e){a="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+t+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(n?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(n?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}";return new Function("TrivialArray",a)(Dl[t][0])}a=["'use strict'"];var i=Tl(e),o=i.map(function(t){return"i"+t}),l="this.offset+"+i.map(function(t){return"this.stride["+t+"]*i"+t}).join("+"),s=i.map(function(t){return"b"+t}).join(","),u=i.map(function(t){return"c"+t}).join(",");a.push("function "+r+"(a,"+s+","+u+",d){this.data=a","this.shape=["+s+"]","this.stride=["+u+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+t+"'","proto.dimension="+e),a.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+i.map(function(t){return"this.shape["+t+"]"}).join("*"),"}})"),1===e?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),e<4?(a.push("function "+r+"_order(){"),2===e?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===e&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+r+"_set("+o.join(",")+",v){"),n?a.push("return this.data.set("+l+",v)}"):a.push("return this.data["+l+"]=v}"),a.push("proto.get=function "+r+"_get("+o.join(",")+"){"),n?a.push("return this.data.get("+l+")}"):a.push("return this.data["+l+"]}"),a.push("proto.index=function "+r+"_index(",o.join(),"){return "+l+"}"),a.push("proto.hi=function "+r+"_hi("+o.join(",")+"){return new "+r+"(this.data,"+i.map(function(t){return["(typeof i",t,"!=='number'||i",t,"<0)?this.shape[",t,"]:i",t,"|0"].join("")}).join(",")+","+i.map(function(t){return"this.stride["+t+"]"}).join(",")+",this.offset)}");var c=i.map(function(t){return"a"+t+"=this.shape["+t+"]"}),f=i.map(function(t){return"c"+t+"=this.stride["+t+"]"});a.push("proto.lo=function "+r+"_lo("+o.join(",")+"){var b=this.offset,d=0,"+c.join(",")+","+f.join(","));for(var h=0;h<e;++h)a.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");a.push("return new "+r+"(this.data,"+i.map(function(t){return"a"+t}).join(",")+","+i.map(function(t){return"c"+t}).join(",")+",b)}"),a.push("proto.step=function "+r+"_step("+o.join(",")+"){var "+i.map(function(t){return"a"+t+"=this.shape["+t+"]"}).join(",")+","+i.map(function(t){return"b"+t+"=this.stride["+t+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(h=0;h<e;++h)a.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");a.push("return new "+r+"(this.data,"+i.map(function(t){return"a"+t}).join(",")+","+i.map(function(t){return"b"+t}).join(",")+",c)}");var d=new Array(e),p=new Array(e);for(h=0;h<e;++h)d[h]="a[i"+h+"]",p[h]="b[i"+h+"]";a.push("proto.transpose=function "+r+"_transpose("+o+"){"+o.map(function(t,e){return t+"=("+t+"===undefined?"+e+":"+t+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+d.join(",")+","+p.join(",")+",this.offset)}"),a.push("proto.pick=function "+r+"_pick("+o+"){var a=[],b=[],c=this.offset");for(h=0;h<e;++h)a.push("if(typeof i"+h+"==='number'&&i"+h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");return a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+i.map(function(t){return"shape["+t+"]"}).join(",")+","+i.map(function(t){return"stride["+t+"]"}).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",a.join("\n"))(Dl[t],Ll)}var Dl={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};var Rl=function(t,e,r,n){if(void 0===t)return(0,Dl.array[0])([]);"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var a=e.length;if(void 0===r){r=new Array(a);for(var i=a-1,o=1;i>=0;--i)r[i]=o,o*=e[i]}if(void 0===n)for(n=0,i=0;i<a;++i)r[i]<0&&(n-=(e[i]-1)*r[i]);for(var l=function(t){if(kl(t))return"buffer";if(Cl)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(t)?"array":"generic"}(t),s=Dl[l];s.length<=a+1;)s.push(Ol(l,s.length-1));return(0,s[a+1])(t,e,r,n)},Pl={};function Il(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}Pl.INT_BITS=32,Pl.INT_MAX=2147483647,Pl.INT_MIN=-1<<31,Pl.sign=function(t){return(t>0)-(t<0)},Pl.abs=function(t){var e=t>>31;return(t^e)-e},Pl.min=function(t,e){return e^(t^e)&-(t<e)},Pl.max=function(t,e){return t^(t^e)&-(t<e)},Pl.isPow2=function(t){return!(t&t-1||!t)},Pl.log2=function(t){var e,r;return e=(t>65535)<<4,e|=r=((t>>>=e)>255)<<3,e|=r=((t>>>=r)>15)<<2,(e|=r=((t>>>=r)>3)<<1)|(t>>>=r)>>1},Pl.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},Pl.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},Pl.countTrailingZeros=Il,Pl.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},Pl.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},Pl.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var Bl=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,a=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--a;t[e]=n<<a&255}}(Bl),Pl.reverse=function(t){return Bl[255&t]<<24|Bl[t>>>8&255]<<16|Bl[t>>>16&255]<<8|Bl[t>>>24&255]},Pl.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},Pl.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},Pl.interleave3=function(t,e,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},Pl.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},Pl.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>Il(t)+1};for(var Fl={byteLength:function(t){return 3*t.length/4-ql(t)},toByteArray:function(t){var e,r,n,a,i,o=t.length;a=ql(t),i=new jl(3*o/4-a),r=a>0?o-4:o;var l=0;for(e=0;e<r;e+=4)n=Nl[t.charCodeAt(e)]<<18|Nl[t.charCodeAt(e+1)]<<12|Nl[t.charCodeAt(e+2)]<<6|Nl[t.charCodeAt(e+3)],i[l++]=n>>16&255,i[l++]=n>>8&255,i[l++]=255&n;2===a?(n=Nl[t.charCodeAt(e)]<<2|Nl[t.charCodeAt(e+1)]>>4,i[l++]=255&n):1===a&&(n=Nl[t.charCodeAt(e)]<<10|Nl[t.charCodeAt(e+1)]<<4|Nl[t.charCodeAt(e+2)]>>2,i[l++]=n>>8&255,i[l++]=255&n);return i},fromByteArray:function(t){for(var e,r=t.length,n=r%3,a="",i=[],o=0,l=r-n;o<l;o+=16383)i.push(Gl(t,o,o+16383>l?l:o+16383));1===n?(e=t[r-1],a+=zl[e>>2],a+=zl[e<<4&63],a+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],a+=zl[e>>10],a+=zl[e>>4&63],a+=zl[e<<2&63],a+="=");return i.push(a),i.join("")}},zl=[],Nl=[],jl="undefined"!=typeof Uint8Array?Uint8Array:Array,Ul="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vl=0,Hl=Ul.length;Vl<Hl;++Vl)zl[Vl]=Ul[Vl],Nl[Ul.charCodeAt(Vl)]=Vl;function ql(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function Gl(t,e,r){for(var n,a,i=[],o=e;o<r;o+=3)n=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(zl[(a=n)>>18&63]+zl[a>>12&63]+zl[a>>6&63]+zl[63&a]);return i.join("")}Nl["-".charCodeAt(0)]=62,Nl["_".charCodeAt(0)]=63;var Xl={read:function(t,e,r,n,a){var i,o,l=8*a-n-1,s=(1<<l)-1,u=s>>1,c=-7,f=r?a-1:0,h=r?-1:1,d=t[e+f];for(f+=h,i=d&(1<<-c)-1,d>>=-c,c+=l;c>0;i=256*i+t[e+f],f+=h,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=n;c>0;o=256*o+t[e+f],f+=h,c-=8);if(0===i)i=1-u;else{if(i===s)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),i-=u}return(d?-1:1)*o*Math.pow(2,i-n)},write:function(t,e,r,n,a,i){var o,l,s,u=8*i-a-1,c=(1<<u)-1,f=c>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:i-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-o))<1&&(o--,s*=2),(e+=o+f>=1?h/s:h*Math.pow(2,1-f))*s>=2&&(o++,s/=2),o+f>=c?(l=0,o=c):o+f>=1?(l=(e*s-1)*Math.pow(2,a),o+=f):(l=e*Math.pow(2,f-1)*Math.pow(2,a),o=0));a>=8;t[r+d]=255&l,d+=p,l/=256,a-=8);for(o=o<<a|l,u+=a;u>0;t[r+d]=255&o,d+=p,o/=256,u-=8);t[r+d-p]|=128*g}},Yl={};Yl.Buffer=Jl,Yl.SlowBuffer=function(t){+t!=t&&(t=0);return Jl.alloc(+t)},Yl.INSPECT_MAX_BYTES=50;var Wl=2147483647;function Zl(t){if(t>Wl)throw new RangeError("Invalid typed array length");var e=new Uint8Array(t);return e.__proto__=Jl.prototype,e}function Jl(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return Kl(t)}return Ql(t,e,r)}function Ql(t,e,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return Ss(t)||t&&Ss(t.buffer)?function(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r);return n.__proto__=Jl.prototype,n}(t,e,r):"string"==typeof t?function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!Jl.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var r=0|rs(t,e),n=Zl(r),a=n.write(t,e);a!==r&&(n=n.slice(0,a));return n}(t,e):function(t){if(Jl.isBuffer(t)){var e=0|es(t.length),r=Zl(e);return 0===r.length?r:(t.copy(r,0,0,e),r)}if(t){if(ArrayBuffer.isView(t)||"length"in t)return"number"!=typeof t.length||Ls(t.length)?Zl(0):ts(t);if("Buffer"===t.type&&Array.isArray(t.data))return ts(t.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}(t)}function $l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('"size" argument must not be negative')}function Kl(t){return $l(t),Zl(t<0?0:0|es(t))}function ts(t){for(var e=t.length<0?0:0|es(t.length),r=Zl(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function es(t){if(t>=Wl)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Wl.toString(16)+" bytes");return 0|t}function rs(t,e){if(Jl.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||Ss(t))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return ks(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Es(t).length;default:if(n)return ks(t).length;e=(""+e).toLowerCase(),n=!0}}function ns(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function as(t,e,r,n,a){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Ls(r=+r)&&(r=a?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(a)return-1;r=t.length-1}else if(r<0){if(!a)return-1;r=0}if("string"==typeof e&&(e=Jl.from(e,n)),Jl.isBuffer(e))return 0===e.length?-1:is(t,e,r,n,a);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):is(t,[e],r,n,a);throw new TypeError("val must be string, number or Buffer")}function is(t,e,r,n,a){var i,o=1,l=t.length,s=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,l/=2,s/=2,r/=2}function u(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(a){var c=-1;for(i=r;i<l;i++)if(u(t,i)===u(e,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===s)return c*o}else-1!==c&&(i-=i-c),c=-1}else for(r+s>l&&(r=l-s),i=r;i>=0;i--){for(var f=!0,h=0;h<s;h++)if(u(t,i+h)!==u(e,h)){f=!1;break}if(f)return i}return-1}function os(t,e,r,n){r=Number(r)||0;var a=t.length-r;n?(n=Number(n))>a&&(n=a):n=a;var i=e.length;n>i/2&&(n=i/2);for(var o=0;o<n;++o){var l=parseInt(e.substr(2*o,2),16);if(Ls(l))return o;t[r+o]=l}return o}function ls(t,e,r,n){return Cs(ks(e,t.length-r),t,r,n)}function ss(t,e,r,n){return Cs(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function us(t,e,r,n){return ss(t,e,r,n)}function cs(t,e,r,n){return Cs(Es(e),t,r,n)}function fs(t,e,r,n){return Cs(function(t,e){for(var r,n,a,i=[],o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,a=r%256,i.push(a),i.push(n);return i}(e,t.length-r),t,r,n)}function hs(t,e,r){return 0===e&&r===t.length?Fl.fromByteArray(t):Fl.fromByteArray(t.slice(e,r))}function ds(t,e,r){r=Math.min(t.length,r);for(var n=[],a=e;a<r;){var i,o,l,s,u=t[a],c=null,f=u>239?4:u>223?3:u>191?2:1;if(a+f<=r)switch(f){case 1:u<128&&(c=u);break;case 2:128==(192&(i=t[a+1]))&&(s=(31&u)<<6|63&i)>127&&(c=s);break;case 3:i=t[a+1],o=t[a+2],128==(192&i)&&128==(192&o)&&(s=(15&u)<<12|(63&i)<<6|63&o)>2047&&(s<55296||s>57343)&&(c=s);break;case 4:i=t[a+1],o=t[a+2],l=t[a+3],128==(192&i)&&128==(192&o)&&128==(192&l)&&(s=(15&u)<<18|(63&i)<<12|(63&o)<<6|63&l)>65535&&s<1114112&&(c=s)}null===c?(c=65533,f=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),a+=f}return function(t){var e=t.length;if(e<=ps)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=ps));return r}(n)}Yl.kMaxLength=Wl,Jl.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),Jl.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Jl.prototype,"parent",{get:function(){if(this instanceof Jl)return this.buffer}}),Object.defineProperty(Jl.prototype,"offset",{get:function(){if(this instanceof Jl)return this.byteOffset}}),"undefined"!=typeof Symbol&&Symbol.species&&Jl[Symbol.species]===Jl&&Object.defineProperty(Jl,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),Jl.poolSize=8192,Jl.from=function(t,e,r){return Ql(t,e,r)},Jl.prototype.__proto__=Uint8Array.prototype,Jl.__proto__=Uint8Array,Jl.alloc=function(t,e,r){return function(t,e,r){return $l(t),t<=0?Zl(t):void 0!==e?"string"==typeof r?Zl(t).fill(e,r):Zl(t).fill(e):Zl(t)}(t,e,r)},Jl.allocUnsafe=function(t){return Kl(t)},Jl.allocUnsafeSlow=function(t){return Kl(t)},Jl.isBuffer=function(t){return null!=t&&!0===t._isBuffer},Jl.compare=function(t,e){if(!Jl.isBuffer(t)||!Jl.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,a=0,i=Math.min(r,n);a<i;++a)if(t[a]!==e[a]){r=t[a],n=e[a];break}return r<n?-1:n<r?1:0},Jl.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Jl.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Jl.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=Jl.allocUnsafe(e),a=0;for(r=0;r<t.length;++r){var i=t[r];if(ArrayBuffer.isView(i)&&(i=Jl.from(i)),!Jl.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,a),a+=i.length}return n},Jl.byteLength=rs,Jl.prototype._isBuffer=!0,Jl.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)ns(this,e,e+1);return this},Jl.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)ns(this,e,e+3),ns(this,e+1,e+2);return this},Jl.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)ns(this,e,e+7),ns(this,e+1,e+6),ns(this,e+2,e+5),ns(this,e+3,e+4);return this},Jl.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?ds(this,0,t):function(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return ms(this,e,r);case"utf8":case"utf-8":return ds(this,e,r);case"ascii":return gs(this,e,r);case"latin1":case"binary":return vs(this,e,r);case"base64":return hs(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ys(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}.apply(this,arguments)},Jl.prototype.toLocaleString=Jl.prototype.toString,Jl.prototype.equals=function(t){if(!Jl.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Jl.compare(this,t)},Jl.prototype.inspect=function(){var t="",e=Yl.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Jl.prototype.compare=function(t,e,r,n,a){if(!Jl.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),e<0||r>t.length||n<0||a>this.length)throw new RangeError("out of range index");if(n>=a&&e>=r)return 0;if(n>=a)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,a>>>=0,this===t)return 0;for(var i=a-n,o=r-e,l=Math.min(i,o),s=this.slice(n,a),u=t.slice(e,r),c=0;c<l;++c)if(s[c]!==u[c]){i=s[c],o=u[c];break}return i<o?-1:o<i?1:0},Jl.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},Jl.prototype.indexOf=function(t,e,r){return as(this,t,e,r,!0)},Jl.prototype.lastIndexOf=function(t,e,r){return as(this,t,e,r,!1)},Jl.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var a=this.length-e;if((void 0===r||r>a)&&(r=a),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return os(this,t,e,r);case"utf8":case"utf-8":return ls(this,t,e,r);case"ascii":return ss(this,t,e,r);case"latin1":case"binary":return us(this,t,e,r);case"base64":return cs(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fs(this,t,e,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},Jl.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ps=4096;function gs(t,e,r){var n="";r=Math.min(t.length,r);for(var a=e;a<r;++a)n+=String.fromCharCode(127&t[a]);return n}function vs(t,e,r){var n="";r=Math.min(t.length,r);for(var a=e;a<r;++a)n+=String.fromCharCode(t[a]);return n}function ms(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var a="",i=e;i<r;++i)a+=Ts(t[i]);return a}function ys(t,e,r){for(var n=t.slice(e,r),a="",i=0;i<n.length;i+=2)a+=String.fromCharCode(n[i]+256*n[i+1]);return a}function xs(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function bs(t,e,r,n,a,i){if(!Jl.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>a||e<i)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function _s(t,e,r,n,a,i){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function ws(t,e,r,n,a){return e=+e,r>>>=0,a||_s(t,0,r,4),Xl.write(t,e,r,n,23,4),r+4}function As(t,e,r,n,a){return e=+e,r>>>=0,a||_s(t,0,r,8),Xl.write(t,e,r,n,52,8),r+8}Jl.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return n.__proto__=Jl.prototype,n},Jl.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||xs(t,e,this.length);for(var n=this[t],a=1,i=0;++i<e&&(a*=256);)n+=this[t+i]*a;return n},Jl.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||xs(t,e,this.length);for(var n=this[t+--e],a=1;e>0&&(a*=256);)n+=this[t+--e]*a;return n},Jl.prototype.readUInt8=function(t,e){return t>>>=0,e||xs(t,1,this.length),this[t]},Jl.prototype.readUInt16LE=function(t,e){return t>>>=0,e||xs(t,2,this.length),this[t]|this[t+1]<<8},Jl.prototype.readUInt16BE=function(t,e){return t>>>=0,e||xs(t,2,this.length),this[t]<<8|this[t+1]},Jl.prototype.readUInt32LE=function(t,e){return t>>>=0,e||xs(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Jl.prototype.readUInt32BE=function(t,e){return t>>>=0,e||xs(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Jl.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||xs(t,e,this.length);for(var n=this[t],a=1,i=0;++i<e&&(a*=256);)n+=this[t+i]*a;return n>=(a*=128)&&(n-=Math.pow(2,8*e)),n},Jl.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||xs(t,e,this.length);for(var n=e,a=1,i=this[t+--n];n>0&&(a*=256);)i+=this[t+--n]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*e)),i},Jl.prototype.readInt8=function(t,e){return t>>>=0,e||xs(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Jl.prototype.readInt16LE=function(t,e){t>>>=0,e||xs(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Jl.prototype.readInt16BE=function(t,e){t>>>=0,e||xs(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Jl.prototype.readInt32LE=function(t,e){return t>>>=0,e||xs(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Jl.prototype.readInt32BE=function(t,e){return t>>>=0,e||xs(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Jl.prototype.readFloatLE=function(t,e){return t>>>=0,e||xs(t,4,this.length),Xl.read(this,t,!0,23,4)},Jl.prototype.readFloatBE=function(t,e){return t>>>=0,e||xs(t,4,this.length),Xl.read(this,t,!1,23,4)},Jl.prototype.readDoubleLE=function(t,e){return t>>>=0,e||xs(t,8,this.length),Xl.read(this,t,!0,52,8)},Jl.prototype.readDoubleBE=function(t,e){return t>>>=0,e||xs(t,8,this.length),Xl.read(this,t,!1,52,8)},Jl.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||bs(this,t,e,r,Math.pow(2,8*r)-1,0);var a=1,i=0;for(this[e]=255&t;++i<r&&(a*=256);)this[e+i]=t/a&255;return e+r},Jl.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e>>>=0,r>>>=0,n)||bs(this,t,e,r,Math.pow(2,8*r)-1,0);var a=r-1,i=1;for(this[e+a]=255&t;--a>=0&&(i*=256);)this[e+a]=t/i&255;return e+r},Jl.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||bs(this,t,e,1,255,0),this[e]=255&t,e+1},Jl.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||bs(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},Jl.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||bs(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},Jl.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||bs(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},Jl.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||bs(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},Jl.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var a=Math.pow(2,8*r-1);bs(this,t,e,r,a-1,-a)}var i=0,o=1,l=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===l&&0!==this[e+i-1]&&(l=1),this[e+i]=(t/o>>0)-l&255;return e+r},Jl.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var a=Math.pow(2,8*r-1);bs(this,t,e,r,a-1,-a)}var i=r-1,o=1,l=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===l&&0!==this[e+i+1]&&(l=1),this[e+i]=(t/o>>0)-l&255;return e+r},Jl.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||bs(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},Jl.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||bs(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},Jl.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||bs(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},Jl.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||bs(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},Jl.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||bs(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},Jl.prototype.writeFloatLE=function(t,e,r){return ws(this,t,e,!0,r)},Jl.prototype.writeFloatBE=function(t,e,r){return ws(this,t,e,!1,r)},Jl.prototype.writeDoubleLE=function(t,e,r){return As(this,t,e,!0,r)},Jl.prototype.writeDoubleBE=function(t,e,r){return As(this,t,e,!1,r)},Jl.prototype.copy=function(t,e,r,n){if(!Jl.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var a=n-r;if(this===t&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(e,r,n);else if(this===t&&r<e&&e<n)for(var i=a-1;i>=0;--i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,n),e);return a},Jl.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Jl.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){var a=t.charCodeAt(0);("utf8"===n&&a<128||"latin1"===n)&&(t=a)}}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var o=Jl.isBuffer(t)?t:new Jl(t,n),l=o.length;if(0===l)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%l]}return this};var Ms=/[^+/0-9A-Za-z-_]/g;function Ts(t){return t<16?"0"+t.toString(16):t.toString(16)}function ks(t,e){var r;e=e||1/0;for(var n=t.length,a=null,i=[],o=0;o<n;++o){if((r=t.charCodeAt(o))>55295&&r<57344){if(!a){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}a=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),a=r;continue}r=65536+(a-55296<<10|r-56320)}else a&&(e-=3)>-1&&i.push(239,191,189);if(a=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function Es(t){return Fl.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(Ms,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Cs(t,e,r,n){for(var a=0;a<n&&!(a+r>=e.length||a>=t.length);++a)e[a+r]=t[a];return a}function Ss(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&"ArrayBuffer"===t.constructor.name&&"number"==typeof t.byteLength}function Ls(t){return t!=t}var Os=function(t,e){switch(void 0===e&&(e=0),typeof t){case"number":if(t>0)return function(t,e){var r,n;for(r=new Array(t),n=0;n<t;++n)r[n]=e;return r}(0|t,e);break;case"object":if("number"==typeof t.length)return function t(e,r,n){var a=0|e[n];if(a<=0)return[];var i,o=new Array(a);if(n===e.length-1)for(i=0;i<a;++i)o[i]=r;else for(i=0;i<a;++i)o[i]=t(e,r,n+1);return o}(t,e,0)}return[]},Ds={};(function(t,e){"use strict";t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:Os([32,0]),UINT16:Os([32,0]),UINT32:Os([32,0]),INT8:Os([32,0]),INT16:Os([32,0]),INT32:Os([32,0]),FLOAT:Os([32,0]),DOUBLE:Os([32,0]),DATA:Os([32,0]),UINT8C:Os([32,0]),BUFFER:Os([32,0])});var r="undefined"!=typeof Uint8ClampedArray,n=t.__TYPEDARRAY_POOL;n.UINT8C||(n.UINT8C=Os([32,0])),n.BUFFER||(n.BUFFER=Os([32,0]));var a=n.DATA,i=n.BUFFER;function o(t){if(t){var e=t.length||t.byteLength,r=Pl.log2(e);a[r].push(t)}}function l(t){t=Pl.nextPow2(t);var e=Pl.log2(t),r=a[e];return r.length>0?r.pop():new ArrayBuffer(t)}function s(t){return new Uint8Array(l(t),0,t)}function u(t){return new Uint16Array(l(2*t),0,t)}function c(t){return new Uint32Array(l(4*t),0,t)}function f(t){return new Int8Array(l(t),0,t)}function h(t){return new Int16Array(l(2*t),0,t)}function d(t){return new Int32Array(l(4*t),0,t)}function p(t){return new Float32Array(l(4*t),0,t)}function g(t){return new Float64Array(l(8*t),0,t)}function v(t){return r?new Uint8ClampedArray(l(t),0,t):s(t)}function m(t){return new DataView(l(t),0,t)}function y(t){t=Pl.nextPow2(t);var r=Pl.log2(t),n=i[r];return n.length>0?n.pop():new e(t)}Ds.free=function(t){if(e.isBuffer(t))i[Pl.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var r=t.length||t.byteLength,n=0|Pl.log2(r);a[n].push(t)}},Ds.freeUint8=Ds.freeUint16=Ds.freeUint32=Ds.freeInt8=Ds.freeInt16=Ds.freeInt32=Ds.freeFloat32=Ds.freeFloat=Ds.freeFloat64=Ds.freeDouble=Ds.freeUint8Clamped=Ds.freeDataView=function(t){o(t.buffer)},Ds.freeArrayBuffer=o,Ds.freeBuffer=function(t){i[Pl.log2(t.length)].push(t)},Ds.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return l(t);switch(e){case"uint8":return s(t);case"uint16":return u(t);case"uint32":return c(t);case"int8":return f(t);case"int16":return h(t);case"int32":return d(t);case"float":case"float32":return p(t);case"double":case"float64":return g(t);case"uint8_clamped":return v(t);case"buffer":return y(t);case"data":case"dataview":return m(t);default:return null}return null},Ds.mallocArrayBuffer=l,Ds.mallocUint8=s,Ds.mallocUint16=u,Ds.mallocUint32=c,Ds.mallocInt8=f,Ds.mallocInt16=h,Ds.mallocInt32=d,Ds.mallocFloat32=Ds.mallocFloat=p,Ds.mallocFloat64=Ds.mallocDouble=g,Ds.mallocUint8Clamped=v,Ds.mallocDataView=m,Ds.mallocBuffer=y,Ds.clearCache=function(){for(var t=0;t<32;++t)n.UINT8[t].length=0,n.UINT16[t].length=0,n.UINT32[t].length=0,n.INT8[t].length=0,n.INT16[t].length=0,n.INT32[t].length=0,n.FLOAT[t].length=0,n.DOUBLE[t].length=0,n.UINT8C[t].length=0,a[t].length=0,i[t].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Yl.Buffer);var Rs=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function Ps(t,e,r,n,a){this.gl=t,this.type=e,this.handle=r,this.length=n,this.usage=a}var Is=Ps.prototype;function Bs(t,e,r,n,a,i){var o=a.length*a.BYTES_PER_ELEMENT;if(i<0)return t.bufferData(e,a,n),o;if(o+i>r)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return t.bufferSubData(e,i,a),r}function Fs(t,e){for(var r=Ds.malloc(t.length,e),n=t.length,a=0;a<n;++a)r[a]=t[a];return r}Is.bind=function(){this.gl.bindBuffer(this.type,this.handle)},Is.unbind=function(){this.gl.bindBuffer(this.type,null)},Is.dispose=function(){this.gl.deleteBuffer(this.handle)},Is.update=function(t,e){if("number"!=typeof e&&(e=-1),this.bind(),"object"==typeof t&&void 0!==t.shape){var r=t.dtype;if(Rs.indexOf(r)<0&&(r="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER)r=gl.getExtension("OES_element_index_uint")&&"uint16"!==r?"uint32":"uint16";if(r===t.dtype&&function(t,e){for(var r=1,n=e.length-1;n>=0;--n){if(e[n]!==r)return!1;r*=t[n]}return!0}(t.shape,t.stride))0===t.offset&&t.data.length===t.shape[0]?this.length=Bs(this.gl,this.type,this.length,this.usage,t.data,e):this.length=Bs(this.gl,this.type,this.length,this.usage,t.data.subarray(t.offset,t.shape[0]),e);else{var n=Ds.malloc(t.size,r),a=Rl(n,t.shape);pl.assign(a,t),this.length=Bs(this.gl,this.type,this.length,this.usage,e<0?n:n.subarray(0,t.size),e),Ds.free(n)}}else if(Array.isArray(t)){var i;i=this.type===this.gl.ELEMENT_ARRAY_BUFFER?Fs(t,"uint16"):Fs(t,"float32"),this.length=Bs(this.gl,this.type,this.length,this.usage,e<0?i:i.subarray(0,t.length),e),Ds.free(i)}else if("object"==typeof t&&"number"==typeof t.length)this.length=Bs(this.gl,this.type,this.length,this.usage,t,e);else{if("number"!=typeof t&&void 0!==t)throw new Error("gl-buffer: Invalid data type");if(e>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(t|=0)<=0&&(t=1),this.gl.bufferData(this.type,0|t,this.usage),this.length=t}};var zs=function(t,e,r,n){if(r=r||t.ARRAY_BUFFER,n=n||t.DYNAMIC_DRAW,r!==t.ARRAY_BUFFER&&r!==t.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(n!==t.DYNAMIC_DRAW&&n!==t.STATIC_DRAW&&n!==t.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var a=new Ps(t,r,t.createBuffer(),0,n);return a.update(e),a},Ns=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),r=[],n=0;n<t.length-1;n++)r.push(t[n],e[n]||"");return r.push(t[n]),r.join("")},js=Ns(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]),Us={lineVert:Ns(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:js,textVert:Ns(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:js,gridVert:Ns(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:js,boxVert:Ns(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:Ns(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])};function Vs(t,e,r){this.shortMessage=e||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(e||t||"")+(r?"\n"+r:""),this.stack=(new Error).stack}Vs.prototype=new Error,Vs.prototype.name="GLError",Vs.prototype.constructor=Vs;var Hs=Vs,qs=function(t,e,r,n){for(var a={},i=0,o=r.length;i<o;++i){var l=r[i],s=l.name,u=l.type,c=l.locations;switch(u){case"bool":case"int":case"float":Ys(t,e,c[0],n,1,a,s);break;default:if(u.indexOf("vec")>=0){var f=u.charCodeAt(u.length-1)-48;if(f<2||f>4)throw new Hs("","Invalid data type for attribute "+s+": "+u);Ys(t,e,c[0],n,f,a,s)}else{if(!(u.indexOf("mat")>=0))throw new Hs("","Unknown data type for attribute "+s+": "+u);var f=u.charCodeAt(u.length-1)-48;if(f<2||f>4)throw new Hs("","Invalid data type for attribute "+s+": "+u);Ws(t,e,c,n,f,a,s)}}}return a};function Gs(t,e,r,n,a,i){this._gl=t,this._wrapper=e,this._index=r,this._locations=n,this._dimension=a,this._constFunc=i}var Xs=Gs.prototype;function Ys(t,e,r,n,a,i,o){for(var l=["gl","v"],s=[],u=0;u<a;++u)l.push("x"+u),s.push("x"+u);l.push("if(x0.length===void 0){return gl.vertexAttrib"+a+"f(v,"+s.join()+")}else{return gl.vertexAttrib"+a+"fv(v,x0)}");var c=Function.apply(null,l),f=new Gs(t,e,r,n,a,c);Object.defineProperty(i,o,{set:function(e){return t.disableVertexAttribArray(n[r]),c(t,n[r],e),e},get:function(){return f},enumerable:!0})}function Ws(t,e,r,n,a,i,o){for(var l=new Array(a),s=new Array(a),u=0;u<a;++u)Ys(t,e,r[u],n,a,l,u),s[u]=l[u];Object.defineProperty(l,"location",{set:function(t){if(Array.isArray(t))for(var e=0;e<a;++e)s[e].location=t[e];else for(e=0;e<a;++e)s[e].location=t+e;return t},get:function(){for(var t=new Array(a),e=0;e<a;++e)t[e]=n[r[e]];return t},enumerable:!0}),l.pointer=function(e,i,o,l){e=e||t.FLOAT,i=!!i,o=o||a*a,l=l||0;for(var s=0;s<a;++s){var u=n[r[s]];t.vertexAttribPointer(u,a,e,i,o,l+s*a),t.enableVertexAttribArray(u)}};var c=new Array(a),f=t["vertexAttrib"+a+"fv"];Object.defineProperty(i,o,{set:function(e){for(var i=0;i<a;++i){var o=n[r[i]];if(t.disableVertexAttribArray(o),Array.isArray(e[0]))f.call(t,o,e[i]);else{for(var l=0;l<a;++l)c[l]=e[a*i+l];f.call(t,o,c)}}return e},get:function(){return l},enumerable:!0})}Xs.pointer=function(t,e,r,n){var a=this._gl,i=this._locations[this._index];a.vertexAttribPointer(i,this._dimension,t||a.FLOAT,!!e,r||0,n||0),a.enableVertexAttribArray(i)},Xs.set=function(t,e,r,n){return this._constFunc(this._locations[this._index],t,e,r,n)},Object.defineProperty(Xs,"location",{get:function(){return this._locations[this._index]},set:function(t){return t!==this._locations[this._index]&&(this._locations[this._index]=0|t,this._wrapper.program=null),0|t}});var Zs=function(t,e){for(var r={},n=0;n<t.length;++n)for(var a=t[n].name,i=a.split("."),o=r,l=0;l<i.length;++l){var s=i[l].split("[");if(s.length>1){s[0]in o||(o[s[0]]=[]),o=o[s[0]];for(var u=1;u<s.length;++u){var c=parseInt(s[u]);u<s.length-1||l<i.length-1?(c in o||(u<s.length-1?o[c]=[]:o[c]={}),o=o[c]):o[c]=e?n:t[n].type}}else l<i.length-1?(s[0]in o||(o[s[0]]={}),o=o[s[0]]):o[s[0]]=e?n:t[n].type}return r};var Js=function(t,e,r,n){function a(t,e,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+e+"],obj"+t+")";case"float":return"gl.uniform1f(locations["+e+"],obj"+t+")";default:var n=r.indexOf("vec");if(!(0<=n&&n<=1&&r.length===4+n)){if(0===r.indexOf("mat")&&4===r.length){var a=r.charCodeAt(r.length-1)-48;if(a<2||a>4)throw new Hs("","Invalid uniform dimension type for matrix "+name+": "+r);return"gl.uniformMatrix"+a+"fv(locations["+e+"],false,obj"+t+")"}throw new Hs("","Unknown uniform data type for "+name+": "+r)}var a=r.charCodeAt(r.length-1)-48;if(a<2||a>4)throw new Hs("","Invalid data type");switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+a+"iv(locations["+e+"],obj"+t+")";case"v":return"gl.uniform"+a+"fv(locations["+e+"],obj"+t+")";default:throw new Hs("","Unrecognized data type for vector "+name+": "+r)}}}function i(e){for(var i=["return function updateProperty(obj){"],o=function t(e,r){if("object"!=typeof r)return[[e,r]];var n=[];for(var a in r){var i=r[a],o=e;parseInt(a)+""===a?o+="["+a+"]":o+="."+a,"object"==typeof i?n.push.apply(n,t(o,i)):n.push([o,i])}return n}("",e),l=0;l<o.length;++l){var s=o[l],u=s[0],c=s[1];n[c]&&i.push(a(u,c,r[c].type))}i.push("return obj}");var f=new Function("gl","locations",i.join("\n"));return f(t,n)}function o(a,o,s){if("object"==typeof s){var u=l(s);Object.defineProperty(a,o,{get:Qs(u),set:i(s),enumerable:!0,configurable:!1})}else n[s]?Object.defineProperty(a,o,{get:(c=s,new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+c+"])}")(t,e,n)),set:i(s),enumerable:!0,configurable:!1}):a[o]=function(t){switch(t){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var e=t.indexOf("vec");if(0<=e&&e<=1&&t.length===4+e){var r=t.charCodeAt(t.length-1)-48;if(r<2||r>4)throw new Hs("","Invalid data type");return"b"===t.charAt(0)?$s(r,!1):$s(r,0)}if(0===t.indexOf("mat")&&4===t.length){var r=t.charCodeAt(t.length-1)-48;if(r<2||r>4)throw new Hs("","Invalid uniform dimension type for matrix "+name+": "+t);return $s(r*r,0)}throw new Hs("","Unknown uniform data type for "+name+": "+t)}}(r[s].type);var c}function l(t){var e;if(Array.isArray(t)){e=new Array(t.length);for(var r=0;r<t.length;++r)o(e,r,t[r])}else for(var n in e={},t)o(e,n,t[n]);return e}var s=Zs(r,!0);return{get:Qs(l(s)),set:i(s),enumerable:!0,configurable:!0}};function Qs(t){return new Function("y","return function(){return y}")(t)}function $s(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=e;return r}var Ks={uniforms:function(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),n=[],a=0;a<r;++a){var i=t.getActiveUniform(e,a);if(i){var o=ru(t,i.type);if(i.size>1)for(var l=0;l<i.size;++l)n.push({name:i.name.replace("[0]","["+l+"]"),type:o});else n.push({name:i.name,type:o})}}return n},attributes:function(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),n=[],a=0;a<r;++a){var i=t.getActiveAttrib(e,a);i&&n.push({name:i.name,type:ru(t,i.type)})}return n}},tu={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},eu=null;function ru(t,e){if(!eu){var r=Object.keys(tu);eu={};for(var n=0;n<r.length;++n){var a=r[n];eu[t[a]]=tu[a]}}return eu[e]}var nu,au="",iu=function(t,e){if("string"!=typeof t)throw new TypeError("expected a string");if(1===e)return t;if(2===e)return t+t;var r=t.length*e;if(nu!==t||void 0===nu)nu=t,au="";else if(au.length>=r)return au.substr(0,r);for(;r>au.length&&e>1;)1&e&&(au+=t),e>>=1,t+=t;return au=(au+=t).substr(0,r)};var ou=function(t,e,r){return iu(r=void 0!==r?r+"":" ",e)+t},lu=function(t,e,r){e="number"==typeof e?e:1,r=r||": ";var n=t.split(/\r?\n/),a=String(n.length+e-1).length;return n.map(function(t,n){var i=n+e,o=String(i).length,l=ou(i,a-o);return l+r+t}).join("\n")};var su={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34000:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"},uu=function(t){return su[t]},cu=function(t){return atob(t)},fu=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],hu=(fu=fu.slice().filter(function(t){return!/^(gl\_|texture)/.test(t)})).concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),du=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"],pu=du.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),gu=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"],vu=function(t){var e,r,n,a=0,i=0,o=mu,l=[],s=[],u=1,c=0,f=0,h=!1,d=!1,p="",g=fu,v=du;"300 es"===(t=t||{}).version&&(g=hu,v=pu);return function(t){return s=[],null!==t?function(t){var r;a=0,n=(p+=t).length;for(;e=p[a],a<n;){switch(r=a,o){case xu:a=_();break;case bu:case _u:a=b();break;case wu:a=w();break;case Au:a=T();break;case Lu:a=M();break;case Mu:a=k();break;case yu:a=E();break;case Cu:a=x();break;case mu:a=y()}if(r!==a)switch(p[r]){case"\n":c=0,++u;break;default:++c}}return i+=a,p=p.slice(a),s}(t.replace?t.replace(/\r\n/g,"\n"):t):function(t){l.length&&m(l.join(""));return o=Su,m("(eof)"),s}()};function m(t){t.length&&s.push({type:Ou[o],data:t,position:f,line:u,column:c})}function y(){return l=l.length?[]:l,"/"===r&&"*"===e?(f=i+a-1,o=xu,r=e,a+1):"/"===r&&"/"===e?(f=i+a-1,o=bu,r=e,a+1):"#"===e?(o=_u,f=i+a,a):/\s/.test(e)?(o=Cu,f=i+a,a):(h=/\d/.test(e),d=/[^\w_]/.test(e),f=i+a,o=h?Au:d?wu:yu,a)}function x(){return/[^\s]/g.test(e)?(m(l.join("")),o=mu,a):(l.push(e),r=e,a+1)}function b(){return"\r"!==e&&"\n"!==e||"\\"===r?(l.push(e),r=e,a+1):(m(l.join("")),o=mu,a)}function _(){return"/"===e&&"*"===r?(l.push(e),m(l.join("")),o=mu,a+1):(l.push(e),r=e,a+1)}function w(){if("."===r&&/\d/.test(e))return o=Mu,a;if("/"===r&&"*"===e)return o=xu,a;if("/"===r&&"/"===e)return o=bu,a;if("."===e&&l.length){for(;A(l););return o=Mu,a}if(";"===e||")"===e||"("===e){if(l.length)for(;A(l););return m(e),o=mu,a+1}var t=2===l.length&&"="!==e;if(/[\w_\d\s]/.test(e)||t){for(;A(l););return o=mu,a}return l.push(e),r=e,a+1}function A(t){for(var e,r,n=0;;){if(e=gu.indexOf(t.slice(0,t.length+n).join("")),r=gu[e],-1===e){if(n--+t.length>0)continue;r=t.slice(0,1).join("")}return m(r),f+=r.length,(l=l.slice(r.length)).length}}function M(){return/[^a-fA-F0-9]/.test(e)?(m(l.join("")),o=mu,a):(l.push(e),r=e,a+1)}function T(){return"."===e?(l.push(e),o=Mu,r=e,a+1):/[eE]/.test(e)?(l.push(e),o=Mu,r=e,a+1):"x"===e&&1===l.length&&"0"===l[0]?(o=Lu,l.push(e),r=e,a+1):/[^\d]/.test(e)?(m(l.join("")),o=mu,a):(l.push(e),r=e,a+1)}function k(){return"f"===e&&(l.push(e),r=e,a+=1),/[eE]/.test(e)?(l.push(e),r=e,a+1):"-"===e&&/[eE]/.test(r)?(l.push(e),r=e,a+1):/[^\d]/.test(e)?(m(l.join("")),o=mu,a):(l.push(e),r=e,a+1)}function E(){if(/[^\d\w_]/.test(e)){var t=l.join("");return o=v.indexOf(t)>-1?Eu:g.indexOf(t)>-1?ku:Tu,m(l.join("")),o=mu,a}return l.push(e),r=e,a+1}},mu=999,yu=9999,xu=0,bu=1,_u=2,wu=3,Au=4,Mu=5,Tu=6,ku=7,Eu=8,Cu=9,Su=10,Lu=11,Ou=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];var Du=function(t,e){var r=vu(e),n=[];return n=(n=n.concat(r(t))).concat(r(null))};var Ru=function(t){for(var e=Array.isArray(t)?t:Du(t),r=0;r<e.length;r++){var n=e[r];if("preprocessor"===n.type){var a=n.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(a&&a[2]){var i=a[1],o=a[2];return(i?cu(o):o).trim()}}}};var Pu={};!function(){"use strict";var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function e(r){return function(r,n){var a,i,o,l,s,u,c,f,h,d=1,p=r.length,g="";for(i=0;i<p;i++)if("string"==typeof r[i])g+=r[i];else if(Array.isArray(r[i])){if((l=r[i])[2])for(a=n[d],o=0;o<l[2].length;o++){if(!a.hasOwnProperty(l[2][o]))throw new Error(e('[sprintf] property "%s" does not exist',l[2][o]));a=a[l[2][o]]}else a=l[1]?n[l[1]]:n[d++];if(t.not_type.test(l[8])&&t.not_primitive.test(l[8])&&a instanceof Function&&(a=a()),t.numeric_arg.test(l[8])&&"number"!=typeof a&&isNaN(a))throw new TypeError(e("[sprintf] expecting number but found %T",a));switch(t.number.test(l[8])&&(f=a>=0),l[8]){case"b":a=parseInt(a,10).toString(2);break;case"c":a=String.fromCharCode(parseInt(a,10));break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,l[6]?parseInt(l[6]):0);break;case"e":a=l[7]?parseFloat(a).toExponential(l[7]):parseFloat(a).toExponential();break;case"f":a=l[7]?parseFloat(a).toFixed(l[7]):parseFloat(a);break;case"g":a=l[7]?String(Number(a.toPrecision(l[7]))):parseFloat(a);break;case"o":a=(parseInt(a,10)>>>0).toString(8);break;case"s":a=String(a),a=l[7]?a.substring(0,l[7]):a;break;case"t":a=String(!!a),a=l[7]?a.substring(0,l[7]):a;break;case"T":a=Object.prototype.toString.call(a).slice(8,-1).toLowerCase(),a=l[7]?a.substring(0,l[7]):a;break;case"u":a=parseInt(a,10)>>>0;break;case"v":a=a.valueOf(),a=l[7]?a.substring(0,l[7]):a;break;case"x":a=(parseInt(a,10)>>>0).toString(16);break;case"X":a=(parseInt(a,10)>>>0).toString(16).toUpperCase()}t.json.test(l[8])?g+=a:(!t.number.test(l[8])||f&&!l[3]?h="":(h=f?"+":"-",a=a.toString().replace(t.sign,"")),u=l[4]?"0"===l[4]?"0":l[4].charAt(1):" ",c=l[6]-(h+a).length,s=l[6]&&c>0?u.repeat(c):"",g+=l[5]?h+a+s:"0"===u?h+s+a:s+h+a)}return g}(function(e){if(n[e])return n[e];var r,a=e,i=[],o=0;for(;a;){if(null!==(r=t.text.exec(a)))i.push(r[0]);else if(null!==(r=t.modulo.exec(a)))i.push("%");else{if(null===(r=t.placeholder.exec(a)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){o|=1;var l=[],s=r[2],u=[];if(null===(u=t.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(l.push(u[1]);""!==(s=s.substring(u[0].length));)if(null!==(u=t.key_access.exec(s)))l.push(u[1]);else{if(null===(u=t.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");l.push(u[1])}r[2]=l}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i.push(r)}a=a.substring(r[0].length)}return n[e]=i}(r),arguments)}function r(t,r){return e.apply(null,[t].concat(r||[]))}var n=Object.create(null);void 0!==Pu&&(Pu.sprintf=e,Pu.vsprintf=r),"undefined"!=typeof window&&(window.sprintf=e,window.vsprintf=r,"function"==typeof CC&&CC.amd&&CC(function(){return{sprintf:e,vsprintf:r}}))}();var Iu=Pu.sprintf,Bu=function(t,e,r){"use strict";var n=Ru(e)||"of unknown name (see npm glsl-shader-name)",a="unknown type";void 0!==r&&(a=r===uu.FRAGMENT_SHADER?"fragment":"vertex");for(var i=Iu("Error compiling %s shader %s:\n",a,n),o=Iu("%s%s",i,t),l=t.split("\n"),s={},u=0;u<l.length;u++){var c=l[u];if(""!==c&&"\0"!==c){var f=parseInt(c.split(":")[2]);if(isNaN(f))throw new Error(Iu("Could not parse error: %s",c));s[f]=c}}for(var h=lu(e).split("\n"),u=0;u<h.length;u++)if(s[u+3]||s[u+2]||s[u+1]){var d=h[u];if(i+=d+"\n",s[u+1]){var p=s[u+1];p=p.substr(p.split(":",3).join(":").length+1).trim(),i+=Iu("^^^ %s\n\n",p)}}return{long:i.trim(),short:o.trim()}};var Fu=function(t,e){var r={identity:e},n=t.valueOf;return Object.defineProperty(t,"valueOf",{value:function(t){return t!==e?n.apply(this,arguments):r},writable:!0}),r};var zu=function(){var t={};return function(e){if(("object"!=typeof e||null===e)&&"function"!=typeof e)throw new Error("Weakmap-shim: Key must be object");var r=e.valueOf(t);return r&&r.identity===t?r:Fu(e,t)}};var Nu={shader:function(t,e,r){return Gu(t).getShaderReference(e,r)},program:function(t,e,r,n,a){return Gu(t).getProgram(e,r,n,a)}},ju=new("undefined"==typeof WeakMap?function(){var t=zu();return{get:function(e,r){var n=t(e);return n.hasOwnProperty("value")?n.value:r},set:function(e,r){return t(e).value=r,this},has:function(e){return"value"in t(e)},delete:function(e){return delete t(e).value}}}:WeakMap),Uu=0;function Vu(t,e,r,n,a,i,o){this.id=t,this.src=e,this.type=r,this.shader=n,this.count=i,this.programs=[],this.cache=o}function Hu(t){this.gl=t,this.shaders=[{},{}],this.programs={}}Vu.prototype.dispose=function(){if(0==--this.count){for(var t=this.cache,e=t.gl,r=this.programs,n=0,a=r.length;n<a;++n){var i=t.programs[r[n]];i&&(delete t.programs[n],e.deleteProgram(i))}e.deleteShader(this.shader),delete t.shaders[this.type===e.FRAGMENT_SHADER|0][this.src]}};var qu=Hu.prototype;function Gu(t){var e=ju.get(t);return e||(e=new Hu(t),ju.set(t,e)),e}function Xu(t){this.gl=t,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}qu.getShaderReference=function(t,e){var r=this.gl,n=this.shaders[t===r.FRAGMENT_SHADER|0],a=n[e];if(a&&r.isShader(a.shader))a.count+=1;else{var i=function(t,e,r){var n=t.createShader(e);if(t.shaderSource(n,r),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(n);try{var i=Bu(a,r,e)}catch(t){throw console.warn("Failed to format compiler error: "+t),new Hs(a,"Error compiling shader:\n"+a)}throw new Hs(a,i.short,i.long)}return n}(r,t,e);a=n[e]=new Vu(Uu++,e,t,i,[],1,this)}return a},qu.getProgram=function(t,e,r,n){var a=[t.id,e.id,r.join(":"),n.join(":")].join("@"),i=this.programs[a];return i&&this.gl.isProgram(i)||(this.programs[a]=i=function(t,e,r,n,a){var i=t.createProgram();t.attachShader(i,e),t.attachShader(i,r);for(var o=0;o<n.length;++o)t.bindAttribLocation(i,a[o],n[o]);if(t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS)){var l=t.getProgramInfoLog(i);throw new Hs(l,"Error linking program: "+l)}return i}(this.gl,t.shader,e.shader,r,n),t.programs.push(a),e.programs.push(a)),i};var Yu=Xu.prototype;function Wu(t,e){return t.name<e.name?-1:1}Yu.bind=function(){var t;this.program||this._relink();var e=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),r=this.gl.lastAttribCount;if(e>r)for(t=r;t<e;t++)this.gl.enableVertexAttribArray(t);else if(r>e)for(t=e;t<r;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=e,this.gl.useProgram(this.program)},Yu.dispose=function(){for(var t=this.gl.lastAttribCount,e=0;e<t;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},Yu.update=function(t,e,r,n){if(!e||1===arguments.length){var a=t;t=a.vertex,e=a.fragment,r=a.uniforms,n=a.attributes}var i=this,o=i.gl,l=i._vref;i._vref=Nu.shader(o,o.VERTEX_SHADER,t),l&&l.dispose(),i.vertShader=i._vref.shader;var s=this._fref;if(i._fref=Nu.shader(o,o.FRAGMENT_SHADER,e),s&&s.dispose(),i.fragShader=i._fref.shader,!r||!n){var u=o.createProgram();if(o.attachShader(u,i.fragShader),o.attachShader(u,i.vertShader),o.linkProgram(u),!o.getProgramParameter(u,o.LINK_STATUS)){var c=o.getProgramInfoLog(u);throw new Hs(c,"Error linking program:"+c)}r=r||Ks.uniforms(o,u),n=n||Ks.attributes(o,u),o.deleteProgram(u)}(n=n.slice()).sort(Wu);var f,h=[],d=[],p=[];for(f=0;f<n.length;++f){var g=n[f];if(g.type.indexOf("mat")>=0){for(var v=0|g.type.charAt(g.type.length-1),m=new Array(v),y=0;y<v;++y)m[y]=p.length,d.push(g.name+"["+y+"]"),"number"==typeof g.location?p.push(g.location+y):Array.isArray(g.location)&&g.location.length===v&&"number"==typeof g.location[y]?p.push(0|g.location[y]):p.push(-1);h.push({name:g.name,type:g.type,locations:m})}else h.push({name:g.name,type:g.type,locations:[p.length]}),d.push(g.name),"number"==typeof g.location?p.push(0|g.location):p.push(-1)}var x=0;for(f=0;f<p.length;++f)if(p[f]<0){for(;p.indexOf(x)>=0;)x+=1;p[f]=x}var b=new Array(r.length);function _(){i.program=Nu.program(o,i._vref,i._fref,d,p);for(var t=0;t<r.length;++t)b[t]=o.getUniformLocation(i.program,r[t].name)}_(),i._relink=_,i.types={uniforms:Zs(r),attributes:Zs(n)},i.attributes=qs(o,i,h,p),Object.defineProperty(i,"uniforms",Js(o,i,r,b))};var Zu=function(t,e,r,n,a){var i=new Xu(t);return i.update(e,r,n,a),i},Ju=function(t){var e=t.gl,r=zs(e,[0,0,0,1,1,0,1,1]),n=Zu(e,Us.boxVert,Us.lineFrag);return new Qu(t,r,n)};function Qu(t,e,r){this.plot=t,this.vbo=e,this.shader=r}var $u,Ku,tc=Qu.prototype;function ec(t,e,r,n,a){var i=["function ",t,"(a,l,h,",n.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return a?e.indexOf("c")<0?i.push(";if(x===y){return m}else if(x<=y){"):i.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):i.push(";if(",e,"){i=m;"),r?i.push("l=m+1}else{h=m-1}"):i.push("h=m-1}else{l=m+1}"),i.push("}"),a?i.push("return -1};"):i.push("return i};"),i.join("")}function rc(t,e,r,n){return new Function([ec("A","x"+t+"y",e,["y"],n),ec("P","c(x,y)"+t+"0",e,["y","c"],n),"function dispatchBsearch",r,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",r].join(""))()}tc.bind=function(){var t=this.shader;this.vbo.bind(),this.shader.bind(),t.attributes.coord.pointer(),t.uniforms.screenBox=this.plot.screenBox},tc.drawBox=($u=[0,0],Ku=[0,0],function(t,e,r,n,a){var i=this.plot,o=this.shader,l=i.gl;$u[0]=t,$u[1]=e,Ku[0]=r,Ku[1]=n,o.uniforms.lo=$u,o.uniforms.hi=Ku,o.uniforms.color=a,l.drawArrays(l.TRIANGLE_STRIP,0,4)}),tc.dispose=function(){this.vbo.dispose(),this.shader.dispose()};var nc={ge:rc(">=",!1,"GE"),gt:rc(">",!1,"GT"),lt:rc("<",!0,"LT"),le:rc("<=",!0,"LE"),eq:rc("-",!0,"EQ",!0)};function ac(t,e,r,n,a){var i=["function ",t,"(a,l,h,",n.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return a?e.indexOf("c")<0?i.push(";if(x===y){return m}else if(x<=y){"):i.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):i.push(";if(",e,"){i=m;"),r?i.push("l=m+1}else{h=m-1}"):i.push("h=m-1}else{l=m+1}"),i.push("}"),a?i.push("return -1};"):i.push("return i};"),i.join("")}function ic(t,e,r,n){return new Function([ac("A","x"+t+"y",e,["y"],n),ac("P","c(x,y)"+t+"0",e,["y","c"],n),"function dispatchBsearch",r,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",r].join(""))()}var oc={ge:ic(">=",!1,"GE"),gt:ic(">",!1,"GT"),lt:ic("<",!0,"LT"),le:ic("<=",!0,"LE"),eq:ic("-",!0,"EQ",!0)},lc=function(t){var e=t.gl,r=zs(e),n=Zu(e,Us.gridVert,Us.gridFrag),a=Zu(e,Us.tickVert,Us.gridFrag);return new sc(t,r,n,a)};function sc(t,e,r,n){this.plot=t,this.vbo=e,this.shader=r,this.tickShader=n,this.ticks=[[],[]]}function uc(t,e){return t-e}var cc,fc,hc,dc,pc,gc=sc.prototype;gc.draw=(cc=[0,0],fc=[0,0],hc=[0,0],function(){for(var t=this.plot,e=this.vbo,r=this.shader,n=this.ticks,a=t.gl,i=t._tickBounds,o=t.dataBox,l=t.viewBox,s=t.gridLineWidth,u=t.gridLineColor,c=t.gridLineEnable,f=t.pixelRatio,h=0;h<2;++h){var d=i[h],p=i[h+2]-d,g=.5*(o[h+2]+o[h]),v=o[h+2]-o[h];fc[h]=2*p/v,cc[h]=2*(d-g)/v}r.bind(),e.bind(),r.attributes.dataCoord.pointer(),r.uniforms.dataShift=cc,r.uniforms.dataScale=fc;var m=0;for(h=0;h<2;++h){hc[0]=hc[1]=0,hc[h]=1,r.uniforms.dataAxis=hc,r.uniforms.lineWidth=s[h]/(l[h+2]-l[h])*f,r.uniforms.color=u[h];var y=6*n[h].length;c[h]&&y&&a.drawArrays(a.TRIANGLES,m,y),m+=y}}),gc.drawTickMarks=function(){var t=[0,0],e=[0,0],r=[1,0],n=[0,1],a=[0,0],i=[0,0];return function(){for(var o=this.plot,l=this.vbo,s=this.tickShader,u=this.ticks,c=o.gl,f=o._tickBounds,h=o.dataBox,d=o.viewBox,p=o.pixelRatio,g=o.screenBox,v=g[2]-g[0],m=g[3]-g[1],y=d[2]-d[0],x=d[3]-d[1],b=0;b<2;++b){var _=f[b],w=f[b+2]-_,A=.5*(h[b+2]+h[b]),M=h[b+2]-h[b];e[b]=2*w/M,t[b]=2*(_-A)/M}e[0]*=y/v,t[0]*=y/v,e[1]*=x/m,t[1]*=x/m,s.bind(),l.bind(),s.attributes.dataCoord.pointer();var T=s.uniforms;T.dataShift=t,T.dataScale=e;var k=o.tickMarkLength,E=o.tickMarkWidth,C=o.tickMarkColor,S=6*u[0].length,L=Math.min(oc.ge(u[0],(h[0]-f[0])/(f[2]-f[0]),uc),u[0].length),O=Math.min(oc.gt(u[0],(h[2]-f[0])/(f[2]-f[0]),uc),u[0].length),D=0+6*L,R=6*Math.max(0,O-L),P=Math.min(oc.ge(u[1],(h[1]-f[1])/(f[3]-f[1]),uc),u[1].length),I=Math.min(oc.gt(u[1],(h[3]-f[1])/(f[3]-f[1]),uc),u[1].length),B=S+6*P,F=6*Math.max(0,I-P);a[0]=2*(d[0]-k[1])/v-1,a[1]=(d[3]+d[1])/m-1,i[0]=k[1]*p/v,i[1]=E[1]*p/m,F&&(T.color=C[1],T.tickScale=i,T.dataAxis=n,T.screenOffset=a,c.drawArrays(c.TRIANGLES,B,F)),a[0]=(d[2]+d[0])/v-1,a[1]=2*(d[1]-k[0])/m-1,i[0]=E[0]*p/v,i[1]=k[0]*p/m,R&&(T.color=C[0],T.tickScale=i,T.dataAxis=r,T.screenOffset=a,c.drawArrays(c.TRIANGLES,D,R)),a[0]=2*(d[2]+k[3])/v-1,a[1]=(d[3]+d[1])/m-1,i[0]=k[3]*p/v,i[1]=E[3]*p/m,F&&(T.color=C[3],T.tickScale=i,T.dataAxis=n,T.screenOffset=a,c.drawArrays(c.TRIANGLES,B,F)),a[0]=(d[2]+d[0])/v-1,a[1]=2*(d[3]+k[2])/m-1,i[0]=E[2]*p/v,i[1]=k[2]*p/m,R&&(T.color=C[2],T.tickScale=i,T.dataAxis=r,T.screenOffset=a,c.drawArrays(c.TRIANGLES,D,R))}}(),gc.update=(dc=[1,1,-1,-1,1,-1],pc=[1,-1,1,1,-1,-1],function(t){for(var e=t.ticks,r=t.bounds,n=new Float32Array(18*(e[0].length+e[1].length)),a=(this.plot.zeroLineEnable,0),i=[[],[]],o=0;o<2;++o)for(var l=i[o],s=e[o],u=r[o],c=r[o+2],f=0;f<s.length;++f){var h=(s[f].x-u)/(c-u);l.push(h);for(var d=0;d<6;++d)n[a++]=h,n[a++]=dc[d],n[a++]=pc[d]}this.ticks=i,this.vbo.update(n)}),gc.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};var vc=function(t){var e=t.gl,r=zs(e,[-1,-1,-1,1,1,-1,1,1]),n=Zu(e,Us.lineVert,Us.lineFrag);return new mc(t,r,n)};function mc(t,e,r){this.plot=t,this.vbo=e,this.shader=r}var yc,xc,bc=mc.prototype;bc.bind=function(){var t=this.shader;this.vbo.bind(),this.shader.bind(),t.attributes.coord.pointer(),t.uniforms.screenBox=this.plot.screenBox},bc.drawLine=(yc=[0,0],xc=[0,0],function(t,e,r,n,a,i){var o=this.plot,l=this.shader,s=o.gl;yc[0]=t,yc[1]=e,xc[0]=r,xc[1]=n,l.uniforms.start=yc,l.uniforms.end=xc,l.uniforms.width=a*o.pixelRatio,l.uniforms.color=i,s.drawArrays(s.TRIANGLE_STRIP,0,4)}),bc.dispose=function(){this.vbo.dispose(),this.shader.dispose()};var _c,wc,Ac,Mc=_c={};function Tc(){throw new Error("setTimeout has not been defined")}function kc(){throw new Error("clearTimeout has not been defined")}function Ec(t){if(wc===setTimeout)return setTimeout(t,0);if((wc===Tc||!wc)&&setTimeout)return wc=setTimeout,setTimeout(t,0);try{return wc(t,0)}catch(e){try{return wc.call(null,t,0)}catch(e){return wc.call(this,t,0)}}}!function(){try{wc="function"==typeof setTimeout?setTimeout:Tc}catch(t){wc=Tc}try{Ac="function"==typeof clearTimeout?clearTimeout:kc}catch(t){Ac=kc}}();var Cc,Sc=[],Lc=!1,Oc=-1;function Dc(){Lc&&Cc&&(Lc=!1,Cc.length?Sc=Cc.concat(Sc):Oc=-1,Sc.length&&Rc())}function Rc(){if(!Lc){var t=Ec(Dc);Lc=!0;for(var e=Sc.length;e;){for(Cc=Sc,Sc=[];++Oc<e;)Cc&&Cc[Oc].run();Oc=-1,e=Sc.length}Cc=null,Lc=!1,function(t){if(Ac===clearTimeout)return clearTimeout(t);if((Ac===kc||!Ac)&&clearTimeout)return Ac=clearTimeout,clearTimeout(t);try{Ac(t)}catch(e){try{return Ac.call(null,t)}catch(e){return Ac.call(this,t)}}}(t)}}function Pc(t,e){this.fun=t,this.array=e}function Ic(){}Mc.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];Sc.push(new Pc(t,e)),1!==Sc.length||Lc||Ec(Rc)},Pc.prototype.run=function(){this.fun.apply(null,this.array)},Mc.title="browser",Mc.browser=!0,Mc.env={},Mc.argv=[],Mc.version="",Mc.versions={},Mc.on=Ic,Mc.addListener=Ic,Mc.once=Ic,Mc.off=Ic,Mc.removeListener=Ic,Mc.removeAllListeners=Ic,Mc.emit=Ic,Mc.prependListener=Ic,Mc.prependOnceListener=Ic,Mc.listeners=function(t){return[]},Mc.binding=function(t){throw new Error("process.binding is not supported")},Mc.cwd=function(){return"/"},Mc.chdir=function(t){throw new Error("process.chdir is not supported")},Mc.umask=function(){return 0};var Bc=function(t,e,r){var n=t*e,a=Fc*t,i=a-(a-t),o=t-i,l=Fc*e,s=l-(l-e),u=e-s,c=o*u-(n-i*s-o*s-i*u);if(r)return r[0]=c,r[1]=n,r;return[c,n]},Fc=+(Math.pow(2,27)+1);var zc=function(t,e,r){var n=t+e,a=n-t,i=e-a,o=t-(n-a);if(r)return r[0]=o+i,r[1]=n,r;return[o+i,n]};var Nc=function(t,e){var r=t.length;if(1===r){var n=Bc(t[0],e);return n[0]?n:[n[1]]}var a=new Array(2*r),i=[.1,.1],o=[.1,.1],l=0;Bc(t[0],e,i),i[0]&&(a[l++]=i[0]);for(var s=1;s<r;++s){Bc(t[s],e,o);var u=i[1];zc(u,o[0],i),i[0]&&(a[l++]=i[0]);var c=o[1],f=i[1],h=c+f,d=h-c,p=f-d;i[1]=h,p&&(a[l++]=p)}i[1]&&(a[l++]=i[1]);0===l&&(a[l++]=0);return a.length=l,a};var jc=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,a=t-(r-n)+(e-n);if(a)return[a,r];return[r]}(t[0],-e[0]);var a,i,o=new Array(r+n),l=0,s=0,u=0,c=Math.abs,f=t[s],h=c(f),d=-e[u],p=c(d);h<p?(i=f,(s+=1)<r&&(f=t[s],h=c(f))):(i=d,(u+=1)<n&&(d=-e[u],p=c(d)));s<r&&h<p||u>=n?(a=f,(s+=1)<r&&(f=t[s],h=c(f))):(a=d,(u+=1)<n&&(d=-e[u],p=c(d)));var g,v,m=a+i,y=m-a,x=i-y,b=x,_=m;for(;s<r&&u<n;)h<p?(a=f,(s+=1)<r&&(f=t[s],h=c(f))):(a=d,(u+=1)<n&&(d=-e[u],p=c(d))),(x=(i=b)-(y=(m=a+i)-a))&&(o[l++]=x),b=_-((g=_+m)-(v=g-_))+(m-v),_=g;for(;s<r;)(x=(i=b)-(y=(m=(a=f)+i)-a))&&(o[l++]=x),b=_-((g=_+m)-(v=g-_))+(m-v),_=g,(s+=1)<r&&(f=t[s]);for(;u<n;)(x=(i=b)-(y=(m=(a=d)+i)-a))&&(o[l++]=x),b=_-((g=_+m)-(v=g-_))+(m-v),_=g,(u+=1)<n&&(d=-e[u]);b&&(o[l++]=b);_&&(o[l++]=_);l||(o[l++]=0);return o.length=l,o};var Uc=function(t,e){var r=0|t.length,n=0|e.length;if(1===r&&1===n)return function(t,e){var r=t+e,n=r-t,a=t-(r-n)+(e-n);if(a)return[a,r];return[r]}(t[0],e[0]);var a,i,o=new Array(r+n),l=0,s=0,u=0,c=Math.abs,f=t[s],h=c(f),d=e[u],p=c(d);h<p?(i=f,(s+=1)<r&&(f=t[s],h=c(f))):(i=d,(u+=1)<n&&(d=e[u],p=c(d)));s<r&&h<p||u>=n?(a=f,(s+=1)<r&&(f=t[s],h=c(f))):(a=d,(u+=1)<n&&(d=e[u],p=c(d)));var g,v,m=a+i,y=m-a,x=i-y,b=x,_=m;for(;s<r&&u<n;)h<p?(a=f,(s+=1)<r&&(f=t[s],h=c(f))):(a=d,(u+=1)<n&&(d=e[u],p=c(d))),(x=(i=b)-(y=(m=a+i)-a))&&(o[l++]=x),b=_-((g=_+m)-(v=g-_))+(m-v),_=g;for(;s<r;)(x=(i=b)-(y=(m=(a=f)+i)-a))&&(o[l++]=x),b=_-((g=_+m)-(v=g-_))+(m-v),_=g,(s+=1)<r&&(f=t[s]);for(;u<n;)(x=(i=b)-(y=(m=(a=d)+i)-a))&&(o[l++]=x),b=_-((g=_+m)-(v=g-_))+(m-v),_=g,(u+=1)<n&&(d=e[u]);b&&(o[l++]=b);_&&(o[l++]=_);l||(o[l++]=0);return o.length=l,o};var Vc={},Hc=6;function qc(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var a=r[n-1]=new Array(t.length-1),i=0,o=0;i<t.length;++i)i!==e&&(a[o++]=t[n][i]);return r}function Gc(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",Gc(t.slice(0,e)),",",Gc(t.slice(e)),")"].join("")}function Xc(t,e){if("m"===t.charAt(0)){if("w"===e.charAt(0)){var r=t.split("[");return["w",e.substr(1),"m",r[0].substr(1)].join("")}return["prod(",t,",",e,")"].join("")}return Xc(e,t)}function Yc(t){if(2===t.length)return[["diff(",Xc(t[0][0],t[1][1]),",",Xc(t[1][0],t[0][1]),")"].join("")];for(var e=[],r=0;r<t.length;++r)e.push(["scale(",Gc(Yc(qc(t,r))),",",(n=r,!0&n?"-":""),t[0][r],")"].join(""));return e;var n}function Wc(t,e){for(var r=[],n=0;n<e-2;++n)r.push(["prod(m",t,"[",n,"],m",t,"[",n,"])"].join(""));return Gc(r)}function Zc(t){for(var e=[],r=[],n=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var n=0;n<t;++n)e[r][n]=["m",n,"[",t-r-2,"]"].join("")}return e}(t),a=0;a<t;++a)n[0][a]="1",n[t-1][a]="w"+a;for(a=0;a<t;++a)0==(1&a)?e.push.apply(e,Yc(qc(n,a))):r.push.apply(r,Yc(qc(n,a)));var i=Gc(e),o=Gc(r),l="exactInSphere"+t,s=[];for(a=0;a<t;++a)s.push("m"+a);var u=["function ",l,"(",s.join(),"){"];for(a=0;a<t;++a){u.push("var w",a,"=",Wc(a,t),";");for(var c=0;c<t;++c)c!==a&&u.push("var w",a,"m",c,"=scale(w",a,",m",c,"[0]);")}return u.push("var p=",i,",n=",o,",d=diff(p,n);return d[d.length-1];}return ",l),new Function("sum","diff","prod","scale",u.join(""))(Uc,jc,Bc,Nc)}var Jc=[function(){return 0},function(){return 0},function(){return 0}];!function(){for(;Jc.length<=Hc;)Jc.push(Zc(Jc.length));for(var t=[],e=["slow"],r=0;r<=Hc;++r)t.push("a"+r),e.push("o"+r);var n=["function testInSphere(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=Hc;++r)n.push("case ",r,":return o",r,"(",t.slice(0,r).join(),");");n.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),e.push(n.join(""));var a=Function.apply(void 0,e);for(Vc=a.apply(void 0,[function(t){var e=Jc[t.length];return e||(e=Jc[t.length]=Zc(t.length)),e.apply(void 0,t)}].concat(Jc)),r=0;r<=Hc;++r)Vc[r]=Jc[r]}();var Qc=Vc[4],$c=function(t,e){for(var r=[],n=t.length,a=e.stars,i=0;i<n;++i)for(var o=a[i],l=1;l<o.length;l+=2){var s=o[l];if(!(s<i)&&!e.isConstraint(i,s)){for(var u=o[l-1],c=-1,f=1;f<o.length;f+=2)if(o[f-1]===s){c=o[f];break}c<0||Qc(t[i],t[s],t[u],t[c])<0&&r.push(i,s)}}for(;r.length>0;){for(var s=r.pop(),i=r.pop(),u=-1,c=-1,o=a[i],h=1;h<o.length;h+=2){var d=o[h-1],p=o[h];d===s?c=p:p===s&&(u=d)}u<0||c<0||(Qc(t[i],t[s],t[u],t[c])>=0||(e.flip(i,s),Kc(t,e,r,u,i,c),Kc(t,e,r,i,c,u),Kc(t,e,r,c,s,u),Kc(t,e,r,s,u,c)))}};function Kc(t,e,r,n,a,i){var o=e.opposite(n,a);if(!(o<0)){if(a<n){var l=n;n=a,a=l,l=i,i=o,o=l}e.isConstraint(n,a)||Qc(t[n],t[a],t[i],t[o])<0&&r.push(n,a)}}var tf,ef=function(t,e,r){var n=function(t,e){for(var r=t.cells(),n=r.length,a=0;a<n;++a){var i=r[a],o=i[0],l=i[1],s=i[2];l<s?l<o&&(i[0]=l,i[1]=s,i[2]=o):s<o&&(i[0]=s,i[1]=o,i[2]=l)}r.sort(nf);for(var u=new Array(n),a=0;a<u.length;++a)u[a]=0;var c=[],f=[],h=new Array(3*n),d=new Array(3*n),p=null;e&&(p=[]);for(var g=new rf(r,h,d,u,c,f,p),a=0;a<n;++a)for(var i=r[a],v=0;v<3;++v){var o=i[v],l=i[(v+1)%3],m=h[3*a+v]=g.locate(l,o,t.opposite(l,o)),y=d[3*a+v]=t.isConstraint(o,l);m<0&&(y?f.push(a):(c.push(a),u[a]=1),e&&p.push([l,o,-1]))}return g}(t,r);if(0===e)return r?n.cells.concat(n.boundary):n.cells;var a=1,i=n.active,o=n.next,l=n.flags,s=n.cells,u=n.constraint,c=n.neighbor;for(;i.length>0||o.length>0;){for(;i.length>0;){var f=i.pop();if(l[f]!==-a){l[f]=a;s[f];for(var h=0;h<3;++h){var d=c[3*f+h];d>=0&&0===l[d]&&(u[3*f+h]?o.push(d):(i.push(d),l[d]=a))}}}var p=o;o=i,i=p,o.length=0,a=-a}var g=function(t,e,r){for(var n=0,a=0;a<t.length;++a)e[a]===r&&(t[n++]=t[a]);return t.length=n,t}(s,l,e);if(r)return g.concat(n.boundary);return g};function rf(t,e,r,n,a,i,o){this.cells=t,this.neighbor=e,this.flags=n,this.constraint=r,this.active=a,this.next=i,this.boundary=o}function nf(t,e){return t[0]-e[0]||t[1]-e[1]||t[2]-e[2]}rf.prototype.locate=(tf=[0,0,0],function(t,e,r){var n=t,a=e,i=r;return e<r?e<t&&(n=e,a=r,i=t):r<t&&(n=r,a=t,i=e),n<0?-1:(tf[0]=n,tf[1]=a,tf[2]=i,nc.eq(this.cells,tf,nf))});var af={},of=5;function lf(t,e){for(var r=new Array(t.length-1),n=1;n<t.length;++n)for(var a=r[n-1]=new Array(t.length-1),i=0,o=0;i<t.length;++i)i!==e&&(a[o++]=t[n][i]);return r}function sf(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",sf(t.slice(0,e)),",",sf(t.slice(e)),")"].join("")}function uf(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],r=0;r<t.length;++r)e.push(["scale(",sf(uf(lf(t,r))),",",(n=r,1&n?"-":""),t[0][r],")"].join(""));return e;var n}function cf(t){for(var e=[],r=[],n=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var n=0;n<t;++n)e[r][n]=["m",n,"[",t-r-1,"]"].join("")}return e}(t),a=[],i=0;i<t;++i)0==(1&i)?e.push.apply(e,uf(lf(n,i))):r.push.apply(r,uf(lf(n,i))),a.push("m"+i);var o=sf(e),l=sf(r),s="orientation"+t+"Exact",u=["function ",s,"(",a.join(),"){var p=",o,",n=",l,",d=sub(p,n);return d[d.length-1];};return ",s].join("");return new Function("sum","prod","scale","sub",u)(Uc,Bc,Nc,jc)}var ff=cf(3),hf=cf(4),df=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,r){var n,a=(t[1]-r[1])*(e[0]-r[0]),i=(t[0]-r[0])*(e[1]-r[1]),o=a-i;if(a>0){if(i<=0)return o;n=a+i}else{if(!(a<0))return o;if(i>=0)return o;n=-(a+i)}var l=3.3306690738754716e-16*n;return o>=l||o<=-l?o:ff(t,e,r)},function(t,e,r,n){var a=t[0]-n[0],i=e[0]-n[0],o=r[0]-n[0],l=t[1]-n[1],s=e[1]-n[1],u=r[1]-n[1],c=t[2]-n[2],f=e[2]-n[2],h=r[2]-n[2],d=i*u,p=o*s,g=o*l,v=a*u,m=a*s,y=i*l,x=c*(d-p)+f*(g-v)+h*(m-y),b=7.771561172376103e-16*((Math.abs(d)+Math.abs(p))*Math.abs(c)+(Math.abs(g)+Math.abs(v))*Math.abs(f)+(Math.abs(m)+Math.abs(y))*Math.abs(h));return x>b||-x>b?x:hf(t,e,r,n)}];!function(){for(;df.length<=of;)df.push(cf(df.length));for(var t=[],e=["slow"],r=0;r<=of;++r)t.push("a"+r),e.push("o"+r);var n=["function getOrientation(",t.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(r=2;r<=of;++r)n.push("case ",r,":return o",r,"(",t.slice(0,r).join(),");");n.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),e.push(n.join(""));var a=Function.apply(void 0,e);for(af=a.apply(void 0,[function(t){var e=df[t.length];return e||(e=df[t.length]=cf(t.length)),e.apply(void 0,t)}].concat(df)),r=0;r<=of;++r)af[r]=df[r]}();var pf=af[3],gf=0,vf=1,mf=2,yf=function(t,e){for(var r=t.length,n=e.length,a=[],i=0;i<r;++i)a.push(new bf(t[i],null,gf,i));for(var i=0;i<n;++i){var o=e[i],l=t[o[0]],s=t[o[1]];l[0]<s[0]?a.push(new bf(l,s,mf,i),new bf(s,l,vf,i)):l[0]>s[0]&&a.push(new bf(s,l,mf,i),new bf(l,s,vf,i))}a.sort(_f);for(var u=a[0].a[0]-(1+Math.abs(a[0].a[0]))*Math.pow(2,-52),c=[new xf([u,1],[u,0],-1,[],[],[],[])],f=[],i=0,h=a.length;i<h;++i){var d=a[i],p=d.type;p===gf?Af(f,c,t,d.a,d.idx):p===mf?Tf(c,t,d):kf(c,t,d)}return f};function xf(t,e,r,n,a){this.a=t,this.b=e,this.idx=r,this.lowerIds=n,this.upperIds=a}function bf(t,e,r,n){this.a=t,this.b=e,this.type=r,this.idx=n}function _f(t,e){var r=t.a[0]-e.a[0]||t.a[1]-e.a[1]||t.type-e.type;return r||(t.type!==gf&&(r=pf(t.a,t.b,e.b))?r:t.idx-e.idx)}function wf(t,e){return pf(t.a,t.b,e)}function Af(t,e,r,n,a){for(var i=nc.lt(e,n,wf),o=nc.gt(e,n,wf),l=i;l<o;++l){for(var s=e[l],u=s.lowerIds,c=u.length;c>1&&pf(r[u[c-2]],r[u[c-1]],n)>0;)t.push([u[c-1],u[c-2],a]),c-=1;u.length=c,u.push(a);var f=s.upperIds;for(c=f.length;c>1&&pf(r[f[c-2]],r[f[c-1]],n)<0;)t.push([f[c-2],f[c-1],a]),c-=1;f.length=c,f.push(a)}}function Mf(t,e){var r;return(r=t.a[0]<e.a[0]?pf(t.a,t.b,e.a):pf(e.b,e.a,t.a))?r:(r=e.b[0]<t.b[0]?pf(t.a,t.b,e.b):pf(e.b,e.a,t.b))||t.idx-e.idx}function Tf(t,e,r){var n=nc.le(t,r,Mf),a=t[n],i=a.upperIds,o=i[i.length-1];a.upperIds=[o],t.splice(n+1,0,new xf(r.a,r.b,r.idx,[o],i))}function kf(t,e,r){var n=r.a;r.a=r.b,r.b=n;var a=nc.eq(t,r,Mf),i=t[a];t[a-1].upperIds=i.upperIds,t.splice(a,1)}var Ef=function(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=[];return new Cf(r,e)};function Cf(t,e){this.stars=t,this.edges=e}var Sf=Cf.prototype;function Lf(t,e,r){for(var n=1,a=t.length;n<a;n+=2)if(t[n-1]===e&&t[n]===r)return t[n-1]=t[a-2],t[n]=t[a-1],void(t.length=a-2)}Sf.isConstraint=function(){var t=[0,0];function e(t,e){return t[0]-e[0]||t[1]-e[1]}return function(r,n){return t[0]=Math.min(r,n),t[1]=Math.max(r,n),nc.eq(this.edges,t,e)>=0}}(),Sf.removeTriangle=function(t,e,r){var n=this.stars;Lf(n[t],e,r),Lf(n[e],r,t),Lf(n[r],t,e)},Sf.addTriangle=function(t,e,r){var n=this.stars;n[t].push(e,r),n[e].push(r,t),n[r].push(t,e)},Sf.opposite=function(t,e){for(var r=this.stars[e],n=1,a=r.length;n<a;n+=2)if(r[n]===t)return r[n-1];return-1},Sf.flip=function(t,e){var r=this.opposite(t,e),n=this.opposite(e,t);this.removeTriangle(t,e,r),this.removeTriangle(e,t,n),this.addTriangle(t,n,r),this.addTriangle(e,r,n)},Sf.edges=function(){for(var t=this.stars,e=[],r=0,n=t.length;r<n;++r)for(var a=t[r],i=0,o=a.length;i<o;i+=2)e.push([a[i],a[i+1]]);return e},Sf.cells=function(){for(var t=this.stars,e=[],r=0,n=t.length;r<n;++r)for(var a=t[r],i=0,o=a.length;i<o;i+=2){var l=a[i],s=a[i+1];r<Math.min(l,s)&&e.push([r,l,s])}return e};var Of=function(t,e,r){Array.isArray(e)?(r=r||{},e=e||[]):(r=e||{},e=[]);var n=!!Pf(r,"delaunay",!0),a=!!Pf(r,"interior",!0),i=!!Pf(r,"exterior",!0),o=!!Pf(r,"infinity",!1);if(!a&&!i||0===t.length)return[];var l=yf(t,e);if(n||a!==i||o){for(var s=Ef(t.length,function(t){return t.map(Df).sort(Rf)}(e)),u=0;u<l.length;++u){var c=l[u];s.addTriangle(c[0],c[1],c[2])}return n&&$c(t,s),i?a?o?ef(s,0,o):s.cells():ef(s,1,o):ef(s,-1)}return l};function Df(t){return[Math.min(t[0],t[1]),Math.max(t[0],t[1])]}function Rf(t,e){return t[0]-e[0]||t[1]-e[1]}function Pf(t,e,r){return e in t?t[e]:r}var If=function(t,e){return t[0].mul(e[1]).cmp(e[0].mul(t[1]))};var Bf={},Ff={exports:{}};!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function a(t,e,r){if(a.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(r=e,e=10),this._init(t||0,e||10,r||"be"))}var i;"object"==typeof t?t.exports=a:e.BN=a,a.BN=a,a.wordSize=26;try{i=Bf.Buffer}catch(t){}function o(t,e,r){for(var n=0,a=Math.min(t.length,r),i=e;i<a;i++){var o=t.charCodeAt(i)-48;n<<=4,n|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return n}function l(t,e,r,n){for(var a=0,i=Math.min(t.length,r),o=e;o<i;o++){var l=t.charCodeAt(o)-48;a*=n,a+=l>=49?l-49+10:l>=17?l-17+10:l}return a}a.isBN=function(t){return t instanceof a||null!==t&&"object"==typeof t&&t.constructor.wordSize===a.wordSize&&Array.isArray(t.words)},a.max=function(t,e){return t.cmp(e)>0?t:e},a.min=function(t,e){return t.cmp(e)<0?t:e},a.prototype._init=function(t,e,n){if("number"==typeof t)return this._initNumber(t,e,n);if("object"==typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var a=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&a++,16===e?this._parseHex(t,a):this._parseBase(t,e,a),"-"===t[0]&&(this.negative=1),this.strip(),"le"===n&&this._initArray(this.toArray(),e,n)},a.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},a.prototype._initArray=function(t,e,n){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var a=0;a<this.length;a++)this.words[a]=0;var i,o,l=0;if("be"===n)for(a=t.length-1,i=0;a>=0;a-=3)o=t[a]|t[a-1]<<8|t[a-2]<<16,this.words[i]|=o<<l&67108863,this.words[i+1]=o>>>26-l&67108863,(l+=24)>=26&&(l-=26,i++);else if("le"===n)for(a=0,i=0;a<t.length;a+=3)o=t[a]|t[a+1]<<8|t[a+2]<<16,this.words[i]|=o<<l&67108863,this.words[i+1]=o>>>26-l&67108863,(l+=24)>=26&&(l-=26,i++);return this.strip()},a.prototype._parseHex=function(t,e){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,a,i=0;for(r=t.length-6,n=0;r>=e;r-=6)a=o(t,r,r+6),this.words[n]|=a<<i&67108863,this.words[n+1]|=a>>>26-i&4194303,(i+=24)>=26&&(i-=26,n++);r+6!==e&&(a=o(t,e,r+6),this.words[n]|=a<<i&67108863,this.words[n+1]|=a>>>26-i&4194303),this.strip()},a.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,a=1;a<=67108863;a*=e)n++;n--,a=a/e|0;for(var i=t.length-r,o=i%n,s=Math.min(i,i-o)+r,u=0,c=r;c<s;c+=n)u=l(t,c,c+n,e),this.imuln(a),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==o){var f=1;for(u=l(t,c,t.length,e),c=0;c<o;c++)f*=e;this.imuln(f),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},a.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},a.prototype.clone=function(){var t=new a(null);return this.copy(t),t},a.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},a.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},a.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var s=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var a=0|t.words[0],i=0|e.words[0],o=a*i,l=67108863&o,s=o/67108864|0;r.words[0]=l;for(var u=1;u<n;u++){for(var c=s>>>26,f=67108863&s,h=Math.min(u,e.length-1),d=Math.max(0,u-t.length+1);d<=h;d++){var p=u-d|0;c+=(o=(a=0|t.words[p])*(i=0|e.words[d])+f)/67108864|0,f=67108863&o}r.words[u]=0|f,s=0|c}return 0!==s?r.words[u]=0|s:r.length--,r.strip()}a.prototype.toString=function(t,e){var n;if(t=t||10,e=0|e||1,16===t||"hex"===t){n="";for(var a=0,i=0,o=0;o<this.length;o++){var l=this.words[o],f=(16777215&(l<<a|i)).toString(16);n=0!==(i=l>>>24-a&16777215)||o!==this.length-1?s[6-f.length]+f+n:f+n,(a+=2)>=26&&(a-=26,o--)}for(0!==i&&(n=i.toString(16)+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var h=u[t],d=c[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var g=p.modn(d).toString(t);n=(p=p.idivn(d)).isZero()?g+n:s[h-g.length]+g+n}for(this.isZero()&&(n="0"+n);n.length%e!=0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},a.prototype.toJSON=function(){return this.toString(16)},a.prototype.toBuffer=function(t,e){return r(void 0!==i),this.toArrayLike(i,t,e)},a.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},a.prototype.toArrayLike=function(t,e,n){var a=this.byteLength(),i=n||Math.max(1,a);r(a<=i,"byte array longer than desired length"),r(i>0,"Requested array length <= 0"),this.strip();var o,l,s="le"===e,u=new t(i),c=this.clone();if(s){for(l=0;!c.isZero();l++)o=c.andln(255),c.iushrn(8),u[l]=o;for(;l<i;l++)u[l]=0}else{for(l=0;l<i-a;l++)u[l]=0;for(l=0;!c.isZero();l++)o=c.andln(255),c.iushrn(8),u[i-l-1]=o}return u},Math.clz32?a.prototype._countBits=function(t){return 32-Math.clz32(t)}:a.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},a.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return 0==(8191&e)&&(r+=13,e>>>=13),0==(127&e)&&(r+=7,e>>>=7),0==(15&e)&&(r+=4,e>>>=4),0==(3&e)&&(r+=2,e>>>=2),0==(1&e)&&r++,r},a.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},a.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},a.prototype.ior=function(t){return r(0==(this.negative|t.negative)),this.iuor(t)},a.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},a.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},a.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},a.prototype.iand=function(t){return r(0==(this.negative|t.negative)),this.iuand(t)},a.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},a.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},a.prototype.iuxor=function(t){var e,r;this.length>t.length?(e=this,r=t):(e=t,r=this);for(var n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},a.prototype.ixor=function(t){return r(0==(this.negative|t.negative)),this.iuxor(t)},a.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},a.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},a.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var a=0;a<e;a++)this.words[a]=67108863&~this.words[a];return n>0&&(this.words[a]=~this.words[a]&67108863>>26-n),this.strip()},a.prototype.notn=function(t){return this.clone().inotn(t)},a.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var n=t/26|0,a=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<a:this.words[n]&~(1<<a),this.strip()},a.prototype.iadd=function(t){var e,r,n;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var a=0,i=0;i<n.length;i++)e=(0|r.words[i])+(0|n.words[i])+a,this.words[i]=67108863&e,a=e>>>26;for(;0!==a&&i<r.length;i++)e=(0|r.words[i])+a,this.words[i]=67108863&e,a=e>>>26;if(this.length=r.length,0!==a)this.words[this.length]=a,this.length++;else if(r!==this)for(;i<r.length;i++)this.words[i]=r.words[i];return this},a.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},a.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var r,n,a=this.cmp(t);if(0===a)return this.negative=0,this.length=1,this.words[0]=0,this;a>0?(r=this,n=t):(r=t,n=this);for(var i=0,o=0;o<n.length;o++)i=(e=(0|r.words[o])-(0|n.words[o])+i)>>26,this.words[o]=67108863&e;for(;0!==i&&o<r.length;o++)i=(e=(0|r.words[o])+i)>>26,this.words[o]=67108863&e;if(0===i&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},a.prototype.sub=function(t){return this.clone().isub(t)};var h=function(t,e,r){var n,a,i,o=t.words,l=e.words,s=r.words,u=0,c=0|o[0],f=8191&c,h=c>>>13,d=0|o[1],p=8191&d,g=d>>>13,v=0|o[2],m=8191&v,y=v>>>13,x=0|o[3],b=8191&x,_=x>>>13,w=0|o[4],A=8191&w,M=w>>>13,T=0|o[5],k=8191&T,E=T>>>13,C=0|o[6],S=8191&C,L=C>>>13,O=0|o[7],D=8191&O,R=O>>>13,P=0|o[8],I=8191&P,B=P>>>13,F=0|o[9],z=8191&F,N=F>>>13,j=0|l[0],U=8191&j,V=j>>>13,H=0|l[1],q=8191&H,G=H>>>13,X=0|l[2],Y=8191&X,W=X>>>13,Z=0|l[3],J=8191&Z,Q=Z>>>13,$=0|l[4],K=8191&$,tt=$>>>13,et=0|l[5],rt=8191&et,nt=et>>>13,at=0|l[6],it=8191&at,ot=at>>>13,lt=0|l[7],st=8191&lt,ut=lt>>>13,ct=0|l[8],ft=8191&ct,ht=ct>>>13,dt=0|l[9],pt=8191&dt,gt=dt>>>13;r.negative=t.negative^e.negative,r.length=19;var vt=(u+(n=Math.imul(f,U))|0)+((8191&(a=(a=Math.imul(f,V))+Math.imul(h,U)|0))<<13)|0;u=((i=Math.imul(h,V))+(a>>>13)|0)+(vt>>>26)|0,vt&=67108863,n=Math.imul(p,U),a=(a=Math.imul(p,V))+Math.imul(g,U)|0,i=Math.imul(g,V);var mt=(u+(n=n+Math.imul(f,q)|0)|0)+((8191&(a=(a=a+Math.imul(f,G)|0)+Math.imul(h,q)|0))<<13)|0;u=((i=i+Math.imul(h,G)|0)+(a>>>13)|0)+(mt>>>26)|0,mt&=67108863,n=Math.imul(m,U),a=(a=Math.imul(m,V))+Math.imul(y,U)|0,i=Math.imul(y,V),n=n+Math.imul(p,q)|0,a=(a=a+Math.imul(p,G)|0)+Math.imul(g,q)|0,i=i+Math.imul(g,G)|0;var yt=(u+(n=n+Math.imul(f,Y)|0)|0)+((8191&(a=(a=a+Math.imul(f,W)|0)+Math.imul(h,Y)|0))<<13)|0;u=((i=i+Math.imul(h,W)|0)+(a>>>13)|0)+(yt>>>26)|0,yt&=67108863,n=Math.imul(b,U),a=(a=Math.imul(b,V))+Math.imul(_,U)|0,i=Math.imul(_,V),n=n+Math.imul(m,q)|0,a=(a=a+Math.imul(m,G)|0)+Math.imul(y,q)|0,i=i+Math.imul(y,G)|0,n=n+Math.imul(p,Y)|0,a=(a=a+Math.imul(p,W)|0)+Math.imul(g,Y)|0,i=i+Math.imul(g,W)|0;var xt=(u+(n=n+Math.imul(f,J)|0)|0)+((8191&(a=(a=a+Math.imul(f,Q)|0)+Math.imul(h,J)|0))<<13)|0;u=((i=i+Math.imul(h,Q)|0)+(a>>>13)|0)+(xt>>>26)|0,xt&=67108863,n=Math.imul(A,U),a=(a=Math.imul(A,V))+Math.imul(M,U)|0,i=Math.imul(M,V),n=n+Math.imul(b,q)|0,a=(a=a+Math.imul(b,G)|0)+Math.imul(_,q)|0,i=i+Math.imul(_,G)|0,n=n+Math.imul(m,Y)|0,a=(a=a+Math.imul(m,W)|0)+Math.imul(y,Y)|0,i=i+Math.imul(y,W)|0,n=n+Math.imul(p,J)|0,a=(a=a+Math.imul(p,Q)|0)+Math.imul(g,J)|0,i=i+Math.imul(g,Q)|0;var bt=(u+(n=n+Math.imul(f,K)|0)|0)+((8191&(a=(a=a+Math.imul(f,tt)|0)+Math.imul(h,K)|0))<<13)|0;u=((i=i+Math.imul(h,tt)|0)+(a>>>13)|0)+(bt>>>26)|0,bt&=67108863,n=Math.imul(k,U),a=(a=Math.imul(k,V))+Math.imul(E,U)|0,i=Math.imul(E,V),n=n+Math.imul(A,q)|0,a=(a=a+Math.imul(A,G)|0)+Math.imul(M,q)|0,i=i+Math.imul(M,G)|0,n=n+Math.imul(b,Y)|0,a=(a=a+Math.imul(b,W)|0)+Math.imul(_,Y)|0,i=i+Math.imul(_,W)|0,n=n+Math.imul(m,J)|0,a=(a=a+Math.imul(m,Q)|0)+Math.imul(y,J)|0,i=i+Math.imul(y,Q)|0,n=n+Math.imul(p,K)|0,a=(a=a+Math.imul(p,tt)|0)+Math.imul(g,K)|0,i=i+Math.imul(g,tt)|0;var _t=(u+(n=n+Math.imul(f,rt)|0)|0)+((8191&(a=(a=a+Math.imul(f,nt)|0)+Math.imul(h,rt)|0))<<13)|0;u=((i=i+Math.imul(h,nt)|0)+(a>>>13)|0)+(_t>>>26)|0,_t&=67108863,n=Math.imul(S,U),a=(a=Math.imul(S,V))+Math.imul(L,U)|0,i=Math.imul(L,V),n=n+Math.imul(k,q)|0,a=(a=a+Math.imul(k,G)|0)+Math.imul(E,q)|0,i=i+Math.imul(E,G)|0,n=n+Math.imul(A,Y)|0,a=(a=a+Math.imul(A,W)|0)+Math.imul(M,Y)|0,i=i+Math.imul(M,W)|0,n=n+Math.imul(b,J)|0,a=(a=a+Math.imul(b,Q)|0)+Math.imul(_,J)|0,i=i+Math.imul(_,Q)|0,n=n+Math.imul(m,K)|0,a=(a=a+Math.imul(m,tt)|0)+Math.imul(y,K)|0,i=i+Math.imul(y,tt)|0,n=n+Math.imul(p,rt)|0,a=(a=a+Math.imul(p,nt)|0)+Math.imul(g,rt)|0,i=i+Math.imul(g,nt)|0;var wt=(u+(n=n+Math.imul(f,it)|0)|0)+((8191&(a=(a=a+Math.imul(f,ot)|0)+Math.imul(h,it)|0))<<13)|0;u=((i=i+Math.imul(h,ot)|0)+(a>>>13)|0)+(wt>>>26)|0,wt&=67108863,n=Math.imul(D,U),a=(a=Math.imul(D,V))+Math.imul(R,U)|0,i=Math.imul(R,V),n=n+Math.imul(S,q)|0,a=(a=a+Math.imul(S,G)|0)+Math.imul(L,q)|0,i=i+Math.imul(L,G)|0,n=n+Math.imul(k,Y)|0,a=(a=a+Math.imul(k,W)|0)+Math.imul(E,Y)|0,i=i+Math.imul(E,W)|0,n=n+Math.imul(A,J)|0,a=(a=a+Math.imul(A,Q)|0)+Math.imul(M,J)|0,i=i+Math.imul(M,Q)|0,n=n+Math.imul(b,K)|0,a=(a=a+Math.imul(b,tt)|0)+Math.imul(_,K)|0,i=i+Math.imul(_,tt)|0,n=n+Math.imul(m,rt)|0,a=(a=a+Math.imul(m,nt)|0)+Math.imul(y,rt)|0,i=i+Math.imul(y,nt)|0,n=n+Math.imul(p,it)|0,a=(a=a+Math.imul(p,ot)|0)+Math.imul(g,it)|0,i=i+Math.imul(g,ot)|0;var At=(u+(n=n+Math.imul(f,st)|0)|0)+((8191&(a=(a=a+Math.imul(f,ut)|0)+Math.imul(h,st)|0))<<13)|0;u=((i=i+Math.imul(h,ut)|0)+(a>>>13)|0)+(At>>>26)|0,At&=67108863,n=Math.imul(I,U),a=(a=Math.imul(I,V))+Math.imul(B,U)|0,i=Math.imul(B,V),n=n+Math.imul(D,q)|0,a=(a=a+Math.imul(D,G)|0)+Math.imul(R,q)|0,i=i+Math.imul(R,G)|0,n=n+Math.imul(S,Y)|0,a=(a=a+Math.imul(S,W)|0)+Math.imul(L,Y)|0,i=i+Math.imul(L,W)|0,n=n+Math.imul(k,J)|0,a=(a=a+Math.imul(k,Q)|0)+Math.imul(E,J)|0,i=i+Math.imul(E,Q)|0,n=n+Math.imul(A,K)|0,a=(a=a+Math.imul(A,tt)|0)+Math.imul(M,K)|0,i=i+Math.imul(M,tt)|0,n=n+Math.imul(b,rt)|0,a=(a=a+Math.imul(b,nt)|0)+Math.imul(_,rt)|0,i=i+Math.imul(_,nt)|0,n=n+Math.imul(m,it)|0,a=(a=a+Math.imul(m,ot)|0)+Math.imul(y,it)|0,i=i+Math.imul(y,ot)|0,n=n+Math.imul(p,st)|0,a=(a=a+Math.imul(p,ut)|0)+Math.imul(g,st)|0,i=i+Math.imul(g,ut)|0;var Mt=(u+(n=n+Math.imul(f,ft)|0)|0)+((8191&(a=(a=a+Math.imul(f,ht)|0)+Math.imul(h,ft)|0))<<13)|0;u=((i=i+Math.imul(h,ht)|0)+(a>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,n=Math.imul(z,U),a=(a=Math.imul(z,V))+Math.imul(N,U)|0,i=Math.imul(N,V),n=n+Math.imul(I,q)|0,a=(a=a+Math.imul(I,G)|0)+Math.imul(B,q)|0,i=i+Math.imul(B,G)|0,n=n+Math.imul(D,Y)|0,a=(a=a+Math.imul(D,W)|0)+Math.imul(R,Y)|0,i=i+Math.imul(R,W)|0,n=n+Math.imul(S,J)|0,a=(a=a+Math.imul(S,Q)|0)+Math.imul(L,J)|0,i=i+Math.imul(L,Q)|0,n=n+Math.imul(k,K)|0,a=(a=a+Math.imul(k,tt)|0)+Math.imul(E,K)|0,i=i+Math.imul(E,tt)|0,n=n+Math.imul(A,rt)|0,a=(a=a+Math.imul(A,nt)|0)+Math.imul(M,rt)|0,i=i+Math.imul(M,nt)|0,n=n+Math.imul(b,it)|0,a=(a=a+Math.imul(b,ot)|0)+Math.imul(_,it)|0,i=i+Math.imul(_,ot)|0,n=n+Math.imul(m,st)|0,a=(a=a+Math.imul(m,ut)|0)+Math.imul(y,st)|0,i=i+Math.imul(y,ut)|0,n=n+Math.imul(p,ft)|0,a=(a=a+Math.imul(p,ht)|0)+Math.imul(g,ft)|0,i=i+Math.imul(g,ht)|0;var Tt=(u+(n=n+Math.imul(f,pt)|0)|0)+((8191&(a=(a=a+Math.imul(f,gt)|0)+Math.imul(h,pt)|0))<<13)|0;u=((i=i+Math.imul(h,gt)|0)+(a>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,n=Math.imul(z,q),a=(a=Math.imul(z,G))+Math.imul(N,q)|0,i=Math.imul(N,G),n=n+Math.imul(I,Y)|0,a=(a=a+Math.imul(I,W)|0)+Math.imul(B,Y)|0,i=i+Math.imul(B,W)|0,n=n+Math.imul(D,J)|0,a=(a=a+Math.imul(D,Q)|0)+Math.imul(R,J)|0,i=i+Math.imul(R,Q)|0,n=n+Math.imul(S,K)|0,a=(a=a+Math.imul(S,tt)|0)+Math.imul(L,K)|0,i=i+Math.imul(L,tt)|0,n=n+Math.imul(k,rt)|0,a=(a=a+Math.imul(k,nt)|0)+Math.imul(E,rt)|0,i=i+Math.imul(E,nt)|0,n=n+Math.imul(A,it)|0,a=(a=a+Math.imul(A,ot)|0)+Math.imul(M,it)|0,i=i+Math.imul(M,ot)|0,n=n+Math.imul(b,st)|0,a=(a=a+Math.imul(b,ut)|0)+Math.imul(_,st)|0,i=i+Math.imul(_,ut)|0,n=n+Math.imul(m,ft)|0,a=(a=a+Math.imul(m,ht)|0)+Math.imul(y,ft)|0,i=i+Math.imul(y,ht)|0;var kt=(u+(n=n+Math.imul(p,pt)|0)|0)+((8191&(a=(a=a+Math.imul(p,gt)|0)+Math.imul(g,pt)|0))<<13)|0;u=((i=i+Math.imul(g,gt)|0)+(a>>>13)|0)+(kt>>>26)|0,kt&=67108863,n=Math.imul(z,Y),a=(a=Math.imul(z,W))+Math.imul(N,Y)|0,i=Math.imul(N,W),n=n+Math.imul(I,J)|0,a=(a=a+Math.imul(I,Q)|0)+Math.imul(B,J)|0,i=i+Math.imul(B,Q)|0,n=n+Math.imul(D,K)|0,a=(a=a+Math.imul(D,tt)|0)+Math.imul(R,K)|0,i=i+Math.imul(R,tt)|0,n=n+Math.imul(S,rt)|0,a=(a=a+Math.imul(S,nt)|0)+Math.imul(L,rt)|0,i=i+Math.imul(L,nt)|0,n=n+Math.imul(k,it)|0,a=(a=a+Math.imul(k,ot)|0)+Math.imul(E,it)|0,i=i+Math.imul(E,ot)|0,n=n+Math.imul(A,st)|0,a=(a=a+Math.imul(A,ut)|0)+Math.imul(M,st)|0,i=i+Math.imul(M,ut)|0,n=n+Math.imul(b,ft)|0,a=(a=a+Math.imul(b,ht)|0)+Math.imul(_,ft)|0,i=i+Math.imul(_,ht)|0;var Et=(u+(n=n+Math.imul(m,pt)|0)|0)+((8191&(a=(a=a+Math.imul(m,gt)|0)+Math.imul(y,pt)|0))<<13)|0;u=((i=i+Math.imul(y,gt)|0)+(a>>>13)|0)+(Et>>>26)|0,Et&=67108863,n=Math.imul(z,J),a=(a=Math.imul(z,Q))+Math.imul(N,J)|0,i=Math.imul(N,Q),n=n+Math.imul(I,K)|0,a=(a=a+Math.imul(I,tt)|0)+Math.imul(B,K)|0,i=i+Math.imul(B,tt)|0,n=n+Math.imul(D,rt)|0,a=(a=a+Math.imul(D,nt)|0)+Math.imul(R,rt)|0,i=i+Math.imul(R,nt)|0,n=n+Math.imul(S,it)|0,a=(a=a+Math.imul(S,ot)|0)+Math.imul(L,it)|0,i=i+Math.imul(L,ot)|0,n=n+Math.imul(k,st)|0,a=(a=a+Math.imul(k,ut)|0)+Math.imul(E,st)|0,i=i+Math.imul(E,ut)|0,n=n+Math.imul(A,ft)|0,a=(a=a+Math.imul(A,ht)|0)+Math.imul(M,ft)|0,i=i+Math.imul(M,ht)|0;var Ct=(u+(n=n+Math.imul(b,pt)|0)|0)+((8191&(a=(a=a+Math.imul(b,gt)|0)+Math.imul(_,pt)|0))<<13)|0;u=((i=i+Math.imul(_,gt)|0)+(a>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,n=Math.imul(z,K),a=(a=Math.imul(z,tt))+Math.imul(N,K)|0,i=Math.imul(N,tt),n=n+Math.imul(I,rt)|0,a=(a=a+Math.imul(I,nt)|0)+Math.imul(B,rt)|0,i=i+Math.imul(B,nt)|0,n=n+Math.imul(D,it)|0,a=(a=a+Math.imul(D,ot)|0)+Math.imul(R,it)|0,i=i+Math.imul(R,ot)|0,n=n+Math.imul(S,st)|0,a=(a=a+Math.imul(S,ut)|0)+Math.imul(L,st)|0,i=i+Math.imul(L,ut)|0,n=n+Math.imul(k,ft)|0,a=(a=a+Math.imul(k,ht)|0)+Math.imul(E,ft)|0,i=i+Math.imul(E,ht)|0;var St=(u+(n=n+Math.imul(A,pt)|0)|0)+((8191&(a=(a=a+Math.imul(A,gt)|0)+Math.imul(M,pt)|0))<<13)|0;u=((i=i+Math.imul(M,gt)|0)+(a>>>13)|0)+(St>>>26)|0,St&=67108863,n=Math.imul(z,rt),a=(a=Math.imul(z,nt))+Math.imul(N,rt)|0,i=Math.imul(N,nt),n=n+Math.imul(I,it)|0,a=(a=a+Math.imul(I,ot)|0)+Math.imul(B,it)|0,i=i+Math.imul(B,ot)|0,n=n+Math.imul(D,st)|0,a=(a=a+Math.imul(D,ut)|0)+Math.imul(R,st)|0,i=i+Math.imul(R,ut)|0,n=n+Math.imul(S,ft)|0,a=(a=a+Math.imul(S,ht)|0)+Math.imul(L,ft)|0,i=i+Math.imul(L,ht)|0;var Lt=(u+(n=n+Math.imul(k,pt)|0)|0)+((8191&(a=(a=a+Math.imul(k,gt)|0)+Math.imul(E,pt)|0))<<13)|0;u=((i=i+Math.imul(E,gt)|0)+(a>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,n=Math.imul(z,it),a=(a=Math.imul(z,ot))+Math.imul(N,it)|0,i=Math.imul(N,ot),n=n+Math.imul(I,st)|0,a=(a=a+Math.imul(I,ut)|0)+Math.imul(B,st)|0,i=i+Math.imul(B,ut)|0,n=n+Math.imul(D,ft)|0,a=(a=a+Math.imul(D,ht)|0)+Math.imul(R,ft)|0,i=i+Math.imul(R,ht)|0;var Ot=(u+(n=n+Math.imul(S,pt)|0)|0)+((8191&(a=(a=a+Math.imul(S,gt)|0)+Math.imul(L,pt)|0))<<13)|0;u=((i=i+Math.imul(L,gt)|0)+(a>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,n=Math.imul(z,st),a=(a=Math.imul(z,ut))+Math.imul(N,st)|0,i=Math.imul(N,ut),n=n+Math.imul(I,ft)|0,a=(a=a+Math.imul(I,ht)|0)+Math.imul(B,ft)|0,i=i+Math.imul(B,ht)|0;var Dt=(u+(n=n+Math.imul(D,pt)|0)|0)+((8191&(a=(a=a+Math.imul(D,gt)|0)+Math.imul(R,pt)|0))<<13)|0;u=((i=i+Math.imul(R,gt)|0)+(a>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,n=Math.imul(z,ft),a=(a=Math.imul(z,ht))+Math.imul(N,ft)|0,i=Math.imul(N,ht);var Rt=(u+(n=n+Math.imul(I,pt)|0)|0)+((8191&(a=(a=a+Math.imul(I,gt)|0)+Math.imul(B,pt)|0))<<13)|0;u=((i=i+Math.imul(B,gt)|0)+(a>>>13)|0)+(Rt>>>26)|0,Rt&=67108863;var Pt=(u+(n=Math.imul(z,pt))|0)+((8191&(a=(a=Math.imul(z,gt))+Math.imul(N,pt)|0))<<13)|0;return u=((i=Math.imul(N,gt))+(a>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,s[0]=vt,s[1]=mt,s[2]=yt,s[3]=xt,s[4]=bt,s[5]=_t,s[6]=wt,s[7]=At,s[8]=Mt,s[9]=Tt,s[10]=kt,s[11]=Et,s[12]=Ct,s[13]=St,s[14]=Lt,s[15]=Ot,s[16]=Dt,s[17]=Rt,s[18]=Pt,0!==u&&(s[19]=u,r.length++),r};function d(t,e,r){return(new p).mulp(t,e,r)}function p(t,e){this.x=t,this.y=e}Math.imul||(h=f),a.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?h(this,t,e):r<63?f(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,a=0,i=0;i<r.length-1;i++){var o=a;a=0;for(var l=67108863&n,s=Math.min(i,e.length-1),u=Math.max(0,i-t.length+1);u<=s;u++){var c=i-u,f=(0|t.words[c])*(0|e.words[u]),h=67108863&f;l=67108863&(h=h+l|0),a+=(o=(o=o+(f/67108864|0)|0)+(h>>>26)|0)>>>26,o&=67108863}r.words[i]=l,n=o,o=a}return 0!==n?r.words[i]=n:r.length--,r.strip()}(this,t,e):d(this,t,e)},p.prototype.makeRBT=function(t){for(var e=new Array(t),r=a.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},p.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,a=0;a<e;a++)n|=(1&t)<<e-a-1,t>>=1;return n},p.prototype.permute=function(t,e,r,n,a,i){for(var o=0;o<i;o++)n[o]=e[t[o]],a[o]=r[t[o]]},p.prototype.transform=function(t,e,r,n,a,i){this.permute(i,t,e,r,n,a);for(var o=1;o<a;o<<=1)for(var l=o<<1,s=Math.cos(2*Math.PI/l),u=Math.sin(2*Math.PI/l),c=0;c<a;c+=l)for(var f=s,h=u,d=0;d<o;d++){var p=r[c+d],g=n[c+d],v=r[c+d+o],m=n[c+d+o],y=f*v-h*m;m=f*m+h*v,v=y,r[c+d]=p+v,n[c+d]=g+m,r[c+d+o]=p-v,n[c+d+o]=g-m,d!==l&&(y=s*f-u*h,h=s*h+u*f,f=y)}},p.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,a=0;for(r=r/2|0;r;r>>>=1)a++;return 1<<a+1+n},p.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var a=t[n];t[n]=t[r-n-1],t[r-n-1]=a,a=e[n],e[n]=-e[r-n-1],e[r-n-1]=-a}},p.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var a=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&a,r=a<67108864?0:a/67108864|0}return t},p.prototype.convert13b=function(t,e,n,a){for(var i=0,o=0;o<e;o++)i+=0|t[o],n[2*o]=8191&i,i>>>=13,n[2*o+1]=8191&i,i>>>=13;for(o=2*e;o<a;++o)n[o]=0;r(0===i),r(0==(-8192&i))},p.prototype.stub=function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=0;return e},p.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),a=this.makeRBT(n),i=this.stub(n),o=new Array(n),l=new Array(n),s=new Array(n),u=new Array(n),c=new Array(n),f=new Array(n),h=r.words;h.length=n,this.convert13b(t.words,t.length,o,n),this.convert13b(e.words,e.length,u,n),this.transform(o,i,l,s,n,a),this.transform(u,i,c,f,n,a);for(var d=0;d<n;d++){var p=l[d]*c[d]-s[d]*f[d];s[d]=l[d]*f[d]+s[d]*c[d],l[d]=p}return this.conjugate(l,s,n),this.transform(l,s,h,i,n,a),this.conjugate(h,i,n),this.normalize13b(h,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},a.prototype.mul=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},a.prototype.mulf=function(t){var e=new a(null);return e.words=new Array(this.length+t.length),d(this,t,e)},a.prototype.imul=function(t){return this.clone().mulTo(t,this)},a.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var a=(0|this.words[n])*t,i=(67108863&a)+(67108863&e);e>>=26,e+=a/67108864|0,e+=i>>>26,this.words[n]=67108863&i}return 0!==e&&(this.words[n]=e,this.length++),this},a.prototype.muln=function(t){return this.clone().imuln(t)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,a=r%26;e[r]=(t.words[n]&1<<a)>>>a}return e}(t);if(0===e.length)return new a(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},a.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,n=t%26,a=(t-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var o=0;for(e=0;e<this.length;e++){var l=this.words[e]&i,s=(0|this.words[e])-l<<n;this.words[e]=s|o,o=l>>>26-n}o&&(this.words[e]=o,this.length++)}if(0!==a){for(e=this.length-1;e>=0;e--)this.words[e+a]=this.words[e];for(e=0;e<a;e++)this.words[e]=0;this.length+=a}return this.strip()},a.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},a.prototype.iushrn=function(t,e,n){var a;r("number"==typeof t&&t>=0),a=e?(e-e%26)/26:0;var i=t%26,o=Math.min((t-i)/26,this.length),l=67108863^67108863>>>i<<i,s=n;if(a-=o,a=Math.max(0,a),s){for(var u=0;u<o;u++)s.words[u]=this.words[u];s.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=a);u--){var f=0|this.words[u];this.words[u]=c<<26-i|f>>>i,c=f&l}return s&&0!==c&&(s.words[s.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},a.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},a.prototype.shln=function(t){return this.clone().ishln(t)},a.prototype.ushln=function(t){return this.clone().iushln(t)},a.prototype.shrn=function(t){return this.clone().ishrn(t)},a.prototype.ushrn=function(t){return this.clone().iushrn(t)},a.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26,a=1<<e;return!(this.length<=n)&&!!(this.words[n]&a)},a.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var a=67108863^67108863>>>e<<e;this.words[this.length-1]&=a}return this.strip()},a.prototype.maskn=function(t){return this.clone().imaskn(t)},a.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},a.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},a.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},a.prototype.addn=function(t){return this.clone().iaddn(t)},a.prototype.subn=function(t){return this.clone().isubn(t)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(t,e,n){var a,i,o=t.length+n;this._expand(o);var l=0;for(a=0;a<t.length;a++){i=(0|this.words[a+n])+l;var s=(0|t.words[a])*e;l=((i-=67108863&s)>>26)-(s/67108864|0),this.words[a+n]=67108863&i}for(;a<this.length-n;a++)l=(i=(0|this.words[a+n])+l)>>26,this.words[a+n]=67108863&i;if(0===l)return this.strip();for(r(-1===l),l=0,a=0;a<this.length;a++)l=(i=-(0|this.words[a])+l)>>26,this.words[a]=67108863&i;return this.negative=1,this.strip()},a.prototype._wordDiv=function(t,e){var r=(this.length,t.length),n=this.clone(),i=t,o=0|i.words[i.length-1];0!==(r=26-this._countBits(o))&&(i=i.ushln(r),n.iushln(r),o=0|i.words[i.length-1]);var l,s=n.length-i.length;if("mod"!==e){(l=new a(null)).length=s+1,l.words=new Array(l.length);for(var u=0;u<l.length;u++)l.words[u]=0}var c=n.clone()._ishlnsubmul(i,1,s);0===c.negative&&(n=c,l&&(l.words[s]=1));for(var f=s-1;f>=0;f--){var h=67108864*(0|n.words[i.length+f])+(0|n.words[i.length+f-1]);for(h=Math.min(h/o|0,67108863),n._ishlnsubmul(i,h,f);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,f),n.isZero()||(n.negative^=1);l&&(l.words[f]=h)}return l&&l.strip(),n.strip(),"div"!==e&&0!==r&&n.iushrn(r),{div:l||null,mod:n}},a.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===t.negative?(l=this.neg().divmod(t,e),"mod"!==e&&(i=l.div.neg()),"div"!==e&&(o=l.mod.neg(),n&&0!==o.negative&&o.iadd(t)),{div:i,mod:o}):0===this.negative&&0!==t.negative?(l=this.divmod(t.neg(),e),"mod"!==e&&(i=l.div.neg()),{div:i,mod:l.mod}):0!=(this.negative&t.negative)?(l=this.neg().divmod(t.neg(),e),"div"!==e&&(o=l.mod.neg(),n&&0!==o.negative&&o.isub(t)),{div:l.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new a(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new a(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new a(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,o,l},a.prototype.div=function(t){return this.divmod(t,"div",!1).div},a.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},a.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},a.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),a=t.andln(1),i=r.cmp(n);return i<0||1===a&&0===i?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},a.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,a=this.length-1;a>=0;a--)n=(e*n+(0|this.words[a]))%t;return n},a.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var a=(0|this.words[n])+67108864*e;this.words[n]=a/t|0,e=a%t}return this.strip()},a.prototype.divn=function(t){return this.clone().idivn(t)},a.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new a(1),o=new a(0),l=new a(0),s=new a(1),u=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++u;for(var c=n.clone(),f=e.clone();!e.isZero();){for(var h=0,d=1;0==(e.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(e.iushrn(h);h-- >0;)(i.isOdd()||o.isOdd())&&(i.iadd(c),o.isub(f)),i.iushrn(1),o.iushrn(1);for(var p=0,g=1;0==(n.words[0]&g)&&p<26;++p,g<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(l.isOdd()||s.isOdd())&&(l.iadd(c),s.isub(f)),l.iushrn(1),s.iushrn(1);e.cmp(n)>=0?(e.isub(n),i.isub(l),o.isub(s)):(n.isub(e),l.isub(i),s.isub(o))}return{a:l,b:s,gcd:n.iushln(u)}},a.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,o=new a(1),l=new a(0),s=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,c=1;0==(e.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(e.iushrn(u);u-- >0;)o.isOdd()&&o.iadd(s),o.iushrn(1);for(var f=0,h=1;0==(n.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(n.iushrn(f);f-- >0;)l.isOdd()&&l.iadd(s),l.iushrn(1);e.cmp(n)>=0?(e.isub(n),o.isub(l)):(n.isub(e),l.isub(o))}return(i=0===e.cmpn(1)?o:l).cmpn(0)<0&&i.iadd(t),i},a.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var a=e.cmp(r);if(a<0){var i=e;e=r,r=i}else if(0===a||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},a.prototype.invm=function(t){return this.egcd(t).a.umod(t)},a.prototype.isEven=function(){return 0==(1&this.words[0])},a.prototype.isOdd=function(){return 1==(1&this.words[0])},a.prototype.andln=function(t){return this.words[0]&t},a.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,n=(t-e)/26,a=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=a,this;for(var i=a,o=n;0!==i&&o<this.length;o++){var l=0|this.words[o];i=(l+=i)>>>26,l&=67108863,this.words[o]=l}return 0!==i&&(this.words[o]=i,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var a=0|this.words[0];e=a===t?0:a<t?-1:1}return 0!==this.negative?0|-e:e},a.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},a.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],a=0|t.words[r];if(n!==a){n<a?e=-1:n>a&&(e=1);break}}return e},a.prototype.gtn=function(t){return 1===this.cmpn(t)},a.prototype.gt=function(t){return 1===this.cmp(t)},a.prototype.gten=function(t){return this.cmpn(t)>=0},a.prototype.gte=function(t){return this.cmp(t)>=0},a.prototype.ltn=function(t){return-1===this.cmpn(t)},a.prototype.lt=function(t){return-1===this.cmp(t)},a.prototype.lten=function(t){return this.cmpn(t)<=0},a.prototype.lte=function(t){return this.cmp(t)<=0},a.prototype.eqn=function(t){return 0===this.cmpn(t)},a.prototype.eq=function(t){return 0===this.cmp(t)},a.red=function(t){return new _(t)},a.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},a.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(t){return this.red=t,this},a.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},a.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},a.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},a.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},a.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},a.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},a.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},a.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},a.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var g={k256:null,p224:null,p192:null,p25519:null};function v(t,e){this.name=t,this.p=new a(e,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function m(){v.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function y(){v.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){v.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function b(){v.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function _(t){if("string"==typeof t){var e=a._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function w(t){_.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}v.prototype._tmp=function(){var t=new a(null);return t.words=new Array(Math.ceil(this.n/13)),t},v.prototype.ireduce=function(t){var e,r=t;do{this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):r.strip(),r},v.prototype.split=function(t,e){t.iushrn(this.n,0,e)},v.prototype.imulK=function(t){return t.imul(this.k)},n(m,v),m.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var a=t.words[9];for(e.words[e.length++]=4194303&a,n=10;n<t.length;n++){var i=0|t.words[n];t.words[n-10]=(4194303&i)<<4|a>>>22,a=i}a>>>=22,t.words[n-10]=a,0===a&&t.length>10?t.length-=10:t.length-=9},m.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(y,v),n(x,v),n(b,v),b.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=19*(0|t.words[r])+e,a=67108863&n;n>>>=26,t.words[r]=a,e=n}return 0!==e&&(t.words[t.length++]=e),t},a._prime=function(t){if(g[t])return g[t];var e;if("k256"===t)e=new m;else if("p224"===t)e=new y;else if("p192"===t)e=new x;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new b}return g[t]=e,e},_.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},_.prototype._verify2=function(t,e){r(0==(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},_.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},_.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},_.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},_.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},_.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},_.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return r.cmpn(0)<0&&r.iadd(this.m),r},_.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},_.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},_.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},_.prototype.isqr=function(t){return this.imul(t,t.clone())},_.prototype.sqr=function(t){return this.mul(t,t)},_.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var n=this.m.add(new a(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),o=0;!i.isZero()&&0===i.andln(1);)o++,i.iushrn(1);r(!i.isZero());var l=new a(1).toRed(this),s=l.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new a(2*c*c).toRed(this);0!==this.pow(c,u).cmp(s);)c.redIAdd(s);for(var f=this.pow(c,i),h=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=o;0!==d.cmp(l);){for(var g=d,v=0;0!==g.cmp(l);v++)g=g.redSqr();r(v<p);var m=this.pow(f,new a(1).iushln(p-v-1));h=h.redMul(m),f=m.redSqr(),d=d.redMul(f),p=v}return h},_.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},_.prototype.pow=function(t,e){if(e.isZero())return new a(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=new Array(16);r[0]=new a(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],o=0,l=0,s=e.bitLength()%26;for(0===s&&(s=26),n=e.length-1;n>=0;n--){for(var u=e.words[n],c=s-1;c>=0;c--){var f=u>>c&1;i!==r[0]&&(i=this.sqr(i)),0!==f||0!==o?(o<<=1,o|=f,(4===++l||0===n&&0===c)&&(i=this.mul(i,r[o]),l=0,o=0)):l=0}s=26}return i},_.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},_.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},a.mont=function(t){return new w(t)},n(w,_),w.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},w.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},w.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=r.isub(n).iushrn(this.shift),i=a;return a.cmp(this.m)>=0?i=a.isub(this.m):a.cmpn(0)<0&&(i=a.iadd(this.m)),i._forceRed(this)},w.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new a(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},w.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(Ff,this),Ff=Ff.exports;var zf=function(t){return t.cmp(new Ff(0))};var Nf={};(function(t){var e=!1;if("undefined"!=typeof Float64Array){var r=new Float64Array(1),n=new Uint32Array(r.buffer);if(r[0]=1,e=!0,1072693248===n[1]){(Nf=function(t){return r[0]=t,[n[0],n[1]]}).pack=function(t,e){return n[0]=t,n[1]=e,r[0]},Nf.lo=function(t){return r[0]=t,n[0]},Nf.hi=function(t){return r[0]=t,n[1]}}else if(1072693248===n[0]){(Nf=function(t){return r[0]=t,[n[1],n[0]]}).pack=function(t,e){return n[1]=t,n[0]=e,r[0]},Nf.lo=function(t){return r[0]=t,n[1]},Nf.hi=function(t){return r[0]=t,n[0]}}else e=!1}if(!e){var a=new t(8);(Nf=function(t){return a.writeDoubleLE(t,0,!0),[a.readUInt32LE(0,!0),a.readUInt32LE(4,!0)]}).pack=function(t,e){return a.writeUInt32LE(t,0,!0),a.writeUInt32LE(e,4,!0),a.readDoubleLE(0,!0)},Nf.lo=function(t){return a.writeDoubleLE(t,0,!0),a.readUInt32LE(0,!0)},Nf.hi=function(t){return a.writeDoubleLE(t,0,!0),a.readUInt32LE(4,!0)}}Nf.sign=function(t){return Nf.hi(t)>>>31},Nf.exponent=function(t){return(Nf.hi(t)<<1>>>21)-1023},Nf.fraction=function(t){var e=Nf.lo(t),r=Nf.hi(t),n=1048575&r;return 2146435072&r&&(n+=1<<20),[e,n]},Nf.denormalized=function(t){return!(2146435072&Nf.hi(t))}}).call(this,Yl.Buffer);var jf=function(t){var e=Nf.exponent(t);return e<52?new Ff(t):new Ff(t*Math.pow(2,52-e)).ushln(e-52)};var Uf=function(t,e){var r=zf(t),n=zf(e);if(0===r)return[jf(0),jf(1)];if(0===n)return[jf(0),jf(0)];n<0&&(t=t.neg(),e=e.neg());var a=t.gcd(e);if(a.cmpn(1))return[t.div(a),e.div(a)];return[t,e]};var Vf=function(t,e){return Uf(t[0].mul(e[1]),t[1].mul(e[0]))};var Hf=function(t){return t&&"object"==typeof t&&Boolean(t.words)};var qf=function(t){return Array.isArray(t)&&2===t.length&&Hf(t[0])&&Hf(t[1])};var Gf=function(t){return new Ff(t)};var Xf=function t(e,r){if(qf(e))return r?Vf(e,t(r)):[e[0].clone(),e[1].clone()];var n=0;var a,i;if(Hf(e))a=e.clone();else if("string"==typeof e)a=Gf(e);else{if(0===e)return[jf(0),jf(1)];if(e===Math.floor(e))a=jf(e);else{for(;e!==Math.floor(e);)e*=Math.pow(2,256),n-=256;a=jf(e)}}if(qf(r))a.mul(r[1]),i=r[0].clone();else if(Hf(r))i=r.clone();else if("string"==typeof r)i=Gf(r);else if(r)if(r===Math.floor(r))i=jf(r);else{for(;r!==Math.floor(r);)r*=Math.pow(2,256),n+=256;i=jf(r)}else i=jf(1);n>0?a=a.ushln(n):n<0&&(i=i.ushln(-n));return Uf(a,i)};var Yf=function(t){var e=t.length,r=t.words,n=0;if(1===e)n=r[0];else if(2===e)n=r[0]+67108864*r[1];else for(var a=0;a<e;a++){var i=r[a];n+=i*Math.pow(67108864,a)}return zf(t)*n};var Wf=Pl.countTrailingZeros,Zf=function(t){var e=Wf(Nf.lo(t));if(e<32)return e;var r=Wf(Nf.hi(t));if(r>20)return 52;return r+32};var Jf=function(t){var e=t[0],r=t[1];if(0===e.cmpn(0))return 0;var n=e.abs().divmod(r.abs()),a=n.div,i=Yf(a),o=n.mod,l=e.negative!==r.negative?-1:1;if(0===o.cmpn(0))return l*i;if(i){var s=Zf(i)+4,u=Yf(o.ushln(s).divRound(r));return l*(i+u*Math.pow(2,-s))}var c=r.bitLength()-o.bitLength()+53,u=Yf(o.ushln(c).divRound(r));return c<1023?l*u*Math.pow(2,-c):(u*=Math.pow(2,-1023),l*u*Math.pow(2,1023-c))};var Qf={},$f="d",Kf="ax",th="vv",eh="fp",rh="es",nh="rs",ah="re",ih="rb",oh="ri",lh="rp",sh="bs",uh="be",ch="bb",fh="bi",hh="bp",dh="rv",ph="Q",gh=[$f,Kf,th,nh,ah,ih,oh,sh,uh,ch,fh];function vh(t){var e="bruteForce"+(t?"Full":"Partial"),r=[],n=gh.slice();t||n.splice(3,0,eh);var a=["function "+e+"("+n.join()+"){"];function i(e,n){var i=function(t,e,r){var n="bruteForce"+(t?"Red":"Blue")+(e?"Flip":"")+(r?"Full":""),a=["function ",n,"(",gh.join(),"){","var ",rh,"=2*",$f,";"],i="for(var i="+nh+","+lh+"="+rh+"*"+nh+";i<"+ah+";++i,"+lh+"+="+rh+"){var x0="+ih+"["+Kf+"+"+lh+"],x1="+ih+"["+Kf+"+"+lh+"+"+$f+"],xi="+oh+"[i];",o="for(var j="+sh+","+hh+"="+rh+"*"+sh+";j<"+uh+";++j,"+hh+"+="+rh+"){var y0="+ch+"["+Kf+"+"+hh+"],"+(r?"y1="+ch+"["+Kf+"+"+hh+"+"+$f+"],":"")+"yi="+fh+"[j];";return t?a.push(i,ph,":",o):a.push(o,ph,":",i),r?a.push("if(y1<x0||x1<y0)continue;"):e?a.push("if(y0<=x0||x1<y0)continue;"):a.push("if(y0<x0||x1<y0)continue;"),a.push("for(var k="+Kf+"+1;k<"+$f+";++k){var r0="+ih+"[k+"+lh+"],r1="+ih+"[k+"+$f+"+"+lh+"],b0="+ch+"[k+"+hh+"],b1="+ch+"[k+"+$f+"+"+hh+"];if(r1<b0||b1<r0)continue "+ph+";}var "+dh+"="+th+"("),e?a.push("yi,xi"):a.push("xi,yi"),a.push(");if("+dh+"!==void 0)return "+dh+";}}}"),{name:n,code:a.join("")}}(e,n,t);r.push(i.code),a.push("return "+i.name+"("+gh.join()+");")}a.push("if("+ah+"-"+nh+">"+uh+"-"+sh+"){"),t?(i(!0,!1),a.push("}else{"),i(!1,!1)):(a.push("if("+eh+"){"),i(!0,!0),a.push("}else{"),i(!0,!1),a.push("}}else{if("+eh+"){"),i(!1,!0),a.push("}else{"),i(!1,!1),a.push("}")),a.push("}}return "+e);var o=r.join("")+a.join("");return new Function(o)()}Qf.partial=vh(!1),Qf.full=vh(!0);var mh=function(t,e){var r="abcdef".split("").concat(e),n=[];t.indexOf("lo")>=0&&n.push("lo=e[k+n]");t.indexOf("hi")>=0&&n.push("hi=e[k+o]");return r.push(yh.replace("_",n.join()).replace("$",t)),Function.apply(void 0,r)},yh="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m";var xh=function(t,e,r,n,a,i){if(n<=r+1)return r;var o=r,l=n,s=n+r>>>1,u=2*t,c=s,f=a[u*s+e];for(;o<l;){if(l-o<_h){wh(t,e,o,l,a,i),f=a[u*s+e];break}var h=l-o,d=Math.random()*h+o|0,p=a[u*d+e],g=Math.random()*h+o|0,v=a[u*g+e],m=Math.random()*h+o|0,y=a[u*m+e];p<=v?y>=v?(c=g,f=v):p>=y?(c=d,f=p):(c=m,f=y):v>=y?(c=g,f=v):y>=p?(c=d,f=p):(c=m,f=y);for(var x=u*(l-1),b=u*c,_=0;_<u;++_,++x,++b){var w=a[x];a[x]=a[b],a[b]=w}var A=i[l-1];i[l-1]=i[c],i[c]=A,c=bh(t,e,o,l-1,a,i,f);for(var x=u*(l-1),b=u*c,_=0;_<u;++_,++x,++b){var w=a[x];a[x]=a[b],a[b]=w}var A=i[l-1];if(i[l-1]=i[c],i[c]=A,s<c){for(l=c-1;o<l&&a[u*(l-1)+e]===f;)l-=1;l+=1}else{if(!(c<s))break;for(o=c+1;o<l&&a[u*o+e]===f;)o+=1}}return bh(t,e,r,s,a,i,a[u*s+e])},bh=mh("lo<p0",["p0"]),_h=8;function wh(t,e,r,n,a,i){for(var o=2*t,l=o*(r+1)+e,s=r+1;s<n;++s,l+=o)for(var u=a[l],c=s,f=o*(s-1);c>r&&a[f+e]>u;--c,f-=o){for(var h=f,d=f+o,p=0;p<o;++p,++h,++d){var g=a[h];a[h]=a[d],a[d]=g}var v=i[c];i[c]=i[c-1],i[c-1]=v}}var Ah=function(t,e){e<=4*Mh?Th(0,e-1,t):function t(e,r,n){var a=(r-e+1)/6|0,i=e+a,o=r-a,l=e+r>>1,s=l-a,u=l+a,c=i,f=s,h=l,d=u,p=o,g=e+1,v=r-1,m=0;Lh(c,f,n)&&(m=c,c=f,f=m);Lh(d,p,n)&&(m=d,d=p,p=m);Lh(c,h,n)&&(m=c,c=h,h=m);Lh(f,h,n)&&(m=f,f=h,h=m);Lh(c,d,n)&&(m=c,c=d,d=m);Lh(h,d,n)&&(m=h,h=d,d=m);Lh(f,p,n)&&(m=f,f=p,p=m);Lh(f,h,n)&&(m=f,f=h,h=m);Lh(d,p,n)&&(m=d,d=p,p=m);var y=n[2*f];var x=n[2*f+1];var b=n[2*d];var _=n[2*d+1];var w=2*c;var A=2*h;var M=2*p;var T=2*i;var k=2*l;var E=2*o;for(var C=0;C<2;++C){var S=n[w+C],L=n[A+C],O=n[M+C];n[T+C]=S,n[k+C]=L,n[E+C]=O}Eh(s,e,n);Eh(u,r,n);for(var D=g;D<=v;++D)if(Oh(D,y,x,n))D!==g&&kh(D,g,n),++g;else if(!Oh(D,b,_,n))for(;;){if(Oh(v,b,_,n)){Oh(v,y,x,n)?(Ch(D,g,v,n),++g,--v):(kh(D,v,n),--v);break}if(--v<D)break}Sh(e,g-1,y,x,n);Sh(r,v+1,b,_,n);g-2-e<=Mh?Th(e,g-2,n):t(e,g-2,n);r-(v+2)<=Mh?Th(v+2,r,n):t(v+2,r,n);v-g<=Mh?Th(g,v,n):t(g,v,n)}(0,e-1,t)},Mh=32;function Th(t,e,r){for(var n=2*(t+1),a=t+1;a<=e;++a){for(var i=r[n++],o=r[n++],l=a,s=n-2;l-- >t;){var u=r[s-2],c=r[s-1];if(u<i)break;if(u===i&&c<o)break;r[s]=u,r[s+1]=c,s-=2}r[s]=i,r[s+1]=o}}function kh(t,e,r){e*=2;var n=r[t*=2],a=r[t+1];r[t]=r[e],r[t+1]=r[e+1],r[e]=n,r[e+1]=a}function Eh(t,e,r){e*=2,r[t*=2]=r[e],r[t+1]=r[e+1]}function Ch(t,e,r,n){e*=2,r*=2;var a=n[t*=2],i=n[t+1];n[t]=n[e],n[t+1]=n[e+1],n[e]=n[r],n[e+1]=n[r+1],n[r]=a,n[r+1]=i}function Sh(t,e,r,n,a){e*=2,a[t*=2]=a[e],a[e]=r,a[t+1]=a[e+1],a[e+1]=n}function Lh(t,e,r){e*=2;var n=r[t*=2],a=r[e];return!(n<a)&&(n!==a||r[t+1]>r[e+1])}function Oh(t,e,r,n){var a=n[t*=2];return a<e||a===e&&n[t+1]<r}var Dh={init:function(t){var e=Pl.nextPow2(t);Ph.length<e&&(Ds.free(Ph),Ph=Ds.mallocInt32(e));Ih.length<e&&(Ds.free(Ih),Ih=Ds.mallocInt32(e));Bh.length<e&&(Ds.free(Bh),Bh=Ds.mallocInt32(e));Fh.length<e&&(Ds.free(Fh),Fh=Ds.mallocInt32(e));zh.length<e&&(Ds.free(zh),zh=Ds.mallocInt32(e));Nh.length<e&&(Ds.free(Nh),Nh=Ds.mallocInt32(e));var r=8*e;jh.length<r&&(Ds.free(jh),jh=Ds.mallocDouble(r))},sweepBipartite:function(t,e,r,n,a,i,o,l,s,u){for(var c=0,f=2*t,h=t-1,d=f-1,p=r;p<n;++p){var g=i[p],v=f*p;jh[c++]=a[v+h],jh[c++]=-(g+1),jh[c++]=a[v+d],jh[c++]=g}for(var p=o;p<l;++p){var g=u[p]+Rh,m=f*p;jh[c++]=s[m+h],jh[c++]=-g,jh[c++]=s[m+d],jh[c++]=g}var y=c>>>1;Ah(jh,y);for(var x=0,b=0,p=0;p<y;++p){var _=0|jh[2*p+1];if(_>=Rh)Uh(Bh,Fh,b--,_=_-Rh|0);else if(_>=0)Uh(Ph,Ih,x--,_);else if(_<=-Rh){_=-_-Rh|0;for(var w=0;w<x;++w){var A=e(Ph[w],_);if(void 0!==A)return A}Vh(Bh,Fh,b++,_)}else{_=-_-1|0;for(var w=0;w<b;++w){var A=e(_,Bh[w]);if(void 0!==A)return A}Vh(Ph,Ih,x++,_)}}},sweepComplete:function(t,e,r,n,a,i,o,l,s,u){for(var c=0,f=2*t,h=t-1,d=f-1,p=r;p<n;++p){var g=i[p]+1<<1,v=f*p;jh[c++]=a[v+h],jh[c++]=-g,jh[c++]=a[v+d],jh[c++]=g}for(var p=o;p<l;++p){var g=u[p]+1<<1,m=f*p;jh[c++]=s[m+h],jh[c++]=1|-g,jh[c++]=s[m+d],jh[c++]=1|g}var y=c>>>1;Ah(jh,y);for(var x=0,b=0,_=0,p=0;p<y;++p){var w=0|jh[2*p+1],A=1&w;if(p<y-1&&w>>1==jh[2*p+3]>>1&&(A=2,p+=1),w<0){for(var M=-(w>>1)-1,T=0;T<_;++T){var k=e(zh[T],M);if(void 0!==k)return k}if(0!==A)for(var T=0;T<x;++T){var k=e(Ph[T],M);if(void 0!==k)return k}if(1!==A)for(var T=0;T<b;++T){var k=e(Bh[T],M);if(void 0!==k)return k}0===A?Vh(Ph,Ih,x++,M):1===A?Vh(Bh,Fh,b++,M):2===A&&Vh(zh,Nh,_++,M)}else{var M=(w>>1)-1;0===A?Uh(Ph,Ih,x--,M):1===A?Uh(Bh,Fh,b--,M):2===A&&Uh(zh,Nh,_--,M)}}},scanBipartite:function(t,e,r,n,a,i,o,l,s,u,c,f){var h=0,d=2*t,p=e,g=e+t,v=1,m=1;n?m=Rh:v=Rh;for(var y=a;y<i;++y){var x=y+v,b=d*y;jh[h++]=o[b+p],jh[h++]=-x,jh[h++]=o[b+g],jh[h++]=x}for(var y=s;y<u;++y){var x=y+m,_=d*y;jh[h++]=c[_+p],jh[h++]=-x}var w=h>>>1;Ah(jh,w);for(var A=0,y=0;y<w;++y){var M=0|jh[2*y+1];if(M<0){var x=-M,T=!1;if(x>=Rh?(T=!n,x-=Rh):(T=!!n,x-=1),T)Vh(Ph,Ih,A++,x);else{var k=f[x],E=d*x,C=c[E+e+1],S=c[E+e+1+t];t:for(var L=0;L<A;++L){var O=Ph[L],D=d*O;if(!(S<o[D+e+1]||o[D+e+1+t]<C)){for(var R=e+2;R<t;++R)if(c[E+R+t]<o[D+R]||o[D+R+t]<c[E+R])continue t;var P,I=l[O];if(void 0!==(P=n?r(k,I):r(I,k)))return P}}}}else Uh(Ph,Ih,A--,M-v)}},scanComplete:function(t,e,r,n,a,i,o,l,s,u,c){for(var f=0,h=2*t,d=e,p=e+t,g=n;g<a;++g){var v=g+Rh,m=h*g;jh[f++]=i[m+d],jh[f++]=-v,jh[f++]=i[m+p],jh[f++]=v}for(var g=l;g<s;++g){var v=g+1,y=h*g;jh[f++]=u[y+d],jh[f++]=-v}var x=f>>>1;Ah(jh,x);for(var b=0,g=0;g<x;++g){var _=0|jh[2*g+1];if(_<0){var v=-_;if(v>=Rh)Ph[b++]=v-Rh;else{var w=c[v-=1],A=h*v,M=u[A+e+1],T=u[A+e+1+t];t:for(var k=0;k<b;++k){var E=Ph[k],C=o[E];if(C===w)break;var S=h*E;if(!(T<i[S+e+1]||i[S+e+1+t]<M)){for(var L=e+2;L<t;++L)if(u[A+L+t]<i[S+L]||i[S+L+t]<u[A+L])continue t;var O=r(C,w);if(void 0!==O)return O}}}}else{for(var v=_-Rh,k=b-1;k>=0;--k)if(Ph[k]===v){for(var L=k+1;L<b;++L)Ph[L-1]=Ph[L];break}--b}}}},Rh=1<<28,Ph=Ds.mallocInt32(1024),Ih=Ds.mallocInt32(1024),Bh=Ds.mallocInt32(1024),Fh=Ds.mallocInt32(1024),zh=Ds.mallocInt32(1024),Nh=Ds.mallocInt32(1024),jh=Ds.mallocDouble(8192);function Uh(t,e,r,n){var a=e[n],i=t[r-1];t[a]=i,e[i]=a}function Vh(t,e,r,n){t[r]=n,e[n]=r}var Hh=function(t,e,r,n,a,i,o,l,s){!function(t,e){var r=8*Pl.log2(e+1)*(t+1)|0,n=Pl.nextPow2(ed*r);nd.length<n&&(Ds.free(nd),nd=Ds.mallocInt32(n));var a=Pl.nextPow2(rd*r);ad<a&&(Ds.free(ad),ad=Ds.mallocDouble(a))}(t,n+o);var u,c=0,f=2*t;id(c++,0,0,n,0,o,r?16:0,-1/0,1/0),r||id(c++,0,0,o,0,n,1,-1/0,1/0);for(;c>0;){var h=(c-=1)*ed,d=nd[h],p=nd[h+1],g=nd[h+2],v=nd[h+3],m=nd[h+4],y=nd[h+5],x=c*rd,b=ad[x],_=ad[x+1],w=1&y,A=!!(16&y),M=a,T=i,k=l,E=s;if(w&&(M=l,T=s,k=a,E=i),!(2&y&&(g=Qh(t,d,p,g,M,T,_),p>=g)||4&y&&(p=$h(t,d,p,g,M,T,b))>=g)){var C=g-p,S=m-v;if(A){if(t*C*(C+S)<Wh){if(void 0!==(u=Dh.scanComplete(t,d,e,p,g,M,T,v,m,k,E)))return u;continue}}else{if(t*Math.min(C,S)<Xh){if(void 0!==(u=qh(t,d,e,w,p,g,M,T,v,m,k,E)))return u;continue}if(t*C*S<Yh){if(void 0!==(u=Dh.scanBipartite(t,d,e,w,p,g,M,T,v,m,k,E)))return u;continue}}var L=Zh(t,d,p,g,M,T,b,_);if(p<L)if(t*(L-p)<Xh){if(void 0!==(u=Gh(t,d+1,e,p,L,M,T,v,m,k,E)))return u}else if(d===t-2){if(void 0!==(u=w?Dh.sweepBipartite(t,e,v,m,k,E,p,L,M,T):Dh.sweepBipartite(t,e,p,L,M,T,v,m,k,E)))return u}else id(c++,d+1,p,L,v,m,w,-1/0,1/0),id(c++,d+1,v,m,p,L,1^w,-1/0,1/0);if(L<g){var O=xh(t,d,v,m,k,E),D=k[f*O+d],R=Jh(t,d,O,m,k,E,D);if(R<m&&id(c++,d,L,g,R,m,(4|w)+(A?16:0),D,_),v<O&&id(c++,d,L,g,v,O,(2|w)+(A?16:0),b,D),O+1===R){if(void 0!==(u=A?ld(t,d,e,L,g,M,T,O,k,E[O]):od(t,d,e,w,L,g,M,T,O,k,E[O])))return u}else if(O<R){var P;if(A){if(P=Kh(t,d,L,g,M,T,D),L<P){var I=Jh(t,d,L,P,M,T,D);if(d===t-2){if(L<I&&void 0!==(u=Dh.sweepComplete(t,e,L,I,M,T,O,R,k,E)))return u;if(I<P&&void 0!==(u=Dh.sweepBipartite(t,e,I,P,M,T,O,R,k,E)))return u}else L<I&&id(c++,d+1,L,I,O,R,16,-1/0,1/0),I<P&&(id(c++,d+1,I,P,O,R,0,-1/0,1/0),id(c++,d+1,O,R,I,P,1,-1/0,1/0))}}else P=w?td(t,d,L,g,M,T,D):Kh(t,d,L,g,M,T,D),L<P&&(d===t-2?u=w?Dh.sweepBipartite(t,e,O,R,k,E,L,P,M,T):Dh.sweepBipartite(t,e,L,P,M,T,O,R,k,E):(id(c++,d+1,L,P,O,R,w,-1/0,1/0),id(c++,d+1,O,R,L,P,1^w,-1/0,1/0)))}}}}},qh=Qf.partial,Gh=Qf.full,Xh=128,Yh=1<<22,Wh=1<<22,Zh=mh("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),Jh=mh("lo===p0",["p0"]),Qh=mh("lo<p0",["p0"]),$h=mh("hi<=p0",["p0"]),Kh=mh("lo<=p0&&p0<=hi",["p0"]),td=mh("lo<p0&&p0<=hi",["p0"]),ed=6,rd=2,nd=Ds.mallocInt32(1024),ad=Ds.mallocDouble(1024);function id(t,e,r,n,a,i,o,l,s){var u=ed*t;nd[u]=e,nd[u+1]=r,nd[u+2]=n,nd[u+3]=a,nd[u+4]=i,nd[u+5]=o;var c=rd*t;ad[c]=l,ad[c+1]=s}function od(t,e,r,n,a,i,o,l,s,u,c){var f=2*t,h=s*f,d=u[h+e];t:for(var p=a,g=a*f;p<i;++p,g+=f){var v=o[g+e],m=o[g+e+t];if(!(d<v||m<d)&&(!n||d!==v)){for(var y,x=l[p],b=e+1;b<t;++b){v=o[g+b],m=o[g+b+t];var _=u[h+b],w=u[h+b+t];if(m<_||w<v)continue t}if(void 0!==(y=n?r(c,x):r(x,c)))return y}}}function ld(t,e,r,n,a,i,o,l,s,u){var c=2*t,f=l*c,h=s[f+e];t:for(var d=n,p=n*c;d<a;++d,p+=c){var g=o[d];if(g!==u){var v=i[p+e],m=i[p+e+t];if(!(h<v||m<h)){for(var y=e+1;y<t;++y){v=i[p+y],m=i[p+y+t];var x=s[f+y],b=s[f+y+t];if(m<x||b<v)continue t}var _=r(g,u);if(void 0!==_)return _}}}}var sd,ud=function(t,e,r){switch(arguments.length){case 1:return sd=[],hd(n=t,n,dd,!0),sd;case 2:return"function"==typeof e?hd(t,t,e,!0):function(t,e){return sd=[],hd(t,e,dd,!1),sd}(t,e);case 3:return hd(t,e,r,!1);default:throw new Error("box-intersect: Invalid arguments")}var n};function cd(t,e){for(var r=0;r<t;++r)if(!(e[r]<=e[r+t]))return!0;return!1}function fd(t,e,r,n){for(var a=0,i=0,o=0,l=t.length;o<l;++o){var s=t[o];if(!cd(e,s)){for(var u=0;u<2*e;++u)r[a++]=s[u];n[i++]=o}}return i}function hd(t,e,r,n){var a=t.length,i=e.length;if(!(a<=0||i<=0)){var o=t[0].length>>>1;if(!(o<=0)){var l,s=Ds.mallocDouble(2*o*a),u=Ds.mallocInt32(a);if((a=fd(t,o,s,u))>0){if(1===o&&n)Dh.init(a),l=Dh.sweepComplete(o,r,0,a,s,u,0,a,s,u);else{var c=Ds.mallocDouble(2*o*i),f=Ds.mallocInt32(i);(i=fd(e,o,c,f))>0&&(Dh.init(a+i),l=1===o?Dh.sweepBipartite(o,r,0,a,s,u,0,i,c,f):Hh(o,r,n,a,s,u,i,c,f),Ds.free(c),Ds.free(f))}Ds.free(s),Ds.free(u)}return l}}}function dd(t,e){sd.push([t,e])}var pd=function(t,e){return Uf(t[0].mul(e[0]),t[1].mul(e[1]))};var gd=function(t){return zf(t[0])*zf(t[1])};var vd=function(t,e){return Uf(t[0].mul(e[1]).sub(t[1].mul(e[0])),t[1].mul(e[1]))};var md=function(t,e){return Uf(t[0].mul(e[1]).add(e[0].mul(t[1])),t[1].mul(e[1]))};var yd=function(t,e){for(var r=t.length,n=new Array(r),a=0;a<r;++a)n[a]=md(t[a],e[a]);return n};var xd=function(t,e){for(var r=Xf(e),n=t.length,a=new Array(n),i=0;i<n;++i)a[i]=pd(t[i],r);return a};var bd=function(t,e){for(var r=t.length,n=new Array(r),a=0;a<r;++a)n[a]=vd(t[a],e[a]);return n};var _d=function(t,e,r,n){var a=bd(e,t),i=bd(n,r),o=wd(a,i);if(0===gd(o))return null;var l=bd(t,r),s=wd(i,l),u=Vf(s,o),c=xd(a,u);return yd(t,c)};function wd(t,e){return vd(pd(t[0],e[1]),pd(t[1],e[0]))}var Ad=Math.pow(2,-1074),Md=-1>>>0,Td=function(t,e){if(isNaN(t)||isNaN(e))return NaN;if(t===e)return t;if(0===t)return e<0?-Ad:Ad;var r=Nf.hi(t),n=Nf.lo(t);e>t==t>0?n===Md?(r+=1,n=0):n+=1:0===n?(n=Md,r-=1):n-=1;return Nf.pack(n,r)};var kd=function(t){for(var e=new Array(t.length),r=0;r<t.length;++r)e[r]=Xf(t[r]);return e};var Ed=function(t,e,r,n){var a=Cd(t,r,n),i=Cd(e,r,n);if(a>0&&i>0||a<0&&i<0)return!1;var o=Cd(r,t,e),l=Cd(n,t,e);if(o>0&&l>0||o<0&&l<0)return!1;if(0===a&&0===i&&0===o&&0===l)return function(t,e,r,n){for(var a=0;a<2;++a){var i=t[a],o=e[a],l=Math.min(i,o),s=Math.max(i,o),u=r[a],c=n[a],f=Math.min(u,c),h=Math.max(u,c);if(h<l||s<f)return!1}return!0}(t,e,r,n);return!0},Cd=af[3];var Sd=Ld;function Ld(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}var Od=Ld.prototype;Object.defineProperty(Od,"length",{get:function(){return this.roots.length}}),Od.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},Od.find=function(t){for(var e=t,r=this.roots;r[t]!==t;)t=r[t];for(;r[e]!==t;){var n=r[e];r[e]=t,e=n}return t},Od.link=function(t,e){var r=this.find(t),n=this.find(e);if(r!==n){var a=this.ranks,i=this.roots,o=a[r],l=a[n];o<l?i[r]=n:l<o?i[n]=r:(i[n]=r,++a[r])}};var Dd=function(t,e,r){var n;if(r){n=e;for(var a=new Array(e.length),i=0;i<e.length;++i){var o=e[i];a[i]=[o[0],o[1],r[i]]}e=a}var l=function(t,e,r){var n=Id(t,[],Pd(t));return zd(e,n,r),!!n}(t,e,!!r);for(;Nd(t,e,!!r);)l=!0;if(r&&l){n.length=0,r.length=0;for(var i=0;i<e.length;++i){var o=e[i];n.push([o[0],o[1]]),r.push(o[2])}}return l};function Rd(t){var e=Jf(t);return[Td(e,-1/0),Td(e,1/0)]}function Pd(t){for(var e=new Array(t.length),r=0;r<t.length;++r){var n=t[r];e[r]=[Td(n[0],-1/0),Td(n[1],-1/0),Td(n[0],1/0),Td(n[1],1/0)]}return e}function Id(t,e,r){for(var n=e.length,a=new Sd(n),i=[],o=0;o<e.length;++o){var l=e[o],s=Rd(l[0]),u=Rd(l[1]);i.push([Td(s[0],-1/0),Td(u[0],-1/0),Td(s[1],1/0),Td(u[1],1/0)])}ud(i,function(t,e){a.link(t,e)});var c=!0,f=new Array(n);for(o=0;o<n;++o){(d=a.find(o))!==o&&(c=!1,t[d]=[Math.min(t[o][0],t[d][0]),Math.min(t[o][1],t[d][1])])}if(c)return null;var h=0;for(o=0;o<n;++o){var d;(d=a.find(o))===o?(f[o]=h,t[h++]=t[o]):f[o]=-1}t.length=h;for(o=0;o<n;++o)f[o]<0&&(f[o]=f[a.find(o)]);return f}function Bd(t,e){return t[0]-e[0]||t[1]-e[1]}function Fd(t,e){var r=t[0]-e[0]||t[1]-e[1];return r||(t[2]<e[2]?-1:t[2]>e[2]?1:0)}function zd(t,e,r){if(0!==t.length){if(e)for(var n=0;n<t.length;++n){var a=e[(o=t[n])[0]],i=e[o[1]];o[0]=Math.min(a,i),o[1]=Math.max(a,i)}else for(n=0;n<t.length;++n){var o;a=(o=t[n])[0],i=o[1];o[0]=Math.min(a,i),o[1]=Math.max(a,i)}r?t.sort(Fd):t.sort(Bd);var l=1;for(n=1;n<t.length;++n){var s=t[n-1],u=t[n];(u[0]!==s[0]||u[1]!==s[1]||r&&u[2]!==s[2])&&(t[l++]=u)}t.length=l}}function Nd(t,e,r){var n=function(t,e){for(var r=new Array(e.length),n=0;n<e.length;++n){var a=e[n],i=t[a[0]],o=t[a[1]];r[n]=[Td(Math.min(i[0],o[0]),-1/0),Td(Math.min(i[1],o[1]),-1/0),Td(Math.max(i[0],o[0]),1/0),Td(Math.max(i[1],o[1]),1/0)]}return r}(t,e),a=function(t,e,r){var n=[];return ud(r,function(r,a){var i=e[r],o=e[a];if(i[0]!==o[0]&&i[0]!==o[1]&&i[1]!==o[0]&&i[1]!==o[1]){var l=t[i[0]],s=t[i[1]],u=t[o[0]],c=t[o[1]];Ed(l,s,u,c)&&n.push([r,a])}}),n}(t,e,n),i=Pd(t),o=function(t,e,r,n){var a=[];return ud(r,n,function(r,n){var i=e[r];if(i[0]!==n&&i[1]!==n){var o=t[n],l=t[i[0]],s=t[i[1]];Ed(l,s,o,o)&&a.push([r,n])}}),a}(t,e,n,i),l=Id(t,function(t,e,r,n,a){var i,o,l=t.map(function(t){return[Xf(t[0]),Xf(t[1])]});for(i=0;i<r.length;++i){var s=r[i];o=s[0];var u=s[1],c=e[o],f=e[u],h=_d(kd(t[c[0]]),kd(t[c[1]]),kd(t[f[0]]),kd(t[f[1]]));if(h){var d=t.length;t.push([Jf(h[0]),Jf(h[1])]),l.push(h),n.push([o,d],[u,d])}}for(n.sort(function(t,e){if(t[0]!==e[0])return t[0]-e[0];var r=l[t[1]],n=l[e[1]];return If(r[0],n[0])||If(r[1],n[1])}),i=n.length-1;i>=0;--i){var p=e[o=(w=n[i])[0]],g=p[0],v=p[1],m=t[g],y=t[v];if((m[0]-y[0]||m[1]-y[1])<0){var x=g;g=v,v=x}p[0]=g;var b,_=p[1]=w[1];for(a&&(b=p[2]);i>0&&n[i-1][0]===o;){var w,A=(w=n[--i])[1];a?e.push([_,A,b]):e.push([_,A]),_=A}a?e.push([_,v,b]):e.push([_,v])}return l}(t,e,a,o,r));return zd(e,l,r),!!l||(a.length>0||o.length>0)}var jd=function(t,e){var r=t.length;if("number"!=typeof e){e=0;for(var n=0;n<r;++n){var a=t[n];e=Math.max(e,a[0],a[1])}e=1+(0|e)}e|=0;for(var i=new Array(e),n=0;n<e;++n)i[n]=[];for(var n=0;n<r;++n){var a=t[n];i[a[0]].push(a[1]),i[a[1]].push(a[0])}for(var o=0;o<e;++o)sl(i[o],function(t,e){return t-e});return i};var Ud=function(t,e){if(1===t.length)return Nc(e,t[0]);if(1===e.length)return Nc(t,e[0]);if(0===t.length||0===e.length)return[0];var r=[0];if(t.length<e.length)for(var n=0;n<t.length;++n)r=Uc(r,Nc(e,t[n]));else for(var n=0;n<e.length;++n)r=Uc(r,Nc(t,e[n]));return r};var Vd=function(t){return t<0?-1:t>0?1:0},Hd=function(t,e,r,n){var a=af(e,r,n);if(0===a){var i=Vd(af(t,e,r)),o=Vd(af(t,e,n));if(i===o){if(0===i){var l=qd(t,e,r),s=qd(t,e,n);return l===s?0:l?1:-1}return 0}return 0===o?i>0?-1:qd(t,e,n)?-1:1:0===i?o>0?1:qd(t,e,r)?1:-1:Vd(o-i)}var u=af(t,e,r);if(u>0)return a>0&&af(t,e,n)>0?1:-1;if(u<0)return a>0||af(t,e,n)>0?1:-1;var c=af(t,e,n);return c>0?1:qd(t,e,r)?1:-1};function qd(t,e,r){var n=zc(t[0],-e[0]),a=zc(t[1],-e[1]),i=zc(r[0],-e[0]),o=zc(r[1],-e[1]),l=Uc(Ud(n,i),Ud(a,o));return l[l.length-1]>=0}var Gd=function(t,e){for(var r=0|e.length,n=t.length,a=[new Array(r),new Array(r)],i=0;i<r;++i)a[0][i]=[],a[1][i]=[];for(var i=0;i<n;++i){var o=t[i];a[0][o[0]].push(o),a[1][o[1]].push(o)}for(var l=[],i=0;i<r;++i)a[0][i].length+a[1][i].length===0&&l.push([i]);function s(t,e){var r=a[e][t[e]];r.splice(r.indexOf(t),1)}function u(t,r,n){for(var i,o,l,u=0;u<2;++u)if(a[u][r].length>0){i=a[u][r][0],l=u;break}o=i[1^l];for(var c=0;c<2;++c)for(var f=a[c][r],h=0;h<f.length;++h){var d=f[h],p=d[1^c],g=Hd(e[t],e[r],e[o],e[p]);g>0&&(i=d,o=p,l=c)}return n?o:(i&&s(i,l),o)}function c(t,r){var n=a[r][t][0],i=[t];s(n,r);for(var o=n[1^r];;){for(;o!==t;)i.push(o),o=u(i[i.length-2],o,!1);if(a[0][t].length+a[1][t].length===0)break;var l=i[i.length-1],c=t,f=i[1],h=u(l,c,!0);if(Hd(e[l],e[c],e[f],e[h])<0)break;i.push(t),o=u(l,c)}return i}function f(t,e){return e[1]===e[e.length-1]}for(var i=0;i<r;++i)for(var h=0;h<2;++h){for(var d=[];a[h][i].length>0;){a[0][i].length;var p=c(i,h);f(d,p)?d.push.apply(d,p):(d.length>0&&l.push(d),d=p)}d.length>0&&l.push(d)}return l};var Xd=function(t,e){for(var r=jd(t,e.length),n=new Array(e.length),a=new Array(e.length),i=[],o=0;o<e.length;++o){var l=r[o].length;a[o]=l,n[o]=!0,l<=1&&i.push(o)}for(;i.length>0;){var s=i.pop();n[s]=!1;for(var u=r[s],o=0;o<u.length;++o){var c=u[o];0==--a[c]&&i.push(c)}}for(var f=new Array(e.length),h=[],o=0;o<e.length;++o)if(n[o]){var s=h.length;f[o]=s,h.push(e[o])}else f[o]=-1;for(var d=[],o=0;o<t.length;++o){var p=t[o];n[p[0]]&&n[p[1]]&&d.push([f[p[0]],f[p[1]]])}return[d,h]};function Yd(t,e,r,n,a,i){var o=["function ",t,"(a,l,h,",n.join(","),"){",i?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",a?".get(m)":"[m]"];return i?e.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",e,"){i=m;"),r?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),i?o.push("return -1};"):o.push("return i};"),o.join("")}function Wd(t,e,r,n){return new Function([Yd("A","x"+t+"y",e,["y"],!1,n),Yd("B","x"+t+"y",e,["y"],!0,n),Yd("P","c(x,y)"+t+"0",e,["y","c"],!1,n),Yd("Q","c(x,y)"+t+"0",e,["y","c"],!0,n),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""))()}var Zd={ge:Wd(">=",!1,"GE"),gt:Wd(">",!1,"GT"),lt:Wd("<",!0,"LT"),le:Wd("<=",!0,"LE"),eq:Wd("-",!0,"EQ",!0)},Jd=0,Qd=1,$d=function(t){if(!t||0===t.length)return new hp(null);return new hp(fp(t))};function Kd(t,e,r,n,a){this.mid=t,this.left=e,this.right=r,this.leftPoints=n,this.rightPoints=a,this.count=(e?e.count:0)+(r?r.count:0)+n.length}var tp=Kd.prototype;function ep(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function rp(t,e){var r=fp(e);t.mid=r.mid,t.left=r.left,t.right=r.right,t.leftPoints=r.leftPoints,t.rightPoints=r.rightPoints,t.count=r.count}function np(t,e){var r=t.intervals([]);r.push(e),rp(t,r)}function ap(t,e){var r=t.intervals([]),n=r.indexOf(e);return n<0?Jd:(r.splice(n,1),rp(t,r),Qd)}function ip(t,e,r){for(var n=0;n<t.length&&t[n][0]<=e;++n){var a=r(t[n]);if(a)return a}}function op(t,e,r){for(var n=t.length-1;n>=0&&t[n][1]>=e;--n){var a=r(t[n]);if(a)return a}}function lp(t,e){for(var r=0;r<t.length;++r){var n=e(t[r]);if(n)return n}}function sp(t,e){return t-e}function up(t,e){var r=t[0]-e[0];return r||t[1]-e[1]}function cp(t,e){var r=t[1]-e[1];return r||t[0]-e[0]}function fp(t){if(0===t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t[r][0],t[r][1]);e.sort(sp);var n=e[e.length>>1],a=[],i=[],o=[];for(r=0;r<t.length;++r){var l=t[r];l[1]<n?a.push(l):n<l[0]?i.push(l):o.push(l)}var s=o,u=o.slice();return s.sort(up),u.sort(cp),new Kd(n,fp(a),fp(i),s,u)}function hp(t){this.root=t}tp.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t},tp.insert=function(t){var e=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?np(this,t):this.left.insert(t):this.left=fp([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?np(this,t):this.right.insert(t):this.right=fp([t]);else{var r=Zd.ge(this.leftPoints,t,up),n=Zd.ge(this.rightPoints,t,cp);this.leftPoints.splice(r,0,t),this.rightPoints.splice(n,0,t)}},tp.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid){return this.left?4*(this.right?this.right.count:0)>3*(e-1)?ap(this,t):2===(i=this.left.remove(t))?(this.left=null,this.count-=1,Qd):(i===Qd&&(this.count-=1),i):Jd}else{if(!(t[0]>this.mid)){if(1===this.count)return this.leftPoints[0]===t?2:Jd;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){for(var r=this,n=this.left;n.right;)r=n,n=n.right;if(r===this)n.right=this.right;else{var a=this.left;i=this.right;r.count-=n.count,r.right=n.left,n.left=a,n.right=i}ep(this,n),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?ep(this,this.left):ep(this,this.right);return Qd}for(a=Zd.ge(this.leftPoints,t,up);a<this.leftPoints.length&&this.leftPoints[a][0]===t[0];++a)if(this.leftPoints[a]===t){this.count-=1,this.leftPoints.splice(a,1);for(i=Zd.ge(this.rightPoints,t,cp);i<this.rightPoints.length&&this.rightPoints[i][1]===t[1];++i)if(this.rightPoints[i]===t)return this.rightPoints.splice(i,1),Qd}return Jd}return this.right?4*(this.left?this.left.count:0)>3*(e-1)?ap(this,t):2===(i=this.right.remove(t))?(this.right=null,this.count-=1,Qd):(i===Qd&&(this.count-=1),i):Jd;var i}},tp.queryPoint=function(t,e){if(t<this.mid){if(this.left)if(r=this.left.queryPoint(t,e))return r;return ip(this.leftPoints,t,e)}if(t>this.mid){var r;if(this.right)if(r=this.right.queryPoint(t,e))return r;return op(this.rightPoints,t,e)}return lp(this.leftPoints,e)},tp.queryInterval=function(t,e,r){var n;if(t<this.mid&&this.left&&(n=this.left.queryInterval(t,e,r)))return n;if(e>this.mid&&this.right&&(n=this.right.queryInterval(t,e,r)))return n;return e<this.mid?ip(this.leftPoints,e,r):t>this.mid?op(this.rightPoints,t,r):lp(this.leftPoints,r)};var dp=hp.prototype;dp.insert=function(t){this.root?this.root.insert(t):this.root=new Kd(t[0],null,null,[t],[t])},dp.remove=function(t){if(this.root){var e=this.root.remove(t);return 2===e&&(this.root=null),e!==Jd}return!1},dp.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)},dp.queryInterval=function(t,e,r){if(t<=e&&this.root)return this.root.queryInterval(t,e,r)},Object.defineProperty(dp,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(dp,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var pp=function(t){return new _p(t||kp,null)},gp=0,vp=1;function mp(t,e,r,n,a,i){this._color=t,this.key=e,this.value=r,this.left=n,this.right=a,this._count=i}function yp(t){return new mp(t._color,t.key,t.value,t.left,t.right,t._count)}function xp(t,e){return new mp(t,e.key,e.value,e.left,e.right,e._count)}function bp(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function _p(t,e){this._compare=t,this.root=e}var wp=_p.prototype;function Ap(t,e){this.tree=t,this._stack=e}Object.defineProperty(wp,"keys",{get:function(){var t=[];return this.forEach(function(e,r){t.push(e)}),t}}),Object.defineProperty(wp,"values",{get:function(){var t=[];return this.forEach(function(e,r){t.push(r)}),t}}),Object.defineProperty(wp,"length",{get:function(){return this.root?this.root._count:0}}),wp.insert=function(t,e){for(var r=this._compare,n=this.root,a=[],i=[];n;){var o=r(t,n.key);a.push(n),i.push(o),n=o<=0?n.left:n.right}a.push(new mp(gp,t,e,null,null,1));for(var l=a.length-2;l>=0;--l){n=a[l];i[l]<=0?a[l]=new mp(n._color,n.key,n.value,a[l+1],n.right,n._count+1):a[l]=new mp(n._color,n.key,n.value,n.left,a[l+1],n._count+1)}for(l=a.length-1;l>1;--l){var s=a[l-1];n=a[l];if(s._color===vp||n._color===vp)break;var u=a[l-2];if(u.left===s)if(s.left===n){if(!(c=u.right)||c._color!==gp){if(u._color=gp,u.left=s.right,s._color=vp,s.right=u,a[l-2]=s,a[l-1]=n,bp(u),bp(s),l>=3)(f=a[l-3]).left===u?f.left=s:f.right=s;break}s._color=vp,u.right=xp(vp,c),u._color=gp,l-=1}else{if(!(c=u.right)||c._color!==gp){if(s.right=n.left,u._color=gp,u.left=n.right,n._color=vp,n.left=s,n.right=u,a[l-2]=n,a[l-1]=s,bp(u),bp(s),bp(n),l>=3)(f=a[l-3]).left===u?f.left=n:f.right=n;break}s._color=vp,u.right=xp(vp,c),u._color=gp,l-=1}else if(s.right===n){if(!(c=u.left)||c._color!==gp){if(u._color=gp,u.right=s.left,s._color=vp,s.left=u,a[l-2]=s,a[l-1]=n,bp(u),bp(s),l>=3)(f=a[l-3]).right===u?f.right=s:f.left=s;break}s._color=vp,u.left=xp(vp,c),u._color=gp,l-=1}else{var c;if(!(c=u.left)||c._color!==gp){var f;if(s.left=n.right,u._color=gp,u.right=n.left,n._color=vp,n.right=s,n.left=u,a[l-2]=n,a[l-1]=s,bp(u),bp(s),bp(n),l>=3)(f=a[l-3]).right===u?f.right=n:f.left=n;break}s._color=vp,u.left=xp(vp,c),u._color=gp,l-=1}}return a[0]._color=vp,new _p(r,a[0])},wp.forEach=function(t,e,r){if(this.root)switch(arguments.length){case 1:return function t(e,r){var n;if(r.left&&(n=t(e,r.left)))return n;return(n=e(r.key,r.value))||(r.right?t(e,r.right):void 0)}(t,this.root);case 2:return function t(e,r,n,a){if(r(e,a.key)<=0){var i;if(a.left&&(i=t(e,r,n,a.left)))return i;if(i=n(a.key,a.value))return i}if(a.right)return t(e,r,n,a.right)}(e,this._compare,t,this.root);case 3:if(this._compare(e,r)>=0)return;return function t(e,r,n,a,i){var o,l=n(e,i.key),s=n(r,i.key);if(l<=0){if(i.left&&(o=t(e,r,n,a,i.left)))return o;if(s>0&&(o=a(i.key,i.value)))return o}if(s>0&&i.right)return t(e,r,n,a,i.right)}(e,r,this._compare,t,this.root)}},Object.defineProperty(wp,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new Ap(this,t)}}),Object.defineProperty(wp,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new Ap(this,t)}}),wp.at=function(t){if(t<0)return new Ap(this,[]);for(var e=this.root,r=[];;){if(r.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new Ap(this,r);if(t-=1,!e.right)break;if(t>=e.right._count)break;e=e.right}return new Ap(this,[])},wp.ge=function(t){for(var e=this._compare,r=this.root,n=[],a=0;r;){var i=e(t,r.key);n.push(r),i<=0&&(a=n.length),r=i<=0?r.left:r.right}return n.length=a,new Ap(this,n)},wp.gt=function(t){for(var e=this._compare,r=this.root,n=[],a=0;r;){var i=e(t,r.key);n.push(r),i<0&&(a=n.length),r=i<0?r.left:r.right}return n.length=a,new Ap(this,n)},wp.lt=function(t){for(var e=this._compare,r=this.root,n=[],a=0;r;){var i=e(t,r.key);n.push(r),i>0&&(a=n.length),r=i<=0?r.left:r.right}return n.length=a,new Ap(this,n)},wp.le=function(t){for(var e=this._compare,r=this.root,n=[],a=0;r;){var i=e(t,r.key);n.push(r),i>=0&&(a=n.length),r=i<0?r.left:r.right}return n.length=a,new Ap(this,n)},wp.find=function(t){for(var e=this._compare,r=this.root,n=[];r;){var a=e(t,r.key);if(n.push(r),0===a)return new Ap(this,n);r=a<=0?r.left:r.right}return new Ap(this,[])},wp.remove=function(t){var e=this.find(t);return e?e.remove():this},wp.get=function(t){for(var e=this._compare,r=this.root;r;){var n=e(t,r.key);if(0===n)return r.value;r=n<=0?r.left:r.right}};var Mp=Ap.prototype;function Tp(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function kp(t,e){return t<e?-1:t>e?1:0}Object.defineProperty(Mp,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(Mp,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),Mp.clone=function(){return new Ap(this.tree,this._stack.slice())},Mp.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var e=new Array(t.length),r=t[t.length-1];e[e.length-1]=new mp(r._color,r.key,r.value,r.left,r.right,r._count);for(var n=t.length-2;n>=0;--n){(r=t[n]).left===t[n+1]?e[n]=new mp(r._color,r.key,r.value,e[n+1],r.right,r._count):e[n]=new mp(r._color,r.key,r.value,r.left,e[n+1],r._count)}if((r=e[e.length-1]).left&&r.right){var a=e.length;for(r=r.left;r.right;)e.push(r),r=r.right;var i=e[a-1];e.push(new mp(r._color,i.key,i.value,r.left,r.right,r._count)),e[a-1].key=r.key,e[a-1].value=r.value;for(n=e.length-2;n>=a;--n)r=e[n],e[n]=new mp(r._color,r.key,r.value,r.left,e[n+1],r._count);e[a-1].left=e[a]}if((r=e[e.length-1])._color===gp){var o=e[e.length-2];o.left===r?o.left=null:o.right===r&&(o.right=null),e.pop();for(n=0;n<e.length;++n)e[n]._count--;return new _p(this.tree._compare,e[0])}if(r.left||r.right){r.left?Tp(r,r.left):r.right&&Tp(r,r.right),r._color=vp;for(n=0;n<e.length-1;++n)e[n]._count--;return new _p(this.tree._compare,e[0])}if(1===e.length)return new _p(this.tree._compare,null);for(n=0;n<e.length;++n)e[n]._count--;var l=e[e.length-2];return function(t){for(var e,r,n,a,i=t.length-1;i>=0;--i){if(e=t[i],0===i)return void(e._color=vp);if((r=t[i-1]).left===e){if((n=r.right).right&&n.right._color===gp)return a=(n=r.right=yp(n)).right=yp(n.right),r.right=n.left,n.left=r,n.right=a,n._color=r._color,e._color=vp,r._color=vp,a._color=vp,bp(r),bp(n),i>1&&((o=t[i-2]).left===r?o.left=n:o.right=n),void(t[i-1]=n);if(n.left&&n.left._color===gp)return a=(n=r.right=yp(n)).left=yp(n.left),r.right=a.left,n.left=a.right,a.left=r,a.right=n,a._color=r._color,r._color=vp,n._color=vp,e._color=vp,bp(r),bp(n),bp(a),i>1&&((o=t[i-2]).left===r?o.left=a:o.right=a),void(t[i-1]=a);if(n._color===vp){if(r._color===gp)return r._color=vp,void(r.right=xp(gp,n));r.right=xp(gp,n);continue}n=yp(n),r.right=n.left,n.left=r,n._color=r._color,r._color=gp,bp(r),bp(n),i>1&&((o=t[i-2]).left===r?o.left=n:o.right=n),t[i-1]=n,t[i]=r,i+1<t.length?t[i+1]=e:t.push(e),i+=2}else{if((n=r.left).left&&n.left._color===gp)return a=(n=r.left=yp(n)).left=yp(n.left),r.left=n.right,n.right=r,n.left=a,n._color=r._color,e._color=vp,r._color=vp,a._color=vp,bp(r),bp(n),i>1&&((o=t[i-2]).right===r?o.right=n:o.left=n),void(t[i-1]=n);if(n.right&&n.right._color===gp)return a=(n=r.left=yp(n)).right=yp(n.right),r.left=a.right,n.right=a.left,a.right=r,a.left=n,a._color=r._color,r._color=vp,n._color=vp,e._color=vp,bp(r),bp(n),bp(a),i>1&&((o=t[i-2]).right===r?o.right=a:o.left=a),void(t[i-1]=a);if(n._color===vp){if(r._color===gp)return r._color=vp,void(r.left=xp(gp,n));r.left=xp(gp,n);continue}var o;n=yp(n),r.left=n.right,n.right=r,n._color=r._color,r._color=gp,bp(r),bp(n),i>1&&((o=t[i-2]).right===r?o.right=n:o.left=n),t[i-1]=n,t[i]=r,i+1<t.length?t[i+1]=e:t.push(e),i+=2}}}(e),l.left===r?l.left=null:l.right=null,new _p(this.tree._compare,e[0])},Object.defineProperty(Mp,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(Mp,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(Mp,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var r=this.tree.root;return r?r._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var n=e.length-2;n>=0;--n)e[n+1]===e[n].right&&(++t,e[n].left&&(t+=e[n].left._count));return t},enumerable:!0}),Mp.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();t.length>0&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(Mp,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].left===t[e])return!0;return!1}}),Mp.update=function(t){var e=this._stack;if(0===e.length)throw new Error("Can't update empty node!");var r=new Array(e.length),n=e[e.length-1];r[r.length-1]=new mp(n._color,n.key,t,n.left,n.right,n._count);for(var a=e.length-2;a>=0;--a)(n=e[a]).left===e[a+1]?r[a]=new mp(n._color,n.key,n.value,r[a+1],n.right,n._count):r[a]=new mp(n._color,n.key,n.value,n.left,r[a+1],n._count);return new _p(this.tree._compare,r[0])},Mp.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();t.length>0&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(Mp,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].right===t[e])return!0;return!1}});var Ep=function(t,e){var r,n,a,i;if(e[0][0]<e[1][0])r=e[0],n=e[1];else{if(!(e[0][0]>e[1][0]))return Cp(e,t);r=e[1],n=e[0]}if(t[0][0]<t[1][0])a=t[0],i=t[1];else{if(!(t[0][0]>t[1][0]))return-Cp(t,e);a=t[1],i=t[0]}var o=af(r,n,i),l=af(r,n,a);if(o<0){if(l<=0)return o}else if(o>0){if(l>=0)return o}else if(l)return l;if(o=af(i,a,n),l=af(i,a,r),o<0){if(l<=0)return o}else if(o>0){if(l>=0)return o}else if(l)return l;return n[0]-i[0]};function Cp(t,e){var r,n,a,i;if(e[0][0]<e[1][0])r=e[0],n=e[1];else{if(!(e[0][0]>e[1][0])){var o=Math.min(t[0][1],t[1][1]),l=Math.max(t[0][1],t[1][1]),s=Math.min(e[0][1],e[1][1]),u=Math.max(e[0][1],e[1][1]);return l<s?l-s:o>u?o-u:l-u}r=e[1],n=e[0]}t[0][1]<t[1][1]?(a=t[0],i=t[1]):(a=t[1],i=t[0]);var c=af(n,r,a);return c||((c=af(n,r,i))||i-n)}var Sp=function(t){for(var e=t.length,r=2*e,n=new Array(r),a=0;a<e;++a){var i=t[a],o=i[0][0]<i[1][0];n[2*a]=new Pp(i[0][0],i,o,a),n[2*a+1]=new Pp(i[1][0],i,!o,a)}n.sort(function(t,e){var r=t.x-e.x;return r||((r=t.create-e.create)||Math.min(t.segment[0][1],t.segment[1][1])-Math.min(e.segment[0][1],e.segment[1][1]))});for(var l=pp(Ep),s=[],u=[],c=[],a=0;a<r;){for(var f=n[a].x,h=[];a<r;){var d=n[a];if(d.x!==f)break;a+=1,d.segment[0][0]===d.x&&d.segment[1][0]===d.x?d.create&&(d.segment[0][1]<d.segment[1][1]?(h.push(new Rp(d.segment[0][1],d.index,!0,!0)),h.push(new Rp(d.segment[1][1],d.index,!1,!1))):(h.push(new Rp(d.segment[1][1],d.index,!0,!1)),h.push(new Rp(d.segment[0][1],d.index,!1,!0)))):l=d.create?l.insert(d.segment,d.index):l.remove(d.segment)}s.push(l.root),u.push(f),c.push(h)}return new Lp(s,u,c)};function Lp(t,e,r){this.slabs=t,this.coordinates=e,this.horizontal=r}function Op(t,e){return t.y-e}function Dp(t,e){for(var r=null;t;){var n,a,i=t.key;i[0][0]<i[1][0]?(n=i[0],a=i[1]):(n=i[1],a=i[0]);var o=af(n,a,e);if(o<0)t=t.left;else if(o>0)if(e[0]!==i[1][0])r=t,t=t.right;else{if(l=Dp(t.right,e))return l;t=t.left}else{if(e[0]!==i[1][0])return t;var l;if(l=Dp(t.right,e))return l;t=t.left}}return r}function Rp(t,e,r,n){this.y=t,this.index=e,this.start=r,this.closed=n}function Pp(t,e,r,n){this.x=t,this.segment=e,this.create=r,this.index=n}Lp.prototype.castUp=function(t){var e=Zd.le(this.coordinates,t[0]);if(e<0)return-1;this.slabs[e];var r=Dp(this.slabs[e],t),n=-1;if(r&&(n=r.value),this.coordinates[e]===t[0]){var a=null;if(r&&(a=r.key),e>0){var i=Dp(this.slabs[e-1],t);i&&(a?Ep(i.key,a)>0&&(a=i.key,n=i.value):(n=i.value,a=i.key))}var o=this.horizontal[e];if(o.length>0){var l=Zd.ge(o,t[1],Op);if(l<o.length){var s=o[l];if(t[1]===s.y){if(s.closed)return s.index;for(;l<o.length-1&&o[l+1].y===t[1];)if((s=o[l+=1]).closed)return s.index;if(s.y===t[1]&&!s.start){if((l+=1)>=o.length)return n;s=o[l]}}if(s.start)if(a){var u=af(a[0],a[1],[t[0],s.y]);a[0][0]>a[1][0]&&(u=-u),u>0&&(n=s.index)}else n=s.index;else s.y!==t[1]&&(n=s.index)}}}return n};var Ip=function(t){for(var e=t.length,r=[],n=[],a=0;a<e;++a)for(var i=t[a],o=i.length,l=o-1,s=0;s<o;l=s++){var u=i[l],c=i[s];u[0]===c[0]?n.push([u,c]):r.push([u,c])}if(0===r.length)return 0===n.length?Np:(f=zp(n),function(t){return f(t[0],t[1])?0:1});var f;var h=Sp(r),d=function(t,e){return function(r){var n=Zd.le(e,r[0]);if(n<0)return 1;var a=t[n];if(!a){if(!(n>0&&e[n]===r[0]))return 1;a=t[n-1]}for(var i=1;a;){var o=a.key,l=Bp(r,o[0],o[1]);if(o[0][0]<o[1][0])if(l<0)a=a.left;else{if(!(l>0))return 0;i=-1,a=a.right}else if(l>0)a=a.left;else{if(!(l<0))return 0;i=1,a=a.right}}return i}}(h.slabs,h.coordinates);return 0===n.length?d:function(t,e){return function(r){return t(r[0],r[1])?0:e(r)}}(zp(n),d)},Bp=af[3];function Fp(){return!0}function zp(t){for(var e={},r=0;r<t.length;++r){var n=t[r],a=n[0][0],i=n[0][1],o=n[1][1],l=[Math.min(i,o),Math.max(i,o)];a in e?e[a].push(l):e[a]=[l]}var s={},u=Object.keys(e);for(r=0;r<u.length;++r){var c=e[u[r]];s[u[r]]=$d(c)}return function(t){return function(e,r){var n=t[e];return!!n&&!!n.queryPoint(r,Fp)}}(s)}function Np(t){return 1}var jp=function(t,e){var r=Xd(t,e);t=r[0];for(var n=(e=r[1]).length,a=(t.length,jd(t,e.length)),i=0;i<n;++i)if(a[i].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var o=Gd(t,e);for(var l=(o=o.filter(function(t){for(var r=t.length,n=[0],a=0;a<r;++a){var i=e[t[a]],o=e[t[(a+1)%r]],l=Bc(-i[0],i[1]),s=Bc(-i[0],o[1]),u=Bc(o[0],i[1]),c=Bc(o[0],o[1]);n=Uc(n,Uc(Uc(l,s),Uc(u,c)))}return n[n.length-1]>0})).length,s=new Array(l),u=new Array(l),i=0;i<l;++i){s[i]=i;var c=new Array(l),f=o[i].map(function(t){return e[t]}),h=Ip([f]),d=0;t:for(var p=0;p<l;++p)if(c[p]=0,i!==p){for(var g=o[p],v=g.length,m=0;m<v;++m){var y=h(e[g[m]]);if(0!==y){y<0&&(c[p]=1,d+=1);continue t}}c[p]=1,d+=1}u[i]=[d,i,c]}u.sort(function(t,e){return e[0]-t[0]});for(var i=0;i<l;++i)for(var c=u[i],x=c[1],b=c[2],p=0;p<l;++p)b[p]&&(s[p]=x);for(var _=function(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=[];return e}(l),i=0;i<l;++i)_[i].push(s[i]),_[s[i]].push(i);for(var w={},A=Up(n,!1),i=0;i<l;++i)for(var g=o[i],v=g.length,p=0;p<v;++p){var M=g[p],T=g[(p+1)%v],k=Math.min(M,T)+":"+Math.max(M,T);if(k in w){var E=w[k];_[E].push(i),_[i].push(E),A[M]=A[T]=!0}else w[k]=i}function C(t){for(var e=t.length,r=0;r<e;++r)if(!A[t[r]])return!1;return!0}for(var S=[],L=Up(l,-1),i=0;i<l;++i)s[i]!==i||C(o[i])?L[i]=-1:(S.push(i),L[i]=0);var r=[];for(;S.length>0;){var O=S.pop(),D=_[O];sl(D,function(t,e){return t-e});var R,P=D.length,I=L[O];if(0===I){var g=o[O];R=[g]}for(var i=0;i<P;++i){var B=D[i];if(!(L[B]>=0)&&(L[B]=1^I,S.push(B),0===I)){var g=o[B];C(g)||(g.reverse(),R.push(g))}}0===I&&r.push(R)}return r};function Up(t,e){for(var r=new Array(t),n=0;n<t;++n)r[n]=e;return r}var Vp={};function Hp(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}Vp.INT_BITS=32,Vp.INT_MAX=2147483647,Vp.INT_MIN=-1<<31,Vp.sign=function(t){return(t>0)-(t<0)},Vp.abs=function(t){var e=t>>31;return(t^e)-e},Vp.min=function(t,e){return e^(t^e)&-(t<e)},Vp.max=function(t,e){return t^(t^e)&-(t<e)},Vp.isPow2=function(t){return!(t&t-1||!t)},Vp.log2=function(t){var e,r;return e=(t>65535)<<4,e|=r=((t>>>=e)>255)<<3,e|=r=((t>>>=r)>15)<<2,(e|=r=((t>>>=r)>3)<<1)|(t>>>=r)>>1},Vp.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},Vp.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},Vp.countTrailingZeros=Hp,Vp.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},Vp.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},Vp.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var qp=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,a=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--a;t[e]=n<<a&255}}(qp),Vp.reverse=function(t){return qp[255&t]<<24|qp[t>>>8&255]<<16|qp[t>>>16&255]<<8|qp[t>>>24&255]},Vp.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},Vp.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},Vp.interleave3=function(t,e,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},Vp.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},Vp.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>Hp(t)+1};var Gp=Xp;function Xp(t){this.roots=new Array(t),this.ranks=new Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}Xp.prototype.length=function(){return this.roots.length},Xp.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},Xp.prototype.find=function(t){for(var e=this.roots;e[t]!==t;){var r=e[t];e[t]=e[r],t=r}return t},Xp.prototype.link=function(t,e){var r=this.find(t),n=this.find(e);if(r!==n){var a=this.ranks,i=this.roots,o=a[r],l=a[n];o<l?i[r]=n:l<o?i[n]=r:(i[n]=r,++a[r])}};var Yp={};function Wp(t,e){var r=t.length,n=t.length-e.length,a=Math.min;if(n)return n;switch(r){case 0:return 0;case 1:return t[0]-e[0];case 2:return(l=t[0]+t[1]-e[0]-e[1])||a(t[0],t[1])-a(e[0],e[1]);case 3:var i=t[0]+t[1],o=e[0]+e[1];if(l=i+t[2]-(o+e[2]))return l;var l,s=a(t[0],t[1]),u=a(e[0],e[1]);return(l=a(s,t[2])-a(u,e[2]))||a(s+t[2],i)-a(u+e[2],o);default:var c=t.slice(0);c.sort();var f=e.slice(0);f.sort();for(var h=0;h<r;++h)if(n=c[h]-f[h])return n;return 0}}function Zp(t,e){return Wp(t[0],e[0])}function Jp(t,e){if(e){for(var r=t.length,n=new Array(r),a=0;a<r;++a)n[a]=[t[a],e[a]];n.sort(Zp);for(a=0;a<r;++a)t[a]=n[a][0],e[a]=n[a][1];return t}return t.sort(Wp),t}function Qp(t){if(0===t.length)return[];for(var e=1,r=t.length,n=1;n<r;++n){var a=t[n];if(Wp(a,t[n-1])){if(n===e){e++;continue}t[e++]=a}}return t.length=e,t}function $p(t,e){for(var r=0,n=t.length-1,a=-1;r<=n;){var i=r+n>>1,o=Wp(t[i],e);o<=0?(0===o&&(a=i),r=i+1):o>0&&(n=i-1)}return a}function Kp(t,e){for(var r=new Array(t.length),n=0,a=r.length;n<a;++n)r[n]=[];for(var i=[],o=(n=0,e.length);n<o;++n)for(var l=e[n],s=l.length,u=1,c=1<<s;u<c;++u){i.length=Vp.popCount(u);for(var f=0,h=0;h<s;++h)u&1<<h&&(i[f++]=l[h]);var d=$p(t,i);if(!(d<0))for(;r[d++].push(n),!(d>=t.length||0!==Wp(t[d],i)););}return r}function tg(t,e){if(e<0)return[];for(var r=[],n=(1<<e+1)-1,a=0;a<t.length;++a)for(var i=t[a],o=n;o<1<<i.length;o=Vp.nextCombination(o)){for(var l=new Array(e+1),s=0,u=0;u<i.length;++u)o&1<<u&&(l[s++]=i[u]);r.push(l)}return Jp(r)}Yp.dimension=function(t){for(var e=0,r=Math.max,n=0,a=t.length;n<a;++n)e=r(e,t[n].length);return e-1},Yp.countVertices=function(t){for(var e=-1,r=Math.max,n=0,a=t.length;n<a;++n)for(var i=t[n],o=0,l=i.length;o<l;++o)e=r(e,i[o]);return e+1},Yp.cloneCells=function(t){for(var e=new Array(t.length),r=0,n=t.length;r<n;++r)e[r]=t[r].slice(0);return e},Yp.compareCells=Wp,Yp.normalize=Jp,Yp.unique=Qp,Yp.findCell=$p,Yp.incidence=Kp,Yp.dual=function(t,e){if(!e)return Kp(Qp(tg(t,0)),t);for(var r=new Array(e),n=0;n<e;++n)r[n]=[];n=0;for(var a=t.length;n<a;++n)for(var i=t[n],o=0,l=i.length;o<l;++o)r[i[o]].push(n);return r},Yp.explode=function(t){for(var e=[],r=0,n=t.length;r<n;++r)for(var a=t[r],i=0|a.length,o=1,l=1<<i;o<l;++o){for(var s=[],u=0;u<i;++u)o>>>u&1&&s.push(a[u]);e.push(s)}return Jp(e)},Yp.skeleton=tg,Yp.boundary=function(t){for(var e=[],r=0,n=t.length;r<n;++r)for(var a=t[r],i=0,o=a.length;i<o;++i){for(var l=new Array(a.length-1),s=0,u=0;s<o;++s)s!==i&&(l[u++]=a[s]);e.push(l)}return Jp(e)},Yp.connectedComponents=function(t,e){return e?function(t,e){for(var r=new Gp(e),n=0;n<t.length;++n)for(var a=t[n],i=0;i<a.length;++i)for(var o=i+1;o<a.length;++o)r.link(a[i],a[o]);var l=[],s=r.ranks;for(n=0;n<s.length;++n)s[n]=-1;for(n=0;n<t.length;++n){var u=r.find(t[n][0]);s[u]<0?(s[u]=l.length,l.push([t[n].slice(0)])):l[s[u]].push(t[n].slice(0))}return l}(t,e):function(t){for(var e=Qp(Jp(tg(t,0))),r=new Gp(e.length),n=0;n<t.length;++n)for(var a=t[n],i=0;i<a.length;++i)for(var o=$p(e,[a[i]]),l=i+1;l<a.length;++l)r.link(o,$p(e,[a[l]]));var s=[],u=r.ranks;for(n=0;n<u.length;++n)u[n]=-1;for(n=0;n<t.length;++n){var c=r.find($p(e,[t[n][0]]));u[c]<0?(u[c]=s.length,s.push([t[n].slice(0)])):s[u[c]].push(t[n].slice(0))}return s}(t)};var eg=function(t,e,r){for(var n=e.length,a=t.length,i=new Array(n),o=new Array(n),l=new Array(n),s=new Array(n),u=0;u<n;++u)i[u]=o[u]=-1,l[u]=1/0,s[u]=!1;for(var u=0;u<a;++u){var c=t[u];if(2!==c.length)throw new Error("Input must be a graph");var f=c[1],h=c[0];-1!==o[h]?o[h]=-2:o[h]=f,-1!==i[f]?i[f]=-2:i[f]=h}function d(t){if(s[t])return 1/0;var r,n,a,l,u,c=i[t],f=o[t];return c<0||f<0?1/0:(r=e[t],n=e[c],a=e[f],l=Math.abs(af(r,n,a)),u=Math.sqrt(Math.pow(n[0]-a[0],2)+Math.pow(n[1]-a[1],2)),l/u)}function p(t,e){var r=w[t],n=w[e];w[t]=n,w[e]=r,A[r]=e,A[n]=t}function g(t){return l[w[t]]}function v(t){return 1&t?t-1>>1:(t>>1)-1}function m(t){for(var e=g(t);;){var r=e,n=2*t+1,a=2*(t+1),i=t;if(n<T){var o=g(n);o<r&&(i=n,r=o)}if(a<T){var l=g(a);l<r&&(i=a)}if(i===t)return t;p(t,i),t=i}}function y(t){for(var e=g(t);t>0;){var r=v(t);if(r>=0){var n=g(r);if(e<n){p(t,r),t=r;continue}}return t}}function x(){if(T>0){var t=w[0];return p(0,T-1),T-=1,m(0),t}return-1}function b(t,e){var r=w[t];return l[r]===e?t:(l[r]=-1/0,y(t),x(),l[r]=e,y((T+=1)-1))}function _(t){if(!s[t]){s[t]=!0;var e=i[t],r=o[t];i[r]>=0&&(i[r]=e),o[e]>=0&&(o[e]=r),A[e]>=0&&b(A[e],d(e)),A[r]>=0&&b(A[r],d(r))}}for(var w=[],A=new Array(n),u=0;u<n;++u){var M=l[u]=d(u);M<1/0?(A[u]=w.length,w.push(u)):A[u]=-1}for(var T=w.length,u=T>>1;u>=0;--u)m(u);for(;;){var k=x();if(k<0||l[k]>r)break;_(k)}for(var E=[],u=0;u<n;++u)s[u]||(A[u]=E.length,E.push(e[u].slice()));E.length;function C(t,e){if(t[e]<0)return e;var r=e,n=e;do{var a=t[n];if(!s[n]||a<0||a===n)break;if(a=t[n=a],!s[n]||a<0||a===n)break;n=a,r=t[r]}while(r!==n);for(var i=e;i!==n;i=t[i])t[i]=n;return n}var S=[];return t.forEach(function(t){var e=C(i,t[0]),r=C(o,t[1]);if(e>=0&&r>=0&&e!==r){var n=A[e],a=A[r];n!==a&&S.push([n,a])}}),Yp.unique(Yp.normalize(S)),{positions:E,edges:S}};var rg=function(t){function e(t){throw new Error("ndarray-extract-contour: "+t)}"object"!=typeof t&&e("Must specify arguments");var r=t.order;Array.isArray(r)||e("Must specify order");var n=t.arrayArguments||1;n<1&&e("Must have at least one array argument");var a=t.scalarArguments||0;a<0&&e("Scalar arg count must be > 0");"function"!=typeof t.vertex&&e("Must specify vertex creation function");"function"!=typeof t.cell&&e("Must specify cell creation function");"function"!=typeof t.phase&&e("Must specify phase function");for(var i=t.getters||[],o=new Array(n),l=0;l<n;++l)i.indexOf(l)>=0?o[l]=!0:o[l]=!1;return function(t,e,r,n,a,i){var o=i.length,l=a.length;if(l<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var s="extractContour"+a.join("_"),u=[],c=[],f=[],h=0;h<o;++h)f.push(ng(h));for(var h=0;h<n;++h)f.push(ug(h));for(var h=0;h<l;++h)c.push(og(h)+"="+ng(0)+".shape["+h+"]|0");for(var h=0;h<o;++h){c.push(ag(h)+"="+ng(h)+".data",sg(h)+"="+ng(h)+".offset|0");for(var d=0;d<l;++d)c.push(lg(h,d)+"="+ng(h)+".stride["+d+"]|0")}for(var h=0;h<o;++h){c.push(cg(h)+"="+sg(h)),c.push(ig(h,0));for(var d=1;d<1<<l;++d){for(var p=[],g=0;g<l;++g)d&1<<g&&p.push("-"+lg(h,g));c.push(fg(h,d)+"=("+p.join("")+")|0"),c.push(ig(h,d)+"=0")}}for(var h=0;h<o;++h)for(var d=0;d<l;++d){var v=[lg(h,a[d])];d>0&&v.push(lg(h,a[d-1])+"*"+og(a[d-1])),c.push(dg(h,a[d])+"=("+v.join("-")+")|0")}for(var h=0;h<l;++h)c.push(hg(h)+"=0");c.push(bg+"=0");for(var m=["2"],h=l-2;h>=0;--h)m.push(og(a[h]));c.push(_g+"=("+m.join("*")+")|0",xg+"=mallocUint32("+_g+")",yg+"=mallocUint32("+_g+")",wg+"=0"),c.push(pg(0)+"=0");for(var d=1;d<1<<l;++d){for(var y=[],x=[],g=0;g<l;++g)d&1<<g&&(0===x.length?y.push("1"):y.unshift(x.join("*"))),x.push(og(a[g]));var b="";y[0].indexOf(og(a[l-2]))<0&&(b="-");var _=Mg(l,d,a);c.push(vg(_)+"=(-"+y.join("-")+")|0",gg(_)+"=("+b+y.join("-")+")|0",pg(_)+"=0")}function w(t,e){u.push("for(",hg(a[t]),"=",e,";",hg(a[t]),"<",og(a[t]),";","++",hg(a[t]),"){")}function A(t){for(var e=0;e<o;++e)u.push(cg(e),"+=",dg(e,a[t]),";");u.push("}")}function M(){for(var t=1;t<1<<l;++t)u.push(Ag,"=",vg(t),";",vg(t),"=",gg(t),";",gg(t),"=",Ag,";")}c.push(mg(0)+"=0",Ag+"=0"),function t(e,r){if(e<0)return void function(t){for(var e=0;e<o;++e)i[e]?u.push(ig(e,0),"=",ag(e),".get(",cg(e),");"):u.push(ig(e,0),"=",ag(e),"[",cg(e),"];");for(var r=[],e=0;e<o;++e)r.push(ig(e,0));for(var e=0;e<n;++e)r.push(ug(e));u.push(pg(0),"=",xg,"[",wg,"]=phase(",r.join(),");");for(var a=1;a<1<<l;++a)u.push(pg(a),"=",xg,"[",wg,"+",vg(a),"];");for(var s=[],a=1;a<1<<l;++a)s.push("("+pg(0)+"!=="+pg(a)+")");u.push("if(",s.join("||"),"){");for(var c=[],e=0;e<l;++e)c.push(hg(e));for(var e=0;e<o;++e){c.push(ig(e,0));for(var a=1;a<1<<l;++a)i[e]?u.push(ig(e,a),"=",ag(e),".get(",cg(e),"+",fg(e,a),");"):u.push(ig(e,a),"=",ag(e),"[",cg(e),"+",fg(e,a),"];"),c.push(ig(e,a))}for(var e=0;e<1<<l;++e)c.push(pg(e));for(var e=0;e<n;++e)c.push(ug(e));u.push("vertex(",c.join(),");",mg(0),"=",yg,"[",wg,"]=",bg,"++;");for(var f=(1<<l)-1,h=pg(f),a=0;a<l;++a)if(0==(t&~(1<<a))){for(var d=f^1<<a,p=pg(d),g=[],v=d;v>0;v=v-1&d)g.push(yg+"["+wg+"+"+vg(v)+"]");g.push(mg(0));for(var v=0;v<o;++v)1&a?g.push(ig(v,f),ig(v,d)):g.push(ig(v,d),ig(v,f));1&a?g.push(h,p):g.push(p,h);for(var v=0;v<n;++v)g.push(ug(v));u.push("if(",h,"!==",p,"){","face(",g.join(),")}")}u.push("}",wg,"+=1;")}(r);!function(t){for(var e=t-1;e>=0;--e)w(e,0);for(var r=[],e=0;e<o;++e)i[e]?r.push(ag(e)+".get("+cg(e)+")"):r.push(ag(e)+"["+cg(e)+"]");for(var e=0;e<n;++e)r.push(ug(e));u.push(xg,"[",wg,"++]=phase(",r.join(),");");for(var e=0;e<t;++e)A(e);for(var l=0;l<o;++l)u.push(cg(l),"+=",dg(l,a[t]),";")}(e);u.push("if(",og(a[e]),">0){",hg(a[e]),"=1;");t(e-1,r|1<<a[e]);for(var s=0;s<o;++s)u.push(cg(s),"+=",dg(s,a[e]),";");e===l-1&&(u.push(wg,"=0;"),M());w(e,2);t(e-1,r);e===l-1&&(u.push("if(",hg(a[l-1]),"&1){",wg,"=0;}"),M());A(e);u.push("}")}(l-1,0),u.push("freeUint32(",yg,");freeUint32(",xg,");");var T=["'use strict';","function ",s,"(",f.join(),"){","var ",c.join(),";",u.join(""),"}","return ",s].join("");return new Function("vertex","face","phase","mallocUint32","freeUint32",T)(t,e,r,Ds.mallocUint32,Ds.freeUint32)}(t.vertex,t.cell,t.phase,a,r,o)};function ng(t){return"a"+t}function ag(t){return"d"+t}function ig(t,e){return"c"+t+"_"+e}function og(t){return"s"+t}function lg(t,e){return"t"+t+"_"+e}function sg(t){return"o"+t}function ug(t){return"x"+t}function cg(t){return"p"+t}function fg(t,e){return"d"+t+"_"+e}function hg(t){return"i"+t}function dg(t,e){return"u"+t+"_"+e}function pg(t){return"b"+t}function gg(t){return"y"+t}function vg(t){return"e"+t}function mg(t){return"v"+t}var yg="V",xg="P",bg="N",_g="Q",wg="X",Ag="T";function Mg(t,e,r){for(var n=0,a=0;a<t;++a)e&1<<a&&(n|=1<<r[a]);return n}var Tg={},kg=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],Eg=607/128,Cg=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function Sg(t){if(t<0)return Number("0/0");for(var e=Cg[0],r=Cg.length-1;r>0;--r)e+=Cg[r]/(t+r);var n=t+Eg+.5;return.5*Math.log(2*Math.PI)+(t+.5)*Math.log(n)-n+Math.log(e)-Math.log(t)}(Tg=function t(e){if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*t(1-e));if(e>100)return Math.exp(Sg(e));e-=1;for(var r=kg[0],n=1;n<9;n++)r+=kg[n]/(e+n);var a=e+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(a,e+.5)*Math.exp(-a)*r}).log=Sg;var Lg=function(t){var e=t.length;if(e<Og){for(var r=1,n=0;n<e;++n)for(var a=0;a<n;++a)if(t[n]<t[a])r=-r;else if(t[n]===t[a])return 0;return r}for(var i=Ds.mallocUint8(e),n=0;n<e;++n)i[n]=0;for(var r=1,n=0;n<e;++n)if(!i[n]){var o=1;i[n]=1;for(var a=t[n];a!==n;a=t[a]){if(i[a])return Ds.freeUint8(i),0;o+=1,i[a]=1}1&o||(r=-r)}return Ds.freeUint8(i),r},Og=32;var Dg=function(t,e){e=e||new Array(t.length);for(var r=0;r<t.length;++r)e[t[r]]=r;return e},Rg={};Rg.rank=function(t){var e=t.length;switch(e){case 0:case 1:return 0;case 2:return t[1]}var r,n,a,i=Ds.mallocUint32(e),o=Ds.mallocUint32(e),l=0;for(Dg(t,o),a=0;a<e;++a)i[a]=t[a];for(a=e-1;a>0;--a)n=o[a],r=i[a],i[a]=i[n],i[n]=r,o[a]=o[r],o[r]=n,l=(l+r)*a;return Ds.freeUint32(o),Ds.freeUint32(i),l},Rg.unrank=function(t,e,r){switch(t){case 0:return r||[];case 1:return r?(r[0]=0,r):[0];case 2:return r?(e?(r[0]=0,r[1]=1):(r[0]=1,r[1]=0),r):e?[0,1]:[1,0]}var n,a,i,o=1;for((r=r||new Array(t))[0]=0,i=1;i<t;++i)r[i]=i,o=o*i|0;for(i=t-1;i>0;--i)e=e-(n=e/o|0)*o|0,o=o/i|0,a=0|r[i],r[i]=0|r[n],r[n]=0|a;return r};var Pg=function(t){if(t<0)return[];if(0===t)return[[0]];for(var e=0|Math.round(Tg(t+1)),r=[],n=0;n<e;++n){for(var a=Rg.unrank(t,n),i=[0],o=0,l=0;l<a.length;++l)o+=1<<a[l],i.push(o);Lg(a)<1&&(i[0]=o,i[t]=0),r.push(i)}return r};var Ig=dl({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"}),Bg=function(t,e){var r=[];return e=+e||0,Ig(t.hi(t.shape[0]-1),r,e),r};var Fg=function(t,e){if(t.dimension<=0)return{positions:[],cells:[]};if(1===t.dimension)return function(t,e){for(var r=Bg(t,e),n=r.length,a=new Array(n),i=new Array(n),o=0;o<n;++o)a[o]=[r[o]],i[o]=[o];return{positions:a,cells:i}}(t,e);var r=t.order.join()+"-"+t.dtype,n=zg[r],e=+e||0;n||(n=zg[r]=function(t,e){var r=t.length,n=["'use strict';"],a="surfaceNets"+t.join("_")+"d"+e;n.push("var contour=genContour({","order:[",t.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===e&&n.push("getters:[0],");for(var i=[],o=[],l=0;l<r;++l)i.push("d"+l),o.push("d"+l);for(var l=0;l<1<<r;++l)i.push("v"+l),o.push("v"+l);for(var l=0;l<1<<r;++l)i.push("p"+l),o.push("p"+l);i.push("a","b","c"),o.push("a","c"),n.push("vertex:function vertexFunc(",i.join(),"){");for(var s=[],l=0;l<1<<r;++l)s.push("(p"+l+"<<"+l+")");n.push("var m=(",s.join("+"),")|0;if(m===0||m===",(1<<(1<<r))-1,"){return}");var u=[],c=[];1<<(1<<r)<=128?(n.push("switch(m){"),c=n):n.push("switch(m>>>7){");for(var l=0;l<1<<(1<<r);++l){if(1<<(1<<r)>128&&l%128==0){u.length>0&&c.push("}}");var f="vExtra"+u.length;n.push("case ",l>>>7,":",f,"(m&0x7f,",o.join(),");break;"),c=["function ",f,"(m,",o.join(),"){switch(m){"],u.push(c)}c.push("case ",127&l,":");for(var h=new Array(r),d=new Array(r),p=new Array(r),g=new Array(r),v=0,m=0;m<r;++m)h[m]=[],d[m]=[],p[m]=0,g[m]=0;for(var m=0;m<1<<r;++m)for(var y=0;y<r;++y){var x=m^1<<y;if(!(x>m)&&!(l&1<<x)!=!(l&1<<m)){var b=1;l&1<<x?d[y].push("v"+x+"-v"+m):(d[y].push("v"+m+"-v"+x),b=-b),b<0?(h[y].push("-v"+m+"-v"+x),p[y]+=2):(h[y].push("v"+m+"+v"+x),p[y]-=2),v+=1;for(var _=0;_<r;++_)_!==y&&(x&1<<_?g[_]+=1:g[_]-=1)}}for(var w=[],y=0;y<r;++y)if(0===h[y].length)w.push("d"+y+"-0.5");else{var A="";p[y]<0?A=p[y]+"*c":p[y]>0&&(A="+"+p[y]+"*c");var M=h[y].length/v*.5,T=.5+g[y]/v*.5;w.push("d"+y+"-"+T+"-"+M+"*("+h[y].join("+")+A+")/("+d[y].join("+")+")")}c.push("a.push([",w.join(),"]);","break;")}n.push("}},"),u.length>0&&c.push("}}");for(var k=[],l=0;l<1<<r-1;++l)k.push("v"+l);k.push("c0","c1","p0","p1","a","b","c"),n.push("cell:function cellFunc(",k.join(),"){");var E=Pg(r-1);n.push("if(p0){b.push(",E.map(function(t){return"["+t.map(function(t){return"v"+t})+"]"}).join(),")}else{b.push(",E.map(function(t){var e=t.slice();return e.reverse(),"["+e.map(function(t){return"v"+t})+"]"}).join(),")}}});function ",a,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",a,";");for(var l=0;l<u.length;++l)n.push(u[l].join(""));return new Function("genContour",n.join(""))(rg)}(t.order,t.dtype));return n(t,e)};var zg={};var Ng={};function jg(t,e,r,n){var a=function(t,e){var r=Fg(t,128);return e?eg(r.cells,r.positions,.25):{edges:r.cells,positions:r.positions}}(t,n),i=function(t,e,r){for(var n=e.textAlign||"start",a=e.textBaseline||"alphabetic",i=[1<<30,1<<30],o=[0,0],l=t.length,s=0;s<l;++s)for(var u=t[s],c=0;c<2;++c)i[c]=0|Math.min(i[c],u[c]),o[c]=0|Math.max(o[c],u[c]);var f=0;switch(n){case"center":f=-.5*(i[0]+o[0]);break;case"right":case"end":f=-o[0];break;case"left":case"start":f=-i[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+n+"'")}var h=0;switch(a){case"hanging":case"top":h=-i[1];break;case"middle":h=-.5*(i[1]+o[1]);break;case"alphabetic":case"ideographic":h=-3*r;break;case"bottom":h=-o[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+a+"'")}var d=1/r;return"lineHeight"in e?d*=+e.lineHeight:"width"in e?d=e.width/(o[0]-i[0]):"height"in e&&(d=e.height/(o[1]-i[1])),t.map(function(t){return[d*(t[0]+f),d*(t[1]+h)]})}(a.positions,e,r),o=a.edges,l="ccw"===e.orientation;if(Dd(i,o),e.polygons||e.polygon||e.polyline){for(var s=jp(o,i),u=new Array(s.length),c=0;c<s.length;++c){for(var f=s[c],h=new Array(f.length),d=0;d<f.length;++d){for(var p=f[d],g=new Array(p.length),v=0;v<p.length;++v)g[v]=i[p[v]].slice();l&&g.reverse(),h[d]=g}u[c]=h}return u}return e.triangles||e.triangulate||e.triangle?{cells:Of(i,o,{delaunay:!1,exterior:!1,interior:!0}),positions:i}:{edges:o,positions:i}}function Ug(t,e,r){try{return jg(t,e,r,!0)}catch(t){}try{return jg(t,e,r,!1)}catch(t){}return e.polygons||e.polyline||e.polygon?[]:e.triangles||e.triangulate||e.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}(Ng=function(t,e,r,n){var a=n.size||64,i=n.font||"normal";return r.font=a+"px "+i,r.textAlign="start",r.textBaseline="alphabetic",r.direction="ltr",Ug(function(t,e,r,n){var a=0|Math.ceil(e.measureText(r).width+2*n);if(a>8192)throw new Error("vectorize-text: String too long (sorry, this will get fixed later)");var i=3*n;t.height<i&&(t.height=i),e.fillStyle="#000",e.fillRect(0,0,t.width,t.height),e.fillStyle="#fff",e.fillText(r,n,2*n);var o=e.getImageData(0,0,a,i);return Rl(o.data,[i,a,4]).pick(-1,-1,0).transpose(1,0)}(e,r,t,a),n,a)}).processPixels=Ug;var Vg=function(t,e){"object"==typeof e&&null!==e||(e={});return Ng(t,e.canvas||Hg,e.context||qg,e)},Hg=null,qg=null;"undefined"!=typeof document&&((Hg=document.createElement("canvas")).width=8192,Hg.height=1024,qg=Hg.getContext("2d"));var Gg={};(function(t){"use strict";Gg=function t(e,n,a){var a=a||{};var i=r[e];i||(i=r[e]={" ":{data:new Float32Array(0),shape:.2}});var o=i[n];if(!o)if(n.length<=1||!/\d/.test(n))o=i[n]=function(t){for(var e=t.cells,r=t.positions,n=new Float32Array(6*e.length),a=0,i=0,o=0;o<e.length;++o)for(var l=e[o],s=0;s<3;++s){var u=r[l[s]];n[a++]=u[0],n[a++]=u[1]+1.4,i=Math.max(u[0],i)}return{data:n,shape:i}}(Vg(n,{triangles:!0,font:e,textAlign:a.textAlign||"left",textBaseline:"alphabetic"}));else{for(var l=n.split(/(\d|\s)/),s=new Array(l.length),u=0,c=0,f=0;f<l.length;++f)s[f]=t(e,l[f]),u+=s[f].data.length,c+=s[f].shape,f>0&&(c+=.02);for(var h=new Float32Array(u),d=0,p=-.5*c,f=0;f<s.length;++f){for(var g=s[f].data,v=0;v<g.length;v+=2)h[d++]=g[v]+p,h[d++]=g[v+1];p+=s[f].shape+.02}o=i[n]={data:h,shape:c}}return o};var e=window||t.global||{},r=e.__TEXT_CACHE||{};e.__TEXT_CACHE={}}).call(this,_c);var Xg=function(t){var e=t.gl,r=zs(e),n=Zu(e,Us.textVert,Us.textFrag);return new Yg(t,r,n)};function Yg(t,e,r){this.plot=t,this.vbo=e,this.shader=r,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var Wg=Yg.prototype;Wg.drawTicks=function(){var t=[0,0],e=[0,0],r=[0,0];return function(n){var a=this.plot,i=this.shader,o=this.tickX[n],l=this.tickOffset[n],s=a.gl,u=a.viewBox,c=a.dataBox,f=a.screenBox,h=a.pixelRatio,d=a.tickEnable,p=a.tickPad,g=a.tickColor,v=a.tickAngle,m=a.labelEnable,y=a.labelPad,x=a.labelColor,b=a.labelAngle,_=this.labelOffset[n],w=this.labelCount[n],A=oc.lt(o,c[n]),M=oc.le(o,c[n+2]);t[0]=t[1]=0,t[n]=1,e[n]=(u[2+n]+u[n])/(f[2+n]-f[n])-1;var T=2/f[2+(1^n)]-f[1^n];e[1^n]=T*u[1^n]-1,d[n]&&(e[1^n]-=T*h*p[n],A<M&&l[M]>l[A]&&(i.uniforms.dataAxis=t,i.uniforms.screenOffset=e,i.uniforms.color=g[n],i.uniforms.angle=v[n],s.drawArrays(s.TRIANGLES,l[A],l[M]-l[A]))),m[n]&&w&&(e[1^n]-=T*h*y[n],i.uniforms.dataAxis=r,i.uniforms.screenOffset=e,i.uniforms.color=x[n],i.uniforms.angle=b[n],s.drawArrays(s.TRIANGLES,_,w)),e[1^n]=T*u[2+(1^n)]-1,d[n+2]&&(e[1^n]+=T*h*p[n+2],A<M&&l[M]>l[A]&&(i.uniforms.dataAxis=t,i.uniforms.screenOffset=e,i.uniforms.color=g[n+2],i.uniforms.angle=v[n+2],s.drawArrays(s.TRIANGLES,l[A],l[M]-l[A]))),m[n+2]&&w&&(e[1^n]+=T*h*y[n+2],i.uniforms.dataAxis=r,i.uniforms.screenOffset=e,i.uniforms.color=x[n+2],i.uniforms.angle=b[n+2],s.drawArrays(s.TRIANGLES,_,w))}}(),Wg.drawTitle=function(){var t=[0,0],e=[0,0];return function(){var r=this.plot,n=this.shader,a=r.gl,i=r.screenBox,o=r.titleCenter,l=r.titleAngle,s=r.titleColor,u=r.pixelRatio;if(this.titleCount){for(var c=0;c<2;++c)e[c]=2*(o[c]*u-i[c])/(i[2+c]-i[c])-1;n.bind(),n.uniforms.dataAxis=t,n.uniforms.screenOffset=e,n.uniforms.angle=l,n.uniforms.color=s,a.drawArrays(a.TRIANGLES,this.titleOffset,this.titleCount)}}}(),Wg.bind=function(){var t=[0,0],e=[0,0],r=[0,0];return function(){var n=this.plot,a=this.shader,i=n._tickBounds,o=n.dataBox,l=n.screenBox,s=n.viewBox;a.bind();for(var u=0;u<2;++u){var c=i[u],f=i[u+2]-c,h=.5*(o[u+2]+o[u]),d=o[u+2]-o[u],p=s[u],g=s[u+2]-p,v=l[u],m=l[u+2]-v;e[u]=2*f/d*g/m,t[u]=2*(c-h)/d*g/m}r[1]=2*n.pixelRatio/(l[3]-l[1]),r[0]=r[1]*(l[3]-l[1])/(l[2]-l[0]),a.uniforms.dataScale=e,a.uniforms.dataShift=t,a.uniforms.textScale=r,this.vbo.bind(),a.attributes.textCoordinate.pointer()}}(),Wg.update=function(t){var e,r,n,a,i,o=[],l=t.ticks,s=t.bounds;for(i=0;i<2;++i){var u=[Math.floor(o.length/3)],c=[-1/0],f=l[i];for(e=0;e<f.length;++e){var h=f[e],d=h.x,p=h.text,g=h.font||"sans-serif";a=h.fontSize||12;for(var v=1/(s[i+2]-s[i]),m=s[i],y=p.split("\n"),x=0;x<y.length;x++)for(n=Gg(g,y[x]).data,r=0;r<n.length;r+=2)o.push(n[r]*a,-n[r+1]*a-x*a*1.2,(d-m)*v);u.push(Math.floor(o.length/3)),c.push(d)}this.tickOffset[i]=u,this.tickX[i]=c}for(i=0;i<2;++i){for(this.labelOffset[i]=Math.floor(o.length/3),n=Gg(t.labelFont[i],t.labels[i],{textAlign:"center"}).data,a=t.labelSize[i],e=0;e<n.length;e+=2)o.push(n[e]*a,-n[e+1]*a,0);this.labelCount[i]=Math.floor(o.length/3)-this.labelOffset[i]}for(this.titleOffset=Math.floor(o.length/3),n=Gg(t.titleFont,t.title).data,a=t.titleSize,e=0;e<n.length;e+=2)o.push(n[e]*a,-n[e+1]*a,0);this.titleCount=Math.floor(o.length/3)-this.titleOffset,this.vbo.update(o)},Wg.dispose=function(){this.vbo.dispose(),this.shader.dispose()};var Zg=dl,Jg=function(t){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");Qg||function(t){Qg=[t.LINEAR,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_NEAREST],$g=[t.NEAREST,t.LINEAR,t.NEAREST_MIPMAP_NEAREST,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_LINEAR],Kg=[t.REPEAT,t.CLAMP_TO_EDGE,t.MIRRORED_REPEAT]}(t);if("number"==typeof arguments[1])return lv(t,arguments[1],arguments[2],arguments[3]||t.RGBA,arguments[4]||t.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return lv(t,0|arguments[1][0],0|arguments[1][1],arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var e=arguments[1],r=tv(e)?e:e.raw;if(r)return function(t,e,r,n,a,i){var o=ov(t);return t.texImage2D(t.TEXTURE_2D,0,a,a,i,e),new nv(t,o,r,n,a,i)}(t,r,0|e.width,0|e.height,arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if(e.shape&&e.data&&e.stride)return function(t,e){var r=e.dtype,n=e.shape.slice(),a=t.getParameter(t.MAX_TEXTURE_SIZE);if(n[0]<0||n[0]>a||n[1]<0||n[1]>a)throw new Error("gl-texture2d: Invalid texture size");var i=iv(n,e.stride.slice()),o=0;"float32"===r?o=t.FLOAT:"float64"===r?(o=t.FLOAT,i=!1,r="float32"):"uint8"===r?o=t.UNSIGNED_BYTE:(o=t.UNSIGNED_BYTE,i=!1,r="uint8");var l,s,u=0;if(2===n.length)u=t.LUMINANCE,n=[n[0],n[1],1],e=Rl(e.data,n,[e.stride[0],e.stride[1],1],e.offset);else{if(3!==n.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===n[2])u=t.ALPHA;else if(2===n[2])u=t.LUMINANCE_ALPHA;else if(3===n[2])u=t.RGB;else{if(4!==n[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");u=t.RGBA}}o!==t.FLOAT||t.getExtension("OES_texture_float")||(o=t.UNSIGNED_BYTE,i=!1);var c=e.size;if(i)l=0===e.offset&&e.data.length===c?e.data:e.data.subarray(e.offset,e.offset+c);else{var f=[n[2],n[2]*n[0],1];s=Ds.malloc(c,r);var h=Rl(s,n,f,0);"float32"!==r&&"float64"!==r||o!==t.UNSIGNED_BYTE?pl.assign(h,e):ev(h,e),l=s.subarray(0,c)}var d=ov(t);t.texImage2D(t.TEXTURE_2D,0,u,n[0],n[1],0,u,o,l),i||Ds.free(s);return new nv(t,d,n[0],n[1],u,o)}(t,e)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")},Qg=null,$g=null,Kg=null;function tv(t){return"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&t instanceof ImageData}var ev=function(t,e){pl.muls(t,e,255)};function rv(t,e,r){var n=t.gl,a=n.getParameter(n.MAX_TEXTURE_SIZE);if(e<0||e>a||r<0||r>a)throw new Error("gl-texture2d: Invalid texture size");return t._shape=[e,r],t.bind(),n.texImage2D(n.TEXTURE_2D,0,t.format,e,r,0,t.format,t.type,null),t._mipLevels=[0],t}function nv(t,e,r,n,a,i){this.gl=t,this.handle=e,this.format=a,this.type=i,this._shape=[r,n],this._mipLevels=[0],this._magFilter=t.NEAREST,this._minFilter=t.NEAREST,this._wrapS=t.CLAMP_TO_EDGE,this._wrapT=t.CLAMP_TO_EDGE,this._anisoSamples=1;var o=this,l=[this._wrapS,this._wrapT];Object.defineProperties(l,[{get:function(){return o._wrapS},set:function(t){return o.wrapS=t}},{get:function(){return o._wrapT},set:function(t){return o.wrapT=t}}]),this._wrapVector=l;var s=[this._shape[0],this._shape[1]];Object.defineProperties(s,[{get:function(){return o._shape[0]},set:function(t){return o.width=t}},{get:function(){return o._shape[1]},set:function(t){return o.height=t}}]),this._shapeVector=s}var av=nv.prototype;function iv(t,e){return 3===t.length?1===e[2]&&e[1]===t[0]*t[2]&&e[0]===t[2]:1===e[0]&&e[1]===t[0]}function ov(t){var e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e}function lv(t,e,r,n,a){var i=t.getParameter(t.MAX_TEXTURE_SIZE);if(e<0||e>i||r<0||r>i)throw new Error("gl-texture2d: Invalid texture shape");if(a===t.FLOAT&&!t.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var o=ov(t);return t.texImage2D(t.TEXTURE_2D,0,n,e,r,0,n,a,null),new nv(t,o,e,r,n,a)}Object.defineProperties(av,{minFilter:{get:function(){return this._minFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&Qg.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),$g.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t),this._minFilter=t}},magFilter:{get:function(){return this._magFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&Qg.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),$g.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t),this._magFilter=t}},mipSamples:{get:function(){return this._anisoSamples},set:function(t){var e=this._anisoSamples;if(this._anisoSamples=0|Math.max(t,1),e!==this._anisoSamples){var r=this.gl.getExtension("EXT_texture_filter_anisotropic");r&&this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(t){if(this.bind(),Kg.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,t),this._wrapS=t}},wrapT:{get:function(){return this._wrapT},set:function(t){if(this.bind(),Kg.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,t),this._wrapT=t}},wrap:{get:function(){return this._wrapVector},set:function(t){if(Array.isArray(t)||(t=[t,t]),2!==t.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var e=0;e<2;++e)if(Kg.indexOf(t[e])<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);this._wrapS=t[0],this._wrapT=t[1];var r=this.gl;return this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT),t}},shape:{get:function(){return this._shapeVector},set:function(t){if(Array.isArray(t)){if(2!==t.length)throw new Error("gl-texture2d: Invalid texture shape")}else t=[0|t,0|t];return rv(this,0|t[0],0|t[1]),[0|t[0],0|t[1]]}},width:{get:function(){return this._shape[0]},set:function(t){return rv(this,t|=0,this._shape[1]),t}},height:{get:function(){return this._shape[1]},set:function(t){return t|=0,rv(this,this._shape[0],t),t}}}),av.bind=function(t){var e=this.gl;return void 0!==t&&e.activeTexture(e.TEXTURE0+(0|t)),e.bindTexture(e.TEXTURE_2D,this.handle),void 0!==t?0|t:e.getParameter(e.ACTIVE_TEXTURE)-e.TEXTURE0},av.dispose=function(){this.gl.deleteTexture(this.handle)},av.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var t=Math.min(this._shape[0],this._shape[1]),e=0;t>0;++e,t>>>=1)this._mipLevels.indexOf(e)<0&&this._mipLevels.push(e)},av.setPixels=function(t,e,r,n){var a=this.gl;this.bind(),Array.isArray(e)?(n=r,r=0|e[1],e=0|e[0]):(e=e||0,r=r||0),n=n||0;var i=tv(t)?t:t.raw;if(i){this._mipLevels.indexOf(n)<0?(a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,this.type,i),this._mipLevels.push(n)):a.texSubImage2D(a.TEXTURE_2D,n,e,r,this.format,this.type,i)}else{if(!(t.shape&&t.stride&&t.data))throw new Error("gl-texture2d: Unsupported data type");if(t.shape.length<2||e+t.shape[1]>this._shape[1]>>>n||r+t.shape[0]>this._shape[0]>>>n||e<0||r<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(t,e,r,n,a,i,o,l){var s=l.dtype,u=l.shape.slice();if(u.length<2||u.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var c=0,f=0,h=iv(u,l.stride.slice());"float32"===s?c=t.FLOAT:"float64"===s?(c=t.FLOAT,h=!1,s="float32"):"uint8"===s?c=t.UNSIGNED_BYTE:(c=t.UNSIGNED_BYTE,h=!1,s="uint8");if(2===u.length)f=t.LUMINANCE,u=[u[0],u[1],1],l=Rl(l.data,u,[l.stride[0],l.stride[1],1],l.offset);else{if(3!==u.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===u[2])f=t.ALPHA;else if(2===u[2])f=t.LUMINANCE_ALPHA;else if(3===u[2])f=t.RGB;else{if(4!==u[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");f=t.RGBA}u[2]}f!==t.LUMINANCE&&f!==t.ALPHA||a!==t.LUMINANCE&&a!==t.ALPHA||(f=a);if(f!==a)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var d=l.size,p=o.indexOf(n)<0;p&&o.push(n);if(c===i&&h)0===l.offset&&l.data.length===d?p?t.texImage2D(t.TEXTURE_2D,n,a,u[0],u[1],0,a,i,l.data):t.texSubImage2D(t.TEXTURE_2D,n,e,r,u[0],u[1],a,i,l.data):p?t.texImage2D(t.TEXTURE_2D,n,a,u[0],u[1],0,a,i,l.data.subarray(l.offset,l.offset+d)):t.texSubImage2D(t.TEXTURE_2D,n,e,r,u[0],u[1],a,i,l.data.subarray(l.offset,l.offset+d));else{var g;g=i===t.FLOAT?Ds.mallocFloat32(d):Ds.mallocUint8(d);var v=Rl(g,u,[u[2],u[2]*u[0],1]);c===t.FLOAT&&i===t.UNSIGNED_BYTE?ev(v,l):pl.assign(v,l),p?t.texImage2D(t.TEXTURE_2D,n,a,u[0],u[1],0,a,i,g.subarray(0,d)):t.texSubImage2D(t.TEXTURE_2D,n,e,r,u[0],u[1],a,i,g.subarray(0,d)),i===t.FLOAT?Ds.freeFloat32(g):Ds.freeUint8(g)}}(a,e,r,n,this.format,this.type,this._mipLevels,t)}};var sv,uv,cv,fv,hv=function(t,e,r,n){sv||(sv=t.FRAMEBUFFER_UNSUPPORTED,uv=t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,cv=t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,fv=t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var a=t.getExtension("WEBGL_draw_buffers");!dv&&a&&function(t,e){var r=t.getParameter(e.MAX_COLOR_ATTACHMENTS_WEBGL);dv=new Array(r+1);for(var n=0;n<=r;++n){for(var a=new Array(r),i=0;i<n;++i)a[i]=t.COLOR_ATTACHMENT0+i;for(var i=n;i<r;++i)a[i]=t.NONE;dv[n]=a}}(t,a);Array.isArray(e)&&(n=r,r=0|e[1],e=0|e[0]);if("number"!=typeof e)throw new Error("gl-fbo: Missing shape parameter");var i=t.getParameter(t.MAX_RENDERBUFFER_SIZE);if(e<0||e>i||r<0||r>i)throw new Error("gl-fbo: Parameters are too large for FBO");var o=1;if("color"in(n=n||{})){if((o=Math.max(0|n.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(o>1){if(!a)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(o>t.getParameter(a.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+o+" draw buffers")}}var l=t.UNSIGNED_BYTE,s=t.getExtension("OES_texture_float");if(n.float&&o>0){if(!s)throw new Error("gl-fbo: Context does not support floating point textures");l=t.FLOAT}else n.preferFloat&&o>0&&s&&(l=t.FLOAT);var u=!0;"depth"in n&&(u=!!n.depth);var c=!1;"stencil"in n&&(c=!!n.stencil);return new xv(t,e,r,l,o,u,c,a)},dv=null;function pv(t){return[t.getParameter(t.FRAMEBUFFER_BINDING),t.getParameter(t.RENDERBUFFER_BINDING),t.getParameter(t.TEXTURE_BINDING_2D)]}function gv(t,e){t.bindFramebuffer(t.FRAMEBUFFER,e[0]),t.bindRenderbuffer(t.RENDERBUFFER,e[1]),t.bindTexture(t.TEXTURE_2D,e[2])}function vv(t){switch(t){case sv:throw new Error("gl-fbo: Framebuffer unsupported");case uv:throw new Error("gl-fbo: Framebuffer incomplete attachment");case cv:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case fv:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function mv(t,e,r,n,a,i){if(!n)return null;var o=Jg(t,e,r,a,n);return o.magFilter=t.NEAREST,o.minFilter=t.NEAREST,o.mipSamples=1,o.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,i,t.TEXTURE_2D,o.handle,0),o}function yv(t,e,r,n,a){var i=t.createRenderbuffer();return t.bindRenderbuffer(t.RENDERBUFFER,i),t.renderbufferStorage(t.RENDERBUFFER,n,e,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,a,t.RENDERBUFFER,i),i}function xv(t,e,r,n,a,i,o,l){this.gl=t,this._shape=[0|e,0|r],this._destroyed=!1,this._ext=l,this.color=new Array(a);for(var s=0;s<a;++s)this.color[s]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=n,this._useDepth=i,this._useStencil=o;var u=this,c=[0|e,0|r];Object.defineProperties(c,{0:{get:function(){return u._shape[0]},set:function(t){return u.width=t}},1:{get:function(){return u._shape[1]},set:function(t){return u.height=t}}}),this._shapeVector=c,function(t){var e=pv(t.gl),r=t.gl,n=t.handle=r.createFramebuffer(),a=t._shape[0],i=t._shape[1],o=t.color.length,l=t._ext,s=t._useStencil,u=t._useDepth,c=t._colorType;r.bindFramebuffer(r.FRAMEBUFFER,n);for(var f=0;f<o;++f)t.color[f]=mv(r,a,i,c,r.RGBA,r.COLOR_ATTACHMENT0+f);0===o?(t._color_rb=yv(r,a,i,r.RGBA4,r.COLOR_ATTACHMENT0),l&&l.drawBuffersWEBGL(dv[0])):o>1&&l.drawBuffersWEBGL(dv[o]);var h=r.getExtension("WEBGL_depth_texture");h?s?t.depth=mv(r,a,i,h.UNSIGNED_INT_24_8_WEBGL,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):u&&(t.depth=mv(r,a,i,r.UNSIGNED_SHORT,r.DEPTH_COMPONENT,r.DEPTH_ATTACHMENT)):u&&s?t._depth_rb=yv(r,a,i,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):u?t._depth_rb=yv(r,a,i,r.DEPTH_COMPONENT16,r.DEPTH_ATTACHMENT):s&&(t._depth_rb=yv(r,a,i,r.STENCIL_INDEX,r.STENCIL_ATTACHMENT));var d=r.checkFramebufferStatus(r.FRAMEBUFFER);if(d!==r.FRAMEBUFFER_COMPLETE){for(t._destroyed=!0,r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(t.handle),t.handle=null,t.depth&&(t.depth.dispose(),t.depth=null),t._depth_rb&&(r.deleteRenderbuffer(t._depth_rb),t._depth_rb=null),f=0;f<t.color.length;++f)t.color[f].dispose(),t.color[f]=null;t._color_rb&&(r.deleteRenderbuffer(t._color_rb),t._color_rb=null),gv(r,e),vv(d)}gv(r,e)}(this)}var bv=xv.prototype;function _v(t,e,r){if(t._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(t._shape[0]!==e||t._shape[1]!==r){var n=t.gl,a=n.getParameter(n.MAX_RENDERBUFFER_SIZE);if(e<0||e>a||r<0||r>a)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");t._shape[0]=e,t._shape[1]=r;for(var i=pv(n),o=0;o<t.color.length;++o)t.color[o].shape=t._shape;t._color_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,t._color_rb),n.renderbufferStorage(n.RENDERBUFFER,n.RGBA4,t._shape[0],t._shape[1])),t.depth&&(t.depth.shape=t._shape),t._depth_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,t._depth_rb),t._useDepth&&t._useStencil?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t._shape[0],t._shape[1]):t._useDepth?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t._shape[0],t._shape[1]):t._useStencil&&n.renderbufferStorage(n.RENDERBUFFER,n.STENCIL_INDEX,t._shape[0],t._shape[1])),n.bindFramebuffer(n.FRAMEBUFFER,t.handle);var l=n.checkFramebufferStatus(n.FRAMEBUFFER);l!==n.FRAMEBUFFER_COMPLETE&&(t.dispose(),gv(n,i),vv(l)),gv(n,i)}}Object.defineProperties(bv,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(t){if(Array.isArray(t)||(t=[0|t,0|t]),2!==t.length)throw new Error("gl-fbo: Shape vector must be length 2");var e=0|t[0],r=0|t[1];return _v(this,e,r),[e,r]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(t){return _v(this,t|=0,this._shape[1]),t},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(t){return t|=0,_v(this,this._shape[0],t),t},enumerable:!1}}),bv.bind=function(){if(!this._destroyed){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.handle),t.viewport(0,0,this._shape[0],this._shape[1])}},bv.dispose=function(){if(!this._destroyed){this._destroyed=!0;var t=this.gl;t.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(t.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var e=0;e<this.color.length;++e)this.color[e].dispose(),this.color[e]=null;this._color_rb&&(t.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};var wv=function(t,e){var r=hv(t,e),n=Ds.mallocUint8(e[0]*e[1]*4);return new Tv(t,r,n)},Av=Pl.nextPow2,Mv=Zg({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:{body:"{this_closestD2=1e8,this_closestX=-1,this_closestY=-1}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},body:{body:"{if(_inline_55_arg0_<255||_inline_55_arg1_<255||_inline_55_arg2_<255||_inline_55_arg3_<255){var _inline_55_l=_inline_55_arg4_-_inline_55_arg6_[0],_inline_55_a=_inline_55_arg5_-_inline_55_arg6_[1],_inline_55_f=_inline_55_l*_inline_55_l+_inline_55_a*_inline_55_a;_inline_55_f<this_closestD2&&(this_closestD2=_inline_55_f,this_closestX=_inline_55_arg6_[0],this_closestY=_inline_55_arg6_[1])}}",args:[{name:"_inline_55_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_55_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_55_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_55_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_55_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_55_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_55_arg6_",lvalue:!1,rvalue:!0,count:4}],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:["_inline_55_a","_inline_55_f","_inline_55_l"]},post:{body:"{return[this_closestX,this_closestY,this_closestD2]}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},debug:!1,funcName:"cwise",blockSize:64});function Tv(t,e,r){this.gl=t,this.fbo=e,this.buffer=r,this._readTimeout=null;var n=this;this._readCallback=function(){n.gl&&(e.bind(),t.readPixels(0,0,e.shape[0],e.shape[1],t.RGBA,t.UNSIGNED_BYTE,n.buffer),n._readTimeout=null)}}var kv=Tv.prototype;Object.defineProperty(kv,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(t){if(this.gl){this.fbo.shape=t;var e=this.fbo.shape[0],r=this.fbo.shape[1];if(r*e*4>this.buffer.length){Ds.free(this.buffer);for(var n=this.buffer=Ds.mallocUint8(Av(r*e*4)),a=0;a<r*e*4;++a)n[a]=255}return t}}}),kv.begin=function(){var t=this.gl;this.shape;t&&(this.fbo.bind(),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT))},kv.end=function(){var t=this.gl;t&&(t.bindFramebuffer(t.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},kv.query=function(t,e,r){if(!this.gl)return null;var n=this.fbo.shape.slice();t|=0,e|=0,"number"!=typeof r&&(r=1);var a=0|Math.min(Math.max(t-r,0),n[0]),i=0|Math.min(Math.max(t+r,0),n[0]),o=0|Math.min(Math.max(e-r,0),n[1]),l=0|Math.min(Math.max(e+r,0),n[1]);if(i<=a||l<=o)return null;var s=[i-a,l-o],u=Rl(this.buffer,[s[0],s[1],4],[4,4*n[0],1],4*(a+n[0]*o)),c=Mv(u.hi(s[0],s[1],1),r,r),f=c[0],h=c[1];return f<0||Math.pow(this.radius,2)<c[2]?null:new function(t,e,r,n,a){this.coord=[t,e],this.id=r,this.value=n,this.distance=a}(f+a|0,h+o|0,u.get(f,h,0),[u.get(f,h,1),u.get(f,h,2),u.get(f,h,3)],Math.sqrt(c[2]))},kv.dispose=function(){this.gl&&(this.fbo.dispose(),Ds.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};var Ev=function(t){var e=t.gl,r=wv(e,[e.drawingBufferWidth,e.drawingBufferHeight]),n=new Cv(e,r);return n.grid=lc(n),n.text=Xg(n),n.line=vc(n),n.box=Ju(n),n.update(t),n};function Cv(t,e){this.gl=t,this.pickBuffer=e,this.screenBox=[0,0,t.drawingBufferWidth,t.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var Sv=Cv.prototype;function Lv(t){for(var e=t.slice(),r=0;r<e.length;++r)e[r]=e[r].slice();return e}function Ov(t,e){return t.x-e.x}Sv.setDirty=function(){this.dirty=this.pickDirty=!0},Sv.setOverlayDirty=function(){this.dirty=!0},Sv.nextDepthValue=function(){return this._depthCounter++/65536},Sv.draw=function(){var t=this.gl,e=this.screenBox,r=this.viewBox,n=this.dataBox,a=this.pixelRatio,i=this.grid,o=this.line,l=this.text,s=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,t.bindFramebuffer(t.FRAMEBUFFER,null),t.enable(t.SCISSOR_TEST),t.disable(t.DEPTH_TEST),t.depthFunc(t.LESS),t.depthMask(!1),t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD,t.FUNC_ADD),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.borderColor){t.scissor(e[0],e[1],e[2]-e[0],e[3]-e[1]);var u=this.borderColor;t.clearColor(u[0]*u[3],u[1]*u[3],u[2]*u[3],u[3]),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}t.scissor(r[0],r[1],r[2]-r[0],r[3]-r[1]),t.viewport(r[0],r[1],r[2]-r[0],r[3]-r[1]);var c=this.backgroundColor;t.clearColor(c[0]*c[3],c[1]*c[3],c[2]*c[3],c[3]),t.clear(t.COLOR_BUFFER_BIT),i.draw();var f=this.zeroLineEnable,h=this.zeroLineColor,d=this.zeroLineWidth;if(f[0]||f[1]){o.bind();for(var p=0;p<2;++p)if(f[p]&&n[p]<=0&&n[p+2]>=0){var g=e[p]-n[p]*(e[p+2]-e[p])/(n[p+2]-n[p]);0===p?o.drawLine(g,e[1],g,e[3],d[p],h[p]):o.drawLine(e[0],g,e[2],g,d[p],h[p])}}for(p=0;p<s.length;++p)s[p].draw();t.viewport(e[0],e[1],e[2]-e[0],e[3]-e[1]),t.scissor(e[0],e[1],e[2]-e[0],e[3]-e[1]),this.grid.drawTickMarks(),o.bind();var v=this.borderLineEnable,m=this.borderLineWidth,y=this.borderLineColor;for(v[1]&&o.drawLine(r[0],r[1]-.5*m[1]*a,r[0],r[3]+.5*m[3]*a,m[1],y[1]),v[0]&&o.drawLine(r[0]-.5*m[0]*a,r[1],r[2]+.5*m[2]*a,r[1],m[0],y[0]),v[3]&&o.drawLine(r[2],r[1]-.5*m[1]*a,r[2],r[3]+.5*m[3]*a,m[3],y[3]),v[2]&&o.drawLine(r[0]-.5*m[0]*a,r[3],r[2]+.5*m[2]*a,r[3],m[2],y[2]),l.bind(),p=0;p<2;++p)l.drawTicks(p);this.titleEnable&&l.drawTitle();var x=this.overlays;for(p=0;p<x.length;++p)x[p].draw();t.disable(t.SCISSOR_TEST),t.disable(t.BLEND),t.depthMask(!0)}},Sv.drawPick=function(){if(!this.static){var t=this.pickBuffer;this.gl;this._pickTimeout=null,t.begin();for(var e=1,r=this.objects,n=0;n<r.length;++n)e=r[n].drawPick(e);t.end()}},Sv.pick=function(t,e){if(!this.static){var r=this.pixelRatio,n=this.pickPixelRatio,a=this.viewBox,i=0|Math.round((t-a[0]/r)*n),o=0|Math.round((e-a[1]/r)*n),l=this.pickBuffer.query(i,o,this.pickRadius);if(!l)return null;for(var s=l.id+(l.value[0]<<8)+(l.value[1]<<16)+(l.value[2]<<24),u=this.objects,c=0;c<u.length;++c){var f=u[c].pick(i,o,s);if(f)return f}return null}},Sv.setScreenBox=function(t){var e=this.screenBox,r=this.pixelRatio;e[0]=0|Math.round(t[0]*r),e[1]=0|Math.round(t[1]*r),e[2]=0|Math.round(t[2]*r),e[3]=0|Math.round(t[3]*r),this.setDirty()},Sv.setDataBox=function(t){var e=this.dataBox;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3])&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this.setDirty())},Sv.setViewBox=function(t){var e=this.pixelRatio,r=this.viewBox;r[0]=0|Math.round(t[0]*e),r[1]=0|Math.round(t[1]*e),r[2]=0|Math.round(t[2]*e),r[3]=0|Math.round(t[3]*e);var n=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((t[2]-t[0])*n),0|Math.round((t[3]-t[1])*n)],this.setDirty()},Sv.update=function(t){t=t||{};var e=this.gl;this.pixelRatio=t.pixelRatio||1;var r=this.pixelRatio;this.pickPixelRatio=Math.max(r,1),this.setScreenBox(t.screenBox||[0,0,e.drawingBufferWidth/r,e.drawingBufferHeight/r]);this.screenBox;this.setViewBox(t.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/r,.125*(this.screenBox[3]-this.screenBox[1])/r,.875*(this.screenBox[2]-this.screenBox[0])/r,.875*(this.screenBox[3]-this.screenBox[1])/r]);var n=this.viewBox,a=(n[2]-n[0])/(n[3]-n[1]);this.setDataBox(t.dataBox||[-10,-10/a,10,10/a]),this.borderColor=!1!==t.borderColor&&(t.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(t.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(t.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(t.gridLineWidth||[1,1]).slice(),this.gridLineColor=Lv(t.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(t.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(t.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=Lv(t.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(t.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(t.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=Lv(t.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(t.titleCenter||[.5*(n[0]+n[2])/r,(n[3]+120)/r]).slice(),this.titleEnable=!("titleEnable"in t&&!t.titleEnable),this.titleAngle=t.titleAngle||0,this.titleColor=(t.titleColor||[0,0,0,1]).slice(),this.labelPad=(t.labelPad||[15,15,15,15]).slice(),this.labelAngle=(t.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(t.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=Lv(t.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(t.tickPad||[15,15,15,15]).slice(),this.tickAngle=(t.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(t.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=Lv(t.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(t.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(t.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=Lv(t.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var i=t.ticks||[[],[]],o=this._tickBounds;o[0]=o[1]=1/0,o[2]=o[3]=-1/0;for(var l=0;l<2;++l){var s=i[l].slice(0);0!==s.length&&(s.sort(Ov),o[l]=Math.min(o[l],s[0].x),o[l+2]=Math.max(o[l+2],s[s.length-1].x))}this.grid.update({bounds:o,ticks:i}),this.text.update({bounds:o,ticks:i,labels:t.labels||["x","y"],labelSize:t.labelSize||[12,12],labelFont:t.labelFont||["sans-serif","sans-serif"],title:t.title||"",titleSize:t.titleSize||18,titleFont:t.titleFont||"sans-serif"}),this.static=!!t.static,this.setDirty()},Sv.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var t=this.objects.length-1;t>=0;--t)this.objects[t].dispose();this.objects.length=0;for(t=this.overlays.length-1;t>=0;--t)this.overlays[t].dispose();this.overlays.length=0,this.gl=null},Sv.addObject=function(t){this.objects.indexOf(t)<0&&(this.objects.push(t),this.setDirty())},Sv.removeObject=function(t){for(var e=this.objects,r=0;r<e.length;++r)if(e[r]===t){e.splice(r,1),this.setDirty();break}},Sv.addOverlay=function(t){this.overlays.indexOf(t)<0&&(this.overlays.push(t),this.setOverlayDirty())},Sv.removeOverlay=function(t){for(var e=this.overlays,r=0;r<e.length;++r)if(e[r]===t){e.splice(r,1),this.setOverlayDirty();break}};var Dv={};Dv.boxVertex=Ns(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),Dv.boxFragment=Ns(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"]);var Rv=function(t,e){var r=t.gl,n=zs(r,[0,0,0,1,1,0,1,1]),a=Zu(r,Dv.boxVertex,Dv.boxFragment),i=new Pv(t,n,a);return i.update(e),t.addOverlay(i),i};function Pv(t,e,r){this.plot=t,this.boxBuffer=e,this.boxShader=r,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var Iv=Pv.prototype;Iv.draw=function(){if(this.enabled){var t=this.plot,e=this.selectBox,r=this.borderWidth,n=(this.innerFill,this.innerColor),a=(this.outerFill,this.outerColor),i=this.borderColor,o=t.box,l=t.screenBox,s=t.dataBox,u=t.viewBox,c=t.pixelRatio,f=(e[0]-s[0])*(u[2]-u[0])/(s[2]-s[0])+u[0],h=(e[1]-s[1])*(u[3]-u[1])/(s[3]-s[1])+u[1],d=(e[2]-s[0])*(u[2]-u[0])/(s[2]-s[0])+u[0],p=(e[3]-s[1])*(u[3]-u[1])/(s[3]-s[1])+u[1];if(f=Math.max(f,u[0]),h=Math.max(h,u[1]),d=Math.min(d,u[2]),p=Math.min(p,u[3]),!(d<f||p<h)){o.bind();var g=l[2]-l[0],v=l[3]-l[1];if(this.outerFill&&(o.drawBox(0,0,g,h,a),o.drawBox(0,h,f,p,a),o.drawBox(0,p,g,v,a),o.drawBox(d,h,g,p,a)),this.innerFill&&o.drawBox(f,h,d,p,n),r>0){var m=r*c;o.drawBox(f-m,h-m,d+m,h+m,i),o.drawBox(f-m,p-m,d+m,p+m,i),o.drawBox(f-m,h-m,f+m,p+m,i),o.drawBox(d-m,h-m,d+m,p+m,i)}}}},Iv.update=function(t){t=t||{},this.innerFill=!!t.innerFill,this.outerFill=!!t.outerFill,this.innerColor=(t.innerColor||[0,0,0,.5]).slice(),this.outerColor=(t.outerColor||[0,0,0,.5]).slice(),this.borderColor=(t.borderColor||[0,0,0,1]).slice(),this.borderWidth=t.borderWidth||0,this.selectBox=(t.selectBox||this.selectBox).slice()},Iv.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};var Bv=function(t,e){var r=new Fv(t);return r.update(e),t.addOverlay(r),r};function Fv(t){this.plot=t,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var zv=Fv.prototype;zv.update=function(t){t=t||{},this.enable=(t.enable||[!0,!0,!1,!1]).slice(),this.width=(t.width||[1,1,1,1]).slice(),this.color=(t.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(t){return t.slice()}),this.center=(t.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},zv.draw=function(){var t=this.enable,e=this.width,r=this.color,n=this.center,a=this.plot,i=a.line,o=a.dataBox,l=a.viewBox;if(i.bind(),o[0]<=n[0]&&n[0]<=o[2]&&o[1]<=n[1]&&n[1]<=o[3]){var s=l[0]+(n[0]-o[0])/(o[2]-o[0])*(l[2]-l[0]),u=l[1]+(n[1]-o[1])/(o[3]-o[1])*(l[3]-l[1]);t[0]&&i.drawLine(s,u,l[0],u,e[0],r[0]),t[1]&&i.drawLine(s,u,s,l[1],e[1],r[1]),t[2]&&i.drawLine(s,u,l[2],u,e[2],r[2]),t[3]&&i.drawLine(s,u,s,l[3],e[3],r[3])}},zv.dispose=function(){this.plot.removeOverlay(this)};var Nv=function(t,e){if("string"!=typeof t)throw new TypeError("must specify type string");if(e=e||{},"undefined"==typeof document&&!e.canvas)return null;var r=e.canvas||document.createElement("canvas");"number"==typeof e.width&&(r.width=e.width);"number"==typeof e.height&&(r.height=e.height);var n,a=e;try{var i=[t];0===t.indexOf("webgl")&&i.push("experimental-"+t);for(var o=0;o<i.length;o++)if(n=r.getContext(i[o],a))return n}catch(t){n=null}return n||null};var jv=function(t){return Nv("webgl",t)},Uv=function(t){return t.split("").map(function(t){return t in Vv?Vv[t]:""}).join("")},Vv={" ":" ",0:"\u2070",1:"\xb9",2:"\xb2",3:"\xb3",4:"\u2074",5:"\u2075",6:"\u2076",7:"\u2077",8:"\u2078",9:"\u2079","+":"\u207a","-":"\u207b",a:"\u1d43",b:"\u1d47",c:"\u1d9c",d:"\u1d48",e:"\u1d49",f:"\u1da0",g:"\u1d4d",h:"\u02b0",i:"\u2071",j:"\u02b2",k:"\u1d4f",l:"\u02e1",m:"\u1d50",n:"\u207f",o:"\u1d52",p:"\u1d56",r:"\u02b3",s:"\u02e2",t:"\u1d57",u:"\u1d58",v:"\u1d5b",w:"\u02b7",x:"\u02e3",y:"\u02b8",z:"\u1dbb"};var Hv=function(t){return""+function(t){for(var e=Ar.entityToUnicode,r=0;(r=t.indexOf("&",r))>=0;){var n=t.indexOf(";",r);if(n<r)r+=1;else{var a=e[t.slice(r+1,n)];t=a?t.slice(0,r)+a+t.slice(n+1):t.slice(0,r)+t.slice(n+1)}}return t}(function(t){return t.replace(/\<.*\>/g,"")}(function(t){for(var e=0;(e=t.indexOf("<sup>",e))>=0;){var r=t.indexOf("</sup>",e);if(r<e)break;t=t.slice(0,e)+Uv(t.slice(e+5,r))+t.slice(r+6)}return t}(t.replace(/\<br\>/g,"\n"))))},qv=function(){},Gv={},Xv=De.id2name,Yv=_a,Wv=i.ALMOST_EQUAL,Zv=wr.FROM_BL;function Jv(t,e){var r=t._inputDomain,n=Zv[t.constraintoward],a=r[0]+(r[1]-r[0])*n;t.domain=t._input.domain=[a+(r[0]-a)/e,a+(r[1]-a)/e]}Gv.enforce=function(t){var e,r,n,a,i,o,l,s=t._fullLayout,u=s._axisConstraintGroups||[];for(e=0;e<u.length;e++){var c=u[e],f=Object.keys(c),h=1/0,d=0,p=1/0,g={},v={},m=!1;for(r=0;r<f.length;r++)v[n=f[r]]=a=s[Xv(n)],a._inputDomain?a.domain=a._inputDomain.slice():a._inputDomain=a.domain.slice(),a._inputRange||(a._inputRange=a.range.slice()),a.setScale(),g[n]=i=Math.abs(a._m)/c[n],h=Math.min(h,i),"domain"!==a.constrain&&a._constraintShrinkable||(p=Math.min(p,i)),delete a._constraintShrinkable,d=Math.max(d,i),"domain"===a.constrain&&(m=!0);if(!(h>Wv*d)||m)for(r=0;r<f.length;r++)if(i=g[n=f[r]],o=(a=v[n]).constrain,i!==p||"domain"===o)if(l=i/p,"range"===o)Ii(a,l);else{var y=a._inputDomain,x=(a.domain[1]-a.domain[0])/(y[1]-y[0]),b=(a.r2l(a.range[1])-a.r2l(a.range[0]))/(a.r2l(a._inputRange[1])-a.r2l(a._inputRange[0]));if((l/=x)*b<1){a.domain=a._input.domain=y.slice(),Ii(a,l);continue}if(b<1&&(a.range=a._input.range=a._inputRange.slice(),l*=b),a.autorange&&a._min.length&&a._max.length){var _=a.r2l(a.range[0]),w=a.r2l(a.range[1]),A=(_+w)/2,M=A,T=A,k=Math.abs(w-A),E=A-k*l*1.0001,C=A+k*l*1.0001,S=Yv(a);Jv(a,l),a.setScale();var L,O,D=Math.abs(a._m);for(O=0;O<a._min.length;O++)(L=a._min[O].val-S(a._min[O])/D)>E&&L<M&&(M=L);for(O=0;O<a._max.length;O++)(L=a._max[O].val+S(a._max[O])/D)<C&&L>T&&(T=L);l/=(T-M)/(2*k),M=a.l2r(M),T=a.l2r(T),a.range=a._input.range=_<w?[M,T]:[T,M]}Jv(a,l)}}},Gv.clean=function(t,e){if(e._inputDomain){for(var r=!1,n=e._id,a=t._fullLayout._axisConstraintGroups,i=0;i<a.length;i++)if(a[i][n]){r=!0;break}r&&"domain"===e.constrain||(e._input.domain=e.domain=e._inputDomain,delete e._inputDomain)}};var Qv={};function $v(t){return t.target||t.srcElement||window}Qv.buttons=function(t){if("object"==typeof t){if("buttons"in t)return t.buttons;if("which"in t){if(2===(e=t.which))return 4;if(3===e)return 2;if(e>0)return 1<<e-1}else if("button"in t){var e;if(1===(e=t.button))return 4;if(2===e)return 2;if(e>=0)return 1<<e}}return 0},Qv.element=$v,Qv.x=function(t){if("object"==typeof t){if("offsetX"in t)return t.offsetX;var e=$v(t).getBoundingClientRect();return t.clientX-e.left}return 0},Qv.y=function(t){if("object"==typeof t){if("offsetY"in t)return t.offsetY;var e=$v(t).getBoundingClientRect();return t.clientY-e.top}return 0};var Kv=function(t,e){e||(e=t,t=window);var r=0,n=0,a=0,i={shift:!1,alt:!1,control:!1,meta:!1},o=!1;function l(t){var e=!1;return"altKey"in t&&(e=e||t.altKey!==i.alt,i.alt=!!t.altKey),"shiftKey"in t&&(e=e||t.shiftKey!==i.shift,i.shift=!!t.shiftKey),"ctrlKey"in t&&(e=e||t.ctrlKey!==i.control,i.control=!!t.ctrlKey),"metaKey"in t&&(e=e||t.metaKey!==i.meta,i.meta=!!t.metaKey),e}function s(t,o){var s=Qv.x(o),u=Qv.y(o);"buttons"in o&&(t=0|o.buttons),(t!==r||s!==n||u!==a||l(o))&&(r=0|t,n=s||0,a=u||0,e&&e(r,n,a,i))}function u(t){s(0,t)}function c(){(r||n||a||i.shift||i.alt||i.meta||i.control)&&(n=a=0,r=0,i.shift=i.alt=i.control=i.meta=!1,e&&e(0,0,0,i))}function f(t){l(t)&&e&&e(r,n,a,i)}function h(t){0===Qv.buttons(t)?s(0,t):s(r,t)}function d(t){s(r|Qv.buttons(t),t)}function p(t){s(r&~Qv.buttons(t),t)}function g(){o||(o=!0,t.addEventListener("mousemove",h),t.addEventListener("mousedown",d),t.addEventListener("mouseup",p),t.addEventListener("mouseleave",u),t.addEventListener("mouseenter",u),t.addEventListener("mouseout",u),t.addEventListener("mouseover",u),t.addEventListener("blur",c),t.addEventListener("keyup",f),t.addEventListener("keydown",f),t.addEventListener("keypress",f),t!==window&&(window.addEventListener("blur",c),window.addEventListener("keyup",f),window.addEventListener("keydown",f),window.addEventListener("keypress",f)))}g();var v={element:t};return Object.defineProperties(v,{enabled:{get:function(){return o},set:function(e){e?g():o&&(o=!1,t.removeEventListener("mousemove",h),t.removeEventListener("mousedown",d),t.removeEventListener("mouseup",p),t.removeEventListener("mouseleave",u),t.removeEventListener("mouseenter",u),t.removeEventListener("mouseout",u),t.removeEventListener("mouseover",u),t.removeEventListener("blur",c),t.removeEventListener("keyup",f),t.removeEventListener("keydown",f),t.removeEventListener("keypress",f),t!==window&&(window.removeEventListener("blur",c),window.removeEventListener("keyup",f),window.removeEventListener("keydown",f),window.removeEventListener("keypress",f)))},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return n},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return i},enumerable:!0}}),v};var tm=function(t,e){e||(e=[0,""]),t=String(t);var r=parseFloat(t,10);return e[0]=r,e[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e},em=am,rm=96;function nm(t,e){var r=tm(getComputedStyle(t).getPropertyValue(e));return r[0]*am(r[1],t)}function am(t,e){switch(e=e||document.body,t=(t||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),t){case"%":return e.clientHeight/100;case"ch":case"ex":return function(t,e){var r=document.createElement("div");r.style["font-size"]="128"+t,e.appendChild(r);var n=nm(r,"font-size")/128;return e.removeChild(r),n}(t,e);case"em":return nm(e,"font-size");case"rem":return nm(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return rm;case"cm":return rm/2.54;case"mm":return rm/25.4;case"pt":return rm/72;case"pc":return rm/6}return 1}var im=function(t,e,r){"function"==typeof t&&(r=!!e,e=t,t=window);var n=em("ex",t),a=function(t){r&&t.preventDefault();var a=t.deltaX||0,i=t.deltaY||0,o=t.deltaZ||0,l=t.deltaMode,s=1;switch(l){case 1:s=n;break;case 2:s=window.innerHeight}if(i*=s,o*=s,(a*=s)||i||o)return e(a,i,o,t)};return t.addEventListener("wheel",a),a};var om=function(t){var e=t.mouseContainer,r=t.glplot,n=new function(t,e){this.element=t,this.plot=e,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}(e,r);function a(){t.xaxis.autorange=!1,t.yaxis.autorange=!1}function i(e,i,o){var l,s,u=t.calcDataBox(),c=r.viewBox,f=n.lastPos[0],h=n.lastPos[1],d=Oe.MINDRAG*r.pixelRatio,p=Oe.MINZOOM*r.pixelRatio;function g(e,r,a){var i=Math.min(r,a),o=Math.max(r,a);i!==o?(u[e]=i,u[e+2]=o,n.dataBox=u,t.setRanges(u)):(t.selectBox.selectBox=[0,0,1,1],t.glplot.setDirty())}switch(i*=r.pixelRatio,o*=r.pixelRatio,o=c[3]-c[1]-o,t.fullLayout.dragmode){case"zoom":if(e){var v=i/(c[2]-c[0])*(u[2]-u[0])+u[0],m=o/(c[3]-c[1])*(u[3]-u[1])+u[1];n.boxInited||(n.boxStart[0]=v,n.boxStart[1]=m,n.dragStart[0]=i,n.dragStart[1]=o),n.boxEnd[0]=v,n.boxEnd[1]=m,n.boxInited=!0,n.boxEnabled||n.boxStart[0]===n.boxEnd[0]&&n.boxStart[1]===n.boxEnd[1]||(n.boxEnabled=!0);var y=Math.abs(n.dragStart[0]-i)<p,x=Math.abs(n.dragStart[1]-o)<p;if(!function(){for(var e=t.graphDiv._fullLayout._axisConstraintGroups,r=t.xaxis._id,n=t.yaxis._id,a=0;a<e.length;a++)if(-1!==e[a][r]){if(-1!==e[a][n])return!0;break}return!1}()||y&&x)y&&(n.boxEnd[0]=n.boxStart[0]),x&&(n.boxEnd[1]=n.boxStart[1]);else{l=n.boxEnd[0]-n.boxStart[0],s=n.boxEnd[1]-n.boxStart[1];var b=(u[3]-u[1])/(u[2]-u[0]);Math.abs(l*b)>Math.abs(s)?(n.boxEnd[1]=n.boxStart[1]+Math.abs(l)*b*(s>=0?1:-1),n.boxEnd[1]<u[1]?(n.boxEnd[1]=u[1],n.boxEnd[0]=n.boxStart[0]+(u[1]-n.boxStart[1])/Math.abs(b)):n.boxEnd[1]>u[3]&&(n.boxEnd[1]=u[3],n.boxEnd[0]=n.boxStart[0]+(u[3]-n.boxStart[1])/Math.abs(b))):(n.boxEnd[0]=n.boxStart[0]+Math.abs(s)/b*(l>=0?1:-1),n.boxEnd[0]<u[0]?(n.boxEnd[0]=u[0],n.boxEnd[1]=n.boxStart[1]+(u[0]-n.boxStart[0])*Math.abs(b)):n.boxEnd[0]>u[2]&&(n.boxEnd[0]=u[2],n.boxEnd[1]=n.boxStart[1]+(u[2]-n.boxStart[0])*Math.abs(b)))}}else n.boxEnabled?(l=n.boxStart[0]!==n.boxEnd[0],s=n.boxStart[1]!==n.boxEnd[1],l||s?(l&&(g(0,n.boxStart[0],n.boxEnd[0]),t.xaxis.autorange=!1),s&&(g(1,n.boxStart[1],n.boxEnd[1]),t.yaxis.autorange=!1),t.relayoutCallback()):t.glplot.setDirty(),n.boxEnabled=!1,n.boxInited=!1):n.boxInited&&(n.boxInited=!1);break;case"pan":n.boxEnabled=!1,n.boxInited=!1,e?(n.panning||(n.dragStart[0]=i,n.dragStart[1]=o),Math.abs(n.dragStart[0]-i)<d&&(i=n.dragStart[0]),Math.abs(n.dragStart[1]-o)<d&&(o=n.dragStart[1]),l=(f-i)*(u[2]-u[0])/(r.viewBox[2]-r.viewBox[0]),s=(h-o)*(u[3]-u[1])/(r.viewBox[3]-r.viewBox[1]),u[0]+=l,u[2]+=l,u[1]+=s,u[3]+=s,t.setRanges(u),n.panning=!0,n.lastInputTime=Date.now(),a(),t.cameraChanged(),t.handleAnnotations()):n.panning&&(n.panning=!1,t.relayoutCallback())}n.lastPos[0]=i,n.lastPos[1]=o}return n.mouseListener=Kv(e,i),e.addEventListener("touchstart",function(t){var r=Be(t.changedTouches[0],e);i(0,r[0],r[1]),i(1,r[0],r[1]),t.preventDefault()},!!Pe&&{passive:!1}),e.addEventListener("touchmove",function(t){t.preventDefault();var r=Be(t.changedTouches[0],e);i(1,r[0],r[1]),t.preventDefault()},!!Pe&&{passive:!1}),e.addEventListener("touchend",function(t){i(0,n.lastPos[0],n.lastPos[1]),t.preventDefault()},!!Pe&&{passive:!1}),n.wheelListener=im(e,function(e,i){if(!t.scrollZoom)return!1;var o=t.calcDataBox(),l=r.viewBox,s=n.lastPos[0],u=n.lastPos[1],c=Math.exp(5*i/(l[3]-l[1])),f=s/(l[2]-l[0])*(o[2]-o[0])+o[0],h=u/(l[3]-l[1])*(o[3]-o[1])+o[1];return o[0]=(o[0]-f)*c+f,o[2]=(o[2]-f)*c+f,o[1]=(o[1]-h)*c+h,o[3]=(o[3]-h)*c+h,t.setRanges(o),n.lastInputTime=Date.now(),a(),t.cameraChanged(),t.handleAnnotations(),t.relayoutCallback(),!0},!0),n};var lm=function(t,e,r){return e<r?t<e?e:t>r?r:t:t<r?r:t>e?e:t};var sm={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},um=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},cm=Object.prototype.toString,fm=function(t){var e;return"[object Object]"===cm.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))},hm={};(function(t){"use strict";hm=function(r){var n,a,i=[],o=1;if("string"==typeof r)if(sm[r])i=sm[r].slice(),a="rgb";else if("transparent"===r)o=0,a="rgb",i=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(r)){var l=r.slice(1),s=l.length,u=s<=4;o=1,u?(i=[parseInt(l[0]+l[0],16),parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16)],4===s&&(o=parseInt(l[3]+l[3],16)/255)):(i=[parseInt(l[0]+l[1],16),parseInt(l[2]+l[3],16),parseInt(l[4]+l[5],16)],8===s&&(o=parseInt(l[6]+l[7],16)/255)),i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0),a="rgb"}else if(n=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(r)){var c=n[1],l=c.replace(/a$/,"");a=l;var s="cmyk"===l?4:"gray"===l?1:3;i=n[2].trim().split(/\s*,\s*/).map(function(t,r){if(/%$/.test(t))return r===s?parseFloat(t)/100:"rgb"===l?255*parseFloat(t)/100:parseFloat(t);if("h"===l[r]){if(/deg$/.test(t))return parseFloat(t);if(void 0!==e[t])return e[t]}return parseFloat(t)}),c===l&&i.push(1),o=void 0===i[s]?1:i[s],i=i.slice(0,s)}else r.length>10&&/[0-9](?:\s|\/)/.test(r)&&(i=r.match(/([0-9]+)/g).map(function(t){return parseFloat(t)}),a=r.match(/([a-z])/gi).join("").toLowerCase());else if("number"==typeof r)a="rgb",i=[r>>>16,(65280&r)>>>8,255&r];else if(fm(r)){var f=um(r.r,r.red,r.R,null);null!==f?(a="rgb",i=[f,um(r.g,r.green,r.G),um(r.b,r.blue,r.B)]):(a="hsl",i=[um(r.h,r.hue,r.H),um(r.s,r.saturation,r.S),um(r.l,r.lightness,r.L,r.b,r.brightness)]),o=um(r.a,r.alpha,r.opacity,1),null!=r.opacity&&(o/=100)}else(Array.isArray(r)||t.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(r))&&(i=[r[0],r[1],r[2]],a="rgb",o=4===r.length?r[3]:1);return{space:a,values:i,alpha:o}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var dm=function(t){var e,r,n,a,i,o=t[0]/360,l=t[1]/100,s=t[2]/100;if(0===l)return[i=255*s,i,i];e=2*s-(r=s<.5?s*(1+l):s+l-s*l),a=[0,0,0];for(var u=0;u<3;u++)(n=o+1/3*-(u-1))<0?n++:n>1&&n--,i=6*n<1?e+6*(r-e)*n:2*n<1?r:3*n<2?e+(r-e)*(2/3-n)*6:e,a[u]=255*i;return a},pm=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}},gm=function(t,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var r=pm(e),n=new r(4);if(t instanceof r)return Array.isArray(t)?t.slice():(n.set(t),n);var a="uint8"!==e&&"uint8_clamped"!==e;return t instanceof Uint8Array||t instanceof Uint8ClampedArray?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=null!=t[3]?t[3]:255,a&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(t.length&&"string"!=typeof t||((t=function(t){var e;if("string"!=typeof t)throw Error("Argument should be a string");var r=hm(t);return r.space?((e=Array(3))[0]=lm(r.values[0],0,255),e[1]=lm(r.values[1],0,255),e[2]=lm(r.values[2],0,255),"h"===r.space[0]&&(e=dm(e)),e.push(lm(r.alpha,0,1)),e):[]}(t))[0]/=255,t[1]/=255,t[2]/=255),a?(n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=null!=t[3]?t[3]:1):(n[0]=lm(Math.round(255*t[0]),0,255),n[1]=lm(Math.round(255*t[1]),0,255),n[2]=lm(Math.round(255*t[2]),0,255),n[3]=null==t[3]?255:lm(Math.floor(255*t[3]),0,255)),n)};var vm=function(t){return t?gm(t):[0,0,0,1]};function mm(t){this.scene=t,this.gl=t.gl,this.pixelRatio=t.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=!1,this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var ym=mm.prototype,xm=["xaxis","yaxis"];ym.merge=function(t){var e,r,n,a,i,o,l,s,u,c,f;for(this.titleEnable=!1,this.backgroundColor=vm(t.plot_bgcolor),c=0;c<2;++c){var h=(e=xm[c]).charAt(0);for(n=(r=t[this.scene[e]._name]).title===this.scene.fullLayout._dfltTitle[h]?"":r.title,f=0;f<=2;f+=2)this.labelEnable[c+f]=!1,this.labels[c+f]=Hv(n),this.labelColor[c+f]=vm(r.titlefont.color),this.labelFont[c+f]=r.titlefont.family,this.labelSize[c+f]=r.titlefont.size,this.labelPad[c+f]=this.getLabelPad(e,r),this.tickEnable[c+f]=!1,this.tickColor[c+f]=vm((r.tickfont||{}).color),this.tickAngle[c+f]="auto"===r.tickangle?0:Math.PI*-r.tickangle/180,this.tickPad[c+f]=this.getTickPad(r),this.tickMarkLength[c+f]=0,this.tickMarkWidth[c+f]=r.tickwidth||0,this.tickMarkColor[c+f]=vm(r.tickcolor),this.borderLineEnable[c+f]=!1,this.borderLineColor[c+f]=vm(r.linecolor),this.borderLineWidth[c+f]=r.linewidth||0;l=this.hasSharedAxis(r),i=this.hasAxisInDfltPos(e,r)&&!l,o=this.hasAxisInAltrPos(e,r)&&!l,a=r.mirror||!1,s=l?-1!==String(a).indexOf("all"):!!a,u=l?"allticks"===a:-1!==String(a).indexOf("ticks"),i?this.labelEnable[c]=!0:o&&(this.labelEnable[c+2]=!0),i?this.tickEnable[c]=r.showticklabels:o&&(this.tickEnable[c+2]=r.showticklabels),(i||s)&&(this.borderLineEnable[c]=r.showline),(o||s)&&(this.borderLineEnable[c+2]=r.showline),(i||u)&&(this.tickMarkLength[c]=this.getTickMarkLength(r)),(o||u)&&(this.tickMarkLength[c+2]=this.getTickMarkLength(r)),this.gridLineEnable[c]=r.showgrid,this.gridLineColor[c]=vm(r.gridcolor),this.gridLineWidth[c]=r.gridwidth,this.zeroLineEnable[c]=r.zeroline,this.zeroLineColor[c]=vm(r.zerolinecolor),this.zeroLineWidth[c]=r.zerolinewidth}},ym.hasSharedAxis=function(t){var e=this.scene,r=e.fullLayout._subplots.gl2d;return 0!==Na.findSubplotsWithAxis(r,t).indexOf(e.id)},ym.hasAxisInDfltPos=function(t,e){var r=e.side;return"xaxis"===t?"bottom"===r:"yaxis"===t?"left"===r:void 0},ym.hasAxisInAltrPos=function(t,e){var r=e.side;return"xaxis"===t?"top"===r:"yaxis"===t?"right"===r:void 0},ym.getLabelPad=function(t,e){var r=e.titlefont.size,n=e.showticklabels;return"xaxis"===t?"top"===e.side?r*(1.5+(n?1:0))-10:r*(1.5+(n?.5:0))-10:"yaxis"===t?"right"===e.side?10+r*(1.5+(n?1:.5)):10+r*(1.5+(n?.5:0)):void 0},ym.getTickPad=function(t){return"outside"===t.ticks?10+t.ticklen:15},ym.getTickMarkLength=function(t){if(!t.ticks)return 0;var e=t.ticklen;return"inside"===t.ticks?-e:e};var bm,_m,wm=function(t){return new mm(t)},Am=Gv.enforce,Mm=Gv.clean,Tm=wa,km=["xaxis","yaxis"],Em=Oe.SUBPLOT_PATTERN;function Cm(t,e){this.container=t.container,this.graphDiv=t.graphDiv,this.pixelRatio=t.plotGlPixelRatio||window.devicePixelRatio,this.id=t.id,this.staticPlot=!!t.staticPlot,this.scrollZoom=this.graphDiv._context.scrollZoom,this.fullData=null,this.updateRefs(e),this.makeFramework(),this.glplotOptions=wm(this),this.glplotOptions.merge(e),this.glplot=Ev(this.glplotOptions),this.camera=om(this),this.traces={},this.spikes=Bv(this.glplot),this.selectBox=Rv(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw()}var Sm=Cm,Lm=Cm.prototype;Lm.makeFramework=function(){if(this.staticPlot){if(!(_m||(bm=document.createElement("canvas"),_m=jv({canvas:bm,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=bm,this.gl=_m}else{var t=this.container.querySelector(".gl-canvas-focus"),e=jv({canvas:t,preserveDrawingBuffer:!0,premultipliedAlpha:!0});e||function(t){for(var e in t)"function"==typeof t[e]&&(t[e]=qv);t.destroy=function(){t.container.parentNode.removeChild(t.container)};var r=document.createElement("div");r.textContent="Webgl is not supported by your browser - visit http://get.webgl.org for more info",r.style.cursor="pointer",r.style.fontSize="24px",r.style.color=$e.defaults[0],t.container.appendChild(r),t.container.style.background="#FFFFFF",t.container.onclick=function(){window.open("http://get.webgl.org")}}(this),this.canvas=t,this.gl=e}var r=this.canvas;r.style.width="100%",r.style.height="100%",r.style.position="absolute",r.style.top="0px",r.style.left="0px",r.style["pointer-events"]="none",this.updateSize(r),r.className+=" user-select-none";var n=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="100%",n.style["z-index"]=20,n.style["pointer-events"]="none";var a=this.mouseContainer=document.createElement("div");a.style.position="absolute",a.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var i=this.container;i.appendChild(n),i.appendChild(a);var o=this;a.addEventListener("mouseout",function(){o.isMouseOver=!1,o.unhover()}),a.addEventListener("mouseover",function(){o.isMouseOver=!0})},Lm.toImage=function(t){t||(t="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(bm),this.updateSize(this.canvas);var e=this.glplot.gl,r=e.drawingBufferWidth,n=e.drawingBufferHeight;e.clearColor(1,1,1,0),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),e.bindFramebuffer(e.FRAMEBUFFER,null);var a=new Uint8Array(r*n*4);e.readPixels(0,0,r,n,e.RGBA,e.UNSIGNED_BYTE,a);for(var i=0,o=n-1;i<o;++i,--o)for(var l=0;l<r;++l)for(var s=0;s<4;++s){var u=a[4*(r*i+l)+s];a[4*(r*i+l)+s]=a[4*(r*o+l)+s],a[4*(r*o+l)+s]=u}var c=document.createElement("canvas");c.width=r,c.height=n;var f,h=c.getContext("2d"),d=h.createImageData(r,n);switch(d.data.set(a),h.putImageData(d,0,0),t){case"jpeg":f=c.toDataURL("image/jpeg");break;case"webp":f=c.toDataURL("image/webp");break;default:f=c.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(bm),f},Lm.updateSize=function(t){t||(t=this.canvas);var e=this.pixelRatio,r=this.fullLayout,n=r.width,a=r.height,i=0|Math.ceil(e*n),o=0|Math.ceil(e*a);return t.width===i&&t.height===o||(t.width=i,t.height=o),t},Lm.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var t=[Na.calcTicks(this.xaxis),Na.calcTicks(this.yaxis)],e=0;e<2;++e)for(var r=0;r<t[e].length;++r)t[e][r].text=Hv(t[e][r].text+"");return t},Lm.updateRefs=function(t){this.fullLayout=t;var e=this.id.match(Em),r="xaxis"+e[1],n="yaxis"+e[2];this.xaxis=this.fullLayout[r],this.yaxis=this.fullLayout[n]},Lm.relayoutCallback=function(){var t=this.graphDiv,e=this.xaxis,r=this.yaxis,n=t.layout;n.xaxis.autorange=e.autorange,n.xaxis.range=e.range.slice(0),n.yaxis.autorange=r.autorange,n.yaxis.range=r.range.slice(0);var a={lastInputTime:this.camera.lastInputTime};a[e._name]=e.range.slice(0),a[r._name]=r.range.slice(0),t.emit("plotly_relayout",a)},Lm.cameraChanged=function(){var t=this.camera;this.glplot.setDataBox(this.calcDataBox());var e=this.computeTickMarks();(function(t,e){for(var r=0;r<2;++r){var n=t[r],a=e[r];if(n.length!==a.length)return!0;for(var i=0;i<n.length;++i)if(n[i].x!==a[i].x)return!0}return!1})(e,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=e,this.glplotOptions.dataBox=t.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},Lm.handleAnnotations=function(){for(var t=this.graphDiv,e=this.fullLayout.annotations,r=0;r<e.length;r++){var n=e[r];n.xref===this.xaxis._id&&n.yref===this.yaxis._id&&I.getComponentMethod("annotations","drawOne")(t,r)}},Lm.destroy=function(){if(this.glplot){var t=this.traces;t&&Object.keys(t).map(function(e){t[e].dispose(),delete t[e]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},Lm.plot=function(t,e,r){var n=this.glplot;this.updateRefs(r),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(t,e),this.updateFx(r.dragmode);var a=r.width,i=r.height;this.updateSize(this.canvas);var o=this.glplotOptions;o.merge(r),o.screenBox=[0,0,a,i];var l={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis}};Mm(l,this.xaxis),Mm(l,this.yaxis);var s,u,c=r._size,f=this.xaxis.domain,h=this.yaxis.domain;for(o.viewBox=[c.l+f[0]*c.w,c.b+h[0]*c.h,a-c.r-(1-f[1])*c.w,i-c.t-(1-h[1])*c.h],this.mouseContainer.style.width=c.w*(f[1]-f[0])+"px",this.mouseContainer.style.height=c.h*(h[1]-h[0])+"px",this.mouseContainer.height=c.h*(h[1]-h[0]),this.mouseContainer.style.left=c.l+f[0]*c.w+"px",this.mouseContainer.style.top=c.t+(1-h[1])*c.h+"px",u=0;u<2;++u)(s=this[km[u]])._length=o.viewBox[u+2]-o.viewBox[u],Tm(s),s.setScale();Am(l),o.ticks=this.computeTickMarks(),o.dataBox=this.calcDataBox(),o.merge(r),n.update(o),this.glplot.draw()},Lm.calcDataBox=function(){var t=this.xaxis,e=this.yaxis,r=t.range,n=e.range,a=t.r2l,i=e.r2l;return[a(r[0]),i(n[0]),a(r[1]),i(n[1])]},Lm.setRanges=function(t){var e=this.xaxis,r=this.yaxis,n=e.l2r,a=r.l2r;e.range=[n(t[0]),n(t[2])],r.range=[a(t[1]),a(t[3])]},Lm.updateTraces=function(t,e){var r,n,a,i=Object.keys(this.traces);this.fullData=t;t:for(r=0;r<i.length;r++){var o=i[r],l=this.traces[o];for(n=0;n<t.length;n++)if((a=t[n]).uid===o&&a.type===l.type)continue t;l.dispose(),delete this.traces[o]}for(r=0;r<t.length;r++){a=t[r];var s=e[r],u=this.traces[a.uid];u?u.update(a,s):(u=a._module.plot(this,a,s),this.traces[a.uid]=u)}this.glplot.objects.sort(function(t,e){return t._trace.index-e._trace.index})},Lm.updateFx=function(t){"lasso"===t||"select"===t?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===t?"move":"zoom"===t?"crosshair":null},Lm.emitPointAction=function(t,e){for(var r,n=t.trace.uid,a=t.pointIndex,i=0;i<this.fullData.length;i++)this.fullData[i].uid===n&&(r=this.fullData[i]);var o={x:t.traceCoord[0],y:t.traceCoord[1],curveNumber:r.index,pointNumber:a,data:r._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};Di.appendArrayPointValue(o,r,a),this.graphDiv.emit(e,{points:[o]})},Lm.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var t=this.glplot,e=this.camera,r=e.mouseListener,n=1===this.lastButtonState&&0===r.buttons,a=this.fullLayout;this.lastButtonState=r.buttons,this.cameraChanged();var i,o=r.x*t.pixelRatio,l=this.canvas.height-t.pixelRatio*r.y;if(e.boxEnabled&&"zoom"===a.dragmode){this.selectBox.enabled=!0;for(var s=this.selectBox.selectBox=[Math.min(e.boxStart[0],e.boxEnd[0]),Math.min(e.boxStart[1],e.boxEnd[1]),Math.max(e.boxStart[0],e.boxEnd[0]),Math.max(e.boxStart[1],e.boxEnd[1])],u=0;u<2;u++)e.boxStart[u]===e.boxEnd[u]&&(s[u]=t.dataBox[u],s[u+2]=t.dataBox[u+2]);t.setDirty()}else if(!e.panning&&this.isMouseOver){this.selectBox.enabled=!1;var c=a._size,f=this.xaxis.domain,h=this.yaxis.domain,d=(i=t.pick(o/t.pixelRatio+c.l+f[0]*c.w,l/t.pixelRatio-(c.t+(1-h[1])*c.h)))&&i.object._trace.handlePick(i);if(d&&n&&this.emitPointAction(d,"plotly_click"),i&&"skip"!==i.object._trace.hoverinfo&&a.hovermode&&d&&(!this.lastPickResult||this.lastPickResult.traceUid!==d.trace.uid||this.lastPickResult.dataCoord[0]!==d.dataCoord[0]||this.lastPickResult.dataCoord[1]!==d.dataCoord[1])){var p=d;this.lastPickResult={traceUid:d.trace?d.trace.uid:null,dataCoord:d.dataCoord.slice()},this.spikes.update({center:i.dataCoord}),p.screenCoord=[((t.viewBox[2]-t.viewBox[0])*(i.dataCoord[0]-t.dataBox[0])/(t.dataBox[2]-t.dataBox[0])+t.viewBox[0])/t.pixelRatio,(this.canvas.height-(t.viewBox[3]-t.viewBox[1])*(i.dataCoord[1]-t.dataBox[1])/(t.dataBox[3]-t.dataBox[1])-t.viewBox[1])/t.pixelRatio],this.emitPointAction(d,"plotly_hover");var g=this.fullData[p.trace.index]||{},v=p.pointIndex,m=Di.castHoverinfo(g,a,v);if(m&&"all"!==m){var y=m.split("+");-1===y.indexOf("x")&&(p.traceCoord[0]=void 0),-1===y.indexOf("y")&&(p.traceCoord[1]=void 0),-1===y.indexOf("z")&&(p.traceCoord[2]=void 0),-1===y.indexOf("text")&&(p.textLabel=void 0),-1===y.indexOf("name")&&(p.name=void 0)}Di.loneHover({x:p.screenCoord[0],y:p.screenCoord[1],xLabel:this.hoverFormatter("xaxis",p.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",p.traceCoord[1]),zLabel:p.traceCoord[2],text:p.textLabel,name:p.name,color:Di.castHoverOption(g,v,"bgcolor")||p.color,borderColor:Di.castHoverOption(g,v,"bordercolor"),fontFamily:Di.castHoverOption(g,v,"font.family"),fontSize:Di.castHoverOption(g,v,"font.size"),fontColor:Di.castHoverOption(g,v,"font.color")},{container:this.svgContainer,gd:this.graphDiv})}}i||this.unhover(),t.draw()}},Lm.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),Di.loneUnhover(this.svgContainer))},Lm.hoverFormatter=function(t,e){if(void 0!==e){var r=this[t];return Na.tickText(r,r.c2l(e),"hover").text}};var Om={},Dm=_e.overrideAll,Rm=$o.getSubplotData;Om.name="gl2d",Om.attr=["xaxis","yaxis"],Om.idRoot=["x","y"],Om.idRegex=Oe.idRegex,Om.attrRegex=Oe.attrRegex,Om.attributes=Se,Om.supplyLayoutDefaults=function(t,e,r){e._has("cartesian")||tl.supplyLayoutDefaults(t,e,r)},Om.layoutAttrOverrides=Dm(tl.layoutAttributes,"plot","from-root"),Om.baseLayoutAttrOverrides=Dm({plot_bgcolor:P.plot_bgcolor,hoverlabel:Ee.hoverlabel},"plot","nested"),Om.plot=function(t){for(var e=t._fullLayout,r=t._fullData,n=e._subplots.gl2d,a=0;a<n.length;a++){var i=n[a],o=e._plots[i],l=Rm(r,"gl2d",i),s=o._scene2d;void 0===s&&(s=new Sm({id:i,graphDiv:t,container:t.querySelector(".gl-container"),staticPlot:t._context.staticPlot,plotGlPixelRatio:t._context.plotGlPixelRatio},e),o._scene2d=s),s.plot(l,t.calcdata,e,t.layout)}},Om.clean=function(t,e,r,n){for(var a=n._subplots.gl2d||[],i=0;i<a.length;i++){var o=a[i],l=n._plots[o];if(l._scene2d)0===Rm(t,"gl2d",o).length&&(l._scene2d.destroy(),delete n._plots[o])}tl.clean.apply(this,arguments)},Om.drawFramework=function(t){t._context.staticPlot||tl.drawFramework(t)},Om.toSVG=function(t){for(var e=t._fullLayout,r=e._subplots.gl2d,n=0;n<r.length;n++){var a=e._plots[r[n]]._scene2d,i=a.toImage("png");e._glimages.append("svg:image").attr({xmlns:Ce.svg,"xlink:href":i,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),a.destroy()}},Om.updateFx=function(t){for(var e=t._subplots.gl2d,r=0;r<e.length;r++){t._plots[e[r]]._scene2d.updateFx(t.dragmode)}};var Pm=["=","<",">=",">","<="],Im=["[]","()","[)","(]","][",")(","](",")["],Bm={"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["},Fm=b.extendFlat,zm=Fm({},{z:{valType:"data_array",editType:"calc"},x:Fm({},Ln.x,{impliedEdits:{xtype:"array"}}),x0:Fm({},Ln.x0,{impliedEdits:{xtype:"scaled"}}),dx:Fm({},Ln.dx,{impliedEdits:{xtype:"scaled"}}),y:Fm({},Ln.y,{impliedEdits:{ytype:"array"}}),y0:Fm({},Ln.y0,{impliedEdits:{ytype:"scaled"}}),dy:Fm({},Ln.dy,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"}},nr,{autocolorscale:Fm({},nr.autocolorscale,{dflt:!1})},{colorbar:fr}),Nm=or.dash,jm=b.extendFlat,Um=Pm,Vm=Im,Hm=Ln.line,qm=jm({z:zm.z,x:zm.x,x0:zm.x0,dx:zm.dx,y:zm.y,y0:zm.y0,dy:zm.dy,text:zm.text,transpose:zm.transpose,xtype:zm.xtype,ytype:zm.ytype,zhoverformat:zm.zhoverformat,connectgaps:zm.connectgaps,fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:S({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",values:[].concat(Um).concat(Vm),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:jm({},Hm.color,{editType:"style+colorbars"}),width:jm({},Hm.width,{editType:"style+colorbars"}),dash:Nm,smoothing:jm({},Hm.smoothing,{}),editType:"plot"}},nr,{autocolorscale:jm({},nr.autocolorscale,{dflt:!1}),zmin:jm({},nr.zmin,{editType:"calc"}),zmax:jm({},nr.zmax,{editType:"calc"})},{colorbar:fr}),Gm=oe.extendFlat;function Xm(t,e,r){var n={type:"linear",range:[t,e]};return Na.autoTicks(n,(e-t)/(r||15)),n}var Ym=i.BADNUM,Wm=function(t){for(var e=0,r=0;r<t.length;r++)e=Math.max(e,t[r].length);return e},Zm=oe.isArrayOrTypedArray,Jm=function(t){return!Zm(t.z[0])},Qm=[[-1,0],[1,0],[0,-1],[0,1]];function $m(t){return.5-.25*Math.min(1,.5*t)}function Km(t,e,r){var n,a,i,o,l,s,u,c,f,h,d,p,g,v=0;for(o=0;o<e.length;o++){for(a=(n=e[o])[0],i=n[1],d=t[a][i],h=0,f=0,l=0;l<4;l++)(u=t[a+(s=Qm[l])[0]])&&void 0!==(c=u[i+s[1]])&&(0===h?p=g=c:(p=Math.min(p,c),g=Math.max(g,c)),f++,h+=c);if(0===f)throw"iterateInterp2d order is wrong: no defined neighbors";t[a][i]=h/f,void 0===d?f<4&&(v=1):(t[a][i]=(1+r)*t[a][i]-r*d,g>p&&(v=Math.max(v,Math.abs(t[a][i]-d)/(g-p))))}return v}var ty=oe.isArrayOrTypedArray,ey=function(t,e,r,n,a,i){var o,l,s,u=[],c=I.traceIs(t,"contour"),f=I.traceIs(t,"histogram"),h=I.traceIs(t,"gl2d");if(ty(e)&&e.length>1&&!f&&"category"!==i.type){var d=e.length;if(!(d<=a))return c?e.slice(0,a):e.slice(0,a+1);if(c||h)u=e.slice(0,a);else if(1===a)u=[e[0]-.5,e[0]+.5];else{for(u=[1.5*e[0]-.5*e[1]],s=1;s<d;s++)u.push(.5*(e[s-1]+e[s]));u.push(1.5*e[d-1]-.5*e[d-2])}if(d<a){var p=u[u.length-1],g=p-u[u.length-2];for(s=d;s<a;s++)p+=g,u.push(p)}}else{l=n||1;var v=t[i._id.charAt(0)+"calendar"];for(o=f||"category"===i.type?i.r2c(r,0,v)||0:ty(e)&&1===e.length?e[0]:void 0===r?0:i.d2c(r,0,v),s=c||h?0:-.5;s<a;s++)u.push(o+l*s)}return u},ry=function(t,e){for(var r=t.length,n=0,a=0;a<r;a++)e[a]?(t[a]/=e[a],n+=t[a]):t[a]=null;return n},ny={count:function(t,e,r){return r[t]++,1},sum:function(t,e,r,n){var i=n[e];return a(i)?(i=Number(i),r[t]+=i,i):0},avg:function(t,e,r,n,i){var o=n[e];return a(o)&&(o=Number(o),r[t]+=o,i[t]++),0},min:function(t,e,r,n){var i=n[e];if(a(i)){if(i=Number(i),!a(r[t]))return r[t]=i,i;if(r[t]>i){var o=i-r[t];return r[t]=i,o}}return 0},max:function(t,e,r,n){var i=n[e];if(a(i)){if(i=Number(i),!a(r[t]))return r[t]=i,i;if(r[t]<i){var o=i-r[t];return r[t]=i,o}}return 0}},ay=i.ONEAVGYEAR,iy=i.ONEAVGMONTH,oy=i.ONEDAY,ly=i.ONEHOUR,sy=i.ONEMIN,uy=i.ONESEC,cy=Na.tickIncrement,fy=function(t,e,r,n,a){var i,o,l=-1.1*e,s=-.1*e,u=t-s,c=r[0],f=r[1],h=Math.min(hy(c+s,c+u,n,a),hy(f+s,f+u,n,a)),d=Math.min(hy(c+l,c+s,n,a),hy(f+l,f+s,n,a));if(h>d&&d<Math.abs(f-c)/4e3?(i=h,o=!1):(i=Math.min(h,d),o=!0),"date"===n.type&&i>oy){var p=i===ay?1:6,g=i===ay?"M12":"M1";return function(e,r){var i=n.c2d(e,ay,a),l=i.indexOf("-",p);l>0&&(i=i.substr(0,l));var s=n.d2c(i,0,a);if(s<e){var u=cy(s,g,!1,a);(s+u)/2<e+t&&(s=u)}return r&&o?cy(s,g,!0,a):s}}return function(e,r){var n=i*Math.round(e/i);return n+i/10<e&&n+.9*i<e+t&&(n+=i),r&&o&&(n-=i),n}};function hy(t,e,r,n){if(t*e<=0)return 1/0;for(var a=Math.abs(e-t),i="date"===r.type,o=dy(a,i),l=0;l<10;l++){var s=dy(80*o,i);if(o===s)break;if(!py(s,t,e,i,r,n))break;o=s}return o}function dy(t,e){return e&&t>uy?t>oy?t>1.1*ay?ay:t>1.1*iy?iy:oy:t>ly?ly:t>sy?sy:uy:Math.pow(10,Math.floor(Math.log(t)/Math.LN10))}function py(t,e,r,n,a,i){if(n&&t>oy){var o=gy(e,a,i),l=gy(r,a,i),s=t===ay?0:1;return o[s]!==l[s]}return Math.floor(r/t)-Math.floor(e/t)>.1}function gy(t,e,r){var n=e.c2d(t,ay,r).split("-");return""===n[0]&&(n.unshift(),n[0]="-"+n[0]),n}var vy=oe.cleanDate,my=i.ONEDAY,yy=i.BADNUM,xy=function(t,e,r){var n=e.type,i=r+"bins",o=t[i];o||(o=t[i]={});var l="date"===n?function(t){return t||0===t?vy(t,yy,o.calendar):null}:function(t){return a(t)?Number(t):null};o.start=l(o.start),o.end=l(o.end);var s="date"===n?my:1,u=o.size;if(a(u))o.size=u>0?Number(u):s;else if("string"!=typeof u)o.size=s;else{var c=u.charAt(0),f=u.substr(1);((f=a(f)?Number(f):0)<=0||"date"!==n||"M"!==c||f!==Math.round(f))&&(o.size=s)}var h="autobin"+r;"boolean"!=typeof t[h]&&(t[h]=t._fullInput[h]=t._input[h]=!((o.start||0===o.start)&&(o.end||0===o.end))),t[h]||(delete t["nbins"+r],delete t._fullInput["nbins"+r])},by={percent:function(t,e){for(var r=t.length,n=100/e,a=0;a<r;a++)t[a]*=n},probability:function(t,e){for(var r=t.length,n=0;n<r;n++)t[n]/=e},density:function(t,e,r,n){var a=t.length;n=n||1;for(var i=0;i<a;i++)t[i]*=r[i]*n},"probability density":function(t,e,r,n){var a=t.length;n&&(e/=n);for(var i=0;i<a;i++)t[i]*=r[i]/e}};function _y(t,e,r,n,a,i,o){var l=e+"bins",s="autobin"+e,u=t[l];xy(t,n,e),!t[s]&&u&&null!==u.start&&null!==u.end||(u=Na.autoBin(r,n,t["nbins"+e],"2d",o),"histogram2dcontour"===t.type&&(u.start=i(Na.tickIncrement(a(u.start),u.size,!0,o)),u.end=i(Na.tickIncrement(a(u.end),u.size,!1,o))),t._input[l]=t[l]=u,t._input[s]=t[s])}function wy(t,e,r,n){var a,i=new Array(t);if(n)for(a=0;a<t;a++)i[a]=1/(e[a+1]-e[a]);else{var o=1/r;for(a=0;a<t;a++)i[a]=o}return i}function Ay(t,e){return{start:t(e.start),end:t(e.end),size:e.size}}function My(t,e,r,n,a,i){var o,l=t.length-1,s=new Array(l);if(e)for(o=0;o<l;o++)s[o]=[e[o],e[o]];else{var u=fy(r,n,t,a,i);for(o=0;o<l;o++)s[o]=[u(t[o]),u(t[o+1],!0)]}return s}var Ty=function(t,e){var r,n,i,o,l,s,u,c,f,h=Na.getFromId(t,e.xaxis||"x"),d=Na.getFromId(t,e.yaxis||"y"),p=I.traceIs(e,"contour"),g=I.traceIs(e,"histogram"),v=I.traceIs(e,"gl2d"),m=p?"best":e.zsmooth;if(h._minDtick=0,d._minDtick=0,g)r=(f=function(t,e){var r,n,a,i,o=Na.getFromId(t,e.xaxis||"x"),l=e.x?o.makeCalcdata(e,"x"):[],s=Na.getFromId(t,e.yaxis||"y"),u=e.y?s.makeCalcdata(e,"y"):[],c=e.xcalendar,f=e.ycalendar,h=function(t){return o.r2c(t,0,c)},d=function(t){return s.r2c(t,0,f)},p=function(t){return o.c2r(t,0,c)},g=function(t){return s.c2r(t,0,f)},v=Math.min(l.length,u.length);l.length>v&&l.splice(v,l.length-v),u.length>v&&u.splice(v,u.length-v),_y(e,"x",l,o,h,p,c),_y(e,"y",u,s,d,g,f);var m=[],y=[],x=[],b="string"==typeof e.xbins.size,_="string"==typeof e.ybins.size,w=[],A=[],M=b?w:e.xbins,T=_?A:e.ybins,k=0,E=[],C=[],S=e.histnorm,L=e.histfunc,O=-1!==S.indexOf("density"),D="max"===L||"min"===L?null:0,R=ny.count,P=by[S],I=!1,B=[],F=[],z="z"in e?e.z:"marker"in e&&Array.isArray(e.marker.color)?e.marker.color:"";z&&"count"!==L&&(I="avg"===L,R=ny[L]);var N=e.xbins,j=h(N.start),U=h(N.end)+(j-Na.tickIncrement(j,N.size,!1,c))/1e6;for(r=j;r<U;r=Na.tickIncrement(r,N.size,!1,c))y.push(D),w.push(r),I&&x.push(0);w.push(r);var V=y.length,H=h(e.xbins.start),q=(r-H)/V,G=p(H+q/2);for(j=d((N=e.ybins).start),U=d(N.end)+(j-Na.tickIncrement(j,N.size,!1,f))/1e6,r=j;r<U;r=Na.tickIncrement(r,N.size,!1,f)){m.push(y.slice()),A.push(r);var X=new Array(V);for(n=0;n<V;n++)X[n]=[];C.push(X),I&&E.push(x.slice())}A.push(r);var Y=m.length,W=d(e.ybins.start),Z=(r-W)/Y,J=g(W+Z/2);O&&(B=wy(y.length,M,q,b),F=wy(m.length,T,Z,_)),b||"date"!==o.type||(M=Ay(h,M)),_||"date"!==s.type||(T=Ay(d,T));var Q=!0,$=!0,K=new Array(V),tt=new Array(Y),et=1/0,rt=1/0,nt=1/0,at=1/0;for(r=0;r<v;r++){var it=l[r],ot=u[r];a=oe.findBin(it,M),i=oe.findBin(ot,T),a>=0&&a<V&&i>=0&&i<Y&&(k+=R(a,r,m[i],z,E[i]),C[i][a].push(r),Q&&(void 0===K[a]?K[a]=it:K[a]!==it&&(Q=!1)),$&&(void 0===tt[a]?tt[a]=ot:tt[a]!==ot&&($=!1)),et=Math.min(et,it-w[a]),rt=Math.min(rt,w[a+1]-it),nt=Math.min(nt,ot-A[i]),at=Math.min(at,A[i+1]-ot))}if(I)for(i=0;i<Y;i++)k+=ry(m[i],E[i]);if(P)for(i=0;i<Y;i++)P(m[i],k,B,F[i]);return{x:l,xRanges:My(w,Q&&K,et,rt,o,c),x0:G,dx:q,y:u,yRanges:My(A,$&&tt,nt,at,s,f),y0:J,dy:Z,z:m,pts:C}}(t,e)).x,n=f.x0,i=f.dx,o=f.y,l=f.y0,s=f.dy,u=f.z;else{var y=e.z;Jm(e)?(!function(t,e,r,n,a,i){var o,l,s,u=t[n].slice(),c=t[a].slice(),f=t.text,h=Math.min(u.length,c.length),d=void 0!==f&&!Array.isArray(f[0]),p=t[n+"calendar"],g=t[a+"calendar"];for(o=0;o<i.length;o++)(s=t[i[o]])&&(h=Math.min(h,s.length));for(h<u.length&&(u=u.slice(0,h)),h<c.length&&(c=c.slice(0,h)),o=0;o<h;o++)u[o]=e.d2c(u[o],0,p),c[o]=r.d2c(c[o],0,g);var v,m,y,x=oe.distinctVals(u),b=x.vals,_=oe.distinctVals(c),w=_.vals,A=[];for(o=0;o<i.length;o++)A[o]=oe.init2dArray(w.length,b.length);for(d&&(y=oe.init2dArray(w.length,b.length)),o=0;o<h;o++)if(u[o]!==Ym&&c[o]!==Ym){for(v=oe.findBin(u[o]+x.minDiff/2,b),m=oe.findBin(c[o]+_.minDiff/2,w),l=0;l<i.length;l++)s=t[i[l]],A[l][m][v]=s[o];d&&(y[m][v]=f[o])}for(t["_"+n]=b,t["_"+a]=w,l=0;l<i.length;l++)t["_"+i[l]]=A[l];d&&(t._text=y)}(e,h,d,"x","y",["z"]),r=e._x,o=e._y,y=e._z):(r=e.x?h.makeCalcdata(e,"x"):[],o=e.y?d.makeCalcdata(e,"y"):[]),n=e.x0||0,i=e.dx||1,l=e.y0||0,s=e.dy||1,u=function(t,e){var r,n,i,o,l,s;function u(t){if(a(t))return+t}if(e){for(r=0,l=0;l<t.length;l++)r=Math.max(r,t[l].length);if(0===r)return!1;i=function(t){return t.length},o=function(t,e,r){return t[r][e]}}else r=t.length,i=function(t,e){return t[e].length},o=function(t,e,r){return t[e][r]};var c=new Array(r);for(l=0;l<r;l++)for(n=i(t,l),c[l]=new Array(n),s=0;s<n;s++)c[l][s]=u(o(t,l,s));return c}(y,e.transpose),(p||e.connectgaps)&&(e._emptypoints=function(t){var e,r,n,a,i,o,l,s,u=[],c={},f=[],h=t[0],d=[],p=[0,0,0],g=Wm(t);for(r=0;r<t.length;r++)for(e=d,d=h,h=t[r+1]||[],n=0;n<g;n++)void 0===d[n]&&((o=(void 0!==d[n-1]?1:0)+(void 0!==d[n+1]?1:0)+(void 0!==e[n]?1:0)+(void 0!==h[n]?1:0))?(0===r&&o++,0===n&&o++,r===t.length-1&&o++,n===d.length-1&&o++,o<4&&(c[[r,n]]=[r,n,o]),u.push([r,n,o])):f.push([r,n]));for(;f.length;){for(l={},s=!1,i=f.length-1;i>=0;i--)(o=((c[[(r=(a=f[i])[0])-1,n=a[1]]]||p)[2]+(c[[r+1,n]]||p)[2]+(c[[r,n-1]]||p)[2]+(c[[r,n+1]]||p)[2])/20)&&(l[a]=[r,n,o],f.splice(i,1),s=!0);if(!s)throw"findEmpties iterated with no new neighbors";for(a in l)c[a]=l[a],u.push(l[a])}return u.sort(function(t,e){return e[2]-t[2]})}(u),e._interpz=function(t,e,r){var n,a,i=1;if(Array.isArray(r))for(n=0;n<e.length;n++)t[(a=e[n])[0]][a[1]]=r[a[0]][a[1]];else Km(t,e);for(n=0;n<e.length&&!(e[n][2]<4);n++);for(e=e.slice(n),n=0;n<100&&i>.01;n++)i=Km(t,e,$m(i));return i>.01&&oe.log("interp2d didn't converge quickly",i),t}(u,e._emptypoints,e._interpz))}function x(t){m=e._input.zsmooth=e.zsmooth=!1,oe.warn('cannot use zsmooth: "fast": '+t)}if("fast"===m)if("log"===h.type||"log"===d.type)x("log axis found");else if(!g){if(r.length){var b=(r[r.length-1]-r[0])/(r.length-1),_=Math.abs(b/100);for(c=0;c<r.length-1;c++)if(Math.abs(r[c+1]-r[c]-b)>_){x("x scale is not linear");break}}if(o.length&&"fast"===m){var w=(o[o.length-1]-o[0])/(o.length-1),A=Math.abs(w/100);for(c=0;c<o.length-1;c++)if(Math.abs(o[c+1]-o[c]-w)>A){x("y scale is not linear");break}}}var M=Wm(u),T="scaled"===e.xtype?"":r,k=ey(e,T,n,i,M,h),E="scaled"===e.ytype?"":o,C=ey(e,E,l,s,u.length,d);v||(Na.expand(h,k),Na.expand(d,C));var S={x:k,y:C,z:u,text:e._text||e.text};if(T&&T.length===k.length-1&&(S.xCenter=T),E&&E.length===C.length-1&&(S.yCenter=E),g&&(S.xRanges=f.xRanges,S.yRanges=f.yRanges,S.pts=f.pts),p&&"constraint"===e.contours.type||ir(e,u,"","z"),p&&e.contours&&"heatmap"===e.contours.coloring){var L={type:"contour"===e.type?"heatmap":"histogram2d",xcalendar:e.xcalendar,ycalendar:e.ycalendar};S.xfill=ey(L,T,n,i,M,h),S.yfill=ey(L,E,l,s,u.length,d)}return[S]},ky=b.extendFlat,Ey=wr.LINE_SPACING,Cy={colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"},Sy=function(t,e){var r={};function a(){var o=t._fullLayout,l=o._size;if("function"==typeof r.fillcolor||"function"==typeof r.line.color){var s,u,f=n.extent(("function"==typeof r.fillcolor?r.fillcolor:r.line.color).domain()),h=[],d=[],p="function"==typeof r.line.color?r.line.color:function(){return r.line.color},g="function"==typeof r.fillcolor?r.fillcolor:function(){return r.fillcolor},v=r.levels.end+r.levels.size/100,m=r.levels.size,y=1.001*f[0]-.001*f[1],x=1.001*f[1]-.001*f[0];for(u=0;u<1e5&&(s=r.levels.start+u*m,!(m>0?s>=v:s<=v));u++)s>y&&s<x&&h.push(s);if("function"==typeof r.fillcolor)if(r.filllevels)for(v=r.filllevels.end+r.filllevels.size/100,m=r.filllevels.size,u=0;u<1e5&&(s=r.filllevels.start+u*m,!(m>0?s>=v:s<=v));u++)s>f[0]&&s<f[1]&&d.push(s);else(d=h.map(function(t){return t-r.levels.size/2})).push(d[d.length-1]+r.levels.size);else r.fillcolor&&"string"==typeof r.fillcolor&&(d=[0]);r.levels.size<0&&(h.reverse(),d.reverse());var b,_=o.height-o.margin.t-o.margin.b,w=o.width-o.margin.l-o.margin.r,A=Math.round(r.thickness*("fraction"===r.thicknessmode?w:1)),M=A/l.w,T=Math.round(r.len*("fraction"===r.lenmode?_:1)),k=T/l.h,E=r.xpad/l.w,C=(r.borderwidth+r.outlinewidth)/2,S=r.ypad/l.h,L=Math.round(r.x*l.w+r.xpad),O=r.x-M*({middle:.5,right:1}[r.xanchor]||0),D=r.y+k*(({top:-.5,bottom:.5}[r.yanchor]||0)-.5),R=Math.round(l.h*(1-D)),P=R-T,B={type:"linear",range:f,tickmode:r.tickmode,nticks:r.nticks,tick0:r.tick0,dtick:r.dtick,tickvals:r.tickvals,ticktext:r.ticktext,ticks:r.ticks,ticklen:r.ticklen,tickwidth:r.tickwidth,tickcolor:r.tickcolor,showticklabels:r.showticklabels,tickfont:r.tickfont,tickangle:r.tickangle,tickformat:r.tickformat,exponentformat:r.exponentformat,separatethousands:r.separatethousands,showexponent:r.showexponent,showtickprefix:r.showtickprefix,tickprefix:r.tickprefix,showticksuffix:r.showticksuffix,ticksuffix:r.ticksuffix,title:r.title,titlefont:r.titlefont,showline:!0,anchor:"free",position:1},F={type:"linear",_id:"y"+e},z={letter:"y",font:o.font,noHover:!0,calendar:o.calendar};if(Ho(B,F,K,z,o),Xo(B,F,K,z),F.position=r.x+E+M,a.axis=F,-1!==["top","bottom"].indexOf(r.titleside)&&(F.titleside=r.titleside,F.titlex=r.x+E,F.titley=D+("top"===r.titleside?k-S:S)),r.line.color&&"auto"===r.tickmode){F.tickmode="linear",F.tick0=r.levels.start;var N=r.levels.size,j=oe.constrain((R-P)/50,4,15)+1,U=(f[1]-f[0])/((r.nticks||j)*N);if(U>1){var V=Math.pow(10,Math.floor(Math.log(U)/Math.LN10));N*=V*oe.roundUp(U/V,[2,5,10]),(Math.abs(r.levels.start)/r.levels.size+1e-6)%1<2e-6&&(F.tick0=0)}F.dtick=N}F.domain=[D+S,D+k-S],F.setScale();var H=oe.ensureSingle(o._infolayer,"g",e,function(t){t.classed(Cy.colorbar,!0).each(function(){var t=n.select(this);t.append("rect").classed(Cy.cbbg,!0),t.append("g").classed(Cy.cbfills,!0),t.append("g").classed(Cy.cblines,!0),t.append("g").classed(Cy.cbaxis,!0).classed(Cy.crisp,!0),t.append("g").classed(Cy.cbtitleunshift,!0).append("g").classed(Cy.cbtitle,!0),t.append("rect").classed(Cy.cboutline,!0),t.select(".cbtitle").datum(0)})});H.attr("transform","translate("+Math.round(l.l)+","+Math.round(l.t)+")");var q=H.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(l.l)+",-"+Math.round(l.t)+")");F._axislayer=H.select(".cbaxis");var G=0;if(-1!==["top","bottom"].indexOf(r.titleside)){var X,Y=l.l+(r.x+E)*l.w,W=F.titlefont.size;X="top"===r.titleside?(1-(D+k-S))*l.h+l.t+3+.75*W:(1-(D+S))*l.h+l.t-3-.25*W,tt(F._id+"title",{attributes:{x:Y,y:X,"text-anchor":"start"}})}var Z,J,Q,$=oe.syncOrAsync([na.previousPromises,function(){if(-1!==["top","bottom"].indexOf(r.titleside)){var e=H.select(".cbtitle"),a=e.select("text"),i=[-r.outlinewidth/2,r.outlinewidth/2],s=e.select(".h"+F._id+"title-math-group").node(),u=15.6;if(a.node()&&(u=parseInt(a.node().style.fontSize,10)*Ey),s?(G=Jr.bBox(s).height)>u&&(i[1]-=(G-u)/2):a.node()&&!a.classed(Cy.jsPlaceholder)&&(G=Jr.bBox(a.node()).height),G){if(G+=5,"top"===r.titleside)F.domain[1]-=G/l.h,i[1]*=-1;else{F.domain[0]+=G/l.h;var v=Mr.lineCount(a);i[1]+=(1-v)*u}e.attr("transform","translate("+i+")"),F.setScale()}}H.selectAll(".cbfills,.cblines").attr("transform","translate(0,"+Math.round(l.h*(1-F.domain[1]))+")"),F._axislayer.attr("transform","translate(0,"+Math.round(-l.t)+")");var m=H.select(".cbfills").selectAll("rect.cbfill").data(d);m.enter().append("rect").classed(Cy.cbfill,!0).style("stroke","none"),m.exit().remove(),m.each(function(t,e){var r=[0===e?f[0]:(d[e]+d[e-1])/2,e===d.length-1?f[1]:(d[e]+d[e+1])/2].map(F.c2p).map(Math.round);e!==d.length-1&&(r[1]+=r[1]>r[0]?1:-1);var a=g(t).replace("e-",""),i=c(a).toHexString();n.select(this).attr({x:L,width:Math.max(A,2),y:n.min(r),height:Math.max(n.max(r)-n.min(r),2),fill:i})});var y=H.select(".cblines").selectAll("path.cbline").data(r.line.color&&r.line.width?h:[]);return y.enter().append("path").classed(Cy.cbline,!0),y.exit().remove(),y.each(function(t){n.select(this).attr("d","M"+L+","+(Math.round(F.c2p(t))+r.line.width/2%1)+"h"+A).call(Jr.lineGroupStyle,r.line.width,p(t),r.line.dash)}),F._axislayer.selectAll("g."+F._id+"tick,path").remove(),F._pos=L+A+(r.outlinewidth||0)/2-("outside"===r.ticks?1:0),F.side="right",oe.syncOrAsync([function(){return Na.doTicks(t,F,!0)},function(){if(-1===["top","bottom"].indexOf(r.titleside)){var e=F.titlefont.size,a=F._offset+F._length/2,i=l.l+(F.position||0)*l.w+("right"===F.side?10+e*(F.showticklabels?1:.5):-10-e*(F.showticklabels?.5:0));tt("h"+F._id+"title",{avoid:{selection:n.select(t).selectAll("g."+F._id+"tick"),side:r.titleside,offsetLeft:l.l,offsetTop:0,maxShift:o.width},attributes:{x:i,y:a,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])},na.previousPromises,function(){var n=A+r.outlinewidth/2+Jr.bBox(F._axislayer.node()).width;if((b=q.select("text")).node()&&!b.classed(Cy.jsPlaceholder)){var a,i=q.select(".h"+F._id+"title-math-group").node();a=i&&-1!==["top","bottom"].indexOf(r.titleside)?Jr.bBox(i).width:Jr.bBox(q.node()).right-L-l.l,n=Math.max(n,a)}var o=2*r.xpad+n+r.borderwidth+r.outlinewidth/2,s=R-P;H.select(".cbbg").attr({x:L-r.xpad-(r.borderwidth+r.outlinewidth)/2,y:P-C,width:Math.max(o,2),height:Math.max(s+2*C,2)}).call($e.fill,r.bgcolor).call($e.stroke,r.bordercolor).style({"stroke-width":r.borderwidth}),H.selectAll(".cboutline").attr({x:L,y:P+r.ypad+("top"===r.titleside?G:0),width:Math.max(A,2),height:Math.max(s-2*r.ypad-G,2)}).call($e.stroke,r.outlinecolor).style({fill:"None","stroke-width":r.outlinewidth});var u=({center:.5,right:1}[r.xanchor]||0)*o;H.attr("transform","translate("+(l.l-u)+","+l.t+")"),na.autoMargin(t,e,{x:r.x,y:r.y,l:o*({right:1,center:.5}[r.xanchor]||0),r:o*({left:1,center:.5}[r.xanchor]||0),t:s*({bottom:1,middle:.5}[r.yanchor]||0),b:s*({top:1,middle:.5}[r.yanchor]||0)})}],t);if($&&$.then&&(t._promises||[]).push($),t._context.edits.colorbarPosition)Ye.init({element:H.node(),gd:t,prepFn:function(){Z=H.attr("transform"),bn(H)},moveFn:function(t,e){H.attr("transform",Z+" translate("+t+","+e+")"),J=Ye.align(O+t/l.w,M,0,1,r.xanchor),Q=Ye.align(D-e/l.h,k,0,1,r.yanchor);var n=Ye.getCursor(J,Q,r.xanchor,r.yanchor);bn(H,n)},doneFn:function(){bn(H),void 0!==J&&void 0!==Q&&I.call("restyle",t,{"colorbar.x":J,"colorbar.y":Q},i().index)}});return $}function K(t,e){return oe.coerce(B,F,ur,t,e)}function tt(e,r){var n,a=i();n=I.traceIs(a,"markerColorscale")?"marker.colorbar.title":"colorbar.title";var l={propContainer:F,propName:n,traceIndex:a.index,placeholder:o._dfltTitle.colorbar,containerGroup:H.select(".cbtitle")},s="h"===e.charAt(0)?e.substr(1):"h"+e;H.selectAll("."+s+",."+s+"-math-group").remove(),ma.draw(t,e,ky(l,r||{}))}o._infolayer.selectAll("g."+e).remove()}function i(){var r,n,a=e.substr(2);for(r=0;r<t._fullData.length;r++)if((n=t._fullData[r]).uid===a)return n}return Object.keys(fr).forEach(function(t){r[t]=null}),r.fillcolor=null,r.line={color:null,width:null,dash:null},r.levels={start:null,end:null,size:null},r.filllevels=null,Object.keys(r).forEach(function(t){a[t]=function(e){return arguments.length?(r[t]=oe.isPlainObject(r[t])?oe.extendFlat(r[t],e):e,a):r[t]}}),a.options=function(t){return Object.keys(t).forEach(function(e){"function"==typeof a[e]&&a[e](t[e])}),a},a._opts=r,a},Ly=function(t){return t.end+t.size/1e6},Oy=function(t){var e=t.contours,r=e.start,a=Ly(e),i=e.size||1,o=Math.floor((a-r)/i)+1,l="lines"===e.coloring?0:1;isFinite(i)||(i=1,o=1);var s,u,c=t.colorscale,f=c.length,h=new Array(f),d=new Array(f);if("heatmap"===e.coloring){for(t.zauto&&!1===t.autocontour&&(t.zmin=r-i/2,t.zmax=t.zmin+o*i),u=0;u<f;u++)s=c[u],h[u]=s[0]*(t.zmax-t.zmin)+t.zmin,d[u]=s[1];var p=n.extent([t.zmin,t.zmax,e.start,e.start+i*(o-1)]),g=p[t.zmin<t.zmax?0:1],v=p[t.zmin<t.zmax?1:0];g!==t.zmin&&(h.splice(0,0,g),d.splice(0,0,Range[0])),v!==t.zmax&&(h.push(v),d.push(d[d.length-1]))}else for(u=0;u<f;u++)s=c[u],h[u]=(s[0]*(o+l-1)-l/2)*i+r,d[u]=s[1];return br.makeColorScaleFunc({domain:h,range:d},{noNumericCheck:!0})},Dy=function(t,e,r,n){if(n||(n={}),t("contours.showlabels")){var a=e.font;oe.coerceFont(t,"contours.labelfont",{family:a.family,size:a.size,color:r}),t("contours.labelformat")}!1!==n.hasHover&&t("zhoverformat")},Ry=$e.addOpacity,Py=$e.opacity,Iy=Bm,By=Pm,Fy=function(t,e,r,n,i,o){var l,s,u,c=e.contours,f=r("contours.operation");(c._operation=Iy[f],function(t,e){var r;-1===By.indexOf(e.operation)?(t("contours.value",[0,1]),Array.isArray(e.value)?e.value.length>2?e.value=e.value.slice(2):0===e.length?e.value=[0,1]:e.length<2?(r=parseFloat(e.value[0]),e.value=[r,r+1]):e.value=[parseFloat(e.value[0]),parseFloat(e.value[1])]:a(e.value)&&(r=parseFloat(e.value),e.value=[r,r+1])):(t("contours.value",0),a(e.value)||(Array.isArray(e.value)?e.value=parseFloat(e.value[0]):e.value=0))}(r,c),"="===f?l=c.showlines=!0:(l=r("contours.showlines"),u=r("fillcolor",Ry((t.line||{}).color||i,.5))),l)&&(s=r("line.color",u&&Py(u)?Ry(e.fillcolor,1):i),r("line.width",2),r("line.dash"));r("line.smoothing"),Dy(r,n,s,o)};var zy=oe.isArrayOrTypedArray,Ny=function(t,e,r,n,i,o){var l,s,u=r("z");if(i=i||"x",o=o||"y",void 0===u||!u.length)return 0;if(Jm(t)){if(l=r(i),s=r(o),!l||!s)return 0}else{if(l=jy(i,r),s=jy(o,r),!function(t){for(var e,r=!0,n=!1,i=!1,o=0;o<t.length;o++){if(e=t[o],!zy(e)){r=!1;break}e.length>0&&(n=!0);for(var l=0;l<e.length;l++)if(a(e[l])){i=!0;break}}return r&&n&&i}(u))return 0;r("transpose")}return I.getComponentMethod("calendars","handleTraceDefaults")(t,e,[i,o],n),e.z.length};function jy(t,e){var r=e(t);return"scaled"===(r?e(t+"type","array"):"scaled")&&(e(t+"0"),e("d"+t)),r}var Uy={fragment:Ns(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:Ns(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec2 tangent;\nattribute vec4 color;\n\nuniform mat3 viewTransform;\nuniform vec2 screenShape;\nuniform float lineWidth;\nuniform float pointSize;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  fragColor = color;\n\n  vec3 vPosition = viewTransform * vec3(position, 1.0);\n  vec2 vTangent = normalize(viewTransform * vec3(tangent, 0)).xy;\n  vec2 offset = vec2(vTangent.y, -vTangent.x) / screenShape;\n\n  gl_Position = vec4(\n    vPosition.xy + offset * lineWidth * vPosition.z,\n    0,\n    vPosition.z);\n\n  gl_PointSize = pointSize;\n}\n"]),fillVertex:Ns(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\n\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  fragColor = color;\n  vec3 vPosition = viewTransform * vec3(position, 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])};function Vy(t,e,r,n,a){var i=["function ",t,"(a,l,h,",n.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return a?e.indexOf("c")<0?i.push(";if(x===y){return m}else if(x<=y){"):i.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):i.push(";if(",e,"){i=m;"),r?i.push("l=m+1}else{h=m-1}"):i.push("h=m-1}else{l=m+1}"),i.push("}"),a?i.push("return -1};"):i.push("return i};"),i.join("")}function Hy(t,e,r,n){return new Function([Vy("A","x"+t+"y",e,["y"],n),Vy("P","c(x,y)"+t+"0",e,["y","c"],n),"function dispatchBsearch",r,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",r].join(""))()}var qy={ge:Hy(">=",!1,"GE"),gt:Hy(">",!1,"GT"),lt:Hy("<",!0,"LT"),le:Hy("<=",!0,"LE"),eq:Hy("-",!0,"EQ",!0)},Gy=function(t,e){var r=t.gl,n=Zu(r,Uy.vertex,Uy.fragment),a=Zu(r,Uy.fillVertex,Uy.fragment),i=zs(r),o=zs(r),l=zs(r),s=zs(r),u=zs(r),c=new Xy(t,n,a,i,o,l,s,u);return c.update(e),t.addObject(c),c};function Xy(t,e,r,n,a,i,o,l){this.plot=t,this.shader=e,this.fillShader=r,this.positionBuffer=n,this.colorBuffer=a,this.idBuffer=i,this.fillPositionBuffer=o,this.fillColorBuffer=l,this.fillVerts=0,this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.numVertices=0,this.lineWidth=1}var Yy,Wy,Zy=Xy.prototype,Jy=[1,0,0,0,0,1,1,0,1,1,0,1];function Qy(t,e){var r=Math.floor(e);if(r<0)return t[0];if(r>=t.length-1)return t[t.length-1];var n=e-r;return(1-n)*t[r]+n*t[r+1]}Zy.draw=(Yy=[1,0,0,0,1,0,0,0,1],Wy=[0,0],function(){var t,e,r=this.plot,n=this.shader,a=this.fillShader,i=this.bounds,o=this.numVertices,l=this.fillVerts,s=r.gl,u=r.viewBox,c=r.dataBox,f=i[2]-i[0],h=i[3]-i[1],d=c[2]-c[0],p=c[3]-c[1];if(Yy[0]=2*f/d,Yy[4]=2*h/p,Yy[6]=2*(i[0]-c[0])/d-1,Yy[7]=2*(i[1]-c[1])/p-1,Wy[0]=u[2]-u[0],Wy[1]=u[3]-u[1],l>0&&(a.bind(),(t=a.uniforms).viewTransform=Yy,t.screenShape=Wy,e=n.attributes,this.fillPositionBuffer.bind(),e.position.pointer(),this.fillColorBuffer.bind(),e.color.pointer(s.UNSIGNED_BYTE,!0),s.drawArrays(s.TRIANGLES,0,l)),o>0){n.bind();var g=this.lineWidth*r.pixelRatio;(t=n.uniforms).viewTransform=Yy,t.screenShape=Wy,t.lineWidth=g,t.pointSize=1e3,e=n.attributes,this.positionBuffer.bind(),e.position.pointer(s.FLOAT,!1,16,0),e.tangent.pointer(s.FLOAT,!1,16,8),this.colorBuffer.bind(),e.color.pointer(s.UNSIGNED_BYTE,!0),s.drawArrays(s.TRIANGLES,0,o),t.lineWidth=0,t.pointSize=g,this.positionBuffer.bind(),e.position.pointer(s.FLOAT,!1,48,0),e.tangent.pointer(s.FLOAT,!1,48,8),this.colorBuffer.bind(),e.color.pointer(s.UNSIGNED_BYTE,!0,12,0),s.drawArrays(s.POINTS,0,o/3)}}),Zy.drawPick=function(t){return t},Zy.pick=function(t,e,r){return null},Zy.update=function(t){var e=(t=t||{}).shape||[0,0],r=t.x||Tl(e[0]),n=t.y||Tl(e[1]),a=t.z||new Float32Array(e[0]*e[1]),i=t.levels||[],o=t.levelColors||[],l=this.bounds,s=l[0]=r[0],u=l[1]=n[0],c=l[2]=r[r.length-1],f=l[3]=n[n.length-1];s===c&&(l[2]+=1,c+=1),u===f&&(l[3]+=1,f+=1);var h=1/(c-s),d=1/(f-u);this.lineWidth=t.lineWidth||1;var p=Rl(a,e),g=[],v=[],m=[],y=[],x=[[0,0],[e[0]-1,0],[0,e[1]-1],[e[0]-1,e[1]-1]];function b(t,e,r,n){var a=n-r;return Math.abs(a)<1e-6?e:Math.floor(e)+Math.max(.001,Math.min(.999,(t-r)/a))}for(var _=0;_<i.length;++_){var w=i[_];if(!(_>0&&w===i[_-1])){for(var A=Fg(p,w),M=255*o[4*_]|0,T=255*o[4*_+1]|0,k=255*o[4*_+2]|0,E=255*o[4*_+3]|0,C=A.cells,S=A.positions,L=Array(S.length),O=0;O<L.length;++O)L[O]=0;for(O=0;O<C.length;++O){var D=C[O];L[D[0]]+=1,L[D[1]]+=1}for(O=0;O<L.length;++O){var R=L[O];if(0!==R){var P=S[O];if(L[O]=x.length,x.push(P),!(R>1)){var I,B=P[0],F=P[1],z=p.get(Math.floor(B),Math.floor(F)),N=p.get(Math.floor(B),Math.ceil(F)),j=p.get(Math.ceil(B),Math.floor(F)),U=p.get(Math.ceil(B),Math.ceil(F));0===Math.floor(P[0])&&z<=w!=N<w?I=[0,b(w,P[1],z,N)]:Math.ceil(P[0])===e[0]-1&&j<=w!=U<w?I=[e[0]-1,b(w,P[1],j,U)]:0===Math.floor(P[1])&&z<=w!=j<w?I=[b(w,P[0],z,j),0]:Math.ceil(P[1])===e[1]-1&&N<=w!=U<w&&(I=[b(w,P[0],N,U),e[1]-1]),I&&(C.push([O,S.length]),L.push(x.length),S.push(I))}}}for(O=0;O<C.length;++O){var V=C[O],H=S[V[0]],q=S[V[1]];y.push([L[V[0]],L[V[1]]]);for(var G=Math.round(H[0])+e[0]*Math.round(H[1]),X=Qy(r,H[0]),Y=Qy(n,H[1]),W=Qy(r,q[0]),Z=Qy(n,q[1]),J=(X=h*(X-s))-(W=h*(W-s)),Q=(Y=d*(Y-u))-(Z=d*(Z-u)),$=0;$<Jy.length;$+=2){var K=Jy[$],tt=1-K,et=2*Jy[$+1]-1;g.push(tt*X+K*W,tt*Y+K*Z,et*J,et*Q),v.push(M,T,k,E),m.push(G)}}}}this.positionBuffer.update(new Float32Array(g)),this.colorBuffer.update(new Uint8Array(v)),this.idBuffer.update(new Uint32Array(m)),this.numVertices=m.length;var rt=t.fillColors,nt=[],at=[],it=0;if(rt){Dd(x,y);var ot=Of(x,y,{delaunay:!1});for(_=0;_<ot.length;++_){var lt=ot[_],st=0,ut=0;for(O=0;O<3;++O){var ct=x[lt[O]],ft=Qy(r,ct[0]),ht=Qy(n,ct[1]);st+=ct[0],ut+=ct[1],at.push(h*(ft-s),d*(ht-u))}st/=3,ut/=3;var dt=Math.floor(st),pt=Math.floor(ut),gt=st-dt,vt=ut-pt,mt=p.get(dt,pt),yt=p.get(dt,pt+1),xt=(1-vt)*((1-gt)*mt+gt*p.get(dt+1,pt))+vt*((1-gt)*yt+gt*p.get(dt+1,pt+1)),bt=qy.le(i,xt)+1,_t=255*rt[4*bt+0]|0,wt=255*rt[4*bt+1]|0,At=255*rt[4*bt+2]|0,Mt=255*rt[4*bt+3]|0;nt.push(_t,wt,At,Mt,_t,wt,At,Mt,_t,wt,At,Mt),it+=3}this.fillPositionBuffer.update(new Float32Array(at)),this.fillColorBuffer.update(new Uint8Array(nt)),this.fillVerts=it}},Zy.dispose=function(){this.plot.removeObject(this)};var $y={fragment:Ns(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:Ns(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:Ns(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:Ns(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])};function Ky(t,e,r,n,a){var i=["function ",t,"(a,l,h,",n.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return a?e.indexOf("c")<0?i.push(";if(x===y){return m}else if(x<=y){"):i.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):i.push(";if(",e,"){i=m;"),r?i.push("l=m+1}else{h=m-1}"):i.push("h=m-1}else{l=m+1}"),i.push("}"),a?i.push("return -1};"):i.push("return i};"),i.join("")}function tx(t,e,r,n){return new Function([Ky("A","x"+t+"y",e,["y"],n),Ky("P","c(x,y)"+t+"0",e,["y","c"],n),"function dispatchBsearch",r,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",r].join(""))()}var ex={ge:tx(">=",!1,"GE"),gt:tx(">",!1,"GT"),lt:tx("<",!0,"LT"),le:tx("<=",!0,"LE"),eq:tx("-",!0,"EQ",!0)},rx=function(t,e){var r=t.gl,n=Zu(r,$y.vertex,$y.fragment),a=Zu(r,$y.pickVertex,$y.pickFragment),i=zs(r),o=zs(r),l=zs(r),s=zs(r),u=new nx(t,n,a,i,o,l,s);return u.update(e),t.addObject(u),u};function nx(t,e,r,n,a,i,o){this.plot=t,this.shader=e,this.pickShader=r,this.positionBuffer=n,this.weightBuffer=a,this.colorBuffer=i,this.idBuffer=o,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var ax=nx.prototype,ix=[0,0,1,0,0,1,1,0,1,1,0,1];function ox(t,e){this.scene=t,this.uid=e,this.type="contourgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.contourOptions={z:new Float32Array(0),x:[],y:[],shape:[0,0],levels:[0],levelColors:[0,0,0,1],lineWidth:1},this.contour=Gy(t.glplot,this.contourOptions),this.contour._trace=this,this.heatmapOptions={z:new Float32Array(0),x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,0]},this.heatmap=rx(t.glplot,this.heatmapOptions),this.heatmap._trace=this}ax.draw=function(){var t=[1,0,0,0,1,0,0,0,1];return function(){var e=this.plot,r=this.shader,n=this.bounds,a=this.numVertices;if(!(a<=0)){var i=e.gl,o=e.dataBox,l=n[2]-n[0],s=n[3]-n[1],u=o[2]-o[0],c=o[3]-o[1];t[0]=2*l/u,t[4]=2*s/c,t[6]=2*(n[0]-o[0])/u-1,t[7]=2*(n[1]-o[1])/c-1,r.bind();var f=r.uniforms;f.viewTransform=t,f.shape=this.shape;var h=r.attributes;this.positionBuffer.bind(),h.position.pointer(),this.weightBuffer.bind(),h.weight.pointer(i.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),h.color.pointer(i.UNSIGNED_BYTE,!0),i.drawArrays(i.TRIANGLES,0,a)}}}(),ax.drawPick=function(){var t=[1,0,0,0,1,0,0,0,1],e=[0,0,0,0];return function(r){var n=this.plot,a=this.pickShader,i=this.bounds,o=this.numVertices;if(!(o<=0)){var l=n.gl,s=n.dataBox,u=i[2]-i[0],c=i[3]-i[1],f=s[2]-s[0],h=s[3]-s[1];t[0]=2*u/f,t[4]=2*c/h,t[6]=2*(i[0]-s[0])/f-1,t[7]=2*(i[1]-s[1])/h-1;for(var d=0;d<4;++d)e[d]=r>>8*d&255;this.pickOffset=r,a.bind();var p=a.uniforms;p.viewTransform=t,p.pickOffset=e,p.shape=this.shape;var g=a.attributes;return this.positionBuffer.bind(),g.position.pointer(),this.weightBuffer.bind(),g.weight.pointer(l.UNSIGNED_BYTE,!1),this.idBuffer.bind(),g.pickId.pointer(l.UNSIGNED_BYTE,!1),l.drawArrays(l.TRIANGLES,0,o),r+this.shape[0]*this.shape[1]}}}(),ax.pick=function(t,e,r){var n=this.pickOffset,a=this.shape[0]*this.shape[1];if(r<n||r>=n+a)return null;var i=r-n,o=this.xData,l=this.yData;return{object:this,pointId:i,dataCoord:[o[i%this.shape[0]],l[i/this.shape[0]|0]]}},ax.update=function(t){var e=(t=t||{}).shape||[0,0],r=t.x||Tl(e[0]),n=t.y||Tl(e[1]),a=t.z||new Float32Array(e[0]*e[1]);this.xData=r,this.yData=n;var i=t.colorLevels||[0],o=t.colorValues||[0,0,0,1],l=i.length,s=this.bounds,u=s[0]=r[0],c=s[1]=n[0],f=1/((s[2]=r[r.length-1])-u),h=1/((s[3]=n[n.length-1])-c),d=e[0],p=e[1];this.shape=[d,p];var g=(d-1)*(p-1)*(ix.length>>>1);this.numVertices=g;for(var v=Ds.mallocUint8(4*g),m=Ds.mallocFloat32(2*g),y=Ds.mallocUint8(2*g),x=Ds.mallocUint32(g),b=0,_=0;_<p-1;++_)for(var w=h*(n[_]-c),A=h*(n[_+1]-c),M=0;M<d-1;++M)for(var T=f*(r[M]-u),k=f*(r[M+1]-u),E=0;E<ix.length;E+=2){var C,S,L,O,D=ix[E],R=ix[E+1],P=a[(_+R)*d+(M+D)],I=ex.le(i,P);if(I<0)C=o[0],S=o[1],L=o[2],O=o[3];else if(I===l-1)C=o[4*l-4],S=o[4*l-3],L=o[4*l-2],O=o[4*l-1];else{var B=(P-i[I])/(i[I+1]-i[I]),F=1-B,z=4*I,N=4*(I+1);C=F*o[z]+B*o[N],S=F*o[z+1]+B*o[N+1],L=F*o[z+2]+B*o[N+2],O=F*o[z+3]+B*o[N+3]}v[4*b]=255*C,v[4*b+1]=255*S,v[4*b+2]=255*L,v[4*b+3]=255*O,m[2*b]=.5*T+.5*k,m[2*b+1]=.5*w+.5*A,y[2*b]=D,y[2*b+1]=R,x[b]=_*d+M,b+=1}this.positionBuffer.update(m),this.weightBuffer.update(y),this.colorBuffer.update(v),this.idBuffer.update(x),Ds.free(m),Ds.free(v),Ds.free(y),Ds.free(x)},ax.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};var lx=ox.prototype;function sx(t,e){for(var r=t.contours,n=r.start,a=r.end,i=r.size||1,o=e.fill,l=Oy(t),s=Math.floor((a-n)/i)+(o?2:1),u=new Array(s),c=new Array(4*s),f=0;f<s;f++)for(var h=u[f]=n+i*f-(o?i/2:0),d=vm(l(h)),p=0;p<4;p++)c[4*f+p]=d[p];return{levels:u,levelColors:c}}lx.handlePick=function(t){var e=this.heatmapOptions,r=e.shape,n=t.pointId,a=n%r[0],i=Math.floor(n/r[0]),o=n;return{trace:this,dataCoord:t.dataCoord,traceCoord:[e.x[a],e.y[i],e.z[o]],textLabel:this.textLabels[n],name:this.name,pointIndex:[i,a],hoverinfo:this.hoverinfo}},lx.update=function(t,e){var r=e[0];this.index=t.index,this.name=t.name,this.hoverinfo=t.hoverinfo;var n,a=r.z,i=a[0].length,o=a.length;this.contourOptions.z=function(t,e,r){for(var n=new Float32Array(e*r),a=0,i=0;i<e;i++)for(var o=0;o<r;o++)n[a++]=t[o][i];return n}(a,i,o),this.heatmapOptions.z=[].concat.apply([],a),this.contourOptions.shape=this.heatmapOptions.shape=[i,o],this.contourOptions.x=this.heatmapOptions.x=r.x,this.contourOptions.y=this.heatmapOptions.y=r.y,"fill"===t.contours.coloring?(n=sx(t,{fill:!0}),this.contourOptions.levels=n.levels.slice(1),this.contourOptions.fillColors=n.levelColors,this.contourOptions.levelColors=[].concat.apply([],this.contourOptions.levels.map(function(){return[.25,.25,.25,1]}))):(n=sx(t,{fill:!1}),this.contourOptions.levels=n.levels,this.contourOptions.levelColors=n.levelColors),this.textLabels=[].concat.apply([],t.text),this.contour.update(this.contourOptions),this.heatmap.update(this.heatmapOptions),Na.expand(this.scene.xaxis,r.x),Na.expand(this.scene.yaxis,r.y)},lx.dispose=function(){this.contour.dispose(),this.heatmap.dispose()};var ux=function(t,e,r){var n=new ox(t,e.uid);return n.update(e,r),n},cx=_e.overrideAll,fx={};fx.attributes=cx(qm,"calc","nested"),fx.supplyDefaults=function(t,e,r,n){function a(r,n){return oe.coerce(t,e,qm,r,n)}if(Ny(t,e,a,n)){a("text");var i="constraint"===a("contours.type");a("connectgaps",Jm(e)),i||delete e.showlegend,i?Fy(t,e,a,n,r):(function(t,e,r,n){var a=n("contours.start"),i=n("contours.end"),o=!1===a||!1===i,l=r("contours.size");!(o?e.autocontour=!0:r("autocontour",!1))&&l||r("ncontours")}(0,e,a,function(r){return oe.coerce2(t,e,qm,r)}),function(t,e,r,n,a){var i,o=r("contours.coloring"),l="";"fill"===o&&(i=r("contours.showlines")),!1!==i&&("lines"!==o&&(l=r("line.color","#000")),r("line.width",.5),r("line.dash")),"none"!==o&&mr(t,e,n,r,{prefix:"",cLetter:"z"}),r("line.smoothing"),Dy(r,n,l,a)}(t,e,a,n))}else e.visible=!1},fx.colorbar=function(t,e){var r=e[0].trace,n="cb"+r.uid;if(t._fullLayout._infolayer.selectAll("."+n).remove(),r.showscale){var a=Sy(t,n);e[0].t.cb=a;var i=r.contours,o=r.line,l=i.size||1,s=i.coloring,u=Oy(r,{isColorbar:!0});"heatmap"===s&&a.filllevels({start:r.zmin,end:r.zmax,size:(r.zmax-r.zmin)/254}),a.fillcolor("fill"===s||"heatmap"===s?u:"").line({color:"lines"===s?u:o.color,width:!1!==i.showlines?o.width:0,dash:o.dash}).levels({start:i.start,end:Ly(i),size:l}).options(r.colorbar)()}else na.autoMargin(t,n)},fx.calc=function(t,e){var r=Ty(t,e);return function(t){var e=t.contours;if(t.autocontour){var r=Xm(t.zmin,t.zmax,t.ncontours);e.size=r.dtick,e.start=Na.tickFirst(r),r.range.reverse(),e.end=Na.tickFirst(r),e.start===t.zmin&&(e.start+=e.size),e.end===t.zmax&&(e.end-=e.size),e.start>e.end&&(e.start=e.end=(e.start+e.end)/2),t._input.contours||(t._input.contours={}),Gm(t._input.contours,{start:e.start,end:e.end,size:e.size}),t._input.autocontour=!0}else if("constraint"!==e.type){var n,a=e.start,i=e.end,o=t._input.contours;a>i&&(e.start=o.start=i,i=e.end=o.end=a,a=e.start),e.size>0||(n=a===i?1:Xm(a,i,t.ncontours).dtick,o.size=e.size=n)}}(e),r},fx.plot=ux,fx.moduleType="trace",fx.name="contourgl",fx.basePlotModule=Om,fx.categories=["gl","gl2d","2dMap"],fx.meta={};var hx=fx,dx={"X,X div":"font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;background:rgba(255,255,255,0.7);","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group:first-child":"margin-left:0px;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar-btn path":"fill:rgba(0,31,95,0.3);","X .modebar-btn.active path,X .modebar-btn:hover path":"fill:rgba(0,22,72,0.5);","X .modebar-btn.modebar-btn--logo":"padding:3px 1px;","X .modebar-btn.modebar-btn--logo path":"fill:#447adb !important;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var px in dx){var gx=px.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");oe.addStyleRule(gx,dx[px])}var vx={undo:{width:857.1,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",ascent:850,descent:-150},home:{width:928.6,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",ascent:850,descent:-150},"camera-retro":{width:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",ascent:850,descent:-150},zoombox:{width:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",ascent:850,descent:-150},pan:{width:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",ascent:850,descent:-150},zoom_plus:{width:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",ascent:850,descent:-150},zoom_minus:{width:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",ascent:850,descent:-150},autoscale:{width:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",ascent:850,descent:-150},tooltip_basic:{width:1500,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",ascent:850,descent:-150},tooltip_compare:{width:1125,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",ascent:850,descent:-150},plotlylogo:{width:1542,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",ascent:850,descent:-150},"z-axis":{width:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",ascent:850,descent:-150},"3d_rotate":{width:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",ascent:850,descent:-150},camera:{width:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",ascent:850,descent:-150},movie:{width:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",ascent:850,descent:-150},question:{width:857.1,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",ascent:850,descent:-150},disk:{width:857.1,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",ascent:850,descent:-150},lasso:{width:1031,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",ascent:850,descent:-150},selectbox:{width:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",ascent:850,descent:-150},spikeline:{width:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",ascent:850,descent:-150}},mx={exports:{}};(function(t,e){!function(t,e){"object"==typeof mx.exports?mx.exports=e():"function"==typeof CC&&CC.amd?CC(e):t.ES6Promise=e()}(this,function(){"use strict";function r(t){return"function"==typeof t}var n=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},a=0,i=void 0,o=void 0,l=function(t,e){p[a]=t,p[a+1]=e,2===(a+=2)&&(o?o(g):b())};var s="undefined"!=typeof window?window:void 0,u=s||{},c=u.MutationObserver||u.WebKitMutationObserver,f="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function d(){var t=setTimeout;return function(){return t(g,1)}}var p=new Array(1e3);function g(){for(var t=0;t<a;t+=2){(0,p[t])(p[t+1]),p[t]=void 0,p[t+1]=void 0}a=0}var v,m,y,x,b=void 0;function _(t,e){var r=arguments,n=this,a=new this.constructor(M);void 0===a[A]&&U(a);var i,o=n._state;return o?(i=r[o-1],l(function(){return N(o,a,i,n._result)})):I(n,a,t,e),a}function w(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(M);return O(e,t),e}f?b=function(){return t.nextTick(g)}:c?(m=0,y=new c(g),x=document.createTextNode(""),y.observe(x,{characterData:!0}),b=function(){x.data=m=++m%2}):h?((v=new MessageChannel).port1.onmessage=g,b=function(){return v.port2.postMessage(0)}):b=void 0===s&&"function"==typeof require?function(){try{var t=require("vertx");return i=t.runOnLoop||t.runOnContext,function(){i(g)}}catch(t){return d()}}():d();var A=Math.random().toString(36).substring(16);function M(){}var T=void 0,k=1,E=2,C=new F;function S(t){try{return t.then}catch(t){return C.error=t,C}}function L(t,e,n){e.constructor===t.constructor&&n===_&&e.constructor.resolve===w?function(t,e){e._state===k?R(t,e._result):e._state===E?P(t,e._result):I(e,void 0,function(e){return O(t,e)},function(e){return P(t,e)})}(t,e):n===C?P(t,C.error):void 0===n?R(t,e):r(n)?function(t,e,r){l(function(t){var n=!1,a=function(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}(r,e,function(r){n||(n=!0,e!==r?O(t,r):R(t,r))},function(e){n||(n=!0,P(t,e))},t._label);!n&&a&&(n=!0,P(t,a))},t)}(t,e,n):R(t,e)}function O(t,e){var r;t===e?P(t,new TypeError("You cannot resolve a promise with itself")):"function"==typeof(r=e)||"object"==typeof r&&null!==r?L(t,e,S(e)):R(t,e)}function D(t){t._onerror&&t._onerror(t._result),B(t)}function R(t,e){t._state===T&&(t._result=e,t._state=k,0!==t._subscribers.length&&l(B,t))}function P(t,e){t._state===T&&(t._state=E,t._result=e,l(D,t))}function I(t,e,r,n){var a=t._subscribers,i=a.length;t._onerror=null,a[i]=e,a[i+k]=r,a[i+E]=n,0===i&&t._state&&l(B,t)}function B(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,a=void 0,i=t._result,o=0;o<e.length;o+=3)n=e[o],a=e[o+r],n?N(r,n,a,i):a(i);t._subscribers.length=0}}function F(){this.error=null}var z=new F;function N(t,e,n,a){var i=r(n),o=void 0,l=void 0,s=void 0,u=void 0;if(i){if((o=function(t,e){try{return t(e)}catch(t){return z.error=t,z}}(n,a))===z?(u=!0,l=o.error,o=null):s=!0,e===o)return void P(e,new TypeError("A promises callback cannot return that same promise."))}else o=a,s=!0;e._state!==T||(i&&s?O(e,o):u?P(e,l):t===k?R(e,o):t===E&&P(e,o))}var j=0;function U(t){t[A]=j++,t._state=void 0,t._result=void 0,t._subscribers=[]}function V(t,e){this._instanceConstructor=t,this.promise=new t(M),this.promise[A]||U(this.promise),n(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&R(this.promise,this._result))):P(this.promise,new Error("Array Methods must be provided an Array"))}function H(t){this[A]=j++,this._result=this._state=void 0,this._subscribers=[],M!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof H?function(t,e){try{e(function(e){O(t,e)},function(e){P(t,e)})}catch(e){P(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}function q(){var t=void 0;if(void 0!==e)t=e;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=t.Promise;if(r){var n=null;try{n=Object.prototype.toString.call(r.resolve())}catch(t){}if("[object Promise]"===n&&!r.cast)return}t.Promise=H}return V.prototype._enumerate=function(){for(var t=this.length,e=this._input,r=0;this._state===T&&r<t;r++)this._eachEntry(e[r],r)},V.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===w){var a=S(t);if(a===_&&t._state!==T)this._settledAt(t._state,e,t._result);else if("function"!=typeof a)this._remaining--,this._result[e]=t;else if(r===H){var i=new r(M);L(i,t,a),this._willSettleAt(i,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},V.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===T&&(this._remaining--,t===E?P(n,r):this._result[e]=r),0===this._remaining&&R(n,this._result)},V.prototype._willSettleAt=function(t,e){var r=this;I(t,void 0,function(t){return r._settledAt(k,e,t)},function(t){return r._settledAt(E,e,t)})},H.all=function(t){return new V(this,t).promise},H.race=function(t){var e=this;return n(t)?new e(function(r,n){for(var a=t.length,i=0;i<a;i++)e.resolve(t[i]).then(r,n)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},H.resolve=w,H.reject=function(t){var e=new this(M);return P(e,t),e},H._setScheduler=function(t){o=t},H._setAsap=function(t){l=t},H._asap=l,H.prototype={constructor:H,then:_,catch:function(t){return this.then(null,t)}},q(),H.polyfill=q,H.Promise=H,H})}).call(this,_c,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),mx=mx.exports;var yx=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}],xx={_isLinkedToArray:"annotation",visible:{valType:"boolean",dflt:!0,editType:"calcIfAutorange+arraydraw"},text:{valType:"string",editType:"calcIfAutorange+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calcIfAutorange+arraydraw"},font:S({editType:"calcIfAutorange+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calcIfAutorange+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calcIfAutorange+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calcIfAutorange+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calcIfAutorange+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calcIfAutorange+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:yx.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:yx.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calcIfAutorange+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calcIfAutorange+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calcIfAutorange+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calcIfAutorange+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calcIfAutorange+arraydraw"},ax:{valType:"any",editType:"calcIfAutorange+arraydraw"},ay:{valType:"any",editType:"calcIfAutorange+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",Oe.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",Oe.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",Oe.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calcIfAutorange+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calcIfAutorange+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calcIfAutorange+arraydraw"},yref:{valType:"enumerated",values:["paper",Oe.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calcIfAutorange+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calcIfAutorange+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calcIfAutorange+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:S({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}},bx=function(t,e,r){var a,i,o,l,s=t.node(),u=yx[r.arrowhead||0],c=yx[r.startarrowhead||0],f=(r.arrowwidth||1)*(r.arrowsize||1),h=(r.arrowwidth||1)*(r.startarrowsize||1),d=e.indexOf("start")>=0,p=e.indexOf("end")>=0,g=u.backoff*f+r.standoff,v=c.backoff*h+r.startstandoff;if("line"===s.nodeName){a={x:+t.attr("x1"),y:+t.attr("y1")},i={x:+t.attr("x2"),y:+t.attr("y2")};var m=a.x-i.x,y=a.y-i.y;if(l=(o=Math.atan2(y,m))+Math.PI,g&&v&&g+v>Math.sqrt(m*m+y*y))return void S();if(g){if(g*g>m*m+y*y)return void S();var x=g*Math.cos(o),b=g*Math.sin(o);i.x+=x,i.y+=b,t.attr({x2:i.x,y2:i.y})}if(v){if(v*v>m*m+y*y)return void S();var _=v*Math.cos(o),w=v*Math.sin(o);a.x-=_,a.y-=w,t.attr({x1:a.x,y1:a.y})}}else if("path"===s.nodeName){var A=s.getTotalLength(),M="";if(A<g+v)return void S();var T=s.getPointAtLength(0),k=s.getPointAtLength(.1);o=Math.atan2(T.y-k.y,T.x-k.x),a=s.getPointAtLength(Math.min(v,A)),M="0px,"+v+"px,";var E=s.getPointAtLength(A),C=s.getPointAtLength(A-.1);l=Math.atan2(E.y-C.y,E.x-C.x),i=s.getPointAtLength(Math.max(0,A-g)),M+=A-(M?v+g:g)+"px,"+A+"px",t.style("stroke-dasharray",M)}function S(){t.style("stroke-dasharray","0px,100px")}function L(e,a,i,o){e.path&&(e.noRotate&&(i=0),n.select(s.parentNode).append("path").attr({class:t.attr("class"),d:e.path,transform:"translate("+a.x+","+a.y+")"+(i?"rotate("+180*i/Math.PI+")":"")+"scale("+o+")"}).style({fill:$e.rgb(r.arrowcolor),"stroke-width":0}))}d&&L(c,a,o,h),p&&L(u,i,l,f)},_x={draw:function(t){var e=t._fullLayout;e._infolayer.selectAll(".annotation").remove();for(var r=0;r<e.annotations.length;r++)e.annotations[r].visible&&wx(t,r);return na.previousPromises(t)},drawOne:wx,drawRaw:Ax};function wx(t,e){var r=t._fullLayout.annotations[e]||{};Ax(t,r,e,!1,Na.getFromId(t,r.xref),Na.getFromId(t,r.yref))}function Ax(t,e,r,a,i,o){var l,s,u=t._fullLayout,c=t._fullLayout._size,f=t._context.edits;a?(l="annotation-"+a,s=a+".annotations["+r+"]"):(l="annotation",s="annotations["+r+"]"),u._infolayer.selectAll("."+l+'[data-index="'+r+'"]').remove();var h="clip"+u._uid+"_ann"+r;if(e._input&&!1!==e.visible){var d={x:{},y:{}},p=+e.textangle||0,g=u._infolayer.append("g").classed(l,!0).attr("data-index",String(r)).style("opacity",e.opacity),v=g.append("g").classed("annotation-text-g",!0),m=f[e.showarrow?"annotationTail":"annotationPosition"],y=e.captureevents||f.annotationText||m,x=v.append("g").style("pointer-events",y?"all":null).call(bn,"default").on("click",function(){t._dragging=!1;var i={index:r,annotation:e._input,fullAnnotation:e,event:n.event};a&&(i.subplotId=a),t.emit("plotly_clickannotation",i)});e.hovertext&&x.on("mouseover",function(){var r=e.hoverlabel,n=r.font,a=this.getBoundingClientRect(),i=t.getBoundingClientRect();Di.loneHover({x0:a.left-i.left,x1:a.right-i.left,y:(a.top+a.bottom)/2-i.top,text:e.hovertext,color:r.bgcolor,borderColor:r.bordercolor,fontFamily:n.family,fontSize:n.size,fontColor:n.color},{container:u._hoverlayer.node(),outerContainer:u._paper.node(),gd:t})}).on("mouseout",function(){Di.loneUnhover(u._hoverlayer.node())});var b=e.borderwidth,_=e.borderpad,w=b+_,A=x.append("rect").attr("class","bg").style("stroke-width",b+"px").call($e.stroke,e.bordercolor).call($e.fill,e.bgcolor),M=e.width||e.height,T=u._topclips.selectAll("#"+h).data(M?[0]:[]);T.enter().append("clipPath").classed("annclip",!0).attr("id",h).append("rect"),T.exit().remove();var k=e.font,E=x.append("text").classed("annotation-text",!0).text(e.text);f.annotationText?E.call(Mr.makeEditable,{delegate:x,gd:t}).call(C).on("edit",function(r){e.text=r,this.call(C);var n={};n[s+".text"]=e.text,i&&i.autorange&&(n[i._name+".autorange"]=!0),o&&o.autorange&&(n[o._name+".autorange"]=!0),I.call("relayout",t,n)}):E.call(C)}else n.selectAll("#"+h).remove();function C(r){return r.call(Jr.font,k).attr({"text-anchor":{left:"start",right:"end"}[e.align]||"middle"}),Mr.convertToTspans(r,t,S),r}function S(){var r=E.selectAll("a");1===r.size()&&r.text()===E.text()&&x.insert("a",":first-child").attr({"xlink:xlink:href":r.attr("xlink:href"),"xlink:xlink:show":r.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(A.node());var n=x.select(".annotation-text-math-group"),l=!n.empty(),y=Jr.bBox((l?n:E).node()),_=y.width,k=y.height,C=e.width||_,S=e.height||k,L=Math.round(C+2*w),O=Math.round(S+2*w);function D(t,e){return"auto"===e&&(e=t<1/3?"left":t>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[e]}e._w=C,e._h=S;for(var R=!1,P=["x","y"],B=0;B<P.length;B++){var F,z,N,j,U,V=P[B],H=e[V+"ref"]||V,q=e["a"+V+"ref"],G={x:i,y:o}[V],X=(p+("x"===V?0:-90))*Math.PI/180,Y=L*Math.cos(X),W=O*Math.sin(X),Z=Math.abs(Y)+Math.abs(W),J=e[V+"anchor"],Q=e[V+"shift"]*("x"===V?1:-1),$=d[V];if(G){var K=G.r2fraction(e[V]);if((t._dragging||!G.autorange)&&(K<0||K>1)&&(q===H?((K=G.r2fraction(e["a"+V]))<0||K>1)&&(R=!0):R=!0,R))continue;F=G._offset+G.r2p(e[V]),j=.5}else"x"===V?(N=e[V],F=c.l+c.w*N):(N=1-e[V],F=c.t+c.h*N),j=e.showarrow?.5:N;if(e.showarrow){$.head=F;var tt=e["a"+V];U=Y*D(.5,e.xanchor)-W*D(.5,e.yanchor),q===H?($.tail=G._offset+G.r2p(tt),z=U):($.tail=F+tt,z=U+tt),$.text=$.tail+U;var et=u["x"===V?"width":"height"];if("paper"===H&&($.head=oe.constrain($.head,1,et-1)),"pixel"===q){var rt=-Math.max($.tail-3,$.text),nt=Math.min($.tail+3,$.text)-et;rt>0?($.tail+=rt,$.text+=rt):nt>0&&($.tail-=nt,$.text-=nt)}$.tail+=Q,$.head+=Q}else z=U=Z*D(j,J),$.text=F+U;$.text+=Q,U+=Q,z+=Q,e["_"+V+"padplus"]=Z/2+z,e["_"+V+"padminus"]=Z/2-z,e["_"+V+"size"]=Z,e["_"+V+"shift"]=U}if(R)x.remove();else{var at=0,it=0;if("left"!==e.align&&(at=(C-_)*("center"===e.align?.5:1)),"top"!==e.valign&&(it=(S-k)*("middle"===e.valign?.5:1)),l)n.select("svg").attr({x:w+at-1,y:w+it}).call(Jr.setClipUrl,M?h:null);else{var ot=w+it-y.top,lt=w+at-y.left;E.call(Mr.positionText,lt,ot).call(Jr.setClipUrl,M?h:null)}T.select("rect").call(Jr.setRect,w,w,C,S),A.call(Jr.setRect,b/2,b/2,L-b,O-b),x.call(Jr.setTranslate,Math.round(d.x.text-L/2),Math.round(d.y.text-O/2)),v.attr({transform:"rotate("+p+","+d.x.text+","+d.y.text+")"});var st,ut,ct=function(r,n){g.selectAll(".annotation-arrow-g").remove();var l=d.x.head,u=d.y.head,h=d.x.tail+r,m=d.y.tail+n,y=d.x.text+r,b=d.y.text+n,_=oe.rotationXYMatrix(p,y,b),w=oe.apply2DTransform(_),M=oe.apply2DTransform2(_),T=+A.attr("width"),k=+A.attr("height"),E=y-.5*T,C=E+T,S=b-.5*k,L=S+k,O=[[E,S,E,L],[E,L,C,L],[C,L,C,S],[C,S,E,S]].map(M);if(!O.reduce(function(t,e){return t^!!oe.segmentsIntersect(l,u,l+1e6,u+1e6,e[0],e[1],e[2],e[3])},!1)){O.forEach(function(t){var e=oe.segmentsIntersect(h,m,l,u,t[0],t[1],t[2],t[3]);e&&(h=e.x,m=e.y)});var D=e.arrowwidth,R=e.arrowcolor,P=e.arrowside,B=g.append("g").style({opacity:$e.opacity(R)}).classed("annotation-arrow-g",!0),F=B.append("path").attr("d","M"+h+","+m+"L"+l+","+u).style("stroke-width",D+"px").call($e.stroke,$e.rgb(R));if(bx(F,P,e),f.annotationPosition&&F.node().parentNode&&!a){var z=l,N=u;if(e.standoff){var j=Math.sqrt(Math.pow(l-h,2)+Math.pow(u-m,2));z+=e.standoff*(h-l)/j,N+=e.standoff*(m-u)/j}var U,V,H,q=B.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(h-z)+","+(m-N),transform:"translate("+z+","+N+")"}).style("stroke-width",D+6+"px").call($e.stroke,"rgba(0,0,0,0)").call($e.fill,"rgba(0,0,0,0)");Ye.init({element:q.node(),gd:t,prepFn:function(){var t=Jr.getTranslate(x);V=t.x,H=t.y,U={},i&&i.autorange&&(U[i._name+".autorange"]=!0),o&&o.autorange&&(U[o._name+".autorange"]=!0)},moveFn:function(t,r){var n=w(V,H),a=n[0]+t,l=n[1]+r;x.call(Jr.setTranslate,a,l),U[s+".x"]=i?i.p2r(i.r2p(e.x)+t):e.x+t/c.w,U[s+".y"]=o?o.p2r(o.r2p(e.y)+r):e.y-r/c.h,e.axref===e.xref&&(U[s+".ax"]=i.p2r(i.r2p(e.ax)+t)),e.ayref===e.yref&&(U[s+".ay"]=o.p2r(o.r2p(e.ay)+r)),B.attr("transform","translate("+t+","+r+")"),v.attr({transform:"rotate("+p+","+a+","+l+")"})},doneFn:function(){I.call("relayout",t,U);var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}};if(e.showarrow&&ct(0,0),m)Ye.init({element:x.node(),gd:t,prepFn:function(){ut=v.attr("transform"),st={}},moveFn:function(t,r){var n="pointer";if(e.showarrow)e.axref===e.xref?st[s+".ax"]=i.p2r(i.r2p(e.ax)+t):st[s+".ax"]=e.ax+t,e.ayref===e.yref?st[s+".ay"]=o.p2r(o.r2p(e.ay)+r):st[s+".ay"]=e.ay+r,ct(t,r);else{if(a)return;if(i)st[s+".x"]=i.p2r(i.r2p(e.x)+t);else{var l=e._xsize/c.w,u=e.x+(e._xshift-e.xshift)/c.w-l/2;st[s+".x"]=Ye.align(u+t/c.w,l,0,1,e.xanchor)}if(o)st[s+".y"]=o.p2r(o.r2p(e.y)+r);else{var f=e._ysize/c.h,h=e.y-(e._yshift+e.yshift)/c.h-f/2;st[s+".y"]=Ye.align(h-r/c.h,f,0,1,e.yanchor)}i&&o||(n=Ye.getCursor(i?.5:st[s+".x"],o?.5:st[s+".y"],e.xanchor,e.yanchor))}v.attr({transform:"translate("+t+","+r+")"+ut}),bn(x,n)},doneFn:function(){bn(x),I.call("relayout",t,st);var e=document.querySelector(".js-notes-box-panel");e&&e.redraw(e.selectedObj)}})}}}var Mx=_x.draw;function Tx(t){var e=t._fullLayout;oe.filterVisible(e.annotations).forEach(function(e){var r,n,a,i,o=Na.getFromId(t,e.xref),l=Na.getFromId(t,e.yref),s=3*e.arrowsize*e.arrowwidth||0,u=3*e.startarrowsize*e.arrowwidth||0;o&&o.autorange&&(r=s+e.xshift,n=s-e.xshift,a=u+e.xshift,i=u-e.xshift,e.axref===e.xref?(Na.expand(o,[o.r2c(e.x)],{ppadplus:r,ppadminus:n}),Na.expand(o,[o.r2c(e.ax)],{ppadplus:Math.max(e._xpadplus,a),ppadminus:Math.max(e._xpadminus,i)})):(a=e.ax?a+e.ax:a,i=e.ax?i-e.ax:i,Na.expand(o,[o.r2c(e.x)],{ppadplus:Math.max(e._xpadplus,r,a),ppadminus:Math.max(e._xpadminus,n,i)}))),l&&l.autorange&&(r=s-e.yshift,n=s+e.yshift,a=u-e.yshift,i=u+e.yshift,e.ayref===e.yref?(Na.expand(l,[l.r2c(e.y)],{ppadplus:r,ppadminus:n}),Na.expand(l,[l.r2c(e.ay)],{ppadplus:Math.max(e._ypadplus,a),ppadminus:Math.max(e._ypadminus,i)})):(a=e.ay?a+e.ay:a,i=e.ay?i-e.ay:i,Na.expand(l,[l.r2c(e.y)],{ppadplus:Math.max(e._ypadplus,r,a),ppadminus:Math.max(e._ypadminus,n,i)})))})}var kx={hasClickToShow:function(t,e){var r=Ex(t,e);return r.on.length>0||r.explicitOff.length>0},onClick:function(t,e){var r,n=Ex(t,e),a=n.on,i=n.off.concat(n.explicitOff),o={};if(!a.length&&!i.length)return;for(r=0;r<a.length;r++)o["annotations["+a[r]+"].visible"]=!0;for(r=0;r<i.length;r++)o["annotations["+i[r]+"].visible"]=!1;return I.call("update",t,{},o)}};function Ex(t,e){var r,n,a,i,o,l,s,u=t._fullLayout.annotations,c=[],f=[],h=[],d=(e||[]).length;for(r=0;r<u.length;r++)if(i=(a=u[r]).clicktoshow){for(n=0;n<d;n++)if(l=(o=e[n]).xaxis,s=o.yaxis,l._id===a.xref&&s._id===a.yref&&l.d2r(o.x)===Cx(a._xclick,l)&&s.d2r(o.y)===Cx(a._yclick,s)){(a.visible?"onout"===i?f:h:c).push(r);break}n===d&&a.visible&&"onout"===i&&f.push(r)}return{on:c,off:f,explicitOff:h}}function Cx(t,e){return"log"===e.type?e.l2r(t):e.d2r(t)}var Sx=function(t,e,r,n){n("opacity");var a=n("bgcolor"),i=n("bordercolor"),o=$e.opacity(i);n("borderpad");var l=n("borderwidth"),s=n("showarrow");if(n("text",s?" ":r._dfltTitle.annotation),n("textangle"),oe.coerceFont(n,"font",r.font),n("width"),n("align"),n("height")&&n("valign"),s){var u,c,f=n("arrowside");-1!==f.indexOf("end")&&(u=n("arrowhead"),c=n("arrowsize")),-1!==f.indexOf("start")&&(n("startarrowhead",u),n("startarrowsize",c)),n("arrowcolor",o?e.bordercolor:$e.defaultLine),n("arrowwidth",2*(o&&l||1)),n("standoff"),n("startstandoff")}var h=n("hovertext"),d=r.hoverlabel||{};if(h){var p=n("hoverlabel.bgcolor",d.bgcolor||($e.opacity(a)?$e.rgb(a):$e.defaultLine)),g=n("hoverlabel.bordercolor",d.bordercolor||$e.contrast(p));oe.coerceFont(n,"hoverlabel.font",{family:d.font.family,size:d.font.size,color:d.font.color||g})}n("captureevents",!!h)},Lx=function(t,e,r,n,a){function i(r,n){return oe.coerce(t,e,xx,r,n)}n=n||{};var o=i("visible",!(a=a||{}).itemIsNotPlainObject),l=i("clicktoshow");if(!o&&!l)return e;Sx(t,e,r,i);for(var s=e.showarrow,u=["x","y"],c=[-10,-30],f={_fullLayout:r},h=0;h<2;h++){var d=u[h],p=Na.coerceRef(t,e,f,d,"","paper");if(Na.coercePosition(e,f,i,p,d,.5),s){var g="a"+d,v=Na.coerceRef(t,e,f,g,"pixel");"pixel"!==v&&v!==p&&(v=e[g]="pixel");var m="pixel"===v?c[h]:.4;Na.coercePosition(e,f,i,v,g,m)}i(d+"anchor"),i(d+"shift")}if(oe.noneOrAll(t,e,["x","y"]),s&&oe.noneOrAll(t,e,["ax","ay"]),l){var y=i("xclick"),x=i("yclick");e._xclick=void 0===y?e.x:Na.cleanPosition(y,f,e.xref),e._yclick=void 0===x?e.y:Na.cleanPosition(x,f,e.yref)}return e},Ox=function(t,e,r){var n,a=r.name,i=e[a],o=oe.isArrayOrTypedArray(t[a])?t[a]:[],l=e[a]=[];for(n=0;n<o.length;n++){var s=o[n],u={},c={};oe.isPlainObject(s)||(c.itemIsNotPlainObject=!0,s={}),r.handleItemDefaults(s,u,e,r,c),u._input=s,u._index=n,l.push(u)}if(oe.isArrayOrTypedArray(i)){var f=Math.min(i.length,l.length);for(n=0;n<f;n++)oe.relinkPrivateKeys(l[n],i[n])}},Dx=function(t){return function(e,r){var n=e[t];if(Array.isArray(n))for(var a=I.subplotsRegistry.cartesian,i=a.idRegex,o=r._subplots,l=o.xaxis,s=o.yaxis,u=o.cartesian,c=r._has("cartesian")||r._has("gl2d"),f=0;f<n.length;f++){var h=n[f];if(oe.isPlainObject(h)){var d=h.xref,p=h.yref,g=i.x.test(d),v=i.y.test(p);if(g||v){c||oe.pushUnique(r._basePlotModules,a);var m=!1;g&&-1===l.indexOf(d)&&(l.push(d),m=!0),v&&-1===s.indexOf(p)&&(s.push(p),m=!0),m&&g&&v&&u.push(d+p)}}}}},Rx={moduleType:"component",name:"annotations",layoutAttributes:xx,supplyLayoutDefaults:function(t,e){Ox(t,e,{name:"annotations",handleItemDefaults:Lx})},includeBasePlot:Dx("annotations"),calcAutorange:function(t){var e=t._fullLayout,r=oe.filterVisible(e.annotations);if(r.length&&t._fullData.length){var n={};for(var a in r.forEach(function(t){n[t.xref]=1,n[t.yref]=1}),n){var i=Na.getFromId(t,a);if(i&&i.autorange)return oe.syncOrAsync([Mx,Tx],t)}}},draw:_x.draw,drawOne:_x.drawOne,drawRaw:_x.drawRaw,hasClickToShow:kx.hasClickToShow,onClick:kx.onClick,convertCoords:function(t,e,r,n){e=e||{};var i="log"===r&&"linear"===e.type,o="linear"===r&&"log"===e.type;if(i||o)for(var l,s,u=t._fullLayout.annotations,c=e._id.charAt(0),f=0;f<u.length;f++)l=u[f],s="annotations["+f+"].",l[c+"ref"]===e._id&&h(c),l["a"+c+"ref"]===e._id&&h("a"+c);function h(t){var r=l[t],o=null;o=i?ie(r,e.range):Math.pow(10,r),a(o)||(o=null),n(s+t,o)}}},Px=(0,_e.overrideAll)({_isLinkedToArray:"annotation",visible:xx.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:xx.xanchor,xshift:xx.xshift,yanchor:xx.yanchor,yshift:xx.yshift,text:xx.text,textangle:xx.textangle,font:xx.font,width:xx.width,height:xx.height,opacity:xx.opacity,align:xx.align,valign:xx.valign,bgcolor:xx.bgcolor,bordercolor:xx.bordercolor,borderpad:xx.borderpad,borderwidth:xx.borderwidth,showarrow:xx.showarrow,arrowcolor:xx.arrowcolor,arrowhead:xx.arrowhead,startarrowhead:xx.startarrowhead,arrowside:xx.arrowside,arrowsize:xx.arrowsize,startarrowsize:xx.startarrowsize,arrowwidth:xx.arrowwidth,standoff:xx.standoff,startstandoff:xx.startstandoff,hovertext:xx.hovertext,hoverlabel:xx.hoverlabel,captureevents:xx.captureevents},"calc","from-root");function Ix(t,e){var r=e.fullSceneLayout.domain,n=e.fullLayout._size,a={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};t._xa={},oe.extendFlat(t._xa,a),Na.setConvert(t._xa),t._xa._offset=n.l+r.x[0]*n.w,t._xa.l2p=function(){return.5*(1+t._pdata[0]/t._pdata[3])*n.w*(r.x[1]-r.x[0])},t._ya={},oe.extendFlat(t._ya,a),Na.setConvert(t._ya),t._ya._offset=n.t+(1-r.y[1])*n.h,t._ya.l2p=function(){return.5*(1-t._pdata[1]/t._pdata[3])*n.h*(r.y[1]-r.y[0])}}function Bx(t,e,r,n,a){function i(r,n){return oe.coerce(t,e,Px,r,n)}function o(t){var n=t+"axis",a={_fullLayout:{}};return a._fullLayout[n]=r[n],Na.coercePosition(e,a,i,t,t,.5)}return i("visible",!a.itemIsNotPlainObject)?(Sx(t,e,n.fullLayout,i),o("x"),o("y"),o("z"),oe.noneOrAll(t,e,["x","y","z"]),e.xref="x",e.yref="y",e.zref="z",i("xanchor"),i("yanchor"),i("xshift"),i("yshift"),e.showarrow&&(e.axref="pixel",e.ayref="pixel",i("ax",-10),i("ay",-30),oe.noneOrAll(t,e,["ax","ay"])),e):e}function Fx(t,e){var r,n,a=[0,0,0,0];for(r=0;r<4;++r)for(n=0;n<4;++n)a[n]+=t[4*r+n]*e[r];return a}var zx=function(t,e){return Fx(t.projection,Fx(t.view,Fx(t.model,[e[0],e[1],e[2],1])))},Nx=_x.drawRaw,jx=["x","y","z"],Ux={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:Px}}},layoutAttributes:Px,handleDefaults:function(t,e,r){Ox(t,e,{name:"annotations",handleItemDefaults:Bx,fullLayout:r.fullLayout})},includeBasePlot:function(t,e){var r=I.subplotsRegistry.gl3d;if(!r)return;for(var n=r.attrRegex,a=Object.keys(t),i=0;i<a.length;i++){var o=a[i];n.test(o)&&(t[o].annotations||[]).length&&(oe.pushUnique(e._basePlotModules,r),oe.pushUnique(e._subplots.gl3d,o))}},convert:function(t){for(var e=t.fullSceneLayout.annotations,r=0;r<e.length;r++)Ix(e[r],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()},draw:function(t){for(var e=t.fullSceneLayout,r=t.dataScale,n=e.annotations,a=0;a<n.length;a++){for(var i=n[a],o=!1,l=0;l<3;l++){var s=jx[l],u=i[s],c=e[s+"axis"].r2fraction(u);if(c<0||c>1){o=!0;break}}o?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+a+'"]').remove():(i._pdata=zx(t.glplot.cameraParams,[e.xaxis.r2l(i.x)*r[0],e.yaxis.r2l(i.y)*r[1],e.zaxis.r2l(i.z)*r[2]]),Nx(t.graphDiv,i,a,t.id,i._xa,i._ya))}}};var Vx={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}},Hx=function(t){var e=t.type,r=t.symmetric;if("data"===e){var n=t.array||[];if(r)return function(t,e){var r=+n[e];return[r,r]};var a=t.arrayminus||[];return function(t,e){var r=+n[e],i=+a[e];return isNaN(r)&&isNaN(i)?[NaN,NaN]:[i||0,r||0]}}var i=qx(e,t.value),o=qx(e,t.valueminus);return r||void 0===t.valueminus?function(t){var e=i(t);return[e,e]}:function(t){return[o(t),i(t)]}};function qx(t,e){return"percent"===t?function(t){return Math.abs(t*e/100)}:"constant"===t?function(){return Math.abs(e)}:"sqrt"===t?function(t){return Math.sqrt(Math.abs(t))}:void 0}var Gx=function(t){for(var e=t.calcdata,r=0;r<e.length;r++){var n=e[r],a=n[0].trace;if(I.traceIs(a,"errorBarsOK")){var i=Na.getFromId(t,a.xaxis),o=Na.getFromId(t,a.yaxis);Xx(n,a,i,"x"),Xx(n,a,o,"y")}}};function Xx(t,e,r,n){var i=e["error_"+n]||{},o=[];if(i.visible&&-1!==["linear","log"].indexOf(r.type)){for(var l=Hx(i),s=0;s<t.length;s++){var u=t[s],c=u[n];if(a(r.c2l(c))){var f=l(c,s);if(a(f[0])&&a(f[1])){var h=u[n+"s"]=c-f[0],d=u[n+"h"]=c+f[1];o.push(h,d)}}}Na.expand(r,o,{padded:!0})}}var Yx=_e.overrideAll,Wx={error_x:oe.extendFlat({},Vx),error_y:oe.extendFlat({},Vx)};delete Wx.error_x.copy_zstyle,delete Wx.error_y.copy_zstyle,delete Wx.error_y.copy_ystyle;var Zx={error_x:oe.extendFlat({},Vx),error_y:oe.extendFlat({},Vx),error_z:oe.extendFlat({},Vx)};delete Zx.error_x.copy_ystyle,delete Zx.error_y.copy_ystyle,delete Zx.error_z.copy_ystyle,delete Zx.error_z.copy_zstyle;var Jx={moduleType:"component",name:"errorbars",schema:{traces:{scatter:Wx,bar:Wx,histogram:Wx,scatter3d:Yx(Zx,"calc","nested"),scattergl:Yx(Wx,"calc","nested")}},supplyDefaults:function(t,e,r,n){var i="error_"+n.axis,o=e[i]={},l=t[i]||{};function s(t,e){return oe.coerce(l,o,Vx,t,e)}if(!1!==s("visible",void 0!==l.array||void 0!==l.value||"sqrt"===l.type)){var u=s("type","array"in l?"data":"percent"),c=!0;"sqrt"!==u&&(c=s("symmetric",!(("data"===u?"arrayminus":"valueminus")in l))),"data"===u?(s("array"),s("traceref"),c||(s("arrayminus"),s("tracerefminus"))):"percent"!==u&&"constant"!==u||(s("value"),c||s("valueminus"));var f="copy_"+n.inherit+"style";n.inherit&&(e["error_"+n.inherit]||{}).visible&&s(f,!(l.color||a(l.thickness)||a(l.width))),n.inherit&&o[f]||(s("color",r),s("thickness"),s("width",I.traceIs(e,"gl3d")?0:4))}},calc:Gx,calcFromTrace:function(t,e){for(var r=t.x||[],n=t.y||[],a=r.length||n.length,i=new Array(a),o=0;o<a;o++)i[o]={x:r[o],y:n[o]};return i[0].trace=t,Gx({calcdata:[i],_fullLayout:e}),i},plot:function(t,e,r){var i=e.xaxis,o=e.yaxis,l=r&&r.duration>0;t.each(function(t){var s,u=t[0].trace,c=u.error_x||{},f=u.error_y||{};u.ids&&(s=function(t){return t.id});var h=Zr.hasMarkers(u)&&u.marker.maxdisplayed>0;f.visible||c.visible||(t=[]);var d=n.select(this).selectAll("g.errorbar").data(t,s);if(d.exit().remove(),t.length){c.visible||d.selectAll("path.xerror").remove(),f.visible||d.selectAll("path.yerror").remove(),d.style("opacity",1);var p=d.enter().append("g").classed("errorbar",!0);l&&p.style("opacity",0).transition().duration(r.duration).style("opacity",1),Jr.setClipUrl(d,e.layerClipId),d.each(function(t){var e=n.select(this),s=function(t,e,r){var n={x:e.c2p(t.x),y:r.c2p(t.y)};return void 0!==t.yh&&(n.yh=r.c2p(t.yh),n.ys=r.c2p(t.ys),a(n.ys)||(n.noYS=!0,n.ys=r.c2p(t.ys,!0))),void 0!==t.xh&&(n.xh=e.c2p(t.xh),n.xs=e.c2p(t.xs),a(n.xs)||(n.noXS=!0,n.xs=e.c2p(t.xs,!0))),n}(t,i,o);if(!h||t.vis){var u,d=e.select("path.yerror");if(f.visible&&a(s.x)&&a(s.yh)&&a(s.ys)){var p=f.width;u="M"+(s.x-p)+","+s.yh+"h"+2*p+"m-"+p+",0V"+s.ys,s.noYS||(u+="m-"+p+",0h"+2*p),d.size()?l&&(d=d.transition().duration(r.duration).ease(r.easing)):d=e.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),d.attr("d",u)}else d.remove();var g=e.select("path.xerror");if(c.visible&&a(s.y)&&a(s.xh)&&a(s.xs)){var v=(c.copy_ystyle?f:c).width;u="M"+s.xh+","+(s.y-v)+"v"+2*v+"m0,-"+v+"H"+s.xs,s.noXS||(u+="m0,-"+v+"v"+2*v),g.size()?l&&(g=g.transition().duration(r.duration).ease(r.easing)):g=e.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),g.attr("d",u)}else g.remove()}})}})},style:function(t){t.each(function(t){var e=t[0].trace,r=e.error_y||{},a=e.error_x||{},i=n.select(this);i.selectAll("path.yerror").style("stroke-width",r.thickness+"px").call($e.stroke,r.color),a.copy_ystyle&&(a=r),i.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call($e.stroke,a.color)})},hoverInfo:function(t,e,r){(e.error_y||{}).visible&&(r.yerr=t.yh-t.y,e.error_y.symmetric||(r.yerrneg=t.y-t.ys));(e.error_x||{}).visible&&(r.xerr=t.xh-t.x,e.error_x.symmetric||(r.xerrneg=t.x-t.xs))}};var Qx={},$x=b.extendFlat;Qx.attributes=function(t,e){t=t||{},e=e||{};var r={valType:"info_array",editType:t.editType,items:[{valType:"number",min:0,max:1,editType:t.editType},{valType:"number",min:0,max:1,editType:t.editType}],dflt:[0,1]},n=(t.name&&t.name,t.trace,e.description&&e.description,{x:$x({},r,{}),y:$x({},r,{}),editType:t.editType});return t.noGridCell||(n.row={valType:"integer",min:0,dflt:0,editType:t.editType},n.column={valType:"integer",min:0,dflt:0,editType:t.editType}),n},Qx.defaults=function(t,e,r,n){var a=n&&n.x||[0,1],i=n&&n.y||[0,1],o=e.grid;if(o){var l=r("domain.column");void 0!==l&&(l<o.columns?a=o._domains.x[l]:delete t.domain.column);var s=r("domain.row");void 0!==s&&(s<o.rows?i=o._domains.y[s]:delete t.domain.row)}r("domain.x",a),r("domain.y",i)};var Kx=nt.counter,tb=Qx.attributes,eb=Oe.idRegex,rb={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[Kx("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[eb.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[eb.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:tb({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function nb(t,e,r){var n=e[r+"axes"],a=Object.keys((t._splomAxes||{})[r]||{});return Array.isArray(n)?n:a.length?a:void 0}function ab(t,e,r,n,a,i){var o=e(t+"gap",r),l=e("domain."+t);e(t+"side",n);for(var s=new Array(a),u=l[0],c=(l[1]-u)/(a-o),f=c*(1-o),h=0;h<a;h++){var d=u+c*h;s[i?a-1-h:h]=[d,d+f]}return s}function ib(t,e,r,n,a){var i,o=new Array(r);function l(t,r){-1!==e.indexOf(r)&&void 0===n[r]?(o[t]=r,n[r]=t):o[t]=""}if(Array.isArray(t))for(i=0;i<r;i++)l(i,t[i]);else for(l(0,a),i=1;i<r;i++)l(i,a+(i+1));return o}var ob={moduleType:"component",name:"grid",schema:{layout:{grid:rb}},layoutAttributes:rb,sizeDefaults:function(t,e){var r=t.grid||{},n=nb(e,r,"x"),a=nb(e,r,"y");if(t.grid||n||a){var i,o,l=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]),s=Array.isArray(n),u=Array.isArray(a),c=s&&n!==r.xaxes&&u&&a!==r.yaxes;l?(i=r.subplots.length,o=r.subplots[0].length):(u&&(i=a.length),s&&(o=n.length));var f=e.grid={},h=x("rows",i),d=x("columns",o);if(h*d>1){l||s||u||"independent"===x("pattern")&&(l=!0),f._hasSubplotGrid=l;var p,g,v="top to bottom"===x("roworder"),m=l?.2:.1,y=l?.3:.1;c&&(p="bottom",g="left"),f._domains={x:ab("x",x,m,p,d),y:ab("y",x,y,g,h,v)}}}function x(t,e){return oe.coerce(r,f,rb,t,e)}},contentDefaults:function(t,e){var r=e.grid;if(r&&r._domains){var n,a,i,o,l,s,u,c=t.grid||{},f=e._subplots,h=r._hasSubplotGrid,d=r.rows,p=r.columns,g="independent"===r.pattern,v=r._axisMap={};if(h){var m=c.subplots||[];s=r.subplots=new Array(d);var y=1;for(n=0;n<d;n++){var x=s[n]=new Array(p),b=m[n]||[];for(a=0;a<p;a++)if(g?(l=1===y?"xy":"x"+y+"y"+y,y++):l=b[a],x[a]="",-1!==f.cartesian.indexOf(l)){if(u=l.indexOf("y"),i=l.slice(0,u),o=l.slice(u),void 0!==v[i]&&v[i]!==a||void 0!==v[o]&&v[o]!==n)continue;x[a]=l,v[i]=a,v[o]=n}}}else{var _=nb(e,c,"x"),w=nb(e,c,"y");r.xaxes=ib(_,f.xaxis,p,v,"x"),r.yaxes=ib(w,f.yaxis,d,v,"y")}var A=r._anchors={},M="top to bottom"===r.roworder;for(var T in v){var k,E,C,S=T.charAt(0),L=r[S+"side"];if(L.length<8)A[T]="free";else if("x"===S){if("t"===L.charAt(0)===M?(k=0,E=1,C=d):(k=d-1,E=-1,C=-1),h){var O=v[T];for(n=k;n!==C;n+=E)if((l=s[n][O])&&(u=l.indexOf("y"),l.slice(0,u)===T)){A[T]=l.slice(u);break}}else for(n=k;n!==C;n+=E)if(o=r.yaxes[n],-1!==f.cartesian.indexOf(T+o)){A[T]=o;break}}else if("l"===L.charAt(0)?(k=0,E=1,C=p):(k=p-1,E=-1,C=-1),h){var D=v[T];for(n=k;n!==C;n+=E)if((l=s[D][n])&&(u=l.indexOf("y"),l.slice(u)===T)){A[T]=l.slice(0,u);break}}else for(n=k;n!==C;n+=E)if(i=r.xaxes[n],-1!==f.cartesian.indexOf(i+T)){A[T]=i;break}}}}},lb={_isLinkedToArray:"image",visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",Oe.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",Oe.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"};function sb(t,e,r){function n(r,n){return oe.coerce(t,e,lb,r,n)}if(!n("visible",!!n("source")))return e;n("layer"),n("xanchor"),n("yanchor"),n("sizex"),n("sizey"),n("sizing"),n("opacity");for(var a={_fullLayout:r},i=["x","y"],o=0;o<2;o++){var l=i[o],s=Na.coerceRef(t,e,a,l,"paper");Na.coercePosition(e,a,n,s,l,0)}return e}var ub={moduleType:"component",name:"images",layoutAttributes:lb,supplyLayoutDefaults:function(t,e){Ox(t,e,{name:"images",handleItemDefaults:sb})},includeBasePlot:Dx("images"),draw:function(t){var e,r,a=t._fullLayout,i=[],o={},l=[];for(r=0;r<a.images.length;r++){var s=a.images[r];if(s.visible)if("below"===s.layer&&"paper"!==s.xref&&"paper"!==s.yref){e=s.xref+s.yref;var u=a._plots[e];if(!u){l.push(s);continue}u.mainplot&&(e=u.mainplot.id),o[e]||(o[e]=[]),o[e].push(s)}else"above"===s.layer?i.push(s):l.push(s)}var c={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}};function f(e){var r=n.select(this);if(!this.img||this.img.src!==e.source){r.attr("xmlns",Ce.svg);var a=new Promise(function(t){var n=new Image;function a(){r.remove(),t()}this.img=n,n.setAttribute("crossOrigin","anonymous"),n.onerror=a,n.onload=function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,e.getContext("2d").drawImage(this,0,0);var n=e.toDataURL("image/png");r.attr("xlink:href",n),t()},r.on("error",a),n.src=e.source}.bind(this));t._promises.push(a)}}function h(e){var r=n.select(this),i=Na.getFromId(t,e.xref),o=Na.getFromId(t,e.yref),l=a._size,s=i?Math.abs(i.l2p(e.sizex)-i.l2p(0)):e.sizex*l.w,u=o?Math.abs(o.l2p(e.sizey)-o.l2p(0)):e.sizey*l.h,f=s*c.x[e.xanchor].offset,h=u*c.y[e.yanchor].offset,d=c.x[e.xanchor].sizing+c.y[e.yanchor].sizing,p=(i?i.r2p(e.x)+i._offset:e.x*l.w+l.l)+f,g=(o?o.r2p(e.y)+o._offset:l.h-e.y*l.h+l.t)+h;switch(e.sizing){case"fill":d+=" slice";break;case"stretch":d="none"}r.attr({x:p,y:g,width:s,height:u,preserveAspectRatio:d,opacity:e.opacity});var v=(i?i._id:"")+(o?o._id:"");r.call(Jr.setClipUrl,v?"clip"+a._uid+v:null)}var d=a._imageLowerLayer.selectAll("image").data(l),p=a._imageUpperLayer.selectAll("image").data(i);d.enter().append("image"),p.enter().append("image"),d.exit().remove(),p.exit().remove(),d.each(function(t){f.bind(this)(t),h.bind(this)(t)}),p.each(function(t){f.bind(this)(t),h.bind(this)(t)});var g=Object.keys(a._plots);for(r=0;r<g.length;r++){e=g[r];var v=a._plots[e];if(v.imagelayer){var m=v.imagelayer.selectAll("image").data(o[e]||[]);m.enter().append("image"),m.exit().remove(),m.each(function(t){f.bind(this)(t),h.bind(this)(t)})}}},convertCoords:function(t,e,r,n){e=e||{};var i="log"===r&&"linear"===e.type,o="linear"===r&&"log"===e.type;if(i||o)for(var l,s,u=t._fullLayout.images,c=e._id.charAt(0),f=0;f<u.length;f++)if(s="images["+f+"].",(l=u[f])[c+"ref"]===e._id){var h=l[c],d=l["size"+c],p=null,g=null;if(i){p=ie(h,e.range);var v=d/Math.pow(10,p)/2;g=2*Math.log(v+Math.sqrt(1+v*v))/Math.LN10}else g=(p=Math.pow(10,h))*(Math.pow(10,d/2)-Math.pow(10,-d/2));a(p)?a(g)||(g=null):(p=null,g=null),n(s+c,p),n(s+"size"+c,g)}}},cb={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:D.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:S({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},x:{valType:"number",min:-2,max:3,dflt:1.02,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,dflt:1,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"legend"},editType:"legend"},fb={legendGetsTrace:function(t){return t.visible&&void 0!==t.showlegend},isGrouped:function(t){return-1!==(t.traceorder||"").indexOf("grouped")},isVertical:function(t){return"h"!==t.orientation},isReversed:function(t){return-1!==(t.traceorder||"").indexOf("reversed")}},hb={isRightAnchor:function(t){return"right"===t.xanchor||"auto"===t.xanchor&&t.x>=2/3},isCenterAnchor:function(t){return"center"===t.xanchor||"auto"===t.xanchor&&t.x>1/3&&t.x<2/3},isBottomAnchor:function(t){return"bottom"===t.yanchor||"auto"===t.yanchor&&t.y<=1/3},isMiddleAnchor:function(t){return"middle"===t.yanchor||"auto"===t.yanchor&&t.y>1/3&&t.y<2/3}},db={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4},pb=!0,gb=function(t,e,r){if(!e._dragged&&!e._editing){var n,a,i,o,l,s=e._fullLayout.hiddenlabels?e._fullLayout.hiddenlabels.slice():[],u=t.data()[0][0],c=e._fullData,f=u.trace,h=f.legendgroup,d={},p=[],g=[],v=[];if(1===r&&pb&&e.data&&e._context.showTips?(oe.notifier(oe._(e,"Double-click on legend to isolate one trace"),"long"),pb=!1):pb=!1,I.traceIs(f,"pie")){var m=u.label,y=s.indexOf(m);1===r?-1===y?s.push(m):s.splice(y,1):2===r&&(s=[],e.calcdata[0].forEach(function(t){m!==t.label&&s.push(t.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===s.length&&-1===y&&(s=[])),I.call("relayout",e,"hiddenlabels",s)}else{var x,b=h&&h.length,_=[];if(b)for(n=0;n<c.length;n++)(x=c[n]).visible&&x.legendgroup===h&&_.push(n);if(1===r){var w;switch(f.visible){case!0:w="legendonly";break;case!1:w=!1;break;case"legendonly":w=!0}if(b)for(n=0;n<c.length;n++)!1!==c[n].visible&&c[n].legendgroup===h&&S(c[n],w);else S(f,w)}else if(2===r){var A,M,T=!0;for(n=0;n<c.length;n++)if(!(c[n]===f)&&!(A=b&&c[n].legendgroup===h)&&!0===c[n].visible&&!I.traceIs(c[n],"notLegendIsolatable")){T=!1;break}for(n=0;n<c.length;n++)if(!1!==c[n].visible&&!I.traceIs(c[n],"notLegendIsolatable"))switch(f.visible){case"legendonly":S(c[n],!0);break;case!0:M=!!T||"legendonly",A=c[n]===f||b&&c[n].legendgroup===h,S(c[n],!!A||M)}}for(n=0;n<g.length;n++)if(i=g[n]){var k=i.constructUpdate(),E=Object.keys(k);for(a=0;a<E.length;a++)o=E[a],(d[o]=d[o]||[])[v[n]]=k[o]}for(l=Object.keys(d),n=0;n<l.length;n++)for(o=l[n],a=0;a<p.length;a++)d[o].hasOwnProperty(a)||(d[o][a]=void 0);I.call("restyle",e,d,p)}}function C(t,e,r){var n=p.indexOf(t),a=d[e];return a||(a=d[e]=[]),-1===p.indexOf(t)&&(p.push(t),n=p.length-1),a[n]=r,n}function S(t,e){var r=t._fullInput;if(I.hasTransform(r,"groupby")){var n=g[r.index];if(!n){var a=I.getTransformIndices(r,"groupby"),i=a[a.length-1];n=oe.keyedContainer(r,"transforms["+i+"].styles","target","value.visible"),g[r.index]=n}var o=n.get(t._group);void 0===o&&(o=!0),!1!==o&&n.set(t._group,e),v[r.index]=C(r.index,"visible",!1!==r.visible)}else{var l=!1!==r.visible&&e;C(r.index,"visible",l)}}},vb={formatPiePercent:function(t,e){var r=(100*t).toPrecision(3);return-1!==r.lastIndexOf(".")&&(r=r.replace(/[.]?0+$/,"")),oe.numSeparate(r,e)+"%"},formatPieValue:function(t,e){var r=t.toPrecision(10);return-1!==r.lastIndexOf(".")&&(r=r.replace(/[.]?0+$/,"")),oe.numSeparate(r,e)},getFirstFilled:function(t,e){if(Array.isArray(t))for(var r=0;r<e.length;r++){var n=t[e[r]];if(n||0===n)return n}},castOption:function(t,e){return Array.isArray(t)?vb.getFirstFilled(t,e):t||void 0}},mb=vb.castOption,yb=function(t,e,r){var n=r.marker.line,a=mb(n.color,e.pts)||$e.defaultLine,i=mb(n.width,e.pts)||0;t.style({"stroke-width":i}).call($e.fill,e.color).call($e.stroke,a)},xb=function(t,e){t.each(function(t){var e=n.select(this),r=oe.ensureSingle(e,"g","layers");r.style("opacity",t[0].trace.opacity),r.selectAll("g.legendfill").data([t]).enter().append("g").classed("legendfill",!0),r.selectAll("g.legendlines").data([t]).enter().append("g").classed("legendlines",!0);var a=r.selectAll("g.legendsymbols").data([t]);a.enter().append("g").classed("legendsymbols",!0),a.selectAll("g.legendpoints").data([t]).enter().append("g").classed("legendpoints",!0)}).each(function(t){var e=t[0].trace,r=e.marker||{},a=r.line||{},i=n.select(this).select("g.legendpoints").selectAll("path.legendbar").data(I.traceIs(e,"bar")?[t]:[]);i.enter().append("path").classed("legendbar",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),i.exit().remove(),i.each(function(t){var e=n.select(this),i=t[0],o=(i.mlw+1||a.width+1)-1;e.style("stroke-width",o+"px").call($e.fill,i.mc||r.color),o&&e.call($e.stroke,i.mlc||a.color)})}).each(function(t){var e=t[0].trace,r=n.select(this).select("g.legendpoints").selectAll("path.legendbox").data(I.traceIs(e,"box-violin")&&e.visible?[t]:[]);r.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),r.exit().remove(),r.each(function(){var t=e.line.width,r=n.select(this);r.style("stroke-width",t+"px").call($e.fill,e.fillcolor),t&&$e.stroke(r,e.line.color)})}).each(function(t){var e=t[0].trace,r=n.select(this).select("g.legendpoints").selectAll("path.legendpie").data(I.traceIs(e,"pie")&&e.visible?[t]:[]);r.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),r.exit().remove(),r.size()&&r.call(yb,t[0],e)}).each(function(t){var e=t[0].trace,r=e.visible&&e.fill&&"none"!==e.fill,a=Zr.hasLines(e),i=e.contours;i&&"constraint"===i.type&&(a=i.showlines,r="="!==i._operation);var o=n.select(this).select(".legendfill").selectAll("path").data(r?[t]:[]);o.enter().append("path").classed("js-fill",!0),o.exit().remove(),o.attr("d","M5,0h30v6h-30z").call(Jr.fillGroupStyle);var l=n.select(this).select(".legendlines").selectAll("path").data(a?[t]:[]);l.enter().append("path").classed("js-line",!0).attr("d","M5,0h30"),l.exit().remove(),l.call(Jr.lineGroupStyle)}).each(function(t){var r,a,i=t[0],o=i.trace,l=Zr.hasMarkers(o),s=Zr.hasText(o),u=Zr.hasLines(o);function c(t,e,r){var n=oe.nestedProperty(o,t).get(),a=Array.isArray(n)&&e?e(n):n;if(r){if(a<r[0])return r[0];if(a>r[1])return r[1]}return a}function f(t){return t[0]}if(l||s||u){var h={},d={};l&&(h.mc=c("marker.color",f),h.mo=c("marker.opacity",oe.mean,[.2,1]),h.ms=c("marker.size",oe.mean,[2,16]),h.mlc=c("marker.line.color",f),h.mlw=c("marker.line.width",oe.mean,[0,5]),d.marker={sizeref:1,sizemin:1,sizemode:"diameter"}),u&&(d.line={width:c("line.width",f,[0,10])}),s&&(h.tx="Aa",h.tp=c("textposition",f),h.ts=10,h.tc=c("textfont.color",f),h.tf=c("textfont.family",f)),r=[oe.minExtend(i,h)],a=oe.minExtend(o,d)}var p=n.select(this).select("g.legendpoints"),g=p.selectAll("path.scatterpts").data(l?r:[]);g.enter().append("path").classed("scatterpts",!0).attr("transform","translate(20,0)"),g.exit().remove(),g.call(Jr.pointStyle,a,e),l&&(r[0].mrc=3);var v=p.selectAll("g.pointtext").data(s?r:[]);v.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)"),v.exit().remove(),v.selectAll("text").call(Jr.textPointStyle,a,e)}).each(function(t){var e=t[0].trace,r=n.select(this).select("g.legendpoints").selectAll("path.legendcandle").data("candlestick"===e.type&&e.visible?[t,t]:[]);r.enter().append("path").classed("legendcandle",!0).attr("d",function(t,e){return e?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1),r.exit().remove(),r.each(function(t,r){var a=e[r?"increasing":"decreasing"],i=a.line.width,o=n.select(this);o.style("stroke-width",i+"px").call($e.fill,a.fillcolor),i&&$e.stroke(o,a.line.color)})}).each(function(t){var e=t[0].trace,r=n.select(this).select("g.legendpoints").selectAll("path.legendohlc").data("ohlc"===e.type&&e.visible?[t,t]:[]);r.enter().append("path").classed("legendohlc",!0).attr("d",function(t,e){return e?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform","translate(20,0)").style("stroke-miterlimit",1),r.exit().remove(),r.each(function(t,r){var a=e[r?"increasing":"decreasing"],i=a.line.width,o=n.select(this);o.style("fill","none").call(Jr.dashLine,a.line.dash,i),i&&$e.stroke(o,a.line.color)})})},bb=wr.LINE_SPACING,_b=wr.FROM_TL,wb=wr.FROM_BR,Ab=g.DBLCLICKDELAY;function Mb(t,e){var r=t.data()[0][0],n=e._fullLayout,a=r.trace,i=I.traceIs(a,"pie"),o=a.index,l=i?r.label:a.name,s=oe.ensureSingle(t,"text","legendtext");function u(r){Mr.convertToTspans(r,e,function(){!function(t,e){var r=t.data()[0][0];if(!r.trace.showlegend)return void t.remove();var n,a,i=t.select("g[class*=math-group]"),o=i.node(),l=e._fullLayout.legend.font.size*bb;if(o){var s=Jr.bBox(o);n=s.height,a=s.width,Jr.setTranslate(i,0,n/4)}else{var u=t.select(".legendtext"),c=Mr.lineCount(u),f=u.node();n=l*c,a=f?Jr.bBox(f).width:0;var h=l*(.3+(1-c)/2);Mr.positionText(u,40,h)}n=Math.max(n,16)+3,r.height=n,r.width=a}(t,e)})}s.attr("text-anchor","start").classed("user-select-none",!0).call(Jr.font,n.legend.font).text(l),e._context.edits.legendText&&!i?s.call(Mr.makeEditable,{gd:e}).call(u).on("edit",function(t){this.text(t).call(u);var n=t;this.text()||(t="    ");var a=r.trace._fullInput||{},i={};if(I.hasTransform(a,"groupby")){var l=I.getTransformIndices(a,"groupby"),s=l[l.length-1],c=oe.keyedContainer(a,"transforms["+s+"].styles","target","value.name");""===n?c.remove(r.trace._group):c.set(r.trace._group,t),i=c.constructUpdate()}else i.name=t;return I.call("restyle",e,i,o)}):u(s)}function Tb(t,e){var r,n=1,a=oe.ensureSingle(t,"rect","legendtoggle",function(t){t.style("cursor","pointer").attr("pointer-events","all").call($e.fill,"rgba(0,0,0,0)")});a.on("mousedown",function(){(r=(new Date).getTime())-e._legendMouseDownTime<Ab?n+=1:(n=1,e._legendMouseDownTime=r)}),a.on("mouseup",function(){if(!e._dragged&&!e._editing){var r=e._fullLayout.legend;(new Date).getTime()-e._legendMouseDownTime>Ab&&(n=Math.max(n-1,1)),1===n?r._clickTimeout=setTimeout(function(){gb(t,e,n)},Ab):2===n&&(r._clickTimeout&&clearTimeout(r._clickTimeout),e._legendMouseDownTime=0,gb(t,e,n))}})}function kb(t,e,r){var a=t._fullLayout,i=a.legend,o=i.borderwidth,l=fb.isGrouped(i),s=0;if(i._width=0,i._height=0,fb.isVertical(i))l&&e.each(function(t,e){Jr.setTranslate(this,0,e*i.tracegroupgap)}),r.each(function(t){var e=t[0],r=e.height,n=e.width;Jr.setTranslate(this,o,5+o+i._height+r/2),i._height+=r,i._width=Math.max(i._width,n)}),i._width+=45+2*o,i._height+=10+2*o,l&&(i._height+=(i._lgroupsLength-1)*i.tracegroupgap),s=40;else if(l){for(var u=[i._width],c=e.data(),f=0,h=c.length;f<h;f++){var d=c[f].map(function(t){return t[0].width}),p=40+Math.max.apply(null,d);i._width+=i.tracegroupgap+p,u.push(i._width)}e.each(function(t,e){Jr.setTranslate(this,u[e],0)}),e.each(function(){var t=0;n.select(this).selectAll("g.traces").each(function(e){var r=e[0].height;Jr.setTranslate(this,0,5+o+t+r/2),t+=r}),i._height=Math.max(i._height,t)}),i._height+=10+2*o,i._width+=2*o}else{var g,v=0,m=0,y=0,x=0,b=0,_=i.tracegroupgap||5;r.each(function(t){y=Math.max(40+t[0].width,y),b+=40+t[0].width+_}),g=a.width-(a.margin.r+a.margin.l)>o+b-_,r.each(function(t){var e=t[0],r=g?40+t[0].width:y;o+x+_+r>a.width-(a.margin.r+a.margin.l)&&(x=0,v+=m,i._height=i._height+m,m=0),Jr.setTranslate(this,o+x,5+o+e.height/2+v),i._width+=_+r,i._height=Math.max(i._height,e.height),x+=_+r,m=Math.max(e.height,m)}),i._width+=2*o,i._height+=10+2*o}i._width=Math.ceil(i._width),i._height=Math.ceil(i._height),r.each(function(e){var r=e[0],a=n.select(this).select(".legendtoggle");Jr.setRect(a,0,-r.height/2,(t._context.edits.legendText?0:i._width)+s,r.height)})}function Eb(t){var e=t._fullLayout.legend,r="left";hb.isRightAnchor(e)?r="right":hb.isCenterAnchor(e)&&(r="center");var n="top";hb.isBottomAnchor(e)?n="bottom":hb.isMiddleAnchor(e)&&(n="middle"),na.autoMargin(t,"legend",{x:e.x,y:e.y,l:e._width*_b[r],r:e._width*wb[r],b:e._height*wb[n],t:e._height*_b[n]})}var Cb={moduleType:"component",name:"legend",layoutAttributes:cb,supplyLayoutDefaults:function(t,e,r){for(var n,a,i,o,l=t.legend||{},s={},u=0,c="normal",f=0;f<r.length;f++){var h=r[f];fb.legendGetsTrace(h)&&(u++,I.traceIs(h,"pie")&&u++),(I.traceIs(h,"bar")&&"stack"===e.barmode||-1!==["tonextx","tonexty"].indexOf(h.fill))&&(c=fb.isGrouped({traceorder:c})?"grouped+reversed":"reversed"),void 0!==h.legendgroup&&""!==h.legendgroup&&(c=fb.isReversed({traceorder:c})?"reversed+grouped":"grouped")}function d(t,e){return oe.coerce(l,s,cb,t,e)}if(!1!==oe.coerce(t,e,P,"showlegend",u>1)){if(e.legend=s,d("bgcolor",e.paper_bgcolor),d("bordercolor"),d("borderwidth"),oe.coerceFont(d,"font",e.font),d("orientation"),"h"===s.orientation){var p=t.xaxis;p&&p.rangeslider&&p.rangeslider.visible?(n=0,i="left",a=1.1,o="bottom"):(n=0,i="left",a=-.1,o="top")}d("traceorder",c),fb.isGrouped(e.legend)&&d("tracegroupgap"),d("x",n),d("xanchor",i),d("y",a),d("yanchor",o),oe.noneOrAll(l,s,["x","y"])}},draw:function(t){var e=t._fullLayout,r="legend"+e._uid;if(e._infolayer&&t.calcdata){t._legendMouseDownTime||(t._legendMouseDownTime=0);var a=e.legend,i=e.showlegend&&function(t,e){var r,n,a={},i=[],o=!1,l={},s=0;function u(t,r){if(""!==t&&fb.isGrouped(e))-1===i.indexOf(t)?(i.push(t),o=!0,a[t]=[[r]]):a[t].push([r]);else{var n="~~i"+s;i.push(n),a[n]=[[r]],s++}}for(r=0;r<t.length;r++){var c=t[r],f=c[0],h=f.trace,d=h.legendgroup;if(fb.legendGetsTrace(h)&&h.showlegend)if(I.traceIs(h,"pie"))for(l[d]||(l[d]={}),n=0;n<c.length;n++){var p=c[n].label;l[d][p]||(u(d,{label:p,color:c[n].color,i:c[n].i,trace:h}),l[d][p]=!0)}else u(d,f)}if(!i.length)return[];var g,v,m=i.length;if(o&&fb.isGrouped(e))for(v=new Array(m),r=0;r<m;r++)g=a[i[r]],v[r]=fb.isReversed(e)?g.reverse():g;else{for(v=[new Array(m)],r=0;r<m;r++)g=a[i[r]][0],v[0][fb.isReversed(e)?m-r-1:r]=g;m=1}return e._lgroupsLength=m,v}(t.calcdata,a),o=e.hiddenlabels||[];if(!e.showlegend||!i.length)return e._infolayer.selectAll(".legend").remove(),e._topdefs.select("#"+r).remove(),void na.autoMargin(t,"legend");var l=!1,s=oe.ensureSingle(e._infolayer,"g","legend",function(t){t.attr("pointer-events","all"),l=!0}),u=oe.ensureSingleById(e._topdefs,"clipPath",r,function(t){t.append("rect")}),c=oe.ensureSingle(s,"rect","bg",function(t){t.attr("shape-rendering","crispEdges")});c.call($e.stroke,a.bordercolor).call($e.fill,a.bgcolor).style("stroke-width",a.borderwidth+"px");var f=oe.ensureSingle(s,"g","scrollbox"),h=oe.ensureSingle(s,"rect","scrollbar",function(t){t.attr({rx:20,ry:3,width:0,height:0}).call($e.fill,"#808BA4")}),d=f.selectAll("g.groups").data(i);d.enter().append("g").attr("class","groups"),d.exit().remove();var p=d.selectAll("g.traces").data(oe.identity);p.enter().append("g").attr("class","traces"),p.exit().remove(),p.call(xb,t).style("opacity",function(t){var e=t[0].trace;return I.traceIs(e,"pie")?-1!==o.indexOf(t[0].label)?.5:1:"legendonly"===e.visible?.5:1}).each(function(){n.select(this).call(Mb,t).call(Tb,t)}),l&&(kb(t,d,p),Eb(t));var g=e.width,v=e.height;kb(t,d,p),a._height>v?function(t){var e=t._fullLayout.legend,r="left";hb.isRightAnchor(e)?r="right":hb.isCenterAnchor(e)&&(r="center"),na.autoMargin(t,"legend",{x:e.x,y:.5,l:e._width*_b[r],r:e._width*wb[r],b:0,t:0})}(t):Eb(t);var m=e._size,y=m.l+m.w*a.x,x=m.t+m.h*(1-a.y);hb.isRightAnchor(a)?y-=a._width:hb.isCenterAnchor(a)&&(y-=a._width/2),hb.isBottomAnchor(a)?x-=a._height:hb.isMiddleAnchor(a)&&(x-=a._height/2);var b=a._width,_=m.w;b>_?(y=m.l,b=_):(y+b>g&&(y=g-b),y<0&&(y=0),b=Math.min(g-y,a._width));var w,A,M,T,k=a._height,E=m.h;if(k>E?(x=m.t,k=E):(x+k>v&&(x=v-k),x<0&&(x=0),k=Math.min(v-x,a._height)),Jr.setTranslate(s,y,x),h.on(".drag",null),s.on("wheel",null),a._height<=k||t._context.staticPlot)c.attr({width:b-a.borderwidth,height:k-a.borderwidth,x:a.borderwidth/2,y:a.borderwidth/2}),Jr.setTranslate(f,0,0),u.select("rect").attr({width:b-2*a.borderwidth,height:k-2*a.borderwidth,x:a.borderwidth,y:a.borderwidth}),Jr.setClipUrl(f,r),Jr.setRect(h,0,0,0,0),delete a._scrollY;else{var C,S,L=Math.max(db.scrollBarMinHeight,k*k/a._height),O=k-L-2*db.scrollBarMargin,D=a._height-k,R=O/D,P=Math.min(a._scrollY||0,D);c.attr({width:b-2*a.borderwidth+db.scrollBarWidth+db.scrollBarMargin,height:k-a.borderwidth,x:a.borderwidth/2,y:a.borderwidth/2}),u.select("rect").attr({width:b-2*a.borderwidth+db.scrollBarWidth+db.scrollBarMargin,height:k-2*a.borderwidth,x:a.borderwidth,y:a.borderwidth+P}),Jr.setClipUrl(f,r),F(P,L,R),s.on("wheel",function(){F(P=oe.constrain(a._scrollY+n.event.deltaY/O*D,0,D),L,R),0!==P&&P!==D&&n.event.preventDefault()});var B=n.behavior.drag().on("dragstart",function(){C=n.event.sourceEvent.clientY,S=P}).on("drag",function(){var t=n.event.sourceEvent;2===t.buttons||t.ctrlKey||F(P=oe.constrain((t.clientY-C)/R+S,0,D),L,R)});h.call(B)}t._context.edits.legendPosition&&(s.classed("cursor-move",!0),Ye.init({element:s.node(),gd:t,prepFn:function(){var t=Jr.getTranslate(s);M=t.x,T=t.y},moveFn:function(t,e){var r=M+t,n=T+e;Jr.setTranslate(s,r,n),w=Ye.align(r,0,m.l,m.l+m.w,a.xanchor),A=Ye.align(n,0,m.t+m.h,m.t,a.yanchor)},doneFn:function(){void 0!==w&&void 0!==A&&I.call("relayout",t,{"legend.x":w,"legend.y":A})},clickFn:function(r,n){var a=e._infolayer.selectAll("g.traces").filter(function(){var t=this.getBoundingClientRect();return n.clientX>=t.left&&n.clientX<=t.right&&n.clientY>=t.top&&n.clientY<=t.bottom});a.size()>0&&(1===r?s._clickTimeout=setTimeout(function(){gb(a,t,r)},Ab):2===r&&(s._clickTimeout&&clearTimeout(s._clickTimeout),gb(a,t,r)))}}))}function F(e,r,n){a._scrollY=t._fullLayout.legend._scrollY=e,Jr.setTranslate(f,0,-e),Jr.setRect(h,b,db.scrollBarMargin+e*n,db.scrollBarWidth,r),u.select("rect").attr({y:a.borderwidth+e})}},style:xb},Sb={step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"},Lb=b.extendFlat,Ob={visible:{valType:"boolean",editType:"plot"},buttons:Sb=Lb(Sb,{_isLinkedToArray:"button"}),x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:S({editType:"plot"}),bgcolor:{valType:"color",dflt:D.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:D.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},Db={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10};var Rb=function(t,e){var r=t._name,a={};if("all"===e.step)a[r+".autorange"]=!0;else{var i=function(t,e){var r,a=t.range,i=new Date(t.r2l(a[1])),o=e.step,l=e.count;switch(e.stepmode){case"backward":r=t.l2r(+n.time[o].utc.offset(i,-l));break;case"todate":var s=n.time[o].utc.offset(i,-l);r=t.l2r(+n.time[o].utc.ceil(s))}var u=a[1];return[r,u]}(t,e);a[r+".range[0]"]=i[0],a[r+".range[1]"]=i[1]}return a};var Pb=wr.LINE_SPACING,Ib=wr.FROM_TL,Bb=wr.FROM_BR;function Fb(t){return t._id}function zb(t,e,r){var n=oe.ensureSingle(t,"rect","selector-rect",function(t){t.attr("shape-rendering","crispEdges")});n.attr({rx:Db.rx,ry:Db.ry}),n.call($e.stroke,e.bordercolor).call($e.fill,function(t,e){return e._isActive||e._isHovered?t.activecolor:t.bgcolor}(e,r)).style("stroke-width",e.borderwidth+"px")}function Nb(t,e,r,n){var a;oe.ensureSingle(t,"text","selector-text",function(t){t.classed("user-select-none",!0).attr("text-anchor","middle")}).call(Jr.font,e.font).text((a=r,a.label?a.label:"all"===a.step?"all":a.count+a.step.charAt(0))).call(function(t){Mr.convertToTspans(t,n)})}var jb={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:Ob}}},layoutAttributes:Ob,handleDefaults:function(t,e,r,n,a){var i=t.rangeselector||{},o=e.rangeselector={};function l(t,e){return oe.coerce(i,o,Ob,t,e)}if(l("visible",function(t,e,r){var n,a,i=t.buttons||[],o=e.buttons=[];function l(t,e){return oe.coerce(n,a,Sb,t,e)}for(var s=0;s<i.length;s++)if(n=i[s],a={},oe.isPlainObject(n)){var u=l("step");"all"!==u&&(!r||"gregorian"===r||"month"!==u&&"year"!==u?l("stepmode"):a.stepmode="backward",l("count")),l("label"),a._index=s,o.push(a)}return o}(i,o,a).length>0)){var s=function(t,e,r){for(var n=r.filter(function(r){return e[r].anchor===t._id}),a=0,i=0;i<n.length;i++){var o=e[n[i]].domain;o&&(a=Math.max(o[1],a))}return[t.domain[0],a+Db.yPad]}(e,r,n);l("x",s[0]),l("y",s[1]),oe.noneOrAll(t,e,["x","y"]),l("xanchor"),l("yanchor"),oe.coerceFont(l,"font",r.font);var u=l("bgcolor");l("activecolor",$e.contrast(u,Db.lightAmount,Db.darkAmount)),l("bordercolor"),l("borderwidth")}},draw:function(t){var e=t._fullLayout._infolayer.selectAll(".rangeselector").data(function(t){for(var e=De.list(t,"x",!0),r=[],n=0;n<e.length;n++){var a=e[n];a.rangeselector&&a.rangeselector.visible&&r.push(a)}return r}(t),Fb);e.enter().append("g").classed("rangeselector",!0),e.exit().remove(),e.style({cursor:"pointer","pointer-events":"all"}),e.each(function(e){var r=n.select(this),a=e,i=a.rangeselector,o=r.selectAll("g.button").data(i.buttons);o.enter().append("g").classed("button",!0),o.exit().remove(),o.each(function(e){var r=n.select(this),o=Rb(a,e);e._isActive=function(t,e,r){if("all"===e.step)return!0===t.autorange;var n=Object.keys(r);return t.range[0]===r[n[0]]&&t.range[1]===r[n[1]]}(a,e,o),r.call(zb,i,e),r.call(Nb,i,e,t),r.on("click",function(){t._dragged||I.call("relayout",t,o)}),r.on("mouseover",function(){e._isHovered=!0,r.call(zb,i,e)}),r.on("mouseout",function(){e._isHovered=!1,r.call(zb,i,e)})}),function(t,e,r,a,i){var o=0,l=0,s=r.borderwidth;e.each(function(){var t=n.select(this),e=t.select(".selector-text"),a=r.font.size*Pb,i=Math.max(a*Mr.lineCount(e),16)+3;l=Math.max(l,i)}),e.each(function(){var t=n.select(this),e=t.select(".selector-rect"),a=t.select(".selector-text"),i=a.node()&&Jr.bBox(a.node()).width,u=r.font.size*Pb,c=Mr.lineCount(a),f=Math.max(i+10,Db.minButtonWidth);t.attr("transform","translate("+(s+o)+","+s+")"),e.attr({x:0,y:0,width:f,height:l}),Mr.positionText(a,f/2,l/2-(c-1)*u/2+3),o+=f+5});var u=t._fullLayout._size,c=u.l+u.w*r.x,f=u.t+u.h*(1-r.y),h="left";hb.isRightAnchor(r)&&(c-=o,h="right"),hb.isCenterAnchor(r)&&(c-=o/2,h="center");var d="top";hb.isBottomAnchor(r)&&(f-=l,d="bottom"),hb.isMiddleAnchor(r)&&(f-=l/2,d="middle"),o=Math.ceil(o),l=Math.ceil(l),c=Math.round(c),f=Math.round(f),na.autoMargin(t,a+"-range-selector",{x:r.x,y:r.y,l:o*Ib[h],r:o*Bb[h],b:l*Bb[d],t:l*Ib[d]}),i.attr("transform","translate("+c+","+f+")")}(t,o,i,a._name,r)})}},Ub={bgcolor:{valType:"color",dflt:D.background,editType:"plot"},bordercolor:{valType:"color",dflt:D.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},Vb={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15},Hb=De.list,qb=ba,Gb={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"};function Xb(t,e,r,n){var a=oe.ensureSingle(t,"rect",Vb.bgClassName,function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),i=n.borderwidth%2==0?n.borderwidth:n.borderwidth-1,o=-n._offsetShift,l=Jr.crispRound(e,n.borderwidth);a.attr({width:n._width+i,height:n._height+i,transform:"translate("+o+","+o+")",fill:n.bgcolor,stroke:n.bordercolor,"stroke-width":l})}function Yb(t,e,r,n){var a=e._fullLayout;oe.ensureSingleById(a._topdefs,"clipPath",n._clipId,function(t){t.append("rect").attr({x:0,y:0})}).select("rect").attr({width:n._width,height:n._height})}function Wb(t,e,r,a){var i,o=Na.getSubplots(e,r),l=e.calcdata,s=t.selectAll("g."+Vb.rangePlotClassName).data(o,oe.identity);s.enter().append("g").attr("class",function(t){return Vb.rangePlotClassName+" "+t}).call(Jr.setClipUrl,a._clipId),s.order(),s.exit().remove(),s.each(function(t,o){var s=n.select(this),u=0===o,c=Na.getFromId(e,t,"y"),f=c._name,h=a[f],d={data:[],layout:{xaxis:{type:r.type,domain:[0,1],range:a.range.slice(),calendar:r.calendar},width:a._width,height:a._height,margin:{t:0,b:0,l:0,r:0}},_context:e._context};d.layout[f]={type:c.type,domain:[0,1],range:"match"!==h.rangemode?h.range.slice():c.range.slice(),calendar:c.calendar},na.supplyDefaults(d);var p={id:t,plotgroup:s,xaxis:d._fullLayout.xaxis,yaxis:d._fullLayout[f],isRangePlot:!0};u?i=p:(p.mainplot="xy",p.mainplotinfo=i),tl.rangePlot(e,p,function(t,e){for(var r=[],n=0;n<t.length;n++){var a=t[n],i=a[0].trace;i.xaxis+i.yaxis===e&&r.push(a)}return r}(l,t))})}function Zb(t,e,r,n,a){(oe.ensureSingle(t,"rect",Vb.maskMinClassName,function(t){t.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",n._height).call($e.fill,Vb.maskColor),oe.ensureSingle(t,"rect",Vb.maskMaxClassName,function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",n._height).call($e.fill,Vb.maskColor),"match"!==a.rangemode)&&(oe.ensureSingle(t,"rect",Vb.maskMinOppAxisClassName,function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",n._width).call($e.fill,Vb.maskOppAxisColor),oe.ensureSingle(t,"rect",Vb.maskMaxOppAxisClassName,function(t){t.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",n._width).style("border-top",Vb.maskOppBorder).call($e.fill,Vb.maskOppAxisColor))}function Jb(t,e,r,n){e._context.staticPlot||oe.ensureSingle(t,"rect",Vb.slideBoxClassName,function(t){t.attr({y:0,cursor:Vb.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:n._height,fill:Vb.slideBoxFill})}function Qb(t,e,r,n){var a=oe.ensureSingle(t,"g",Vb.grabberMinClassName),i=oe.ensureSingle(t,"g",Vb.grabberMaxClassName),o={x:0,width:Vb.handleWidth,rx:Vb.handleRadius,fill:$e.background,stroke:$e.defaultLine,"stroke-width":Vb.handleStrokeWidth,"shape-rendering":"crispEdges"},l={y:Math.round(n._height/4),height:Math.round(n._height/2)};if(oe.ensureSingle(a,"rect",Vb.handleMinClassName,function(t){t.attr(o)}).attr(l),oe.ensureSingle(i,"rect",Vb.handleMaxClassName,function(t){t.attr(o)}).attr(l),!e._context.staticPlot){var s={width:Vb.grabAreaWidth,x:0,y:0,fill:Vb.grabAreaFill,cursor:Vb.grabAreaCursor};oe.ensureSingle(a,"rect",Vb.grabAreaMinClassName,function(t){t.attr(s)}).attr("height",n._height),oe.ensureSingle(i,"rect",Vb.grabAreaMaxClassName,function(t){t.attr(s)}).attr("height",n._height)}}var $b={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:oe.extendFlat({},Ub,{yaxis:Gb})}}},layoutAttributes:Ub,handleDefaults:function(t,e,r){var n=t[r],a=e[r];if(n.rangeslider||e._requestRangeslider[a._id]){oe.isPlainObject(n.rangeslider)||(n.rangeslider={});var i=n.rangeslider,o=a.rangeslider={};if(m("visible")){m("bgcolor",e.plot_bgcolor),m("bordercolor"),m("borderwidth"),m("thickness"),a._rangesliderAutorange=m("autorange",!a.isValidRange(i.range)),m("range");var l=e._subplots;if(l)for(var s=l.cartesian.filter(function(t){return t.substr(0,t.indexOf("y"))===De.name2id(r)}).map(function(t){return t.substr(t.indexOf("y"),t.length)}),u=oe.simpleMap(s,De.id2name),c=0;c<u.length;c++){var f,h=u[c],d=i[h]||{},p=o[h]={},g=e[h];d.range&&g.isValidRange(d.range)&&(f="fixed");var v=y(d,p,"rangemode",f);"match"!==v&&y(d,p,"range",g.range.slice()),g._rangesliderAutorange="auto"===v}o._input=i}}function m(t,e){return oe.coerce(i,o,Ub,t,e)}function y(t,e,r,n){return oe.coerce(t,e,Gb,r,n)}},calcAutorange:function(t){for(var e=Hb(t,"x",!0),r=0;r<e.length;r++){var n=e[r],a=n[Vb.name];a&&a.visible&&a.autorange&&n._min.length&&n._max.length&&(a._input.autorange=!0,a._input.range=a.range=qb(n))}},draw:function(t){var e=t._fullLayout,r=function(t){var e=Na.list({_fullLayout:t},"x",!0),r=Vb.name,n=[];if(t._has("gl2d"))return n;for(var a=0;a<e.length;a++){var i=e[a];i[r]&&i[r].visible&&n.push(i)}return n}(e);var a=e._infolayer.selectAll("g."+Vb.containerClassName).data(r,function(t){return t._name});a.enter().append("g").classed(Vb.containerClassName,!0).attr("pointer-events","all"),a.exit().each(function(t){var r=n.select(this),a=t[Vb.name];r.remove(),e._topdefs.select("#"+a._clipId).remove()}),a.exit().size()&&function(t){for(var e=t._fullLayout._pushmargin||{},r=Object.keys(e),n=0;n<r.length;n++){var a=r[n];-1!==a.indexOf(Vb.name)&&na.autoMargin(t,a)}}(t),0!==r.length&&a.each(function(r){var a=n.select(this),i=r[Vb.name],o=e[Na.id2name(r.anchor)],l=i[Na.id2name(r.anchor)];if(i.range){var s=i.range,u=r.range;s[0]=r.l2r(Math.min(r.r2l(s[0]),r.r2l(u[0]))),s[1]=r.l2r(Math.max(r.r2l(s[1]),r.r2l(u[1]))),i._input.range=s.slice()}r.cleanRange("rangeslider.range");for(var c=e.margin,f=e._size,h=r.domain,d=(r._boundingBox||{}).height||0,p=1/0,g=Na.getSubplots(t,r),v=0;v<g.length;v++){var m=Na.getFromId(t,g[v].substr(g[v].indexOf("y")));p=Math.min(p,m.domain[0])}i._id=Vb.name+r._id,i._clipId=i._id+"-"+e._uid,i._width=f.w*(h[1]-h[0]),i._height=(e.height-c.b-c.t)*i.thickness,i._offsetShift=Math.floor(i.borderwidth/2);var y=Math.round(c.l+f.w*h[0]),x=Math.round(f.t+f.h*(1-p)+d+i._offsetShift+Vb.extraPad);a.attr("transform","translate("+y+","+x+")");var b=r.r2l(i.range[0]),_=r.r2l(i.range[1]),w=_-b;if(i.p2d=function(t){return t/i._width*w+b},i.d2p=function(t){return(t-b)/w*i._width},i._rl=[b,_],"match"!==l.rangemode){var A=o.r2l(l.range[0]),M=o.r2l(l.range[1])-A;i.d2pOppAxis=function(t){return(t-A)/M*i._height}}a.call(Xb,t,r,i).call(Yb,t,r,i).call(Wb,t,r,i).call(Zb,t,r,i,l).call(Jb,t,r,i).call(Qb,t,r,i),function(t,e,r,a){var i=t.select("rect."+Vb.slideBoxClassName).node(),o=t.select("rect."+Vb.grabAreaMinClassName).node(),l=t.select("rect."+Vb.grabAreaMaxClassName).node();t.on("mousedown",function(){var s=n.event,u=s.target,c=s.clientX,f=c-t.node().getBoundingClientRect().left,h=a.d2p(r._rl[0]),d=a.d2p(r._rl[1]),p=Ye.coverSlip();function g(t){var s,g,v,m=+t.clientX-c;switch(u){case i:v="ew-resize",s=h+m,g=d+m;break;case o:v="col-resize",s=h+m,g=d;break;case l:v="col-resize",s=h,g=d+m;break;default:v="ew-resize",s=f,g=f+m}if(g<s){var y=g;g=s,s=y}a._pixelMin=s,a._pixelMax=g,bn(n.select(p),v),function(t,e,r,n){function a(t){return r.l2r(oe.constrain(t,n._rl[0],n._rl[1]))}var i=a(n.p2d(n._pixelMin)),o=a(n.p2d(n._pixelMax));window.requestAnimationFrame(function(){I.call("relayout",e,r._name+".range",[i,o])})}(0,e,r,a)}p.addEventListener("mousemove",g),p.addEventListener("mouseup",function t(){p.removeEventListener("mousemove",g),p.removeEventListener("mouseup",t),oe.removeElement(p)})})}(a,t,r,i),function(t,e,r,n,a,i){var o=Vb.handleWidth/2;function l(t){return oe.constrain(t,0,n._width)}function s(t){return oe.constrain(t,0,n._height)}function u(t){return oe.constrain(t,-o,n._width+o)}var c=l(n.d2p(r._rl[0])),f=l(n.d2p(r._rl[1]));if(t.select("rect."+Vb.slideBoxClassName).attr("x",c).attr("width",f-c),t.select("rect."+Vb.maskMinClassName).attr("width",c),t.select("rect."+Vb.maskMaxClassName).attr("x",f).attr("width",n._width-f),"match"!==i.rangemode){var h=n._height-s(n.d2pOppAxis(a._rl[1])),d=n._height-s(n.d2pOppAxis(a._rl[0]));t.select("rect."+Vb.maskMinOppAxisClassName).attr("x",c).attr("height",h).attr("width",f-c),t.select("rect."+Vb.maskMaxOppAxisClassName).attr("x",c).attr("y",d).attr("height",n._height-d).attr("width",f-c),t.select("rect."+Vb.slideBoxClassName).attr("y",h).attr("height",d-h)}var p=Math.round(u(c-o))-.5,g=Math.round(u(f-o))+.5;t.select("g."+Vb.grabberMinClassName).attr("transform","translate("+p+",0.5)"),t.select("g."+Vb.grabberMaxClassName).attr("transform","translate("+g+",0.5)")}(a,0,r,i,o,l),"bottom"===r.side&&ma.draw(t,r._id+"title",{propContainer:r,propName:r._name+".title",placeholder:e._dfltTitle.x,attributes:{x:r._offset+r._length/2,y:x+i._height+i._offsetShift+10+1.5*r.titlefont.size,"text-anchor":"middle"}}),na.autoMargin(t,i._id,{x:h[0],y:p,l:0,r:0,t:0,b:i._height+c.b+d,pad:Vb.extraPad+2*i._offsetShift})})}},Kb=Ln.line,t_=or.dash,e_=b.extendFlat,r_={_isLinkedToArray:"shape",visible:{valType:"boolean",dflt:!0,editType:"calcIfAutorange+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calcIfAutorange+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:e_({},xx.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calcIfAutorange+arraydraw"},xanchor:{valType:"any",editType:"calcIfAutorange+arraydraw"},x0:{valType:"any",editType:"calcIfAutorange+arraydraw"},x1:{valType:"any",editType:"calcIfAutorange+arraydraw"},yref:e_({},xx.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calcIfAutorange+arraydraw"},yanchor:{valType:"any",editType:"calcIfAutorange+arraydraw"},y0:{valType:"any",editType:"calcIfAutorange+arraydraw"},y1:{valType:"any",editType:"calcIfAutorange+arraydraw"},path:{valType:"string",editType:"calcIfAutorange+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:e_({},Kb.color,{editType:"arraydraw"}),width:e_({},Kb.width,{editType:"calcIfAutorange+arraydraw"}),dash:e_({},t_,{editType:"arraydraw"}),editType:"calcIfAutorange+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},editType:"arraydraw"},n_={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}},a_={rangeToShapePosition:function(t){return"log"===t.type?t.r2d:function(t){return t}},shapePositionToRange:function(t){return"log"===t.type?t.d2r:function(t){return t}},decodeDate:function(t){return function(e){return e.replace&&(e=e.replace("_"," ")),t(e)}},encodeDate:function(t){return function(e){return t(e).replace(" ","_")}},getDataToPixel:function(t,e,r){var n,a=t._fullLayout._size;if(e){var i=a_.shapePositionToRange(e);n=function(t){return e._offset+e.r2p(i(t,!0))},"date"===e.type&&(n=a_.decodeDate(n))}else n=r?function(t){return a.t+a.h*(1-t)}:function(t){return a.l+a.w*t};return n},getPixelToData:function(t,e,r){var n,a=t._fullLayout._size;if(e){var i=a_.rangeToShapePosition(e);n=function(t){return i(e.p2r(t-e._offset))}}else n=r?function(t){return 1-(t-a.t)/a.h}:function(t){return(t-a.l)/a.w};return n}};function i_(t){return l_(t.line.width,t.xsizemode,t.x0,t.x1,t.path,!1)}function o_(t){return l_(t.line.width,t.ysizemode,t.y0,t.y1,t.path,!0)}function l_(t,e,r,n,a,i){var o=t/2,l=i;if("pixel"===e){var s=a?function(t,e){var r=[];return t.match(n_.segmentRE).forEach(function(t){var n=e[t.charAt(0)].drawn;if(void 0!==n){var a=t.substr(1).match(n_.paramRE);!a||a.length<n||r.push(a[n])}}),r}(a,i?n_.paramIsY:n_.paramIsX):[r,n],u=oe.aggNums(Math.max,null,s),c=oe.aggNums(Math.min,null,s),f=c<0?Math.abs(c)+o:o,h=u>0?u+o:o;return{ppad:o,ppadplus:l?f:h,ppadminus:l?h:f}}return{ppad:o}}function s_(t,e,r,n,a){var i="category"===t.type?t.r2c:t.d2c;if(void 0!==e)return[i(e),i(r)];if(n){var o,l,s,u,c=1/0,f=-1/0,h=n.match(n_.segmentRE);for("date"===t.type&&(i=a_.decodeDate(i)),o=0;o<h.length;o++)void 0!==(l=a[h[o].charAt(0)].drawn)&&(!(s=h[o].substr(1).match(n_.paramRE))||s.length<l||((u=i(s[l]))<c&&(c=u),u>f&&(f=u)));return f>=c?[c,f]:void 0}}var u_=function(t,e,r,n,a){function i(r,n){return oe.coerce(t,e,r_,r,n)}if(n=n||{},!i("visible",!(a=a||{}).itemIsNotPlainObject))return e;i("layer"),i("opacity"),i("fillcolor"),i("line.color"),i("line.width"),i("line.dash");for(var o=i("type",t.path?"path":"rect"),l=i("xsizemode"),s=i("ysizemode"),u=["x","y"],c=0;c<2;c++){var f,h,d,p=u[c],g=p+"anchor",v="x"===p?l:s,m={_fullLayout:r},y=Na.coerceRef(t,e,m,p,"","paper");if("paper"!==y?(f=Na.getFromId(m,y),d=a_.rangeToShapePosition(f),h=a_.shapePositionToRange(f)):h=d=oe.identity,"path"!==o){var x=p+"0",b=p+"1",_=t[x],w=t[b];t[x]=h(t[x],!0),t[b]=h(t[b],!0),"pixel"===v?(i(x,0),i(b,10)):(Na.coercePosition(e,m,i,y,x,.25),Na.coercePosition(e,m,i,y,b,.75)),e[x]=d(e[x]),e[b]=d(e[b]),t[x]=_,t[b]=w}if("pixel"===v){var A=t[g];t[g]=h(t[g],!0),Na.coercePosition(e,m,i,y,g,.25),e[g]=d(e[g]),t[g]=A}}return"path"===o?i("path"):oe.noneOrAll(t,e,["x0","x1","y0","y1"]),e},c_={draw:function(t){var e=t._fullLayout;for(var r in e._shapeUpperLayer.selectAll("path").remove(),e._shapeLowerLayer.selectAll("path").remove(),e._plots){var n=e._plots[r].shapelayer;n&&n.selectAll("path").remove()}for(var a=0;a<e.shapes.length;a++)e.shapes[a].visible&&f_(t,a)},drawOne:f_};function f_(t,e){t._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+e+'"]').remove();var r=(t.layout.shapes||[])[e],n=t._fullLayout.shapes[e];if(r&&!1!==n.visible)if("below"!==n.layer)i(t._fullLayout._shapeUpperLayer);else if("paper"===n.xref||"paper"===n.yref)i(t._fullLayout._shapeLowerLayer);else{var a=t._fullLayout._plots[n.xref+n.yref];if(a)i((a.mainplotinfo||a).shapelayer);else i(t._fullLayout._shapeLowerLayer)}function i(r){var a={"data-index":e,"fill-rule":"evenodd",d:h_(t,n)},i=n.line.width?n.line.color:"rgba(0,0,0,0)",o=r.append("path").attr(a).style("opacity",n.opacity).call($e.stroke,i).call($e.fill,n.fillcolor).call(Jr.dashLine,n.line.dash,n.line.width),l=(n.xref+n.yref).replace(/paper/g,"");o.call(Jr.setClipUrl,l?"clip"+t._fullLayout._uid+l:null),t._context.edits.shapePosition&&function(t,e,r,n){var a,i,o,l,s,u,c,f,h,d,p,g,v,m,y,x,b,_,w,A,M,T,k,E,C,S,L,O,D,R,P,B,F,z,N=10,j=10,U="pixel"===r.xsizemode,V="pixel"===r.ysizemode,H={element:e.node(),gd:t,prepFn:function(e){O=Na.getFromId(t,r.xref),D=Na.getFromId(t,r.yref),R=a_.getDataToPixel(t,O),P=a_.getDataToPixel(t,D,!0),B=a_.getPixelToData(t,O),F=a_.getPixelToData(t,D,!0);var I="shapes["+n+"]";U&&(u=R(r.xanchor),g=I+".xanchor");V&&(c=P(r.yanchor),v=I+".yanchor");"path"===r.type?(S=r.path,L=I+".path"):(i=U?r.x0:R(r.x0),o=V?r.y0:P(r.y0),l=U?r.x1:R(r.x1),s=V?r.y1:P(r.y1),f=I+".x0",h=I+".y0",d=I+".x1",p=I+".y1");i<l?(x=i,A=I+".x0",E="x0",b=l,M=I+".x1",C="x1"):(x=l,A=I+".x1",E="x1",b=i,M=I+".x0",C="x0");!V&&o<s||V&&o>s?(m=o,_=I+".y0",T="y0",y=s,w=I+".y1",k="y1"):(m=s,_=I+".y1",T="y1",y=o,w=I+".y0",k="y0");a={},q(e),H.moveFn="move"===z?G:X},doneFn:function(){bn(e),I.call("relayout",t,a)}};function q(t){var r=H.element.getBoundingClientRect(),n=r.right-r.left,a=r.bottom-r.top,i=t.clientX-r.left,o=t.clientY-r.top,l=n>N&&a>j&&!t.shiftKey?Ye.getCursor(i/n,1-o/a):"move";bn(e,l),z=l.split("-")[0]}function G(n,m){if("path"===r.type){var y=function(t){return t},x=y,b=y;U?a[g]=r.xanchor=B(u+n):(x=function(t){return B(R(t)+n)},O&&"date"===O.type&&(x=a_.encodeDate(x))),V?a[v]=r.yanchor=F(c+m):(b=function(t){return F(P(t)+m)},D&&"date"===D.type&&(b=a_.encodeDate(b))),r.path=d_(S,x,b),a[L]=r.path}else U?a[g]=r.xanchor=B(u+n):(a[f]=r.x0=B(i+n),a[d]=r.x1=B(l+n)),V?a[v]=r.yanchor=F(c+m):(a[h]=r.y0=F(o+m),a[p]=r.y1=F(s+m));e.attr("d",h_(t,r))}function X(n,i){if("path"===r.type){var o=function(t){return t},l=o,s=o;U?a[g]=r.xanchor=B(u+n):(l=function(t){return B(R(t)+n)},O&&"date"===O.type&&(l=a_.encodeDate(l))),V?a[v]=r.yanchor=F(c+i):(s=function(t){return F(P(t)+i)},D&&"date"===D.type&&(s=a_.encodeDate(s))),r.path=d_(S,l,s),a[L]=r.path}else{var f=~z.indexOf("n")?m+i:m,h=~z.indexOf("s")?y+i:y,d=~z.indexOf("w")?x+n:x,p=~z.indexOf("e")?b+n:b;~z.indexOf("n")&&V&&(f=m-i),~z.indexOf("s")&&V&&(h=y-i),(!V&&h-f>j||V&&f-h>j)&&(a[_]=r[T]=V?f:F(f),a[w]=r[k]=V?h:F(h)),p-d>N&&(a[A]=r[E]=U?d:B(d),a[M]=r[C]=U?p:B(p))}e.attr("d",h_(t,r))}Ye.init(H),e.node().onmousemove=q}(t,o,n,e)}}function h_(t,e){var r,n,a,i,o,l,s,u,c=e.type,f=Na.getFromId(t,e.xref),h=Na.getFromId(t,e.yref),d=t._fullLayout._size;if(f?(r=a_.shapePositionToRange(f),n=function(t){return f._offset+f.r2p(r(t,!0))}):n=function(t){return d.l+d.w*t},h?(a=a_.shapePositionToRange(h),i=function(t){return h._offset+h.r2p(a(t,!0))}):i=function(t){return d.t+d.h*(1-t)},"path"===c)return f&&"date"===f.type&&(n=a_.decodeDate(n)),h&&"date"===h.type&&(i=a_.decodeDate(i)),function(t,e,r){var n=t.path,a=t.xsizemode,i=t.ysizemode,o=t.xanchor,l=t.yanchor;return n.replace(n_.segmentRE,function(t){var n=0,s=t.charAt(0),u=n_.paramIsX[s],c=n_.paramIsY[s],f=n_.numParams[s],h=t.substr(1).replace(n_.paramRE,function(t){return u[n]?t="pixel"===a?e(o)+Number(t):e(t):c[n]&&(t="pixel"===i?r(l)-Number(t):r(t)),++n>f&&(t="X"),t});return n>f&&(h=h.replace(/[\s,]*X.*/,""),oe.log("Ignoring extra params in segment "+t)),s+h})}(e,n,i);if("pixel"===e.xsizemode){var p=n(e.xanchor);o=p+e.x0,l=p+e.x1}else o=n(e.x0),l=n(e.x1);if("pixel"===e.ysizemode){var g=i(e.yanchor);s=g-e.y0,u=g-e.y1}else s=i(e.y0),u=i(e.y1);if("line"===c)return"M"+o+","+s+"L"+l+","+u;if("rect"===c)return"M"+o+","+s+"H"+l+"V"+u+"H"+o+"Z";var v=(o+l)/2,m=(s+u)/2,y=Math.abs(v-o),x=Math.abs(m-s),b="A"+y+","+x,_=v+y+","+m;return"M"+_+b+" 0 1,1 "+(v+","+(m-x))+b+" 0 0,1 "+_+"Z"}function d_(t,e,r){return t.replace(n_.segmentRE,function(t){var n=0,a=t.charAt(0),i=n_.paramIsX[a],o=n_.paramIsY[a],l=n_.numParams[a];return a+t.substr(1).replace(n_.paramRE,function(t){return n>=l?t:(i[n]?t=e(t):o[n]&&(t=r(t)),n++,t)})})}var p_={moduleType:"component",name:"shapes",layoutAttributes:r_,supplyLayoutDefaults:function(t,e){Ox(t,e,{name:"shapes",handleItemDefaults:u_})},includeBasePlot:Dx("shapes"),calcAutorange:function(t){var e=t._fullLayout,r=oe.filterVisible(e.shapes);if(r.length&&t._fullData.length)for(var n=0;n<r.length;n++){var a,i,o=r[n];if("paper"!==o.xref){var l="pixel"===o.xsizemode?o.xanchor:o.x0,s="pixel"===o.xsizemode?o.xanchor:o.x1;(i=s_(a=Na.getFromId(t,o.xref),l,s,o.path,n_.paramIsX))&&Na.expand(a,i,i_(o))}if("paper"!==o.yref){var u="pixel"===o.ysizemode?o.yanchor:o.y0,c="pixel"===o.ysizemode?o.yanchor:o.y1;(i=s_(a=Na.getFromId(t,o.yref),u,c,o.path,n_.paramIsY))&&Na.expand(a,i,o_(o))}}},draw:c_.draw,drawOne:c_.drawOne},g_={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0},v_={t:{valType:"number",dflt:0,editType:"arraydraw"},r:{valType:"number",dflt:0,editType:"arraydraw"},b:{valType:"number",dflt:0,editType:"arraydraw"},l:{valType:"number",dflt:0,editType:"arraydraw"},editType:"arraydraw"},m_=b.extendDeepAll,y_=(0,_e.overrideAll)({_isLinkedToArray:"slider",visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:{_isLinkedToArray:"step",method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:m_({},v_,{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:An.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:S({})},font:S({}),activebgcolor:{valType:"color",dflt:g_.gripBgActiveColor},bgcolor:{valType:"color",dflt:g_.railBgColor},bordercolor:{valType:"color",dflt:g_.railBorderColor},borderwidth:{valType:"number",min:0,dflt:g_.railBorderWidth},ticklen:{valType:"number",min:0,dflt:g_.tickLength},tickcolor:{valType:"color",dflt:g_.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:g_.minorTickLength}},"arraydraw","from-root"),x_=g_.name,b_=y_.steps;function __(t,e,r){function n(r,n){return oe.coerce(t,e,y_,r,n)}n("visible",function(t,e){var r,n,a=t.steps||[],i=e.steps=[];function o(t,e){return oe.coerce(r,n,b_,t,e)}for(var l=0;l<a.length;l++)r=a[l],n={},o("method"),oe.isPlainObject(r)&&("skip"===n.method||Array.isArray(r.args))&&(o("args"),o("label","step-"+l),o("value",n.label),o("execute"),i.push(n));return i}(t,e).length>0)&&(n("active"),n("x"),n("y"),oe.noneOrAll(t,e,["x","y"]),n("xanchor"),n("yanchor"),n("len"),n("lenmode"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),oe.coerceFont(n,"font",r.font),n("currentvalue.visible")&&(n("currentvalue.xanchor"),n("currentvalue.prefix"),n("currentvalue.suffix"),n("currentvalue.offset"),oe.coerceFont(n,"currentvalue.font",e.font)),n("transition.duration"),n("transition.easing"),n("bgcolor"),n("activebgcolor"),n("bordercolor"),n("borderwidth"),n("ticklen"),n("tickwidth"),n("tickcolor"),n("minorticklen"))}var w_=wr.LINE_SPACING,A_=wr.FROM_TL,M_=wr.FROM_BR;function T_(t){return t._index}function k_(t,e){var r=Jr.tester.selectAll("g."+g_.labelGroupClass).data(e.steps);r.enter().append("g").classed(g_.labelGroupClass,!0);var a=0,i=0;r.each(function(t){var r=S_(n.select(this),{step:t},e).node();if(r){var o=Jr.bBox(r);i=Math.max(i,o.height),a=Math.max(a,o.width)}}),r.remove();var o=e._dims={};o.inputAreaWidth=Math.max(g_.railWidth,g_.gripHeight);var l=t._fullLayout._size;o.lx=l.l+l.w*e.x,o.ly=l.t+l.h*(1-e.y),"fraction"===e.lenmode?o.outerLength=Math.round(l.w*e.len):o.outerLength=e.len,o.inputAreaStart=0,o.inputAreaLength=Math.round(o.outerLength-e.pad.l-e.pad.r);var s=(o.inputAreaLength-2*g_.stepInset)/(e.steps.length-1),u=a+g_.labelPadding;if(o.labelStride=Math.max(1,Math.ceil(u/s)),o.labelHeight=i,o.currentValueMaxWidth=0,o.currentValueHeight=0,o.currentValueTotalHeight=0,o.currentValueMaxLines=1,e.currentvalue.visible){var c=Jr.tester.append("g");r.each(function(t){var r=E_(c,e,t.label),n=r.node()&&Jr.bBox(r.node())||{width:0,height:0},a=Mr.lineCount(r);o.currentValueMaxWidth=Math.max(o.currentValueMaxWidth,Math.ceil(n.width)),o.currentValueHeight=Math.max(o.currentValueHeight,Math.ceil(n.height)),o.currentValueMaxLines=Math.max(o.currentValueMaxLines,a)}),o.currentValueTotalHeight=o.currentValueHeight+e.currentvalue.offset,c.remove()}o.height=o.currentValueTotalHeight+g_.tickOffset+e.ticklen+g_.labelOffset+o.labelHeight+e.pad.t+e.pad.b;var f="left";hb.isRightAnchor(e)&&(o.lx-=o.outerLength,f="right"),hb.isCenterAnchor(e)&&(o.lx-=o.outerLength/2,f="center");var h="top";hb.isBottomAnchor(e)&&(o.ly-=o.height,h="bottom"),hb.isMiddleAnchor(e)&&(o.ly-=o.height/2,h="middle"),o.outerLength=Math.ceil(o.outerLength),o.height=Math.ceil(o.height),o.lx=Math.round(o.lx),o.ly=Math.round(o.ly),na.autoMargin(t,g_.autoMarginIdRoot+e._index,{x:e.x,y:e.y,l:o.outerLength*A_[f],r:o.outerLength*M_[f],b:o.height*M_[h],t:o.height*A_[h]})}function E_(t,e,r){if(e.currentvalue.visible){var n,a,i=e._dims;switch(e.currentvalue.xanchor){case"right":n=i.inputAreaLength-g_.currentValueInset-i.currentValueMaxWidth,a="left";break;case"center":n=.5*i.inputAreaLength,a="middle";break;default:n=g_.currentValueInset,a="left"}var o=oe.ensureSingle(t,"text",g_.labelClass,function(t){t.classed("user-select-none",!0).attr({"text-anchor":a,"data-notex":1})}),l=e.currentvalue.prefix?e.currentvalue.prefix:"";if("string"==typeof r)l+=r;else l+=e.steps[e.active].label;e.currentvalue.suffix&&(l+=e.currentvalue.suffix),o.call(Jr.font,e.currentvalue.font).text(l).call(Mr.convertToTspans,e._gd);var s=Mr.lineCount(o),u=(i.currentValueMaxLines+1-s)*e.currentvalue.font.size*w_;return Mr.positionText(o,n,u),o}}function C_(t,e,r){oe.ensureSingle(t,"rect",g_.gripRectClass,function(n){n.call(R_,e,t,r).style("pointer-events","all")}).attr({width:g_.gripWidth,height:g_.gripHeight,rx:g_.gripRadius,ry:g_.gripRadius}).call($e.stroke,r.bordercolor).call($e.fill,r.bgcolor).style("stroke-width",r.borderwidth+"px")}function S_(t,e,r){var n=oe.ensureSingle(t,"text",g_.labelClass,function(t){t.classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1})});return n.call(Jr.font,r.font).text(e.step.label).call(Mr.convertToTspans,r._gd),n}function L_(t,e){var r=oe.ensureSingle(t,"g",g_.labelsClass),a=e._dims,i=r.selectAll("g."+g_.labelGroupClass).data(a.labelSteps);i.enter().append("g").classed(g_.labelGroupClass,!0),i.exit().remove(),i.each(function(t){var r=n.select(this);r.call(S_,t,e),Jr.setTranslate(r,B_(e,t.fraction),g_.tickOffset+e.ticklen+e.font.size*w_+g_.labelOffset+a.currentValueTotalHeight)})}function O_(t,e,r,n,a){var i=Math.round(n*(r.steps.length-1));i!==r.active&&D_(t,e,r,i,!0,a)}function D_(t,e,r,n,a,i){var o=r.active;r._input.active=r.active=n;var l=r.steps[r.active];e.call(I_,r,r.active/(r.steps.length-1),i),e.call(E_,r),t.emit("plotly_sliderchange",{slider:r,step:r.steps[r.active],interaction:a,previousActive:o}),l&&l.method&&a&&(e._nextMethod?(e._nextMethod.step=l,e._nextMethod.doCallback=a,e._nextMethod.doTransition=i):(e._nextMethod={step:l,doCallback:a,doTransition:i},e._nextMethodRaf=window.requestAnimationFrame(function(){var r=e._nextMethod.step;r.method&&(r.execute&&na.executeAPICommand(t,r.method,r.args),e._nextMethod=null,e._nextMethodRaf=null)})))}function R_(t,e,r){var a=r.node(),i=n.select(e);function o(){return r.data()[0]}t.on("mousedown",function(){var t=o();e.emit("plotly_sliderstart",{slider:t});var l=r.select("."+g_.gripRectClass);n.event.stopPropagation(),n.event.preventDefault(),l.call($e.fill,t.activebgcolor);var s=F_(t,n.mouse(a)[0]);O_(e,r,t,s,!0),t._dragging=!0,i.on("mousemove",function(){var t=o(),i=F_(t,n.mouse(a)[0]);O_(e,r,t,i,!1)}),i.on("mouseup",function(){var t=o();t._dragging=!1,l.call($e.fill,t.bgcolor),i.on("mouseup",null),i.on("mousemove",null),e.emit("plotly_sliderend",{slider:t,step:t.steps[t.active]})})})}function P_(t,e){var r=t.selectAll("rect."+g_.tickRectClass).data(e.steps),a=e._dims;r.enter().append("rect").classed(g_.tickRectClass,!0),r.exit().remove(),r.attr({width:e.tickwidth+"px","shape-rendering":"crispEdges"}),r.each(function(t,r){var i=r%a.labelStride==0,o=n.select(this);o.attr({height:i?e.ticklen:e.minorticklen}).call($e.fill,e.tickcolor),Jr.setTranslate(o,B_(e,r/(e.steps.length-1))-.5*e.tickwidth,(i?g_.tickOffset:g_.minorTickOffset)+a.currentValueTotalHeight)})}function I_(t,e,r,n){var a=t.select("rect."+g_.gripRectClass),i=B_(e,r);if(!e._invokingCommand){var o=a;n&&e.transition.duration>0&&(o=o.transition().duration(e.transition.duration).ease(e.transition.easing)),o.attr("transform","translate("+(i-.5*g_.gripWidth)+","+e._dims.currentValueTotalHeight+")")}}function B_(t,e){var r=t._dims;return r.inputAreaStart+g_.stepInset+(r.inputAreaLength-2*g_.stepInset)*Math.min(1,Math.max(0,e))}function F_(t,e){var r=t._dims;return Math.min(1,Math.max(0,(e-g_.stepInset-r.inputAreaStart)/(r.inputAreaLength-2*g_.stepInset-2*r.inputAreaStart)))}function z_(t,e,r){var n=r._dims,a=oe.ensureSingle(t,"rect",g_.railTouchRectClass,function(n){n.call(R_,e,t,r).style("pointer-events","all")});a.attr({width:n.inputAreaLength,height:Math.max(n.inputAreaWidth,g_.tickOffset+r.ticklen+n.labelHeight)}).call($e.fill,r.bgcolor).attr("opacity",0),Jr.setTranslate(a,0,n.currentValueTotalHeight)}function N_(t,e){var r=e._dims,n=r.inputAreaLength-2*g_.railInset,a=oe.ensureSingle(t,"rect",g_.railRectClass);a.attr({width:n,height:g_.railWidth,rx:g_.railRadius,ry:g_.railRadius,"shape-rendering":"crispEdges"}).call($e.stroke,e.bordercolor).call($e.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px"),Jr.setTranslate(a,g_.railInset,.5*(r.inputAreaWidth-g_.railWidth)+r.currentValueTotalHeight)}var j_={moduleType:"component",name:g_.name,layoutAttributes:y_,supplyLayoutDefaults:function(t,e){Ox(t,e,{name:x_,handleItemDefaults:__})},draw:function(t){var e=t._fullLayout,r=function(t,e){for(var r=t[g_.name],n=[],a=0;a<r.length;a++){var i=r[a];i.visible&&i.steps.length&&(i._gd=e,n.push(i))}return n}(e,t),a=e._infolayer.selectAll("g."+g_.containerClassName).data(r.length>0?[0]:[]);if(a.enter().append("g").classed(g_.containerClassName,!0).style("cursor","ew-resize"),a.exit().remove(),a.exit().size()&&function(t){for(var e=t._fullLayout._pushmargin||{},r=Object.keys(e),n=0;n<r.length;n++){var a=r[n];-1!==a.indexOf(g_.autoMarginIdRoot)&&na.autoMargin(t,a)}}(t),0!==r.length){var i=a.selectAll("g."+g_.groupClassName).data(r,T_);i.enter().append("g").classed(g_.groupClassName,!0),i.exit().each(function(e){n.select(this).remove(),e._commandObserver.remove(),delete e._commandObserver,na.autoMargin(t,g_.autoMarginIdRoot+e._index)});for(var o=0;o<r.length;o++){var l=r[o];k_(t,l)}i.each(function(e){if(!(e.steps.length<2)){var r=n.select(this);!function(t){var e=t._dims;e.labelSteps=[];for(var r=t.steps.length,n=0;n<r;n+=e.labelStride)e.labelSteps.push({fraction:n/(r-1),step:t.steps[n]})}(e),na.manageCommandObserver(t,e,e.steps,function(e){var n=r.data()[0];n.active!==e.index&&(n._dragging||D_(t,r,n,e.index,!1,!0))}),function(t,e,r){r.active>=r.steps.length&&(r.active=0),e.call(E_,r).call(N_,r).call(L_,r).call(P_,r).call(z_,t,r).call(C_,t,r);var n=r._dims;Jr.setTranslate(e,n.lx+r.pad.l,n.ly+r.pad.t),e.call(I_,r,r.active/(r.steps.length-1),!1),e.call(E_,r)}(t,n.select(this),e)}})}}},U_=b.extendFlat,V_=(0,_e.overrideAll)({_isLinkedToArray:"updatemenu",_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:{_isLinkedToArray:"button",method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}},x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:U_({},v_,{}),font:S({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:D.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}},"arraydraw","from-root"),H_={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}},q_=H_.name,G_=V_.buttons;function X_(t,e,r){function n(r,n){return oe.coerce(t,e,V_,r,n)}n("visible",function(t,e){var r,n,a=t.buttons||[],i=e.buttons=[];function o(t,e){return oe.coerce(r,n,G_,t,e)}for(var l=0;l<a.length;l++)r=a[l],n={},o("method"),oe.isPlainObject(r)&&("skip"===n.method||Array.isArray(r.args))&&(o("args"),o("label"),o("execute"),n._index=l,i.push(n));return i}(t,e).length>0)&&(n("active"),n("direction"),n("type"),n("showactive"),n("x"),n("y"),oe.noneOrAll(t,e,["x","y"]),n("xanchor"),n("yanchor"),n("pad.t"),n("pad.r"),n("pad.b"),n("pad.l"),oe.coerceFont(n,"font",r.font),n("bgcolor",r.paper_bgcolor),n("bordercolor"),n("borderwidth"))}var Y_=W_;function W_(t,e,r){this.gd=t,this.container=e,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}W_.barWidth=2,W_.barLength=20,W_.barRadius=2,W_.barPad=1,W_.barColor="#808BA4",W_.prototype.enable=function(t,e,r){var a=this.gd._fullLayout,i=a.width,o=a.height;this.position=t;var l,s,u,c,f=this.position.l,h=this.position.w,d=this.position.t,p=this.position.h,g=this.position.direction,v="down"===g,m="left"===g,y="up"===g,x=h,b=p;v||m||"right"===g||y||(this.position.direction="down",v=!0),v||y?(s=(l=f)+x,v?(u=d,b=(c=Math.min(u+b,o))-u):b=(c=d+b)-(u=Math.max(c-b,0))):(c=(u=d)+b,m?x=(s=f+x)-(l=Math.max(s-x,0)):(l=f,x=(s=Math.min(l+x,i))-l)),this._box={l:l,t:u,w:x,h:b};var _=h>x,w=W_.barLength+2*W_.barPad,A=W_.barWidth+2*W_.barPad,M=f,T=d+p;T+A>o&&(T=o-A);var k=this.container.selectAll("rect.scrollbar-horizontal").data(_?[0]:[]);k.exit().on(".drag",null).remove(),k.enter().append("rect").classed("scrollbar-horizontal",!0).call($e.fill,W_.barColor),_?(this.hbar=k.attr({rx:W_.barRadius,ry:W_.barRadius,x:M,y:T,width:w,height:A}),this._hbarXMin=M+w/2,this._hbarTranslateMax=x-w):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var E=p>b,C=W_.barWidth+2*W_.barPad,S=W_.barLength+2*W_.barPad,L=f+h,O=d;L+C>i&&(L=i-C);var D=this.container.selectAll("rect.scrollbar-vertical").data(E?[0]:[]);D.exit().on(".drag",null).remove(),D.enter().append("rect").classed("scrollbar-vertical",!0).call($e.fill,W_.barColor),E?(this.vbar=D.attr({rx:W_.barRadius,ry:W_.barRadius,x:L,y:O,width:C,height:S}),this._vbarYMin=O+S/2,this._vbarTranslateMax=b-S):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var R=this.id,P=l-.5,I=E?s+C+.5:s+.5,B=u-.5,F=_?c+A+.5:c+.5,z=a._topdefs.selectAll("#"+R).data(_||E?[0]:[]);if(z.exit().remove(),z.enter().append("clipPath").attr("id",R).append("rect"),_||E?(this._clipRect=z.select("rect").attr({x:Math.floor(P),y:Math.floor(B),width:Math.ceil(I)-Math.floor(P),height:Math.ceil(F)-Math.floor(B)}),this.container.call(Jr.setClipUrl,R),this.bg.attr({x:f,y:d,width:h,height:p})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(Jr.setClipUrl,null),delete this._clipRect),_||E){var N=n.behavior.drag().on("dragstart",function(){n.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(N);var j=n.behavior.drag().on("dragstart",function(){n.event.sourceEvent.preventDefault(),n.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));_&&this.hbar.on(".drag",null).call(j),E&&this.vbar.on(".drag",null).call(j)}this.setTranslate(e,r)},W_.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(Jr.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},W_.prototype._onBoxDrag=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t-=n.event.dx),this.vbar&&(e-=n.event.dy),this.setTranslate(t,e)},W_.prototype._onBoxWheel=function(){var t=this.translateX,e=this.translateY;this.hbar&&(t+=n.event.deltaY),this.vbar&&(e+=n.event.deltaY),this.setTranslate(t,e)},W_.prototype._onBarDrag=function(){var t=this.translateX,e=this.translateY;if(this.hbar){var r=t+this._hbarXMin,a=r+this._hbarTranslateMax;t=(oe.constrain(n.event.x,r,a)-r)/(a-r)*(this.position.w-this._box.w)}if(this.vbar){var i=e+this._vbarYMin,o=i+this._vbarTranslateMax;e=(oe.constrain(n.event.y,i,o)-i)/(o-i)*(this.position.h-this._box.h)}this.setTranslate(t,e)},W_.prototype.setTranslate=function(t,e){var r=this.position.w-this._box.w,n=this.position.h-this._box.h;if(t=oe.constrain(t||0,0,r),e=oe.constrain(e||0,0,n),this.translateX=t,this.translateY=e,this.container.call(Jr.setTranslate,this._box.l-this.position.l-t,this._box.t-this.position.t-e),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+t-.5),y:Math.floor(this.position.t+e-.5)}),this.hbar){var a=t/r;this.hbar.call(Jr.setTranslate,t+a*this._hbarTranslateMax,e)}if(this.vbar){var i=e/n;this.vbar.call(Jr.setTranslate,t,e+i*this._vbarTranslateMax)}};var Z_=wr.LINE_SPACING;function J_(t){return t._index}function Q_(t,e){return+t.attr(H_.menuIndexAttrName)===e._index}function $_(t,e,r,n,a,i,o,l){e._input.active=e.active=o,"buttons"===e.type?tw(t,n,null,null,e):"dropdown"===e.type&&(a.attr(H_.menuIndexAttrName,"-1"),K_(t,n,a,i,e),l||tw(t,n,a,i,e))}function K_(t,e,r,n,a){var i=oe.ensureSingle(e,"g",H_.headerClassName,function(t){t.style("pointer-events","all")}),o=a._dims,l=a.active,s=a.buttons[l]||H_.blankHeaderOpts,u={y:a.pad.t,yPad:0,x:a.pad.l,xPad:0,index:0},c={width:o.headerWidth,height:o.headerHeight};i.call(ew,a,s,t).call(sw,a,u,c),oe.ensureSingle(e,"text",H_.headerArrowClassName,function(t){t.classed("user-select-none",!0).attr("text-anchor","end").call(Jr.font,a.font).text(H_.arrowSymbol[a.direction])}).attr({x:o.headerWidth-H_.arrowOffsetX+a.pad.l,y:o.headerHeight/2+H_.textOffsetY+a.pad.t}),i.on("click",function(){r.call(uw),r.attr(H_.menuIndexAttrName,Q_(r,a)?-1:String(a._index)),tw(t,e,r,n,a)}),i.on("mouseover",function(){i.call(iw)}),i.on("mouseout",function(){i.call(ow,a)}),Jr.setTranslate(e,o.lx,o.ly)}function tw(t,e,r,a,i){r||(r=e).attr("pointer-events","all");var o=function(t){return-1==+t.attr(H_.menuIndexAttrName)}(r)&&"buttons"!==i.type?[]:i.buttons,l="dropdown"===i.type?H_.dropdownButtonClassName:H_.buttonClassName,s=r.selectAll("g."+l).data(o),u=s.enter().append("g").classed(l,!0),c=s.exit();"dropdown"===i.type?(u.attr("opacity","0").transition().attr("opacity","1"),c.transition().attr("opacity","0").remove()):c.remove();var f=0,h=0,d=i._dims,p=-1!==["up","down"].indexOf(i.direction);"dropdown"===i.type&&(p?h=d.headerHeight+H_.gapButtonHeader:f=d.headerWidth+H_.gapButtonHeader),"dropdown"===i.type&&"up"===i.direction&&(h=-H_.gapButtonHeader+H_.gapButton-d.openHeight),"dropdown"===i.type&&"left"===i.direction&&(f=-H_.gapButtonHeader+H_.gapButton-d.openWidth);var g={x:d.lx+f+i.pad.l,y:d.ly+h+i.pad.t,yPad:H_.gapButton,xPad:H_.gapButton,index:0},v={l:g.x+i.borderwidth,t:g.y+i.borderwidth};s.each(function(o,l){var u=n.select(this);u.call(ew,i,o,t).call(sw,i,g),u.on("click",function(){n.event.defaultPrevented||($_(t,i,0,e,r,a,l),o.execute&&na.executeAPICommand(t,o.method,o.args),t.emit("plotly_buttonclicked",{menu:i,button:o,active:i.active}))}),u.on("mouseover",function(){u.call(iw)}),u.on("mouseout",function(){u.call(ow,i),s.call(aw,i)})}),s.call(aw,i),p?(v.w=Math.max(d.openWidth,d.headerWidth),v.h=g.y-v.t):(v.w=g.x-v.l,v.h=Math.max(d.openHeight,d.headerHeight)),v.direction=i.direction,a&&(s.size()?function(t,e,r,n,a,i){var o,l,s,u=a.direction,c="up"===u||"down"===u,f=a._dims,h=a.active;if(c)for(l=0,s=0;s<h;s++)l+=f.heights[s]+H_.gapButton;else for(o=0,s=0;s<h;s++)o+=f.widths[s]+H_.gapButton;n.enable(i,o,l),n.hbar&&n.hbar.attr("opacity","0").transition().attr("opacity","1");n.vbar&&n.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,a,i,v):function(t){var e=!!t.hbar,r=!!t.vbar;e&&t.hbar.transition().attr("opacity","0").each("end",function(){e=!1,r||t.disable()});r&&t.vbar.transition().attr("opacity","0").each("end",function(){r=!1,e||t.disable()})}(a))}function ew(t,e,r,n){t.call(rw,e).call(nw,e,r,n)}function rw(t,e){oe.ensureSingle(t,"rect",H_.itemRectClassName,function(t){t.attr({rx:H_.rx,ry:H_.ry,"shape-rendering":"crispEdges"})}).call($e.stroke,e.bordercolor).call($e.fill,e.bgcolor).style("stroke-width",e.borderwidth+"px")}function nw(t,e,r,n){oe.ensureSingle(t,"text",H_.itemTextClassName,function(t){t.classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1})}).call(Jr.font,e.font).text(r.label).call(Mr.convertToTspans,n)}function aw(t,e){var r=e.active;t.each(function(t,a){var i=n.select(this);a===r&&e.showactive&&i.select("rect."+H_.itemRectClassName).call($e.fill,H_.activeColor)})}function iw(t){t.select("rect."+H_.itemRectClassName).call($e.fill,H_.hoverColor)}function ow(t,e){t.select("rect."+H_.itemRectClassName).call($e.fill,e.bgcolor)}function lw(t,e){var r=e._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},a=Jr.tester.selectAll("g."+H_.dropdownButtonClassName).data(e.buttons);a.enter().append("g").classed(H_.dropdownButtonClassName,!0);var i=-1!==["up","down"].indexOf(e.direction);a.each(function(a,o){var l=n.select(this);l.call(ew,e,a,t);var s=l.select("."+H_.itemTextClassName),u=s.node()&&Jr.bBox(s.node()).width,c=Math.max(u+H_.textPadX,H_.minWidth),f=e.font.size*Z_,h=Mr.lineCount(s),d=Math.max(f*h,H_.minHeight)+H_.textOffsetY;d=Math.ceil(d),c=Math.ceil(c),r.widths[o]=c,r.heights[o]=d,r.height1=Math.max(r.height1,d),r.width1=Math.max(r.width1,c),i?(r.totalWidth=Math.max(r.totalWidth,c),r.openWidth=r.totalWidth,r.totalHeight+=d+H_.gapButton,r.openHeight+=d+H_.gapButton):(r.totalWidth+=c+H_.gapButton,r.openWidth+=c+H_.gapButton,r.totalHeight=Math.max(r.totalHeight,d),r.openHeight=r.totalHeight)}),i?r.totalHeight-=H_.gapButton:r.totalWidth-=H_.gapButton,r.headerWidth=r.width1+H_.arrowPadX,r.headerHeight=r.height1,"dropdown"===e.type&&(i?(r.width1+=H_.arrowPadX,r.totalHeight=r.height1):r.totalWidth=r.width1,r.totalWidth+=H_.arrowPadX),a.remove();var o=r.totalWidth+e.pad.l+e.pad.r,l=r.totalHeight+e.pad.t+e.pad.b,s=t._fullLayout._size;r.lx=s.l+s.w*e.x,r.ly=s.t+s.h*(1-e.y);var u="left";hb.isRightAnchor(e)&&(r.lx-=o,u="right"),hb.isCenterAnchor(e)&&(r.lx-=o/2,u="center");var c="top";hb.isBottomAnchor(e)&&(r.ly-=l,c="bottom"),hb.isMiddleAnchor(e)&&(r.ly-=l/2,c="middle"),r.totalWidth=Math.ceil(r.totalWidth),r.totalHeight=Math.ceil(r.totalHeight),r.lx=Math.round(r.lx),r.ly=Math.round(r.ly),na.autoMargin(t,H_.autoMarginIdRoot+e._index,{x:e.x,y:e.y,l:o*({right:1,center:.5}[u]||0),r:o*({left:1,center:.5}[u]||0),b:l*({top:1,middle:.5}[c]||0),t:l*({bottom:1,middle:.5}[c]||0)})}function sw(t,e,r,n){n=n||{};var a=t.select("."+H_.itemRectClassName),i=t.select("."+H_.itemTextClassName),o=e.borderwidth,l=r.index,s=e._dims;Jr.setTranslate(t,o+r.x,o+r.y);var u=-1!==["up","down"].indexOf(e.direction),c=n.height||(u?s.heights[l]:s.height1);a.attr({x:0,y:0,width:n.width||(u?s.width1:s.widths[l]),height:c});var f=e.font.size*Z_,h=(Mr.lineCount(i)-1)*f/2;Mr.positionText(i,H_.textOffsetX,c/2-h+H_.textOffsetY),u?r.y+=s.heights[l]+r.yPad:r.x+=s.widths[l]+r.xPad,r.index++}function uw(t){t.selectAll("g."+H_.dropdownButtonClassName).remove()}var cw={moduleType:"component",name:H_.name,layoutAttributes:V_,supplyLayoutDefaults:function(t,e){Ox(t,e,{name:q_,handleItemDefaults:X_})},draw:function(t){var e=t._fullLayout,r=function(t){for(var e=t[H_.name],r=[],n=0;n<e.length;n++){var a=e[n];a.visible&&r.push(a)}return r}(e),a=e._menulayer.selectAll("g."+H_.containerClassName).data(r.length>0?[0]:[]);if(a.enter().append("g").classed(H_.containerClassName,!0).style("cursor","pointer"),a.exit().remove(),a.exit().size()&&function(t){for(var e=t._fullLayout._pushmargin||{},r=Object.keys(e),n=0;n<r.length;n++){var a=r[n];-1!==a.indexOf(H_.autoMarginIdRoot)&&na.autoMargin(t,a)}}(t),0!==r.length){var i=a.selectAll("g."+H_.headerGroupClassName).data(r,J_);i.enter().append("g").classed(H_.headerGroupClassName,!0);for(var o=oe.ensureSingle(a,"g",H_.dropdownButtonGroupClassName,function(t){t.style("pointer-events","all")}),l=0;l<r.length;l++){var s=r[l];lw(t,s)}var u="updatemenus"+e._uid,c=new Y_(t,o,u);i.enter().size()&&(o.node().parentNode.appendChild(o.node()),o.call(uw).attr(H_.menuIndexAttrName,"-1")),i.exit().each(function(e){n.select(this).remove(),o.call(uw).attr(H_.menuIndexAttrName,"-1"),na.autoMargin(t,H_.autoMarginIdRoot+e._index)}),i.each(function(e){var r=n.select(this),a="dropdown"===e.type?o:null;na.manageCommandObserver(t,e,e.buttons,function(n){$_(t,e,e.buttons[n.index],r,a,c,n.index,!0)}),"dropdown"===e.type?(K_(t,r,o,c,e),Q_(o,e)&&tw(t,r,o,c,e)):tw(t,r,null,null,e)})}}},fw={};"undefined"!=typeof MathJax?(fw.MathJax=!0,MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured()):fw.MathJax=!1;var hw={add:function(t,e,r,n,a){var i,o;t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},o=t.undoQueue.index,t.autoplay?t.undoQueue.inSequence||(t.autoplay=!1):(!t.undoQueue.sequence||t.undoQueue.beginSequence?(i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(o,t.undoQueue.queue.length-o,i),t.undoQueue.index+=1):i=t.undoQueue.queue[o-1],t.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(e),i.undo.args.unshift(r),i.redo.calls.push(n),i.redo.args.push(a)),t.undoQueue.queue.length>A.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--))},startSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},stopSequence:function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},undo:function(t){var e,r;if(t.framework&&t.framework.isPolar)t.framework.undo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index<=0)){for(t.undoQueue.index--,e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,r=0;r<e.undo.calls.length;r++)hw.plotDo(t,e.undo.calls[r],e.undo.args[r]);t.undoQueue.inSequence=!1,t.autoplay=!1}},redo:function(t){var e,r;if(t.framework&&t.framework.isPolar)t.framework.redo();else if(!(void 0===t.undoQueue||isNaN(t.undoQueue.index)||t.undoQueue.index>=t.undoQueue.queue.length)){for(e=t.undoQueue.queue[t.undoQueue.index],t.undoQueue.inSequence=!0,r=0;r<e.redo.calls.length;r++)hw.plotDo(t,e.redo.calls[r],e.redo.args[r]);t.undoQueue.inSequence=!1,t.autoplay=!1,t.undoQueue.index++}}};hw.plotDo=function(t,e,r){t.autoplay=!0,r=function(t,e){for(var r,n=[],a=0;a<e.length;a++)r=e[a],n[a]=r===t?r:"object"==typeof r?Array.isArray(r)?oe.extendDeep([],r):oe.extendDeepAll({},r):r;return n}(t,r),e.apply(null,r)};var dw=hw,pw=function(t,e){var r=e[0],n=e[1],a=e[2],i=e[3],o=r+r,l=n+n,s=a+a,u=r*o,c=n*o,f=n*l,h=a*o,d=a*l,p=a*s,g=i*o,v=i*l,m=i*s;return t[0]=1-f-p,t[1]=c+m,t[2]=h-v,t[3]=0,t[4]=c-m,t[5]=1-u-p,t[6]=d+g,t[7]=0,t[8]=h+v,t[9]=d-g,t[10]=1-u-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t};var gw={},vw=De.cleanId,mw=De.getFromTrace;function yw(t,e){var r=t[e],n=e.charAt(0);r&&"paper"!==r&&(t[e]=vw(r,n))}function xw(t){if(!oe.isPlainObject(t))return!1;var e=t.name;return delete t.name,delete t.showlegend,("string"==typeof e||"number"==typeof e)&&String(e)}function bw(t,e,r,n){if(r&&!n)return t;if(n&&!r)return e;if(!t.trim())return e;if(!e.trim())return t;var a,i=Math.min(t.length,e.length);for(a=0;a<i&&t.charAt(a)===e.charAt(a);a++);return t.substr(0,a).trim()}function _w(t){var e="middle",r="center";return-1!==t.indexOf("top")?e="top":-1!==t.indexOf("bottom")&&(e="bottom"),-1!==t.indexOf("left")?r="left":-1!==t.indexOf("right")&&(r="right"),e+" "+r}function ww(t,e){return e in t&&"object"==typeof t[e]&&0===Object.keys(t[e]).length}gw.clearPromiseQueue=function(t){Array.isArray(t._promises)&&t._promises.length>0&&oe.log("Clearing previous rejected promises from queue."),t._promises=[]},gw.cleanLayout=function(t){var e,r;t||(t={}),t.xaxis1&&(t.xaxis||(t.xaxis=t.xaxis1),delete t.xaxis1),t.yaxis1&&(t.yaxis||(t.yaxis=t.yaxis1),delete t.yaxis1),t.scene1&&(t.scene||(t.scene=t.scene1),delete t.scene1);var n=(na.subplotsRegistry.cartesian||{}).attrRegex,a=(na.subplotsRegistry.gl3d||{}).attrRegex,i=Object.keys(t);for(e=0;e<i.length;e++){var o=i[e];if(n&&n.test(o)){var l=t[o];l.anchor&&"free"!==l.anchor&&(l.anchor=vw(l.anchor)),l.overlaying&&(l.overlaying=vw(l.overlaying)),l.type||(l.isdate?l.type="date":l.islog?l.type="log":!1===l.isdate&&!1===l.islog&&(l.type="linear")),"withzero"!==l.autorange&&"tozero"!==l.autorange||(l.autorange=!0,l.rangemode="tozero"),delete l.islog,delete l.isdate,delete l.categories,ww(l,"domain")&&delete l.domain,void 0!==l.autotick&&(void 0===l.tickmode&&(l.tickmode=l.autotick?"auto":"linear"),delete l.autotick)}else if(a&&a.test(o)){var s=t[o],u=s.cameraposition;if(Array.isArray(u)&&4===u[0].length){var c=u[0],f=u[1],h=u[2],d=pw([],c),p=[];for(r=0;r<3;++r)p[r]=f[r]+h*d[2+4*r];s.camera={eye:{x:p[0],y:p[1],z:p[2]},center:{x:f[0],y:f[1],z:f[2]},up:{x:d[1],y:d[5],z:d[9]}},delete s.cameraposition}}}var g=Array.isArray(t.annotations)?t.annotations.length:0;for(e=0;e<g;e++){var v=t.annotations[e];oe.isPlainObject(v)&&(v.ref&&("paper"===v.ref?(v.xref="paper",v.yref="paper"):"data"===v.ref&&(v.xref="x",v.yref="y"),delete v.ref),yw(v,"xref"),yw(v,"yref"))}var m=Array.isArray(t.shapes)?t.shapes.length:0;for(e=0;e<m;e++){var y=t.shapes[e];oe.isPlainObject(y)&&(yw(y,"xref"),yw(y,"yref"))}var x=t.legend;return x&&(x.x>3?(x.x=1.02,x.xanchor="left"):x.x<-2&&(x.x=-.02,x.xanchor="right"),x.y>3?(x.y=1.02,x.yanchor="bottom"):x.y<-2&&(x.y=-.02,x.yanchor="top")),"rotate"===t.dragmode&&(t.dragmode="orbit"),$e.clean(t),t},gw.cleanData=function(t,e){for(var r=[],n=t.concat(Array.isArray(e)?e:[]).filter(function(t){return"uid"in t}).map(function(t){return t.uid}),a=0;a<t.length;a++){var i,o=t[a];if(!("uid"in o)||-1!==r.indexOf(o.uid)){var l;for(i=0;i<100&&(l=oe.randstr(n),-1!==r.indexOf(l));i++);o.uid=oe.randstr(n),n.push(o.uid)}if(r.push(o.uid),"histogramy"===o.type&&"xbins"in o&&!("ybins"in o)&&(o.ybins=o.xbins,delete o.xbins),o.error_y&&"opacity"in o.error_y){var s=$e.defaults,u=o.error_y.color||(I.traceIs(o,"bar")?$e.defaultLine:s[a%s.length]);o.error_y.color=$e.addOpacity($e.rgb(u),$e.opacity(u)*o.error_y.opacity),delete o.error_y.opacity}if("bardir"in o&&("h"!==o.bardir||!I.traceIs(o,"bar")&&"histogram"!==o.type.substr(0,9)||(o.orientation="h",gw.swapXYData(o)),delete o.bardir),"histogramy"===o.type&&gw.swapXYData(o),"histogramx"!==o.type&&"histogramy"!==o.type||(o.type="histogram"),"scl"in o&&(o.colorscale=o.scl,delete o.scl),"reversescl"in o&&(o.reversescale=o.reversescl,delete o.reversescl),o.xaxis&&(o.xaxis=vw(o.xaxis,"x")),o.yaxis&&(o.yaxis=vw(o.yaxis,"y")),I.traceIs(o,"gl3d")&&o.scene&&(o.scene=na.subplotsRegistry.gl3d.cleanId(o.scene)),!I.traceIs(o,"pie")&&!I.traceIs(o,"bar"))if(Array.isArray(o.textposition))for(i=0;i<o.textposition.length;i++)o.textposition[i]=_w(o.textposition[i]);else o.textposition&&(o.textposition=_w(o.textposition));if(I.traceIs(o,"2dMap")&&("YIGnBu"===o.colorscale&&(o.colorscale="YlGnBu"),"YIOrRd"===o.colorscale&&(o.colorscale="YlOrRd")),I.traceIs(o,"markerColorscale")&&o.marker){var c=o.marker;"YIGnBu"===c.colorscale&&(c.colorscale="YlGnBu"),"YIOrRd"===c.colorscale&&(c.colorscale="YlOrRd")}if("surface"===o.type&&oe.isPlainObject(o.contours)){var f=["x","y","z"];for(i=0;i<f.length;i++){var h=o.contours[f[i]];oe.isPlainObject(h)&&(h.highlightColor&&(h.highlightcolor=h.highlightColor,delete h.highlightColor),h.highlightWidth&&(h.highlightwidth=h.highlightWidth,delete h.highlightWidth))}}if("candlestick"===o.type||"ohlc"===o.type){var d=!1!==(o.increasing||{}).showlegend,p=!1!==(o.decreasing||{}).showlegend,g=xw(o.increasing),v=xw(o.decreasing);if(!1!==g&&!1!==v){var m=bw(g,v,d,p);m&&(o.name=m)}else!g&&!v||o.name||(o.name=g||v)}if(Array.isArray(o.transforms)){var y=o.transforms;for(i=0;i<y.length;i++){var x=y[i];if(oe.isPlainObject(x))switch(x.type){case"filter":x.filtersrc&&(x.target=x.filtersrc,delete x.filtersrc),x.calendar&&(x.valuecalendar||(x.valuecalendar=x.calendar),delete x.calendar);break;case"groupby":if(x.styles=x.styles||x.style,x.styles&&!Array.isArray(x.styles)){var b=x.styles,_=Object.keys(b);x.styles=[];for(var w=0;w<_.length;w++)x.styles.push({target:_[w],value:b[_[w]]})}}}}ww(o,"line")&&delete o.line,"marker"in o&&(ww(o.marker,"line")&&delete o.marker.line,ww(o,"marker")&&delete o.marker),$e.clean(o)}},gw.swapXYData=function(t){var e;if(oe.swapAttrs(t,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(t.z)&&Array.isArray(t.z[0])&&(t.transpose?delete t.transpose:t.transpose=!0),t.error_x&&t.error_y){var r=t.error_y,n="copy_ystyle"in r?r.copy_ystyle:!(r.color||r.thickness||r.width);oe.swapAttrs(t,["error_?.copy_ystyle"]),n&&oe.swapAttrs(t,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof t.hoverinfo){var a=t.hoverinfo.split("+");for(e=0;e<a.length;e++)"x"===a[e]?a[e]="y":"y"===a[e]&&(a[e]="x");t.hoverinfo=a.join("+")}},gw.coerceTraceIndices=function(t,e){return a(e)?[e]:Array.isArray(e)&&e.length?e:t.data.map(function(t,e){return e})},gw.manageArrayContainers=function(t,e,r){var n=t.obj,i=t.parts,o=i.length,l=i[o-1],s=a(l);if(s&&null===e){var u=i.slice(0,o-1).join(".");oe.nestedProperty(n,u).get().splice(l,1)}else s&&void 0===t.get()?(void 0===t.get()&&(r[t.astr]=null),t.set(e)):t.set(e)};var Aw=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function Mw(t){var e=t.search(Aw);if(e>0)return t.substr(0,e)}gw.hasParent=function(t,e){for(var r=Mw(e);r;){if(r in t)return!0;r=Mw(r)}return!1};var Tw=["x","y","z"];gw.clearAxisTypes=function(t,e,r){for(var n=0;n<e.length;n++)for(var a=t._fullData[n],i=0;i<3;i++){var o=mw(t,a,Tw[i]);if(o&&"log"!==o.type){var l=o._name,s=o._id.substr(1);if("scene"===s.substr(0,5)){if(void 0!==r[s])continue;l=s+"."+l}var u=l+".type";void 0===r[l]&&void 0===r[u]&&oe.nestedProperty(t.layout,u).set(null)}}},gw.clearAxisAutomargins=function(t){for(var e=Object.keys(t._fullLayout._pushmargin),r=0;r<e.length;r++)-1!==e[r].indexOf("automargin")&&delete t._fullLayout._pushmargin[e[r]]};var kw={},Ew=Zt.sorterAsc;kw.containerArrayMatch=Y;var Cw=kw.isAddVal=function(t){return"add"===t||x(t)},Sw=kw.isRemoveVal=function(t){return null===t||"remove"===t};kw.applyContainerArrayChanges=function(t,e,r,n){var a=e.astr,i=I.getComponentMethod(a,"supplyLayoutDefaults"),o=I.getComponentMethod(a,"draw"),l=I.getComponentMethod(a,"drawOne"),s=n.replot||n.recalc||i===E||o===E,u=t.layout,c=t._fullLayout;if(r[""]){Object.keys(r).length>1&&M.warn("Full array edits are incompatible with other edits",a);var f=r[""][""];if(Sw(f))e.set(null);else{if(!Array.isArray(f))return M.warn("Unrecognized full array edit value",a,f),!0;e.set(f)}return!s&&(i(u,c),o(t),!0)}var h,d,p,g,v,m,y,x=Object.keys(r).map(Number).sort(Ew),b=e.get(),_=b||[],w=Z(c,a).get(),A=[],T=-1,k=_.length;for(h=0;h<x.length;h++)if(g=r[p=x[h]],v=Object.keys(g),m=g[""],y=Cw(m),p<0||p>_.length-(y?0:1))M.warn("index out of range",a,p);else if(void 0!==m)v.length>1&&M.warn("Insertion & removal are incompatible with edits to the same index.",a,p),Sw(m)?A.push(p):y?("add"===m&&(m={}),_.splice(p,0,m),w&&w.splice(p,0,{})):M.warn("Unrecognized full object edit value",a,p,m),-1===T&&(T=p);else for(d=0;d<v.length;d++)Z(_[p],v[d]).set(g[v[d]]);for(h=A.length-1;h>=0;h--)_.splice(A[h],1),w&&w.splice(A[h],1);if(_.length?b||e.set(_):e.set(null),s)return!1;if(i(u,c),l!==E){var C;if(-1===T)C=x;else{for(k=Math.max(_.length,k),C=[],h=0;h<x.length&&!((p=x[h])>=T);h++)C.push(p);for(h=T;h<k;h++)C.push(h)}for(h=0;h<C.length;h++)l(t,C[h])}else o(t);return!0};var Lw={},Ow=oe._,Dw=Lw={};function Rw(t,e){var r,n,a=e.currentTarget,i=a.getAttribute("data-attr"),o=a.getAttribute("data-val")||!0,l=t._fullLayout,s={},u=De.list(t,null,!0),c="on";if("zoom"===i){var f,h="in"===o?.5:2,d=(1+h)/2,p=(1-h)/2;for(n=0;n<u.length;n++)if(!(r=u[n]).fixedrange)if(f=r._name,"auto"===o)s[f+".autorange"]=!0;else if("reset"===o){if(void 0===r._rangeInitial)s[f+".autorange"]=!0;else{var g=r._rangeInitial.slice();s[f+".range[0]"]=g[0],s[f+".range[1]"]=g[1]}void 0!==r._showSpikeInitial&&(s[f+".showspikes"]=r._showSpikeInitial,"on"!==c||r._showSpikeInitial||(c="off"))}else{var v=[r.r2l(r.range[0]),r.r2l(r.range[1])],m=[d*v[0]+p*v[1],d*v[1]+p*v[0]];s[f+".range[0]"]=r.l2r(m[0]),s[f+".range[1]"]=r.l2r(m[1])}l._cartesianSpikesEnabled=c}else{if("hovermode"!==i||"x"!==o&&"y"!==o){if("hovermode"===i&&"closest"===o){for(n=0;n<u.length;n++)r=u[n],"on"!==c||r.showspikes||(c="off");l._cartesianSpikesEnabled=c}}else o=l._isHoriz?"y":"x",a.setAttribute("data-val",o);s[i]=o}I.call("relayout",t,s)}function Pw(t,e){for(var r=e.currentTarget,n=r.getAttribute("data-attr"),a=r.getAttribute("data-val")||!0,i=t._fullLayout._subplots.gl3d,o={},l=n.split("."),s=0;s<i.length;s++)o[i[s]+"."+l[1]]=a;var u="pan"===a?a:"zoom";o.dragmode=u,I.call("relayout",t,o)}function Iw(t,e){for(var r=e.currentTarget.getAttribute("data-attr"),n=t._fullLayout,a=n._subplots.gl3d,i={},o=0;o<a.length;o++){var l=a[o],s=l+".camera",u=n[l]._scene;"resetDefault"===r?i[s]=null:"resetLastSave"===r&&(i[s]=oe.extendDeep({},u.cameraInitial))}I.call("relayout",t,i)}function Bw(t,e){var r=e.currentTarget,n=r._previousVal||!1,a=t.layout,i=t._fullLayout,o=i._subplots.gl3d,l=["xaxis","yaxis","zaxis"],s=["showspikes","spikesides","spikethickness","spikecolor"],u={},c={},f={};if(n)f=oe.extendDeep(a,n),r._previousVal=null;else{f={"allaxes.showspikes":!1};for(var h=0;h<o.length;h++){var d=o[h],p=i[d],g=u[d]={};g.hovermode=p.hovermode,f[d+".hovermode"]=!1;for(var v=0;v<3;v++){var m=l[v];c=g[m]={};for(var y=0;y<s.length;y++){var x=s[y];c[x]=p[m][x]}}}r._previousVal=oe.extendDeep({},u)}I.call("relayout",t,f)}function Fw(t,e){for(var r=e.currentTarget,n=r.getAttribute("data-attr"),a=r.getAttribute("data-val")||!0,i=t._fullLayout,o=i._subplots.geo,l=0;l<o.length;l++){var s=o[l],u=i[s];if("zoom"===n){var c=u.projection.scale,f="in"===a?2*c:.5*c;I.call("relayout",t,s+".projection.scale",f)}else"reset"===n&&Nw(t,"geo")}}function zw(t){var e,r=t._fullLayout;e=r._has("cartesian")?r._isHoriz?"y":"x":"closest";var n=!t._fullLayout.hovermode&&e;I.call("relayout",t,"hovermode",n)}function Nw(t,e){for(var r=t._fullLayout,n=r._subplots[e],a={},i=0;i<n.length;i++)for(var o=n[i],l=r[o]._subplot.viewInitial,s=Object.keys(l),u=0;u<s.length;u++){var c=s[u];a[o+"."+c]=l[c]}I.call("relayout",t,a)}function jw(t){this.container=t.container,this.element=document.createElement("div"),this.update(t.graphInfo,t.buttons),this.container.appendChild(this.element)}Dw.toImage={name:"toImage",title:function(t){return Ow(t,"Download plot as a png")},icon:vx.camera,click:function(t){var e="png";oe.notifier(Ow(t,"Taking snapshot - this may take a few seconds"),"long"),oe.isIE()&&(oe.notifier(Ow(t,"IE only supports svg.  Changing format to svg."),"long"),e="svg"),I.call("downloadImage",t,{format:e}).then(function(e){oe.notifier(Ow(t,"Snapshot succeeded")+" - "+e,"long")}).catch(function(){oe.notifier(Ow(t,"Sorry, there was a problem downloading your snapshot!"),"long")})}},Dw.sendDataToCloud={name:"sendDataToCloud",title:function(t){return Ow(t,"Edit in Chart Studio")},icon:vx.disk,click:function(t){na.sendDataToCloud(t)}},Dw.zoom2d={name:"zoom2d",title:function(t){return Ow(t,"Zoom")},attr:"dragmode",val:"zoom",icon:vx.zoombox,click:Rw},Dw.pan2d={name:"pan2d",title:function(t){return Ow(t,"Pan")},attr:"dragmode",val:"pan",icon:vx.pan,click:Rw},Dw.select2d={name:"select2d",title:function(t){return Ow(t,"Box Select")},attr:"dragmode",val:"select",icon:vx.selectbox,click:Rw},Dw.lasso2d={name:"lasso2d",title:function(t){return Ow(t,"Lasso Select")},attr:"dragmode",val:"lasso",icon:vx.lasso,click:Rw},Dw.zoomIn2d={name:"zoomIn2d",title:function(t){return Ow(t,"Zoom in")},attr:"zoom",val:"in",icon:vx.zoom_plus,click:Rw},Dw.zoomOut2d={name:"zoomOut2d",title:function(t){return Ow(t,"Zoom out")},attr:"zoom",val:"out",icon:vx.zoom_minus,click:Rw},Dw.autoScale2d={name:"autoScale2d",title:function(t){return Ow(t,"Autoscale")},attr:"zoom",val:"auto",icon:vx.autoscale,click:Rw},Dw.resetScale2d={name:"resetScale2d",title:function(t){return Ow(t,"Reset axes")},attr:"zoom",val:"reset",icon:vx.home,click:Rw},Dw.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(t){return Ow(t,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:vx.tooltip_basic,gravity:"ne",click:Rw},Dw.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(t){return Ow(t,"Compare data on hover")},attr:"hovermode",val:function(t){return t._fullLayout._isHoriz?"y":"x"},icon:vx.tooltip_compare,gravity:"ne",click:Rw},Dw.zoom3d={name:"zoom3d",title:function(t){return Ow(t,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:vx.zoombox,click:Pw},Dw.pan3d={name:"pan3d",title:function(t){return Ow(t,"Pan")},attr:"scene.dragmode",val:"pan",icon:vx.pan,click:Pw},Dw.orbitRotation={name:"orbitRotation",title:function(t){return Ow(t,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:vx["3d_rotate"],click:Pw},Dw.tableRotation={name:"tableRotation",title:function(t){return Ow(t,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:vx["z-axis"],click:Pw},Dw.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(t){return Ow(t,"Reset camera to default")},attr:"resetDefault",icon:vx.home,click:Iw},Dw.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(t){return Ow(t,"Reset camera to last save")},attr:"resetLastSave",icon:vx.movie,click:Iw},Dw.hoverClosest3d={name:"hoverClosest3d",title:function(t){return Ow(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:vx.tooltip_basic,gravity:"ne",click:Bw},Dw.zoomInGeo={name:"zoomInGeo",title:function(t){return Ow(t,"Zoom in")},attr:"zoom",val:"in",icon:vx.zoom_plus,click:Fw},Dw.zoomOutGeo={name:"zoomOutGeo",title:function(t){return Ow(t,"Zoom out")},attr:"zoom",val:"out",icon:vx.zoom_minus,click:Fw},Dw.resetGeo={name:"resetGeo",title:function(t){return Ow(t,"Reset")},attr:"reset",val:null,icon:vx.autoscale,click:Fw},Dw.hoverClosestGeo={name:"hoverClosestGeo",title:function(t){return Ow(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:vx.tooltip_basic,gravity:"ne",click:zw},Dw.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(t){return Ow(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:vx.tooltip_basic,gravity:"ne",click:zw},Dw.hoverClosestPie={name:"hoverClosestPie",title:function(t){return Ow(t,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:vx.tooltip_basic,gravity:"ne",click:zw},Dw.toggleHover={name:"toggleHover",title:function(t){return Ow(t,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:vx.tooltip_basic,gravity:"ne",click:function(t,e){zw(t),Bw(t,e)}},Dw.resetViews={name:"resetViews",title:function(t){return Ow(t,"Reset views")},icon:vx.home,click:function(t,e){var r=e.currentTarget;r.setAttribute("data-attr","zoom"),r.setAttribute("data-val","reset"),Rw(t,e),r.setAttribute("data-attr","resetLastSave"),Iw(t,e),Nw(t,"geo"),Nw(t,"mapbox")}},Dw.toggleSpikelines={name:"toggleSpikelines",title:function(t){return Ow(t,"Toggle Spike Lines")},icon:vx.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(t){var e=t._fullLayout;e._cartesianSpikesEnabled="on"===e._cartesianSpikesEnabled?"off":"on";var r=function(t){for(var e,r,n=t._fullLayout,a=De.list(t,null,!0),i={},o=0;o<a.length;o++)e=a[o],r=e._name,i[r+".showspikes"]="on"===n._cartesianSpikesEnabled||e._showSpikeInitial;return i}(t);I.call("relayout",t,r)}},Dw.resetViewMapbox={name:"resetViewMapbox",title:function(t){return Ow(t,"Reset view")},attr:"reset",icon:vx.home,click:function(t){Nw(t,"mapbox")}};var Uw=jw.prototype;Uw.update=function(t,e){this.graphInfo=t;var r=this.graphInfo._context;"hover"===r.displayModeBar?this.element.className="modebar modebar--hover":this.element.className="modebar";var n=!this.hasButtons(e),a=this.hasLogo!==r.displaylogo;(n||a)&&(this.removeAllButtons(),this.updateButtons(e),r.displaylogo&&(this.element.appendChild(this.getLogo()),this.hasLogo=!0)),this.updateActiveButton()},Uw.updateButtons=function(t){var e=this;this.buttons=t,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(t){var r=e.createGroup();t.forEach(function(t){var n=t.name;if(!n)throw new Error("must provide button 'name' in button config");if(-1!==e.buttonsNames.indexOf(n))throw new Error("button name '"+n+"' is taken");e.buttonsNames.push(n);var a=e.createButton(t);e.buttonElements.push(a),r.appendChild(a)}),e.element.appendChild(r)})},Uw.createGroup=function(){var t=document.createElement("div");return t.className="modebar-group",t},Uw.createButton=function(t){var e=this,r=document.createElement("a");r.setAttribute("rel","tooltip"),r.className="modebar-btn";var a=t.title;void 0===a?a=t.name:"function"==typeof a&&(a=a(this.graphInfo)),(a||0===a)&&r.setAttribute("data-title",a),void 0!==t.attr&&r.setAttribute("data-attr",t.attr);var i=t.val;if(void 0!==i&&("function"==typeof i&&(i=i(this.graphInfo)),r.setAttribute("data-val",i)),"function"!=typeof t.click)throw new Error("must provide button 'click' function in button config");return r.addEventListener("click",function(r){t.click(e.graphInfo,r),e.updateActiveButton(r.currentTarget)}),r.setAttribute("data-toggle",t.toggle||!1),t.toggle&&n.select(r).classed("active",!0),r.appendChild(this.createIcon(t.icon||vx.question,t.name)),r.setAttribute("data-gravity",t.gravity||"n"),r},Uw.createIcon=function(t,e){var r=t.ascent-t.descent,n="http://www.w3.org/2000/svg",a=document.createElementNS(n,"svg"),i=document.createElementNS(n,"path");a.setAttribute("height","1em"),a.setAttribute("width",t.width/r+"em"),a.setAttribute("viewBox",[0,0,t.width,r].join(" "));var o="toggleSpikelines"===e?"matrix(1.5 0 0 -1.5 0 "+t.ascent+")":"matrix(1 0 0 -1 0 "+t.ascent+")";return i.setAttribute("d",t.path),i.setAttribute("transform",o),a.appendChild(i),a},Uw.updateActiveButton=function(t){var e=this.graphInfo._fullLayout,r=void 0!==t?t.getAttribute("data-attr"):null;this.buttonElements.forEach(function(t){var a=t.getAttribute("data-val")||!0,i=t.getAttribute("data-attr"),o="true"===t.getAttribute("data-toggle"),l=n.select(t);if(o)i===r&&l.classed("active",!l.classed("active"));else{var s=null===i?i:oe.nestedProperty(e,i).get();l.classed("active",s===a)}})},Uw.hasButtons=function(t){var e=this.buttons;if(!e)return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r){if(t[r].length!==e[r].length)return!1;for(var n=0;n<t[r].length;n++)if(t[r][n].name!==e[r][n].name)return!1}return!0},Uw.getLogo=function(){var t=this.createGroup(),e=document.createElement("a");return e.href="https://plot.ly/",e.target="_blank",e.setAttribute("data-title",oe._(this.graphInfo,"Produced with Plotly")),e.className="modebar-btn plotlyjsicon modebar-btn--logo",e.appendChild(this.createIcon(vx.plotlylogo)),t.appendChild(e),t},Uw.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},Uw.destroy=function(){oe.removeElement(this.container.querySelector(".modebar"))};var Vw=function(t,e){var r=t._fullLayout,a=new jw({graphInfo:t,container:r._paperdiv.node(),buttons:e});return r._privateplot&&n.select(a.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),a};var Hw={};Hw.manage=function(t){var e=t._fullLayout,r=t._context,n=e._modeBar;if(r.displayModeBar){if(!Array.isArray(r.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(r.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var a,i=r.modeBarButtons;a=Array.isArray(i)&&i.length?function(t){for(var e=0;e<t.length;e++)for(var r=t[e],n=0;n<r.length;n++){var a=r[n];if("string"==typeof a){if(void 0===Lw[a])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));t[e][n]=Lw[a]}}return t}(i):function(t,e,r){var n=t._fullLayout,a=t._fullData,i=n._has("cartesian"),o=n._has("gl3d"),l=n._has("geo"),s=n._has("pie"),u=n._has("gl2d"),c=n._has("ternary"),f=n._has("mapbox"),h=n._has("polar"),d=function(t){for(var e=De.list({_fullLayout:t},null,!0),r=0;r<e.length;r++)if(!e[r].fixedrange)return!1;return!0}(n),p=[];function g(t){if(t.length){for(var r=[],n=0;n<t.length;n++){var a=t[n];-1===e.indexOf(a)&&r.push(Lw[a])}p.push(r)}}g(["toImage","sendDataToCloud"]);var v=[],m=[],y=[],x=[];return(i||u||s||c)+l+o+f+h>1?(m=["toggleHover"],y=["resetViews"]):l?(v=["zoomInGeo","zoomOutGeo"],m=["hoverClosestGeo"],y=["resetGeo"]):o?(m=["hoverClosest3d"],y=["resetCameraDefault3d","resetCameraLastSave3d"]):f?(m=["toggleHover"],y=["resetViewMapbox"]):m=u?["hoverClosestGl2d"]:s?["hoverClosestPie"]:["toggleHover"],i&&(m=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),!i&&!u||d||(v=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==y[0]&&(y=["resetScale2d"])),o?x=["zoom3d","pan3d","orbitRotation","tableRotation"]:(i||u)&&!d||c?x=["zoom2d","pan2d"]:f||l?x=["pan2d"]:h&&(x=["zoom2d"]),function(t){for(var e=!1,r=0;r<t.length&&!e;r++){var n=t[r];n._module&&n._module.selectPoints&&(I.traceIs(n,"scatter-like")?(Zr.hasMarkers(n)||Zr.hasText(n))&&(e=!0):I.traceIs(n,"box-violin")&&"all"!==n.boxpoints&&"all"!==n.points||(e=!0))}return e}(a)&&x.push("select2d","lasso2d"),g(x),g(v.concat(y)),g(m),function(t,e){if(e.length)if(Array.isArray(e[0]))for(var r=0;r<e.length;r++)t.push(e[r]);else t.push(e);return t}(p,r)}(t,r.modeBarButtonsToRemove,r.modeBarButtonsToAdd),n?n.update(t,a):e._modeBar=Vw(t,a)}else n&&(n.destroy(),delete e._modeBar)};var qw={},Gw=Gv.enforce,Xw=Gv.clean,Yw=wa;function Ww(t,e){return(t.ticks||t.showline)&&(e===t._mainSubplot||"all"===t.mirror||"allticks"===t.mirror)}function Zw(t,e,r){if(!r.showline||!r._lw)return!1;if("all"===r.mirror||"allticks"===r.mirror)return!0;var n=r._anchorAxis;if(!n)return!1;var a=wr.FROM_BL[e];return r.side===e?n.domain[a]===t.domain[a]:r.mirror&&n.domain[1-a]===t.domain[1-a]}function Jw(t,e,r,n){if(Zw(t,e,r))return r._lw;for(var a=0;a<n.length;a++){var i=n[a];if(i._mainAxis===r._mainAxis&&Zw(t,e,i))return i._lw}return 0}qw.layoutStyles=function(t){return oe.syncOrAsync([na.doAutoMargin,qw.lsInner],t)},qw.lsInner=function(t){var e,r=t._fullLayout,a=r._size,i=a.p,o=Na.list(t),l=r._has("cartesian");function s(t,e,r){var n=t._lw/2;return"x"===t._id.charAt(0)?e?"top"===r?e._offset-i-n:e._offset+e._length+i+n:a.t+a.h*(1-(t.position||0))+n%1:e?"right"===r?e._offset+e._length+i+n:e._offset-i-n:a.l+a.w*(t.position||0)+n%1}for(e=0;e<o.length;e++){var u=o[e];u.setScale();var c=u._anchorAxis;u._linepositions={},u._lw=Jr.crispRound(t,u.linewidth,1),u._mainLinePosition=s(u,c,u.side),u._mainMirrorPosition=u.mirror&&c?s(u,c,wr.OPPOSITE_SIDE[u.side]):null}r._paperdiv.style({width:r.width+"px",height:r.height+"px"}).selectAll(".main-svg").call(Jr.setSize,r.width,r.height),t._context.setBackground(t,r.paper_bgcolor);var f=r._paper.selectAll("g.subplot"),h=[],d=[];f.each(function(t){var e=r._plots[t];if(e.mainplot)return e.bg&&e.bg.remove(),void(e.bg=void 0);var n=e.xaxis.domain,a=e.yaxis.domain,i=e.plotgroup;if(function(t,e,r){for(var n=0;n<r.length;n++){var a=r[n][0],i=r[n][1];if(!(a[0]>=t[1]||a[1]<=t[0])&&i[0]<e[1]&&i[1]>e[0])return!0}return!1}(n,a,d)){var o=i.node(),l=e.bg=oe.ensureSingle(i,"rect","bg");o.insertBefore(l.node(),o.childNodes[0])}else i.select("rect.bg").remove(),h.push(t),d.push([n,a])});var p=r._bgLayer.selectAll(".bg").data(h);return p.enter().append("rect").classed("bg",!0),p.exit().remove(),p.each(function(t){r._plots[t].bg=n.select(this)}),f.each(function(t){var n=r._plots[t],a=n.xaxis,u=n.yaxis;n.bg&&l&&n.bg.call(Jr.setRect,a._offset-i,u._offset-i,a._length+2*i,u._length+2*i).call($e.fill,r.plot_bgcolor).style("stroke-width",0);var c,f,h=n.clipId="clip"+r._uid+t+"plot",d=oe.ensureSingleById(r._clips,"clipPath",h,function(t){t.classed("plotclip",!0).append("rect")});for(n.clipRect=d.select("rect").attr({width:a._length,height:u._length}),Jr.setTranslate(n.plot,a._offset,u._offset),n._hasClipOnAxisFalse?(c=null,f=h):(c=h,f=null),Jr.setClipUrl(n.plot,c),e=0;e<Oe.traceLayerClasses.length;e++){var p=Oe.traceLayerClasses[e];"scatterlayer"!==p&&"barlayer"!==p&&n.plot.selectAll("g."+p).call(Jr.setClipUrl,f)}if(n.layerClipId=f,l){var g,v,m,y,x,b,_,w,A,M,T,k,E,C="M0,0";Ww(a,t)&&(x=Jw(a,"left",u,o),g=a._offset-(x?i+x:0),b=Jw(a,"right",u,o),v=a._offset+a._length+(b?i+b:0),m=s(a,u,"bottom"),y=s(a,u,"top"),(E=!a._anchorAxis||t!==a._mainSubplot)&&a.ticks&&"allticks"===a.mirror&&(a._linepositions[t]=[m,y]),C=D(a,L,function(t){return"M"+a._offset+","+t+"h"+a._length}),E&&a.showline&&("all"===a.mirror||"allticks"===a.mirror)&&(C+=L(m)+L(y)),n.xlines.style("stroke-width",a._lw+"px").call($e.stroke,a.showline?a.linecolor:"rgba(0,0,0,0)")),n.xlines.attr("d",C);var S="M0,0";Ww(u,t)&&(T=Jw(u,"bottom",a,o),_=u._offset+u._length+(T?i:0),k=Jw(u,"top",a,o),w=u._offset-(k?i:0),A=s(u,a,"left"),M=s(u,a,"right"),(E=!u._anchorAxis||t!==a._mainSubplot)&&u.ticks&&"allticks"===u.mirror&&(u._linepositions[t]=[A,M]),S=D(u,O,function(t){return"M"+t+","+u._offset+"v"+u._length}),E&&u.showline&&("all"===u.mirror||"allticks"===u.mirror)&&(S+=O(A)+O(M)),n.ylines.style("stroke-width",u._lw+"px").call($e.stroke,u.showline?u.linecolor:"rgba(0,0,0,0)")),n.ylines.attr("d",S)}function L(t){return"M"+g+","+t+"H"+v}function O(t){return"M"+t+","+w+"V"+_}function D(e,r,n){if(!e.showline||t!==e._mainSubplot)return"";if(!e._anchorAxis)return n(e._mainLinePosition);var a=r(e._mainLinePosition);return e.mirror&&(a+=r(e._mainMirrorPosition)),a}}),Na.makeClipPaths(t),qw.drawMainTitle(t),Hw.manage(t),t._promises.length&&Promise.all(t._promises)},qw.drawMainTitle=function(t){var e=t._fullLayout;ma.draw(t,"gtitle",{propContainer:e,propName:"title",placeholder:e._dfltTitle.plot,attributes:{x:e.width/2,y:e._size.t/2,"text-anchor":"middle"}})},qw.doTraceStyle=function(t){for(var e=0;e<t.calcdata.length;e++){var r=t.calcdata[e],n=(((r[0]||{}).trace||{})._module||{}).arraysToCalcdata;n&&n(r,r[0].trace)}return na.style(t),I.getComponentMethod("legend","draw")(t),na.previousPromises(t)},qw.doColorBars=function(t){for(var e=0;e<t.calcdata.length;e++){var r=t.calcdata[e][0];if((r.t||{}).cb){var n=r.trace,a=r.t.cb;I.traceIs(n,"contour")&&a.line({width:!1!==n.contours.showlines?n.line.width:0,dash:n.line.dash,color:"line"===n.contours.coloring?a._opts.line.color:n.line.color}),I.traceIs(n,"markerColorscale")?a.options(n.marker.colorbar)():a.options(n.colorbar)()}}return na.previousPromises(t)},qw.layoutReplot=function(t){var e=t.layout;return t.layout=void 0,I.call("plot",t,"",e)},qw.doLegend=function(t){return I.getComponentMethod("legend","draw")(t),na.previousPromises(t)},qw.doTicksRelayout=function(t){return Na.doTicks(t,"redraw"),t._fullLayout._hasOnlyLargeSploms&&(Ri(t),I.subplotsRegistry.splom.plot(t)),qw.drawMainTitle(t),na.previousPromises(t)},qw.doModeBar=function(t){var e=t._fullLayout;Hw.manage(t);for(var r=0;r<e._basePlotModules.length;r++){var n=e._basePlotModules[r].updateFx;n&&n(e)}return na.previousPromises(t)},qw.doCamera=function(t){for(var e=t._fullLayout,r=e._subplots.gl3d,n=0;n<r.length;n++){var a=e[r[n]];a._scene.setCamera(a.camera)}},qw.drawData=function(t){var e,r=t._fullLayout,n=t.calcdata,a=r._infolayer.selectAll("g.rangeslider-container");for(e=0;e<n.length;e++){var i=n[e][0].trace,o=!0===i.visible,l=i.uid;if(!o||!I.traceIs(i,"2dMap")){var s=".hm"+l+",.contour"+l+",#clip"+l;r._paper.selectAll(s).remove(),a.selectAll(s).remove()}o&&i._module.colorbar||r._infolayer.selectAll(".cb"+l).remove()}Ri(t);var u=r._basePlotModules;for(e=0;e<u.length;e++)u[e].plot(t);return na.style(t),I.getComponentMethod("shapes","draw")(t),I.getComponentMethod("annotations","draw")(t),r._replotting=!1,na.previousPromises(t)},qw.doAutoRangeAndConstraints=function(t){for(var e=Na.list(t,"",!0),r=0;r<e.length;r++){var n=e[r];Xw(t,n),Yw(n)}Gw(t)},qw.finalDraw=function(t){I.getComponentMethod("shapes","draw")(t),I.getComponentMethod("images","draw")(t),I.getComponentMethod("annotations","draw")(t),I.getComponentMethod("legend","draw")(t),I.getComponentMethod("rangeslider","draw")(t),I.getComponentMethod("rangeselector","draw")(t),I.getComponentMethod("sliders","draw")(t),I.getComponentMethod("updatemenus","draw")(t)};var Qw={},$w=oe.extendDeepAll,Kw=wr.MID_SHIFT,tA=Qw={version:"0.2.2"};tA.Axis=function(){var t,e,r,a,i={data:[],layout:{}},o={},l={},s=n.dispatch("hover"),u={};return u.render=function(o){return function(o){e=o||e;var s=i.data,u=i.layout;("string"==typeof e||e.nodeName)&&(e=n.select(e)),e.datum(s).each(function(e,i){var o=e.slice();l={data:tA.util.cloneJson(o),layout:tA.util.cloneJson(u)};var s=0;o.forEach(function(t,e){t.color||(t.color=u.defaultColorRange[s],s=(s+1)%u.defaultColorRange.length),t.strokeColor||(t.strokeColor="LinePlot"===t.geometry?t.color:n.rgb(t.color).darker().toString()),l.data[e].color=t.color,l.data[e].strokeColor=t.strokeColor,l.data[e].strokeDash=t.strokeDash,l.data[e].strokeSize=t.strokeSize});var c=o.filter(function(t,e){var r=t.visible;return void 0===r||!0===r}),f=!1,h=c.map(function(t,e){return f=f||void 0!==t.groupId,t});if(f){var d=[],p=n.nest().key(function(t,e){return void 0!==t.groupId?t.groupId:"unstacked"}).entries(h).map(function(t,e){if("unstacked"===t.key)return t.values;var r=t.values[0].r.map(function(t,e){return 0});return t.values.forEach(function(t,e,n){t.yStack=[r],d.push(r),r=tA.util.sumArrays(t.r,r)}),t.values});c=n.merge(p)}c.forEach(function(t,e){t.t=Array.isArray(t.t[0])?t.t:[t.t],t.r=Array.isArray(t.r[0])?t.r:[t.r]});var g=Math.min(u.width-u.margin.left-u.margin.right,u.height-u.margin.top-u.margin.bottom)/2;g=Math.max(10,g);var v,m=[u.margin.left+g,u.margin.top+g];v=f?[0,n.max(tA.util.sumArrays(tA.util.arrayLast(c).r[0],tA.util.arrayLast(d)))]:n.extent(tA.util.flattenArray(c.map(function(t,e){return t.r}))),u.radialAxis.domain!=tA.DATAEXTENT&&(v[0]=0),r=n.scale.linear().domain(u.radialAxis.domain!=tA.DATAEXTENT&&u.radialAxis.domain?u.radialAxis.domain:v).range([0,g]),l.layout.radialAxis.domain=r.domain();var y,x=tA.util.flattenArray(c.map(function(t,e){return t.t})),b="string"==typeof x[0];b&&(x=tA.util.deduplicate(x),y=x.slice(),x=n.range(x.length),c=c.map(function(t,e){var r=t;return t.t=[x],f&&(r.yStack=t.yStack),r}));var _=c.filter(function(t,e){return"LinePlot"===t.geometry||"DotPlot"===t.geometry}).length===c.length,w=null===u.needsEndSpacing?b||!_:u.needsEndSpacing,A=u.angularAxis.domain&&u.angularAxis.domain!=tA.DATAEXTENT&&!b&&u.angularAxis.domain[0]>=0?u.angularAxis.domain:n.extent(x),M=Math.abs(x[1]-x[0]);_&&!b&&(M=0);var T=A.slice();w&&b&&(T[1]+=M);var k=u.angularAxis.ticksCount||4;k>8&&(k=k/(k/8)+k%8),u.angularAxis.ticksStep&&(k=(T[1]-T[0])/k);var E=u.angularAxis.ticksStep||(T[1]-T[0])/(k*(u.minorTicks+1));y&&(E=Math.max(Math.round(E),1)),T[2]||(T[2]=E);var C=n.range.apply(this,T);if(C=C.map(function(t,e){return parseFloat(t.toPrecision(12))}),a=n.scale.linear().domain(T.slice(0,2)).range("clockwise"===u.direction?[0,360]:[360,0]),l.layout.angularAxis.domain=a.domain(),l.layout.angularAxis.endPadding=w?M:0,void 0===(t=n.select(this).select("svg.chart-root"))||t.empty()){var S=(new DOMParser).parseFromString("<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>","application/xml"),L=this.appendChild(this.ownerDocument.importNode(S.documentElement,!0));t=n.select(L)}t.select(".guides-group").style({"pointer-events":"none"}),t.select(".angular.axis-group").style({"pointer-events":"none"}),t.select(".radial.axis-group").style({"pointer-events":"none"});var O,D=t.select(".chart-group"),R={fill:"none",stroke:u.tickColor},P={"font-size":u.font.size,"font-family":u.font.family,fill:u.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(t,e){return" "+t+" 0 "+u.font.outlineColor}).join(",")};if(u.showLegend){O=t.select(".legend-group").attr({transform:"translate("+[g,u.margin.top]+")"}).style({display:"block"});var I=c.map(function(t,e){var r=tA.util.cloneJson(t);return r.symbol="DotPlot"===t.geometry?t.dotType||"circle":"LinePlot"!=t.geometry?"square":"line",r.visibleInLegend=void 0===t.visibleInLegend||t.visibleInLegend,r.color="LinePlot"===t.geometry?t.strokeColor:t.color,r});tA.Legend().config({data:c.map(function(t,e){return t.name||"Element"+e}),legendConfig:$w({},tA.Legend.defaultConfig().legendConfig,{container:O,elements:I,reverseOrder:u.legend.reverseOrder})})();var B=O.node().getBBox();g=Math.min(u.width-B.width-u.margin.left-u.margin.right,u.height-u.margin.top-u.margin.bottom)/2,g=Math.max(10,g),m=[u.margin.left+g,u.margin.top+g],r.range([0,g]),l.layout.radialAxis.domain=r.domain(),O.attr("transform","translate("+[m[0]+g,m[1]-g]+")")}else O=t.select(".legend-group").style({display:"none"});t.attr({width:u.width,height:u.height}).style({opacity:u.opacity}),D.attr("transform","translate("+m+")").style({cursor:"crosshair"});var F=[(u.width-(u.margin.left+u.margin.right+2*g+(B?B.width:0)))/2,(u.height-(u.margin.top+u.margin.bottom+2*g))/2];if(F[0]=Math.max(0,F[0]),F[1]=Math.max(0,F[1]),t.select(".outer-group").attr("transform","translate("+F+")"),u.title){var z=t.select("g.title-group text").style(P).text(u.title),N=z.node().getBBox();z.attr({x:m[0]-N.width/2,y:m[1]-g-20})}var j=t.select(".radial.axis-group");if(u.radialAxis.gridLinesVisible){var U=j.selectAll("circle.grid-circle").data(r.ticks(5));U.enter().append("circle").attr({class:"grid-circle"}).style(R),U.attr("r",r),U.exit().remove()}j.select("circle.outside-circle").attr({r:g}).style(R);var V=t.select("circle.background-circle").attr({r:g}).style({fill:u.backgroundColor,stroke:u.stroke});function H(t,e){return a(t)%360+u.orientation}if(u.radialAxis.visible){var q=n.svg.axis().scale(r).ticks(5).tickSize(5);j.call(q).attr({transform:"rotate("+u.radialAxis.orientation+")"}),j.selectAll(".domain").style(R),j.selectAll("g>text").text(function(t,e){return this.textContent+u.radialAxis.ticksSuffix}).style(P).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(t,e){return"horizontal"===u.radialAxis.tickOrientation?"rotate("+-u.radialAxis.orientation+") translate("+[0,P["font-size"]]+")":"translate("+[0,P["font-size"]]+")"}}),j.selectAll("g>line").style({stroke:"black"})}var G=t.select(".angular.axis-group").selectAll("g.angular-tick").data(C),X=G.enter().append("g").classed("angular-tick",!0);G.attr({transform:function(t,e){return"rotate("+H(t)+")"}}).style({display:u.angularAxis.visible?"block":"none"}),G.exit().remove(),X.append("line").classed("grid-line",!0).classed("major",function(t,e){return e%(u.minorTicks+1)==0}).classed("minor",function(t,e){return!(e%(u.minorTicks+1)==0)}).style(R),X.selectAll(".minor").style({stroke:u.minorTickColor}),G.select("line.grid-line").attr({x1:u.tickLength?g-u.tickLength:0,x2:g}).style({display:u.angularAxis.gridLinesVisible?"block":"none"}),X.append("text").classed("axis-text",!0).style(P);var Y=G.select("text.axis-text").attr({x:g+u.labelOffset,dy:Kw+"em",transform:function(t,e){var r=H(t),n=g+u.labelOffset,a=u.angularAxis.tickOrientation;return"horizontal"==a?"rotate("+-r+" "+n+" 0)":"radial"==a?r<270&&r>90?"rotate(180 "+n+" 0)":null:"rotate("+(r<=180&&r>0?-90:90)+" "+n+" 0)"}}).style({"text-anchor":"middle",display:u.angularAxis.labelsVisible?"block":"none"}).text(function(t,e){return e%(u.minorTicks+1)!=0?"":y?y[t]+u.angularAxis.ticksSuffix:t+u.angularAxis.ticksSuffix}).style(P);u.angularAxis.rewriteTicks&&Y.text(function(t,e){return e%(u.minorTicks+1)!=0?"":u.angularAxis.rewriteTicks(this.textContent,e)});var W=n.max(D.selectAll(".angular-tick text")[0].map(function(t,e){return t.getCTM().e+t.getBBox().width}));O.attr({transform:"translate("+[g+W,u.margin.top]+")"});var Z=t.select("g.geometry-group").selectAll("g").size()>0,J=t.select("g.geometry-group").selectAll("g.geometry").data(c);if(J.enter().append("g").attr({class:function(t,e){return"geometry geometry"+e}}),J.exit().remove(),c[0]||Z){var Q=[];c.forEach(function(t,e){var n={};n.radialScale=r,n.angularScale=a,n.container=J.filter(function(t,r){return r==e}),n.geometry=t.geometry,n.orientation=u.orientation,n.direction=u.direction,n.index=e,Q.push({data:t,geometryConfig:n})});var $=[];n.nest().key(function(t,e){return void 0!==t.data.groupId||"unstacked"}).entries(Q).forEach(function(t,e){"unstacked"===t.key?$=$.concat(t.values.map(function(t,e){return[t]})):$.push(t.values)}),$.forEach(function(t,e){var r;r=Array.isArray(t)?t[0].geometryConfig.geometry:t.geometryConfig.geometry;var n=t.map(function(t,e){return $w(tA[r].defaultConfig(),t)});tA[r]().config(n)()})}var K,tt,et=t.select(".guides-group"),rt=t.select(".tooltips-group"),nt=tA.tooltipPanel().config({container:rt,fontSize:8})(),at=tA.tooltipPanel().config({container:rt,fontSize:8})(),it=tA.tooltipPanel().config({container:rt,hasTick:!0})();if(!b){var ot=et.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});D.on("mousemove.angular-guide",function(t,e){var r=tA.util.getMousePos(V).angle;ot.attr({x2:-g,transform:"rotate("+r+")"}).style({opacity:.5});var n=(r+180+360-u.orientation)%360;K=a.invert(n);var i=tA.util.convertToCartesian(g+12,r+180);nt.text(tA.util.round(K)).move([i[0]+m[0],i[1]+m[1]])}).on("mouseout.angular-guide",function(t,e){et.select("line").style({opacity:0})})}var lt=et.select("circle").style({stroke:"grey",fill:"none"});D.on("mousemove.radial-guide",function(t,e){var n=tA.util.getMousePos(V).radius;lt.attr({r:n}).style({opacity:.5}),tt=r.invert(tA.util.getMousePos(V).radius);var a=tA.util.convertToCartesian(n,u.radialAxis.orientation);at.text(tA.util.round(tt)).move([a[0]+m[0],a[1]+m[1]])}).on("mouseout.radial-guide",function(t,e){lt.style({opacity:0}),it.hide(),nt.hide(),at.hide()}),t.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(e,r){var a=n.select(this),i=this.style.fill,o="black",l=this.style.opacity||1;if(a.attr({"data-opacity":l}),i&&"none"!==i){a.attr({"data-fill":i}),o=n.hsl(i).darker().toString(),a.style({fill:o,opacity:1});var s={t:tA.util.round(e[0]),r:tA.util.round(e[1])};b&&(s.t=y[e[0]]);var u="t: "+s.t+", r: "+s.r,c=this.getBoundingClientRect(),f=t.node().getBoundingClientRect(),h=[c.left+c.width/2-F[0]-f.left,c.top+c.height/2-F[1]-f.top];it.config({color:o}).text(u),it.move(h)}else i=this.style.stroke||"black",a.attr({"data-stroke":i}),o=n.hsl(i).darker().toString(),a.style({stroke:o,opacity:1})}).on("mousemove.tooltip",function(t,e){if(0!=n.event.which)return!1;n.select(this).attr("data-fill")&&it.show()}).on("mouseout.tooltip",function(t,e){it.hide();var r=n.select(this),a=r.attr("data-fill");a?r.style({fill:a,opacity:r.attr("data-opacity")}):r.style({stroke:r.attr("data-stroke"),opacity:r.attr("data-opacity")})})})}(o),this},u.config=function(t){if(!arguments.length)return i;var e=tA.util.cloneJson(t);return e.data.forEach(function(t,e){i.data[e]||(i.data[e]={}),$w(i.data[e],tA.Axis.defaultConfig().data[0]),$w(i.data[e],t)}),$w(i.layout,tA.Axis.defaultConfig().layout),$w(i.layout,e.layout),this},u.getLiveConfig=function(){return l},u.getinputConfig=function(){return o},u.radialScale=function(t){return r},u.angularScale=function(t){return a},u.svg=function(){return t},n.rebind(u,s,"on"),u},tA.Axis.defaultConfig=function(t,e){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:n.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}},tA.util={},tA.DATAEXTENT="dataExtent",tA.AREA="AreaChart",tA.LINE="LinePlot",tA.DOT="DotPlot",tA.BAR="BarChart",tA.util._override=function(t,e){for(var r in t)r in e&&(e[r]=t[r])},tA.util._extend=function(t,e){for(var r in t)e[r]=t[r]},tA.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},tA.util.dataFromEquation2=function(t,e){var r=e||6;return n.range(0,360+r,r).map(function(e,r){var n=e*Math.PI/180;return[e,t(n)]})},tA.util.dataFromEquation=function(t,e,r){var a=e||6,i=[],o=[];n.range(0,360+a,a).forEach(function(e,r){var n=e*Math.PI/180,a=t(n);i.push(e),o.push(a)});var l={t:i,r:o};return r&&(l.name=r),l},tA.util.ensureArray=function(t,e){if(void 0===t)return null;var r=[].concat(t);return n.range(e).map(function(t,e){return r[e]||r[0]})},tA.util.fillArrays=function(t,e,r){return e.forEach(function(e,n){t[e]=tA.util.ensureArray(t[e],r)}),t},tA.util.cloneJson=function(t){return JSON.parse(JSON.stringify(t))},tA.util.validateKeys=function(t,e){"string"==typeof e&&(e=e.split("."));var r=e.shift();return t[r]&&(!e.length||objHasKeys(t[r],e))},tA.util.sumArrays=function(t,e){return n.zip(t,e).map(function(t,e){return n.sum(t)})},tA.util.arrayLast=function(t){return t[t.length-1]},tA.util.arrayEqual=function(t,e){for(var r=Math.max(t.length,e.length,1);r-- >=0&&t[r]===e[r];);return-2===r},tA.util.flattenArray=function(t){for(var e=[];!tA.util.arrayEqual(e,t);)e=t,t=[].concat.apply([],t);return t},tA.util.deduplicate=function(t){return t.filter(function(t,e,r){return r.indexOf(t)==e})},tA.util.convertToCartesian=function(t,e){var r=e*Math.PI/180;return[t*Math.cos(r),t*Math.sin(r)]},tA.util.round=function(t,e){var r=e||2,n=Math.pow(10,r);return Math.round(t*n)/n},tA.util.getMousePos=function(t){var e=n.mouse(t.node()),r=e[0],a=e[1],i={};return i.x=r,i.y=a,i.pos=e,i.angle=180*(Math.atan2(a,r)+Math.PI)/Math.PI,i.radius=Math.sqrt(r*r+a*a),i},tA.util.duplicatesCount=function(t){for(var e,r={},n={},a=0,i=t.length;a<i;a++)(e=t[a])in r?(r[e]++,n[e]=r[e]):r[e]=1;return n},tA.util.duplicates=function(t){return Object.keys(tA.util.duplicatesCount(t))},tA.util.translator=function(t,e,r,n){if(n){var a=r.slice();r=e,e=a}var i=e.reduce(function(t,e){if(void 0!==t)return t[e]},t);void 0!==i&&(e.reduce(function(t,r,n){if(void 0!==t)return n===e.length-1&&delete t[r],t[r]},t),r.reduce(function(t,e,n){return void 0===t[e]&&(t[e]={}),n===r.length-1&&(t[e]=i),t[e]},t))},tA.PolyChart=function(){var t=[tA.PolyChart.defaultConfig()],e=n.dispatch("hover"),r={solid:"none",dash:[5,2],dot:[2,5]};function a(){var e=t[0].geometryConfig,a=e.container;"string"==typeof a&&(a=n.select(a)),a.datum(t).each(function(t,a){var i=!!t[0].data.yStack,o=t.map(function(t,e){return i?n.zip(t.data.t[0],t.data.r[0],t.data.yStack[0]):n.zip(t.data.t[0],t.data.r[0])}),l=e.angularScale,s=e.radialScale.domain()[0],u={bar:function(r,a,i){var o=t[i].data,s=e.radialScale(r[1])-e.radialScale(0),u=e.radialScale(r[2]||0),c=o.barWidth;n.select(this).attr({class:"mark bar",d:"M"+[[s+u,-c/2],[s+u,c/2],[u,c/2],[u,-c/2]].join("L")+"Z",transform:function(t,r){return"rotate("+(e.orientation+l(t[0]))+")"}})}};u.dot=function(r,a,i){var o=r[2]?[r[0],r[1]+r[2]]:r,l=n.svg.symbol().size(t[i].data.dotSize).type(t[i].data.dotType)(r,a);n.select(this).attr({class:"mark dot",d:l,transform:function(t,r){var n,a,i,l=(n=function(t,r){var n=e.radialScale(t[1]),a=(e.angularScale(t[0])+e.orientation)*Math.PI/180;return{r:n,t:a}}(o),a=n.r*Math.cos(n.t),i=n.r*Math.sin(n.t),{x:a,y:i});return"translate("+[l.x,l.y]+")"}})};var c=n.svg.line.radial().interpolate(t[0].data.lineInterpolation).radius(function(t){return e.radialScale(t[1])}).angle(function(t){return e.angularScale(t[0])*Math.PI/180});u.line=function(r,a,i){var l=r[2]?o[i].map(function(t,e){return[t[0],t[1]+t[2]]}):o[i];if(n.select(this).each(u.dot).style({opacity:function(e,r){return+t[i].data.dotVisible},fill:p.stroke(r,a,i)}).attr({class:"mark dot"}),!(a>0)){var s=n.select(this.parentNode).selectAll("path.line").data([0]);s.enter().insert("path"),s.attr({class:"line",d:c(l),transform:function(t,r){return"rotate("+(e.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(t,e){return p.fill(r,a,i)},"fill-opacity":0,stroke:function(t,e){return p.stroke(r,a,i)},"stroke-width":function(t,e){return p["stroke-width"](r,a,i)},"stroke-dasharray":function(t,e){return p["stroke-dasharray"](r,a,i)},opacity:function(t,e){return p.opacity(r,a,i)},display:function(t,e){return p.display(r,a,i)}})}};var f=e.angularScale.range(),h=Math.abs(f[1]-f[0])/o[0].length*Math.PI/180,d=n.svg.arc().startAngle(function(t){return-h/2}).endAngle(function(t){return h/2}).innerRadius(function(t){return e.radialScale(s+(t[2]||0))}).outerRadius(function(t){return e.radialScale(s+(t[2]||0))+e.radialScale(t[1])});u.arc=function(t,r,a){n.select(this).attr({class:"mark arc",d:d,transform:function(t,r){return"rotate("+(e.orientation+l(t[0])+90)+")"}})};var p={fill:function(e,r,n){return t[n].data.color},stroke:function(e,r,n){return t[n].data.strokeColor},"stroke-width":function(e,r,n){return t[n].data.strokeSize+"px"},"stroke-dasharray":function(e,n,a){return r[t[a].data.strokeDash]},opacity:function(e,r,n){return t[n].data.opacity},display:function(e,r,n){return void 0===t[n].data.visible||t[n].data.visible?"block":"none"}},g=n.select(this).selectAll("g.layer").data(o);g.enter().append("g").attr({class:"layer"});var v=g.selectAll("path.mark").data(function(t,e){return t});v.enter().append("path").attr({class:"mark"}),v.style(p).each(u[e.geometryType]),v.exit().remove(),g.exit().remove()})}return a.config=function(e){return arguments.length?(e.forEach(function(e,r){t[r]||(t[r]={}),$w(t[r],tA.PolyChart.defaultConfig()),$w(t[r],e)}),this):t},a.getColorScale=function(){},n.rebind(a,e,"on"),a},tA.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:n.scale.category20()}}},tA.BarChart=function(){return tA.PolyChart()},tA.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}},tA.AreaChart=function(){return tA.PolyChart()},tA.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}},tA.DotPlot=function(){return tA.PolyChart()},tA.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}},tA.LinePlot=function(){return tA.PolyChart()},tA.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}},tA.Legend=function(){var t=tA.Legend.defaultConfig(),e=n.dispatch("hover");function r(){var e=t.legendConfig,a=t.data.map(function(t,r){return[].concat(t).map(function(t,n){var a=$w({},e.elements[r]);return a.name=t,a.color=[].concat(e.elements[r].color)[n],a})}),i=n.merge(a);i=i.filter(function(t,r){return e.elements[r]&&(e.elements[r].visibleInLegend||void 0===e.elements[r].visibleInLegend)}),e.reverseOrder&&(i=i.reverse());var o=e.container;("string"==typeof o||o.nodeName)&&(o=n.select(o));var l=i.map(function(t,e){return t.color}),s=e.fontSize,u=null==e.isContinuous?"number"==typeof i[0]:e.isContinuous,c=u?e.height:s*i.length,f=o.classed("legend-group",!0).selectAll("svg").data([0]),h=f.enter().append("svg").attr({width:300,height:c+s,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});h.append("g").classed("legend-axis",!0),h.append("g").classed("legend-marks",!0);var d=n.range(i.length),p=n.scale[u?"linear":"ordinal"]().domain(d).range(l),g=n.scale[u?"linear":"ordinal"]().domain(d)[u?"range":"rangePoints"]([0,c]);if(u){var v=f.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(l);v.enter().append("stop"),v.attr({offset:function(t,e){return e/(l.length-1)*100+"%"}}).style({"stop-color":function(t,e){return t}}),f.append("rect").classed("legend-mark",!0).attr({height:e.height,width:e.colorBandWidth,fill:"url(#grad1)"})}else{var m=f.select(".legend-marks").selectAll("path.legend-mark").data(i);m.enter().append("path").classed("legend-mark",!0),m.attr({transform:function(t,e){return"translate("+[s/2,g(e)+s/2]+")"},d:function(t,e){var r,a,i,o=t.symbol;return i=3*(a=s),"line"===(r=o)?"M"+[[-a/2,-a/12],[a/2,-a/12],[a/2,a/12],[-a/2,a/12]]+"Z":-1!=n.svg.symbolTypes.indexOf(r)?n.svg.symbol().type(r).size(i)():n.svg.symbol().type("square").size(i)()},fill:function(t,e){return p(e)}}),m.exit().remove()}var y=n.svg.axis().scale(g).orient("right"),x=f.select("g.legend-axis").attr({transform:"translate("+[u?e.colorBandWidth:s,s/2]+")"}).call(y);return x.selectAll(".domain").style({fill:"none",stroke:"none"}),x.selectAll("line").style({fill:"none",stroke:u?e.textColor:"none"}),x.selectAll("text").style({fill:e.textColor,"font-size":e.fontSize}).text(function(t,e){return i[e].name}),r}return r.config=function(e){return arguments.length?($w(t,e),this):t},n.rebind(r,e,"on"),r},tA.Legend.defaultConfig=function(t,e){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}},tA.tooltipPanel=function(){var t,e,r,a={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},i="tooltip-"+tA.tooltipPanel.uid++,o=10,l=function(){var n=(t=a.container.selectAll("g."+i).data([0])).enter().append("g").classed(i,!0).style({"pointer-events":"none",display:"none"});return r=n.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),e=n.append("text").attr({dx:a.padding+o,dy:.3*+a.fontSize}),l};return l.text=function(i){var s=n.hsl(a.color).l,u=s>=.5?"#aaa":"white",c=s>=.5?"black":"white",f=i||"";e.style({fill:c,"font-size":a.fontSize+"px"}).text(f);var h=a.padding,d=e.node().getBBox(),p={fill:a.color,stroke:u,"stroke-width":"2px"},g=d.width+2*h+o,v=d.height+2*h;return r.attr({d:"M"+[[o,-v/2],[o,-v/4],[a.hasTick?0:o,0],[o,v/4],[o,v/2],[g,v/2],[g,-v/2]].join("L")+"Z"}).style(p),t.attr({transform:"translate("+[o,-v/2+2*h]+")"}),t.style({display:"block"}),l},l.move=function(e){if(t)return t.attr({transform:"translate("+[e[0],e[1]]+")"}).style({display:"block"}),l},l.hide=function(){if(t)return t.style({display:"none"}),l},l.show=function(){if(t)return t.style({display:"block"}),l},l.config=function(t){return $w(a,t),l},l},tA.tooltipPanel.uid=1,tA.adapter={},tA.adapter.plotly=function(){var t={convert:function(t,e){var r={};if(t.data&&(r.data=t.data.map(function(t,r){var n=$w({},t);return[[n,["marker","color"],["color"]],[n,["marker","opacity"],["opacity"]],[n,["marker","line","color"],["strokeColor"]],[n,["marker","line","dash"],["strokeDash"]],[n,["marker","line","width"],["strokeSize"]],[n,["marker","symbol"],["dotType"]],[n,["marker","size"],["dotSize"]],[n,["marker","barWidth"],["barWidth"]],[n,["line","interpolation"],["lineInterpolation"]],[n,["showlegend"],["visibleInLegend"]]].forEach(function(t,r){tA.util.translator.apply(null,t.concat(e))}),e||delete n.marker,e&&delete n.groupId,e?("LinePlot"===n.geometry?(n.type="scatter",!0===n.dotVisible?(delete n.dotVisible,n.mode="lines+markers"):n.mode="lines"):"DotPlot"===n.geometry?(n.type="scatter",n.mode="markers"):"AreaChart"===n.geometry?n.type="area":"BarChart"===n.geometry&&(n.type="bar"),delete n.geometry):("scatter"===n.type?"lines"===n.mode?n.geometry="LinePlot":"markers"===n.mode?n.geometry="DotPlot":"lines+markers"===n.mode&&(n.geometry="LinePlot",n.dotVisible=!0):"area"===n.type?n.geometry="AreaChart":"bar"===n.type&&(n.geometry="BarChart"),delete n.mode,delete n.type),n}),!e&&t.layout&&"stack"===t.layout.barmode)){var a=tA.util.duplicates(r.data.map(function(t,e){return t.geometry}));r.data.forEach(function(t,e){var n=a.indexOf(t.geometry);-1!=n&&(r.data[e].groupId=n)})}if(t.layout){var i=$w({},t.layout);if([[i,["plot_bgcolor"],["backgroundColor"]],[i,["showlegend"],["showLegend"]],[i,["radialaxis"],["radialAxis"]],[i,["angularaxis"],["angularAxis"]],[i.angularaxis,["showline"],["gridLinesVisible"]],[i.angularaxis,["showticklabels"],["labelsVisible"]],[i.angularaxis,["nticks"],["ticksCount"]],[i.angularaxis,["tickorientation"],["tickOrientation"]],[i.angularaxis,["ticksuffix"],["ticksSuffix"]],[i.angularaxis,["range"],["domain"]],[i.angularaxis,["endpadding"],["endPadding"]],[i.radialaxis,["showline"],["gridLinesVisible"]],[i.radialaxis,["tickorientation"],["tickOrientation"]],[i.radialaxis,["ticksuffix"],["ticksSuffix"]],[i.radialaxis,["range"],["domain"]],[i.angularAxis,["showline"],["gridLinesVisible"]],[i.angularAxis,["showticklabels"],["labelsVisible"]],[i.angularAxis,["nticks"],["ticksCount"]],[i.angularAxis,["tickorientation"],["tickOrientation"]],[i.angularAxis,["ticksuffix"],["ticksSuffix"]],[i.angularAxis,["range"],["domain"]],[i.angularAxis,["endpadding"],["endPadding"]],[i.radialAxis,["showline"],["gridLinesVisible"]],[i.radialAxis,["tickorientation"],["tickOrientation"]],[i.radialAxis,["ticksuffix"],["ticksSuffix"]],[i.radialAxis,["range"],["domain"]],[i.font,["outlinecolor"],["outlineColor"]],[i.legend,["traceorder"],["reverseOrder"]],[i,["labeloffset"],["labelOffset"]],[i,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(t,r){tA.util.translator.apply(null,t.concat(e))}),e?(void 0!==i.tickLength&&(i.angularaxis.ticklen=i.tickLength,delete i.tickLength),i.tickColor&&(i.angularaxis.tickcolor=i.tickColor,delete i.tickColor)):(i.angularAxis&&void 0!==i.angularAxis.ticklen&&(i.tickLength=i.angularAxis.ticklen),i.angularAxis&&void 0!==i.angularAxis.tickcolor&&(i.tickColor=i.angularAxis.tickcolor)),i.legend&&"boolean"!=typeof i.legend.reverseOrder&&(i.legend.reverseOrder="normal"!=i.legend.reverseOrder),i.legend&&"boolean"==typeof i.legend.traceorder&&(i.legend.traceorder=i.legend.traceorder?"reversed":"normal",delete i.legend.reverseOrder),i.margin&&void 0!==i.margin.t){var o=["t","r","b","l","pad"],l=["top","right","bottom","left","pad"],s={};n.entries(i.margin).forEach(function(t,e){s[l[o.indexOf(t.key)]]=t.value}),i.margin=s}e&&(delete i.needsEndSpacing,delete i.minorTickColor,delete i.minorTicks,delete i.angularaxis.ticksCount,delete i.angularaxis.ticksCount,delete i.angularaxis.ticksStep,delete i.angularaxis.rewriteTicks,delete i.angularaxis.nticks,delete i.radialaxis.ticksCount,delete i.radialaxis.ticksCount,delete i.radialaxis.ticksStep,delete i.radialaxis.rewriteTicks,delete i.radialaxis.nticks),r.layout=i}return r}};return t};var eA,rA=oe.extendDeepAll,nA=eA={};nA.framework=function(t){var e,r,a,i,o,l=new function(){var t,e=[],r=-1,n=!1;function a(t,e){return t?(n=!0,t[e](),n=!1,this):this}return{add:function(t){return n?this:(e.splice(r+1,e.length-r),e.push(t),r=e.length-1,this)},setCallback:function(e){t=e},undo:function(){var n=e[r];return n?(a(n,"undo"),r-=1,t&&t(n.undo),this):this},redo:function(){var n=e[r+1];return n?(a(n,"redo"),r+=1,t&&t(n.redo),this):this},clear:function(){e=[],r=-1},hasUndo:function(){return-1!==r},hasRedo:function(){return r<e.length-1},getCommands:function(){return e},getPreviousCommand:function(){return e[r-1]},getIndex:function(){return r}}};function s(r,l){return l&&(o=l),n.select(n.select(o).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),e=e?rA(e,r):r,a||(a=Qw.Axis()),i=Qw.adapter.plotly().convert(e),a.config(i).render(o),t.data=e.data,t.layout=e.layout,nA.fillLayout(t),e}return s.isPolar=!0,s.svg=function(){return a.svg()},s.getConfig=function(){return e},s.getLiveConfig=function(){return Qw.adapter.plotly().convert(a.getLiveConfig(),!0)},s.getLiveScales=function(){return{t:a.angularScale(),r:a.radialScale()}},s.setUndoPoint=function(){var t,n,a=this,i=Qw.util.cloneJson(e);t=i,n=r,l.add({undo:function(){n&&a(n)},redo:function(){a(t)}}),r=Qw.util.cloneJson(i)},s.undo=function(){l.undo()},s.redo=function(){l.redo()},s},nA.fillLayout=function(t){var e=n.select(t).selectAll(".plot-container"),r=e.selectAll(".svg-container"),a=t.framework&&t.framework.svg&&t.framework.svg(),i={width:800,height:600,paper_bgcolor:$e.background,_container:e,_paperdiv:r,_paper:a};t._fullLayout=rA(i,t.layout)};var aA={};(aA=Qw).manager=eA;var iA={},oA=Fo.initInteractions,lA=Oe.AX_NAME_PATTERN,sA=0;function uA(t,e){try{t._fullLayout._paper.style("background",e)}catch(t){oe.error(t)}}function cA(t,e){uA(t,$e.combine(e,"white"))}function fA(t,e){t._context||(t._context=oe.extendDeep({},A));var r,n,a,i=t._context;if(e){for(n=Object.keys(e),r=0;r<n.length;r++)"editable"!==(a=n[r])&&"edits"!==a&&a in i&&("setBackground"===a&&"opaque"===e[a]?i[a]=cA:i[a]=e[a]);e.plot3dPixelRatio&&!i.plotGlPixelRatio&&(i.plotGlPixelRatio=i.plot3dPixelRatio);var o=e.editable;if(void 0!==o)for(i.editable=o,n=Object.keys(i.edits),r=0;r<n.length;r++)i.edits[n[r]]=o;if(e.edits)for(n=Object.keys(e.edits),r=0;r<n.length;r++)(a=n[r])in i.edits&&(i.edits[a]=e.edits[a])}i.staticPlot&&(i.editable=!1,i.edits={},i.autosizable=!1,i.scrollZoom=!1,i.doubleClick=!1,i.showTips=!1,i.showLink=!1,i.displayModeBar=!1),"hover"!==i.displayModeBar||Re||(i.displayModeBar=!0),"transparent"!==i.setBackground&&"function"==typeof i.setBackground||(i.setBackground=uA)}function hA(t,e){var r,n,a=e+1,i=[];for(r=0;r<t.length;r++)(n=t[r])<0?i.push(a+n):i.push(n);return i}function dA(t,e,r){var n,a;for(n=0;n<e.length;n++){if((a=e[n])!==parseInt(a,10))throw new Error("all values in "+r+" must be integers");if(a>=t.data.length||a<-t.data.length)throw new Error(r+" must be valid indices for gd.data.");if(e.indexOf(a,n+1)>-1||a>=0&&e.indexOf(-t.data.length+a)>-1||a<0&&e.indexOf(t.data.length+a)>-1)throw new Error("each index in "+r+" must be unique.")}}function pA(t,e,r){if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("currentIndices is a required argument.");if(Array.isArray(e)||(e=[e]),dA(t,e,"currentIndices"),void 0===r||Array.isArray(r)||(r=[r]),void 0!==r&&dA(t,r,"newIndices"),void 0!==r&&e.length!==r.length)throw new Error("current and new indices must be of equal length.")}function gA(t,e,r,n,i){!function(t,e,r,n){var a=oe.isPlainObject(n);if(!Array.isArray(t.data))throw new Error("gd.data must be an array");if(!oe.isPlainObject(e))throw new Error("update must be a key:value object");if(void 0===r)throw new Error("indices must be an integer or array of integers");for(var i in dA(t,r,"indices"),e){if(!Array.isArray(e[i])||e[i].length!==r.length)throw new Error("attribute "+i+" must be an array of length equal to indices array length");if(a&&(!(i in n)||!Array.isArray(n[i])||n[i].length!==e[i].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(t,e,r,n);for(var o=function(t,e,r,n){var i,o,l,s,u,c=oe.isPlainObject(n),f=[];for(var h in Array.isArray(r)||(r=[r]),r=hA(r,t.data.length-1),e)for(var d=0;d<r.length;d++){if(i=t.data[r[d]],o=(l=oe.nestedProperty(i,h)).get(),s=e[h][d],!oe.isArrayOrTypedArray(s))throw new Error("attribute: "+h+" index: "+d+" must be an array");if(!oe.isArrayOrTypedArray(o))throw new Error("cannot extend missing or non-array attribute: "+h);if(o.constructor!==s.constructor)throw new Error("cannot extend array with an array of a different type: "+h);u=c?n[h][d]:n,a(u)||(u=-1),f.push({prop:l,target:o,insert:s,maxp:Math.floor(u)})}return f}(t,e,r,n),l={},s={},u=0;u<o.length;u++){var c=o[u].prop,f=o[u].maxp,h=i(o[u].target,o[u].insert,f);c.set(h[0]),Array.isArray(l[c.astr])||(l[c.astr]=[]),l[c.astr].push(h[1]),Array.isArray(s[c.astr])||(s[c.astr]=[]),s[c.astr].push(o[u].target.length)}return{update:l,maxPoints:s}}function vA(t,e){var r=new t.constructor(t.length+e.length);return r.set(t),r.set(e,t.length),r}function mA(t){return void 0===t?null:t}function yA(t,e,r){var n,a,i=t._fullLayout,o=t._fullData,l=t.data,s=_e.traceFlags(),u={},c={};function f(){return r.map(function(){})}function h(t){var e=Na.id2name(t);-1===a.indexOf(e)&&a.push(e)}function d(t){return"LAYOUT"+t+".autorange"}function p(t){return"LAYOUT"+t+".range"}function g(n,a,i){var o;Array.isArray(n)?n.forEach(function(t){g(t,a,i)}):n in e||gw.hasParent(e,n)||(o="LAYOUT"===n.substr(0,6)?oe.nestedProperty(t.layout,n.replace("LAYOUT","")):oe.nestedProperty(l[r[i]],n),n in c||(c[n]=f()),void 0===c[n][i]&&(c[n][i]=mA(o.get())),void 0!==a&&o.set(a))}for(var v in e){if(gw.hasParent(e,v))throw new Error("cannot set "+v+"and a parent attribute simultaneously");var m,y,x,b,_,w,A=e[v];if(u[v]=A,"LAYOUT"!==v.substr(0,6)){for(c[v]=f(),n=0;n<r.length;n++)if(m=l[r[n]],y=o[r[n]],b=(x=oe.nestedProperty(m,v)).get(),void 0!==(_=Array.isArray(A)?A[n%A.length]:A)){if((w=zn.getTraceValObject(y,x.parts))&&w.impliedEdits&&null!==_)for(var M in w.impliedEdits)g(oe.relativeAttr(v,M),w.impliedEdits[M],n);else if("colorbar.thicknessmode"===v&&x.get()!==_&&-1!==["fraction","pixels"].indexOf(_)&&y.colorbar){var T=-1!==["top","bottom"].indexOf(y.colorbar.orient)?i.height-i.margin.t-i.margin.b:i.width-i.margin.l-i.margin.r;g("colorbar.thickness",y.colorbar.thickness*("fraction"===_?1/T:T),n)}else if("colorbar.lenmode"===v&&x.get()!==_&&-1!==["fraction","pixels"].indexOf(_)&&y.colorbar){var k=-1!==["top","bottom"].indexOf(y.colorbar.orient)?i.width-i.margin.l-i.margin.r:i.height-i.margin.t-i.margin.b;g("colorbar.len",y.colorbar.len*("fraction"===_?1/k:k),n)}else"colorbar.tick0"!==v&&"colorbar.dtick"!==v||g("colorbar.tickmode","linear",n);if("type"===v&&"pie"===_!=("pie"===b)){var E="x",C="y";"bar"!==_&&"bar"!==b||"h"!==m.orientation||(E="y",C="x"),oe.swapAttrs(m,["?","?src"],"labels",E),oe.swapAttrs(m,["d?","?0"],"label",E),oe.swapAttrs(m,["?","?src"],"values",C),"pie"===b?(oe.nestedProperty(m,"marker.color").set(oe.nestedProperty(m,"marker.colors").get()),i._pielayer.selectAll("g.trace").remove()):I.traceIs(m,"cartesian")&&oe.nestedProperty(m,"marker.colors").set(oe.nestedProperty(m,"marker.color").get())}c[v][n]=mA(b);if(-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(v)){if("orientation"===v){x.set(_);var S=m.x&&!m.y?"h":"v";if((x.get()||S)===y.orientation)continue}else"orientationaxes"===v&&(m.orientation={v:"h",h:"v"}[y.orientation]);gw.swapXYData(m),s.calc=s.clearAxisTypes=!0}else-1!==na.dataArrayContainers.indexOf(x.parts[0])?(gw.manageArrayContainers(x,_,c),s.calc=!0):(w?w.arrayOk&&(oe.isArrayOrTypedArray(_)||oe.isArrayOrTypedArray(b))?s.calc=!0:_e.update(s,w):s.calc=!0,x.set(_))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(v)&&Na.swap(t,r),"orientationaxes"===v){var L=oe.nestedProperty(t.layout,"hovermode");"x"===L.get()?L.set("y"):"y"===L.get()&&L.set("x")}if(-1!==["orientation","type"].indexOf(v)){for(a=[],n=0;n<r.length;n++){var O=l[r[n]];I.traceIs(O,"cartesian")&&(h(O.xaxis||"x"),h(O.yaxis||"y"),"type"===v&&g(["autobinx","autobiny"],!0,n))}g(a.map(d),!0,0),g(a.map(p),[0,1],0)}}else x=oe.nestedProperty(t.layout,v.replace("LAYOUT","")),c[v]=[mA(x.get())],x.set(Array.isArray(A)?A[0]:A),s.calc=!0}var D=!1,R=Na.list(t);for(n=0;n<R.length;n++)if(R[n].autorange){D=!0;break}return(s.calc||s.calcIfAutorange&&D)&&(s.clearCalc=!0),(s.calc||s.plot||s.calcIfAutorange)&&(s.fullReplot=!0),{flags:s,undoit:c,redoit:u,traces:r,eventData:oe.extendDeepNoArrays([],[u,r])}}function xA(t,e){var r,n,a,i=t.layout,o=t._fullLayout,l=Object.keys(e),s=Na.list(t),u={};for(n=0;n<l.length;n++)if(0===l[n].indexOf("allaxes")){for(a=0;a<s.length;a++){var c=s[a]._id.substr(1),f=-1!==c.indexOf("scene")?c+".":"",h=l[n].replace("allaxes",f+s[a]._name);e[h]||(e[h]=e[l[n]])}delete e[l[n]]}var d=_e.layoutFlags(),p={},g={};function v(t,r){if(Array.isArray(t))t.forEach(function(t){v(t,r)});else if(!(t in e||gw.hasParent(e,t))){var n=oe.nestedProperty(i,t);t in g||(g[t]=mA(n.get())),void 0!==r&&n.set(r)}}var m,y={};function x(t){var e=Na.name2id(t.split(".")[0]);return y[e]=1,e}for(var b in e){if(gw.hasParent(e,b))throw new Error("cannot set "+b+"and a parent attribute simultaneously");for(var _=oe.nestedProperty(i,b),w=e[b],A=_.parts.length,M=A-1;M>0&&"string"!=typeof _.parts[A-1];)M--;var T=_.parts[M],k=_.parts[M-1]+"."+T,E=_.parts.slice(0,M).join("."),C=oe.nestedProperty(t.layout,E).get(),S=oe.nestedProperty(o,E).get(),L=_.get();if(void 0!==w){p[b]=w,g[b]="reverse"===T?w:mA(L);var O=zn.getLayoutValObject(o,_.parts);if(O&&O.impliedEdits&&null!==w)for(var D in O.impliedEdits)v(oe.relativeAttr(b,D),O.impliedEdits[D]);if(-1!==["width","height"].indexOf(b)&&null===w)o[b]=t._initialAutoSize[b];else if(k.match(/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/))x(k),oe.nestedProperty(o,E+"._inputRange").set(null);else if(k.match(/^[xyz]axis[0-9]*\.autorange$/)){x(k),oe.nestedProperty(o,E+"._inputRange").set(null);var R=oe.nestedProperty(o,E).get();R._inputDomain&&(R._input.domain=R._inputDomain.slice())}else k.match(/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/)&&oe.nestedProperty(o,E+"._inputDomain").set(null);if("type"===T){var P=C,B="linear"===S.type&&"log"===w,F="log"===S.type&&"linear"===w;if(B||F){if(P&&P.range)if(S.autorange)B&&(P.range=P.range[1]>P.range[0]?[1,2]:[2,1]);else{var z=P.range[0],N=P.range[1];B?(z<=0&&N<=0&&v(E+".autorange",!0),z<=0?z=N/1e6:N<=0&&(N=z/1e6),v(E+".range[0]",Math.log(z)/Math.LN10),v(E+".range[1]",Math.log(N)/Math.LN10)):(v(E+".range[0]",Math.pow(10,z)),v(E+".range[1]",Math.pow(10,N)))}else v(E+".autorange",!0);Array.isArray(o._subplots.polar)&&o._subplots.polar.length&&o[_.parts[0]]&&"radialaxis"===_.parts[1]&&delete o[_.parts[0]]._subplot.viewInitial["radialaxis.range"],I.getComponentMethod("annotations","convertCoords")(t,S,w,v),I.getComponentMethod("images","convertCoords")(t,S,w,v)}else v(E+".autorange",!0),v(E+".range",null);oe.nestedProperty(o,E+"._inputRange").set(null)}else if(T.match(lA)){var j=oe.nestedProperty(o,b).get(),U=(w||{}).type;U&&"-"!==U||(U="linear"),I.getComponentMethod("annotations","convertCoords")(t,j,U,v),I.getComponentMethod("images","convertCoords")(t,j,U,v)}var V=kw.containerArrayMatch(b);if(V){r=V.array,n=V.index;var H=V.property,q=(oe.nestedProperty(i,r)||[])[n]||{},G=q,X=O||{editType:"calc"},Y=-1!==X.editType.indexOf("calcIfAutorange");""===n?(Y?d.calc=!0:_e.update(d,X),Y=!1):""===H&&(G=w,kw.isAddVal(w)?g[b]=null:kw.isRemoveVal(w)?(g[b]=q,G=q):oe.warn("unrecognized full object value",e)),Y&&(_A(t,G,"x")||_A(t,G,"y"))?d.calc=!0:_e.update(d,X),u[r]||(u[r]={});var W=u[r][n];W||(W=u[r][n]={}),W[H]=w,delete e[b]}else"reverse"===T?(C.range?C.range.reverse():(v(E+".autorange",!0),C.range=[1,0]),S.autorange?d.calc=!0:d.plot=!0):(o._has("scatter-like")&&o._has("regl")&&"dragmode"===b&&("lasso"===w||"select"===w)&&"lasso"!==L&&"select"!==L?d.plot=!0:O?_e.update(d,O):d.calc=!0,_.set(w))}}for(r in u){kw.applyContainerArrayChanges(t,oe.nestedProperty(i,r),u[r],d)||(d.plot=!0)}var Z=o._axisConstraintGroups||[];for(m in y)for(n=0;n<Z.length;n++){var J=Z[n];if(J[m])for(var Q in d.calc=!0,J)y[Q]||(Na.getFromId(t,Q)._constraintShrinkable=!0)}return(bA(t)||e.height||e.width)&&(d.plot=!0),(d.plot||d.calc)&&(d.layoutReplot=!0),{flags:d,undoit:g,redoit:p,eventData:oe.extendDeep({},p)}}function bA(t){var e=t._fullLayout,r=e.width,n=e.height;return t.layout.autosize&&na.plotAutoSize(t,t.layout,e),e.width!==r||e.height!==n}function _A(t,e,r){if(!oe.isPlainObject(e))return!1;var n=e[r+"ref"]||r,a=Na.getFromId(t,n);return a||n.charAt(0)!==r||(a=Na.getFromId(t,r)),(a||{}).autorange}function wA(t,e,r,n){var a,i,o=n.getValObject,l=n.flags,s=n.immutable,u=n.inArray,c=n.arrayIndex,f=n.gd,h=n.autoranged;function d(){var t=a.editType;-1!==t.indexOf("calcIfAutorange")&&(h||void 0===h&&(_A(f,e,"x")||_A(f,e,"y")))?l.calc=!0:u&&-1!==t.indexOf("arraydraw")?oe.pushUnique(l.arrays[u],c):_e.update(l,a)}function p(t){return"data_array"===t.valType||t.arrayOk}var g=e._fullInput,v=t._fullInput;for(i in g&&g!==e&&(e=g),v&&v!==t&&(t=v),t){if(l.calc)return;var m=t[i],y=e[i];if("_"!==i.charAt(0)&&"function"!=typeof m&&m!==y){if("tick0"===i||"dtick"===i){var x=e.tickmode;if("auto"===x||"array"===x||!x)continue}if(("range"!==i||!e.autorange)&&("zmin"!==i&&"zmax"!==i||"contourcarpet"!==e.type)){var b=r.concat(i);if(a=o(b)){var _,w=a.valType,A=p(a),M=Array.isArray(m),T=Array.isArray(y);if(M&&T){var k="_input_"+i,E=t[k],C=e[k];if(Array.isArray(E)&&E===C)continue}if(void 0===y)A&&M?l.calc=!0:d();else if(a._isLinkedToArray){var S=[],L=!1;u||(l.arrays[i]=S);var O=Math.min(m.length,y.length),D=Math.max(m.length,y.length);if(O!==D){if("arraydraw"!==a.editType){d();continue}L=!0}for(_=0;_<O;_++)wA(m[_],y[_],b.concat(_),oe.extendFlat({inArray:i,arrayIndex:_},n));if(L)for(_=O;_<D;_++)S.push(_)}else!w&&oe.isPlainObject(m)?wA(m,y,b,n):A?M&&T?s&&(l.calc=!0):M!==T?l.calc=!0:d():M&&T&&m.length===y.length&&String(m)===String(y)||d()}}}}for(i in e)if(!(i in t||"_"===i.charAt(0)||"function"==typeof e[i])){if(p(a=o(r.concat(i)))&&Array.isArray(e[i]))return void(l.calc=!0);d()}}function AA(t){var e=n.select(t),r=t._fullLayout;if(r._container=e.selectAll(".plot-container").data([0]),r._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),r._paperdiv=r._container.selectAll(".svg-container").data([0]),r._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),r._glcontainer=r._paperdiv.selectAll(".gl-container").data([{}]),r._glcontainer.enter().append("div").classed("gl-container",!0),r._glcanvas=null,r._paperdiv.selectAll(".main-svg").remove(),r._paper=r._paperdiv.insert("svg",":first-child").classed("main-svg",!0),r._toppaper=r._paperdiv.append("svg").classed("main-svg",!0),!r._uid){var a=[];n.selectAll("defs").each(function(){this.id&&a.push(this.id.split("-")[1])}),r._uid=oe.randstr(a)}r._paperdiv.selectAll(".main-svg").attr(Ce.svgAttrs),r._defs=r._paper.append("defs").attr("id","defs-"+r._uid),r._clips=r._defs.append("g").classed("clips",!0),r._topdefs=r._toppaper.append("defs").attr("id","topdefs-"+r._uid),r._topclips=r._topdefs.append("g").classed("clips",!0),r._bgLayer=r._paper.append("g").classed("bglayer",!0),r._draggers=r._paper.append("g").classed("draglayer",!0);var i=r._paper.append("g").classed("layer-below",!0);r._imageLowerLayer=i.append("g").classed("imagelayer",!0),r._shapeLowerLayer=i.append("g").classed("shapelayer",!0),r._cartesianlayer=r._paper.append("g").classed("cartesianlayer",!0),r._polarlayer=r._paper.append("g").classed("polarlayer",!0),r._ternarylayer=r._paper.append("g").classed("ternarylayer",!0),r._geolayer=r._paper.append("g").classed("geolayer",!0),r._pielayer=r._paper.append("g").classed("pielayer",!0),r._glimages=r._paper.append("g").classed("glimages",!0);var o=r._toppaper.append("g").classed("layer-above",!0);r._imageUpperLayer=o.append("g").classed("imagelayer",!0),r._shapeUpperLayer=o.append("g").classed("shapelayer",!0),r._infolayer=r._toppaper.append("g").classed("infolayer",!0),r._menulayer=r._toppaper.append("g").classed("menulayer",!0),r._zoomlayer=r._toppaper.append("g").classed("zoomlayer",!0),r._hoverlayer=r._toppaper.append("g").classed("hoverlayer",!0),t.emit("plotly_framework")}iA.plot=function(t,e,r,a){var i;if(t=oe.getGraphDiv(t),Ge.init(t),oe.isPlainObject(e)){var o=e;e=o.data,r=o.layout,a=o.config,i=o.frames}if(!1===Ge.triggerHandler(t,"plotly_beforeplot",[e,r,a]))return Promise.reject();e||r||oe.isPlotDiv(t)||oe.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",t),fA(t,a),r||(r={}),n.select(t).classed("js-plotly-plot",!0),Jr.makeTester(),delete Jr.baseUrl,Array.isArray(t._promises)||(t._promises=[]);var l=0===(t.data||[]).length&&Array.isArray(e);if(Array.isArray(e)&&(gw.cleanData(e,t.data),l?t.data=e:t.data.push.apply(t.data,e),t.empty=!1),t.layout&&!l||(t.layout=gw.cleanLayout(r)),t._dragging&&!t._transitioning)return t._replotPending=!0,Promise.reject();t._replotPending=!1,na.supplyDefaults(t);var s=t._fullLayout,u=s._has("cartesian");if(!s._has("polar")&&e&&e[0]&&e[0].r)return oe.log("Legacy polar charts are deprecated!"),function(t,e,r){var a=n.select(t).selectAll(".plot-container").data([0]);a.enter().insert("div",":first-child").classed("plot-container plotly",!0);var i=a.selectAll(".svg-container").data([0]);i.enter().append("div").classed("svg-container",!0).style("position","relative"),i.html(""),e&&(t.data=e);r&&(t.layout=r);aA.manager.fillLayout(t),i.style({width:t._fullLayout.width+"px",height:t._fullLayout.height+"px"}),t.framework=aA.manager.framework(t),t.framework({data:t.data,layout:t.layout},i.node()),t.framework.setUndoPoint();var o=t.framework.svg(),l=1,s=t._fullLayout.title;""!==s&&s||(l=0);var u=function(){this.call(Mr.convertToTspans,t)},c=o.select(".title-group text").call(u);if(t._context.edits.titleText){var f=oe._(t,"Click to enter Plot title");s&&s!==f||(l=.2,c.attr({"data-unformatted":f}).text(f).style({opacity:l}).on("mouseover.opacity",function(){n.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){n.select(this).transition().duration(1e3).style("opacity",0)}));var h=function(){this.call(Mr.makeEditable,{gd:t}).on("edit",function(e){t.framework({layout:{title:e}}),this.text(e).call(u),this.call(h)}).on("cancel",function(){var t=this.attr("data-unformatted");this.text(t).call(u)})};c.call(h)}return t._context.setBackground(t,t._fullLayout.paper_bgcolor),na.addLinks(t),Promise.resolve()}(t,e,r);s._replotting=!0,l&&AA(t),t.framework!==AA&&(t.framework=AA,AA(t)),Jr.initGradients(t),l&&Na.saveShowSpikeInitial(t);var c=!t.calcdata||t.calcdata.length!==(t._fullData||[]).length;c&&na.doCalcdata(t);for(var f=0;f<t.calcdata.length;f++)t.calcdata[f][0].trace=t._fullData[f];var h=JSON.stringify(s._size);function d(){var e,r,n,a=t.calcdata;for(I.getComponentMethod("legend","draw")(t),I.getComponentMethod("rangeselector","draw")(t),I.getComponentMethod("sliders","draw")(t),I.getComponentMethod("updatemenus","draw")(t),e=0;e<a.length;e++)!0===(n=(r=a[e])[0].trace).visible&&n._module.colorbar?n._module.colorbar(t,r):na.autoMargin(t,"cb"+n.uid);return na.doAutoMargin(t),na.previousPromises(t)}function p(){t._transitioning||(qw.doAutoRangeAndConstraints(t),l&&Na.saveRangeInitial(t))}var g=[na.previousPromises,function(){if(i)return iA.addFrames(t,i)},function(){for(var e=s._basePlotModules,r=0;r<e.length;r++)e[r].drawFramework&&e[r].drawFramework(t);return!s._glcanvas&&s._has("gl")&&(s._glcanvas=s._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(t){return t.key}),s._glcanvas.enter().append("canvas").attr("class",function(t){return"gl-canvas gl-canvas-"+t.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"visible","pointer-events":"none"})),s._glcanvas&&s._glcanvas.attr("width",s.width).attr("height",s.height),na.previousPromises(t)},d,function(){if(JSON.stringify(s._size)!==h)return oe.syncOrAsync([d,qw.layoutStyles],t)}];u&&g.push(function(){if(c){var e,r,n,a=s._subplots.cartesian,i=s._modules,o=[];for(n=0;n<i.length;n++)oe.pushUnique(o,i[n].setPositions);if(o.length)for(r=0;r<a.length;r++)for(e=s._plots[a[r]],n=0;n<o.length;n++)o[n](t,e);return I.getComponentMethod("errorbars","calc")(t),oe.syncOrAsync([I.getComponentMethod("shapes","calcAutorange"),I.getComponentMethod("annotations","calcAutorange"),p,I.getComponentMethod("rangeslider","calcAutorange")],t)}p()}),g.push(qw.layoutStyles),u&&g.push(function(){return Na.doTicks(t,l?"":"redraw")}),g.push(qw.drawData,qw.finalDraw,oA,na.addLinks,na.rehover,na.previousPromises);var v=oe.syncOrAsync(g,t);return v&&v.then||(v=Promise.resolve()),v.then(function(){return t.emit("plotly_afterplot"),t})},iA.setPlotConfig=function(t){return oe.extendFlat(A,t)},iA.redraw=function(t){if(t=oe.getGraphDiv(t),!oe.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);return gw.cleanData(t.data,t.data),gw.cleanLayout(t.layout),t.calcdata=void 0,iA.plot(t).then(function(){return t.emit("plotly_redraw"),t})},iA.newPlot=function(t,e,r,n){return t=oe.getGraphDiv(t),na.cleanPlot([],{},t._fullData||[],t._fullLayout||{},t.calcdata||[]),na.purge(t),iA.plot(t,e,r,n)},iA.extendTraces=function t(e,r,n,a){var i=gA(e=oe.getGraphDiv(e),r,n,a,function(t,e,r){var n,a;if(oe.isTypedArray(t))if(r<0){var i=new t.constructor(0),o=vA(t,e);r<0?(n=o,a=i):(n=i,a=o)}else if(n=new t.constructor(r),a=new t.constructor(t.length+e.length-r),r===e.length)n.set(e),a.set(t);else if(r<e.length){var l=e.length-r;n.set(e.subarray(l)),a.set(t),a.set(e.subarray(0,l),t.length)}else{var s=r-e.length,u=t.length-s;n.set(t.subarray(u)),n.set(e,s),a.set(t.subarray(0,u))}else n=t.concat(e),a=r>=0&&r<n.length?n.splice(0,n.length-r):[];return[n,a]}),o=iA.redraw(e),l=[e,i.update,n,i.maxPoints];return dw.add(e,iA.prependTraces,l,t,arguments),o},iA.prependTraces=function t(e,r,n,a){var i=gA(e=oe.getGraphDiv(e),r,n,a,function(t,e,r){var n,a;if(oe.isTypedArray(t))if(r<=0){var i=new t.constructor(0),o=vA(e,t);r<0?(n=o,a=i):(n=i,a=o)}else if(n=new t.constructor(r),a=new t.constructor(t.length+e.length-r),r===e.length)n.set(e),a.set(t);else if(r<e.length){var l=e.length-r;n.set(e.subarray(0,l)),a.set(e.subarray(l)),a.set(t,l)}else{var s=r-e.length;n.set(e),n.set(t.subarray(0,s),e.length),a.set(t.subarray(s))}else n=e.concat(t),a=r>=0&&r<n.length?n.splice(r,n.length):[];return[n,a]}),o=iA.redraw(e),l=[e,i.update,n,i.maxPoints];return dw.add(e,iA.extendTraces,l,t,arguments),o},iA.addTraces=function t(e,r,n){e=oe.getGraphDiv(e);var a,i,o=[],l=iA.deleteTraces,s=t,u=[e,o],c=[e,r];for(function(t,e,r){var n,a;if(!Array.isArray(t.data))throw new Error("gd.data must be an array.");if(void 0===e)throw new Error("traces must be defined.");for(Array.isArray(e)||(e=[e]),n=0;n<e.length;n++)if("object"!=typeof(a=e[n])||Array.isArray(a)||null===a)throw new Error("all values in traces array must be non-array objects");if(void 0===r||Array.isArray(r)||(r=[r]),void 0!==r&&r.length!==e.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(e,r,n),Array.isArray(r)||(r=[r]),r=r.map(function(t){return oe.extendFlat({},t)}),gw.cleanData(r,e.data),a=0;a<r.length;a++)e.data.push(r[a]);for(a=0;a<r.length;a++)o.push(-r.length+a);if(void 0===n)return i=iA.redraw(e),dw.add(e,l,u,s,c),i;Array.isArray(n)||(n=[n]);try{pA(e,o,n)}catch(t){throw e.data.splice(e.data.length-r.length,r.length),t}return dw.startSequence(e),dw.add(e,l,u,s,c),i=iA.moveTraces(e,o,n),dw.stopSequence(e),i},iA.deleteTraces=function t(e,r){e=oe.getGraphDiv(e);var n,a,i=[],o=iA.addTraces,l=t,s=[e,i,r],u=[e,r];if(void 0===r)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(r)||(r=[r]),dA(e,r,"indices"),(r=hA(r,e.data.length-1)).sort(oe.sorterDes),n=0;n<r.length;n+=1)a=e.data.splice(r[n],1)[0],i.push(a);var c=iA.redraw(e);return dw.add(e,o,s,l,u),c},iA.moveTraces=function t(e,r,n){var a,i=[],o=[],l=t,s=t,u=[e=oe.getGraphDiv(e),n,r],c=[e,r,n];if(pA(e,r,n),r=Array.isArray(r)?r:[r],void 0===n)for(n=[],a=0;a<r.length;a++)n.push(-r.length+a);for(n=Array.isArray(n)?n:[n],r=hA(r,e.data.length-1),n=hA(n,e.data.length-1),a=0;a<e.data.length;a++)-1===r.indexOf(a)&&i.push(e.data[a]);for(a=0;a<r.length;a++)o.push({newIndex:n[a],trace:e.data[r[a]]});for(o.sort(function(t,e){return t.newIndex-e.newIndex}),a=0;a<o.length;a+=1)i.splice(o[a].newIndex,0,o[a].trace);e.data=i;var f=iA.redraw(e);return dw.add(e,l,u,s,c),f},iA.restyle=function t(e,r,n,a){e=oe.getGraphDiv(e),gw.clearPromiseQueue(e);var i={};if("string"==typeof r)i[r]=n;else{if(!oe.isPlainObject(r))return oe.warn("Restyle fail.",r,n,a),Promise.reject();i=oe.extendFlat({},r),void 0===a&&(a=n)}Object.keys(i).length&&(e.changed=!0);var o=gw.coerceTraceIndices(e,a),l=yA(e,i,o),s=l.flags;s.clearCalc&&(e.calcdata=void 0),s.clearAxisTypes&&gw.clearAxisTypes(e,o,{});var u=[];s.fullReplot?u.push(iA.plot):(u.push(na.previousPromises),na.supplyDefaults(e),s.style&&u.push(qw.doTraceStyle),s.colorbars&&u.push(qw.doColorBars)),u.push(na.rehover),dw.add(e,t,[e,l.undoit,l.traces],t,[e,l.redoit,l.traces]);var c=oe.syncOrAsync(u,e);return c&&c.then||(c=Promise.resolve()),c.then(function(){return e.emit("plotly_restyle",l.eventData),e})},iA.relayout=function t(e,r,n){if(e=oe.getGraphDiv(e),gw.clearPromiseQueue(e),e.framework&&e.framework.isPolar)return Promise.resolve(e);var a={};if("string"==typeof r)a[r]=n;else{if(!oe.isPlainObject(r))return oe.warn("Relayout fail.",r,n),Promise.reject();a=oe.extendFlat({},r)}Object.keys(a).length&&(e.changed=!0);var i=xA(e,a),o=i.flags;o.calc&&(e.calcdata=void 0),o.margins&&gw.clearAxisAutomargins(e);var l=[na.previousPromises];o.layoutReplot?l.push(qw.layoutReplot):Object.keys(a).length&&(na.supplyDefaults(e),o.legend&&l.push(qw.doLegend),o.layoutstyle&&l.push(qw.layoutStyles),o.axrange&&l.push(qw.doAutoRangeAndConstraints,qw.doTicksRelayout,qw.drawData,qw.finalDraw),o.ticks&&l.push(qw.doTicksRelayout),o.modebar&&l.push(qw.doModeBar),o.camera&&l.push(qw.doCamera)),l.push(na.rehover),dw.add(e,t,[e,i.undoit],t,[e,i.redoit]);var s=oe.syncOrAsync(l,e);return s&&s.then||(s=Promise.resolve(e)),s.then(function(){return e.emit("plotly_relayout",i.eventData),e})},iA.update=function t(e,r,n,a){if(e=oe.getGraphDiv(e),gw.clearPromiseQueue(e),e.framework&&e.framework.isPolar)return Promise.resolve(e);oe.isPlainObject(r)||(r={}),oe.isPlainObject(n)||(n={}),Object.keys(r).length&&(e.changed=!0),Object.keys(n).length&&(e.changed=!0);var i=gw.coerceTraceIndices(e,a),o=yA(e,oe.extendFlat({},r),i),l=o.flags,s=xA(e,oe.extendFlat({},n)),u=s.flags;(l.clearCalc||u.calc)&&(e.calcdata=void 0),l.clearAxisTypes&&gw.clearAxisTypes(e,i,n),u.margins&&gw.clearAxisAutomargins(e);var c=[];if(l.fullReplot&&u.layoutReplot){var f=e.data,h=e.layout;e.data=void 0,e.layout=void 0,c.push(function(){return iA.plot(e,f,h)})}else l.fullReplot?c.push(iA.plot):u.layoutReplot?c.push(qw.layoutReplot):(c.push(na.previousPromises),na.supplyDefaults(e),l.style&&c.push(qw.doTraceStyle),l.colorbars&&c.push(qw.doColorBars),u.legend&&c.push(qw.doLegend),u.layoutstyle&&c.push(qw.layoutStyles),u.axrange&&c.push(qw.doAutoRangeAndConstraints,qw.doTicksRelayout,qw.drawData,qw.finalDraw),u.ticks&&c.push(qw.doTicksRelayout),u.modebar&&c.push(qw.doModeBar),u.camera&&c.push(qw.doCamera));c.push(na.rehover),dw.add(e,t,[e,o.undoit,s.undoit,o.traces],t,[e,o.redoit,s.redoit,o.traces]);var d=oe.syncOrAsync(c,e);return d&&d.then||(d=Promise.resolve(e)),d.then(function(){return e.emit("plotly_update",{data:o.eventData,layout:s.eventData}),e})},iA.react=function(t,e,r,n){var a,i;var o=(t=oe.getGraphDiv(t))._fullData,l=t._fullLayout;if(oe.isPlotDiv(t)&&o&&l){if(oe.isPlainObject(e)){var s=e;e=s.data,r=s.layout,n=s.config,a=s.frames}var u=!1;if(n){var c=oe.extendDeep({},t._context);t._context=void 0,fA(t,n),u=function t(e,r){var n;for(n in e){var a=e[n],i=r[n];if(a!==i)if(oe.isPlainObject(a)&&oe.isPlainObject(i)){if(t(a,i))return!0}else{if(!Array.isArray(a)||!Array.isArray(i))return!0;if(a.length!==i.length)return!0;for(var o=0;o<a.length;o++)if(a[o]!==i[o]){if(!oe.isPlainObject(a[o])||!oe.isPlainObject(i[o]))return!0;if(t(a[o],i[o]))return!0}}}}(c,t._context)}t.data=e||[],gw.cleanData(t.data,[]),t.layout=r||{},gw.cleanLayout(t.layout),na.supplyDefaults(t);var f=t._fullData,h=t._fullLayout,d=void 0===h.datarevision,p=function(t,e,r,n){if(e.length!==r.length)return{fullReplot:!0,clearCalc:!0};var a,i,o=_e.traceFlags();o.arrays={};var l={getValObject:function(t){return zn.getTraceValObject(i,t)},flags:o,immutable:n,gd:t},s={};for(a=0;a<e.length;a++)i=r[a]._fullInput,s[i.uid]||(s[i.uid]=1,l.autoranged=!!i.xaxis&&(Na.getFromId(t,i.xaxis).autorange||Na.getFromId(t,i.yaxis).autorange),wA(e[a],i,[],l));(o.calc||o.plot||o.calcIfAutorange)&&(o.fullReplot=!0);return o}(t,o,f,d),g=function(t,e,r,n){var a=_e.layoutFlags();a.arrays={},wA(e,r,[],{getValObject:function(t){return zn.getLayoutValObject(r,t)},flags:a,immutable:n,gd:t}),(a.plot||a.calc)&&(a.layoutReplot=!0);return a}(t,l,h,d);bA(t)&&(g.layoutReplot=!0),(p.calc||g.calc)&&(t.calcdata=void 0),g.margins&&gw.clearAxisAutomargins(t);var v=[];if(a&&(t._transitionData={},na.createTransitionData(t),v.push(function(){return iA.addFrames(t,a)})),p.fullReplot||g.layoutReplot||u)t._fullLayout._skipDefaults=!0,v.push(iA.plot);else{for(var m in g.arrays){var y=g.arrays[m];if(y.length){var x=I.getComponentMethod(m,"drawOne");if(x!==oe.noop)for(var b=0;b<y.length;b++)x(t,y[b]);else{var _=I.getComponentMethod(m,"draw");if(_===oe.noop)throw new Error("cannot draw components: "+m);_(t)}}}v.push(na.previousPromises),p.style&&v.push(qw.doTraceStyle),p.colorbars&&v.push(qw.doColorBars),g.legend&&v.push(qw.doLegend),g.layoutstyle&&v.push(qw.layoutStyles),g.axrange&&v.push(qw.doAutoRangeAndConstraints,qw.doTicksRelayout,qw.drawData,qw.finalDraw),g.ticks&&v.push(qw.doTicksRelayout),g.modebar&&v.push(qw.doModeBar),g.camera&&v.push(qw.doCamera)}v.push(na.rehover),(i=oe.syncOrAsync(v,t))&&i.then||(i=Promise.resolve(t))}else i=iA.newPlot(t,e,r,n);return i.then(function(){return t.emit("plotly_react",{data:e,layout:r}),t})},iA.animate=function(t,e,r){if(t=oe.getGraphDiv(t),!oe.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before animating it. For more details, see https://plot.ly/javascript/animations/");var n=t._transitionData;n._frameQueue||(n._frameQueue=[]);var a=(r=na.supplyAnimationDefaults(r)).transition,i=r.frame;function o(t){return Array.isArray(a)?t>=a.length?a[0]:a[t]:a}function l(t){return Array.isArray(i)?t>=i.length?i[0]:i[t]:i}function s(t,e){var r=0;return function(){if(t&&++r===e)return t()}}return void 0===n._frameWaitingCnt&&(n._frameWaitingCnt=0),new Promise(function(i,u){function c(){n._currentFrame&&n._currentFrame.onComplete&&n._currentFrame.onComplete();var e=n._currentFrame=n._frameQueue.shift();if(e){var r=e.name?e.name.toString():null;t._fullLayout._currentFrame=r,n._lastFrameAt=Date.now(),n._timeToNext=e.frameOpts.duration,na.transition(t,e.frame.data,e.frame.layout,gw.coerceTraceIndices(t,e.frame.traces),e.frameOpts,e.transitionOpts).then(function(){e.onComplete&&e.onComplete()}),t.emit("plotly_animatingframe",{name:r,frame:e.frame,animation:{frame:e.frameOpts,transition:e.transitionOpts}})}else t.emit("plotly_animated"),window.cancelAnimationFrame(n._animationRaf),n._animationRaf=null}function f(){t.emit("plotly_animating"),n._lastFrameAt=-1/0,n._timeToNext=0,n._runningTransitions=0,n._currentFrame=null;var e=function(){n._animationRaf=window.requestAnimationFrame(e),Date.now()-n._lastFrameAt>n._timeToNext&&c()};e()}var h,d,p=0;function g(t){return Array.isArray(a)?p>=a.length?t.transitionOpts=a[p]:t.transitionOpts=a[0]:t.transitionOpts=a,p++,t}var v=[],m=void 0===e||null===e,y=Array.isArray(e);if(!m&&!y&&oe.isPlainObject(e))v.push({type:"object",data:g(oe.extendFlat({},e))});else if(m||-1!==["string","number"].indexOf(typeof e))for(h=0;h<n._frames.length;h++)(d=n._frames[h])&&(m||String(d.group)===String(e))&&v.push({type:"byname",name:String(d.name),data:g({name:d.name})});else if(y)for(h=0;h<e.length;h++){var x=e[h];-1!==["number","string"].indexOf(typeof x)?(x=String(x),v.push({type:"byname",name:x,data:g({name:x})})):oe.isPlainObject(x)&&v.push({type:"object",data:g(oe.extendFlat({},x))})}for(h=0;h<v.length;h++)if("byname"===(d=v[h]).type&&!n._frameHash[d.data.name])return oe.warn('animate failure: frame not found: "'+d.data.name+'"'),void u();-1!==["next","immediate"].indexOf(r.mode)&&function(){if(0!==n._frameQueue.length){for(;n._frameQueue.length;){var e=n._frameQueue.pop();e.onInterrupt&&e.onInterrupt()}t.emit("plotly_animationinterrupted",[])}}(),"reverse"===r.direction&&v.reverse();var b=t._fullLayout._currentFrame;if(b&&r.fromcurrent){var _=-1;for(h=0;h<v.length;h++)if("byname"===(d=v[h]).type&&d.name===b){_=h;break}if(_>0&&_<v.length-1){var w=[];for(h=0;h<v.length;h++)d=v[h],("byname"!==v[h].type||h>_)&&w.push(d);v=w}}v.length>0?function(e){if(0!==e.length){for(var a=0;a<e.length;a++){var c;c="byname"===e[a].type?na.computeFrame(t,e[a].name):e[a].data;var h=l(a),d=o(a);d.duration=Math.min(d.duration,h.duration);var p={frame:c,name:e[a].name,frameOpts:h,transitionOpts:d};a===e.length-1&&(p.onComplete=s(i,2),p.onInterrupt=u),n._frameQueue.push(p)}"immediate"===r.mode&&(n._lastFrameAt=-1/0),n._animationRaf||f()}}(v):(t.emit("plotly_animated"),i())})},iA.addFrames=function(t,e,r){if(t=oe.getGraphDiv(t),null===e||void 0===e)return Promise.resolve();if(!oe.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plot.ly/javascript/animations/");var n,a,i,o,l=t._transitionData._frames,s=t._transitionData._frameHash;if(!Array.isArray(e))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+e);var u=l.length+2*e.length,c=[],f={};for(n=e.length-1;n>=0;n--)if(oe.isPlainObject(e[n])){var h=e[n].name,d=(s[h]||f[h]||{}).name,p=e[n].name,g=s[d]||f[d];d&&p&&"number"==typeof p&&g&&sA<5&&(sA++,oe.warn('addFrames: overwriting frame "'+(s[d]||f[d]).name+'" with a frame whose name of type "number" also equates to "'+d+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===sA&&oe.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),f[h]={name:h},c.push({frame:na.supplyFrameDefaults(e[n]),index:r&&void 0!==r[n]&&null!==r[n]?r[n]:u+n})}c.sort(function(t,e){return t.index>e.index?-1:t.index<e.index?1:0});var v=[],m=[],y=l.length;for(n=c.length-1;n>=0;n--){if("number"==typeof(a=c[n].frame).name&&oe.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!a.name)for(;s[a.name="frame "+t._transitionData._counter++];);if(s[a.name]){for(i=0;i<l.length&&(l[i]||{}).name!==a.name;i++);v.push({type:"replace",index:i,value:a}),m.unshift({type:"replace",index:i,value:l[i]})}else o=Math.max(0,Math.min(c[n].index,y)),v.push({type:"insert",index:o,value:a}),m.unshift({type:"delete",index:o}),y++}var x=na.modifyFrames,b=na.modifyFrames,_=[t,m],w=[t,v];return dw&&dw.add(t,x,_,b,w),na.modifyFrames(t,v)},iA.deleteFrames=function(t,e){if(t=oe.getGraphDiv(t),!oe.isPlotDiv(t))throw new Error("This element is not a Plotly plot: "+t);var r,n,a=t._transitionData._frames,i=[],o=[];if(!e)for(e=[],r=0;r<a.length;r++)e.push(r);for((e=e.slice(0)).sort(),r=e.length-1;r>=0;r--)n=e[r],i.push({type:"delete",index:n}),o.unshift({type:"insert",index:n,value:a[n]});var l=na.modifyFrames,s=na.modifyFrames,u=[t,o],c=[t,i];return dw&&dw.add(t,l,u,s,c),na.modifyFrames(t,i)},iA.purge=function(t){var e=(t=oe.getGraphDiv(t))._fullLayout||{},r=t._fullData||[],n=t.calcdata||[];return na.cleanPlot([],{},r,e,n),na.purge(t),Ge.purge(t),e._container&&e._container.remove(),delete t._context,t};var MA={getDelay:function(t){return t._has&&(t._has("gl3d")||t._has("gl2d")||t._has("mapbox"))?500:0},getRedrawFunc:function(t){var e=t._fullLayout||{};if(!(!(e._has&&e._has("polar"))&&t.data&&t.data[0]&&t.data[0].r))return function(){(t.calcdata||[]).forEach(function(t){t[0]&&t[0].t&&t[0].t.cb&&t[0].t.cb()})}}},TA=Ne.EventEmitter;var kA=function(t){var e=t.emitter||new TA,r=new Promise(function(n,a){var i=window.Image,o=t.svg,l=t.format||"png";if(oe.isIE()&&"svg"!==l){var s=new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.");return a(s),t.promise?r:e.emit("error",s)}var u=t.canvas,c=t.scale||1,f=c*(t.width||300),h=c*(t.height||150),d=u.getContext("2d"),p=new i,g="data:image/svg+xml,"+encodeURIComponent(o);u.width=f,u.height=h,p.onload=function(){var r;switch("svg"!==l&&d.drawImage(p,0,0,f,h),l){case"jpeg":r=u.toDataURL("image/jpeg");break;case"png":r=u.toDataURL("image/png");break;case"webp":r=u.toDataURL("image/webp");break;case"svg":r=g;break;default:var i="Image format is not jpeg, png, svg or webp.";if(a(new Error(i)),!t.promise)return e.emit("error",i)}n(r),t.promise||e.emit("success",r)},p.onerror=function(r){if(a(r),!t.promise)return e.emit("error",r)},p.src=g});return t.promise?r:e},EA=/"/g,CA=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");var SA=function(t,e,r){var a,i=t._fullLayout,o=i._paper,l=i._toppaper,s=i.width,u=i.height;o.insert("rect",":first-child").call(Jr.setRect,0,0,s,u).call($e.fill,i.paper_bgcolor);var c=i._basePlotModules||[];for(a=0;a<c.length;a++){var f=c[a];f.toSVG&&f.toSVG(t)}if(l){var h=l.node().childNodes,d=Array.prototype.slice.call(h);for(a=0;a<d.length;a++){var p=d[a];p.childNodes.length&&o.node().appendChild(p)}}i._draggers&&i._draggers.remove(),o.node().style.background="",o.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var t=n.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){t.style({visibility:null,display:null});var e=this.style.fontFamily;e&&-1!==e.indexOf('"')&&t.style("font-family",e.replace(EA,"TOBESTRIPPED"))}else t.remove()}),o.selectAll(".point,.scatterpts").each(function(){var t=n.select(this),e=this.style.fill;e&&-1!==e.indexOf("url(")&&t.style("fill",e.replace(EA,"TOBESTRIPPED"))}),"pdf"!==e&&"eps"!==e||o.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),o.node().setAttributeNS(Ce.xmlns,"xmlns",Ce.svg),o.node().setAttributeNS(Ce.xmlns,"xmlns:xlink",Ce.xlink),"svg"===e&&r&&(o.attr("width",r*s),o.attr("height",r*u),o.attr("viewBox","0 0 "+s+" "+u));var g=(new window.XMLSerializer).serializeToString(o.node());return g=function(t){var e=n.select("body").append("div").style({display:"none"}).html(""),r=t.replace(/(&[^;]*;)/gi,function(t){return"&lt;"===t?"&#60;":"&rt;"===t?"&#62;":-1!==t.indexOf("<")||-1!==t.indexOf(">")?"":e.html(t).text()});return e.remove(),r}(g),g=(g=g.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(CA,"'"),oe.isIE()&&(g=(g=(g=g.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),g},LA={format:{valType:"enumerated",values:["png","jpeg","webp","svg"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}},OA=/^data:image\/\w+;base64,/;var DA=function(t,e){var r,n,a;function i(t){return!(t in e)||oe.validate(e[t],LA[t])}if(e=e||{},oe.isPlainObject(t)?(r=t.data||[],n=t.layout||{},a=t.config||{}):(t=oe.getGraphDiv(t),r=oe.extendDeep([],t.data),n=oe.extendDeep({},t.layout),a=t._context),!i("width")||!i("height"))throw new Error("Height and width should be pixel values.");if(!i("format"))throw new Error("Image format is not jpeg, png, svg or webp.");var o={};function l(t,r){return oe.coerce(e,o,LA,t,r)}var s=l("format"),u=l("width"),c=l("height"),f=l("scale"),h=l("setBackground"),d=l("imageDataOnly"),p=document.createElement("div");p.style.position="absolute",p.style.left="-5000px",document.body.appendChild(p);var g=oe.extendFlat({},n);u&&(g.width=u),c&&(g.height=c);var v=oe.extendFlat({},a,{staticPlot:!0,setBackground:h}),m=MA.getRedrawFunc(p);function y(){return new Promise(function(t){setTimeout(t,MA.getDelay(p._fullLayout))})}function x(){return new Promise(function(t,e){var r=SA(p,s,f),n=p._fullLayout.width,a=p._fullLayout.height;if(iA.purge(p),document.body.removeChild(p),"svg"===s)return t(d?r:"data:image/svg+xml,"+encodeURIComponent(r));var i=document.createElement("canvas");i.id=oe.randstr(),kA({format:s,width:n,height:a,scale:f,canvas:i,svg:r,promise:!0}).then(t).catch(e)})}return new Promise(function(t,e){iA.plot(p,r,g,v).then(m).then(y).then(x).then(function(e){t(function(t){return d?t.replace(OA,""):t}(e))}).catch(function(t){e(t)})})},RA=oe.isPlainObject,PA=Array.isArray,IA=oe.isArrayOrTypedArray;function BA(t,e,r,n,a,i){i=i||[];for(var o=Object.keys(t),l=0;l<o.length;l++){var s=o[l];if("transforms"!==s){var u=i.slice();u.push(s);var c=t[s],f=e[s],h=UA(r,s),d="info_array"===(h||{}).valType,p="colorscale"===(h||{}).valType,g=(h||{}).items;if(jA(r,s))if(RA(c)&&RA(f))BA(c,f,h,n,a,u);else if(d&&PA(c)){c.length>f.length&&n.push(NA("unused",a,u.concat(f.length)));var v,m,y,x,b,_=f.length,w=Array.isArray(g);if(w&&(_=Math.min(_,g.length)),2===h.dimensions)for(m=0;m<_;m++)if(PA(c[m])){c[m].length>f[m].length&&n.push(NA("unused",a,u.concat(m,f[m].length)));var A=f[m].length;for(v=0;v<(w?Math.min(A,g[m].length):A);v++)y=w?g[m][v]:g,x=c[m][v],b=f[m][v],oe.validate(x,y)?b!==x&&b!==+x&&n.push(NA("dynamic",a,u.concat(m,v),x,b)):n.push(NA("value",a,u.concat(m,v),x))}else n.push(NA("array",a,u.concat(m),c[m]));else for(m=0;m<_;m++)y=w?g[m]:g,x=c[m],b=f[m],oe.validate(x,y)?b!==x&&b!==+x&&n.push(NA("dynamic",a,u.concat(m),x,b)):n.push(NA("value",a,u.concat(m),x))}else if(h.items&&!d&&PA(c)){var M,T,k=g[Object.keys(g)[0]],E=[];for(M=0;M<f.length;M++){var C=f[M]._index||M;(T=u.slice()).push(C),RA(c[C])&&RA(f[M])&&(E.push(C),BA(c[C],f[M],k,n,a,T))}for(M=0;M<c.length;M++)(T=u.slice()).push(M),RA(c[M])?-1===E.indexOf(M)&&n.push(NA("unused",a,T)):n.push(NA("object",a,T,c[M]))}else!RA(c)&&RA(f)?n.push(NA("object",a,u,c)):IA(c)||!IA(f)||d||p?s in e?oe.validate(c,h)?"enumerated"===h.valType&&(h.coerceNumber&&c!==+f||c!==f)&&n.push(NA("dynamic",a,u,c,f)):n.push(NA("value",a,u,c)):n.push(NA("unused",a,u,c)):n.push(NA("array",a,u,c));else n.push(NA("schema",a,u))}}return n}var FA={object:function(t,e){return("layout"===t&&""===e?"The layout argument":"data"===t[0]&&""===e?"Trace "+t[1]+" in the data argument":zA(t)+"key "+e)+" must be linked to an object container"},array:function(t,e){return("data"===t?"The data argument":zA(t)+"key "+e)+" must be linked to an array container"},schema:function(t,e){return zA(t)+"key "+e+" is not part of the schema"},unused:function(t,e,r){var n=RA(r)?"container":"key";return zA(t)+n+" "+e+" did not get coerced"},dynamic:function(t,e,r,n){return[zA(t)+"key",e,"(set to '"+r+"')","got reset to","'"+n+"'","during defaults."].join(" ")},invisible:function(t){return"Trace "+t[1]+" got defaulted to be not visible"},value:function(t,e,r){return[zA(t)+"key "+e,"is set to an invalid value ("+r+")"].join(" ")}};function zA(t){return PA(t)?"In data trace "+t[1]+", ":"In "+t+", "}function NA(t,e,r,n,a){var i,o;r=r||"",PA(e)?(i=e[0],o=e[1]):(i=e,o=null);var l=function(t){if(!PA(t))return String(t);for(var e="",r=0;r<t.length;r++){var n=t[r];"number"==typeof n?e=e.substr(0,e.length-1)+"["+n+"]":e+=n,r<t.length-1&&(e+=".")}return e}(r),s=FA[t](e,l,n,a);return oe.log(s),{code:t,container:i,trace:o,path:r,astr:l,msg:s}}function jA(t,e){var r=HA(e),n=r.keyMinusId,a=r.id;return!!(n in t&&t[n]._isSubplotObj&&a)||e in t}function UA(t,e){return t[HA(e).keyMinusId]}var VA=oe.counterRegex("([a-z]+)");function HA(t){var e=t.match(VA);return{keyMinusId:e&&e[1],id:e&&e[2]}}var qA=function(t,e){var r=document.createElement("a"),n="download"in r,a=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);return new Promise(function(i,o){if("undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)&&o(new Error("IE < 10 unsupported")),a&&(document.location.href="data:application/octet-stream"+t.slice(t.search(/[,;]/)),i(e)),e||(e="download"),n&&(r.href=t,r.download=e,document.body.appendChild(r),r.click(),document.body.removeChild(r),i(e)),"undefined"!=typeof navigator&&navigator.msSaveBlob){var l=t.split(/^data:image\/svg\+xml,/)[1],s=decodeURIComponent(l);navigator.msSaveBlob(new Blob([s]),e),i(e)}o(new Error("download error"))})};var GA=function(t,e){return(e=e||{}).format=e.format||"png",new Promise(function(r,n){t._snapshotInProgress&&n(new Error("Snapshotting already in progress.")),oe.isIE()&&"svg"!==e.format&&n(new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.")),t._snapshotInProgress=!0;var a=DA(t,e),i=e.filename||t.fn||"newplot";i+="."+e.format,a.then(function(e){return t._snapshotInProgress=!1,qA(e,i)}).then(function(t){r(t)}).catch(function(e){t._snapshotInProgress=!1,n(e)})})},XA={};XA.plot=iA.plot,XA.newPlot=iA.newPlot,XA.restyle=iA.restyle,XA.relayout=iA.relayout,XA.redraw=iA.redraw,XA.update=iA.update,XA.react=iA.react,XA.extendTraces=iA.extendTraces,XA.prependTraces=iA.prependTraces,XA.addTraces=iA.addTraces,XA.deleteTraces=iA.deleteTraces,XA.moveTraces=iA.moveTraces,XA.purge=iA.purge,XA.addFrames=iA.addFrames,XA.deleteFrames=iA.deleteFrames,XA.animate=iA.animate,XA.setPlotConfig=iA.setPlotConfig,XA.toImage=DA,XA.validate=function(t,e){var r,n,a=zn.get(),i=[],o={_context:oe.extendFlat({},A)};PA(t)?(o.data=oe.extendDeep([],t),r=t):(o.data=[],r=[],i.push(NA("array","data"))),RA(e)?(o.layout=oe.extendDeep({},e),n=e):(o.layout={},n={},arguments.length>1&&i.push(NA("object","layout"))),na.supplyDefaults(o);for(var l=o._fullData,s=r.length,u=0;u<s;u++){var c=r[u],f=["data",u];if(RA(c)){var h=l[u],d=h.type,p=a.traces[d].attributes;p.type={valType:"enumerated",values:[d]},!1===h.visible&&!1!==c.visible&&i.push(NA("invisible",f)),BA(c,h,p,i,f);var g=c.transforms,v=h.transforms;if(g){PA(g)||i.push(NA("array",f,["transforms"])),f.push("transforms");for(var m=0;m<g.length;m++){var y=["transforms",m],x=g[m].type;if(RA(g[m])){var b=a.transforms[x]?a.transforms[x].attributes:{};b.type={valType:"enumerated",values:Object.keys(a.transforms)},BA(g[m],v[m],b,i,f,y)}else i.push(NA("object",f,y))}}}else i.push(NA("object",f))}return BA(n,o._fullLayout,function(t,e){for(var r=0;r<e.length;r++){var n=e[r].type,a=t.traces[n].layoutAttributes;a&&oe.extendFlat(t.layout.layoutAttributes,a)}return t.layout.layoutAttributes}(a,l),i,"layout"),0===i.length?void 0:i},XA.downloadImage=GA;var YA=oe.extendFlat,WA=oe.extendDeep;function ZA(t){var e;switch(t){case"themes__thumb":e={autosize:!0,width:150,height:150,title:"",showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":e={title:"",hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:e={}}return e}var JA=function(t,e){var r;t.framework&&t.framework.isPolar&&(t=t.framework.getConfig());var n,a=t.data,i=t.layout,o=WA([],a),l=WA({},i,ZA(e.tileClass)),s=t._context||{};if(e.width&&(l.width=e.width),e.height&&(l.height=e.height),"thumbnail"===e.tileClass||"themes__thumb"===e.tileClass){l.annotations=[];var u=Object.keys(l);for(r=0;r<u.length;r++)n=u[r],["xaxis","yaxis","zaxis"].indexOf(n.slice(0,5))>-1&&(l[u[r]].title="");for(r=0;r<o.length;r++){var c=o[r];c.showscale=!1,c.marker&&(c.marker.showscale=!1),"pie"===c.type&&(c.textposition="none")}}if(Array.isArray(e.annotations))for(r=0;r<e.annotations.length;r++)l.annotations.push(e.annotations[r]);var f=Object.keys(l).filter(function(t){return t.match(/^scene\d*$/)});if(f.length){var h={};for("thumbnail"===e.tileClass&&(h={title:"",showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),r=0;r<f.length;r++){var d=l[f[r]];d.xaxis||(d.xaxis={}),d.yaxis||(d.yaxis={}),d.zaxis||(d.zaxis={}),YA(d.xaxis,h),YA(d.yaxis,h),YA(d.zaxis,h),d._scene=null}}var p=document.createElement("div");e.tileClass&&(p.className=e.tileClass);var g={gd:p,td:p,layout:l,data:o,config:{staticPlot:void 0===e.staticPlot||e.staticPlot,plotGlPixelRatio:void 0===e.plotGlPixelRatio?2:e.plotGlPixelRatio,displaylogo:e.displaylogo||!1,showLink:e.showLink||!1,showTips:e.showTips||!1,mapboxAccessToken:s.mapboxAccessToken}};return"transparent"!==e.setBackground&&(g.config.setBackground=e.setBackground||"opaque"),g.gd.defaultLayout=ZA(e.tileClass),g},QA=Ne.EventEmitter;var $A=function(t,e){var r=new QA,n=JA(t,{format:"png"}),a=n.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var i=MA.getRedrawFunc(a);return I.call("plot",a,n.data,n.layout,n.config).then(i).then(function(){var t=MA.getDelay(a._fullLayout);setTimeout(function(){var t=SA(a),n=document.createElement("canvas");n.id=oe.randstr(),(r=kA({format:e.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:n,emitter:r,svg:t})).clean=function(){a&&document.body.removeChild(a)}},t)}).catch(function(t){r.emit("error",t)}),r},KA={getDelay:MA.getDelay,getRedrawFunc:MA.getRedrawFunc,clone:JA,toSVG:SA,svgToImg:kA,toImage:$A,downloadImage:GA},tM=function(t,e){for(var r=0;r<t.length;r++)t[r].i=r;oe.mergeArray(e.text,t,"tx"),oe.mergeArray(e.hovertext,t,"htx"),oe.mergeArray(e.customdata,t,"data"),oe.mergeArray(e.textposition,t,"tp"),e.textfont&&(oe.mergeArray(e.textfont.size,t,"ts"),oe.mergeArray(e.textfont.color,t,"tc"),oe.mergeArray(e.textfont.family,t,"tf"));var n=e.marker;if(n){oe.mergeArray(n.size,t,"ms"),oe.mergeArray(n.opacity,t,"mo"),oe.mergeArray(n.symbol,t,"mx"),oe.mergeArray(n.color,t,"mc");var a=n.line;n.line&&(oe.mergeArray(a.color,t,"mlc"),oe.mergeArray(a.width,t,"mlw"));var i=n.gradient;i&&"none"!==i.type&&(oe.mergeArray(i.type,t,"mgt"),oe.mergeArray(i.color,t,"mgc"))}},eM=function(t,e){oe.isArrayOrTypedArray(e.selectedpoints)&&oe.tagSelected(t,e)},rM=function(t){Zr.hasLines(t)&&yr(t,"line")&&ir(t,t.line.color,"line","c"),Zr.hasMarkers(t)&&(yr(t,"marker")&&ir(t,t.marker.color,"marker","c"),yr(t,"marker.line")&&ir(t,t.marker.line.color,"marker.line","c"))},nM=oe.isArrayOrTypedArray,aM=i.BADNUM;function iM(t,e,r,n,a,i,o){var l=e._length;r._minDtick=0,n._minDtick=0;var s={padded:!0},u={padded:!0};o&&(s.ppad=u.ppad=o),!("tozerox"===e.fill||"tonextx"===e.fill&&t.firstscatter)||a[0]===a[l-1]&&i[0]===i[l-1]?(e.error_y||{}).visible||-1===["tonexty","tozeroy"].indexOf(e.fill)&&(Zr.hasMarkers(e)||Zr.hasText(e))||(s.padded=!1,s.ppad=0):s.tozero=!0,!("tozeroy"===e.fill||"tonexty"===e.fill&&t.firstscatter)||a[0]===a[l-1]&&i[0]===i[l-1]?-1!==["tonextx","tozerox"].indexOf(e.fill)&&(u.padded=!1):u.tozero=!0,Na.expand(r,a,s),Na.expand(n,i,u)}function oM(t,e){if(Zr.hasMarkers(t)){var r,n=t.marker,a=1.6*(t.marker.sizeref||1);if(r="area"===t.marker.sizemode?function(t){return Math.max(Math.sqrt((t||0)/a),3)}:function(t){return Math.max((t||0)/a,3)},nM(n.size)){var i={type:"linear"};Na.setConvert(i);for(var o=i.makeCalcdata(t.marker,"size"),l=new Array(e),s=0;s<e;s++)l[s]=r(o[s]);return l}return r(n.size)}}var lM=function(t,e){var r=Na.getFromId(t,e.xaxis||"x"),n=Na.getFromId(t,e.yaxis||"y"),i=r.makeCalcdata(e,"x"),o=n.makeCalcdata(e,"y"),l=e._length,s=new Array(l);iM(t,e,r,n,i,o,oM(e,l));for(var u=0;u<l;u++)s[u]=a(i[u])&&a(o[u])?{x:i[u],y:o[u]}:{x:aM,y:aM},e.ids&&(s[u].id=String(e.ids[u]));return tM(s,e),rM(e),eM(s,e),t.firstscatter=!1,s},sM=oM,uM=iM,cM=function(t){for(var e=0;e<t.length;e++){var r=t[e];if("scatter"===r.type){var n=r.fill;if("none"!==n&&"toself"!==n&&(r.opacity=void 0,"tonexty"===n||"tonextx"===n))for(var a=e-1;a>=0;a--){var i=t[a];if("scatter"===i.type&&i.xaxis===r.xaxis&&i.yaxis===r.yaxis){i.opacity=void 0;break}}}}},fM=function(t,e){var r=e[0].trace,n=r.marker,i="cb"+r.uid;if(t._fullLayout._infolayer.selectAll("."+i).remove(),void 0!==n&&n.showscale){var o=n.color,l=n.cmin,s=n.cmax;a(l)||(l=oe.aggNums(Math.min,null,o)),a(s)||(s=oe.aggNums(Math.max,null,o));var u=e[0].t.cb=Sy(t,i),c=br.makeColorScaleFunc(br.extractScale(n.colorscale,l,s),{noNumericCheck:!0});u.fillcolor(c).filllevels({start:l,end:s,size:(s-l)/254}).options(n.colorbar)()}else na.autoMargin(t,i)},hM=oe.isArrayOrTypedArray,dM=function(t,e,r,n){var a=!1;if(e.marker){var i=e.marker.color,o=(e.marker.line||{}).color;i&&!hM(i)?a=i:o&&!hM(o)&&(a=o)}n("fillcolor",$e.addOpacity((e.line||{}).color||a||r,.5))},pM=oe.isArrayOrTypedArray,gM=function(t,e,r,n,a,i){var o=(t.marker||{}).color;(a("line.color",r),yr(t,"line"))?mr(t,e,n,a,{prefix:"line.",cLetter:"c"}):a("line.color",!pM(o)&&o||r);a("line.width"),(i||{}).noDash||a("line.dash")},vM=function(t,e,r){"spline"===r("line.shape")&&r("line.smoothing")},mM=function(t,e,r,n,a,i){var o=Zr.isBubble(t),l=(t.line||{}).color;(i=i||{},l&&(r=l),a("marker.symbol"),a("marker.opacity",o?.7:1),a("marker.size"),a("marker.color",r),yr(t,"marker")&&mr(t,e,n,a,{prefix:"marker.",cLetter:"c"}),i.noSelect||(a("selected.marker.color"),a("unselected.marker.color"),a("selected.marker.size"),a("unselected.marker.size")),i.noLine||(a("marker.line.color",l&&!Array.isArray(l)&&e.marker.color!==l?l:o?$e.background:$e.defaultLine),yr(t,"marker.line")&&mr(t,e,n,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width",o?1:0)),o&&(a("marker.sizeref"),a("marker.sizemin"),a("marker.sizemode")),i.gradient)&&("none"!==a("marker.gradient.type")&&a("marker.gradient.color"))},yM=function(t,e,r,n){var a,i=n("x"),o=n("y");if(I.getComponentMethod("calendars","handleTraceDefaults")(t,e,["x","y"],r),i)o?a=Math.min(i.length,o.length):(a=i.length,n("y0"),n("dy"));else{if(!o)return 0;a=e.y.length,n("x0"),n("dx")}return e._length=a,a},xM=function(t,e,r){var n=Array.isArray(r)?function(t){r.push(t)}:function(t){r.text=t},a=oe.extractOption(t,e,"htx","hovertext");if(bM(a))return n(a);var i=oe.extractOption(t,e,"tx","text");return bM(i)?n(i):void 0};function bM(t){return t||0===t}var _M=function(t,e){var r,n;if("lines"===t.mode)return(r=t.line.color)&&$e.opacity(r)?r:t.fillcolor;if("none"===t.mode)return t.fill?t.fillcolor:"";var a=e.mcc||(t.marker||{}).color,i=e.mlcc||((t.marker||{}).line||{}).color;return(n=a&&$e.opacity(a)?a:i&&$e.opacity(i)&&(e.mlw||((t.marker||{}).line||{}).width)?i:"")?$e.opacity(n)<.3?$e.addOpacity(n,.3):n:(r=(t.line||{}).color)&&$e.opacity(r)&&Zr.hasLines(t)&&t.line.width?r:t.fillcolor},wM=i.BADNUM,AM=oe.segmentsIntersect,MM=oe.constrain,TM=function(t,e){var r,n,a,i,o,l,s,u,c,f,h,d,p,g,v,m,y=e.xaxis,x=e.yaxis,b=e.simplify,_=e.connectGaps,w=e.baseTolerance,A=e.shape,M="linear"===A,T=[],k=En.minTolerance,E=new Array(t.length),C=0;function S(e){var r=t[e],n=y.c2p(r.x),a=x.c2p(r.y);return n===wM||a===wM?r.intoCenter||!1:[n,a]}function L(t){var e=t[0]/y._length,r=t[1]/x._length;return(1+En.toleranceGrowth*Math.max(0,-e,e-1,-r,r-1))*w}function O(t,e){var r=t[0]-e[0],n=t[1]-e[1];return Math.sqrt(r*r+n*n)}b||(w=k=-1);var D,R,P,I,B,F,z,N=En.maxScreensAway,j=-y._length*N,U=y._length*(1+N),V=-x._length*N,H=x._length*(1+N),q=[[j,V,U,V],[U,V,U,H],[U,H,j,H],[j,H,j,V]];function G(t){if(t[0]<j||t[0]>U||t[1]<V||t[1]>H)return[MM(t[0],j,U),MM(t[1],V,H)]}function X(t,e){return t[0]===e[0]&&(t[0]===j||t[0]===U)||(t[1]===e[1]&&(t[1]===V||t[1]===H)||void 0)}function Y(t,e,r){return function(n,a){var i=G(n),o=G(a),l=[];if(i&&o&&X(i,o))return l;i&&l.push(i),o&&l.push(o);var s=2*oe.constrain((n[t]+a[t])/2,e,r)-((i||n)[t]+(o||a)[t]);s&&((i&&o?s>0==i[t]>o[t]?i:o:i||o)[t]+=s);return l}}function W(t){var e=t[0],r=t[1],n=e===E[C-1][0],a=r===E[C-1][1];if(!n||!a)if(C>1){var i=e===E[C-2][0],o=r===E[C-2][1];n&&(e===j||e===U)&&i?o?C--:E[C-1]=t:a&&(r===V||r===H)&&o?i?C--:E[C-1]=t:E[C++]=t}else E[C++]=t}function Z(t){E[C-1][0]!==t[0]&&E[C-1][1]!==t[1]&&W([P,I]),W(t),B=null,P=I=0}function J(t){if(D=t[0]<j?j:t[0]>U?U:0,R=t[1]<V?V:t[1]>H?H:0,D||R){if(C)if(B){var e=z(B,t);e.length>1&&(Z(e[0]),E[C++]=e[1])}else F=z(E[C-1],t)[0],E[C++]=F;else E[C++]=[D||t[0],R||t[1]];var r=E[C-1];D&&R&&(r[0]!==D||r[1]!==R)?(B&&(P!==D&&I!==R?W(P&&I?(n=B,i=(a=t)[0]-n[0],o=(a[1]-n[1])/i,(n[1]*a[0]-a[1]*n[0])/i>0?[o>0?j:U,H]:[o>0?U:j,V]):[P||D,I||R]):P&&I&&W([P,I])),W([D,R])):P-D&&I-R&&W([D||P,R||I]),B=t,P=D,I=R}else B&&Z(z(B,t)[0]),E[C++]=t;var n,a,i,o}for("linear"===A||"spline"===A?z=function(t,e){for(var r=[],n=0,a=0;a<4;a++){var i=q[a],o=AM(t[0],t[1],e[0],e[1],i[0],i[1],i[2],i[3]);o&&(!n||Math.abs(o.x-r[0][0])>1||Math.abs(o.y-r[0][1])>1)&&(o=[o.x,o.y],n&&O(o,t)<O(r[0],t)?r.unshift(o):r.push(o),n++)}return r}:"hv"===A||"vh"===A?z=function(t,e){var r=[],n=G(t),a=G(e);return n&&a&&X(n,a)?r:(n&&r.push(n),a&&r.push(a),r)}:"hvh"===A?z=Y(0,j,U):"vhv"===A&&(z=Y(1,V,H)),r=0;r<t.length;r++)if(n=S(r)){for(C=0,B=null,J(n),r++;r<t.length;r++){if(!(i=S(r))){if(_)continue;break}if(M){if(!((f=O(i,n))<L(i)*k)){for(u=[(i[0]-n[0])/f,(i[1]-n[1])/f],o=n,h=f,d=g=v=0,s=!1,a=i,r++;r<t.length;r++){if(!(l=S(r))){if(_)continue;break}if(m=(c=[l[0]-n[0],l[1]-n[1]])[0]*u[1]-c[1]*u[0],g=Math.min(g,m),(v=Math.max(v,m))-g>L(l))break;a=l,(p=c[0]*u[0]+c[1]*u[1])>h?(h=p,i=l,s=!1):p<d&&(d=p,o=l,s=!0)}if(s?(J(i),a!==o&&J(o)):(o!==n&&J(o),a!==i&&J(i)),J(a),r>=t.length||!l)break;J(l),n=l}}else J(i)}B&&W([P||B[0],I||B[1]]),T.push(E.slice(0,C))}return T},kM=function(t,e,r){var n,a,i=null;for(a=0;a<r.length;++a)!0===(n=r[a][0].trace).visible?(n._nexttrace=null,-1!==["tonextx","tonexty","tonext"].indexOf(n.fill)&&(n._prevtrace=i,i&&(i._nexttrace=n)),i=n):n._prevtrace=n._nexttrace=null},EM=Yi.tester;function CM(t,e,r,a,i,o,l){var s,u;!function(t,e,r,a,i){var o=r.xaxis,l=r.yaxis,s=n.extent(oe.simpleMap(o.range,o.r2c)),u=n.extent(oe.simpleMap(l.range,l.r2c)),c=a[0].trace;if(!Zr.hasMarkers(c))return;var f=c.marker.maxdisplayed;if(0===f)return;var h=a.filter(function(t){return t.x>=s[0]&&t.x<=s[1]&&t.y>=u[0]&&t.y<=u[1]}),d=Math.ceil(h.length/f),p=0;i.forEach(function(t,r){var n=t[0].trace;Zr.hasMarkers(n)&&n.marker.maxdisplayed>0&&r<e&&p++});var g=Math.round(p*d/3+Math.floor(p/3)*d/7.1);a.forEach(function(t){delete t.vis}),h.forEach(function(t,e){0===Math.round((e+g)%d)&&(t.vis=!0)})}(0,e,r,a,i);var c=!!l&&l.duration>0;function f(t){return c?t.transition():t}var h=r.xaxis,d=r.yaxis,p=a[0].trace,g=p.line,v=n.select(o);if(I.getComponentMethod("errorbars","plot")(v,r,l),!0===p.visible){var m,y;f(v).style("opacity",p.opacity);var x=p.fill.charAt(p.fill.length-1);"x"!==x&&"y"!==x&&(x=""),r.isRangePlot||(a[0].node3=v);var b="",_=[],w=p._prevtrace;w&&(b=w._prevRevpath||"",y=w._nextFill,_=w._polygons);var A,M,T,k,E,C,S,L,O,D="",R="",P=[],B=oe.noop;if(m=p._ownFill,Zr.hasLines(p)||"none"!==p.fill){for(y&&y.datum(a),-1!==["hv","vh","hvh","vhv"].indexOf(g.shape)?(T=Jr.steps(g.shape),k=Jr.steps(g.shape.split("").reverse().join(""))):T=k="spline"===g.shape?function(t){var e=t[t.length-1];return t.length>1&&t[0][0]===e[0]&&t[0][1]===e[1]?Jr.smoothclosed(t.slice(1),g.smoothing):Jr.smoothopen(t,g.smoothing)}:function(t){return"M"+t.join("L")},E=function(t){return k(t.reverse())},P=TM(a,{xaxis:h,yaxis:d,connectGaps:p.connectgaps,baseTolerance:Math.max(g.width||1,3)/4,shape:g.shape,simplify:g.simplify}),O=p._polygons=new Array(P.length),u=0;u<P.length;u++)p._polygons[u]=EM(P[u]);P.length&&(C=P[0][0],L=(S=P[P.length-1])[S.length-1]),B=function(t){return function(e){if(A=T(e),M=E(e),D?x?(D+="L"+A.substr(1),R=M+"L"+R.substr(1)):(D+="Z"+A,R=M+"Z"+R):(D=A,R=M),Zr.hasLines(p)&&e.length>1){var r=n.select(this);if(r.datum(a),t)f(r.style("opacity",0).attr("d",A).call(Jr.lineGroupStyle)).style("opacity",1);else{var i=f(r);i.attr("d",A),Jr.singleLineStyle(a,i)}}}}}var F=v.selectAll(".js-line").data(P);f(F.exit()).style("opacity",0).remove(),F.each(B(!1)),F.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(Jr.lineGroupStyle).each(B(!0)),Jr.setClipUrl(F,r.layerClipId),P.length?(m?C&&L&&(x?("y"===x?C[1]=L[1]=d.c2p(0,!0):"x"===x&&(C[0]=L[0]=h.c2p(0,!0)),f(m).attr("d","M"+L+"L"+C+"L"+D.substr(1)).call(Jr.singleFillStyle)):f(m).attr("d",D+"Z").call(Jr.singleFillStyle)):y&&("tonext"===p.fill.substr(0,6)&&D&&b?("tonext"===p.fill?f(y).attr("d",D+"Z"+b+"Z").call(Jr.singleFillStyle):f(y).attr("d",D+"L"+b.substr(1)+"Z").call(Jr.singleFillStyle),p._polygons=p._polygons.concat(_)):(N(y),p._polygons=null)),p._prevRevpath=R,p._prevPolygons=O):(m?N(m):y&&N(y),p._polygons=p._prevRevpath=p._prevPolygons=null);var z=v.selectAll(".points");s=z.data([a]),z.each(q),s.enter().append("g").classed("points",!0).each(q),s.exit().remove(),s.each(function(t){var e=!1===t[0].trace.cliponaxis;Jr.setClipUrl(n.select(this),e?null:r.layerClipId)})}function N(t){f(t).attr("d","M0,0Z")}function j(t){return t.filter(function(t){return t.vis})}function U(t){return t.id}function V(t){if(t.ids)return U}function H(){return!1}function q(e){var a,i=e[0].trace,o=n.select(this),l=Zr.hasMarkers(i),s=Zr.hasText(i),u=V(i),p=H,g=H;l&&(p=i.marker.maxdisplayed||i._needsCull?j:oe.identity),s&&(g=i.marker.maxdisplayed||i._needsCull?j:oe.identity);var v=(a=o.selectAll("path.point").data(p,u)).enter().append("path").classed("point",!0);c&&v.call(Jr.pointStyle,i,t).call(Jr.translatePoints,h,d).style("opacity",0).transition().style("opacity",1);var m=l&&Jr.tryColorscale(i.marker,""),y=l&&Jr.tryColorscale(i.marker,"line");a.order(),a.each(function(e){var a=n.select(this),o=f(a);Jr.translatePoint(e,o,h,d)?(Jr.singlePointStyle(e,o,i,m,y,t),r.layerClipId&&Jr.hideOutsideRangePoint(e,o,h,d,i.xcalendar,i.ycalendar),i.customdata&&a.classed("plotly-customdata",null!==e.data&&void 0!==e.data)):o.remove()}),c?a.exit().transition().style("opacity",0).remove():a.exit().remove(),(a=o.selectAll("g").data(g,u)).enter().append("g").classed("textpoint",!0).append("text"),a.order(),a.each(function(t){var e=n.select(this),a=f(e.select("text"));Jr.translatePoint(t,a,h,d)?r.layerClipId&&Jr.hideOutsideRangePoint(t,e,h,d,i.xcalendar,i.ycalendar):e.remove()}),a.selectAll("text").call(Jr.textPointStyle,i,t).each(function(t){var e=h.c2p(t.x),r=d.c2p(t.y);n.select(this).selectAll("tspan.line").each(function(){f(n.select(this)).attr({x:e,y:r})})}),a.exit().remove()}}function SM(t,e,r){var n=t.selectAll("path.point"),a=t.selectAll("text");Jr.pointStyle(n,e,r),Jr.textPointStyle(a,e,r),Jr.selectedPointStyle(n,e),Jr.selectedTextStyle(a,e)}var LM=function(t,e){var r=e?e[0].node3:n.select(t).selectAll("g.trace.scatter");r.style("opacity",function(t){return t[0].trace.opacity}),r.selectAll("g.points").each(function(e){SM(n.select(this),e.trace||e[0].trace,t)}),r.selectAll("g.trace path.js-line").call(Jr.lineGroupStyle),r.selectAll("g.trace path.js-fill").call(Jr.fillGroupStyle),I.getComponentMethod("errorbars","style")(r)},OM={};OM.hasLines=Zr.hasLines,OM.hasMarkers=Zr.hasMarkers,OM.hasText=Zr.hasText,OM.isBubble=Zr.isBubble,OM.attributes=Ln,OM.supplyDefaults=function(t,e,r,n){function a(r,n){return oe.coerce(t,e,Ln,r,n)}var i=yM(t,e,n,a),o=i<En.PTS_LINESONLY?"lines+markers":"lines";if(i){a("text"),a("hovertext"),a("mode",o),Zr.hasLines(e)&&(gM(t,e,r,n,a),vM(0,0,a),a("connectgaps"),a("line.simplify")),Zr.hasMarkers(e)&&mM(t,e,r,n,a,{gradient:!0}),Zr.hasText(e)&&function(t,e,r,n,a){a=a||{},n("textposition"),oe.coerceFont(n,"textfont",r.font),a.noSelect||(n("selected.textfont.color"),n("unselected.textfont.color"))}(0,0,n,a);var l=[];(Zr.hasMarkers(e)||Zr.hasText(e))&&(a("cliponaxis"),a("marker.maxdisplayed"),l.push("points")),a("fill"),"none"!==e.fill&&(dM(0,e,r,a),Zr.hasLines(e)||vM(0,0,a)),"tonext"!==e.fill&&"toself"!==e.fill||l.push("fills"),a("hoveron",l.join("+")||"points");var s=I.getComponentMethod("errorbars","supplyDefaults");s(t,e,r,{axis:"y"}),s(t,e,r,{axis:"x",inherit:"y"}),oe.coerceSelectionMarkerOpacity(e,a)}else e.visible=!1},OM.cleanData=cM,OM.calc=lM,OM.arraysToCalcdata=tM,OM.plot=function(t,e,r,a,i){var o,l,s,u,c=e.plot.select("g.scatterlayer"),f=!a,h=!!a&&a.duration>0;for((s=c.selectAll("g.trace").data(r,function(t){return t[0].trace.uid})).enter().append("g").attr("class",function(t){return"trace scatter trace"+t[0].trace.uid}).style("stroke-miterlimit",2),kM(t,e,r),function(t,e,r){var a;e.selectAll("g.trace").each(function(t){var e=n.select(this);if((a=t[0].trace)._nexttrace){if(a._nextFill=e.select(".js-fill.js-tonext"),!a._nextFill.size()){var i=":first-child";e.select(".js-fill.js-tozero").size()&&(i+=" + *"),a._nextFill=e.insert("path",i).attr("class","js-fill js-tonext")}}else e.selectAll(".js-fill.js-tonext").remove(),a._nextFill=null;a.fill&&("tozero"===a.fill.substr(0,6)||"toself"===a.fill||"to"===a.fill.substr(0,2)&&!a._prevtrace)?(a._ownFill=e.select(".js-fill.js-tozero"),a._ownFill.size()||(a._ownFill=e.insert("path",":first-child").attr("class","js-fill js-tozero"))):(e.selectAll(".js-fill.js-tozero").remove(),a._ownFill=null),e.selectAll(".js-fill").call(Jr.setClipUrl,r.layerClipId)})}(0,c,e),o=0,l={};o<r.length;o++)l[r[o][0].trace.uid]=o;c.selectAll("g.trace").sort(function(t,e){return l[t[0].trace.uid]>l[e[0].trace.uid]?1:-1}),h?(i&&(u=i()),n.transition().duration(a.duration).ease(a.easing).each("end",function(){u&&u()}).each("interrupt",function(){u&&u()}).each(function(){c.selectAll("g.trace").each(function(n,i){CM(t,i,e,n,r,this,a)})})):c.selectAll("g.trace").each(function(n,i){CM(t,i,e,n,r,this,a)});f&&s.exit().remove(),c.selectAll("path:not([d])").remove()},OM.colorbar=fM,OM.style=LM,OM.hoverPoints=function(t,e,r,n){var a=t.cd,i=a[0].trace,o=t.xa,l=t.ya,s=o.c2p(e),u=l.c2p(r),c=[s,u],f=i.hoveron||"",h=-1!==i.mode.indexOf("markers")?3:.5;if(-1!==f.indexOf("points")){var d=function(t){var e=Math.max(h,t.mrc||0),r=o.c2p(t.x)-s,n=l.c2p(t.y)-u;return Math.max(Math.sqrt(r*r+n*n)-e,1-h/e)},p=Di.getDistanceFunction(n,function(t){var e=Math.max(3,t.mrc||0),r=1-1/e,n=Math.abs(o.c2p(t.x)-s);return n<e?r*n/e:n-e+r},function(t){var e=Math.max(3,t.mrc||0),r=1-1/e,n=Math.abs(l.c2p(t.y)-u);return n<e?r*n/e:n-e+r},d);if(Di.getClosest(a,p,t),!1!==t.index){var g=a[t.index],v=o.c2p(g.x,!0),m=l.c2p(g.y,!0),y=g.mrc||1;return oe.extendFlat(t,{color:_M(i,g),x0:v-y,x1:v+y,xLabelVal:g.x,y0:m-y,y1:m+y,yLabelVal:g.y,spikeDistance:d(g)}),xM(g,i,t),I.getComponentMethod("errorbars","hoverInfo")(g,i,t),[t]}}if(-1!==f.indexOf("fills")&&i._polygons){var x,b,_,w,A,M,T,k,E,C=i._polygons,S=[],L=!1,O=1/0,D=-1/0,R=1/0,P=-1/0;for(x=0;x<C.length;x++)(_=C[x]).contains(c)&&(L=!L,S.push(_),R=Math.min(R,_.ymin),P=Math.max(P,_.ymax));if(L){var B=((R=Math.max(R,0))+(P=Math.min(P,l._length)))/2;for(x=0;x<S.length;x++)for(w=S[x].pts,b=1;b<w.length;b++)(k=w[b-1][1])>B!=(E=w[b][1])>=B&&(M=w[b-1][0],T=w[b][0],E-k&&(A=M+(T-M)*(B-k)/(E-k),O=Math.min(O,A),D=Math.max(D,A)));O=Math.max(O,0),D=Math.min(D,o._length);var F=$e.defaultLine;return $e.opacity(i.fillcolor)?F=i.fillcolor:$e.opacity((i.line||{}).color)&&(F=i.line.color),oe.extendFlat(t,{distance:t.maxHoverDistance,x0:O,x1:D,y0:B,y1:B,color:F}),delete t.index,i.text&&!Array.isArray(i.text)?t.text=String(i.text):t.text=i.name,[t]}}},OM.selectPoints=function(t,e){var r,n,a,i,o=t.cd,l=t.xaxis,s=t.yaxis,u=[],c=o[0].trace;if(!Zr.hasMarkers(c)&&!Zr.hasText(c))return[];if(!1===e)for(r=0;r<o.length;r++)o[r].selected=0;else for(r=0;r<o.length;r++)n=o[r],a=l.c2p(n.x),i=s.c2p(n.y),e.contains([a,i])?(u.push({pointNumber:r,x:l.c2d(n.x),y:s.c2d(n.y)}),n.selected=1):n.selected=0;return u},OM.animatable=!0,OM.moduleType="trace",OM.name="scatter",OM.basePlotModule=tl,OM.categories=["cartesian","svg","symbols","markerColorscale","errorBarsOK","showLegend","scatter-like","draggedPts"],OM.meta={};var DM=OM,RM={version:"1.36.0"};mx.polyfill();for(var PM=RM.register=I.register,IM=Object.keys(XA),BM=0;BM<IM.length;BM++){var FM=IM[BM];RM[FM]=XA[FM],PM({moduleType:"apiMethod",name:FM,fn:XA[FM]})}PM(DM),PM([Di,Cb,Rx,Ux,p_,ub,cw,j_,$b,jb,ob,Jx]),PM([{moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}},{moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}]),RM.Icons=vx,RM.Plots=na,RM.Fx=Di,RM.Snapshot=KA,RM.PlotSchema=zn,RM.Queue=dw,RM.d3=n;for(var zM=RM,NM=b.extendFlat,jM=_e.overrideAll,UM=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],VM={},HM=0;HM<UM.length;HM++){var qM=UM[HM];VM[qM]=zm[qM]}NM(VM,nr,{autocolorscale:NM({},nr.autocolorscale,{dflt:!1})},{colorbar:fr});var GM=jM(VM,"calc","nested");function XM(t,e){this.scene=t,this.uid=e,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=rx(t.glplot,this.options),this.heatmap._trace=this}var YM=XM.prototype;YM.handlePick=function(t){var e=this.options,r=e.shape,n=t.pointId,a=n%r[0],i=Math.floor(n/r[0]),o=n;return{trace:this,dataCoord:t.dataCoord,traceCoord:[e.x[a],e.y[i],e.z[o]],textLabel:this.textLabels[n],name:this.name,pointIndex:[i,a],hoverinfo:this.hoverinfo}},YM.update=function(t,e){var r=e[0];this.index=t.index,this.name=t.name,this.hoverinfo=t.hoverinfo;var n=r.z;this.options.z=[].concat.apply([],n);var a=n[0].length,i=n.length;this.options.shape=[a,i],this.options.x=r.x,this.options.y=r.y;var o=function(t){for(var e=t.colorscale,r=t.zmin,n=t.zmax,a=e.length,i=new Array(a),o=new Array(4*a),l=0;l<a;l++){var s=e[l],u=vm(s[1]);i[l]=r+s[0]*(n-r);for(var c=0;c<4;c++)o[4*l+c]=u[c]}return{colorLevels:i,colorValues:o}}(t);this.options.colorLevels=o.colorLevels,this.options.colorValues=o.colorValues,this.textLabels=[].concat.apply([],t.text),this.heatmap.update(this.options),Na.expand(this.scene.xaxis,r.x),Na.expand(this.scene.yaxis,r.y)},YM.dispose=function(){this.heatmap.dispose()};var WM=function(t,e,r){var n=new XM(t,e.uid);return n.update(e,r),n},ZM={};ZM.attributes=GM,ZM.supplyDefaults=function(t,e,r,n){function a(r,n){return oe.coerce(t,e,zm,r,n)}Ny(t,e,a,n)?(a("text"),function(t,e,r){!1===r("zsmooth")&&(r("xgap"),r("ygap")),r("zhoverformat")}(0,0,a),a("connectgaps",Jm(e)&&!1!==e.zsmooth),mr(t,e,n,a,{prefix:"",cLetter:"z"})):e.visible=!1},ZM.colorbar=function(t,e){var r=e[0].trace,n="cb"+r.uid,i=r.zmin,o=r.zmax;if(a(i)||(i=oe.aggNums(Math.min,null,r.z)),a(o)||(o=oe.aggNums(Math.max,null,r.z)),t._fullLayout._infolayer.selectAll("."+n).remove(),r.showscale){var l=e[0].t.cb=Sy(t,n),s=br.makeColorScaleFunc(br.extractScale(r.colorscale,i,o),{noNumericCheck:!0});l.fillcolor(s).filllevels({start:i,end:o,size:(o-i)/254}).options(r.colorbar)()}else na.autoMargin(t,n)},ZM.calc=Ty,ZM.plot=WM,ZM.moduleType="trace",ZM.name="heatmapgl",ZM.basePlotModule=Om,ZM.categories=["gl","gl2d","2dMap"],ZM.meta={};var JM,QM,$M=ZM,KM=Qx.attributes,tT=b.extendDeepAll,eT=b.extendFlat,rT={domain:KM({name:"parcoords",trace:!0,editType:"calc"}),labelfont:S({editType:"calc"}),tickfont:S({editType:"calc"}),rangefont:S({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},tickvals:eT({},ur.tickvals,{editType:"calc"}),ticktext:eT({},ur.ticktext,{editType:"calc"}),tickformat:{valType:"string",dflt:"3s",editType:"calc"},visible:{valType:"boolean",dflt:!0,editType:"calc"},range:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},multiselect:{valType:"boolean",dflt:!0,editType:"calc"},values:{valType:"data_array",editType:"calc"},editType:"calc"},line:eT(tT(kn(0,"calc"),{colorscale:{dflt:f.Viridis},autocolorscale:{dflt:!1}}),{showscale:{valType:"boolean",dflt:!1,editType:"calc"},colorbar:fr,editType:"calc"})},nT={exports:{}};JM=this,QM=function(){function t(t,e){this.id=U++,this.type=t,this.data=e}function e(t){return"["+function t(e){if(0===e.length)return[];var r=e.charAt(0),n=e.charAt(e.length-1);if(1<e.length&&r===n&&('"'===r||"'"===r))return['"'+e.substr(1,e.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(r=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e))return t(e.substr(0,r.index)).concat(t(r[1])).concat(t(e.substr(r.index+r[0].length)));if(1===(r=e.split(".")).length)return['"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(e=[],n=0;n<r.length;++n)e=e.concat(t(r[n]));return e}(t).join("][")+"]"}function r(t){return"string"==typeof t?t.split():t}function n(t){return"string"==typeof t?document.querySelector(t):t}function a(t){var e,a,i,o,l=t||{};t={};var s=[],u=[],c="undefined"==typeof window?1:window.devicePixelRatio,f=!1,h=function(t){},d=function(){};if("string"==typeof l?e=document.querySelector(l):"object"==typeof l&&("string"==typeof l.nodeName&&"function"==typeof l.appendChild&&"function"==typeof l.getBoundingClientRect?e=l:"function"==typeof l.drawArrays||"function"==typeof l.drawElements?i=(o=l).canvas:("gl"in l?o=l.gl:"canvas"in l?i=n(l.canvas):"container"in l&&(a=n(l.container)),"attributes"in l&&(t=l.attributes),"extensions"in l&&(s=r(l.extensions)),"optionalExtensions"in l&&(u=r(l.optionalExtensions)),"onDone"in l&&(h=l.onDone),"profile"in l&&(f=!!l.profile),"pixelRatio"in l&&(c=+l.pixelRatio))),e&&("canvas"===e.nodeName.toLowerCase()?i=e:a=e),!o){if(!i){if(!(e=function(t,e,r){function n(){var e=window.innerWidth,n=window.innerHeight;t!==document.body&&(e=(n=t.getBoundingClientRect()).right-n.left,n=n.bottom-n.top),a.width=r*e,a.height=r*n,j(a.style,{width:e+"px",height:n+"px"})}var a=document.createElement("canvas");return j(a.style,{border:0,margin:0,padding:0,top:0,left:0}),t.appendChild(a),t===document.body&&(a.style.position="absolute",j(t.style,{margin:0,padding:0})),window.addEventListener("resize",n,!1),n(),{canvas:a,onDestroy:function(){window.removeEventListener("resize",n),t.removeChild(a)}}}(a||document.body,0,c)))return null;i=e.canvas,d=e.onDestroy}o=function(t,e){function r(r){try{return t.getContext(r,e)}catch(t){return null}}return r("webgl")||r("experimental-webgl")||r("webgl-experimental")}(i,t)}return o?{gl:o,canvas:i,container:a,extensions:s,optionalExtensions:u,pixelRatio:c,profile:f,onDone:h,onDestroy:d}:(d(),h("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function i(t){return!!t&&"object"==typeof t&&Array.isArray(t.shape)&&Array.isArray(t.stride)&&"number"==typeof t.offset&&t.shape.length===t.stride.length&&(Array.isArray(t.data)||G(t.data))}function o(t,e){for(var r=Array(t),n=0;n<t;++n)r[n]=e(n);return r}function l(t){var e,r;return e=(65535<t)<<4,e|=r=(255<(t>>>=e))<<3,(e|=r=(15<(t>>>=r))<<2)|(r=(3<(t>>>=r))<<1)|t>>>r>>1}function s(t){t:{for(var e=16;268435456>=e;e*=16)if(t<=e){t=e;break t}t=0}return 0<(e=Y[l(t)>>2]).length?e.pop():new ArrayBuffer(t)}function u(t){Y[l(t.byteLength)>>2].push(t)}function c(t,e,r,n,a,i){for(var o=0;o<e;++o)for(var l=t[o],s=0;s<r;++s)for(var u=l[s],c=0;c<n;++c)a[i++]=u[c]}function f(t){return 0|J[Object.prototype.toString.call(t)]}function h(t,e){for(var r=0;r<e.length;++r)t[r]=e[r]}function d(t,e,r,n,a,i,o){for(var l=0,s=0;s<r;++s)for(var u=0;u<n;++u)t[l++]=e[a*s+i*u+o]}function p(t,e,r){function n(e){this.id=s++,this.buffer=t.createBuffer(),this.type=e,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,r.profile&&(this.stats={size:0})}function a(e,r,n){e.byteLength=r.byteLength,t.bufferData(e.type,r,n)}function o(t,e,r,n,o,l){if(t.usage=r,Array.isArray(e)){if(t.dtype=n||5126,0<e.length)if(Array.isArray(e[0])){o=tt(e);for(var s=n=1;s<o.length;++s)n*=o[s];t.dimension=n,a(t,e=K(e,o,t.dtype),r),l?t.persistentData=e:W.freeType(e)}else"number"==typeof e[0]?(t.dimension=o,h(o=W.allocType(t.dtype,e.length),e),a(t,o,r),l?t.persistentData=o:W.freeType(o)):G(e[0])&&(t.dimension=e[0].length,t.dtype=n||f(e[0])||5126,a(t,e=K(e,[e.length,e[0].length],t.dtype),r),l?t.persistentData=e:W.freeType(e))}else if(G(e))t.dtype=n||f(e),t.dimension=o,a(t,e,r),l&&(t.persistentData=new Uint8Array(new Uint8Array(e.buffer)));else if(i(e)){o=e.shape;var u=e.stride,c=(s=e.offset,0),p=0,g=0,v=0;1===o.length?(c=o[0],p=1,g=u[0],v=0):2===o.length&&(c=o[0],p=o[1],g=u[0],v=u[1]),t.dtype=n||f(e.data)||5126,t.dimension=p,d(o=W.allocType(t.dtype,c*p),e.data,c,p,g,v,s),a(t,o,r),l?t.persistentData=o:W.freeType(o)}}function l(r){e.bufferCount--,t.deleteBuffer(r.buffer),r.buffer=null,delete u[r.id]}var s=0,u={};n.prototype.bind=function(){t.bindBuffer(this.type,this.buffer)},n.prototype.destroy=function(){l(this)};var c=[];return r.profile&&(e.getTotalBufferSize=function(){var t=0;return Object.keys(u).forEach(function(e){t+=u[e].stats.size}),t}),{create:function(a,s,c,p){function g(e){var n=35044,a=null,l=0,s=0,u=1;return Array.isArray(e)||G(e)||i(e)?a=e:"number"==typeof e?l=0|e:e&&("data"in e&&(a=e.data),"usage"in e&&(n=$[e.usage]),"type"in e&&(s=Q[e.type]),"dimension"in e&&(u=0|e.dimension),"length"in e&&(l=0|e.length)),v.bind(),a?o(v,a,n,s,u,p):(t.bufferData(v.type,l,n),v.dtype=s||5121,v.usage=n,v.dimension=u,v.byteLength=l),r.profile&&(v.stats.size=v.byteLength*et[v.dtype]),g}e.bufferCount++;var v=new n(s);return u[v.id]=v,c||g(a),g._reglType="buffer",g._buffer=v,g.subdata=function(e,r){var n,a=0|(r||0);if(v.bind(),G(e))t.bufferSubData(v.type,a,e);else if(Array.isArray(e)){if(0<e.length)if("number"==typeof e[0]){var o=W.allocType(v.dtype,e.length);h(o,e),t.bufferSubData(v.type,a,o),W.freeType(o)}else(Array.isArray(e[0])||G(e[0]))&&(n=tt(e),o=K(e,n,v.dtype),t.bufferSubData(v.type,a,o),W.freeType(o))}else if(i(e)){n=e.shape;var l=e.stride,s=o=0,u=0,c=0;1===n.length?(o=n[0],s=1,u=l[0],c=0):2===n.length&&(o=n[0],s=n[1],u=l[0],c=l[1]),n=Array.isArray(e.data)?v.dtype:f(e.data),d(n=W.allocType(n,o*s),e.data,o,s,u,c,e.offset),t.bufferSubData(v.type,a,n),W.freeType(n)}return g},r.profile&&(g.stats=v.stats),g.destroy=function(){l(v)},g},createStream:function(t,e){var r=c.pop();return r||(r=new n(t)),r.bind(),o(r,e,35040,0,1,!1),r},destroyStream:function(t){c.push(t)},clear:function(){X(u).forEach(l),c.forEach(l)},getBuffer:function(t){return t&&t._buffer instanceof n?t._buffer:null},restore:function(){X(u).forEach(function(e){e.buffer=t.createBuffer(),t.bindBuffer(e.type,e.buffer),t.bufferData(e.type,e.persistentData||e.byteLength,e.usage)})},_initBuffer:o}}function g(t,e,r,n){function a(t){this.id=u++,s[this.id]=this,this.buffer=t,this.primType=4,this.type=this.vertCount=0}function o(n,a,o,l,s,u,c){if(n.buffer.bind(),a){var f=c;c||G(a)&&(!i(a)||G(a.data))||(f=e.oes_element_index_uint?5125:5123),r._initBuffer(n.buffer,a,o,f,3)}else t.bufferData(34963,u,o),n.buffer.dtype=f||5121,n.buffer.usage=o,n.buffer.dimension=3,n.buffer.byteLength=u;if(f=c,!c){switch(n.buffer.dtype){case 5121:case 5120:f=5121;break;case 5123:case 5122:f=5123;break;case 5125:case 5124:f=5125}n.buffer.dtype=f}n.type=f,0>(a=s)&&(a=n.buffer.byteLength,5123===f?a>>=1:5125===f&&(a>>=2)),n.vertCount=a,a=l,0>l&&(a=4,1===(l=n.buffer.dimension)&&(a=0),2===l&&(a=1),3===l&&(a=4)),n.primType=a}function l(t){n.elementsCount--,delete s[t.id],t.buffer.destroy(),t.buffer=null}var s={},u=0,c={uint8:5121,uint16:5123};e.oes_element_index_uint&&(c.uint32=5125),a.prototype.bind=function(){this.buffer.bind()};var f=[];return{create:function(t,e){function s(t){if(t)if("number"==typeof t)u(t),f.primType=4,f.vertCount=0|t,f.type=5121;else{var e=null,r=35044,n=-1,a=-1,l=0,h=0;Array.isArray(t)||G(t)||i(t)?e=t:("data"in t&&(e=t.data),"usage"in t&&(r=$[t.usage]),"primitive"in t&&(n=rt[t.primitive]),"count"in t&&(a=0|t.count),"type"in t&&(h=c[t.type]),"length"in t?l=0|t.length:(l=a,5123===h||5122===h?l*=2:5125!==h&&5124!==h||(l*=4))),o(f,e,r,n,a,l,h)}else u(),f.primType=4,f.vertCount=0,f.type=5121;return s}var u=r.create(null,34963,!0),f=new a(u._buffer);return n.elementsCount++,s(t),s._reglType="elements",s._elements=f,s.subdata=function(t,e){return u.subdata(t,e),s},s.destroy=function(){l(f)},s},createStream:function(t){var e=f.pop();return e||(e=new a(r.create(null,34963,!0,!1)._buffer)),o(e,t,35040,-1,-1,0,0),e},destroyStream:function(t){f.push(t)},getElements:function(t){return"function"==typeof t&&t._elements instanceof a?t._elements:null},clear:function(){X(s).forEach(l)}}}function v(t){for(var e=W.allocType(5123,t.length),r=0;r<t.length;++r)if(isNaN(t[r]))e[r]=65535;else if(1/0===t[r])e[r]=31744;else if(-1/0===t[r])e[r]=64512;else{nt[0]=t[r];var n=(i=at[0])>>>31<<15,a=(i<<1>>>24)-127,i=i>>13&1023;e[r]=-24>a?n:-14>a?n+(i+1024>>-14-a):15<a?n+31744:n+(a+15<<10)+i}return e}function m(t){return Array.isArray(t)||G(t)}function y(t){return Array.isArray(t)&&(0===t.length||"number"==typeof t[0])}function x(t){return!(!Array.isArray(t)||0===t.length||!m(t[0]))}function b(t){return Object.prototype.toString.call(t)}function _(t){if(!t)return!1;var e=b(t);return 0<=st.indexOf(e)||(y(t)||x(t)||i(t))}function w(t,e){36193===t.type?(t.data=v(e),W.freeType(e)):t.data=e}function A(t,e,r,n,a,i){if(t=void 0!==ct[t]?ct[t]:lt[t]*ut[e],i&&(t*=6),a){for(n=0;1<=r;)n+=t*r*r,r/=2;return n}return t*r*n}function M(t,e,r,n,a,o,l){function s(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function u(t,e){t.internalformat=e.internalformat,t.format=e.format,t.type=e.type,t.compressed=e.compressed,t.premultiplyAlpha=e.premultiplyAlpha,t.flipY=e.flipY,t.unpackAlignment=e.unpackAlignment,t.colorSpace=e.colorSpace,t.width=e.width,t.height=e.height,t.channels=e.channels}function c(t,e){if("object"==typeof e&&e){"premultiplyAlpha"in e&&(t.premultiplyAlpha=e.premultiplyAlpha),"flipY"in e&&(t.flipY=e.flipY),"alignment"in e&&(t.unpackAlignment=e.alignment),"colorSpace"in e&&(t.colorSpace=V[e.colorSpace]),"type"in e&&(t.type=H[e.type]);var r=t.width,n=t.height,a=t.channels,i=!1;"shape"in e?(r=e.shape[0],n=e.shape[1],3===e.shape.length&&(a=e.shape[2],i=!0)):("radius"in e&&(r=n=e.radius),"width"in e&&(r=e.width),"height"in e&&(n=e.height),"channels"in e&&(a=e.channels,i=!0)),t.width=0|r,t.height=0|n,t.channels=0|a,r=!1,"format"in e&&(r=e.format,n=t.internalformat=q[r],t.format=at[n],r in H&&!("type"in e)&&(t.type=H[r]),r in Y&&(t.compressed=!0),r=!0),!i&&r?t.channels=lt[t.format]:i&&!r&&t.channels!==ot[t.format]&&(t.format=t.internalformat=ot[t.channels])}}function f(e){t.pixelStorei(37440,e.flipY),t.pixelStorei(37441,e.premultiplyAlpha),t.pixelStorei(37443,e.colorSpace),t.pixelStorei(3317,e.unpackAlignment)}function h(){s.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function d(t,e){var r=null;if(_(e)?r=e:e&&(c(t,e),"x"in e&&(t.xOffset=0|e.x),"y"in e&&(t.yOffset=0|e.y),_(e.data)&&(r=e.data)),e.copy){var n=a.viewportWidth,o=a.viewportHeight;t.width=t.width||n-t.xOffset,t.height=t.height||o-t.yOffset,t.needsCopy=!0}else if(r){if(G(r))t.channels=t.channels||4,t.data=r,"type"in e||5121!==t.type||(t.type=0|J[Object.prototype.toString.call(r)]);else if(y(r)){switch(t.channels=t.channels||4,o=(n=r).length,t.type){case 5121:case 5123:case 5125:case 5126:(o=W.allocType(t.type,o)).set(n),t.data=o;break;case 36193:t.data=v(n)}t.alignment=1,t.needsFree=!0}else if(i(r)){n=r.data,Array.isArray(n)||5121!==t.type||(t.type=0|J[Object.prototype.toString.call(n)]);o=r.shape;var l,s,u,f,h=r.stride;3===o.length?(u=o[2],f=h[2]):f=u=1,l=o[0],s=o[1],o=h[0],h=h[1],t.alignment=1,t.width=l,t.height=s,t.channels=u,t.format=t.internalformat=ot[u],t.needsFree=!0,l=f,r=r.offset,u=t.width,f=t.height,s=t.channels;for(var d=W.allocType(36193===t.type?5126:t.type,u*f*s),p=0,g=0;g<f;++g)for(var A=0;A<u;++A)for(var M=0;M<s;++M)d[p++]=n[o*A+h*g+l*M+r];w(t,d)}else if("[object HTMLCanvasElement]"===b(r)||"[object CanvasRenderingContext2D]"===b(r))"[object HTMLCanvasElement]"===b(r)?t.element=r:t.element=r.canvas,t.width=t.element.width,t.height=t.element.height,t.channels=4;else if("[object HTMLImageElement]"===b(r))t.element=r,t.width=r.naturalWidth,t.height=r.naturalHeight,t.channels=4;else if("[object HTMLVideoElement]"===b(r))t.element=r,t.width=r.videoWidth,t.height=r.videoHeight,t.channels=4;else if(x(r)){for(n=t.width||r[0].length,o=t.height||r.length,h=t.channels,h=m(r[0][0])?h||r[0][0].length:h||1,l=Z.shape(r),u=1,f=0;f<l.length;++f)u*=l[f];u=W.allocType(36193===t.type?5126:t.type,u),Z.flatten(r,l,"",u),w(t,u),t.alignment=1,t.width=n,t.height=o,t.channels=h,t.format=t.internalformat=ot[h],t.needsFree=!0}}else t.width=t.width||1,t.height=t.height||1,t.channels=t.channels||4}function p(e,r,a,i,o){var l=e.element,s=e.data,u=e.internalformat,c=e.format,h=e.type,d=e.width,p=e.height;f(e),l?t.texSubImage2D(r,o,a,i,c,h,l):e.compressed?t.compressedTexSubImage2D(r,o,a,i,u,d,p,s):e.needsCopy?(n(),t.copyTexSubImage2D(r,o,a,i,e.xOffset,e.yOffset,d,p)):t.texSubImage2D(r,o,a,i,d,p,c,h,s)}function g(){return st.pop()||new h}function M(t){t.needsFree&&W.freeType(t.data),h.call(t),st.push(t)}function T(t,e,r){var n=t.images[0]=g();t.mipmask=1,n.width=t.width=e,n.height=t.height=r,n.channels=t.channels=4}function k(t,e){var r=null;if(_(e))u(r=t.images[0]=g(),t),d(r,e),t.mipmask=1;else if(c(t,e),Array.isArray(e.mipmap))for(var n=e.mipmap,a=0;a<n.length;++a)u(r=t.images[a]=g(),t),r.width>>=a,r.height>>=a,d(r,n[a]),t.mipmask|=1<<a;else u(r=t.images[0]=g(),t),d(r,e),t.mipmask=1;u(t,t.images[0])}function E(e,r){for(var a=e.images,i=0;i<a.length&&a[i];++i){var o=a[i],l=r,s=i,u=o.element,c=o.data,h=o.internalformat,d=o.format,p=o.type,g=o.width,v=o.height;f(o),u?t.texImage2D(l,s,d,d,p,u):o.compressed?t.compressedTexImage2D(l,s,h,g,v,0,c):o.needsCopy?(n(),t.copyTexImage2D(l,s,d,o.xOffset,o.yOffset,g,v,0)):t.texImage2D(l,s,d,g,v,0,d,p,c)}}function C(){var t=ut.pop()||new function(){s.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)};s.call(t);for(var e=t.mipmask=0;16>e;++e)t.images[e]=null;return t}function S(t){for(var e=t.images,r=0;r<e.length;++r)e[r]&&M(e[r]),e[r]=null;ut.push(t)}function L(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function O(t,e){"min"in e&&(t.minFilter=U[e.min],0<=it.indexOf(t.minFilter)&&(t.genMipmaps=!0)),"mag"in e&&(t.magFilter=N[e.mag]);var r=t.wrapS,n=t.wrapT;if("wrap"in e){var a=e.wrap;"string"==typeof a?r=n=z[a]:Array.isArray(a)&&(r=z[a[0]],n=z[a[1]])}else"wrapS"in e&&(r=z[e.wrapS]),"wrapT"in e&&(n=z[e.wrapT]);if(t.wrapS=r,t.wrapT=n,"anisotropic"in e&&(t.anisotropic=e.anisotropic),"mipmap"in e){switch(r=!1,typeof e.mipmap){case"string":t.mipmapHint=F[e.mipmap],r=t.genMipmaps=!0;break;case"boolean":r=t.genMipmaps=e.mipmap;break;case"object":t.genMipmaps=!1,r=!0}!r||"min"in e||(t.minFilter=9984)}}function D(r,n){t.texParameteri(n,10241,r.minFilter),t.texParameteri(n,10240,r.magFilter),t.texParameteri(n,10242,r.wrapS),t.texParameteri(n,10243,r.wrapT),e.ext_texture_filter_anisotropic&&t.texParameteri(n,34046,r.anisotropic),r.genMipmaps&&(t.hint(33170,r.mipmapHint),t.generateMipmap(n))}function R(e){s.call(this),this.mipmask=0,this.internalformat=6408,this.id=ct++,this.refCount=1,this.target=e,this.texture=t.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new L,l.profile&&(this.stats={size:0})}function P(e){t.activeTexture(33984),t.bindTexture(e.target,e.texture)}function I(){var e=dt[0];e?t.bindTexture(e.target,e.texture):t.bindTexture(3553,null)}function B(e){var r=e.texture,n=e.unit,a=e.target;0<=n&&(t.activeTexture(33984+n),t.bindTexture(a,null),dt[n]=null),t.deleteTexture(r),e.texture=null,e.params=null,e.pixels=null,e.refCount=0,delete ft[e.id],o.textureCount--}var F={"don't care":4352,"dont care":4352,nice:4354,fast:4353},z={repeat:10497,clamp:33071,mirror:33648},N={nearest:9728,linear:9729},U=j({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},N),V={none:0,browser:37444},H={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},q={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Y={};e.ext_srgb&&(q.srgb=35904,q.srgba=35906),e.oes_texture_float&&(H.float32=H.float=5126),e.oes_texture_half_float&&(H.float16=H["half float"]=36193),e.webgl_depth_texture&&(j(q,{depth:6402,"depth stencil":34041}),j(H,{uint16:5123,uint32:5125,"depth stencil":34042})),e.webgl_compressed_texture_s3tc&&j(Y,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),e.webgl_compressed_texture_atc&&j(Y,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),e.webgl_compressed_texture_pvrtc&&j(Y,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),e.webgl_compressed_texture_etc1&&(Y["rgb etc1"]=36196);var Q=Array.prototype.slice.call(t.getParameter(34467));Object.keys(Y).forEach(function(t){var e=Y[t];0<=Q.indexOf(e)&&(q[t]=e)});var $=Object.keys(q);r.textureFormats=$;var K=[];Object.keys(q).forEach(function(t){K[q[t]]=t});var tt=[];Object.keys(H).forEach(function(t){tt[H[t]]=t});var et=[];Object.keys(N).forEach(function(t){et[N[t]]=t});var rt=[];Object.keys(U).forEach(function(t){rt[U[t]]=t});var nt=[];Object.keys(z).forEach(function(t){nt[z[t]]=t});var at=$.reduce(function(t,e){var r=q[e];return 6409===r||6406===r||6409===r||6410===r||6402===r||34041===r?t[r]=r:32855===r||0<=e.indexOf("rgba")?t[r]=6408:t[r]=6407,t},{}),st=[],ut=[],ct=0,ft={},ht=r.maxTextureUnits,dt=Array(ht).map(function(){return null});return j(R.prototype,{bind:function(){this.bindCount+=1;var e=this.unit;if(0>e){for(var r=0;r<ht;++r){var n=dt[r];if(n){if(0<n.bindCount)continue;n.unit=-1}dt[r]=this,e=r;break}l.profile&&o.maxTextureUnits<e+1&&(o.maxTextureUnits=e+1),this.unit=e,t.activeTexture(33984+e),t.bindTexture(this.target,this.texture)}return e},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&B(this)}}),l.profile&&(o.getTotalTextureSize=function(){var t=0;return Object.keys(ft).forEach(function(e){t+=ft[e].stats.size}),t}),{create2D:function(e,r){function n(t,e){var r=a.texInfo;L.call(r);var i=C();return"number"==typeof t?T(i,0|t,"number"==typeof e?0|e:0|t):t?(O(r,t),k(i,t)):T(i,1,1),r.genMipmaps&&(i.mipmask=(i.width<<1)-1),a.mipmask=i.mipmask,u(a,i),a.internalformat=i.internalformat,n.width=i.width,n.height=i.height,P(a),E(i,3553),D(r,3553),I(),S(i),l.profile&&(a.stats.size=A(a.internalformat,a.type,i.width,i.height,r.genMipmaps,!1)),n.format=K[a.internalformat],n.type=tt[a.type],n.mag=et[r.magFilter],n.min=rt[r.minFilter],n.wrapS=nt[r.wrapS],n.wrapT=nt[r.wrapT],n}var a=new R(3553);return ft[a.id]=a,o.textureCount++,n(e,r),n.subimage=function(t,e,r,i){e|=0,r|=0,i|=0;var o=g();return u(o,a),o.width=0,o.height=0,d(o,t),o.width=o.width||(a.width>>i)-e,o.height=o.height||(a.height>>i)-r,P(a),p(o,3553,e,r,i),I(),M(o),n},n.resize=function(e,r){var i=0|e,o=0|r||i;if(i===a.width&&o===a.height)return n;n.width=a.width=i,n.height=a.height=o,P(a);for(var s=0;a.mipmask>>s;++s)t.texImage2D(3553,s,a.format,i>>s,o>>s,0,a.format,a.type,null);return I(),l.profile&&(a.stats.size=A(a.internalformat,a.type,i,o,!1,!1)),n},n._reglType="texture2d",n._texture=a,l.profile&&(n.stats=a.stats),n.destroy=function(){a.decRef()},n},createCube:function(e,r,n,a,i,s){function f(t,e,r,n,a,i){var o,s=h.texInfo;for(L.call(s),o=0;6>o;++o)v[o]=C();if("number"!=typeof t&&t){if("object"==typeof t)if(e)k(v[0],t),k(v[1],e),k(v[2],r),k(v[3],n),k(v[4],a),k(v[5],i);else if(O(s,t),c(h,t),"faces"in t)for(t=t.faces,o=0;6>o;++o)u(v[o],h),k(v[o],t[o]);else for(o=0;6>o;++o)k(v[o],t)}else for(t=0|t||1,o=0;6>o;++o)T(v[o],t,t);for(u(h,v[0]),h.mipmask=s.genMipmaps?(v[0].width<<1)-1:v[0].mipmask,h.internalformat=v[0].internalformat,f.width=v[0].width,f.height=v[0].height,P(h),o=0;6>o;++o)E(v[o],34069+o);for(D(s,34067),I(),l.profile&&(h.stats.size=A(h.internalformat,h.type,f.width,f.height,s.genMipmaps,!0)),f.format=K[h.internalformat],f.type=tt[h.type],f.mag=et[s.magFilter],f.min=rt[s.minFilter],f.wrapS=nt[s.wrapS],f.wrapT=nt[s.wrapT],o=0;6>o;++o)S(v[o]);return f}var h=new R(34067);ft[h.id]=h,o.cubeCount++;var v=Array(6);return f(e,r,n,a,i,s),f.subimage=function(t,e,r,n,a){r|=0,n|=0,a|=0;var i=g();return u(i,h),i.width=0,i.height=0,d(i,e),i.width=i.width||(h.width>>a)-r,i.height=i.height||(h.height>>a)-n,P(h),p(i,34069+t,r,n,a),I(),M(i),f},f.resize=function(e){if((e|=0)!==h.width){f.width=h.width=e,f.height=h.height=e,P(h);for(var r=0;6>r;++r)for(var n=0;h.mipmask>>n;++n)t.texImage2D(34069+r,n,h.format,e>>n,e>>n,0,h.format,h.type,null);return I(),l.profile&&(h.stats.size=A(h.internalformat,h.type,f.width,f.height,!1,!0)),f}},f._reglType="textureCube",f._texture=h,l.profile&&(f.stats=h.stats),f.destroy=function(){h.decRef()},f},clear:function(){for(var e=0;e<ht;++e)t.activeTexture(33984+e),t.bindTexture(3553,null),dt[e]=null;X(ft).forEach(B),o.cubeCount=0,o.textureCount=0},getTexture:function(t){return null},restore:function(){X(ft).forEach(function(e){e.texture=t.createTexture(),t.bindTexture(e.target,e.texture);for(var r=0;32>r;++r)if(0!=(e.mipmask&1<<r))if(3553===e.target)t.texImage2D(3553,r,e.internalformat,e.width>>r,e.height>>r,0,e.internalformat,e.type,null);else for(var n=0;6>n;++n)t.texImage2D(34069+n,r,e.internalformat,e.width>>r,e.height>>r,0,e.internalformat,e.type,null);D(e.texInfo,e.target)})}}}function T(t,e,r,n,a,i){function o(t,e,r){this.target=t,this.texture=e,this.renderbuffer=r;var n=t=0;e?(t=e.width,n=e.height):r&&(t=r.width,n=r.height),this.width=t,this.height=n}function l(t){t&&(t.texture&&t.texture._texture.decRef(),t.renderbuffer&&t.renderbuffer._renderbuffer.decRef())}function s(t,e,r){t&&(t.texture?t.texture._texture.refCount+=1:t.renderbuffer._renderbuffer.refCount+=1)}function u(e,r){r&&(r.texture?t.framebufferTexture2D(36160,e,r.target,r.texture._texture.texture,0):t.framebufferRenderbuffer(36160,e,36161,r.renderbuffer._renderbuffer.renderbuffer))}function c(t){var e=3553,r=null,n=null,a=t;return"object"==typeof t&&(a=t.data,"target"in t&&(e=0|t.target)),"texture2d"===(t=a._reglType)?r=a:"textureCube"===t?r=a:"renderbuffer"===t&&(n=a,e=36161),new o(e,r,n)}function f(t,e,r,i,l){return r?((t=n.create2D({width:t,height:e,format:i,type:l}))._texture.refCount=0,new o(3553,t,null)):((t=a.create({width:t,height:e,format:i}))._renderbuffer.refCount=0,new o(36161,null,t))}function h(t){return t&&(t.texture||t.renderbuffer)}function d(t,e,r){t&&(t.texture?t.texture.resize(e,r):t.renderbuffer&&t.renderbuffer.resize(e,r))}function p(){this.id=A++,M[this.id]=this,this.framebuffer=t.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function g(t){t.colorAttachments.forEach(l),l(t.depthAttachment),l(t.stencilAttachment),l(t.depthStencilAttachment)}function v(e){t.deleteFramebuffer(e.framebuffer),e.framebuffer=null,i.framebufferCount--,delete M[e.id]}function m(e){var n;t.bindFramebuffer(36160,e.framebuffer);var a=e.colorAttachments;for(n=0;n<a.length;++n)u(36064+n,a[n]);for(n=a.length;n<r.maxColorAttachments;++n)t.framebufferTexture2D(36160,36064+n,3553,null,0);t.framebufferTexture2D(36160,33306,3553,null,0),t.framebufferTexture2D(36160,36096,3553,null,0),t.framebufferTexture2D(36160,36128,3553,null,0),u(36096,e.depthAttachment),u(36128,e.stencilAttachment),u(33306,e.depthStencilAttachment),t.checkFramebufferStatus(36160),t.bindFramebuffer(36160,x.next),x.cur=x.next,t.getError()}function y(t,e){function r(t,e){var a,i=0,o=0,l=!0,u=!0;a=null;var d=!0,p="rgba",v="uint8",y=1,x=null,w=null,A=null,M=!1;"number"==typeof t?(i=0|t,o=0|e||i):t?("shape"in t?(i=(o=t.shape)[0],o=o[1]):("radius"in t&&(i=o=t.radius),"width"in t&&(i=t.width),"height"in t&&(o=t.height)),("color"in t||"colors"in t)&&(a=t.color||t.colors,Array.isArray(a)),a||("colorCount"in t&&(y=0|t.colorCount),"colorTexture"in t&&(d=!!t.colorTexture,p="rgba4"),"colorType"in t&&(v=t.colorType,!d)&&("half float"===v||"float16"===v?p="rgba16f":"float"!==v&&"float32"!==v||(p="rgba32f")),"colorFormat"in t&&(p=t.colorFormat,0<=b.indexOf(p)?d=!0:0<=_.indexOf(p)&&(d=!1))),("depthTexture"in t||"depthStencilTexture"in t)&&(M=!(!t.depthTexture&&!t.depthStencilTexture)),"depth"in t&&("boolean"==typeof t.depth?l=t.depth:(x=t.depth,u=!1)),"stencil"in t&&("boolean"==typeof t.stencil?u=t.stencil:(w=t.stencil,l=!1)),"depthStencil"in t&&("boolean"==typeof t.depthStencil?l=u=t.depthStencil:(A=t.depthStencil,u=l=!1))):i=o=1;var T=null,k=null,E=null,C=null;if(Array.isArray(a))T=a.map(c);else if(a)T=[c(a)];else for(T=Array(y),a=0;a<y;++a)T[a]=f(i,o,d,p,v);for(i=i||T[0].width,o=o||T[0].height,x?k=c(x):l&&!u&&(k=f(i,o,M,"depth","uint32")),w?E=c(w):u&&!l&&(E=f(i,o,!1,"stencil","uint8")),A?C=c(A):!x&&!w&&u&&l&&(C=f(i,o,M,"depth stencil","depth stencil")),l=null,a=0;a<T.length;++a)s(T[a]),T[a]&&T[a].texture&&(u=dt[T[a].texture._texture.format]*pt[T[a].texture._texture.type],null===l&&(l=u));return s(k),s(E),s(C),g(n),n.width=i,n.height=o,n.colorAttachments=T,n.depthAttachment=k,n.stencilAttachment=E,n.depthStencilAttachment=C,r.color=T.map(h),r.depth=h(k),r.stencil=h(E),r.depthStencil=h(C),r.width=n.width,r.height=n.height,m(n),r}var n=new p;return i.framebufferCount++,r(t,e),j(r,{resize:function(t,e){var a=0|t,i=0|e||a;if(a===n.width&&i===n.height)return r;for(var o=n.colorAttachments,l=0;l<o.length;++l)d(o[l],a,i);return d(n.depthAttachment,a,i),d(n.stencilAttachment,a,i),d(n.depthStencilAttachment,a,i),n.width=r.width=a,n.height=r.height=i,m(n),r},_reglType:"framebuffer",_framebuffer:n,destroy:function(){v(n),g(n)},use:function(t){x.setFBO({framebuffer:r},t)}})}var x={cur:null,next:null,dirty:!1,setFBO:null},b=["rgba"],_=["rgba4","rgb565","rgb5 a1"];e.ext_srgb&&_.push("srgba"),e.ext_color_buffer_half_float&&_.push("rgba16f","rgb16f"),e.webgl_color_buffer_float&&_.push("rgba32f");var w=["uint8"];e.oes_texture_half_float&&w.push("half float","float16"),e.oes_texture_float&&w.push("float","float32");var A=0,M={};return j(x,{getFramebuffer:function(t){return"function"==typeof t&&"framebuffer"===t._reglType&&(t=t._framebuffer)instanceof p?t:null},create:y,createCube:function(t){function e(t){var a,i={color:null},o=0,l=null;a="rgba";var s="uint8",u=1;if("number"==typeof t?o=0|t:t?("shape"in t?o=t.shape[0]:("radius"in t&&(o=0|t.radius),"width"in t?o=0|t.width:"height"in t&&(o=0|t.height)),("color"in t||"colors"in t)&&(l=t.color||t.colors,Array.isArray(l)),l||("colorCount"in t&&(u=0|t.colorCount),"colorType"in t&&(s=t.colorType),"colorFormat"in t&&(a=t.colorFormat)),"depth"in t&&(i.depth=t.depth),"stencil"in t&&(i.stencil=t.stencil),"depthStencil"in t&&(i.depthStencil=t.depthStencil)):o=1,l)if(Array.isArray(l))for(t=[],a=0;a<l.length;++a)t[a]=l[a];else t=[l];else for(t=Array(u),l={radius:o,format:a,type:s},a=0;a<u;++a)t[a]=n.createCube(l);for(i.color=Array(t.length),a=0;a<t.length;++a)u=t[a],o=o||u.width,i.color[a]={target:34069,data:t[a]};for(a=0;6>a;++a){for(u=0;u<t.length;++u)i.color[u].target=34069+a;0<a&&(i.depth=r[0].depth,i.stencil=r[0].stencil,i.depthStencil=r[0].depthStencil),r[a]?r[a](i):r[a]=y(i)}return j(e,{width:o,height:o,color:t})}var r=Array(6);return e(t),j(e,{faces:r,resize:function(t){var n=0|t;if(n===e.width)return e;var a=e.color;for(t=0;t<a.length;++t)a[t].resize(n);for(t=0;6>t;++t)r[t].resize(n);return e.width=e.height=n,e},_reglType:"framebufferCube",destroy:function(){r.forEach(function(t){t.destroy()})}})},clear:function(){X(M).forEach(v)},restore:function(){X(M).forEach(function(e){e.framebuffer=t.createFramebuffer(),m(e)})}})}function k(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function E(t,e,r,n){function a(t,e,r,n){this.name=t,this.id=e,this.location=r,this.info=n}function i(t,e){for(var r=0;r<t.length;++r)if(t[r].id===e.id)return void(t[r].location=e.location);t.push(e)}function o(r,n,a){if(!(o=(a=35632===r?u:c)[n])){var i=e.str(n),o=t.createShader(r);t.shaderSource(o,i),t.compileShader(o),a[n]=o}return o}function l(t,e){this.id=d++,this.fragId=t,this.vertId=e,this.program=null,this.uniforms=[],this.attributes=[],n.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function s(r,l){var s,u;s=o(35632,r.fragId),u=o(35633,r.vertId);var c=r.program=t.createProgram();t.attachShader(c,s),t.attachShader(c,u),t.linkProgram(c);var f=t.getProgramParameter(c,35718);n.profile&&(r.stats.uniformsCount=f);var h=r.uniforms;for(s=0;s<f;++s)if(u=t.getActiveUniform(c,s))if(1<u.size)for(var d=0;d<u.size;++d){var p=u.name.replace("[0]","["+d+"]");i(h,new a(p,e.id(p),t.getUniformLocation(c,p),u))}else i(h,new a(u.name,e.id(u.name),t.getUniformLocation(c,u.name),u));for(f=t.getProgramParameter(c,35721),n.profile&&(r.stats.attributesCount=f),h=r.attributes,s=0;s<f;++s)(u=t.getActiveAttrib(c,s))&&i(h,new a(u.name,e.id(u.name),t.getAttribLocation(c,u.name),u))}var u={},c={},f={},h=[],d=0;return n.profile&&(r.getMaxUniformsCount=function(){var t=0;return h.forEach(function(e){e.stats.uniformsCount>t&&(t=e.stats.uniformsCount)}),t},r.getMaxAttributesCount=function(){var t=0;return h.forEach(function(e){e.stats.attributesCount>t&&(t=e.stats.attributesCount)}),t}),{clear:function(){var e=t.deleteShader.bind(t);X(u).forEach(e),u={},X(c).forEach(e),c={},h.forEach(function(e){t.deleteProgram(e.program)}),h.length=0,f={},r.shaderCount=0},program:function(t,e,n){var a=f[e];a||(a=f[e]={});var i=a[t];return i||(i=new l(e,t),r.shaderCount++,s(i),a[t]=i,h.push(i)),i},restore:function(){u={},c={};for(var t=0;t<h.length;++t)s(h[t])},shader:o,frag:-1,vert:-1}}function C(t,e,r,n,a,i){function o(a){var i;i=null===e.next?5121:e.next.colorAttachments[0].texture._texture.type;var o=0,l=0,s=n.framebufferWidth,u=n.framebufferHeight,c=null;return G(a)?c=a:a&&(o=0|a.x,l=0|a.y,s=0|(a.width||n.framebufferWidth-o),u=0|(a.height||n.framebufferHeight-l),c=a.data||null),r(),a=s*u*4,c||(5121===i?c=new Uint8Array(a):5126===i&&(c=c||new Float32Array(a))),t.pixelStorei(3333,4),t.readPixels(o,l,s,u,6408,i,c),c}return function(t){return t&&"framebuffer"in t?function(t){var r;return e.setFBO({framebuffer:t.framebuffer},function(){r=o(t)}),r}(t):o(t)}}function S(t){return Array.prototype.slice.call(t)}function L(t){return S(t).join("")}function O(){function t(){var t=[],e=[];return j(function(){t.push.apply(t,S(arguments))},{def:function(){var n="v"+r++;return e.push(n),0<arguments.length&&(t.push(n,"="),t.push.apply(t,S(arguments)),t.push(";")),n},toString:function(){return L([0<e.length?"var "+e+";":"",L(t)])}})}function e(){function e(t,e){n(t,e,"=",r.def(t,e),";")}var r=t(),n=t(),a=r.toString,i=n.toString;return j(function(){r.apply(r,S(arguments))},{def:r.def,entry:r,exit:n,save:e,set:function(t,n,a){e(t,n),r(t,n,"=",a,";")},toString:function(){return a()+i()}})}var r=0,n=[],a=[],i=t(),o={};return{global:i,link:function(t){for(var e=0;e<a.length;++e)if(a[e]===t)return n[e];return e="g"+r++,n.push(e),a.push(t),e},block:t,proc:function(t,r){function n(){var t="a"+a.length;return a.push(t),t}var a=[];r=r||0;for(var i=0;i<r;++i)n();var l=(i=e()).toString;return o[t]=j(i,{arg:n,toString:function(){return L(["function(",a.join(),"){",l(),"}"])}})},scope:e,cond:function(){var t=L(arguments),r=e(),n=e(),a=r.toString,i=n.toString;return j(r,{then:function(){return r.apply(r,S(arguments)),this},else:function(){return n.apply(n,S(arguments)),this},toString:function(){var e=i();return e&&(e="else{"+e+"}"),L(["if(",t,"){",a(),"}",e])}})},compile:function(){var t=['"use strict";',i,"return {"];Object.keys(o).forEach(function(e){t.push('"',e,'":',o[e].toString(),",")}),t.push("}");var e=L(t).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,n.concat(e)).apply(null,a)}}}function D(t){return Array.isArray(t)||G(t)||i(t)}function R(t){return t.sort(function(t,e){return"viewport"===t?-1:"viewport"===e?1:t<e?-1:1})}function P(t,e,r,n){this.thisDep=t,this.contextDep=e,this.propDep=r,this.append=n}function I(t){return t&&!(t.thisDep||t.contextDep||t.propDep)}function B(t){return new P(!1,!1,!1,t)}function F(t,e){var r=t.type;return 0===r?new P(!0,1<=(r=t.data.length),2<=r,e):4===r?new P((r=t.data).thisDep,r.contextDep,r.propDep,e):new P(3===r,2===r,1===r,e)}function z(t,e,r,n,a,i,l,s,u,c,f,h,d,p,g){function v(t){return t.replace(".","_")}function y(t,e,r){var n=v(t);nt.push(t),et[n]=tt[n]=!!r,at[n]=e}function x(t,e,r){var n=v(t);nt.push(t),Array.isArray(r)?(tt[n]=r.slice(),et[n]=r.slice()):tt[n]=et[n]=r,it[n]=e}function b(){var t=O(),r=t.link,n=t.global;t.id=st++,t.batchId="0";var a=r(ot),i=t.shared={props:"a0"};Object.keys(ot).forEach(function(t){i[t]=n.def(a,".",t)});var o=t.next={},l=t.current={};Object.keys(it).forEach(function(t){Array.isArray(tt[t])&&(o[t]=n.def(i.next,".",t),l[t]=n.def(i.current,".",t))});var s=t.constants={};Object.keys(lt).forEach(function(t){s[t]=n.def(JSON.stringify(lt[t]))}),t.invoke=function(e,n){switch(n.type){case 0:var a=["this",i.context,i.props,t.batchId];return e.def(r(n.data),".call(",a.slice(0,Math.max(n.data.length+1,4)),")");case 1:return e.def(i.props,n.data);case 2:return e.def(i.context,n.data);case 3:return e.def("this",n.data);case 4:return n.data.append(t,e),n.data.ref}},t.attribCache={};var u={};return t.scopeAttrib=function(t){if((t=e.id(t))in u)return u[t];var n=c.scope[t];return n||(n=c.scope[t]=new Z),u[t]=r(n)},t}function _(t,e){var r=t.static,n=t.dynamic;if("framebuffer"in r){var a=r.framebuffer;return a?(a=s.getFramebuffer(a),B(function(t,e){var r=t.link(a),n=t.shared;return e.set(n.framebuffer,".next",r),n=n.context,e.set(n,".framebufferWidth",r+".width"),e.set(n,".framebufferHeight",r+".height"),r})):B(function(t,e){var r=t.shared;return e.set(r.framebuffer,".next","null"),r=r.context,e.set(r,".framebufferWidth",r+".drawingBufferWidth"),e.set(r,".framebufferHeight",r+".drawingBufferHeight"),"null"})}if("framebuffer"in n){var i=n.framebuffer;return F(i,function(t,e){var r=t.invoke(e,i),n=t.shared,a=n.framebuffer;r=e.def(a,".getFramebuffer(",r,")");return e.set(a,".next",r),n=n.context,e.set(n,".framebufferWidth",r+"?"+r+".width:"+n+".drawingBufferWidth"),e.set(n,".framebufferHeight",r+"?"+r+".height:"+n+".drawingBufferHeight"),r})}return null}function w(t){function r(t){if(t in n){var r=e.id(n[t]);return(t=B(function(){return r})).id=r,t}if(t in a){var i=a[t];return F(i,function(t,e){var r=t.invoke(e,i);return e.def(t.shared.strings,".id(",r,")")})}return null}var n=t.static,a=t.dynamic,i=r("frag"),o=r("vert"),l=null;return I(i)&&I(o)?(l=f.program(o.id,i.id),t=B(function(t,e){return t.link(l)})):t=new P(i&&i.thisDep||o&&o.thisDep,i&&i.contextDep||o&&o.contextDep,i&&i.propDep||o&&o.propDep,function(t,e){var r,n,a=t.shared.shader;return r=i?i.append(t,e):e.def(a,".","frag"),n=o?o.append(t,e):e.def(a,".","vert"),e.def(a+".program("+n+","+r+")")}),{frag:i,vert:o,progVar:t,program:l}}function A(t,e){function r(t,e){if(t in n){var r=0|n[t];return B(function(t,n){return e&&(t.OFFSET=r),r})}if(t in a){var i=a[t];return F(i,function(t,r){var n=t.invoke(r,i);return e&&(t.OFFSET=n),n})}return e&&o?B(function(t,e){return t.OFFSET="0",0}):null}var n=t.static,a=t.dynamic,o=function(){if("elements"in n){var t=n.elements;D(t)?t=i.getElements(i.create(t,!0)):t&&(t=i.getElements(t));var e=B(function(e,r){if(t){var n=e.link(t);return e.ELEMENTS=n}return e.ELEMENTS=null});return e.value=t,e}if("elements"in a){var r=a.elements;return F(r,function(t,e){var n=(a=t.shared).isBufferArgs,a=a.elements,i=t.invoke(e,r),o=e.def("null");n=e.def(n,"(",i,")"),i=t.cond(n).then(o,"=",a,".createStream(",i,");").else(o,"=",a,".getElements(",i,");");return e.entry(i),e.exit(t.cond(n).then(a,".destroyStream(",o,");")),t.ELEMENTS=o})}return null}(),l=r("offset",!0);return{elements:o,primitive:function(){if("primitive"in n){var t=n.primitive;return B(function(e,r){return rt[t]})}if("primitive"in a){var e=a.primitive;return F(e,function(t,r){var n=t.constants.primTypes,a=t.invoke(r,e);return r.def(n,"[",a,"]")})}return o?I(o)?o.value?B(function(t,e){return e.def(t.ELEMENTS,".primType")}):B(function(){return 4}):new P(o.thisDep,o.contextDep,o.propDep,function(t,e){var r=t.ELEMENTS;return e.def(r,"?",r,".primType:",4)}):null}(),count:function(){if("count"in n){var t=0|n.count;return B(function(){return t})}if("count"in a){var e=a.count;return F(e,function(t,r){return t.invoke(r,e)})}return o?I(o)?o?l?new P(l.thisDep,l.contextDep,l.propDep,function(t,e){return e.def(t.ELEMENTS,".vertCount-",t.OFFSET)}):B(function(t,e){return e.def(t.ELEMENTS,".vertCount")}):B(function(){return-1}):new P(o.thisDep||l.thisDep,o.contextDep||l.contextDep,o.propDep||l.propDep,function(t,e){var r=t.ELEMENTS;return t.OFFSET?e.def(r,"?",r,".vertCount-",t.OFFSET,":-1"):e.def(r,"?",r,".vertCount:-1")}):null}(),instances:r("instances",!1),offset:l}}function M(t,r){var n=t.static,i=t.dynamic,o={};return Object.keys(n).forEach(function(t){var r=n[t],i=e.id(t),l=new Z;if(D(r))l.state=1,l.buffer=a.getBuffer(a.create(r,34962,!1,!0)),l.type=0;else if(u=a.getBuffer(r))l.state=1,l.buffer=u,l.type=0;else if(r.constant){var s=r.constant;l.buffer="null",l.state=2,"number"==typeof s?l.x=s:gt.forEach(function(t,e){e<s.length&&(l[t]=s[e])})}else{var u=D(r.buffer)?a.getBuffer(a.create(r.buffer,34962,!1,!0)):a.getBuffer(r.buffer),c=0|r.offset,f=0|r.stride,h=0|r.size,d=!!r.normalized,p=0;"type"in r&&(p=Q[r.type]),r=0|r.divisor,l.buffer=u,l.state=1,l.size=h,l.normalized=d,l.type=p||u.dtype,l.offset=c,l.stride=f,l.divisor=r}o[t]=B(function(t,e){var r=t.attribCache;if(i in r)return r[i];var n={isStream:!1};return Object.keys(l).forEach(function(t){n[t]=l[t]}),l.buffer&&(n.buffer=t.link(l.buffer),n.type=n.type||n.buffer+".dtype"),r[i]=n})}),Object.keys(i).forEach(function(t){var e=i[t];o[t]=F(e,function(t,r){function n(t){r(s[t],"=",a,".",t,"|0;")}var a=t.invoke(r,e),i=t.shared,o=i.isBufferArgs,l=i.buffer,s={isStream:r.def(!1)},u=new Z;u.state=1,Object.keys(u).forEach(function(t){s[t]=r.def(""+u[t])});var c=s.buffer,f=s.type;return r("if(",o,"(",a,")){",s.isStream,"=true;",c,"=",l,".createStream(",34962,",",a,");",f,"=",c,".dtype;","}else{",c,"=",l,".getBuffer(",a,");","if(",c,"){",f,"=",c,".dtype;",'}else if("constant" in ',a,"){",s.state,"=",2,";","if(typeof "+a+'.constant === "number"){',s[gt[0]],"=",a,".constant;",gt.slice(1).map(function(t){return s[t]}).join("="),"=0;","}else{",gt.map(function(t,e){return s[t]+"="+a+".constant.length>="+e+"?"+a+".constant["+e+"]:0;"}).join(""),"}}else{","if(",o,"(",a,".buffer)){",c,"=",l,".createStream(",34962,",",a,".buffer);","}else{",c,"=",l,".getBuffer(",a,".buffer);","}",f,'="type" in ',a,"?",i.glTypes,"[",a,".type]:",c,".dtype;",s.normalized,"=!!",a,".normalized;"),n("size"),n("offset"),n("stride"),n("divisor"),r("}}"),r.exit("if(",s.isStream,"){",l,".destroyStream(",c,");","}"),s})}),o}function T(t,e,r,n,a){var i=_(t),l=function(t,e,r){function n(t){if(t in a){var r=a[t];t=!0;var n,o,l=0|r.x,s=0|r.y;return"width"in r?n=0|r.width:t=!1,"height"in r?o=0|r.height:t=!1,new P(!t&&e&&e.thisDep,!t&&e&&e.contextDep,!t&&e&&e.propDep,function(t,e){var a=t.shared.context,i=n;"width"in r||(i=e.def(a,".","framebufferWidth","-",l));var u=o;return"height"in r||(u=e.def(a,".","framebufferHeight","-",s)),[l,s,i,u]})}if(t in i){var u=i[t];return t=F(u,function(t,e){var r=t.invoke(e,u),n=t.shared.context,a=e.def(r,".x|0"),i=e.def(r,".y|0");return[a,i,e.def('"width" in ',r,"?",r,".width|0:","(",n,".","framebufferWidth","-",a,")"),r=e.def('"height" in ',r,"?",r,".height|0:","(",n,".","framebufferHeight","-",i,")")]}),e&&(t.thisDep=t.thisDep||e.thisDep,t.contextDep=t.contextDep||e.contextDep,t.propDep=t.propDep||e.propDep),t}return e?new P(e.thisDep,e.contextDep,e.propDep,function(t,e){var r=t.shared.context;return[0,0,e.def(r,".","framebufferWidth"),e.def(r,".","framebufferHeight")]}):null}var a=t.static,i=t.dynamic;if(t=n("viewport")){var o=t;t=new P(t.thisDep,t.contextDep,t.propDep,function(t,e){var r=o.append(t,e),n=t.shared.context;return e.set(n,".viewportWidth",r[2]),e.set(n,".viewportHeight",r[3]),r})}return{viewport:t,scissor_box:n("scissor.box")}}(t,i),s=A(t),u=function(t,e){var r=t.static,n=t.dynamic,a={};return nt.forEach(function(t){function e(e,o){if(t in r){var l=e(r[t]);a[i]=B(function(){return l})}else if(t in n){var s=n[t];a[i]=F(s,function(t,e){return o(t,e,t.invoke(e,s))})}}var i=v(t);switch(t){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return e(function(t){return t},function(t,e,r){return r});case"depth.func":return e(function(t){return yt[t]},function(t,e,r){return e.def(t.constants.compareFuncs,"[",r,"]")});case"depth.range":return e(function(t){return t},function(t,e,r){return[e.def("+",r,"[0]"),e=e.def("+",r,"[1]")]});case"blend.func":return e(function(t){return[mt["srcRGB"in t?t.srcRGB:t.src],mt["dstRGB"in t?t.dstRGB:t.dst],mt["srcAlpha"in t?t.srcAlpha:t.src],mt["dstAlpha"in t?t.dstAlpha:t.dst]]},function(t,e,r){function n(t,n){return e.def('"',t,n,'" in ',r,"?",r,".",t,n,":",r,".",t)}t=t.constants.blendFuncs;var a=n("src","RGB"),i=n("dst","RGB"),o=(a=e.def(t,"[",a,"]"),e.def(t,"[",n("src","Alpha"),"]"));return[a,i=e.def(t,"[",i,"]"),o,t=e.def(t,"[",n("dst","Alpha"),"]")]});case"blend.equation":return e(function(t){return"string"==typeof t?[J[t],J[t]]:"object"==typeof t?[J[t.rgb],J[t.alpha]]:void 0},function(t,e,r){var n=t.constants.blendEquations,a=e.def(),i=e.def();return(t=t.cond("typeof ",r,'==="string"')).then(a,"=",i,"=",n,"[",r,"];"),t.else(a,"=",n,"[",r,".rgb];",i,"=",n,"[",r,".alpha];"),e(t),[a,i]});case"blend.color":return e(function(t){return o(4,function(e){return+t[e]})},function(t,e,r){return o(4,function(t){return e.def("+",r,"[",t,"]")})});case"stencil.mask":return e(function(t){return 0|t},function(t,e,r){return e.def(r,"|0")});case"stencil.func":return e(function(t){return[yt[t.cmp||"keep"],t.ref||0,"mask"in t?t.mask:-1]},function(t,e,r){return[t=e.def('"cmp" in ',r,"?",t.constants.compareFuncs,"[",r,".cmp]",":",7680),e.def(r,".ref|0"),e=e.def('"mask" in ',r,"?",r,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return e(function(e){return["stencil.opBack"===t?1029:1028,xt[e.fail||"keep"],xt[e.zfail||"keep"],xt[e.zpass||"keep"]]},function(e,r,n){function a(t){return r.def('"',t,'" in ',n,"?",i,"[",n,".",t,"]:",7680)}var i=e.constants.stencilOps;return["stencil.opBack"===t?1029:1028,a("fail"),a("zfail"),a("zpass")]});case"polygonOffset.offset":return e(function(t){return[0|t.factor,0|t.units]},function(t,e,r){return[e.def(r,".factor|0"),e=e.def(r,".units|0")]});case"cull.face":return e(function(t){var e=0;return"front"===t?e=1028:"back"===t&&(e=1029),e},function(t,e,r){return e.def(r,'==="front"?',1028,":",1029)});case"lineWidth":return e(function(t){return t},function(t,e,r){return r});case"frontFace":return e(function(t){return bt[t]},function(t,e,r){return e.def(r+'==="cw"?2304:2305')});case"colorMask":return e(function(t){return t.map(function(t){return!!t})},function(t,e,r){return o(4,function(t){return"!!"+r+"["+t+"]"})});case"sample.coverage":return e(function(t){return["value"in t?t.value:1,!!t.invert]},function(t,e,r){return[e.def('"value" in ',r,"?+",r,".value:1"),e=e.def("!!",r,".invert")]})}}),a}(t),c=w(t),f=l.viewport;return f&&(u.viewport=f),(l=l[f=v("scissor.box")])&&(u[f]=l),(i={framebuffer:i,draw:s,shader:c,state:u,dirty:l=0<Object.keys(u).length}).profile=function(t){var e,r=t.static;if(t=t.dynamic,"profile"in r){var n=!!r.profile;(e=B(function(t,e){return n})).enable=n}else if("profile"in t){var a=t.profile;e=F(a,function(t,e){return t.invoke(e,a)})}return e}(t),i.uniforms=function(t,e){var r=t.static,n=t.dynamic,a={};return Object.keys(r).forEach(function(t){var e,n=r[t];if("number"==typeof n||"boolean"==typeof n)e=B(function(){return n});else if("function"==typeof n){var i=n._reglType;"texture2d"===i||"textureCube"===i?e=B(function(t){return t.link(n)}):"framebuffer"!==i&&"framebufferCube"!==i||(e=B(function(t){return t.link(n.color[0])}))}else m(n)&&(e=B(function(t){return t.global.def("[",o(n.length,function(t){return n[t]}),"]")}));e.value=n,a[t]=e}),Object.keys(n).forEach(function(t){var e=n[t];a[t]=F(e,function(t,r){return t.invoke(r,e)})}),a}(r),i.attributes=M(e),i.context=function(t){var e=t.static,r=t.dynamic,n={};return Object.keys(e).forEach(function(t){var r=e[t];n[t]=B(function(t,e){return"number"==typeof r||"boolean"==typeof r?""+r:t.link(r)})}),Object.keys(r).forEach(function(t){var e=r[t];n[t]=F(e,function(t,r){return t.invoke(r,e)})}),n}(n),i}function k(t,e,r){var n=t.shared.context,a=t.scope();Object.keys(r).forEach(function(i){e.save(n,"."+i),a(n,".",i,"=",r[i].append(t,e),";")}),e(a)}function E(t,e,r,n){var a,i=(l=t.shared).gl,o=l.framebuffer;K&&(a=e.def(l.extensions,".webgl_draw_buffers"));var l=(s=t.constants).drawBuffer,s=s.backBuffer;t=r?r.append(t,e):e.def(o,".next"),n||e("if(",t,"!==",o,".cur){"),e("if(",t,"){",i,".bindFramebuffer(",36160,",",t,".framebuffer);"),K&&e(a,".drawBuffersWEBGL(",l,"[",t,".colorAttachments.length]);"),e("}else{",i,".bindFramebuffer(",36160,",null);"),K&&e(a,".drawBuffersWEBGL(",s,");"),e("}",o,".cur=",t,";"),n||e("}")}function C(t,e,r){var n=t.shared,a=n.gl,i=t.current,l=t.next,s=n.current,u=n.next,c=t.cond(s,".dirty");nt.forEach(function(e){var n,f;if(!((e=v(e))in r.state))if(e in l){n=l[e],f=i[e];var h=o(tt[e].length,function(t){return c.def(n,"[",t,"]")});c(t.cond(h.map(function(t,e){return t+"!=="+f+"["+e+"]"}).join("||")).then(a,".",it[e],"(",h,");",h.map(function(t,e){return f+"["+e+"]="+t}).join(";"),";"))}else n=c.def(u,".",e),h=t.cond(n,"!==",s,".",e),c(h),e in at?h(t.cond(n).then(a,".enable(",at[e],");").else(a,".disable(",at[e],");"),s,".",e,"=",n,";"):h(a,".",it[e],"(",n,");",s,".",e,"=",n,";")}),0===Object.keys(r.state).length&&c(s,".dirty=false;"),e(c)}function S(t,e,r,n){var a=t.shared,i=t.current,o=a.current,l=a.gl;R(Object.keys(r)).forEach(function(a){var s=r[a];if(!n||n(s)){var u=s.append(t,e);if(at[a]){var c=at[a];I(s)?e(l,u?".enable(":".disable(",c,");"):e(t.cond(u).then(l,".enable(",c,");").else(l,".disable(",c,");")),e(o,".",a,"=",u,";")}else if(m(u)){var f=i[a];e(l,".",it[a],"(",u,");",u.map(function(t,e){return f+"["+e+"]="+t}).join(";"),";")}else e(l,".",it[a],"(",u,");",o,".",a,"=",u,";")}})}function L(t,e){$&&(t.instancing=e.def(t.shared.extensions,".angle_instanced_arrays"))}function z(t,e,r,n,a){function i(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function o(t){t(u=e.def(),"=",i(),";"),"string"==typeof a?t(h,".count+=",a,";"):t(h,".count++;"),p&&(n?t(c=e.def(),"=",g,".getNumPendingQueries();"):t(g,".beginQuery(",h,");"))}function l(t){t(h,".cpuTime+=",i(),"-",u,";"),p&&(n?t(g,".pushScopeStats(",c,",",g,".getNumPendingQueries(),",h,");"):t(g,".endQuery();"))}function s(t){var r=e.def(d,".profile");e(d,".profile=",t,";"),e.exit(d,".profile=",r,";")}var u,c,f=t.shared,h=t.stats,d=f.current,g=f.timer;if(r=r.profile){if(I(r))return void(r.enable?(o(e),l(e.exit),s("true")):s("false"));s(r=r.append(t,e))}else r=e.def(d,".profile");o(f=t.block()),e("if(",r,"){",f,"}"),l(t=t.block()),e.exit("if(",r,"){",t,"}")}function N(t,e,r,n,a){function i(r,n,a){function i(){e("if(!",c,".buffer){",s,".enableVertexAttribArray(",u,");}");var r,i=a.type;r=a.size?e.def(a.size,"||",n):n,e("if(",c,".type!==",i,"||",c,".size!==",r,"||",d.map(function(t){return c+"."+t+"!=="+a[t]}).join("||"),"){",s,".bindBuffer(",34962,",",f,".buffer);",s,".vertexAttribPointer(",[u,r,i,a.normalized,a.stride,a.offset],");",c,".type=",i,";",c,".size=",r,";",d.map(function(t){return c+"."+t+"="+a[t]+";"}).join(""),"}"),$&&(i=a.divisor,e("if(",c,".divisor!==",i,"){",t.instancing,".vertexAttribDivisorANGLE(",[u,i],");",c,".divisor=",i,";}"))}function l(){e("if(",c,".buffer){",s,".disableVertexAttribArray(",u,");","}if(",gt.map(function(t,e){return c+"."+t+"!=="+h[e]}).join("||"),"){",s,".vertexAttrib4f(",u,",",h,");",gt.map(function(t,e){return c+"."+t+"="+h[e]+";"}).join(""),"}")}var s=o.gl,u=e.def(r,".location"),c=e.def(o.attributes,"[",u,"]");r=a.state;var f=a.buffer,h=[a.x,a.y,a.z,a.w],d=["buffer","normalized","offset","stride"];1===r?i():2===r?l():(e("if(",r,"===",1,"){"),i(),e("}else{"),l(),e("}"))}var o=t.shared;n.forEach(function(n){var o,l=n.name,s=r.attributes[l];if(s){if(!a(s))return;o=s.append(t,e)}else{if(!a(_t))return;var u=t.scopeAttrib(l);o={},Object.keys(new Z).forEach(function(t){o[t]=e.def(u,".",t)})}i(t.link(n),function(t){switch(t){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(n.info.type),o)})}function j(t,r,n,a,i){for(var l,s=t.shared,u=s.gl,c=0;c<a.length;++c){var f,h=(g=a[c]).name,d=g.info.type,p=n.uniforms[h],g=t.link(g)+".location";if(p){if(!i(p))continue;if(I(p)){if(h=p.value,35678===d||35680===d)r(u,".uniform1i(",g,",",(d=t.link(h._texture||h.color[0]._texture))+".bind());"),r.exit(d,".unbind();");else if(35674===d||35675===d||35676===d)h=t.global.def("new Float32Array(["+Array.prototype.slice.call(h)+"])"),p=2,35675===d?p=3:35676===d&&(p=4),r(u,".uniformMatrix",p,"fv(",g,",false,",h,");");else{switch(d){case 5126:l="1f";break;case 35664:l="2f";break;case 35665:l="3f";break;case 35666:l="4f";break;case 35670:case 5124:l="1i";break;case 35671:case 35667:l="2i";break;case 35672:case 35668:l="3i";break;case 35673:l="4i";break;case 35669:l="4i"}r(u,".uniform",l,"(",g,",",m(h)?Array.prototype.slice.call(h):h,");")}continue}f=p.append(t,r)}else{if(!i(_t))continue;f=r.def(s.uniforms,"[",e.id(h),"]")}switch(35678===d?r("if(",f,"&&",f,'._reglType==="framebuffer"){',f,"=",f,".color[0];","}"):35680===d&&r("if(",f,"&&",f,'._reglType==="framebufferCube"){',f,"=",f,".color[0];","}"),h=1,d){case 35678:case 35680:r(u,".uniform1i(",g,",",d=r.def(f,"._texture"),".bind());"),r.exit(d,".unbind();");continue;case 5124:case 35670:l="1i";break;case 35667:case 35671:l="2i",h=2;break;case 35668:case 35672:l="3i",h=3;break;case 35669:case 35673:l="4i",h=4;break;case 5126:l="1f";break;case 35664:l="2f",h=2;break;case 35665:l="3f",h=3;break;case 35666:l="4f",h=4;break;case 35674:l="Matrix2fv";break;case 35675:l="Matrix3fv";break;case 35676:l="Matrix4fv"}if(r(u,".uniform",l,"(",g,","),"M"===l.charAt(0)){g=Math.pow(d-35674+2,2);var v=t.global.def("new Float32Array(",g,")");r("false,(Array.isArray(",f,")||",f," instanceof Float32Array)?",f,":(",o(g,function(t){return v+"["+t+"]="+f+"["+t+"]"}),",",v,")")}else r(1<h?o(h,function(t){return f+"["+t+"]"}):f);r(");")}}function U(t,e,r,n){function a(a){var i=h[a];return i?i.contextDep&&n.contextDynamic||i.propDep?i.append(t,r):i.append(t,e):e.def(f,".",a)}function i(){function t(){r(s,".drawElementsInstancedANGLE(",[p,v,m,g+"<<(("+m+"-5121)>>1)",l],");")}function e(){r(s,".drawArraysInstancedANGLE(",[p,g,v,l],");")}d?y?t():(r("if(",d,"){"),t(),r("}else{"),e(),r("}")):e()}function o(){function t(){r(c+".drawElements("+[p,v,m,g+"<<(("+m+"-5121)>>1)"]+");")}function e(){r(c+".drawArrays("+[p,g,v]+");")}d?y?t():(r("if(",d,"){"),t(),r("}else{"),e(),r("}")):e()}var l,s,u=t.shared,c=u.gl,f=u.draw,h=n.draw,d=function(){var a=h.elements,i=e;return a?((a.contextDep&&n.contextDynamic||a.propDep)&&(i=r),a=a.append(t,i)):a=i.def(f,".","elements"),a&&i("if("+a+")"+c+".bindBuffer(34963,"+a+".buffer.buffer);"),a}(),p=a("primitive"),g=a("offset"),v=function(){var a=h.count,i=e;return a?((a.contextDep&&n.contextDynamic||a.propDep)&&(i=r),a=a.append(t,i)):a=i.def(f,".","count"),a}();if("number"==typeof v){if(0===v)return}else r("if(",v,"){"),r.exit("}");$&&(l=a("instances"),s=t.instancing);var m=d+".type",y=h.elements&&I(h.elements);$&&("number"!=typeof l||0<=l)?"string"==typeof l?(r("if(",l,">0){"),i(),r("}else if(",l,"<0){"),o(),r("}")):i():o()}function H(t,e,r,n,a){return a=(e=b()).proc("body",a),$&&(e.instancing=a.def(e.shared.extensions,".angle_instanced_arrays")),t(e,a,r,n),e.compile().body}function q(t,e,r,n){L(t,e),N(t,e,r,n.attributes,function(){return!0}),j(t,e,r,n.uniforms,function(){return!0}),U(t,e,e,r)}function G(t,e,r,n){function a(){return!0}t.batchId="a1",L(t,e),N(t,e,r,n.attributes,a),j(t,e,r,n.uniforms,a),U(t,e,e,r)}function X(t,e,r,n){function a(t){return t.contextDep&&o||t.propDep}function i(t){return!a(t)}L(t,e);var o=r.contextDep,l=e.def(),s=e.def();t.shared.props=s,t.batchId=l;var u=t.scope(),c=t.scope();e(u.entry,"for(",l,"=0;",l,"<","a1",";++",l,"){",s,"=","a0","[",l,"];",c,"}",u.exit),r.needsContext&&k(t,c,r.context),r.needsFramebuffer&&E(t,c,r.framebuffer),S(t,c,r.state,a),r.profile&&a(r.profile)&&z(t,c,r,!1,!0),n?(N(t,u,r,n.attributes,i),N(t,c,r,n.attributes,a),j(t,u,r,n.uniforms,i),j(t,c,r,n.uniforms,a),U(t,u,c,r)):(e=t.global.def("{}"),n=r.shader.progVar.append(t,c),s=c.def(n,".id"),u=c.def(e,"[",s,"]"),c(t.shared.gl,".useProgram(",n,".program);","if(!",u,"){",u,"=",e,"[",s,"]=",t.link(function(e){return H(G,t,r,e,2)}),"(",n,");}",u,".call(this,a0[",l,"],",l,");"))}function Y(t,r){function n(e){var n=r.shader[e];n&&a.set(i.shader,"."+e,n.append(t,a))}var a=t.proc("scope",3);t.batchId="a2";var i=t.shared,o=i.current;k(t,a,r.context),r.framebuffer&&r.framebuffer.append(t,a),R(Object.keys(r.state)).forEach(function(e){var n=r.state[e].append(t,a);m(n)?n.forEach(function(r,n){a.set(t.next[e],"["+n+"]",r)}):a.set(i.next,"."+e,n)}),z(t,a,r,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(e){var n=r.draw[e];n&&a.set(i.draw,"."+e,""+n.append(t,a))}),Object.keys(r.uniforms).forEach(function(n){a.set(i.uniforms,"["+e.id(n)+"]",r.uniforms[n].append(t,a))}),Object.keys(r.attributes).forEach(function(e){var n=r.attributes[e].append(t,a),i=t.scopeAttrib(e);Object.keys(new Z).forEach(function(t){a.set(i,"."+t,n[t])})}),n("vert"),n("frag"),0<Object.keys(r.state).length&&(a(o,".dirty=true;"),a.exit(o,".dirty=true;")),a("a1(",t.shared.context,",a0,",t.batchId,");")}function W(t,e,r){var n=e.static[r];if(n&&function(t){if("object"==typeof t&&!m(t)){for(var e=Object.keys(t),r=0;r<e.length;++r)if(V.isDynamic(t[e[r]]))return!0;return!1}}(n)){var a=t.global,i=Object.keys(n),o=!1,l=!1,s=!1,u=t.global.def("{}");i.forEach(function(e){var r=n[e];if(V.isDynamic(r))"function"==typeof r&&(r=n[e]=V.unbox(r)),e=F(r,null),o=o||e.thisDep,s=s||e.propDep,l=l||e.contextDep;else{switch(a(u,".",e,"="),typeof r){case"number":a(r);break;case"string":a('"',r,'"');break;case"object":Array.isArray(r)&&a("[",r.join(),"]");break;default:a(t.link(r))}a(";")}}),e.dynamic[r]=new V.DynamicVariable(4,{thisDep:o,contextDep:l,propDep:s,ref:u,append:function(t,e){i.forEach(function(r){var a=n[r];V.isDynamic(a)&&(a=t.invoke(e,a),e(u,".",r,"=",a,";"))})}}),delete e.static[r]}}var Z=c.Record,J={add:32774,subtract:32778,"reverse subtract":32779};r.ext_blend_minmax&&(J.min=32775,J.max=32776);var $=r.angle_instanced_arrays,K=r.webgl_draw_buffers,tt={dirty:!0,profile:g.profile},et={},nt=[],at={},it={};y("dither",3024),y("blend.enable",3042),x("blend.color","blendColor",[0,0,0,0]),x("blend.equation","blendEquationSeparate",[32774,32774]),x("blend.func","blendFuncSeparate",[1,0,1,0]),y("depth.enable",2929,!0),x("depth.func","depthFunc",513),x("depth.range","depthRange",[0,1]),x("depth.mask","depthMask",!0),x("colorMask","colorMask",[!0,!0,!0,!0]),y("cull.enable",2884),x("cull.face","cullFace",1029),x("frontFace","frontFace",2305),x("lineWidth","lineWidth",1),y("polygonOffset.enable",32823),x("polygonOffset.offset","polygonOffset",[0,0]),y("sample.alpha",32926),y("sample.enable",32928),x("sample.coverage","sampleCoverage",[1,!1]),y("stencil.enable",2960),x("stencil.mask","stencilMask",-1),x("stencil.func","stencilFunc",[519,0,-1]),x("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),x("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),y("scissor.enable",3089),x("scissor.box","scissor",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]),x("viewport","viewport",[0,0,t.drawingBufferWidth,t.drawingBufferHeight]);var ot={gl:t,context:d,strings:e,next:et,current:tt,draw:h,elements:i,buffer:a,shader:f,attributes:c.state,uniforms:u,framebuffer:s,extensions:r,timer:p,isBufferArgs:D},lt={primTypes:rt,compareFuncs:yt,blendFuncs:mt,blendEquations:J,stencilOps:xt,glTypes:Q,orientationType:bt};K&&(lt.backBuffer=[1029],lt.drawBuffer=o(n.maxDrawbuffers,function(t){return 0===t?[0]:o(t,function(t){return 36064+t})}));var st=0;return{next:et,current:tt,procs:function(){var e=b(),r=e.proc("poll"),a=e.proc("refresh"),i=e.block();r(i),a(i);var l=e.shared,s=l.gl,u=l.next,c=l.current;i(c,".dirty=false;"),E(e,r),E(e,a,null,!0);var f,h=t.getExtension("angle_instanced_arrays");h&&(f=e.link(h));for(var d=0;d<n.maxAttributes;++d){var p=a.def(l.attributes,"[",d,"]"),g=e.cond(p,".buffer");g.then(s,".enableVertexAttribArray(",d,");",s,".bindBuffer(",34962,",",p,".buffer.buffer);",s,".vertexAttribPointer(",d,",",p,".size,",p,".type,",p,".normalized,",p,".stride,",p,".offset);").else(s,".disableVertexAttribArray(",d,");",s,".vertexAttrib4f(",d,",",p,".x,",p,".y,",p,".z,",p,".w);",p,".buffer=null;"),a(g),h&&a(f,".vertexAttribDivisorANGLE(",d,",",p,".divisor);")}return Object.keys(at).forEach(function(t){var n=at[t],o=i.def(u,".",t),l=e.block();l("if(",o,"){",s,".enable(",n,")}else{",s,".disable(",n,")}",c,".",t,"=",o,";"),a(l),r("if(",o,"!==",c,".",t,"){",l,"}")}),Object.keys(it).forEach(function(t){var n,l,f=it[t],h=tt[t],d=e.block();d(s,".",f,"("),m(h)?(f=h.length,n=e.global.def(u,".",t),l=e.global.def(c,".",t),d(o(f,function(t){return n+"["+t+"]"}),");",o(f,function(t){return l+"["+t+"]="+n+"["+t+"];"}).join("")),r("if(",o(f,function(t){return n+"["+t+"]!=="+l+"["+t+"]"}).join("||"),"){",d,"}")):(n=i.def(u,".",t),l=i.def(c,".",t),d(n,");",c,".",t,"=",n,";"),r("if(",n,"!==",l,"){",d,"}")),a(d)}),e.compile()}(),compile:function(t,e,r,n,a){var i=b();return i.stats=i.link(a),Object.keys(e.static).forEach(function(t){W(i,e,t)}),vt.forEach(function(e){W(i,t,e)}),r=T(t,e,r,n),function(t,e){var r=t.proc("draw",1);L(t,r),k(t,r,e.context),E(t,r,e.framebuffer),C(t,r,e),S(t,r,e.state),z(t,r,e,!1,!0);var n=e.shader.progVar.append(t,r);if(r(t.shared.gl,".useProgram(",n,".program);"),e.shader.program)q(t,r,e,e.shader.program);else{var a=t.global.def("{}"),i=r.def(n,".id"),o=r.def(a,"[",i,"]");r(t.cond(o).then(o,".call(this,a0);").else(o,"=",a,"[",i,"]=",t.link(function(r){return H(q,t,e,r,1)}),"(",n,");",o,".call(this,a0);"))}0<Object.keys(e.state).length&&r(t.shared.current,".dirty=true;")}(i,r),Y(i,r),function(t,e){function r(t){return t.contextDep&&a||t.propDep}var n=t.proc("batch",2);t.batchId="0",L(t,n);var a=!1,i=!0;Object.keys(e.context).forEach(function(t){a=a||e.context[t].propDep}),a||(k(t,n,e.context),i=!1);var o=!1;if((l=e.framebuffer)?(l.propDep?a=o=!0:l.contextDep&&a&&(o=!0),o||E(t,n,l)):E(t,n,null),e.state.viewport&&e.state.viewport.propDep&&(a=!0),C(t,n,e),S(t,n,e.state,function(t){return!r(t)}),e.profile&&r(e.profile)||z(t,n,e,!1,"a1"),e.contextDep=a,e.needsContext=i,e.needsFramebuffer=o,(i=e.shader.progVar).contextDep&&a||i.propDep)X(t,n,e,null);else if(i=i.append(t,n),n(t.shared.gl,".useProgram(",i,".program);"),e.shader.program)X(t,n,e,e.shader.program);else{var l=t.global.def("{}"),s=(o=n.def(i,".id"),n.def(l,"[",o,"]"));n(t.cond(s).then(s,".call(this,a0,a1);").else(s,"=",l,"[",o,"]=",t.link(function(r){return H(X,t,e,r,2)}),"(",i,");",s,".call(this,a0,a1);"))}0<Object.keys(e.state).length&&n(t.shared.current,".dirty=true;")}(i,r),i.compile()}}}function N(t,e){for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}var j=function(t,e){for(var r=Object.keys(e),n=0;n<r.length;++n)t[r[n]]=e[r[n]];return t},U=0,V={DynamicVariable:t,define:function(r,n){return new t(r,e(n+""))},isDynamic:function(e){return"function"==typeof e&&!e._reglType||e instanceof t},unbox:function(e,r){return"function"==typeof e?new t(0,e):e},accessor:e},H={next:"function"==typeof requestAnimationFrame?function(t){return requestAnimationFrame(t)}:function(t){return setTimeout(t,16)},cancel:"function"==typeof cancelAnimationFrame?function(t){return cancelAnimationFrame(t)}:clearTimeout},q="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},G=function(t){return t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Uint32Array||t instanceof Int8Array||t instanceof Int16Array||t instanceof Int32Array||t instanceof Float32Array||t instanceof Float64Array||t instanceof Uint8ClampedArray},X=function(t){return Object.keys(t).map(function(e){return t[e]})},Y=o(8,function(){return[]}),W={alloc:s,free:u,allocType:function(t,e){var r=null;switch(t){case 5120:r=new Int8Array(s(e),0,e);break;case 5121:r=new Uint8Array(s(e),0,e);break;case 5122:r=new Int16Array(s(2*e),0,e);break;case 5123:r=new Uint16Array(s(2*e),0,e);break;case 5124:r=new Int32Array(s(4*e),0,e);break;case 5125:r=new Uint32Array(s(4*e),0,e);break;case 5126:r=new Float32Array(s(4*e),0,e);break;default:return null}return r.length!==e?r.subarray(0,e):r},freeType:function(t){u(t.buffer)}},Z={shape:function(t){for(var e=[];t.length;t=t[0])e.push(t.length);return e},flatten:function(t,e,r,n){var a=1;if(e.length)for(var i=0;i<e.length;++i)a*=e[i];else a=0;switch(r=n||W.allocType(r,a),e.length){case 0:break;case 1:for(n=e[0],e=0;e<n;++e)r[e]=t[e];break;case 2:for(n=e[0],e=e[1],i=a=0;i<n;++i)for(var o=t[i],l=0;l<e;++l)r[a++]=o[l];break;case 3:c(t,e[0],e[1],e[2],r,0);break;default:!function t(e,r,n,a,i){for(var o=1,l=n+1;l<r.length;++l)o*=r[l];var s=r[n];if(4==r.length-n){var u=r[n+1],f=r[n+2];for(r=r[n+3],l=0;l<s;++l)c(e[l],u,f,r,a,i),i+=o}else for(l=0;l<s;++l)t(e[l],r,n+1,a,i),i+=o}(t,e,0,r,0)}return r}},J={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Q={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},$={dynamic:35048,stream:35040,static:35044},K=Z.flatten,tt=Z.shape,et=[];et[5120]=1,et[5122]=2,et[5124]=4,et[5121]=1,et[5123]=2,et[5125]=4,et[5126]=4;var rt={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},nt=new Float32Array(1),at=new Uint32Array(nt.buffer),it=[9984,9986,9985,9987],ot=[0,6409,6410,6407,6408],lt={};lt[6409]=lt[6406]=lt[6402]=1,lt[34041]=lt[6410]=2,lt[6407]=lt[35904]=3,lt[6408]=lt[35906]=4;var st=Object.keys(J).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]","[object HTMLImageElement]","[object HTMLVideoElement]"]),ut=[];ut[5121]=1,ut[5126]=4,ut[36193]=2,ut[5123]=2,ut[5125]=4;var ct=[];ct[32854]=2,ct[32855]=2,ct[36194]=2,ct[34041]=4,ct[33776]=.5,ct[33777]=.5,ct[33778]=1,ct[33779]=1,ct[35986]=.5,ct[35987]=1,ct[34798]=1,ct[35840]=.5,ct[35841]=.25,ct[35842]=.5,ct[35843]=.25,ct[36196]=.5;var ft=[];ft[32854]=2,ft[32855]=2,ft[36194]=2,ft[33189]=2,ft[36168]=1,ft[34041]=4,ft[35907]=4,ft[34836]=16,ft[34842]=8,ft[34843]=6;var ht=function(t,e,r,n,a){function i(t){this.id=u++,this.refCount=1,this.renderbuffer=t,this.format=32854,this.height=this.width=0,a.profile&&(this.stats={size:0})}function o(e){var r=e.renderbuffer;t.bindRenderbuffer(36161,null),t.deleteRenderbuffer(r),e.renderbuffer=null,e.refCount=0,delete c[e.id],n.renderbufferCount--}var l={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};e.ext_srgb&&(l.srgba=35907),e.ext_color_buffer_half_float&&(l.rgba16f=34842,l.rgb16f=34843),e.webgl_color_buffer_float&&(l.rgba32f=34836);var s=[];Object.keys(l).forEach(function(t){s[l[t]]=t});var u=0,c={};return i.prototype.decRef=function(){0>=--this.refCount&&o(this)},a.profile&&(n.getTotalRenderbufferSize=function(){var t=0;return Object.keys(c).forEach(function(e){t+=c[e].stats.size}),t}),{create:function(e,r){function o(e,r){var n=0,i=0,c=32854;if("object"==typeof e&&e?("shape"in e?(n=0|(i=e.shape)[0],i=0|i[1]):("radius"in e&&(n=i=0|e.radius),"width"in e&&(n=0|e.width),"height"in e&&(i=0|e.height)),"format"in e&&(c=l[e.format])):"number"==typeof e?(n=0|e,i="number"==typeof r?0|r:n):e||(n=i=1),n!==u.width||i!==u.height||c!==u.format)return o.width=u.width=n,o.height=u.height=i,u.format=c,t.bindRenderbuffer(36161,u.renderbuffer),t.renderbufferStorage(36161,c,n,i),a.profile&&(u.stats.size=ft[u.format]*u.width*u.height),o.format=s[u.format],o}var u=new i(t.createRenderbuffer());return c[u.id]=u,n.renderbufferCount++,o(e,r),o.resize=function(e,r){var n=0|e,i=0|r||n;return n===u.width&&i===u.height?o:(o.width=u.width=n,o.height=u.height=i,t.bindRenderbuffer(36161,u.renderbuffer),t.renderbufferStorage(36161,u.format,n,i),a.profile&&(u.stats.size=ft[u.format]*u.width*u.height),o)},o._reglType="renderbuffer",o._renderbuffer=u,a.profile&&(o.stats=u.stats),o.destroy=function(){u.decRef()},o},clear:function(){X(c).forEach(o)},restore:function(){X(c).forEach(function(e){e.renderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,e.renderbuffer),t.renderbufferStorage(36161,e.format,e.width,e.height)}),t.bindRenderbuffer(36161,null)}}},dt=[];dt[6408]=4;var pt=[];pt[5121]=1,pt[5126]=4,pt[36193]=2;var gt=["x","y","z","w"],vt="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),mt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},yt={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},xt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},bt={cw:2304,ccw:2305},_t=new P(!1,!1,!1,function(){});return function(t){function e(){if(0===W.length)w&&w.update(),$=null;else{$=H.next(e),f();for(var t=W.length-1;0<=t;--t){var r=W[t];r&&r(O,null,0)}v.flush(),w&&w.update()}}function r(){!$&&0<W.length&&($=H.next(e))}function n(){$&&(H.cancel(e),$=null)}function i(t){t.preventDefault(),n(),Z.forEach(function(t){t()})}function o(t){v.getError(),y.restore(),I.restore(),R.restore(),B.restore(),F.restore(),U.restore(),w&&w.restore(),G.procs.refresh(),r(),J.forEach(function(t){t()})}function l(t){function e(t){var e={},r={};return Object.keys(t).forEach(function(n){var a=t[n];V.isDynamic(a)?r[n]=V.unbox(a,n):e[n]=a}),{dynamic:r,static:e}}var r=e(t.context||{}),n=e(t.uniforms||{}),a=e(t.attributes||{}),i=e(function(t){function e(t){if(t in r){var e=r[t];delete r[t],Object.keys(e).forEach(function(n){r[t+"."+n]=e[n]})}}var r=j({},t);return delete r.uniforms,delete r.attributes,delete r.context,"stencil"in r&&r.stencil.op&&(r.stencil.opBack=r.stencil.opFront=r.stencil.op,delete r.stencil.op),e("blend"),e("depth"),e("cull"),e("stencil"),e("polygonOffset"),e("scissor"),e("sample"),r}(t));t={gpuTime:0,cpuTime:0,count:0};var o=(r=G.compile(i,a,n,r,t)).draw,l=r.batch,s=r.scope,u=[];return j(function(t,e){var r;if("function"==typeof t)return s.call(this,null,t,0);if("function"==typeof e)if("number"==typeof t)for(r=0;r<t;++r)s.call(this,null,e,r);else{if(!Array.isArray(t))return s.call(this,t,e,0);for(r=0;r<t.length;++r)s.call(this,t[r],e,r)}else if("number"==typeof t){if(0<t)return l.call(this,function(t){for(;u.length<t;)u.push(null);return u}(0|t),0|t)}else{if(!Array.isArray(t))return o.call(this,t);if(t.length)return l.call(this,t,t.length)}},{stats:t})}function s(t,e){var r=0;G.procs.poll();var n=e.color;n&&(v.clearColor(+n[0]||0,+n[1]||0,+n[2]||0,+n[3]||0),r|=16384),"depth"in e&&(v.clearDepth(+e.depth),r|=256),"stencil"in e&&(v.clearStencil(0|e.stencil),r|=1024),v.clear(r)}function u(t){return W.push(t),r(),{cancel:function(){var e=N(W,t);W[e]=function t(){var e=N(W,t);W[e]=W[W.length-1],--W.length,0>=W.length&&n()}}}}function c(){var t=X.viewport,e=X.scissor_box;t[0]=t[1]=e[0]=e[1]=0,O.viewportWidth=O.framebufferWidth=O.drawingBufferWidth=t[2]=e[2]=v.drawingBufferWidth,O.viewportHeight=O.framebufferHeight=O.drawingBufferHeight=t[3]=e[3]=v.drawingBufferHeight}function f(){O.tick+=1,O.time=d(),c(),G.procs.poll()}function h(){c(),G.procs.refresh(),w&&w.update()}function d(){return(q()-A)/1e3}if(!(t=a(t)))return null;var v=t.gl,m=v.getContextAttributes();v.isContextLost();var y=function(t,e){function r(e){var r;e=e.toLowerCase();try{r=n[e]=t.getExtension(e)}catch(t){}return!!r}for(var n={},a=0;a<e.extensions.length;++a){var i=e.extensions[a];if(!r(i))return e.onDestroy(),e.onDone('"'+i+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return e.optionalExtensions.forEach(r),{extensions:n,restore:function(){Object.keys(n).forEach(function(t){if(!r(t))throw Error("(regl): error restoring extension "+t)})}}}(v,t);if(!y)return null;var x=function(){var t={"":0},e=[""];return{id:function(r){var n=t[r];return n||(n=t[r]=e.length,e.push(r),n)},str:function(t){return e[t]}}}(),b={bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},_=y.extensions,w=function(t,e){function r(t,e,r){var n=o.pop()||new function(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null};n.startQueryIndex=t,n.endQueryIndex=e,n.sum=0,n.stats=r,l.push(n)}var n=e.ext_disjoint_timer_query;if(!n)return null;var a=[],i=[],o=[],l=[],s=[],u=[];return{beginQuery:function(t){var e=a.pop()||n.createQueryEXT();n.beginQueryEXT(35007,e),i.push(e),r(i.length-1,i.length,t)},endQuery:function(){n.endQueryEXT(35007)},pushScopeStats:r,update:function(){var t,e;if(0!==(t=i.length)){u.length=Math.max(u.length,t+1),s.length=Math.max(s.length,t+1),s[0]=0;var r=u[0]=0;for(e=t=0;e<i.length;++e){var c=i[e];n.getQueryObjectEXT(c,34919)?(r+=n.getQueryObjectEXT(c,34918),a.push(c)):i[t++]=c,s[e+1]=r,u[e+1]=t}for(i.length=t,e=t=0;e<l.length;++e){var f=(r=l[e]).startQueryIndex;c=r.endQueryIndex,r.sum+=s[c]-s[f],f=u[f],(c=u[c])===f?(r.stats.gpuTime+=r.sum/1e6,o.push(r)):(r.startQueryIndex=f,r.endQueryIndex=c,l[t++]=r)}l.length=t}},getNumPendingQueries:function(){return i.length},clear:function(){a.push.apply(a,i);for(var t=0;t<a.length;t++)n.deleteQueryEXT(a[t]);i.length=0,a.length=0},restore:function(){i.length=0,a.length=0}}}(0,_),A=q(),S=v.drawingBufferWidth,L=v.drawingBufferHeight,O={tick:0,time:0,viewportWidth:S,viewportHeight:L,framebufferWidth:S,framebufferHeight:L,drawingBufferWidth:S,drawingBufferHeight:L,pixelRatio:t.pixelRatio},D=function(t,e){var r=1;e.ext_texture_filter_anisotropic&&(r=t.getParameter(34047));var n=1,a=1;return e.webgl_draw_buffers&&(n=t.getParameter(34852),a=t.getParameter(36063)),{colorBits:[t.getParameter(3410),t.getParameter(3411),t.getParameter(3412),t.getParameter(3413)],depthBits:t.getParameter(3414),stencilBits:t.getParameter(3415),subpixelBits:t.getParameter(3408),extensions:Object.keys(e).filter(function(t){return!!e[t]}),maxAnisotropic:r,maxDrawbuffers:n,maxColorAttachments:a,pointSizeDims:t.getParameter(33901),lineWidthDims:t.getParameter(33902),maxViewportDims:t.getParameter(3386),maxCombinedTextureUnits:t.getParameter(35661),maxCubeMapSize:t.getParameter(34076),maxRenderbufferSize:t.getParameter(34024),maxTextureUnits:t.getParameter(34930),maxTextureSize:t.getParameter(3379),maxAttributes:t.getParameter(34921),maxVertexUniforms:t.getParameter(36347),maxVertexTextureUnits:t.getParameter(35660),maxVaryingVectors:t.getParameter(36348),maxFragmentUniforms:t.getParameter(36349),glsl:t.getParameter(35724),renderer:t.getParameter(7937),vendor:t.getParameter(7936),version:t.getParameter(7938)}}(v,_),R=p(v,b,t),P=g(v,_,R,b),I=(S=function(t,e,r,n,a){for(t=r.maxAttributes,e=Array(t),r=0;r<t;++r)e[r]=new k;return{Record:k,scope:{},state:e}}(v,_,D),E(v,x,b,t)),B=M(v,_,D,function(){G.procs.poll()},O,b,t),F=ht(v,_,0,b,t),U=T(v,_,D,B,F,b),G=z(v,x,_,D,R,P,0,U,{},S,I,{elements:null,primitive:4,count:-1,offset:0,instances:-1},O,w,t),X=(x=C(v,U,G.procs.poll,O),G.next),Y=v.canvas,W=[],Z=[],J=[],Q=[t.onDestroy],$=null;Y&&(Y.addEventListener("webglcontextlost",i,!1),Y.addEventListener("webglcontextrestored",o,!1));var K=U.setFBO=l({framebuffer:V.define.call(null,1,"framebuffer")});return h(),m=j(l,{clear:function(t){if("framebuffer"in t)if(t.framebuffer&&"framebufferCube"===t.framebuffer_reglType)for(var e=0;6>e;++e)K(j({framebuffer:t.framebuffer.faces[e]},t),s);else K(t,s);else s(0,t)},prop:V.define.bind(null,1),context:V.define.bind(null,2),this:V.define.bind(null,3),draw:l({}),buffer:function(t){return R.create(t,34962,!1,!1)},elements:function(t){return P.create(t,!1)},texture:B.create2D,cube:B.createCube,renderbuffer:F.create,framebuffer:U.create,framebufferCube:U.createCube,attributes:m,frame:u,on:function(t,e){var r;switch(t){case"frame":return u(e);case"lost":r=Z;break;case"restore":r=J;break;case"destroy":r=Q}return r.push(e),{cancel:function(){for(var t=0;t<r.length;++t)if(r[t]===e){r[t]=r[r.length-1],r.pop();break}}}},limits:D,hasExtension:function(t){return 0<=D.extensions.indexOf(t.toLowerCase())},read:x,destroy:function(){W.length=0,n(),Y&&(Y.removeEventListener("webglcontextlost",i),Y.removeEventListener("webglcontextrestored",o)),I.clear(),U.clear(),F.clear(),B.clear(),P.clear(),R.clear(),w&&w.clear(),Q.forEach(function(t){t()})},_gl:v,_refresh:h,poll:function(){f(),w&&w.update()},now:d,stats:b}),t.onDone(null,m),m}},"object"==typeof nT.exports?nT.exports=QM():"function"==typeof CC&&CC.amd?CC(QM):JM.createREGL=QM(),nT=nT.exports;var aT={};function iT(t){return[t]}(function(t){"use strict";aT=function(e,r){e._fullLayout._glcanvas.each(function(n){n.regl||(n.regl=nT({canvas:this,attributes:{antialias:!n.pick,preserveDrawingBuffer:!0},pixelRatio:e._context.plotGlPixelRatio||t.devicePixelRatio,extensions:r||[]}))})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var oT=function(t){return t.key},lT=iT,sT=iT,uT=function(t){return t[0]},cT={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeColor:"white",strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}},fT=oT,hT=lT,dT=oe.sorterAsc,pT=cT.bar.snapRatio;function gT(t,e){return t*(1-pT)+e*pT}var vT=cT.bar.snapClose;function mT(t,e){return t*(1-vT)+e*vT}function yT(t,e,r){if(bT(e,r))return e;for(var n=t[0],a=n,i=1;i<t.length;i++){var o=t[i];if(e<mT(n,o))return gT(n,a);if(e<o||i===t.length-1)return gT(o,n);a=n,n=o}}function xT(t,e,r){if(bT(e,r))return e;for(var n=t[t.length-1],a=n,i=t.length-2;i>=0;i--){var o=t[i];if(e>mT(n,o))return gT(n,a);if(e>o||i===t.length-1)return gT(o,n);a=n,n=o}}function bT(t,e){for(var r=0;r<e.length;r++)if(t>=e[r][0]&&t<=e[r][1])return!0;return!1}function _T(t){t.attr("x",-cT.bar.captureWidth/2).attr("width",cT.bar.captureWidth)}function wT(t){t.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function AT(t){if(!t.brush.filterSpecified)return"0,"+t.height;for(var e,r,n,a=MT(t.brush.filter.getConsolidated(),t.height),i=[0],o=a.length?a[0][0]:null,l=0;l<a.length;l++)r=(e=a[l])[1]-e[0],i.push(o),i.push(r),(n=l+1)<a.length&&(o=a[n][0]-e[1]);return i.push(t.height),i}function MT(t,e){return t.map(function(t){return t.map(function(t){return t*e}).sort(dT)})}function TT(){n.select(document.body).style("cursor",null)}function kT(t){t.attr("stroke-dasharray",AT)}function ET(t,e){var r=n.select(t).selectAll(".highlight, .highlight-shadow");kT(e?r.transition().duration(cT.bar.snapDuration).each("end",e):r)}function CT(t,e){var r,n=t.brush,a=NaN,i={};if(n.filterSpecified){var o=t.height,l=n.filter.getConsolidated(),s=MT(l,o),u=NaN,c=NaN,f=NaN;for(r=0;r<=s.length;r++){var h=s[r];if(h&&h[0]<=e&&e<=h[1]){u=r;break}if(c=r?r-1:NaN,h&&h[0]>e){f=r;break}}if(a=u,isNaN(a)&&(a=isNaN(c)||isNaN(f)?isNaN(c)?f:c:e-s[c][1]<s[f][0]-e?c:f),!isNaN(a)){var d=s[a],p=function(t,e){var r=cT.bar.handleHeight;if(!(e>t[1]+r||e<t[0]-r))return e>=.9*t[1]+.1*t[0]?"n":e<=.9*t[0]+.1*t[1]?"s":"ns"}(d,e);p&&(i.interval=l[a],i.intervalPix=d,i.region=p)}}if(t.ordinal&&!i.region){var g=t.unitTickvals,v=t.unitToPaddedPx.invert(e);for(r=0;r<g.length;r++){var m=[.25*g[Math.max(r-1,0)]+.75*g[r],.25*g[Math.min(r+1,g.length-1)]+.75*g[r]];if(v>=m[0]&&v<=m[1]){i.clickableOrdinalRange=m;break}}}return i}function ST(t){t.on("mousemove",function(t){if(n.event.preventDefault(),!t.parent.inBrushDrag){var e=CT(t,t.height-n.mouse(this)[1]-2*cT.verticalPadding),r="crosshair";e.clickableOrdinalRange?r="pointer":e.region&&(r=e.region+"-resize"),n.select(document.body).style("cursor",r)}}).on("mouseleave",function(t){t.parent.inBrushDrag||TT()}).call(n.behavior.drag().on("dragstart",function(t){n.event.sourceEvent.stopPropagation();var e=t.height-n.mouse(this)[1]-2*cT.verticalPadding,r=t.unitToPaddedPx.invert(e),a=t.brush,i=CT(t,e),o=i.interval,l=a.svgBrush;if(l.wasDragged=!1,l.grabbingBar="ns"===i.region,l.grabbingBar){var s=o.map(t.unitToPaddedPx);l.grabPoint=e-s[0]-cT.verticalPadding,l.barLength=s[1]-s[0]}l.clickableOrdinalRange=i.clickableOrdinalRange,l.stayingIntervals=t.multiselect&&a.filterSpecified?a.filter.getConsolidated():[],o&&(l.stayingIntervals=l.stayingIntervals.filter(function(t){return t[0]!==o[0]&&t[1]!==o[1]})),l.startExtent=i.region?o["s"===i.region?1:0]:r,t.parent.inBrushDrag=!0,l.brushStartCallback()}).on("drag",function(t){n.event.sourceEvent.stopPropagation();var e=t.height-n.mouse(this)[1]-2*cT.verticalPadding,r=t.brush.svgBrush;r.wasDragged=!0,r.grabbingBar?r.newExtent=[e-r.grabPoint,e+r.barLength-r.grabPoint].map(t.unitToPaddedPx.invert):r.newExtent=[r.startExtent,t.unitToPaddedPx.invert(e)].sort(dT);var a=Math.max(0,-r.newExtent[0]),i=Math.max(0,r.newExtent[1]-1);r.newExtent[0]+=a,r.newExtent[1]-=i,r.grabbingBar&&(r.newExtent[1]+=a,r.newExtent[0]-=i),t.brush.filterSpecified=!0,r.extent=r.stayingIntervals.concat([r.newExtent]),r.brushCallback(t),ET(this.parentNode)}).on("dragend",function(t){n.event.sourceEvent.stopPropagation();var e=t.brush,r=e.filter,a=e.svgBrush,i=a.grabbingBar;if(a.grabbingBar=!1,a.grabLocation=void 0,t.parent.inBrushDrag=!1,TT(),!a.wasDragged)return a.wasDragged=void 0,a.clickableOrdinalRange?e.filterSpecified&&t.multiselect?a.extent.push(a.clickableOrdinalRange):(a.extent=[a.clickableOrdinalRange],e.filterSpecified=!0):i?(a.extent=a.stayingIntervals,0===a.extent.length&&OT(e)):OT(e),a.brushCallback(t),ET(this.parentNode),void a.brushEndCallback(e.filterSpecified?r.getConsolidated():[]);var o=function(){r.set(r.getConsolidated())};if(t.ordinal){var l=t.unitTickvals;l[l.length-1]<l[0]&&l.reverse(),a.newExtent=[yT(l,a.newExtent[0],a.stayingIntervals),xT(l,a.newExtent[1],a.stayingIntervals)];var s=a.newExtent[1]>a.newExtent[0];a.extent=a.stayingIntervals.concat(s?[a.newExtent]:[]),a.extent.length||OT(e),a.brushCallback(t),s?ET(this.parentNode,o):(o(),ET(this.parentNode))}else o();a.brushEndCallback(e.filterSpecified?r.getConsolidated():[])}))}function LT(t,e){return t[0]-e[0]}function OT(t){t.filterSpecified=!1,t.svgBrush.extent=[[0,1]]}function DT(t){for(var e,r=t.slice(),n=[],a=r.shift();a;){for(e=a.slice();(a=r.shift())&&a[0]<=e[1];)e[1]=Math.max(e[1],a[1]);n.push(e)}return n}var RT={makeBrush:function(t,e,r,n,a,i){var o,l=function(){var t,e,r=[];return{set:function(n){r=n.map(function(t){return t.slice().sort(dT)}).sort(LT),t=DT(r),e=r.reduce(function(t,e){return[Math.min(t[0],e[0]),Math.max(t[1],e[1])]},[1/0,-1/0])},get:function(){return r.slice()},getConsolidated:function(){return t},getBounds:function(){return e}}}();return l.set(r),{filter:l,filterSpecified:e,svgBrush:{extent:[],brushStartCallback:n,brushCallback:(o=a,function(t){var e=t.brush,r=function(t){return t.svgBrush.extent.map(function(t){return t.slice()})}(e).slice();e.filter.set(r),o()}),brushEndCallback:i}}},ensureAxisBrush:function(t){var e=t.selectAll("."+cT.cn.axisBrush).data(hT,fT);e.enter().append("g").classed(cT.cn.axisBrush,!0),function(t){var e=t.selectAll(".background").data(hT);e.enter().append("rect").classed("background",!0).call(_T).call(wT).style("pointer-events","auto").attr("transform","translate(0 "+cT.verticalPadding+")"),e.call(ST).attr("height",function(t){return t.height-cT.verticalPadding});var r=t.selectAll(".highlight-shadow").data(hT);r.enter().append("line").classed("highlight-shadow",!0).attr("x",-cT.bar.width/2).attr("stroke-width",cT.bar.width+cT.bar.strokeWidth).attr("stroke",cT.bar.strokeColor).attr("opacity",cT.bar.strokeOpacity).attr("stroke-linecap","butt"),r.attr("y1",function(t){return t.height}).call(kT);var n=t.selectAll(".highlight").data(hT);n.enter().append("line").classed("highlight",!0).attr("x",-cT.bar.width/2).attr("stroke-width",cT.bar.width-cT.bar.strokeWidth).attr("stroke",cT.bar.fillColor).attr("opacity",cT.bar.fillOpacity).attr("stroke-linecap","butt"),n.attr("y1",function(t){return t.height}).call(kT)}(e)},cleanRanges:function(t,e){if(Array.isArray(t[0])?(t=t.map(function(t){return t.sort(dT)}),t=e.multiselect?DT(t.sort(LT)):[t[0]]):t=[t.sort(dT)],e.tickvals){var r=e.tickvals.slice().sort(dT);if(!(t=t.map(function(t){var e=[yT(r,t[0],[]),xT(r,t[1],[])];if(e[1]>e[0])return e}).filter(function(t){return t})).length)return}return t.length>1?t:t[0]}},PT=Ns(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D palette;\nuniform sampler2D mask;\nuniform float maskHeight;\n\nuniform vec2 colorClamp;\n\nvarying vec4 fragColor;\n\nvec4 unit_1 = vec4(1, 1, 1, 1);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit_1, unit_1);\n}\n\nfloat axisY(\n        float x,\n        mat4 d[4],\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float y1 = val(d[0], dim1A) + val(d[1], dim1B) + val(d[2], dim1C) + val(d[3], dim1D);\n    float y2 = val(d[0], dim2A) + val(d[1], dim2B) + val(d[2], dim2C) + val(d[3], dim2D);\n    return y1 * (1.0 - x) + y2 * x;\n}\n\nconst int bitsPerByte = 8;\n\nint mod2(int a) {\n    return a - 2 * (a / 2);\n}\n\nint mod8(int a) {\n    return a - 8 * (a / 8);\n}\n\nvec4 zero = vec4(0, 0, 0, 0);\nvec4 unit_0 = vec4(1, 1, 1, 1);\nvec2 xyProjection = vec2(1, 1);\n\nmat4 mclamp(mat4 m, mat4 lo, mat4 hi) {\n    return mat4(clamp(m[0], lo[0], hi[0]),\n                clamp(m[1], lo[1], hi[1]),\n                clamp(m[2], lo[2], hi[2]),\n                clamp(m[3], lo[3], hi[3]));\n}\n\nbool mshow(mat4 p, mat4 lo, mat4 hi) {\n    return mclamp(p, lo, hi) == p;\n}\n\nbool withinBoundingBox(\n        mat4 d[4],\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD\n    ) {\n\n    return mshow(d[0], loA, hiA) &&\n           mshow(d[1], loB, hiB) &&\n           mshow(d[2], loC, hiC) &&\n           mshow(d[3], loD, hiD);\n}\n\nbool withinRasterMask(mat4 d[4], sampler2D mask, float height) {\n    bool result = true;\n    int bitInByteStepper;\n    float valY, valueY, scaleX;\n    int hit, bitmask, valX;\n    for(int i = 0; i < 4; i++) {\n        for(int j = 0; j < 4; j++) {\n            for(int k = 0; k < 4; k++) {\n                bitInByteStepper = mod8(j * 4 + k);\n                valX = i * 2 + j / 2;\n                valY = d[i][j][k];\n                valueY = valY * (height - 1.0) + 0.5;\n                scaleX = (float(valX) + 0.5) / 8.0;\n                hit = int(texture2D(mask, vec2(scaleX, (valueY + 0.5) / height))[3] * 255.0) / int(pow(2.0, float(bitInByteStepper)));\n                result = result && mod2(hit) == 1;\n            }\n        }\n    }\n    return result;\n}\n\nvec4 position(\n        float depth,\n        vec2 resolution, vec2 viewBoxPosition, vec2 viewBoxSize,\n        mat4 dims[4],\n        float signum,\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D,\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD,\n        sampler2D mask, float maskHeight\n    ) {\n\n    float x = 0.5 * signum + 0.5;\n    float y = axisY(x, dims, dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D);\n\n    float show = float(\n                            withinBoundingBox(dims, loA, hiA, loB, hiB, loC, hiC, loD, hiD)\n                         && withinRasterMask(dims, mask, maskHeight)\n                      );\n\n    vec2 viewBoxXY = viewBoxPosition + viewBoxSize * vec2(x, y);\n    float depthOrHide = depth + 2.0 * (1.0 - show);\n\n    return vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depthOrHide,\n        1.0\n    );\n}\n\nvoid main() {\n\n    float prominence = abs(pf[3]);\n\n    mat4 p[4];\n    p[0] = mat4(p0, p1, p2, p3);\n    p[1] = mat4(p4, p5, p6, p7);\n    p[2] = mat4(p8, p9, pa, pb);\n    p[3] = mat4(pc, pd, pe, abs(pf));\n\n    gl_Position = position(\n        1.0 - prominence,\n        resolution, viewBoxPosition, viewBoxSize,\n        p,\n        sign(pf[3]),\n        dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n        loA, hiA, loB, hiB, loC, hiC, loD, hiD,\n        mask, maskHeight\n    );\n\n    float clampedColorIndex = clamp((prominence - colorClamp[0]) / (colorClamp[1] - colorClamp[0]), 0.0, 1.0);\n    fragColor = texture2D(palette, vec2((clampedColorIndex * 255.0 + 0.5) / 256.0, 0.5));\n}\n"]),IT=Ns(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D palette;\n\nuniform vec2 colorClamp;\n\nvarying vec4 fragColor;\n\nvec2 xyProjection = vec2(1, 1);\n\nvec4 unit = vec4(1, 1, 1, 1);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit, unit);\n}\n\nfloat axisY(\n        float x,\n        mat4 d[4],\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float y1 = val(d[0], dim1A) + val(d[1], dim1B) + val(d[2], dim1C) + val(d[3], dim1D);\n    float y2 = val(d[0], dim2A) + val(d[1], dim2B) + val(d[2], dim2C) + val(d[3], dim2D);\n    return y1 * (1.0 - x) + y2 * x;\n}\n\nvec4 position(\n        float depth,\n        vec2 resolution, vec2 viewBoxPosition, vec2 viewBoxSize,\n        mat4 dims[4],\n        float signum,\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float x = 0.5 * signum + 0.5;\n    float y = axisY(x, dims, dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D);\n\n    vec2 viewBoxXY = viewBoxPosition + viewBoxSize * vec2(x, y);\n\n    return vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depth,\n        1.0\n    );\n}\n\nvoid main() {\n\n    float prominence = abs(pf[3]);\n\n    mat4 p[4];\n    p[0] = mat4(p0, p1, p2, p3);\n    p[1] = mat4(p4, p5, p6, p7);\n    p[2] = mat4(p8, p9, pa, pb);\n    p[3] = mat4(pc, pd, pe, abs(pf));\n\n    gl_Position = position(\n        1.0 - prominence,\n        resolution, viewBoxPosition, viewBoxSize,\n        p,\n        sign(pf[3]),\n        dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D\n    );\n\n    float clampedColorIndex = clamp((prominence - colorClamp[0]) / (colorClamp[1] - colorClamp[0]), 0.0, 1.0);\n    fragColor = texture2D(palette, vec2((clampedColorIndex * 255.0 + 0.5) / 256.0, 0.5));\n}\n"]),BT=Ns(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D mask;\nuniform float maskHeight;\n\nuniform vec2 colorClamp;\n\nvarying vec4 fragColor;\n\nvec4 unit_1 = vec4(1, 1, 1, 1);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit_1, unit_1);\n}\n\nfloat axisY(\n        float x,\n        mat4 d[4],\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D\n    ) {\n\n    float y1 = val(d[0], dim1A) + val(d[1], dim1B) + val(d[2], dim1C) + val(d[3], dim1D);\n    float y2 = val(d[0], dim2A) + val(d[1], dim2B) + val(d[2], dim2C) + val(d[3], dim2D);\n    return y1 * (1.0 - x) + y2 * x;\n}\n\nconst int bitsPerByte = 8;\n\nint mod2(int a) {\n    return a - 2 * (a / 2);\n}\n\nint mod8(int a) {\n    return a - 8 * (a / 8);\n}\n\nvec4 zero = vec4(0, 0, 0, 0);\nvec4 unit_0 = vec4(1, 1, 1, 1);\nvec2 xyProjection = vec2(1, 1);\n\nmat4 mclamp(mat4 m, mat4 lo, mat4 hi) {\n    return mat4(clamp(m[0], lo[0], hi[0]),\n                clamp(m[1], lo[1], hi[1]),\n                clamp(m[2], lo[2], hi[2]),\n                clamp(m[3], lo[3], hi[3]));\n}\n\nbool mshow(mat4 p, mat4 lo, mat4 hi) {\n    return mclamp(p, lo, hi) == p;\n}\n\nbool withinBoundingBox(\n        mat4 d[4],\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD\n    ) {\n\n    return mshow(d[0], loA, hiA) &&\n           mshow(d[1], loB, hiB) &&\n           mshow(d[2], loC, hiC) &&\n           mshow(d[3], loD, hiD);\n}\n\nbool withinRasterMask(mat4 d[4], sampler2D mask, float height) {\n    bool result = true;\n    int bitInByteStepper;\n    float valY, valueY, scaleX;\n    int hit, bitmask, valX;\n    for(int i = 0; i < 4; i++) {\n        for(int j = 0; j < 4; j++) {\n            for(int k = 0; k < 4; k++) {\n                bitInByteStepper = mod8(j * 4 + k);\n                valX = i * 2 + j / 2;\n                valY = d[i][j][k];\n                valueY = valY * (height - 1.0) + 0.5;\n                scaleX = (float(valX) + 0.5) / 8.0;\n                hit = int(texture2D(mask, vec2(scaleX, (valueY + 0.5) / height))[3] * 255.0) / int(pow(2.0, float(bitInByteStepper)));\n                result = result && mod2(hit) == 1;\n            }\n        }\n    }\n    return result;\n}\n\nvec4 position(\n        float depth,\n        vec2 resolution, vec2 viewBoxPosition, vec2 viewBoxSize,\n        mat4 dims[4],\n        float signum,\n        mat4 dim1A, mat4 dim2A, mat4 dim1B, mat4 dim2B, mat4 dim1C, mat4 dim2C, mat4 dim1D, mat4 dim2D,\n        mat4 loA, mat4 hiA, mat4 loB, mat4 hiB, mat4 loC, mat4 hiC, mat4 loD, mat4 hiD,\n        sampler2D mask, float maskHeight\n    ) {\n\n    float x = 0.5 * signum + 0.5;\n    float y = axisY(x, dims, dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D);\n\n    float show = float(\n                            withinBoundingBox(dims, loA, hiA, loB, hiB, loC, hiC, loD, hiD)\n                         && withinRasterMask(dims, mask, maskHeight)\n                      );\n\n    vec2 viewBoxXY = viewBoxPosition + viewBoxSize * vec2(x, y);\n    float depthOrHide = depth + 2.0 * (1.0 - show);\n\n    return vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depthOrHide,\n        1.0\n    );\n}\n\nvoid main() {\n\n    float prominence = abs(pf[3]);\n\n    mat4 p[4];\n    p[0] = mat4(p0, p1, p2, p3);\n    p[1] = mat4(p4, p5, p6, p7);\n    p[2] = mat4(p8, p9, pa, pb);\n    p[3] = mat4(pc, pd, pe, abs(pf));\n\n    gl_Position = position(\n        1.0 - prominence,\n        resolution, viewBoxPosition, viewBoxSize,\n        p,\n        sign(pf[3]),\n        dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n        loA, hiA, loB, hiB, loC, hiC, loD, hiD,\n        mask, maskHeight\n    );\n\n    fragColor = vec4(pf.rgb, 1.0);\n}\n"]),FT=Ns(["precision lowp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),zT=1e-6,NT=1e-7,jT=2048,UT=64,VT=2,HT=4,qT=8,GT=UT/qT,XT=[119,119,119],YT=new Uint8Array(4),WT=new Uint8Array(4),ZT={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function JT(t,e,r,n,a){var i=t._gl;i.enable(i.SCISSOR_TEST),i.scissor(e,r,n,a),t.clear({color:[0,0,0,0],depth:1})}function QT(t,e,r,n,a,i){var o=i.key;r.drawCompleted||(!function(t){t.read({x:0,y:0,width:1,height:1,data:YT})}(t),r.drawCompleted=!0),function l(s){var u;u=Math.min(n,a-s*n),i.offset=VT*s*n,i.count=VT*u,0===s&&(window.cancelAnimationFrame(r.currentRafs[o]),delete r.currentRafs[o],JT(t,i.scissorX,i.scissorY,i.scissorWidth,i.viewBoxSize[1])),r.clearOnly||(e(i),s*n+u<a&&(r.currentRafs[o]=window.requestAnimationFrame(function(){l(s+1)})),r.drawCompleted=!1)}(0)}function $T(t,e){return(t>>>8*e)%256/255}function KT(t,e,r){var n,a,i,o=[];for(a=0;a<t;a++)for(i=0;i<VT;i++)for(n=0;n<HT;n++)o.push(e[a*UT+r*HT+n]),r*HT+n===UT-1&&i%2==0&&(o[o.length-1]*=-1);return o}var tk=function(t,e){var r,n,a,i,o,l=e.context,s=e.pick,u=e.regl,c={currentRafs:{},drawCompleted:!0,clearOnly:!1},f=function(t){for(var e={},r=0;r<16;r++)e["p"+r.toString(16)]=t.buffer({usage:"dynamic",type:"float",data:null});return e}(u),h=u.texture(ZT);p(e);var d=u({profile:!1,blend:{enable:l,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!l,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:u.prop("scissorX"),y:u.prop("scissorY"),width:u.prop("scissorWidth"),height:u.prop("scissorHeight")}},viewport:{x:u.prop("viewportX"),y:u.prop("viewportY"),width:u.prop("viewportWidth"),height:u.prop("viewportHeight")},dither:!1,vert:s?BT:l?IT:PT,frag:FT,primitive:"lines",lineWidth:1,attributes:f,uniforms:{resolution:u.prop("resolution"),viewBoxPosition:u.prop("viewBoxPosition"),viewBoxSize:u.prop("viewBoxSize"),dim1A:u.prop("dim1A"),dim2A:u.prop("dim2A"),dim1B:u.prop("dim1B"),dim2B:u.prop("dim2B"),dim1C:u.prop("dim1C"),dim2C:u.prop("dim2C"),dim1D:u.prop("dim1D"),dim2D:u.prop("dim2D"),loA:u.prop("loA"),hiA:u.prop("hiA"),loB:u.prop("loB"),hiB:u.prop("hiB"),loC:u.prop("loC"),hiC:u.prop("hiC"),loD:u.prop("loD"),hiD:u.prop("hiD"),palette:h,mask:u.prop("maskTexture"),maskHeight:u.prop("maskHeight"),colorClamp:u.prop("colorClamp")},offset:u.prop("offset"),count:u.prop("count")});function p(t){r=t.model,n=t.viewModel,a=n.dimensions.slice(),i=a[0]?a[0].values.length:0;var e=r.lines,o=s?e.color.map(function(t,r){return r/e.color.length}):e.color,c=Math.max(1/255,Math.pow(1/o.length,1/3)),d=function(t,e,r){for(var n,a=e.length,i=[],o=0;o<t;o++)for(var l=0;l<UT;l++)i.push(l<a?e[l].paddedUnitValues[o]:l===UT-1?(n=r[o],Math.max(zT,Math.min(1-zT,n))):l>=UT-4?$T(o,UT-2-l):.5);return i}(i,a,o);!function(t,e,r){for(var n=0;n<16;n++)t["p"+n.toString(16)](KT(e,r,n))}(f,i,d),h=u.texture(oe.extendFlat({data:function(t,e,r){for(var n=[],a=0;a<256;a++){var i=t(a/255);n.push((e?XT:i).concat(r))}return n}(r.unitToColor,l,Math.round(255*(l?c:1)))},ZT))}var g=[0,1];var v=[];function m(t,e,n,a,i,o,l,s,u,c,f){var h,d,p,v,m=[t,e],y=[0,1].map(function(){return[0,1,2,3].map(function(){return new Float32Array(16)})});for(h=0;h<2;h++)for(v=m[h],d=0;d<4;d++)for(p=0;p<16;p++)y[h][d][p]=p+16*d===v?1:0;var x=r.lines.canvasOverdrag,b=r.domain,_=r.canvasWidth,w=r.canvasHeight;return oe.extendFlat({key:l,resolution:[_,w],viewBoxPosition:[n+x,a],viewBoxSize:[i,o],i:t,ii:e,dim1A:y[0][0],dim1B:y[0][1],dim1C:y[0][2],dim1D:y[0][3],dim2A:y[1][0],dim2B:y[1][1],dim2C:y[1][2],dim2D:y[1][3],colorClamp:g,scissorX:(s===u?0:n+x)+(r.pad.l-x)+r.layoutWidth*b.x[0],scissorWidth:(s===c?_-n+x:i+.5)+(s===u?n+x:0),scissorY:a+r.pad.b+r.layoutHeight*b.y[0],scissorHeight:o,viewportX:r.pad.l-x+r.layoutWidth*b.x[0],viewportY:r.pad.b+r.layoutHeight*b.y[0],viewportWidth:_,viewportHeight:w},f)}return{setColorDomain:function(t){g[0]=t[0],g[1]=t[1]},render:function(t,e,n){var s,f,h,p=t.length,g=1/0,y=-1/0;for(s=0;s<p;s++)t[s].dim2.canvasX>y&&(y=t[s].dim2.canvasX,h=s),t[s].dim1.canvasX<g&&(g=t[s].dim1.canvasX,f=s);0===p&&JT(u,0,0,r.canvasWidth,r.canvasHeight);var x=l?{}:function(){var t,e,r,n=[0,1].map(function(){return[0,1,2,3].map(function(){return new Float32Array(16)})});for(t=0;t<2;t++)for(e=0;e<4;e++)for(r=0;r<16;r++){var i,l=r+16*e;i=l<a.length?a[l].brush.filter.getBounds()[t]:t,n[t][e][r]=i+(2*t-1)*NT}function s(t,e){var r=jT-1;return[Math.max(0,Math.floor(e[0]*r)),Math.min(r,Math.ceil(e[1]*r))]}for(var c=Array.apply(null,new Array(jT*GT)).map(function(){return 255}),f=0;f<a.length;f++){var h=f%qT,d=(f-h)/qT,p=Math.pow(2,h),g=a[f],v=g.brush.filter.get();if(!(v.length<2))for(var m=s(0,v[0])[1],y=1;y<v.length;y++){for(var x=s(0,v[y]),b=m+1;b<x[0];b++)c[b*GT+d]&=~p;m=Math.max(m,x[1])}}var _={shape:[GT,jT],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:c};return o?o(_):o=u.texture(_),{maskTexture:o,maskHeight:jT,loA:n[0][0],loB:n[0][1],loC:n[0][2],loD:n[0][3],hiA:n[1][0],hiB:n[1][1],hiC:n[1][2],hiD:n[1][3]}}();for(s=0;s<p;s++){var b=t[s],_=b.dim1,w=_.crossfilterDimensionIndex,A=b.canvasX,M=b.canvasY,T=b.dim2.crossfilterDimensionIndex,k=b.panelSizeX,E=b.panelSizeY,C=A+k;if(e||!v[w]||v[w][0]!==A||v[w][1]!==C){v[w]=[A,C];var S=m(w,T,A,M,k,E,_.crossfilterDimensionIndex,s,f,h,x);c.clearOnly=n,QT(u,d,c,e?r.lines.blockLineCount:i,i,S)}}},readPixel:function(t,e){return u.read({x:t,y:e,width:1,height:1,data:WT}),WT},readPixels:function(t,e,r,n){var a=new Uint8Array(4*r*n);return u.read({x:t,y:e,width:r,height:n,data:a}),a},destroy:function(){for(var e in t.style["pointer-events"]="none",h.destroy(),o&&o.destroy(),f)f[e].destroy()},update:p}},ek=oT,rk=lT,nk=uT;function ak(t){return!("visible"in t)||t.visible}function ik(t){var e=t.range?t.range[0]:oe.aggNums(Math.min,null,t.values,t._length),r=t.range?t.range[1]:oe.aggNums(Math.max,null,t.values,t._length);return!isNaN(e)&&isFinite(e)||(e=0),!isNaN(r)&&isFinite(r)||(r=0),e===r&&(0===e?(e-=1,r+=1):(e*=.9,r*=1.1)),[e,r]}function ok(t){return t.dimensions.some(function(t){return t.brush.filterSpecified})}function lk(t,e,r){var a=nk(e),i=a.trace,o=a.lineColor,l=a.cscale,s=i.line,u=i.domain,c=i.dimensions,f=t.width,h=i.labelfont,d=i.tickfont,p=i.rangefont,g=oe.extendDeepNoArrays({},s,{color:o.map(n.scale.linear().domain(ik({values:o,range:[s.cmin,s.cmax],_length:i._commonLength}))),blockLineCount:cT.blockLineCount,canvasOverdrag:cT.overdrag*cT.canvasPixelRatio}),v=Math.floor(f*(u.x[1]-u.x[0])),m=Math.floor(t.height*(u.y[1]-u.y[0])),y=t.margin||{l:80,r:80,t:100,b:80},x=v,b=m;return{key:r,colCount:c.filter(ak).length,dimensions:c,tickDistance:cT.tickDistance,unitToColor:function(t){var e=t.map(function(t){return t[0]}),r=t.map(function(t){return n.rgb(t[1])}),a="rgb".split("").map(function(t){return n.scale.linear().clamp(!0).domain(e).range(r.map((a=t,function(t){return t[a]})));var a});return function(t){return a.map(function(e){return e(t)})}}(l),lines:g,labelFont:h,tickFont:d,rangeFont:p,layoutWidth:f,layoutHeight:t.height,domain:u,translateX:u.x[0]*f,translateY:t.height-u.y[1]*t.height,pad:y,canvasWidth:x*cT.canvasPixelRatio+2*g.canvasOverdrag,canvasHeight:b*cT.canvasPixelRatio,width:x,height:b,canvasPixelRatio:cT.canvasPixelRatio}}function sk(t,e,r){var a=r.width,i=r.height,o=r.dimensions,l=r.canvasPixelRatio,s=function(t){return a*t/Math.max(1,r.colCount-1)},u=cT.verticalPadding/i,c=function(t,e){return n.scale.linear().range([e,t-e])}(i,cT.verticalPadding),f={key:r.key,xScale:s,model:r,inBrushDrag:!1},h={};return f.dimensions=o.filter(ak).map(function(a,o){var d=function(t,e){return n.scale.linear().domain(ik(t)).range([e,1-e])}(a,u),p=h[a.label];h[a.label]=(p||0)+1;var g=a.label+(p?"__"+p:""),v=a.constraintrange,m=v&&v.length;m&&!Array.isArray(v[0])&&(v=[v]);var y=m?v.map(function(t){return t.map(d)}):[[0,1]],x=a.values;x.length>a._length&&(x=x.slice(0,a._length));var b,_=a.tickvals;function w(t,e){return{val:t,text:b[e]}}function A(t,e){return t.val-e.val}if(Array.isArray(_)&&_.length){b=a.ticktext,Array.isArray(b)&&b.length?b.length>_.length?b=b.slice(0,_.length):_.length>b.length&&(_=_.slice(0,b.length)):b=_.map(n.format(a.tickformat));for(var M=1;M<_.length;M++)if(_[M]<_[M-1]){for(var T=_.map(w).sort(A),k=0;k<_.length;k++)_[k]=T[k].val,b[k]=T[k].text;break}}else _=void 0;return{key:g,label:a.label,tickFormat:a.tickformat,tickvals:_,ticktext:b,ordinal:!!_,multiselect:a.multiselect,xIndex:o,crossfilterDimensionIndex:o,visibleIndex:a._index,height:i,values:x,paddedUnitValues:x.map(d),unitTickvals:_&&_.map(d),xScale:s,x:s(o),canvasX:s(o)*l,unitToPaddedPx:c,domainScale:function(t,e,r,a,i){var o,l,s=ik(r);return a?n.scale.ordinal().domain(a.map((o=n.format(r.tickformat),l=i,l?function(t,e){var r=l[e];return null===r||void 0===r?o(t):r}:o))).range(a.map(function(r){var n=(r-s[0])/(s[1]-s[0]);return t-e+n*(2*e-t)})):n.scale.linear().domain(s).range([t-e,e])}(i,cT.verticalPadding,a,_,b),ordinalScale:function(t){if(t.tickvals){var e=ik(t);return n.scale.ordinal().domain(t.tickvals).range(t.tickvals.map(function(t){return(t-e[0])/(e[1]-e[0])}))}}(a),parent:f,model:r,brush:RT.makeBrush(t,m,y,function(){t.linePickActive(!1)},function(){var e=f;e.focusLayer&&e.focusLayer.render(e.panels,!0);var r=ok(e);!t.contextShown()&&r?(e.contextLayer&&e.contextLayer.render(e.panels,!0),t.contextShown(!0)):t.contextShown()&&!r&&(e.contextLayer&&e.contextLayer.render(e.panels,!0,!0),t.contextShown(!1))},function(r){var n=f;if(n.focusLayer.render(n.panels,!0),n.pickLayer&&n.pickLayer.render(n.panels,!0),t.linePickActive(!0),e&&e.filterChanged){var i=d.invert,o=r.map(function(t){return t.map(i).sort(oe.sorterAsc)}).sort(function(t,e){return t[0]-e[0]});e.filterChanged(n.key,a._index,o)}})}}),f}function uk(t){t.classed(cT.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default").style("user-select","none")}var ck=function(t,e){var r=t._fullLayout,a=r._toppaper,i=(r._paperdiv,r._glcontainer);aT(t);var o={},l={},s=r._size;e.forEach(function(e,r){o[r]=t.data[r].dimensions,l[r]=t.data[r].dimensions.slice()});!function(t,e,r,a,i,o){var l,s,u=(l=!0,s=!1,{linePickActive:function(t){return arguments.length?l=!!t:l},contextShown:function(t){return arguments.length?s=!!t:s}}),c=a.filter(function(t){return nk(t).trace.visible}).map(lk.bind(0,i)).map(sk.bind(0,u,o));r.each(function(t,e){return oe.extendFlat(t,c[e])});var f=r.selectAll(".gl-canvas").each(function(t){t.viewModel=c[0],t.model=t.viewModel?t.viewModel.model:null}),h=null;f.filter(function(t){return t.pick}).style("pointer-events","auto").on("mousemove",function(t){if(u.linePickActive()&&t.lineLayer&&o&&o.hover){var e=n.event,r=this.width,a=this.height,i=n.mouse(this),l=i[0],s=i[1];if(l<0||s<0||l>=r||s>=a)return;var c=t.lineLayer.readPixel(l,a-1-s),f=0!==c[3],d=f?c[2]+256*(c[1]+256*c[0]):null,p={x:l,y:s,clientX:e.clientX,clientY:e.clientY,dataIndex:t.model.key,curveNumber:d};d!==h&&(f?o.hover(p):o.unhover&&o.unhover(p),h=d)}}),f.style("opacity",function(t){return t.pick?.01:1}),e.style("background","rgba(255, 255, 255, 0)");var d=e.selectAll("."+cT.cn.parcoords).data(c,ek);d.exit().remove(),d.enter().append("g").classed(cT.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),d.attr("transform",function(t){return"translate("+t.model.translateX+","+t.model.translateY+")"});var p=d.selectAll("."+cT.cn.parcoordsControlView).data(rk,ek);p.enter().append("g").classed(cT.cn.parcoordsControlView,!0),p.attr("transform",function(t){return"translate("+t.model.pad.l+","+t.model.pad.t+")"});var g=p.selectAll("."+cT.cn.yAxis).data(function(t){return t.dimensions},ek);function v(t,e){for(var r=e.panels||(e.panels=[]),n=t.data(),a=n.length-1,i=0;i<a;i++){var o=r[i]||(r[i]={}),l=n[i],s=n[i+1];o.dim1=l,o.dim2=s,o.canvasX=l.canvasX,o.panelSizeX=s.canvasX-l.canvasX,o.panelSizeY=e.model.canvasHeight,o.y=0,o.canvasY=0}}g.enter().append("g").classed(cT.cn.yAxis,!0),p.each(function(t){v(g,t)}),f.each(function(t){t.viewModel&&(t.lineLayer?t.lineLayer.update(t):t.lineLayer=tk(this,t),t.viewModel[t.key]=t.lineLayer,t.lineLayer.render(t.viewModel.panels,!t.context))}),g.attr("transform",function(t){return"translate("+t.xScale(t.xIndex)+", 0)"}),g.call(n.behavior.drag().origin(function(t){return t}).on("drag",function(t){var e=t.parent;u.linePickActive(!1),t.x=Math.max(-cT.overdrag,Math.min(t.model.width+cT.overdrag,n.event.x)),t.canvasX=t.x*t.model.canvasPixelRatio,g.sort(function(t,e){return t.x-e.x}).each(function(e,r){e.xIndex=r,e.x=t===e?e.x:e.xScale(e.xIndex),e.canvasX=e.x*e.model.canvasPixelRatio}),v(g,e),g.filter(function(e){return 0!==Math.abs(t.xIndex-e.xIndex)}).attr("transform",function(t){return"translate("+t.xScale(t.xIndex)+", 0)"}),n.select(this).attr("transform","translate("+t.x+", 0)"),g.each(function(r,n,a){a===t.parent.key&&(e.dimensions[n]=r)}),e.contextLayer&&e.contextLayer.render(e.panels,!1,!ok(e)),e.focusLayer.render&&e.focusLayer.render(e.panels)}).on("dragend",function(t){var e=t.parent;t.x=t.xScale(t.xIndex),t.canvasX=t.x*t.model.canvasPixelRatio,v(g,e),n.select(this).attr("transform",function(t){return"translate("+t.x+", 0)"}),e.contextLayer&&e.contextLayer.render(e.panels,!1,!ok(e)),e.focusLayer&&e.focusLayer.render(e.panels),e.pickLayer&&e.pickLayer.render(e.panels,!0),u.linePickActive(!0),o&&o.axesMoved&&o.axesMoved(e.key,e.dimensions.map(function(t){return t.crossfilterDimensionIndex}))})),g.exit().remove();var m=g.selectAll("."+cT.cn.axisOverlays).data(rk,ek);m.enter().append("g").classed(cT.cn.axisOverlays,!0),m.selectAll("."+cT.cn.axis).remove();var y=m.selectAll("."+cT.cn.axis).data(rk,ek);y.enter().append("g").classed(cT.cn.axis,!0),y.each(function(t){var e=t.model.height/t.model.tickDistance,r=t.domainScale,a=r.domain();n.select(this).call(n.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(e,t.tickFormat).tickValues(t.ordinal?a:null).tickFormat(t.ordinal?function(t){return t}:null).scale(r)),Jr.font(y.selectAll("text"),t.model.tickFont)}),y.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),y.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default").style("user-select","none");var x=m.selectAll("."+cT.cn.axisHeading).data(rk,ek);x.enter().append("g").classed(cT.cn.axisHeading,!0);var b=x.selectAll("."+cT.cn.axisTitle).data(rk,ek);b.enter().append("text").classed(cT.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("user-select","none").style("pointer-events","auto"),b.attr("transform","translate(0,"+-cT.axisTitleOffset+")").text(function(t){return t.label}).each(function(t){Jr.font(n.select(this),t.model.labelFont)});var _=m.selectAll("."+cT.cn.axisExtent).data(rk,ek);_.enter().append("g").classed(cT.cn.axisExtent,!0);var w=_.selectAll("."+cT.cn.axisExtentTop).data(rk,ek);w.enter().append("g").classed(cT.cn.axisExtentTop,!0),w.attr("transform","translate(0,"+-cT.axisExtentOffset+")");var A=w.selectAll("."+cT.cn.axisExtentTopText).data(rk,ek);function M(t,e){if(t.ordinal)return"";var r=t.domainScale.domain();return n.format(t.tickFormat)(r[e?r.length-1:0])}A.enter().append("text").classed(cT.cn.axisExtentTopText,!0).call(uk),A.text(function(t){return M(t,!0)}).each(function(t){Jr.font(n.select(this),t.model.rangeFont)});var T=_.selectAll("."+cT.cn.axisExtentBottom).data(rk,ek);T.enter().append("g").classed(cT.cn.axisExtentBottom,!0),T.attr("transform",function(t){return"translate(0,"+(t.model.height+cT.axisExtentOffset)+")"});var k=T.selectAll("."+cT.cn.axisExtentBottomText).data(rk,ek);k.enter().append("text").classed(cT.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(uk),k.text(function(t){return M(t)}).each(function(t){Jr.font(n.select(this),t.model.rangeFont)}),RT.ensureAxisBrush(m)}(0,a,i,e,{width:s.w,height:s.h,margin:{t:s.t,r:s.r,b:s.b,l:s.l}},{filterChanged:function(e,r,n){var a=l[e][r],i=n.map(function(t){return t.slice()});i.length?(1===i.length&&(i=i[0]),a.constraintrange=i,i=[i]):(delete a.constraintrange,i=null);var o={};o["dimensions["+r+"].constraintrange"]=i,t.emit("plotly_restyle",[o,[e]])},hover:function(e){t.emit("plotly_hover",e)},unhover:function(e){t.emit("plotly_unhover",e)},axesMoved:function(e,r){function n(t){return!("visible"in t)||t.visible}function a(t,e,r){var n=e.indexOf(r),a=t.indexOf(n);return-1===a&&(a+=e.length),a}var i=function(t){return function(e,n){return a(r,t,e)-a(r,t,n)}}(l[e].filter(n));o[e].sort(i),l[e].filter(function(t){return!n(t)}).sort(function(t){return l[e].indexOf(t)}).forEach(function(t){o[e].splice(o[e].indexOf(t),1),o[e].splice(l[e].indexOf(t),0,t)}),t.emit("plotly_restyle")}})},fk={},hk=$o.getModuleCalcData;fk.name="parcoords",fk.plot=function(t){var e=hk(t.calcdata,"parcoords")[0];e.length&&ck(t,e)},fk.clean=function(t,e,r,n){var a=n._has&&n._has("parcoords"),i=e._has&&e._has("parcoords");a&&!i&&(n._paperdiv.selectAll(".parcoords").remove(),n._glimages.selectAll("*").remove())},fk.toSVG=function(t){var e=t._fullLayout._glimages,r=n.select(t).selectAll(".svg-container");r.filter(function(t,e){return e===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var t=this.toDataURL("image/png");e.append("svg:image").attr({xmlns:Ce.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:this.width,height:this.height})}),window.setTimeout(function(){n.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)};var dk=sT;var pk=cT.maxDimensionCount,gk=Qx.defaults;var vk={};vk.attributes=rT,vk.supplyDefaults=function(t,e,r,n){function a(r,n){return oe.coerce(t,e,rT,r,n)}var i=function(t,e){var r,n,a,i=t.dimensions||[],o=e.dimensions=[],l=1/0;function s(t,e){return oe.coerce(r,n,rT.dimensions,t,e)}for(i.length>pk&&(oe.log("parcoords traces support up to "+pk+" dimensions at the moment"),i.splice(pk)),a=0;a<i.length;a++)if(r=i[a],n={},oe.isPlainObject(r)){var u=s("values"),c=s("visible");if(u&&u.length||(c=n.visible=!1),c){s("label"),s("tickvals"),s("ticktext"),s("tickformat"),s("range"),s("multiselect");var f=s("constraintrange");f&&(n.constraintrange=RT.cleanRanges(f,n)),l=Math.min(l,u.length)}n._index=a,o.push(n)}return e._commonLength=l,o}(t,e);!function(t,e,r,n,a){var i=a("line.color",r);yr(t,"line")&&oe.isArrayOrTypedArray(i)&&(i.length?(a("line.colorscale"),mr(t,e,n,a,{prefix:"line.",cLetter:"c"}),e._commonLength=Math.min(e._commonLength,i.length)):e.line.color=r)}(t,e,r,n,a),gk(e,n,a),Array.isArray(i)&&i.length||(e.visible=!1);for(var o=0;o<i.length;o++)i[o].visible&&(i[o]._length=e._commonLength);var l={family:n.font.family,size:Math.round(n.font.size/1.2),color:n.font.color};oe.coerceFont(a,"labelfont",l),oe.coerceFont(a,"tickfont",l),oe.coerceFont(a,"rangefont",l)},vk.calc=function(t,e){var r=!!e.line.colorscale&&oe.isArrayOrTypedArray(e.line.color),n=r?e.line.color:function(t){for(var e=new Array(t),r=0;r<t;r++)e[r]=.5;return e}(e._commonLength),a=r?e.line.colorscale:[[0,e.line.color],[1,e.line.color]];return yr(e,"line")&&ir(e,n,"line","c"),dk({lineColor:n,cscale:a})},vk.plot=ck,vk.colorbar=function(t,e){var r=e[0].trace,n=r.line,i="cb"+r.uid;if(t._fullLayout._infolayer.selectAll("."+i).remove(),void 0!==n&&n.showscale){var o=n.color,l=n.cmin,s=n.cmax;a(l)||(l=oe.aggNums(Math.min,null,o)),a(s)||(s=oe.aggNums(Math.max,null,o));var u=e[0].t.cb=Sy(t,i),c=br.makeColorScaleFunc(br.extractScale(n.colorscale,l,s),{noNumericCheck:!0});u.fillcolor(c).filllevels({start:l,end:s,size:(s-l)/254}).options(n.colorbar)()}else na.autoMargin(t,i)},vk.moduleType="trace",vk.name="parcoords",vk.basePlotModule=fk,vk.categories=["gl","regl","noOpacity"],vk.meta={};var mk=vk,yk={x:Ln.x,y:Ln.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:Ln.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"}},xk={};xk.pointVertex=Ns(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),xk.pointFragment=Ns(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),xk.pickVertex=Ns(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),xk.pickFragment=Ns(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"]);var bk=function(t,e){var r=t.gl,n=zs(r),a=zs(r),i=Zu(r,xk.pointVertex,xk.pointFragment),o=Zu(r,xk.pickVertex,xk.pickFragment),l=new _k(t,n,a,i,o);return l.update(e),t.addObject(l),l};function _k(t,e,r,n,a){this.plot=t,this.offsetBuffer=e,this.pickBuffer=r,this.shader=n,this.pickShader=a,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var wk=_k.prototype;wk.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},wk.update=function(t){var e;function r(e,r){return e in t?t[e]:r}t=t||{},this.sizeMin=r("sizeMin",.5),this.sizeMax=r("sizeMax",20),this.color=r("color",[1,0,0,1]).slice(),this.areaRatio=r("areaRatio",1),this.borderColor=r("borderColor",[0,0,0,1]).slice(),this.blend=r("blend",!1);var n=t.positions.length>>>1,a=t.positions instanceof Float32Array,i=t.idToIndex instanceof Int32Array&&t.idToIndex.length>=n,o=t.positions,l=a?o:Ds.mallocFloat32(o.length),s=i?t.idToIndex:Ds.mallocInt32(n);if(a||l.set(o),!i)for(l.set(o),e=0;e<n;e++)s[e]=e;this.points=o,this.offsetBuffer.update(l),this.pickBuffer.update(s),a||Ds.free(l),i||Ds.free(s),this.pointCount=n,this.pickOffset=0},wk.unifiedDraw=function(){var t=[1,0,0,0,1,0,0,0,1],e=[0,0,0,0];return function(r){var n=void 0!==r,a=n?this.pickShader:this.shader,i=this.plot.gl,o=this.plot.dataBox;if(0===this.pointCount)return r;var l=o[2]-o[0],s=o[3]-o[1],u=function(t,e){var r,n=0,a=t.length>>>1;for(r=0;r<a;r++){var i=t[2*r],o=t[2*r+1];i>=e[0]&&i<=e[2]&&o>=e[1]&&o<=e[3]&&n++}return n}(this.points,o),c=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(u,.33333)));t[0]=2/l,t[4]=2/s,t[6]=-2*o[0]/l-1,t[7]=-2*o[1]/s-1,this.offsetBuffer.bind(),a.bind(),a.attributes.position.pointer(),a.uniforms.matrix=t,a.uniforms.color=this.color,a.uniforms.borderColor=this.borderColor,a.uniforms.pointCloud=c<5,a.uniforms.pointSize=c,a.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),n&&(e[0]=255&r,e[1]=r>>8&255,e[2]=r>>16&255,e[3]=r>>24&255,this.pickBuffer.bind(),a.attributes.pickId.pointer(i.UNSIGNED_BYTE),a.uniforms.pickOffset=e,this.pickOffset=r);var f=i.getParameter(i.BLEND),h=i.getParameter(i.DITHER);return f&&!this.blend&&i.disable(i.BLEND),h&&i.disable(i.DITHER),i.drawArrays(i.POINTS,0,this.pointCount),f&&!this.blend&&i.enable(i.BLEND),h&&i.enable(i.DITHER),r+this.pointCount}}(),wk.draw=wk.unifiedDraw,wk.drawPick=wk.unifiedDraw,wk.pick=function(t,e,r){var n=this.pickOffset,a=this.pointCount;if(r<n||r>=n+a)return null;var i=r-n,o=this.points;return{object:this,pointId:i,dataCoord:[o[2*i],o[2*i+1]]}};var Ak=Aa;function Mk(t,e){this.scene=t,this.uid=e,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=bk(t.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var Tk=Mk.prototype;Tk.handlePick=function(t){var e=this.idToIndex[t.pointId];return{trace:this,dataCoord:t.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*e],this.pickXYData[2*e+1]]:[this.pickXData[e],this.pickYData[e]],textLabel:Array.isArray(this.textLabels)?this.textLabels[e]:this.textLabels,color:this.color,name:this.name,pointIndex:e,hoverinfo:this.hoverinfo}},Tk.update=function(t){this.index=t.index,this.textLabels=t.text,this.name=t.name,this.hoverinfo=t.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(t),this.color=_M(t,{})},Tk.updateFast=function(t){var e,r,n,a,i,o,l=this.xData=this.pickXData=t.x,s=this.yData=this.pickYData=t.y,u=this.pickXYData=t.xy,c=t.xbounds&&t.ybounds,f=t.indices,h=this.bounds;if(u){if(n=u,e=u.length>>>1,c)h[0]=t.xbounds[0],h[2]=t.xbounds[1],h[1]=t.ybounds[0],h[3]=t.ybounds[1];else for(o=0;o<e;o++)a=n[2*o],i=n[2*o+1],a<h[0]&&(h[0]=a),a>h[2]&&(h[2]=a),i<h[1]&&(h[1]=i),i>h[3]&&(h[3]=i);if(f)r=f;else for(r=new Int32Array(e),o=0;o<e;o++)r[o]=o}else for(e=l.length,n=new Float32Array(2*e),r=new Int32Array(e),o=0;o<e;o++)a=l[o],i=s[o],r[o]=o,n[2*o]=a,n[2*o+1]=i,a<h[0]&&(h[0]=a),a>h[2]&&(h[2]=a),i<h[1]&&(h[1]=i),i>h[3]&&(h[3]=i);this.idToIndex=r,this.pointcloudOptions.idToIndex=r,this.pointcloudOptions.positions=n;var d=vm(t.marker.color),p=vm(t.marker.border.color),g=t.opacity*t.marker.opacity;d[3]*=g,this.pointcloudOptions.color=d;var v=t.marker.blend;if(null===v){v=l.length<100||s.length<100}this.pointcloudOptions.blend=v,p[3]*=g,this.pointcloudOptions.borderColor=p;var m=t.marker.sizemin,y=Math.max(t.marker.sizemax,t.marker.sizemin);this.pointcloudOptions.sizeMin=m,this.pointcloudOptions.sizeMax=y,this.pointcloudOptions.areaRatio=t.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions),this.expandAxesFast(h,y/2)},Tk.expandAxesFast=function(t,e){var r=e||.5;Ak(this.scene.xaxis,[t[0],t[2]],{ppad:r}),Ak(this.scene.yaxis,[t[1],t[3]],{ppad:r})},Tk.dispose=function(){this.pointcloud.dispose()};var kk=function(t,e){var r=new Mk(t,e.uid);return r.update(e),r},Ek={};Ek.attributes=yk,Ek.supplyDefaults=function(t,e,r){function n(r,n){return oe.coerce(t,e,yk,r,n)}n("x"),n("y"),n("xbounds"),n("ybounds"),t.xy&&t.xy instanceof Float32Array&&(e.xy=t.xy),t.indices&&t.indices instanceof Int32Array&&(e.indices=t.indices),n("text"),n("marker.color",r),n("marker.opacity"),n("marker.blend"),n("marker.sizemin"),n("marker.sizemax"),n("marker.border.color",r),n("marker.border.arearatio")},Ek.calc=function(t,e){var r=[{x:!1,y:!1,trace:e,t:{}}];return tM(r,e),rM(e),r},Ek.plot=kk,Ek.moduleType="trace",Ek.name="pointcloud",Ek.basePlotModule=Om,Ek.categories=["gl","gl2d","showLegend"],Ek.meta={};var Ck=Ek,Sk=function(t,e){var r="number"==typeof t,n="number"==typeof e;r&&!n?(e=t,t=0):r||n||(t=0,e=0);var a=(e|=0)-(t|=0);if(a<0)throw new Error("array length must be positive");for(var i=new Array(a),o=0,l=t;o<a;o++,l++)i[o]=l;return i},Lk=function(t,e){if(!t||null==t.length)throw Error("Argument should be an array");e=null==e?1:Math.floor(e);for(var r=Array(2*e),n=0;n<e;n++){for(var a=-1/0,i=1/0,o=n,l=t.length;o<l;o+=e)t[o]>a&&(a=t[o]),t[o]<i&&(i=t[o]);r[n]=i,r[e+n]=a}return r};var Ok=function(t,e,r){if(!t)throw new TypeError("must specify data as first parameter");if(r=0|+(r||0),Array.isArray(t)&&Array.isArray(t[0])){var n=t[0].length,a=t.length*n;e&&"string"!=typeof e||(e=new(pm(e||"float32"))(a+r));var i=e.length-r;if(a!==i)throw new Error("source length "+a+" ("+n+"x"+t.length+") does not match destination length "+i);for(var o=0,l=r;o<t.length;o++)for(var s=0;s<n;s++)e[l++]=t[o][s]}else if(e&&"string"!=typeof e)e.set(t,r);else{var u=pm(e||"float32");0===r?e=new u(t):(e=new u(t.length+r)).set(t,r)}return e};var Dk=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)},Rk=Math.log2||function(t){return Math.log(t)*Math.LOG2E},Pk=function(t,e,r){var n,a,i={};if("string"==typeof e&&(e=Bk(e)),Array.isArray(e)){var o={};for(a=0;a<e.length;a++)o[e[a]]=!0;e=o}for(n in e)e[n]=Bk(e[n]);var l={};for(n in e){var s=e[n];if(Array.isArray(s))for(a=0;a<s.length;a++){var u=s[a];if(r&&(l[u]=!0),u in t){if(i[n]=t[u],r)for(var c=a;c<s.length;c++)l[s[c]]=!0;break}}else n in t&&(e[n]&&(i[n]=t[n]),r&&(l[n]=!0))}if(r)for(n in t)l[n]||(i[n]=t[n]);return i},Ik={};function Bk(t){return Ik[t]?Ik[t]:("string"==typeof t&&(t=Ik[t]=t.split(/\s*,\s*|\s+/)),t)}var Fk=function(t){var e;arguments.length>1&&(t=arguments);"string"==typeof t?t=t.split(/\s/).map(parseFloat):"number"==typeof t&&(t=[t]);t.length&&"number"==typeof t[0]?e=1===t.length?{width:t[0],height:t[0],x:0,y:0}:2===t.length?{width:t[0],height:t[1],x:0,y:0}:{x:t[0],y:t[1],width:t[2]-t[0]||0,height:t[3]-t[1]||0}:t&&(t=Pk(t,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),e={x:t.left||0,y:t.top||0},null==t.width?t.right?e.width=t.right-e.x:e.width=0:e.width=t.width,null==t.height?t.bottom?e.height=t.bottom-e.y:e.height=0:e.height=t.height);return e};function zk(t,e,r,n,a){var i=["function ",t,"(a,l,h,",n.join(","),"){",a?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return a?e.indexOf("c")<0?i.push(";if(x===y){return m}else if(x<=y){"):i.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):i.push(";if(",e,"){i=m;"),r?i.push("l=m+1}else{h=m-1}"):i.push("h=m-1}else{l=m+1}"),i.push("}"),a?i.push("return -1};"):i.push("return i};"),i.join("")}function Nk(t,e,r,n){return new Function([zk("A","x"+t+"y",e,["y"],n),zk("P","c(x,y)"+t+"0",e,["y","c"],n),"function dispatchBsearch",r,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",r].join(""))()}var jk={ge:Nk(">=",!1,"GE"),gt:Nk(">",!1,"GT"),lt:Nk("<",!0,"LT"),le:Nk("<=",!0,"LE"),eq:Nk("-",!0,"EQ",!0)};function Uk(t,e){for(var r=e[0],n=e[1],a=1/(e[2]-r),i=1/(e[3]-n),o=new Array(t.length),l=0,s=t.length/2;l<s;l++)o[2*l]=lm((t[2*l]-r)*a,0,1),o[2*l+1]=lm((t[2*l+1]-n)*i,0,1);return o}var Vk=function(t,e){e||(e={}),t=Ok(t,"float64"),e=Pk(e,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var r=um(e.maxDepth,255),n=um(e.bounds,Lk(t,2));n[0]===n[2]&&n[2]++,n[1]===n[3]&&n[3]++;var a,i=Uk(t,n),o=t.length>>>1;e.dtype||(e.dtype="array"),"string"==typeof e.dtype?a=new(pm(e.dtype))(o):e.dtype&&(a=e.dtype,Array.isArray(a)&&(a.length=o));for(var l=0;l<o;++l)a[l]=l;var s=[],u=[],c=[],f=[];!function t(e,n,a,o,l,f){if(!o.length)return null;var h=s[l]||(s[l]=[]),d=c[l]||(c[l]=[]),p=u[l]||(u[l]=[]),g=h.length;if(++l>r){for(var v=0;v<o.length;v++)h.push(o[v]),d.push(f),p.push(null,null,null,null);return g}if(h.push(o[0]),d.push(f),o.length<=1)return p.push(null,null,null,null),g;for(var m=.5*a,y=e+m,x=n+m,b=[],_=[],w=[],A=[],M=1,T=o.length;M<T;M++){var k=o[M],E=i[2*k],C=i[2*k+1];E<y?C<x?b.push(k):_.push(k):C<x?w.push(k):A.push(k)}return f<<=2,p.push(t(e,n,m,b,l,f),t(e,x,m,_,l,f+1),t(y,n,m,w,l,f+2),t(y,x,m,A,l,f+3)),g}(0,0,1,a,0,1);for(var h=0,d=0;d<s.length;d++){var p=s[d];if(a.set)a.set(p,h);else for(var g=0,v=p.length;g<v;g++)a[g+h]=p[g];var m=h+s[d].length;f[d]=[h,m],h=m}return a.range=function(){for(var e,r=[],a=arguments.length;a--;)r[a]=arguments[a];if(Dk(r[r.length-1])){var i=r.pop();r.length||null==i.x&&null==i.l&&null==i.left||(r=[i],e={}),e=Pk(i,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else e={};r.length||(r=n);var o,l=Fk.apply(void 0,r),h=[Math.min(l.x,l.x+l.width),Math.min(l.y,l.y+l.height),Math.max(l.x,l.x+l.width),Math.max(l.y,l.y+l.height)],d=h[0],p=h[1],g=h[2],v=h[3],m=Uk([d,p,g,v],n),x=m[0],b=m[1],_=m[2],w=m[3],A=um(e.level,s.length);null!=e.d&&("number"==typeof e.d?o=[e.d,e.d]:e.d.length&&(o=e.d),A=Math.min(Math.ceil(-Rk(Math.abs(o[0])/(n[2]-n[0]))),Math.ceil(-Rk(Math.abs(o[1])/(n[3]-n[1]))),A));if(e.lod)return function(t,e,r,n,a){for(var i=[],o=0;o<a;o++){var l=c[o],s=f[o][0],u=y(t,e,o),h=y(r,n,o),d=jk.ge(l,u),p=jk.gt(l,h,d,l.length-1);i[o]=[d+s,p+s]}return i}(x,b,_,w,A);var M=[];return function e(r,n,a,i,o,l){if(null!==o&&null!==l){var c=r+a,f=n+a;if(!(x>c||b>f||_<r||w<n||i>=A||o===l)){var h=s[i];void 0===l&&(l=h.length);for(var m=o;m<l;m++){var y=h[m],T=t[2*y],k=t[2*y+1];T>=d&&T<=g&&k>=p&&k<=v&&M.push(y)}var E=u[i],C=E[4*o+0],S=E[4*o+1],L=E[4*o+2],O=E[4*o+3],D=function(t,e){for(var r=null,n=0;null===r;)if(r=t[4*e+n],++n>t.length)return null;return r}(E,o+1),R=.5*a,P=i+1;e(r,n,R,P,C,S||L||O||D),e(r,n+R,R,P,S,L||O||D),e(r+R,n,R,P,L,O||D),e(r+R,n+R,R,P,O,D)}}}(0,0,1,0,0,1),M},a;function y(t,e,r){for(var n=1,a=.5,i=.5,o=.5,l=0;l<r;l++)n<<=2,n+=t<a?e<i?0:1:e<i?2:3,o*=.5,a+=t<a?-o:o,i+=e<i?-o:o;return n}},Hk=Object.getOwnPropertySymbols,qk=Object.prototype.hasOwnProperty,Gk=Object.prototype.propertyIsEnumerable;var Xk=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,n,a=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),i=1;i<arguments.length;i++){for(var o in r=Object(arguments[i]))qk.call(r,o)&&(a[o]=r[o]);if(Hk){n=Hk(r);for(var l=0;l<n.length;l++)Gk.call(r,n[l])&&(a[n[l]]=r[n[l]])}}return a},Yk={};function Wk(t){if(t instanceof Float32Array)return t;if("number"==typeof t)return new Float32Array([t])[0];var e=new Float32Array(t);return e.set(t),e}(Yk=Wk).float32=Yk.float=Wk,Yk.fract32=Yk.fract=function(t){if("number"==typeof t)return Wk(t-Wk(t));for(var e=Wk(t),r=0,n=e.length;r<n;r++)e[r]=t[r]-e[r];return e};var Zk=function(t,e,r){Array.isArray(r)||(r=[].slice.call(arguments,2));for(var n=0,a=r.length;n<a;n++){var i=r[n];for(var o in i)if((void 0===e[o]||Array.isArray(e[o])||t[o]!==e[o])&&o in e){var l;if(!0===i[o])l=e[o];else{if(!1===i[o])continue;if("function"==typeof i[o]&&void 0===(l=i[o](e[o],t,e)))continue}t[o]=l}}return t},Jk=Yk.float32,Qk=Yk.fract32,$k=function(t,e){"function"==typeof t?(e||(e={}),e.regl=t):e=t;e.length&&(e.positions=e);if(!(t=e.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var r,n,a,i,o,l,s=t._gl,u={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},c=[];return i=t.buffer({usage:"dynamic",type:"uint8",data:null}),n=t.buffer({usage:"dynamic",type:"float",data:null}),a=t.buffer({usage:"dynamic",type:"float",data:null}),o=t.buffer({usage:"dynamic",type:"float",data:null}),l=t.buffer({usage:"static",type:"float",data:Kk}),p(e),r=t({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision mediump float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:t.prop("range"),lineWidth:t.prop("lineWidth"),capSize:t.prop("capSize"),opacity:t.prop("opacity"),scale:t.prop("scale"),translate:t.prop("translate"),scaleFract:t.prop("scaleFract"),translateFract:t.prop("translateFract"),viewport:function(t,e){return[e.viewport.x,e.viewport.y,t.viewportWidth,t.viewportHeight]}},attributes:{color:{buffer:i,offset:function(t,e){return 4*e.offset},divisor:1},position:{buffer:n,offset:function(t,e){return 8*e.offset},divisor:1},positionFract:{buffer:a,offset:function(t,e){return 8*e.offset},divisor:1},error:{buffer:o,offset:function(t,e){return 16*e.offset},divisor:1},direction:{buffer:l,stride:24,offset:0},lineOffset:{buffer:l,stride:24,offset:8},capOffset:{buffer:l,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:t.prop("viewport")},viewport:t.prop("viewport"),stencil:!1,instances:t.prop("count"),count:Kk.length}),Xk(f,{update:p,draw:h,destroy:g,regl:t,gl:s,canvas:s.canvas,groups:c}),f;function f(t){t?p(t):null===t&&g(),h()}function h(e){if("number"==typeof e)return d(e);e&&!Array.isArray(e)&&(e=[e]),t._refresh(),c.forEach(function(t,r){t&&(e&&(e[r]?t.draw=!0:t.draw=!1),t.draw?d(r):t.draw=!0)})}function d(t){"number"==typeof t&&(t=c[t]),null!=t&&t&&t.count&&t.color&&t.opacity&&t.positions&&t.positions.length>1&&(t.scaleRatio=[t.scale[0]*t.viewport.width,t.scale[1]*t.viewport.height],r(t),t.after&&t.after(t))}function p(t){if(t){null!=t.length?"number"==typeof t[0]&&(t=[{positions:t}]):Array.isArray(t)||(t=[t]);var e=0,r=0;if(c=t.map(function(t,n){var a=c[n];return t?("function"==typeof t?t={after:t}:"number"==typeof t[0]&&(t={positions:t}),t=Pk(t,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),a||(c[n]=a={id:n,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},t=Xk({},u,t)),Zk(a,t,[{lineWidth:function(t){return.5*+t},capSize:function(t){return.5*+t},opacity:parseFloat,errors:function(t){return t=Ok(t),r+=t.length,t},positions:function(t,r){return t=Ok(t,"float64"),r.count=Math.floor(t.length/2),r.bounds=Lk(t,2),r.offset=e,e+=r.count,t}},{color:function(t,e){var r=e.count;if(t||(t="transparent"),!Array.isArray(t)||"number"==typeof t[0]){var n=t;t=Array(r);for(var a=0;a<r;a++)t[a]=n}if(t.length<r)throw Error("Not enough colors");for(var i=new Uint8Array(4*r),o=0;o<r;o++){var l=gm(t[o],"uint8");i.set(l,4*o)}return i},range:function(t,e,r){var n=e.bounds;return t||(t=n),e.scale=[1/(t[2]-t[0]),1/(t[3]-t[1])],e.translate=[-t[0],-t[1]],e.scaleFract=Qk(e.scale),e.translateFract=Qk(e.translate),t},viewport:function(t){var e;return Array.isArray(t)?e={x:t[0],y:t[1],width:t[2]-t[0],height:t[3]-t[1]}:t?(e={x:t.x||t.left||0,y:t.y||t.top||0},t.right?e.width=t.right-e.x:e.width=t.w||t.width||0,t.bottom?e.height=t.bottom-e.y:e.height=t.h||t.height||0):e={x:0,y:0,width:s.drawingBufferWidth,height:s.drawingBufferHeight},e}}]),a):a}),e||r){var l=c.reduce(function(t,e,r){return t+(e?e.count:0)},0),f=new Float64Array(2*l),h=new Uint8Array(4*l),d=new Float32Array(4*l);c.forEach(function(t,e){if(t){var r=t.positions,n=t.count,a=t.offset,i=t.color,o=t.errors;n&&(h.set(i,4*a),d.set(o,4*a),f.set(r,2*a))}}),n(Jk(f)),a(Qk(f)),i(h),o(d)}}}function g(){n.destroy(),a.destroy(),i.destroy(),o.destroy(),l.destroy()}},Kk=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];var tE=function(t,e,r){if(!t||null==t.length)throw Error("Argument should be an array");null==e&&(e=1);null==r&&(r=Lk(t,e));for(var n=0;n<e;n++){var a=r[e+n],i=r[n],o=n,l=t.length;if(a===1/0&&i===-1/0)for(o=n;o<l;o+=e)t[o]=t[o]===a?1:t[o]===i?0:.5;else if(a===1/0)for(o=n;o<l;o+=e)t[o]=t[o]===a?1:0;else if(i===-1/0)for(o=n;o<l;o+=e)t[o]=t[o]===i?0:1;else{var s=a-i;for(o=n;o<l;o+=e)t[o]=0===s?.5:(t[o]-i)/s}}return t};var eE={};function rE(t,e,r){r=r||2;var n,a,i,o,l,s,u,c=e&&e.length,f=c?e[0]*r:t.length,h=nE(t,0,f,r,!0),d=[];if(!h)return d;if(c&&(h=function(t,e,r,n){var a,i,o,l,s,u=[];for(a=0,i=e.length;a<i;a++)o=e[a]*n,l=a<i-1?e[a+1]*n:t.length,(s=nE(t,o,l,n,!1))===s.next&&(s.steiner=!0),u.push(dE(s));for(u.sort(cE),a=0;a<u.length;a++)fE(u[a],r),r=aE(r,r.next);return r}(t,e,h,r)),t.length>80*r){n=i=t[0],a=o=t[1];for(var p=r;p<f;p+=r)l=t[p],s=t[p+1],l<n&&(n=l),s<a&&(a=s),l>i&&(i=l),s>o&&(o=s);u=0!==(u=Math.max(i-n,o-a))?1/u:0}return iE(h,d,r,n,a,u),d}function nE(t,e,r,n,a){var i,o;if(a===ME(t,e,r,n)>0)for(i=e;i<r;i+=n)o=_E(i,t[i],t[i+1],o);else for(i=r-n;i>=e;i-=n)o=_E(i,t[i],t[i+1],o);return o&&mE(o,o.next)&&(wE(o),o=o.next),o}function aE(t,e){if(!t)return t;e||(e=t);var r,n=t;do{if(r=!1,n.steiner||!mE(n,n.next)&&0!==vE(n.prev,n,n.next))n=n.next;else{if(wE(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function iE(t,e,r,n,a,i,o){if(t){!o&&i&&function(t,e,r,n){var a=t;do{null===a.z&&(a.z=hE(a.x,a.y,e,r,n)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next}while(a!==t);a.prevZ.nextZ=null,a.prevZ=null,function(t){var e,r,n,a,i,o,l,s,u=1;do{for(r=t,t=null,i=null,o=0;r;){for(o++,n=r,l=0,e=0;e<u&&(l++,n=n.nextZ);e++);for(s=u;l>0||s>0&&n;)0!==l&&(0===s||!n||r.z<=n.z)?(a=r,r=r.nextZ,l--):(a=n,n=n.nextZ,s--),i?i.nextZ=a:t=a,a.prevZ=i,i=a;r=n}i.nextZ=null,u*=2}while(o>1)}(a)}(t,n,a,i);for(var l,s,u=t;t.prev!==t.next;)if(l=t.prev,s=t.next,i?lE(t,n,a,i):oE(t))e.push(l.i/r),e.push(t.i/r),e.push(s.i/r),wE(t),t=s.next,u=s.next;else if((t=s)===u){o?1===o?iE(t=sE(t,e,r),e,r,n,a,i,2):2===o&&uE(t,e,r,n,a,i):iE(aE(t),e,r,n,a,i,1);break}}}function oE(t){var e=t.prev,r=t,n=t.next;if(vE(e,r,n)>=0)return!1;for(var a=t.next.next;a!==t.prev;){if(pE(e.x,e.y,r.x,r.y,n.x,n.y,a.x,a.y)&&vE(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function lE(t,e,r,n){var a=t.prev,i=t,o=t.next;if(vE(a,i,o)>=0)return!1;for(var l=a.x<i.x?a.x<o.x?a.x:o.x:i.x<o.x?i.x:o.x,s=a.y<i.y?a.y<o.y?a.y:o.y:i.y<o.y?i.y:o.y,u=a.x>i.x?a.x>o.x?a.x:o.x:i.x>o.x?i.x:o.x,c=a.y>i.y?a.y>o.y?a.y:o.y:i.y>o.y?i.y:o.y,f=hE(l,s,e,r,n),h=hE(u,c,e,r,n),d=t.prevZ,p=t.nextZ;d&&d.z>=f&&p&&p.z<=h;){if(d!==t.prev&&d!==t.next&&pE(a.x,a.y,i.x,i.y,o.x,o.y,d.x,d.y)&&vE(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&pE(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&vE(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=f;){if(d!==t.prev&&d!==t.next&&pE(a.x,a.y,i.x,i.y,o.x,o.y,d.x,d.y)&&vE(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=h;){if(p!==t.prev&&p!==t.next&&pE(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&vE(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function sE(t,e,r){var n=t;do{var a=n.prev,i=n.next.next;!mE(a,i)&&yE(a,n,n.next,i)&&xE(a,i)&&xE(i,a)&&(e.push(a.i/r),e.push(n.i/r),e.push(i.i/r),wE(n),wE(n.next),n=t=i),n=n.next}while(n!==t);return n}function uE(t,e,r,n,a,i){var o=t;do{for(var l=o.next.next;l!==o.prev;){if(o.i!==l.i&&gE(o,l)){var s=bE(o,l);return o=aE(o,o.next),s=aE(s,s.next),iE(o,e,r,n,a,i),void iE(s,e,r,n,a,i)}l=l.next}o=o.next}while(o!==t)}function cE(t,e){return t.x-e.x}function fE(t,e){if(e=function(t,e){var r,n=e,a=t.x,i=t.y,o=-1/0;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var l=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(l<=a&&l>o){if(o=l,l===a){if(i===n.y)return n;if(i===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!r)return null;if(a===o)return r.prev;var s,u=r,c=r.x,f=r.y,h=1/0;n=r.next;for(;n!==u;)a>=n.x&&n.x>=c&&a!==n.x&&pE(i<f?a:o,i,c,f,i<f?o:a,i,n.x,n.y)&&((s=Math.abs(i-n.y)/(a-n.x))<h||s===h&&n.x>r.x)&&xE(n,t)&&(r=n,h=s),n=n.next;return r}(t,e)){var r=bE(e,t);aE(r,r.next)}}function hE(t,e,r,n,a){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*a)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*a)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function dE(t){var e=t,r=t;do{e.x<r.x&&(r=e),e=e.next}while(e!==t);return r}function pE(t,e,r,n,a,i,o,l){return(a-o)*(e-l)-(t-o)*(i-l)>=0&&(t-o)*(n-l)-(r-o)*(e-l)>=0&&(r-o)*(i-l)-(a-o)*(n-l)>=0}function gE(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&yE(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(t,e)&&xE(t,e)&&xE(e,t)&&function(t,e){var r=t,n=!1,a=(t.x+e.x)/2,i=(t.y+e.y)/2;do{r.y>i!=r.next.y>i&&r.next.y!==r.y&&a<(r.next.x-r.x)*(i-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==t);return n}(t,e)}function vE(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function mE(t,e){return t.x===e.x&&t.y===e.y}function yE(t,e,r,n){return!!(mE(t,e)&&mE(r,n)||mE(t,n)&&mE(r,e))||vE(t,e,r)>0!=vE(t,e,n)>0&&vE(r,n,t)>0!=vE(r,n,e)>0}function xE(t,e){return vE(t.prev,t,t.next)<0?vE(t,e,t.next)>=0&&vE(t,t.prev,e)>=0:vE(t,e,t.prev)<0||vE(t,t.next,e)<0}function bE(t,e){var r=new AE(t.i,t.x,t.y),n=new AE(e.i,e.x,e.y),a=t.next,i=e.prev;return t.next=e,e.prev=t,r.next=a,a.prev=r,n.next=r,r.prev=n,i.next=n,n.prev=i,n}function _E(t,e,r,n){var a=new AE(t,e,r);return n?(a.next=n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a),a}function wE(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function AE(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ME(t,e,r,n){for(var a=0,i=e,o=r-n;i<r;i+=n)a+=(t[o]-t[i])*(t[i+1]+t[o+1]),o=i;return a}(eE=rE).default=rE,rE.deviation=function(t,e,r,n){var a=e&&e.length,i=a?e[0]*r:t.length,o=Math.abs(ME(t,0,i,r));if(a)for(var l=0,s=e.length;l<s;l++){var u=e[l]*r,c=l<s-1?e[l+1]*r:t.length;o-=Math.abs(ME(t,u,c,r))}var f=0;for(l=0;l<n.length;l+=3){var h=n[l]*r,d=n[l+1]*r,p=n[l+2]*r;f+=Math.abs((t[h]-t[p])*(t[d+1]-t[h+1])-(t[h]-t[d])*(t[p+1]-t[h+1]))}return 0===o&&0===f?0:Math.abs((f-o)/o)},rE.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,a=0;a<t.length;a++){for(var i=0;i<t[a].length;i++)for(var o=0;o<e;o++)r.vertices.push(t[a][i][o]);a>0&&(n+=t[a-1].length,r.holes.push(n))}return r};var TE,kE,EE,CE=function(){},SE=function(t){return void 0!==t&&null!==t},LE=Object.keys,OE=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}()?Object.keys:function(t){return LE(SE(t)?Object(t):t)},DE=function(t){if(!SE(t))throw new TypeError("Cannot use null or undefined");return t},RE=Math.max,PE="function"==typeof(kE=Object.assign)&&(kE(TE={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),TE.foo+TE.bar+TE.trzy==="razdwatrzy")?Object.assign:function(t,e){var r,n,a,i=RE(arguments.length,2);for(t=Object(DE(t)),a=function(n){try{t[n]=e[n]}catch(t){r||(r=t)}},n=1;n<i;++n)e=arguments[n],OE(e).forEach(a);if(void 0!==r)throw r;return t},IE=function(t){return"function"==typeof t},BE=Array.prototype.forEach,FE=Object.create,zE=function(t){var e=FE(null);return BE.call(arguments,function(t){SE(t)&&function(t,e){var r;for(r in t)e[r]=t[r]}(Object(t),e)}),e},NE="razdwatrzy",jE=String.prototype.indexOf,UE="function"==typeof NE.contains&&!0===NE.contains("dwa")&&!1===NE.contains("foo")?String.prototype.contains:function(t){return jE.call(this,t,arguments[1])>-1};(EE=function(t,e){var r,n,a,i,o;return arguments.length<2||"string"!=typeof t?(i=e,e=t,t=null):i=arguments[2],null==t?(r=a=!0,n=!1):(r=UE.call(t,"c"),n=UE.call(t,"e"),a=UE.call(t,"w")),o={value:e,configurable:r,enumerable:n,writable:a},i?PE(zE(i),o):o}).gs=function(t,e,r){var n,a,i,o;return"string"!=typeof t?(i=r,r=e,e=t,t=null):i=arguments[3],null==e?e=void 0:IE(e)?null==r?r=void 0:IE(r)||(i=r,r=void 0):(i=e,e=r=void 0),null==t?(n=!0,a=!1):(n=UE.call(t,"c"),a=UE.call(t,"e")),o={get:e,set:r,configurable:n,enumerable:a},i?PE(zE(i),o):o};var VE,HE,qE,GE,XE=Object.create,YE=Object.getPrototypeOf,WE={},ZE=function(){var t=Object.setPrototypeOf,e=arguments[0]||XE;return"function"==typeof t&&YE(t(e(null),WE))===WE},JE={function:!0,object:!0},QE=function(t){return SE(t)&&JE[typeof t]||!1},$E=ZE()?Object.setPrototypeOf:e({}),KE=function(t){if(!QE(t))throw new TypeError(t+" is not an Object");return t},tC=Object.create(null),eC=Math.random,rC=Object.prototype.toString,nC=rC.call(function(){return arguments}()),aC=function(t){return rC.call(t)===nC},iC=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t},oC=Object.prototype.toString,lC=oC.call(""),sC=function(t){return"string"==typeof t||t&&"object"==typeof t&&(t instanceof String||oC.call(t)===lC)||!1},uC=Object.prototype.toString,cC=uC.call(CE),fC=function(){var t=Math.sign;return"function"==typeof t&&1===t(10)&&-1===t(-20)}()?Math.sign:function(t){return t=Number(t),isNaN(t)||0===t?t:t>0?1:-1},hC=Math.abs,dC=Math.floor,pC=Math.max,gC=function(t){return pC(0,function(t){return isNaN(t)?0:0!==(t=Number(t))&&isFinite(t)?fC(t)*dC(hC(t)):t}(t))},vC={object:!0,symbol:!0},mC=function(t){if(!(e=t)||!("symbol"==typeof e||e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))throw new TypeError(t+" is not a symbol");var e;return t},yC=Object.create,xC=Object.defineProperties,bC=Object.defineProperty,_C=Object.prototype,wC=yC(null);if("function"==typeof Symbol){VE=Symbol;try{String(VE()),GE=!0}catch(t){}}var AC,MC=(AC=yC(null),function(t){for(var e,r,n=0;AC[t+(n||"")];)++n;return AC[t+=n||""]=!0,bC(_C,e="@@"+t,EE.gs(null,function(t){r||(r=!0,bC(this,e,EE(t)),r=!1)})),e});qE=function(t){if(this instanceof qE)throw new TypeError("Symbol is not a constructor");return HE(t)};var TC=HE=function t(e){var r;if(this instanceof t)throw new TypeError("Symbol is not a constructor");return GE?VE(e):(r=yC(qE.prototype),e=void 0===e?"":String(e),xC(r,{__description__:EE("",e),__name__:EE("",MC(e))}))};xC(HE,{for:EE(function(t){return wC[t]?wC[t]:wC[t]=HE(String(t))}),keyFor:EE(function(t){var e;for(e in mC(t),wC)if(wC[e]===t)return e}),hasInstance:EE("",VE&&VE.hasInstance||HE("hasInstance")),isConcatSpreadable:EE("",VE&&VE.isConcatSpreadable||HE("isConcatSpreadable")),iterator:EE("",VE&&VE.iterator||HE("iterator")),match:EE("",VE&&VE.match||HE("match")),replace:EE("",VE&&VE.replace||HE("replace")),search:EE("",VE&&VE.search||HE("search")),species:EE("",VE&&VE.species||HE("species")),split:EE("",VE&&VE.split||HE("split")),toPrimitive:EE("",VE&&VE.toPrimitive||HE("toPrimitive")),toStringTag:EE("",VE&&VE.toStringTag||HE("toStringTag")),unscopables:EE("",VE&&VE.unscopables||HE("unscopables"))}),xC(qE.prototype,{constructor:EE(HE),toString:EE("",function(){return this.__name__})}),xC(HE.prototype,{toString:EE(function(){return"Symbol ("+mC(this).__description__+")"}),valueOf:EE(function(){return mC(this)})}),bC(HE.prototype,HE.toPrimitive,EE("",function(){var t=mC(this);return"symbol"==typeof t?t:t.toString()})),bC(HE.prototype,HE.toStringTag,EE("c","Symbol")),bC(qE.prototype,HE.toStringTag,EE("c",HE.prototype[HE.toStringTag])),bC(qE.prototype,HE.toPrimitive,EE("c",HE.prototype[HE.toPrimitive]));var kC,EC,CC,SC=function(){var t;if("function"!=typeof Symbol)return!1;t=Symbol("test symbol");try{String(t)}catch(t){return!1}return!!vC[typeof Symbol.iterator]&&!!vC[typeof Symbol.toPrimitive]&&!!vC[typeof Symbol.toStringTag]}()?Symbol:TC,LC=SC.iterator,OC=Array.isArray,DC=Function.prototype.call,RC={configurable:!0,enumerable:!0,writable:!0,value:null},PC=Object.defineProperty,IC=function(){var t,e,r=Array.from;return"function"==typeof r&&(e=r(t=["raz","dwa"]),Boolean(e&&e!==t&&"dwa"===e[1]))}()?Array.from:function(t){var e,r,n,a,i,o,l,s,u,c,f=arguments[1],h=arguments[2];if(t=Object(DE(t)),SE(f)&&iC(f),this&&this!==Array&&function(t){return"function"==typeof t&&uC.call(t)===cC}(this))e=this;else{if(!f){if(aC(t))return 1!==(i=t.length)?Array.apply(null,t):((a=new Array(1))[0]=t[0],a);if(OC(t)){for(a=new Array(i=t.length),r=0;r<i;++r)a[r]=t[r];return a}}a=[]}if(!OC(t))if(void 0!==(u=t[LC])){for(l=iC(u).call(t),e&&(a=new e),s=l.next(),r=0;!s.done;)c=f?DC.call(f,h,s.value,r):s.value,e?(RC.value=c,PC(a,r,RC)):a[r]=c,s=l.next(),++r;i=r}else if(sC(t)){for(i=t.length,e&&(a=new e),r=0,n=0;r<i;++r)c=t[r],r+1<i&&(o=c.charCodeAt(0))>=55296&&o<=56319&&(c+=t[++r]),c=f?DC.call(f,h,c,n):c,e?(RC.value=c,PC(a,n,RC)):a[n]=c,++n;i=n}if(void 0===i)for(i=gC(t.length),e&&(a=new e(i)),r=0;r<i;++r)c=f?DC.call(f,h,t[r],r):t[r],e?(RC.value=c,PC(a,r,RC)):a[r]=c;return e&&(RC.value=null,a.length=i),a},BC=Function.prototype.bind,FC=Function.prototype.call,zC=Object.keys,NC=Object.prototype.propertyIsEnumerable,jC=(kC="forEach",function(t,e){var r,n=arguments[2],a=arguments[3];return t=Object(DE(t)),iC(e),r=zC(t),a&&r.sort("function"==typeof a?BC.call(a,t):void 0),"function"!=typeof kC&&(kC=r[kC]),FC.call(kC,r,function(r,a){return NC.call(t,r)?FC.call(e,n,t[r],r,t,a):EC})}),UC=Function.prototype.call,VC=Function.prototype.bind,HC=Object.defineProperty,qC=Object.prototype.hasOwnProperty;CC=function(t,e,r){var n,a=DE(e)&&iC(e.value);return delete(n=function(t){var e=Object(DE(t)),r=arguments[1],n=Object(arguments[2]);if(e!==t&&!r)return e;var a={};return r?IC(r,function(e){(n.ensure||e in t)&&(a[e]=t[e])}):PE(a,t),a}(e)).writable,delete n.value,n.get=function(){return!r.overwriteDefinition&&qC.call(this,t)?a:(e.value=VC.call(a,r.resolveContext?r.resolveContext(this):this),HC(this,t,e),this[t])},n};var GC,XC=Object.defineProperty,YC=Object.defineProperties,WC=GC=function(t,e){if(!(this instanceof GC))throw new TypeError("Constructor requires 'new'");YC(this,{__list__:EE("w",DE(t)),__context__:EE("w",e),__nextIndex__:EE("w",0)}),e&&(iC(e.on),e.on("_add",this._onAdd),e.on("_delete",this._onDelete),e.on("_clear",this._onClear))};delete GC.prototype.constructor,YC(GC.prototype,PE({_next:EE(function(){var t;if(this.__list__)return this.__redo__&&void 0!==(t=this.__redo__.shift())?t:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:EE(function(){return this._createResult(this._next())}),_createResult:EE(function(t){return void 0===t?{done:!0,value:void 0}:{done:!1,value:this._resolve(t)}}),_resolve:EE(function(t){return this.__list__[t]}),_unBind:EE(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:EE(function(){return"[object "+(this[SC.toStringTag]||"Object")+"]"})},function(t){var e=zE(arguments[1]);return null!=e.resolveContext&&iC(e.resolveContext),function(t,e){var r={},n=arguments[2];return iC(e),jC(t,function(t,a,i,o){r[a]=UC.call(e,n,t,a,i,o)}),r}(t,function(t,r){return CC(r,t,e)})}({_onAdd:EE(function(t){t>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(e,r){e>=t&&(this.__redo__[r]=++e)},this),this.__redo__.push(t)):XC(this,"__redo__",EE("c",[t])))}),_onDelete:EE(function(t){var e;t>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(e=this.__redo__.indexOf(t))&&this.__redo__.splice(e,1),this.__redo__.forEach(function(e,r){e>t&&(this.__redo__[r]=--e)},this)))}),_onClear:EE(function(){this.__redo__&&function(){return DE(this).length=0,this}.call(this.__redo__),this.__nextIndex__=0})}))),XC(GC.prototype,SC.iterator,EE(function(){return this}));var ZC,JC,QC=Object.defineProperty;JC=ZC=function(t,e){if(!(this instanceof JC))throw new TypeError("Constructor requires 'new'");WC.call(this,t),e=e?UE.call(e,"key+value")?"key+value":UE.call(e,"key")?"key":"value":"value",QC(this,"__kind__",EE("",e))},$E&&$E(JC,WC),delete JC.prototype.constructor,JC.prototype=Object.create(WC.prototype,{_resolve:EE(function(t){return"value"===this.__kind__?this.__list__[t]:"key+value"===this.__kind__?[t,this.__list__[t]]:t})}),QC(JC.prototype,SC.toStringTag,EE("c","Array Iterator"));var $C,KC,tS=Object.defineProperty;KC=$C=function(t){if(!(this instanceof KC))throw new TypeError("Constructor requires 'new'");t=String(t),WC.call(this,t),tS(this,"__length__",EE("",t.length))},$E&&$E(KC,WC),delete KC.prototype.constructor,KC.prototype=Object.create(WC.prototype,{_next:EE(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:EE(function(t){var e,r=this.__list__[t];return this.__nextIndex__===this.__length__?r:(e=r.charCodeAt(0))>=55296&&e<=56319?r+this.__list__[this.__nextIndex__++]:r})}),tS(KC.prototype,SC.toStringTag,EE("c","String Iterator"));var eS,rS=SC.iterator,nS=Array.isArray,aS=function(t){if(!function(t){return!(!SE(t)||!nS(t)&&!sC(t)&&!aC(t)&&"function"!=typeof t[rS])}(t))throw new TypeError(t+" is not iterable");return t},iS=SC.iterator,oS=function(t){return"function"==typeof aS(t)[iS]?t[iS]():aC(t)?new ZC(t):sC(t)?new $C(t):new ZC(t)},lS=Array.isArray,sS=Function.prototype.call,uS=Array.prototype.some,cS="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap),fS=SC.toStringTag,hS=Array.isArray,dS=Object.defineProperty,pS=Object.prototype.hasOwnProperty,gS=Object.getPrototypeOf,vS=eS=function(){var t,e=arguments[0];if(!(this instanceof eS))throw new TypeError("Constructor requires 'new'");return t=cS&&$E&&WeakMap!==eS?$E(new WeakMap,gS(this)):this,null!=e&&(hS(e)||(e=oS(e))),dS(t,"__weakMapData__",EE("c","$weakMap$"+function(){var t;do{t=eC().toString(36).slice(2)}while(tC[t]);return t}())),e?(function(t,e){var r,n,a,i,o,l,s,u,c=arguments[2];if(lS(t)||aC(t)?r="array":sC(t)?r="string":t=oS(t),iC(e),a=function(){i=!0},"array"!==r)if("string"!==r)for(n=t.next();!n.done;){if(sS.call(e,c,n.value,a),i)return;n=t.next()}else for(l=t.length,o=0;o<l&&(s=t[o],o+1<l&&(u=s.charCodeAt(0))>=55296&&u<=56319&&(s+=t[++o]),sS.call(e,c,s,a),!i);++o);else uS.call(t,function(t){return sS.call(e,c,t,a),i})}(e,function(e){DE(e),t.set(e[0],e[1])}),t):t};cS&&($E&&$E(eS,WeakMap),eS.prototype=Object.create(WeakMap.prototype,{constructor:EE(eS)})),Object.defineProperties(eS.prototype,{delete:EE(function(t){return!!pS.call(KE(t),this.__weakMapData__)&&(delete t[this.__weakMapData__],!0)}),get:EE(function(t){if(pS.call(KE(t),this.__weakMapData__))return t[this.__weakMapData__]}),has:EE(function(t){return pS.call(KE(t),this.__weakMapData__)}),set:EE(function(t,e){return dS(KE(t),this.__weakMapData__,EE("c",e)),this}),toString:EE(function(){return"[object WeakMap]"})}),dS(eS.prototype,fS,EE("c","WeakMap"));var mS=function(){var t,e;if("function"!=typeof WeakMap)return!1;try{t=new WeakMap([[e={},"one"],[{},"two"],[{},"three"]])}catch(t){return!1}return"[object WeakMap]"===String(t)&&"function"==typeof t.set&&t.set({},1)===t&&"function"==typeof t.delete&&"function"==typeof t.has&&"one"===t.get(e)}()?WeakMap:vS,yS=Yk.float32,xS=Yk.fract32,bS=_S;function _S(t,e){if(!(this instanceof _S))return new _S(t,e);if("function"==typeof t?(e||(e={}),e.regl=t):e=t,e.length&&(e.positions=e),!(t=e.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=t._gl,this.regl=t,this.passes=[],this.shaders=_S.shaders.has(t)?_S.shaders.get(t):_S.shaders.set(t,_S.createShaders(t)).get(t),this.update(e)}_S.dashMult=2,_S.maxPatternLength=256,_S.precisionThreshold=3e6,_S.maxPoints=1e4,_S.shaders=new mS,_S.createShaders=function(t){var e,r=t.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),n={primitive:"triangle strip",instances:t.prop("count"),count:4,offset:0,uniforms:{miterMode:function(t,e){return"round"===e.join?2:1},miterLimit:t.prop("miterLimit"),scale:t.prop("scale"),scaleFract:t.prop("scaleFract"),translateFract:t.prop("translateFract"),translate:t.prop("translate"),thickness:t.prop("thickness"),dashPattern:t.prop("dashTexture"),opacity:t.prop("opacity"),pixelRatio:t.context("pixelRatio"),id:t.prop("id"),dashSize:t.prop("dashLength"),viewport:function(t,e){return[e.viewport.x,e.viewport.y,t.viewportWidth,t.viewportHeight]}},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(t,e){return!e.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:t.prop("viewport")},viewport:t.prop("viewport")},a=t(Xk({vert:Ns(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nconst float MAX_LINES = 256.;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\tfloat depth = (MAX_LINES - 1. - id) / (MAX_LINES);\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:Ns(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\n\nuniform float dashSize, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:r,divisor:0,stride:8,offset:0},lineTop:{buffer:r,divisor:0,stride:8,offset:4},aCoord:{buffer:t.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:t.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:t.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:t.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:t.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},n));try{e=t(Xk({cull:{enable:!0,face:"back"},vert:Ns(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float MAX_LINES = 256.;\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n//TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n//TODO: precalculate dot products, normalize things beforehead etc.\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n\t// adjust scale for horizontal bars\n\tvec2 scale = max(scale, MIN_DIFF);\n\tvec2 scaleRatio = scale * viewport.zw;\n\n\tvec2 normalWidth = thickness / (scale * viewport.zw);\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\tfloat depth = (MAX_LINES - 1. - id) / MAX_LINES;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t//collapsed/unidirectional segment cases\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * scale + translate;\n\tvec2 aBotPosition = (aBotCoord) * scale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * scale + translate;\n\tvec2 bBotPosition = (bBotCoord) * scale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:Ns(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform float dashSize, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashSize) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:r,divisor:0,stride:8,offset:0},lineTop:{buffer:r,divisor:0,stride:8,offset:4},aColor:{buffer:t.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:t.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:t.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:t.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:t.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:t.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},n))}catch(t){e=a}return{fill:t({primitive:"triangle",elements:function(t,e){return e.triangles},offset:0,vert:Ns(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:Ns(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:t.prop("scale"),color:t.prop("fill"),scaleFract:t.prop("scaleFract"),translateFract:t.prop("translateFract"),translate:t.prop("translate"),opacity:t.prop("opacity"),pixelRatio:t.context("pixelRatio"),id:t.prop("id"),viewport:function(t,e){return[e.viewport.x,e.viewport.y,t.viewportWidth,t.viewportHeight]}},attributes:{position:{buffer:t.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:t.prop("positionFractBuffer"),stride:8,offset:8}},blend:n.blend,depth:{enable:!1},scissor:n.scissor,stencil:n.stencil,viewport:n.viewport}),rect:a,miter:e}},_S.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},_S.prototype.render=function(){for(var t,e=[],r=arguments.length;r--;)e[r]=arguments[r];e.length&&(t=this).update.apply(t,e),this.draw()},_S.prototype.draw=function(){for(var t=this,e=[],r=arguments.length;r--;)e[r]=arguments[r];return(e.length?e:this.passes).forEach(function(e,r){if(e&&Array.isArray(e))return(n=t).draw.apply(n,e);var n;("number"==typeof e&&(e=t.passes[e]),e&&e.count>1&&e.opacity)&&(t.regl._refresh(),e.fill&&e.triangles&&e.triangles.length>2&&t.shaders.fill(e),e.thickness&&(e.scale[0]*e.viewport.width>_S.precisionThreshold||e.scale[1]*e.viewport.height>_S.precisionThreshold?t.shaders.rect(e):"rect"===e.join||!e.join&&(e.thickness<=2||e.count>=_S.maxPoints)?t.shaders.rect(e):t.shaders.miter(e)))}),this},_S.prototype.update=function(t){var e=this;if(t){null!=t.length?"number"==typeof t[0]&&(t=[{positions:t}]):Array.isArray(t)||(t=[t]);var r=this.regl,n=this.gl;if(t.forEach(function(t,a){var i=e.passes[a];if(void 0!==t)if(null!==t){if("number"==typeof t[0]&&(t={positions:t}),t=Pk(t,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow"}),i||(e.passes[a]=i={id:a,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],dashLength:1,dashTexture:r.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:r.buffer({usage:"dynamic",type:"uint8",data:null}),positionBuffer:r.buffer({usage:"dynamic",type:"float",data:null}),positionFractBuffer:r.buffer({usage:"dynamic",type:"float",data:null})},t=Xk({},_S.defaults,t)),null!=t.thickness&&(i.thickness=parseFloat(t.thickness)),null!=t.opacity&&(i.opacity=parseFloat(t.opacity)),null!=t.miterLimit&&(i.miterLimit=parseFloat(t.miterLimit)),null!=t.overlay&&(i.overlay=!!t.overlay),null!=t.join&&(i.join=t.join),null!=t.hole&&(i.hole=t.hole),null!=t.fill&&(i.fill=t.fill?gm(t.fill,"uint8"):null),null!=t.viewport&&(i.viewport=Fk(t.viewport)),i.viewport||(i.viewport=Fk([n.drawingBufferWidth,n.drawingBufferHeight])),null!=t.close&&(i.close=t.close),null===t.positions&&(t.positions=[]),t.positions){var o,l;if(t.positions.x&&t.positions.y){var s=t.positions.x,u=t.positions.y;l=i.count=Math.max(s.length,u.length),o=new Float64Array(2*l);for(var c=0;c<l;c++)o[2*c]=s[c],o[2*c+1]=u[c]}else o=Ok(t.positions,"float64"),l=i.count=Math.floor(o.length/2);var f=i.bounds=Lk(o,2);if(i.fill){for(var h=[],d={},p=0,g=0,v=0,m=i.count;g<m;g++){var y=o[2*g],x=o[2*g+1];isNaN(y)||isNaN(x)||null==y||null==x?(y=o[2*p],x=o[2*p+1],d[g]=p):p=g,h[v++]=y,h[v++]=x}for(var b=eE(h,i.hole||[]),_=0,w=b.length;_<w;_++)null!=d[b[_]]&&(b[_]=d[b[_]]);i.triangles=b}var A=new Float64Array(o);tE(A,2,f);var M=new Float64Array(2*l+6);i.close?o[0]===o[2*l-2]&&o[1]===o[2*l-1]?(M[0]=A[2*l-4],M[1]=A[2*l-3]):(M[0]=A[2*l-2],M[1]=A[2*l-1]):(M[0]=A[0],M[1]=A[1]),M.set(A,2),i.close?o[0]===o[2*l-2]&&o[1]===o[2*l-1]?(M[2*l+2]=A[2],M[2*l+3]=A[3],i.count-=1):(M[2*l+2]=A[0],M[2*l+3]=A[1],M[2*l+4]=A[2],M[2*l+5]=A[3]):(M[2*l+2]=A[2*l-2],M[2*l+3]=A[2*l-1],M[2*l+4]=A[2*l-2],M[2*l+5]=A[2*l-1]),i.positionBuffer(yS(M)),i.positionFractBuffer(xS(M))}if(t.range?i.range=t.range:i.range||(i.range=i.bounds),(t.range||t.positions)&&i.count){var T=i.bounds,k=T[2]-T[0],E=T[3]-T[1],C=i.range[2]-i.range[0],S=i.range[3]-i.range[1];i.scale=[k/C,E/S],i.translate=[-i.range[0]/C+T[0]/C||0,-i.range[1]/S+T[1]/S||0],i.scaleFract=xS(i.scale),i.translateFract=xS(i.translate)}if(t.dashes){var L,O=0;if(!t.dashes||t.dashes.length<2)O=1,L=new Uint8Array([255,255,255,255,255,255,255,255]);else{O=0;for(var D=0;D<t.dashes.length;++D)O+=t.dashes[D];L=new Uint8Array(O*_S.dashMult);for(var R=0,P=255,I=0;I<2;I++)for(var B=0;B<t.dashes.length;++B){for(var F=0,z=t.dashes[B]*_S.dashMult*.5;F<z;++F)L[R++]=P;P^=255}}i.dashLength=O,i.dashTexture({channels:1,data:L,width:L.length,height:1,mag:"linear",min:"linear"},0,0)}if(t.color){var N=i.count,j=t.color;j||(j="transparent");var U=new Uint8Array(4*N+4);if(Array.isArray(j)&&"number"!=typeof j[0]){for(var V=0;V<N;V++){var H=gm(j[V],"uint8");U.set(H,4*V)}U.set(gm(j[0],"uint8"),4*N)}else for(var q=gm(j,"uint8"),G=0;G<N+1;G++)U.set(q,4*G);i.colorBuffer({usage:"dynamic",type:"uint8",data:U})}}else e.passes[a]=null}),t.length<this.passes.length){for(var a=t.length;a<this.passes.length;a++){var i=e.passes[a];i&&(i.colorBuffer.destroy(),i.positionBuffer.destroy(),i.dashTexture.destroy())}this.passes.length=t.length}return this.passes=this.passes.filter(Boolean),this}},_S.prototype.destroy=function(){return this.passes.forEach(function(t){t.colorBuffer.destroy(),t.positionBuffer.destroy(),t.dashTexture.destroy()}),this.passes.length=0,this};var wS={};function AS(t,e){null==e&&(e=!0);var r=t[0],n=t[1],a=t[2],i=t[3];return null==i&&(i=e?1:255),e&&(r*=255,n*=255,a*=255,i*=255),16777216*(r=255&lm(r,0,255))+((n=255&lm(n,0,255))<<16)+((a=255&lm(a,0,255))<<8)+(i=255&lm(i,0,255))}(wS=AS).to=AS,wS.from=function(t,e){var r=(t=+t)>>>24,n=(16711680&t)>>>16,a=(65280&t)>>>8,i=255&t;return!1===e?[r,n,a,i]:[r/255,n/255,a/255,i/255]};var MS="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)),TS=Yk.float32,kS=Yk.fract32,ES=CS;function CS(t,e){var r=this;if(!(this instanceof CS))return new CS(t,e);"function"==typeof t?(e||(e={}),e.regl=t):(e=t,t=null),e&&e.length&&(e.positions=e);var n,a=(t=e.regl)._gl,i=[];this.tooManyColors=MS,n=t.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),Xk(this,{regl:t,gl:a,groups:[],markerCache:[null],markerTextures:[null],palette:i,paletteIds:{},paletteTexture:n,maxColors:255,maxSize:100,canvas:a.canvas}),this.update(e);var o={uniforms:{pixelRatio:t.context("pixelRatio"),palette:n,paletteSize:function(t,e){return[r.tooManyColors?0:255,n.height]},scale:t.prop("scale"),scaleFract:t.prop("scaleFract"),translate:t.prop("translate"),translateFract:t.prop("translateFract"),opacity:t.prop("opacity"),marker:t.prop("markerTexture")},attributes:{x:function(t,e){return e.xAttr||{buffer:e.positionBuffer,stride:8,offset:0}},y:function(t,e){return e.yAttr||{buffer:e.positionBuffer,stride:8,offset:4}},xFract:function(t,e){return e.xAttr?{constant:[0,0]}:{buffer:e.positionFractBuffer,stride:8,offset:0}},yFract:function(t,e){return e.yAttr?{constant:[0,0]}:{buffer:e.positionFractBuffer,stride:8,offset:4}},size:function(t,e){return e.size.length?{buffer:e.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*e.size/r.maxSize)]}},borderSize:function(t,e){return e.borderSize.length?{buffer:e.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*e.borderSize/r.maxSize)]}},colorId:function(t,e){return e.color.length?{buffer:e.colorBuffer,stride:r.tooManyColors?8:4,offset:0}:{constant:r.tooManyColors?i.slice(4*e.color,4*e.color+4):[e.color]}},borderColorId:function(t,e){return e.borderColor.length?{buffer:e.colorBuffer,stride:r.tooManyColors?8:4,offset:r.tooManyColors?4:2}:{constant:r.tooManyColors?i.slice(4*e.borderColor,4*e.borderColor+4):[e.borderColor]}},isActive:function(t,e){return!0===e.activation?{constant:[1]}:e.activation?e.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:t.prop("viewport")},viewport:t.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:t.prop("elements"),count:t.prop("count"),offset:t.prop("offset"),primitive:"points"},l=Xk({},o);l.frag=Ns(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float pixelRatio, opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(marker, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n    return;\n  }\n\n  float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n  float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n  vec4 color = fragBorderColor;\n  color.a *= borderColorAmt;\n  color = mix(color, fragColor, colorAmt);\n  color.a *= opacity;\n\n  gl_FragColor = color;\n}\n"]),l.vert=Ns(["precision mediump float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform sampler2D palette;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius,\n    fragWidth, fragBorderColorLevel, fragColorLevel;\n\nvec2 paletteCoord(float id) {\n  return vec2(\n    (mod(id, paletteSize.x) + .5) / paletteSize.x,\n    (floor(id / paletteSize.x) + .5) / paletteSize.y\n  );\n}\nvec2 paletteCoord(vec2 id) {\n  return vec2(\n    (id.x + .5) / paletteSize.x,\n    (id.y + .5) / paletteSize.y\n  );\n}\nvec4 getColor(vec4 id) {\n  // zero-palette means we deal with direct buffer\n  if (paletteSize.x == 0.) return id / 255.;\n  return texture2D(palette, paletteCoord(id.xy));\n}\n\nvoid main() {\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pixelRatio;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0, 1);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}\n"]);try{this.drawMarker=t(l)}catch(t){}var s=Xk({},o);s.frag=Ns(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),s.vert=Ns(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nvec2 paletteCoord(float id) {\n  return vec2(\n    (mod(id, paletteSize.x) + .5) / paletteSize.x,\n    (floor(id / paletteSize.x) + .5) / paletteSize.y\n  );\n}\nvec2 paletteCoord(vec2 id) {\n  return vec2(\n    (id.x + .5) / paletteSize.x,\n    (id.y + .5) / paletteSize.y\n  );\n}\n\nvec4 getColor(vec4 id) {\n  // zero-palette means we deal with direct buffer\n  if (paletteSize.x == 0.) return id / 255.;\n  return texture2D(palette, paletteCoord(id.xy));\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0, 1);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),MS&&(s.frag=s.frag.replace("smoothstep","smoothStep")),this.drawCircle=t(s)}CS.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},CS.prototype.render=function(){for(var t,e=[],r=arguments.length;r--;)e[r]=arguments[r];return e.length&&(t=this).update.apply(t,e),this.draw(),this},CS.prototype.draw=function(){for(var t=this,e=[],r=arguments.length;r--;)e[r]=arguments[r];var n=this.groups;if(1===e.length&&Array.isArray(e[0])&&(null===e[0][0]||Array.isArray(e[0][0]))&&(e=e[0]),e.length)for(var a=0;a<e.length;a++)t.drawItem(a,e[a]);else n.forEach(function(e,r){t.drawItem(r)});return this},CS.prototype.drawItem=function(t,e){var r=this.groups,n=r[t];if("number"==typeof e&&(t=e,n=r[e],e=null),n&&n.count&&n.opacity){n.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,n,e));for(var a=[],i=1;i<n.activation.length;i++)n.activation[i]&&(!0===n.activation[i]||n.activation[i].data.length)&&a.push.apply(a,this.getMarkerDrawOptions(i,n,e));a.length&&this.drawMarker(a)}},CS.prototype.getMarkerDrawOptions=function(t,e,r){var n=e.range,a=e.tree,i=e.viewport,o=e.activation,l=e.selectionBuffer,s=e.count;this.regl;if(!a)return r?[Xk({},e,{markerTexture:this.markerTextures[t],activation:o[t],count:r.length,elements:r,offset:0})]:[Xk({},e,{markerTexture:this.markerTextures[t],activation:o[t],offset:0})];var u=[],c=a.range(n,{lod:!0,px:[(n[2]-n[0])/i.width,(n[3]-n[1])/i.height]});if(r){for(var f=o[t].data,h=new Uint8Array(s),d=0;d<r.length;d++){var p=r[d];h[p]=f?f[p]:1}l.subdata(h)}for(var g=c.length;g--;){var v=c[g],m=v[0],y=v[1];u.push(Xk({},e,{markerTexture:this.markerTextures[t],activation:r?l:o[t],offset:m,count:y-m,elements:e.elements}))}return u},CS.prototype.update=function(){for(var t=this,e=[],r=arguments.length;r--;)e[r]=arguments[r];if(e.length){1===e.length&&Array.isArray(e[0])&&(e=e[0]);var n=this.groups,a=this.gl,i=this.regl,o=this.maxSize,l=this.maxColors,s=this.palette;this.groups=n=e.map(function(e,r){var u=n[r];if(void 0===e)return u;null===e?e={positions:null}:"function"==typeof e?e={ondraw:e}:"number"==typeof e[0]&&(e={positions:e}),null===(e=Pk(e,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits"})).positions&&(e.positions=[]),u||(n[r]=u={id:r,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:i.buffer({usage:"stream",type:"uint8"}),sizeBuffer:i.buffer({usage:"dynamic",type:"uint8"}),colorBuffer:i.buffer({usage:"dynamic",type:"uint8"}),positionBuffer:i.buffer({usage:"dynamic",type:"float"}),positionFractBuffer:i.buffer({usage:"dynamic",type:"float"})},e=Xk({},CS.defaults,e)),!e.positions||"marker"in e||(e.marker=u.marker,delete u.marker),!e.marker||"positions"in e||(e.positions=u.positions,delete u.positions);var c=0,f=0;if(Zk(u,e,[{snap:!0,size:function(t,e){return null==t&&(t=CS.defaults.size),c+=t&&t.length?1:0,t},borderSize:function(t,e){return null==t&&(t=CS.defaults.borderSize),c+=t&&t.length?1:0,t},opacity:parseFloat,color:function(e,r){return null==e&&(e=CS.defaults.color),e=t.updateColor(e),f++,e},borderColor:function(e,r){return null==e&&(e=CS.defaults.borderColor),e=t.updateColor(e),f++,e},bounds:function(t,e,r){return"range"in r||(r.range=null),t},positions:function(t,e,r){var n=r.snap,a=e.positionBuffer,o=e.positionFractBuffer,l=e.selectionBuffer;if(t.x||t.y)return t.x.length?e.xAttr={buffer:i.buffer(t.x),offset:0,stride:4,count:t.x.length}:e.xAttr={buffer:t.x.buffer,offset:4*t.x.offset||0,stride:4*(t.x.stride||1),count:t.x.count},t.y.length?e.yAttr={buffer:i.buffer(t.y),offset:0,stride:4,count:t.y.length}:e.yAttr={buffer:t.y.buffer,offset:4*t.y.offset||0,stride:4*(t.y.stride||1),count:t.y.count},e.count=Math.max(e.xAttr.count,e.yAttr.count),t;t=Ok(t,"float64");var s=e.count=Math.floor(t.length/2),u=e.bounds=s?Lk(t,2):null;if(r.range||e.range||(delete e.range,r.range=u),r.marker||e.marker||(delete e.marker,r.marker=null),n&&(!0===n||s>n)?e.tree=Vk(t,{bounds:u}):n&&n.length&&(e.tree=n),e.tree){var c={primitive:"points",usage:"static",data:e.tree,type:"uint32"};e.elements?e.elements(c):e.elements=i.elements(c)}return a({data:TS(t),usage:"dynamic"}),o({data:kS(t),usage:"dynamic"}),l({data:new Uint8Array(s),type:"uint8",usage:"stream"}),t}},{marker:function(e,r,n){var a=r.activation;if(a.forEach(function(t){return t&&t.destroy&&t.destroy()}),a.length=0,e&&"number"!=typeof e[0]){for(var o=[],l=0,s=Math.min(e.length,r.count);l<s;l++){var u=t.addMarker(e[l]);o[u]||(o[u]=new Uint8Array(r.count)),o[u][l]=1}for(var c=0;c<o.length;c++)if(o[c]){var f={data:o[c],type:"uint8",usage:"static"};a[c]?a[c](f):a[c]=i.buffer(f),a[c].data=o[c]}}else{a[t.addMarker(e)]=!0}return e},range:function(t,e,r){var n=e.bounds;if(n)return t||(t=n),e.scale=[1/(t[2]-t[0]),1/(t[3]-t[1])],e.translate=[-t[0],-t[1]],e.scaleFract=kS(e.scale),e.translateFract=kS(e.translate),t},viewport:function(t){return Fk(t||[a.drawingBufferWidth,a.drawingBufferHeight])}}]),c){var h=u.count,d=u.size,p=u.borderSize,g=u.sizeBuffer,v=new Uint8Array(2*h);if(d.length||p.length)for(var m=0;m<h;m++)v[2*m]=Math.round(255*(null==d[m]?d:d[m])/o),v[2*m+1]=Math.round(255*(null==p[m]?p:p[m])/o);g({data:v,usage:"dynamic"})}if(f){var y,x=u.count,b=u.color,_=u.borderColor,w=u.colorBuffer;if(t.tooManyColors){if(b.length||_.length){y=new Uint8Array(8*x);for(var A=0;A<x;A++){var M=b[A];y[8*A]=s[4*M],y[8*A+1]=s[4*M+1],y[8*A+2]=s[4*M+2],y[8*A+3]=s[4*M+3];var T=_[A];y[8*A+4]=s[4*T],y[8*A+5]=s[4*T+1],y[8*A+6]=s[4*T+2],y[8*A+7]=s[4*T+3]}}}else if(b.length||_.length){y=new Uint8Array(4*x+2);for(var k=0;k<x;k++)null!=b[k]&&(y[4*k]=b[k]%l,y[4*k+1]=Math.floor(b[k]/l)),null!=_[k]&&(y[4*k+2]=_[k]%l,y[4*k+3]=Math.floor(_[k]/l))}w({data:y,type:"uint8",usage:"dynamic"})}return u})}},CS.prototype.addMarker=function(t){var e,r=this.markerTextures,n=this.regl,a=this.markerCache,i=null==t?0:a.indexOf(t);if(i>=0)return i;if(t instanceof Uint8Array||t instanceof Uint8ClampedArray)e=t;else{e=new Uint8Array(t.length);for(var o=0,l=t.length;o<l;o++)e[o]=255*t[o]}var s=Math.floor(Math.sqrt(e.length));return i=r.length,a.push(t),r.push(n.texture({channels:1,data:e,radius:s,mag:"linear",min:"linear"})),i},CS.prototype.updateColor=function(t){var e=this.paletteIds,r=this.palette,n=this.maxColors;Array.isArray(t)||(t=[t]);var a=[];if("number"==typeof t[0]){var i=[];if(Array.isArray(t))for(var o=0;o<t.length;o+=4)i.push(t.slice(o,o+4));else for(var l=0;l<t.length;l+=4)i.push(t.subarray(l,l+4));t=i}for(var s=0;s<t.length;s++){var u=t[s];u=gm(u,"uint8");var c=wS(u,!1);if(null==e[c]){var f=r.length;e[c]=Math.floor(f/4),r[f]=u[0],r[f+1]=u[1],r[f+2]=u[2],r[f+3]=u[3]}a[s]=e[c]}return!this.tooManyColors&&r.length>n*n*4&&(this.tooManyColors=!0),this.updatePalette(r),1===a.length?a[0]:a},CS.prototype.updatePalette=function(t){if(!this.tooManyColors){var e=this.maxColors,r=this.paletteTexture,n=Math.ceil(.25*t.length/e);if(n>1)for(var a=.25*(t=t.slice()).length%e;a<n*e;a++)t.push(0,0,0,0);r.height<n&&r.resize(e,n),r.subimage({width:Math.min(.25*t.length,e),height:n,data:t},0,0)}},CS.prototype.destroy=function(){return this.groups.forEach(function(t){t.sizeBuffer.destroy(),t.positionBuffer.destroy(),t.positionFractBuffer.destroy(),t.colorBuffer.destroy(),t.activation.forEach(function(t){return t&&t.destroy&&t.destroy()}),t.selectionBuffer.destroy(),t.elements&&t.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(t){return t&&t.destroy&&t.destroy()}),this};var SS=function(t,e){var r=new ES(t,e),n=r.render.bind(r);return Xk(n,{render:n,update:r.update.bind(r),draw:r.draw.bind(r),destroy:r.destroy.bind(r),regl:r.regl,gl:r.gl,canvas:r.gl.canvas,groups:r.groups,markers:r.markerCache,palette:r.palette}),n},LS={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}},OS={},DS=b.extendFlat,RS=_e.overrideAll,PS=LS.DASHES,IS=Ln.line,BS=Ln.marker,FS=BS.line,zS=OS=RS({x:Ln.x,x0:Ln.x0,dx:Ln.dx,y:Ln.y,y0:Ln.y0,dy:Ln.dy,text:DS({},Ln.text,{}),mode:{valType:"flaglist",flags:["lines","markers"],extras:["none"]},line:{color:IS.color,width:IS.width,dash:{valType:"enumerated",values:Object.keys(PS),dflt:"solid"}},marker:DS({},kn(),{symbol:BS.symbol,size:BS.size,sizeref:BS.sizeref,sizemin:BS.sizemin,sizemode:BS.sizemode,opacity:BS.opacity,showscale:BS.showscale,colorbar:BS.colorbar,line:DS({},kn(),{width:FS.width})}),connectgaps:Ln.connectgaps,fill:Ln.fill,fillcolor:Ln.fillcolor,hoveron:Ln.hoveron,selected:{marker:Ln.selected.marker},unselected:{marker:Ln.unselected.marker},opacity:O.opacity},"calc","nested");zS.x.editType=zS.y.editType=zS.x0.editType=zS.y0.editType="calc+clearAxisTypes";var NS=function(t,e){e||(e={});var r,n,a,i,o,l,s,u,c,f,h,d=null==e.cutoff?.25:e.cutoff,p=null==e.radius?8:e.radius,g=e.channel||0;if(ArrayBuffer.isView(t)||Array.isArray(t)){if(!e.width||!e.height)throw Error("For raw data width and height should be provided by options");r=e.width,n=e.height,i=t,l=e.stride?e.stride:Math.floor(t.length/r/n)}else window.HTMLCanvasElement&&t instanceof window.HTMLCanvasElement?(s=(u=t).getContext("2d"),r=u.width,n=u.height,c=s.getImageData(0,0,r,n),i=c.data,l=4):window.CanvasRenderingContext2D&&t instanceof window.CanvasRenderingContext2D?(u=t.canvas,s=t,r=u.width,n=u.height,c=s.getImageData(0,0,r,n),i=c.data,l=4):window.ImageData&&t instanceof window.ImageData&&(c=t,r=t.width,n=t.height,i=c.data,l=4);if(a=Math.max(r,n),window.Uint8ClampedArray&&i instanceof window.Uint8ClampedArray||window.Uint8Array&&i instanceof window.Uint8Array)for(o=i,i=Array(r*n),f=0,h=o.length;f<h;f++)i[f]=o[f*l+g]/255;else if(1!==l)throw Error("Raw data can have only 1 value per pixel");var v=Array(r*n),m=Array(r*n),y=Array(a),x=Array(a),b=Array(a+1),_=Array(a);for(f=0,h=r*n;f<h;f++){var w=i[f];v[f]=1===w?0:0===w?jS:Math.pow(Math.max(0,.5-w),2),m[f]=1===w?jS:0===w?0:Math.pow(Math.max(0,w-.5),2)}US(v,r,n,y,x,_,b),US(m,r,n,y,x,_,b);var A=window.Float32Array?new Float32Array(r*n):new Array(r*n);for(f=0,h=r*n;f<h;f++)A[f]=lm(1-((v[f]-m[f])/p+d),0,1);return A},jS=1e20;function US(t,e,r,n,a,i,o){for(var l=0;l<e;l++){for(var s=0;s<r;s++)n[s]=t[s*e+l];for(VS(n,a,i,o,r),s=0;s<r;s++)t[s*e+l]=a[s]}for(s=0;s<r;s++){for(l=0;l<e;l++)n[l]=t[s*e+l];for(VS(n,a,i,o,e),l=0;l<e;l++)t[s*e+l]=Math.sqrt(a[l])}}function VS(t,e,r,n,a){r[0]=0,n[0]=-jS,n[1]=+jS;for(var i=1,o=0;i<a;i++){for(var l=(t[i]+i*i-(t[r[o]]+r[o]*r[o]))/(2*i-2*r[o]);l<=n[o];)o--,l=(t[i]+i*i-(t[r[o]]+r[o]*r[o]))/(2*i-2*r[o]);r[++o]=i,n[o]=l,n[o+1]=+jS}for(i=0,o=0;i<a;i++){for(;n[o+1]<i;)o++;e[i]=(i-r[o])*(i-r[o])+t[r[o]]}}var HS=function(t){var e=0,r=0,n=0,a=0;return t.map(function(t){var i=(t=t.slice())[0],o=i.toUpperCase();if(i!=o)switch(t[0]=o,i){case"a":t[6]+=n,t[7]+=a;break;case"v":t[1]+=a;break;case"h":t[1]+=n;break;default:for(var l=1;l<t.length;)t[l++]+=n,t[l++]+=a}switch(o){case"Z":n=e,a=r;break;case"H":n=t[1];break;case"V":a=t[1];break;case"M":n=e=t[1],a=r=t[2];break;default:n=t[t.length-2],a=t[t.length-1]}return t})};var qS=Math.PI,GS=QS(120),XS=function(t){for(var e,r=[],n=0,a=0,i=0,o=0,l=null,s=null,u=0,c=0,f=0,h=t.length;f<h;f++){var d=t[f],p=d[0];switch(p){case"M":i=d[1],o=d[2];break;case"A":(d=ZS(u,c,d[1],d[2],QS(d[3]),d[4],d[5],d[6],d[7])).unshift("C"),d.length>7&&(r.push(d.splice(0,7)),d.unshift("C"));break;case"S":var g=u,v=c;"C"!=e&&"S"!=e||(g+=g-n,v+=v-a),d=["C",g,v,d[1],d[2],d[3],d[4]];break;case"T":"Q"==e||"T"==e?(l=2*u-l,s=2*c-s):(l=u,s=c),d=WS(u,c,l,s,d[1],d[2]);break;case"Q":l=d[1],s=d[2],d=WS(u,c,d[1],d[2],d[3],d[4]);break;case"L":d=YS(u,c,d[1],d[2]);break;case"H":d=YS(u,c,d[1],c);break;case"V":d=YS(u,c,u,d[1]);break;case"Z":d=YS(u,c,i,o)}e=p,u=d[d.length-2],c=d[d.length-1],d.length>4?(n=d[d.length-4],a=d[d.length-3]):(n=u,a=c),r.push(d)}return r};function YS(t,e,r,n){return["C",t,e,r,n,r,n]}function WS(t,e,r,n,a,i){return["C",t/3+2/3*r,e/3+2/3*n,a/3+2/3*r,i/3+2/3*n,a,i]}function ZS(t,e,r,n,a,i,o,l,s,u){if(u)x=u[0],b=u[1],m=u[2],y=u[3];else{var c=JS(t,e,-a);t=c.x,e=c.y;var f=(t-(l=(c=JS(l,s,-a)).x))/2,h=(e-(s=c.y))/2,d=f*f/(r*r)+h*h/(n*n);d>1&&(r*=d=Math.sqrt(d),n*=d);var p=r*r,g=n*n,v=(i==o?-1:1)*Math.sqrt(Math.abs((p*g-p*h*h-g*f*f)/(p*h*h+g*f*f)));v==1/0&&(v=1);var m=v*r*h/n+(t+l)/2,y=v*-n*f/r+(e+s)/2,x=Math.asin(((e-y)/n).toFixed(9)),b=Math.asin(((s-y)/n).toFixed(9));x=t<m?qS-x:x,b=l<m?qS-b:b,x<0&&(x=2*qS+x),b<0&&(b=2*qS+b),o&&x>b&&(x-=2*qS),!o&&b>x&&(b-=2*qS)}if(Math.abs(b-x)>GS){var _=b,w=l,A=s;b=x+GS*(o&&b>x?1:-1);var M=ZS(l=m+r*Math.cos(b),s=y+n*Math.sin(b),r,n,a,0,o,w,A,[b,_,m,y])}var T=Math.tan((b-x)/4),k=4/3*r*T,E=4/3*n*T,C=[2*t-(t+k*Math.sin(x)),2*e-(e-E*Math.cos(x)),l+k*Math.sin(b),s-E*Math.cos(b),l,s];if(u)return C;M&&(C=C.concat(M));for(var S=0;S<C.length;){var L=JS(C[S],C[S+1],a);C[S++]=L.x,C[S++]=L.y}return C}function JS(t,e,r){return{x:t*Math.cos(r)-e*Math.sin(r),y:t*Math.sin(r)+e*Math.cos(r)}}function QS(t){return t*(qS/180)}var $S={M:"moveTo",C:"bezierCurveTo"},KS=function(t,e){t.beginPath(),XS(HS(e)).forEach(function(e){var r=e[0],n=e.slice(1);t[$S[r]].apply(t,n)}),t.closePath()},tL=function(t){return"string"==typeof t&&(t=t.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(t)&&/[\dz]$/i.test(t)&&t.length>4))},eL=function(t){var e=[];return t.replace(nL,function(t,r,n){var a=r.toLowerCase();for(n=function(t){var e=t.match(aL);return e?e.map(Number):[]}(n),"m"==a&&n.length>2&&(e.push([r].concat(n.splice(0,2))),a="l",r="m"==r?"l":"L");;){if(n.length==rL[a])return n.unshift(r),e.push(n);if(n.length<rL[a])throw new Error("malformed path data");e.push([r].concat(n.splice(0,rL[a])))}}),e},rL={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},nL=/([astvzqmhlc])([^astvzqmhlc]*)/gi;var aL=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;var iL={};iL="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t};var oL=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8},lL={};(function(t,e){var r=/%[sdj%]/g;lL.format=function(t){if(!g(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}n=1;for(var a=arguments,o=a.length,l=String(t).replace(r,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(a[n++]);case"%d":return Number(a[n++]);case"%j":try{return JSON.stringify(a[n++])}catch(t){return"[Circular]"}default:return t}}),s=a[n];n<o;s=a[++n])d(s)||!y(s)?l+=" "+s:l+=" "+i(s);return l},lL.deprecate=function(r,n){if(v(e.process))return function(){return lL.deprecate(r,n).apply(this,arguments)};if(!0===t.noDeprecation)return r;var a=!1;return function(){if(!a){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),a=!0}return r.apply(this,arguments)}};var n,a={};function i(t,e){var r={seen:[],stylize:l};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),h(e)?r.showHidden=e:e&&lL._extend(r,e),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),s(r,t,r.depth)}function o(t,e){var r=i.styles[e];return r?"\x1b["+i.colors[r][0]+"m"+t+"\x1b["+i.colors[r][1]+"m":t}function l(t,e){return t}function s(t,e,r){if(t.customInspect&&e&&_(e.inspect)&&e.inspect!==lL.inspect&&(!e.constructor||e.constructor.prototype!==e)){var n=e.inspect(r,t);return g(n)||(n=s(t,n,r)),n}var a=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(g(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(p(e))return t.stylize(""+e,"number");if(h(e))return t.stylize(""+e,"boolean");if(d(e))return t.stylize("null","null")}(t,e);if(a)return a;var i=Object.keys(e),o=function(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}(i);if(t.showHidden&&(i=Object.getOwnPropertyNames(e)),b(e)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return u(e);if(0===i.length){if(_(e)){var l=e.name?": "+e.name:"";return t.stylize("[Function"+l+"]","special")}if(m(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(x(e))return t.stylize(Date.prototype.toString.call(e),"date");if(b(e))return u(e)}var y,w="",A=!1,M=["{","}"];(f(e)&&(A=!0,M=["[","]"]),_(e))&&(w=" [Function"+(e.name?": "+e.name:"")+"]");return m(e)&&(w=" "+RegExp.prototype.toString.call(e)),x(e)&&(w=" "+Date.prototype.toUTCString.call(e)),b(e)&&(w=" "+u(e)),0!==i.length||A&&0!=e.length?r<0?m(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),y=A?function(t,e,r,n,a){for(var i=[],o=0,l=e.length;o<l;++o)T(e,String(o))?i.push(c(t,e,r,n,String(o),!0)):i.push("");return a.forEach(function(a){a.match(/^\d+$/)||i.push(c(t,e,r,n,a,!0))}),i}(t,e,r,o,i):i.map(function(n){return c(t,e,r,o,n,A)}),t.seen.pop(),function(t,e,r){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(y,w,M)):M[0]+w+M[1]}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function c(t,e,r,n,a,i){var o,l,u;if((u=Object.getOwnPropertyDescriptor(e,a)||{value:e[a]}).get?l=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(l=t.stylize("[Setter]","special")),T(n,a)||(o="["+a+"]"),l||(t.seen.indexOf(u.value)<0?(l=d(r)?s(t,u.value,null):s(t,u.value,r-1)).indexOf("\n")>-1&&(l=i?l.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+l.split("\n").map(function(t){return"   "+t}).join("\n")):l=t.stylize("[Circular]","special")),v(o)){if(i&&a.match(/^\d+$/))return l;(o=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+l}function f(t){return Array.isArray(t)}function h(t){return"boolean"==typeof t}function d(t){return null===t}function p(t){return"number"==typeof t}function g(t){return"string"==typeof t}function v(t){return void 0===t}function m(t){return y(t)&&"[object RegExp]"===w(t)}function y(t){return"object"==typeof t&&null!==t}function x(t){return y(t)&&"[object Date]"===w(t)}function b(t){return y(t)&&("[object Error]"===w(t)||t instanceof Error)}function _(t){return"function"==typeof t}function w(t){return Object.prototype.toString.call(t)}function A(t){return t<10?"0"+t.toString(10):t.toString(10)}lL.debuglog=function(e){if(v(n)&&(n=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!a[e])if(new RegExp("\\b"+e+"\\b","i").test(n)){var r=t.pid;a[e]=function(){var t=lL.format.apply(lL,arguments);console.error("%s %d: %s",e,r,t)}}else a[e]=function(){};return a[e]},lL.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},lL.isArray=f,lL.isBoolean=h,lL.isNull=d,lL.isNullOrUndefined=function(t){return null==t},lL.isNumber=p,lL.isString=g,lL.isSymbol=function(t){return"symbol"==typeof t},lL.isUndefined=v,lL.isRegExp=m,lL.isObject=y,lL.isDate=x,lL.isError=b,lL.isFunction=_,lL.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},lL.isBuffer=oL;var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function T(t,e){return Object.prototype.hasOwnProperty.call(t,e)}lL.log=function(){var t,e;console.log("%s - %s",(t=new Date,e=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":"),[t.getDate(),M[t.getMonth()],e].join(" ")),lL.format.apply(lL,arguments))},lL.inherits=iL,lL._extend=function(t,e){if(!e||!y(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,_c,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var sL={};(function(t){"use strict";function e(t,e){if(t===e)return 0;for(var r=t.length,n=e.length,a=0,i=Math.min(r,n);a<i;++a)if(t[a]!==e[a]){r=t[a],n=e[a];break}return r<n?-1:n<r?1:0}function r(e){return t.Buffer&&"function"==typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var n=Object.prototype.hasOwnProperty,a=Array.prototype.slice,i="foo"===function(){}.name;function o(t){return Object.prototype.toString.call(t)}function l(e){return!r(e)&&("function"==typeof t.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var s=sL=p,u=/\s*function\s+([^\(\s]*)\s*/;function c(t){if(lL.isFunction(t)){if(i)return t.name;var e=t.toString().match(u);return e&&e[1]}}function f(t,e){return"string"==typeof t?t.length<e?t:t.slice(0,e):t}function h(t){if(i||!lL.isFunction(t))return lL.inspect(t);var e=c(t);return"[Function"+(e?": "+e:"")+"]"}function d(t,e,r,n,a){throw new s.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:a})}function p(t,e){t||d(t,!0,e,"==",s.ok)}function g(t,n,i,s){if(t===n)return!0;if(r(t)&&r(n))return 0===e(t,n);if(lL.isDate(t)&&lL.isDate(n))return t.getTime()===n.getTime();if(lL.isRegExp(t)&&lL.isRegExp(n))return t.source===n.source&&t.global===n.global&&t.multiline===n.multiline&&t.lastIndex===n.lastIndex&&t.ignoreCase===n.ignoreCase;if(null!==t&&"object"==typeof t||null!==n&&"object"==typeof n){if(l(t)&&l(n)&&o(t)===o(n)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===e(new Uint8Array(t.buffer),new Uint8Array(n.buffer));if(r(t)!==r(n))return!1;var u=(s=s||{actual:[],expected:[]}).actual.indexOf(t);return-1!==u&&u===s.expected.indexOf(n)||(s.actual.push(t),s.expected.push(n),function(t,e,r,n){if(null===t||void 0===t||null===e||void 0===e)return!1;if(lL.isPrimitive(t)||lL.isPrimitive(e))return t===e;if(r&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=v(t),o=v(e);if(i&&!o||!i&&o)return!1;if(i)return t=a.call(t),e=a.call(e),g(t,e,r);var l,s,u=x(t),c=x(e);if(u.length!==c.length)return!1;for(u.sort(),c.sort(),s=u.length-1;s>=0;s--)if(u[s]!==c[s])return!1;for(s=u.length-1;s>=0;s--)if(l=u[s],!g(t[l],e[l],r,n))return!1;return!0}(t,n,i,s))}return i?t===n:t==n}function v(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function m(t,e){if(!t||!e)return!1;if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return!0}catch(t){}return!Error.isPrototypeOf(e)&&!0===e.call({},t)}function y(t,e,r,n){var a;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof r&&(n=r,r=null),a=function(t){var e;try{t()}catch(t){e=t}return e}(e),n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!a&&d(a,r,"Missing expected exception"+n);var i="string"==typeof n,o=!t&&lL.isError(a),l=!t&&a&&!r;if((o&&i&&m(a,r)||l)&&d(a,r,"Got unwanted exception"+n),t&&a&&r&&!m(a,r)||!t&&a)throw a}s.AssertionError=function(t){var e;this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=f(h((e=this).actual),128)+" "+e.operator+" "+f(h(e.expected),128),this.generatedMessage=!0);var r=t.stackStartFunction||d;if(Error.captureStackTrace)Error.captureStackTrace(this,r);else{var n=new Error;if(n.stack){var a=n.stack,i=c(r),o=a.indexOf("\n"+i);if(o>=0){var l=a.indexOf("\n",o+1);a=a.substring(l+1)}this.stack=a}}},lL.inherits(s.AssertionError,Error),s.fail=d,s.ok=p,s.equal=function(t,e,r){t!=e&&d(t,e,r,"==",s.equal)},s.notEqual=function(t,e,r){t==e&&d(t,e,r,"!=",s.notEqual)},s.deepEqual=function(t,e,r){g(t,e,!1)||d(t,e,r,"deepEqual",s.deepEqual)},s.deepStrictEqual=function(t,e,r){g(t,e,!0)||d(t,e,r,"deepStrictEqual",s.deepStrictEqual)},s.notDeepEqual=function(t,e,r){g(t,e,!1)&&d(t,e,r,"notDeepEqual",s.notDeepEqual)},s.notDeepStrictEqual=function t(e,r,n){g(e,r,!0)&&d(e,r,n,"notDeepStrictEqual",t)},s.strictEqual=function(t,e,r){t!==e&&d(t,e,r,"===",s.strictEqual)},s.notStrictEqual=function(t,e,r){t===e&&d(t,e,r,"!==",s.notStrictEqual)},s.throws=function(t,e,r){y(!0,t,e,r)},s.doesNotThrow=function(t,e,r){y(!1,t,e,r)},s.ifError=function(t){if(t)throw t};var x=Object.keys||function(t){var e=[];for(var r in t)n.call(t,r)&&e.push(r);return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var uL={};Object.defineProperty(uL,"__esModule",{value:!0});var cL=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var r=[],n=!0,a=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(t){a=!0,i=t}finally{try{!n&&l.return&&l.return()}finally{if(a)throw i}}return r}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),fL=2*Math.PI,hL=function(t,e,r,n,a,i,o){var l=t.x,s=t.y;return{x:n*(l*=e)-a*(s*=r)+i,y:a*l+n*s+o}},dL=function(t,e){var r=4/3*Math.tan(e/4),n=Math.cos(t),a=Math.sin(t),i=Math.cos(t+e),o=Math.sin(t+e);return[{x:n-a*r,y:a+n*r},{x:i+o*r,y:o-i*r},{x:i,y:o}]},pL=function(t,e,r,n){var a=t*n-e*r<0?-1:1,i=(t*r+e*n)/(Math.sqrt(t*t+e*e)*Math.sqrt(t*t+e*e));return i>1&&(i=1),i<-1&&(i=-1),a*Math.acos(i)};uL.default=function(t){var e=t.px,r=t.py,n=t.cx,a=t.cy,i=t.rx,o=t.ry,l=t.xAxisRotation,s=void 0===l?0:l,u=t.largeArcFlag,c=void 0===u?0:u,f=t.sweepFlag,h=void 0===f?0:f,d=[];if(0===i||0===o)return[];var p=Math.sin(s*fL/360),g=Math.cos(s*fL/360),v=g*(e-n)/2+p*(r-a)/2,m=-p*(e-n)/2+g*(r-a)/2;if(0===v&&0===m)return[];i=Math.abs(i),o=Math.abs(o);var y=Math.pow(v,2)/Math.pow(i,2)+Math.pow(m,2)/Math.pow(o,2);y>1&&(i*=Math.sqrt(y),o*=Math.sqrt(y));var x=function(t,e,r,n,a,i,o,l,s,u,c,f){var h=Math.pow(a,2),d=Math.pow(i,2),p=Math.pow(c,2),g=Math.pow(f,2),v=h*d-h*g-d*p;v<0&&(v=0),v/=h*g+d*p;var m=(v=Math.sqrt(v)*(o===l?-1:1))*a/i*f,y=v*-i/a*c,x=u*m-s*y+(t+r)/2,b=s*m+u*y+(e+n)/2,_=(c-m)/a,w=(f-y)/i,A=(-c-m)/a,M=(-f-y)/i,T=pL(1,0,_,w),k=pL(_,w,A,M);return 0===l&&k>0&&(k-=fL),1===l&&k<0&&(k+=fL),[x,b,T,k]}(e,r,n,a,i,o,c,h,p,g,v,m),b=cL(x,4),_=b[0],w=b[1],A=b[2],M=b[3],T=Math.max(Math.ceil(Math.abs(M)/(fL/4)),1);M/=T;for(var k=0;k<T;k++)d.push(dL(A,M)),A+=M;return d.map(function(t){var e=hL(t[0],i,o,g,p,_,w),r=e.x,n=e.y,a=hL(t[1],i,o,g,p,_,w),l=a.x,s=a.y,u=hL(t[2],i,o,g,p,_,w);return{x1:r,y1:n,x2:l,y2:s,x:u.x,y:u.y}})},uL=uL.default;var gL=function(t){for(var e,r=[],n=0,a=0,i=0,o=0,l=null,s=null,u=0,c=0,f=0,h=t.length;f<h;f++){var d=t[f],p=d[0];switch(p){case"M":i=d[1],o=d[2];break;case"A":var g=uL({px:u,py:c,cx:d[6],cy:d[7],rx:d[1],ry:d[2],xAxisRotation:d[3],largeArcFlag:d[4],sweepFlag:d[5]});if(!g.length)continue;for(var v,m=0;m<g.length;m++)v=g[m],d=["C",v.x1,v.y1,v.x2,v.y2,v.x,v.y],m<g.length-1&&r.push(d);break;case"S":var y=u,x=c;"C"!=e&&"S"!=e||(y+=y-n,x+=x-a),d=["C",y,x,d[1],d[2],d[3],d[4]];break;case"T":"Q"==e||"T"==e?(l=2*u-l,s=2*c-s):(l=u,s=c),d=mL(u,c,l,s,d[1],d[2]);break;case"Q":l=d[1],s=d[2],d=mL(u,c,d[1],d[2],d[3],d[4]);break;case"L":d=vL(u,c,d[1],d[2]);break;case"H":d=vL(u,c,d[1],c);break;case"V":d=vL(u,c,u,d[1]);break;case"Z":d=vL(u,c,i,o)}e=p,u=d[d.length-2],c=d[d.length-1],d.length>4?(n=d[d.length-4],a=d[d.length-3]):(n=u,a=c),r.push(d)}return r};function vL(t,e,r,n){return["C",t,e,r,n,r,n]}function mL(t,e,r,n,a,i){return["C",t/3+2/3*r,e/3+2/3*n,a/3+2/3*r,i/3+2/3*n,a,i]}var yL=function(t){Array.isArray(t)&&1===t.length&&"string"==typeof t[0]&&(t=t[0]);"string"==typeof t&&(sL(tL(t),"String is not an SVG path."),t=eL(t));if(sL(Array.isArray(t),"Argument should be a string or an array of path segments."),t=HS(t),!(t=gL(t)).length)return[0,0,0,0];for(var e=[1/0,1/0,-1/0,-1/0],r=0,n=t.length;r<n;r++)for(var a=t[r].slice(1),i=0;i<a.length;i+=2)a[i+0]<e[0]&&(e[0]=a[i+0]),a[i+1]<e[1]&&(e[1]=a[i+1]),a[i+0]>e[2]&&(e[2]=a[i+0]),a[i+1]>e[3]&&(e[3]=a[i+1]);return e};var xL={};(function(t){"use strict";var e=document.createElement("canvas"),r=e.getContext("2d");xL=function(n,a){if(!tL(n))throw Error("Argument should be valid svg path string");a||(a={});var i,o;a.shape?(i=a.shape[0],o=a.shape[1]):(i=e.width=a.w||a.width||200,o=e.height=a.h||a.height||200);var l=Math.min(i,o),s=a.stroke||0,u=a.viewbox||a.viewBox||yL(n),c=[i/(u[2]-u[0]),o/(u[3]-u[1])],f=Math.min(c[0]||0,c[1]||0)/2;r.fillStyle="black",r.fillRect(0,0,i,o),r.fillStyle="white",s&&("number"!=typeof s&&(s=1),r.strokeStyle=s>0?"white":"black",r.lineWidth=Math.abs(s));if(r.translate(.5*i,.5*o),r.scale(f,f),t.Path2D){var h=new Path2D(n);r.fill(h),s&&r.stroke(h)}else{var d=eL(n);KS(r,d),r.fill(),s&&r.stroke()}return r.setTransform(1,0,0,1,0,0),NS(r,{cutoff:null!=a.cutoff?a.cutoff:.5,radius:null!=a.radius?a.radius:.5*l})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var bL=D.defaultLine,_L=gm(bL),wL=1;function AL(t,e){var r=t;return r[3]*=e,r}function ML(t){if(a(t))return _L;var e=gm(t);return e.length?e:_L}function TL(t){return a(t)?t:wL}var kL=function(t,e,r){var n,a,i,o,l,s=t.color,u=Array.isArray(s),c=Array.isArray(e),f=[];if(n=void 0!==t.colorscale?br.makeColorScaleFunc(br.extractScale(t.colorscale,t.cmin,t.cmax)):ML,a=u?function(t,e){return void 0===t[e]?_L:gm(n(t[e]))}:ML,i=c?function(t,e){return void 0===t[e]?wL:TL(t[e])}:TL,u||c)for(var h=0;h<r;h++)o=a(s,h),l=i(e,h),f[h]=AL(o,l);else f=AL(gm(s),e);return f},EL=g.DESELECTDIM;function CL(t){var e,r,n=t._length||t._commonLength,a=t.marker,i={},o=Array.isArray(a.symbol),l=oe.isArrayOrTypedArray(a.color),s=oe.isArrayOrTypedArray(a.line.color),u=oe.isArrayOrTypedArray(a.opacity),c=oe.isArrayOrTypedArray(a.size),f=oe.isArrayOrTypedArray(a.line.width);if(o||(r=LS.OPEN_RE.test(a.symbol)),o||l||s||u){i.colors=new Array(n),i.borderColors=new Array(n);var h=kL(a,a.opacity,n),d=kL(a.line,a.opacity,n);if(!Array.isArray(d[0])){var p=d;for(d=Array(n),e=0;e<n;e++)d[e]=p}if(!Array.isArray(h[0])){var g=h;for(h=Array(n),e=0;e<n;e++)h[e]=g}for(i.colors=h,i.borderColors=d,e=0;e<n;e++){if(o){var v=a.symbol[e];r=LS.OPEN_RE.test(v)}r&&(d[e]=h[e].slice(),h[e]=h[e].slice(),h[e][3]=0)}i.opacity=t.opacity}else r?(i.color=gm(a.color,"uint8"),i.color[3]=0,i.borderColor=gm(a.color,"uint8")):(i.color=gm(a.color,"uint8"),i.borderColor=gm(a.line.color,"uint8")),i.opacity=t.opacity*a.opacity;if(o)for(i.markers=new Array(n),e=0;e<n;e++)i.markers[e]=BL(a.symbol[e]);else i.marker=BL(a.symbol);var m,y=Wr(t);if(c||f){var x,b=i.sizes=new Array(n),_=i.borderSizes=new Array(n),w=0;if(c){for(e=0;e<n;e++)b[e]=y(a.size[e]),w+=b[e];x=w/n}else for(m=y(a.size),e=0;e<n;e++)b[e]=m;if(f)for(e=0;e<n;e++)_[e]=y(a.line.width[e]);else for(m=y(a.line.width),e=0;e<n;e++)_[e]=m;i.sizeAvg=x}else i.size=y(a&&a.size||10),i.borderSizes=y(a.line.width);return i}function SL(t,e){var r=t.marker,n={};return e?(e.marker&&e.marker.symbol?n=CL(oe.extendFlat({},r,e.marker)):e.marker&&(e.marker.size&&(n.sizes=e.marker.size),e.marker.color&&(n.colors=e.marker.color),void 0!==e.marker.opacity&&(n.opacity=e.marker.opacity)),n):n}function LL(t,e){var r={capSize:2*e.width,lineWidth:e.thickness,color:e.color};return e.copy_ystyle&&(r=t.error_y),r}var OL=LS.SYMBOL_SDF_SIZE,DL=LS.SYMBOL_SIZE,RL=LS.SYMBOL_STROKE,PL={},IL=Jr.symbolFuncs[0](.05*DL);function BL(t){if("circle"===t)return null;var e,r,n=Jr.symbolNumber(t),a=Jr.symbolFuncs[n%100],i=!!Jr.symbolNoDot[n%100],o=!!Jr.symbolNoFill[n%100],l=LS.DOT_RE.test(t);return PL[t]?PL[t]:(e=l&&!i?a(1.1*DL)+IL:a(DL),r=xL(e,{w:OL,h:OL,viewBox:[-DL,-DL,DL,DL],stroke:o?RL:-RL}),PL[t]=r,r||null)}var FL=CL,zL=SL,NL=sM,jL=uM,UL=function(t,e){var r,n={marker:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,selected:void 0,unselected:void 0};if(!0!==e.visible)return n;if(Zr.hasMarkers(e)&&(n.marker=CL(e),n.selected=SL(e,e.selected),n.unselected=SL(e,e.unselected),!e.unselected&&Array.isArray(e.marker.opacity))){var a=e.marker.opacity;for(n.unselected.opacity=new Array(a.length),r=0;r<a.length;r++)n.unselected.opacity[r]=EL*a[r]}if(Zr.hasLines(e)){n.line={overlay:!0,thickness:e.line.width,color:e.line.color,opacity:e.opacity};var i=(LS.DASHES[e.line.dash]||[1]).slice();for(r=0;r<i.length;++r)i[r]*=e.line.width;n.line.dashes=i}return e.error_x&&e.error_x.visible&&(n.errorX=LL(e,e.error_x)),e.error_y&&e.error_y.visible&&(n.errorY=LL(e,e.error_y)),e.fill&&"none"!==e.fill&&(n.fill={closed:!0,fill:e.fillcolor,thickness:0}),n},VL=function(t,e,r){var n,a,i=r.length/2;if(Zr.hasLines(e)&&i)if("hv"===e.line.shape){for(n=[],a=0;a<i-1;a++)isNaN(r[2*a])||isNaN(r[2*a+1])?(n.push(NaN),n.push(NaN),n.push(NaN),n.push(NaN)):(n.push(r[2*a]),n.push(r[2*a+1]),n.push(r[2*a+2]),n.push(r[2*a+1]));n.push(r[r.length-2]),n.push(r[r.length-1])}else if("vh"===e.line.shape){for(n=[],a=0;a<i-1;a++)isNaN(r[2*a])||isNaN(r[2*a+1])?(n.push(NaN),n.push(NaN),n.push(NaN),n.push(NaN)):(n.push(r[2*a]),n.push(r[2*a+1]),n.push(r[2*a]),n.push(r[2*a+3]));n.push(r[r.length-2]),n.push(r[r.length-1])}else n=r;var o=!1;for(a=0;a<n.length;a++)if(isNaN(n[a])){o=!0;break}var l=o||n.length>LS.TOO_MANY_POINTS?"rect":Zr.hasMarkers(e)?"rect":"round";if(o&&e.connectgaps){var s=n[0],u=n[1];for(a=0;a<n.length;a+=2)isNaN(n[a])||isNaN(n[a+1])?(n[a]=s,n[a+1]=u):(s=n[a],u=n[a+1])}return{join:l,positions:n}},HL=function(t,e,r){var n=I.getComponentMethod("errorbars","calcFromTrace")(e,t._fullLayout),a=r.length/2,i={};function o(i){for(var o=new Float64Array(4*a),l=De.getFromId(t,e[i+"axis"]),s={x:0,y:1}[i],u={x:[0,1,2,3],y:[2,3,0,1]}[i],c=0,f=0;c<a;c++,f+=4)o[f+u[0]]=r[2*c+s]-l.d2l(n[c][i+"s"])||0,o[f+u[1]]=l.d2l(n[c][i+"h"])-r[2*c+s]||0,o[f+u[2]]=0,o[f+u[3]]=0;return o}return e.error_x&&e.error_x.visible&&(i.x={positions:r,errors:o("x")}),e.error_y&&e.error_y.visible&&(i.y={positions:r,errors:o("y")}),i},qL=i.BADNUM,GL=LS.TOO_MANY_POINTS;function XL(t,e,r,n){var a=UL(t,r);if(a.marker&&(a.marker.positions=n),a.line&&n.length>1&&oe.extendFlat(a.line,VL(t,r,n)),a.errorX||a.errorY){var i=HL(t,r,n);a.errorX&&oe.extendFlat(a.errorX,i.x),a.errorY&&oe.extendFlat(a.errorY,i.y)}return a}function YL(t,e){var r=e._scene,n=t._fullLayout,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],selectedOptions:[],unselectedOptions:[],errorXOptions:[],errorYOptions:[]};return e._scene||((r=e._scene=oe.extendFlat({},a,{selectBatch:null,unselectBatch:null,fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,select2d:null})).update=function(t){for(var e=new Array(r.count),n=0;n<r.count;n++)e[n]=t;r.fill2d&&r.fill2d.update(e),r.scatter2d&&r.scatter2d.update(e),r.line2d&&r.line2d.update(e),r.error2d&&r.error2d.update(e.concat(e)),r.select2d&&r.select2d.update(e),r.draw()},r.draw=function(){var t;for(t=0;t<r.count;t++)r.fill2d&&r.fillOptions[t]&&r.fill2d.draw(t);for(t=0;t<r.count;t++)r.line2d&&r.lineOptions[t]&&r.line2d.draw(t),r.error2d&&r.errorXOptions[t]&&r.error2d.draw(t),r.error2d&&r.errorYOptions[t]&&r.error2d.draw(t+r.count),!r.scatter2d||!r.markerOptions[t]||r.selectBatch&&r.selectBatch[t]||r.scatter2d.draw(t);r.scatter2d&&r.select2d&&r.selectBatch&&(r.select2d.draw(r.selectBatch),r.scatter2d.draw(r.unselectBatch)),r.dirty=!1},r.clear=function(){var t,a=n._size,i=n.width,o=n.height,l=e.xaxis,s=e.yaxis,u=[a.l+l.domain[0]*a.w,a.b+s.domain[0]*a.h,i-a.r-(1-l.domain[1])*a.w,o-a.t-(1-s.domain[1])*a.h];r.select2d&&((t=r.select2d.regl._gl).enable(t.SCISSOR_TEST),t.scissor(u[0],u[1],u[2]-u[0],u[3]-u[1]),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),r.scatter2d&&((t=r.scatter2d.regl._gl).enable(t.SCISSOR_TEST),t.scissor(u[0],u[1],u[2]-u[0],u[3]-u[1]),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT))},r.destroy=function(){r.fill2d&&r.fill2d.destroy(),r.scatter2d&&r.scatter2d.destroy(),r.error2d&&r.error2d.destroy(),r.line2d&&r.line2d.destroy(),r.select2d&&r.select2d.destroy(),r.lineOptions=null,r.fillOptions=null,r.markerOptions=null,r.selectedOptions=null,r.unselectedOptions=null,r.errorXOptions=null,r.errorYOptions=null,r.selectBatch=null,r.unselectBatch=null,e._scene=null}),r.dirty||oe.extendFlat(r,a),r}function WL(t,e,r,n){var a=t.xa,i=t.ya,o=t.distance,l=t.dxy,s=t.index,u={pointNumber:s,x:e[s],y:r[s]};u.tx=Array.isArray(n.text)?n.text[s]:n.text,u.htx=Array.isArray(n.hovertext)?n.hovertext[s]:n.hovertext,u.data=Array.isArray(n.customdata)?n.customdata[s]:n.customdata,u.tp=Array.isArray(n.textposition)?n.textposition[s]:n.textposition;var c=n.textfont;c&&(u.ts=Array.isArray(c.size)?c.size[s]:c.size,u.tc=Array.isArray(c.color)?c.color[s]:c.color,u.tf=Array.isArray(c.family)?c.family[s]:c.family);var f=n.marker;f&&(u.ms=oe.isArrayOrTypedArray(f.size)?f.size[s]:f.size,u.mo=oe.isArrayOrTypedArray(f.opacity)?f.opacity[s]:f.opacity,u.mx=Array.isArray(f.symbol)?f.symbol[s]:f.symbol,u.mc=oe.isArrayOrTypedArray(f.color)?f.color[s]:f.color);var h=f&&f.line;h&&(u.mlc=Array.isArray(h.color)?h.color[s]:h.color,u.mlw=oe.isArrayOrTypedArray(h.width)?h.width[s]:h.width);var d=f&&f.gradient;d&&"none"!==d.type&&(u.mgt=Array.isArray(d.type)?d.type[s]:d.type,u.mgc=Array.isArray(d.color)?d.color[s]:d.color);var p=a.c2p(u.x,!0),g=i.c2p(u.y,!0),v=u.mrc||1,m=n.hoverlabel;m&&(u.hbg=Array.isArray(m.bgcolor)?m.bgcolor[s]:m.bgcolor,u.hbc=Array.isArray(m.bordercolor)?m.bordercolor[s]:m.bordercolor,u.hts=Array.isArray(m.font.size)?m.font.size[s]:m.font.size,u.htc=Array.isArray(m.font.color)?m.font.color[s]:m.font.color,u.htf=Array.isArray(m.font.family)?m.font.family[s]:m.font.family,u.hnl=Array.isArray(m.namelength)?m.namelength[s]:m.namelength);var y=n.hoverinfo;y&&(u.hi=Array.isArray(y)?y[s]:y);var x={};return x[t.index]=u,oe.extendFlat(t,{color:_M(n,u),x0:p-v,x1:p+v,xLabelVal:u.x,y0:g-v,y1:g+v,yLabelVal:u.y,cd:x,distance:o,spikeDistance:l}),u.htx?t.text=u.htx:u.tx?t.text=u.tx:n.text&&(t.text=n.text),xM(u,n,t),I.getComponentMethod("errorbars","hoverInfo")(u,n,t),t}var ZL={moduleType:"trace",name:"scattergl",basePlotModule:tl,categories:["gl","regl","cartesian","symbols","errorBarsOK","markerColorscale","showLegend","scatter-like"],attributes:OS,supplyDefaults:function(t,e,r,n){function a(r,n){return oe.coerce(t,e,OS,r,n)}var i=!!t.marker&&/-open/.test(t.marker.symbol),o=Zr.isBubble(t),l=yM(t,e,n,a);if(l){a("text"),a("mode",l<En.PTS_LINESONLY?"lines+markers":"lines"),Zr.hasLines(e)&&(a("connectgaps"),gM(t,e,r,n,a));var s=[];Zr.hasMarkers(e)&&(mM(t,e,r,n,a),a("marker.line.width",i||o?1:0),s.push("points")),a("fill"),"none"!==e.fill&&dM(0,e,r,a),"tonext"!==e.fill&&"toself"!==e.fill||s.push("fills"),a("hoveron",s.join("+")||"points");var u=I.getComponentMethod("errorbars","supplyDefaults");u(t,e,r,{axis:"y"}),u(t,e,r,{axis:"x",inherit:"y"}),oe.coerceSelectionMarkerOpacity(e,a)}else e.visible=!1},cleanData:cM,colorbar:fM,calc:function(t,e){var r,n,a,i=t._fullLayout,o=De.getFromId(t,e.xaxis),l=De.getFromId(t,e.yaxis),s=i._plots[e.xaxis+e.yaxis],u=e._length,c=2*u,f={},h=o.makeCalcdata(e,"x"),d=l.makeCalcdata(e,"y"),p=new Array(c);for(r=0;r<u;r++)n=h[r],a=d[r],p[2*r]=n===qL?NaN:n,p[2*r+1]=a===qL?NaN:a;if("log"===o.type)for(r=0;r<c;r+=2)p[r]=o.c2l(p[r]);if("log"===l.type)for(r=1;r<c;r+=2)p[r]=l.c2l(p[r]);if("log"!==o.type&&"log"!==l.type)f.tree=Vk(p);else{var g=f.ids=new Array(u);for(r=0;r<u;r++)g[r]=r}rM(e);var v,m=XL(t,0,e,p),y=YL(t,s);return u<GL?v=NL(e,u):m.marker&&(v=2*(m.marker.sizeAvg||Math.max(m.marker.size,3))),jL(t,e,o,l,h,d,v),m.fill&&!y.fill2d&&(y.fill2d=!0),m.marker&&!y.scatter2d&&(y.scatter2d=!0),m.line&&!y.line2d&&(y.line2d=!0),!m.errorX&&!m.errorY||y.error2d||(y.error2d=!0),m.marker&&u>=GL&&(m.marker.cluster=f.tree),y.lineOptions.push(m.line),y.errorXOptions.push(m.errorX),y.errorYOptions.push(m.errorY),y.fillOptions.push(m.fill),y.markerOptions.push(m.marker),y.selectedOptions.push(m.selected),y.unselectedOptions.push(m.unselected),y.count++,f._scene=y,f.index=y.count-1,f.x=h,f.y=d,f.positions=p,f.count=u,t.firstscatter=!1,[{x:!1,y:!1,t:f,trace:e}]},plot:function(t,e,r){if(r.length){var n=t._fullLayout,a=r[0][0].t._scene,i=n.dragmode;if(a){var o=n._size,l=n.width,s=n.height;aT(t,["ANGLE_instanced_arrays","OES_element_index_uint"]);var u=n._glcanvas.data()[0].regl;if(kM(t,e,r),a.dirty){if(!0===a.error2d&&(a.error2d=$k(u)),!0===a.line2d&&(a.line2d=bS(u)),!0===a.scatter2d&&(a.scatter2d=SS(u)),!0===a.fill2d&&(a.fill2d=bS(u)),a.line2d&&a.line2d.update(a.lineOptions),a.error2d){var c=(a.errorXOptions||[]).concat(a.errorYOptions||[]);a.error2d.update(c)}a.scatter2d&&a.scatter2d.update(a.markerOptions),a.fill2d&&(a.fillOptions=a.fillOptions.map(function(t,e){var n=r[e];if(!(t&&n&&n[0]&&n[0].trace))return null;var i,o,l=n[0],s=l.trace,u=l.t,c=a.lineOptions[e],f=[],h=c&&c.positions||u.positions;if("tozeroy"===s.fill)(f=(f=[h[0],0]).concat(h)).push(h[h.length-2]),f.push(0);else if("tozerox"===s.fill)(f=(f=[0,h[1]]).concat(h)).push(0),f.push(h[h.length-1]);else if("toself"===s.fill||"tonext"===s.fill){for(f=[],i=0,o=0;o<h.length;o+=2)(isNaN(h[o])||isNaN(h[o+1]))&&((f=f.concat(h.slice(i,o))).push(h[i],h[i+1]),i=o+2);f=f.concat(h.slice(i)),i&&f.push(h[i],h[i+1])}else{var d=s._nexttrace;if(d){var p=a.lineOptions[e+1];if(p){var g=p.positions;if("tonexty"===s.fill){for(f=h.slice(),e=Math.floor(g.length/2);e--;){var v=g[2*e],m=g[2*e+1];isNaN(v)||isNaN(m)||(f.push(v),f.push(m))}t.fill=d.fillcolor}}}}if(s._prevtrace&&"tonext"===s._prevtrace.fill){var y=a.lineOptions[e-1].positions,x=f.length/2,b=[i=x];for(o=0;o<y.length;o+=2)(isNaN(y[o])||isNaN(y[o+1]))&&(b.push(o/2+x+1),i=o+2);f=f.concat(y),t.hole=b}return t.opacity=s.opacity,t.positions=f,t}),a.fill2d.update(a.fillOptions))}var f="lasso"===i||"select"===i;a.selectBatch=null,a.unselectBatch=null;var h=r.map(function(r){if(r&&r[0]&&r[0].trace){var n,i=r[0],u=i.trace,c=i.t,h=c.index,d=c.x,p=c.y,g=e.xaxis||De.getFromId(t,u.xaxis||"x"),v=e.yaxis||De.getFromId(t,u.yaxis||"y"),m=[(g._rl||g.range)[0],(v._rl||v.range)[0],(g._rl||g.range)[1],(v._rl||v.range)[1]],y=[o.l+g.domain[0]*o.w,o.b+v.domain[0]*o.h,l-o.r-(1-g.domain[1])*o.w,s-o.t-(1-v.domain[1])*o.h];if(u.selectedpoints||f){if(f||(f=!0),a.selectBatch||(a.selectBatch=[],a.unselectBatch=[]),u.selectedpoints){a.selectBatch[h]=u.selectedpoints;var x=u.selectedpoints,b={};for(n=0;n<x.length;n++)b[x[n]]=!0;var _=[];for(n=0;n<c.count;n++)b[n]||_.push(n);a.unselectBatch[h]=_}var w=new Array(c.count),A=new Array(c.count);for(n=0;n<c.count;n++)w[n]=g.c2p(d[n]),A[n]=v.c2p(p[n]);c.xpx=w,c.ypx=A}else c.xpx=c.ypx=null;return u.visible?{viewport:y,range:m}:null}});f&&(a.select2d||(a.select2d=SS(n._glcanvas.data()[1].regl)),a.scatter2d&&a.selectBatch&&a.selectBatch.length&&a.scatter2d.update(a.unselectedOptions.map(function(t,e){return a.selectBatch[e]?t:null})),a.select2d&&(a.select2d.update(a.markerOptions),a.select2d.update(a.selectedOptions))),a.fill2d&&a.fill2d.update(h),a.line2d&&a.line2d.update(h),a.error2d&&a.error2d.update(h.concat(h)),a.scatter2d&&a.scatter2d.update(h),a.select2d&&a.select2d.update(h),a.draw()}}},hoverPoints:function(t,e,r,n){var a,i,o,l,s,u,c,f,h,d=t.cd,p=d[0].t,g=d[0].trace,v=t.xa,m=t.ya,y=p.x,x=p.y,b=v.c2p(e),_=m.c2p(r),w=t.distance;if(p.tree){var A=v.p2c(b-w),M=v.p2c(b+w),T=m.p2c(_-w),k=m.p2c(_+w);a="x"===n?p.tree.range(Math.min(A,M),Math.min(m._rl[0],m._rl[1]),Math.max(A,M),Math.max(m._rl[0],m._rl[1])):p.tree.range(Math.min(A,M),Math.min(T,k),Math.max(A,M),Math.max(T,k))}else{if(!p.ids)return[t];a=p.ids}var E=w;if("x"===n)for(s=0;s<a.length;s++)o=y[a[s]],(u=Math.abs(v.c2p(o)-b))<E&&(E=u,c=m.c2p(x[a[s]])-_,h=Math.sqrt(u*u+c*c),i=a[s]);else for(s=0;s<a.length;s++)o=y[a[s]],l=x[a[s]],u=v.c2p(o)-b,c=m.c2p(l)-_,(f=Math.sqrt(u*u+c*c))<E&&(E=h=f,i=a[s]);return t.index=i,t.distance=E,t.dxy=h,void 0===i?[t]:(WL(t,y,x,g),[t])},style:function(t,e){if(e){var r=e[0][0].t._scene;t._fullLayout._has("splom")||r.clear(),r.draw()}},selectPoints:function(t,e){var r=t.cd,n=[],a=r[0].trace,i=r[0].t,o=i.x,l=i.y,s=i._scene;if(!s)return n;var u=!Zr.hasMarkers(a)&&!Zr.hasText(a);if(!0!==a.visible||u)return n;var c,f=null,h=null;if(!1===e||e.degenerate)h=Sk(i.count);else for(f=[],h=[],c=0;c<i.count;c++)e.contains([i.xpx[c],i.ypx[c]])?(f.push(c),n.push({pointNumber:c,x:o[c],y:l[c]})):h.push(c);if(s.selectBatch||(s.selectBatch=[],s.unselectBatch=[]),!s.selectBatch[i.index]){for(c=0;c<s.count;c++)s.selectBatch[c]=[],s.unselectBatch[c]=[];s.scatter2d.update(s.unselectedOptions)}return s.selectBatch[i.index]=f,s.unselectBatch[i.index]=h,n},sceneOptions:XL,sceneUpdate:YL,calcHover:WL,meta:{}},JL=ZL,QL={};(function(t){(function(){var e,r,n,a,i,o;"undefined"!=typeof performance&&null!==performance&&performance.now?QL=function(){return performance.now()}:void 0!==t&&null!==t&&t.hrtime?(QL=function(){return(e()-i)/1e6},r=t.hrtime,a=(e=function(){var t;return 1e9*(t=r())[0]+t[1]})(),o=1e9*t.uptime(),i=a-o):Date.now?(QL=function(){return Date.now()-n},n=Date.now()):(QL=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(this)}).call(this,_c);var $L={};(function(t){for(var e="undefined"==typeof window?t:window,r=["moz","webkit"],n="AnimationFrame",a=e["request"+n],i=e["cancel"+n]||e["cancelRequest"+n],o=0;!a&&o<r.length;o++)a=e[r[o]+"Request"+n],i=e[r[o]+"Cancel"+n]||e[r[o]+"CancelRequest"+n];if(!a||!i){var l=0,s=0,u=[];a=function(t){if(0===u.length){var e=QL(),r=Math.max(0,1e3/60-(e-l));l=r+e,setTimeout(function(){var t=u.slice(0);u.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(l)}catch(t){setTimeout(function(){throw t},0)}},Math.round(r))}return u.push({handle:++s,callback:t,cancelled:!1}),s},i=function(t){for(var e=0;e<u.length;e++)u[e].handle===t&&(u[e].cancelled=!0)}}($L=function(t){return a.call(e,t)}).cancel=function(){i.apply(e,arguments)},$L.polyfill=function(t){t||(t=e),t.requestAnimationFrame=a,t.cancelAnimationFrame=i}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var KL=tO;function tO(t,e){if(!(this instanceof tO))return new tO(t,e);this.traces=[],this.passes={},this.regl=t,this.scatter=ES(t),this.canvas=this.scatter.canvas}function eO(t,e,r){return(null!=t.id?t.id:t)<<16|(255&e)<<8|255&r}function rO(t,e,r){var n,a,i,o,l=t[e],s=t[r];return l.length>2?(l[0],l[2],n=l[1],a=l[3]):l.length?(n=l[0],a=l[1]):(l.x,n=l.y,l.x+l.width,a=l.y+l.height),s.length>2?(i=s[0],o=s[2],s[1],s[3]):s.length?(i=s[0],o=s[1]):(i=s.x,s.y,o=s.x+s.width,s.y+s.height),[i,n,o,a]}function nO(t){if("number"==typeof t)return[t,t,t,t];if(2===t.length)return[t[0],t[1],t[0],t[1]];var e=Fk(t);return[e.x,e.y,e.x+e.width,e.y+e.height]}tO.prototype.render=function(){for(var t,e=this,r=[],n=arguments.length;n--;)r[n]=arguments[n];return r.length&&(t=this).update.apply(t,r),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=$L(function(){e.draw(),e.dirty=!0,e.planned=null})):(this.draw(),this.dirty=!0,$L(function(){e.dirty=!1})),this)},tO.prototype.update=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(t.length){for(var r=0;r<t.length;r++)this.updateItem(r,t[r]);this.traces=this.traces.filter(Boolean);for(var n,a=[],i=0,o=0;o<this.traces.length;o++){for(var l=this.traces[o],s=this.traces[o].passes,u=0;u<s.length;u++)a.push(this.passes[s[u]]);l.passOffset=i,i+=l.passes.length}return(n=this.scatter).update.apply(n,a),this}},tO.prototype.updateItem=function(t,e){var r=this.regl;if(null===e)return this.traces[t]=null,this;if(!e)return this;var n,a=Pk(e,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),i=this.traces[t]||(this.traces[t]={id:t,buffer:r.buffer({usage:"dynamic",type:"float",data:null}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:Fk([r._gl.drawingBufferWidth,r._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=a.color&&(i.color=a.color),null!=a.size&&(i.size=a.size),null!=a.marker&&(i.marker=a.marker),null!=a.borderColor&&(i.borderColor=a.borderColor),null!=a.borderSize&&(i.borderSize=a.borderSize),null!=a.opacity&&(i.opacity=a.opacity),a.viewport&&(i.viewport=Fk(a.viewport)),null!=a.diagonal&&(i.diagonal=a.diagonal),null!=a.upper&&(i.upper=a.upper),null!=a.lower&&(i.lower=a.lower),a.data){i.buffer(Ok(a.data)),i.columns=a.data.length,i.count=a.data[0].length,i.bounds=[];for(var o=0;o<i.columns;o++)i.bounds[o]=Lk(a.data[o],1)}a.range&&(i.range=a.range,n=i.range&&"number"!=typeof i.range[0]),a.domain&&(i.domain=a.domain);var l=!1;null!=a.padding&&(Array.isArray(a.padding)&&a.padding.length===i.columns&&"number"==typeof a.padding[a.padding.length-1]?(i.padding=a.padding.map(nO),l=!0):i.padding=nO(a.padding));var s=i.columns,u=i.count,c=i.viewport.width,f=i.viewport.height,h=i.viewport.x,d=i.viewport.y,p=c/s,g=f/s;i.passes=[];for(var v=0;v<s;v++)for(var m=0;m<s;m++)if((i.diagonal||m!==v)&&(i.upper||!(v>m))&&(i.lower||!(v<m))){var y=eO(i.id,v,m),x=this.passes[y]||(this.passes[y]={});if(a.data&&(a.transpose?x.positions={x:{buffer:i.buffer,offset:m,count:u,stride:s},y:{buffer:i.buffer,offset:v,count:u,stride:s}}:x.positions={x:{buffer:i.buffer,offset:m*u,count:u},y:{buffer:i.buffer,offset:v*u,count:u}},x.bounds=rO(i.bounds,v,m)),a.domain||a.viewport||a.data){var b=l?rO(i.padding,v,m):i.padding;if(i.domain){var _=rO(i.domain,v,m),w=_[0],A=_[1],M=_[2],T=_[3];x.viewport=[h+w*c+b[0],d+A*f+b[1],h+M*c-b[2],d+T*f-b[3]]}else x.viewport=[h+m*p+p*b[0],d+v*g+g*b[1],h+(m+1)*p-p*b[2],d+(v+1)*g-g*b[3]]}a.color&&(x.color=i.color),a.size&&(x.size=i.size),a.marker&&(x.marker=i.marker),a.borderSize&&(x.borderSize=i.borderSize),a.borderColor&&(x.borderColor=i.borderColor),a.opacity&&(x.opacity=i.opacity),a.range&&(x.range=n?rO(i.range,v,m):i.range||x.bounds),i.passes.push(y)}return this},tO.prototype.draw=function(){for(var t,e=[],r=arguments.length;r--;)e[r]=arguments[r];if(e.length){for(var n=[],a=0;a<e.length;a++)if("number"==typeof e[a]){var i=this.traces[e[a]],o=i.passes,l=i.passOffset;n.push.apply(n,Sk(l,l+o.length))}else if(e[a].length){var s=e[a],u=this.traces[a],c=u.passes,f=u.passOffset;c=c.map(function(t,e){n[f+e]=s})}(t=this.scatter).draw.apply(t,n)}else this.scatter.draw();return this},tO.prototype.destroy=function(){return this.traces.forEach(function(t){t.buffer&&t.buffer.destroy&&t.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};var aO=Oe.idRegex;function iO(t){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:aO[t],editType:"plot"}}}var oO={dimensions:{_isLinkedToArray:"dimension",visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"},text:OS.text,marker:OS.marker,xaxes:iO("x"),yaxes:iO("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:OS.selected.marker,editType:"calc"},unselected:{marker:OS.unselected.marker,editType:"calc"},opacity:OS.opacity},lO=$o.getModuleCalcData,sO="splom";function uO(t,e,r){for(var n=e.dimensions,a=r.matrixOptions.data.length,i=new Array(a),o=0,l=0;o<n.length;o++)if(n[o].visible){var s=i[l]=new Array(4),u=De.getFromId(t,e._diag[o][0]);u&&(s[0]=u.r2l(u.range[0]),s[2]=u.r2l(u.range[1]));var c=De.getFromId(t,e._diag[o][1]);c&&(s[1]=c.r2l(c.range[0]),s[3]=c.r2l(c.range[1])),l++}r.selectBatch?(r.matrix.update({ranges:i},{ranges:i}),r.matrix.draw(r.unselectBatch,r.selectBatch)):(r.matrix.update({ranges:i}),r.matrix.draw())}function cO(t){var e=t._fullLayout,r=e._glcanvas.data()[0].regl,n=e._splomGrid;n||(n=e._splomGrid=bS(r)),n.update(function(t){var e,r=t._fullLayout,n=r._size,a=[0,0,r.width,r.height],i={};function o(t,e,r,n,o,l){var s=e[t+"color"],u=e[t+"width"],c=String(s+u);c in i?i[c].data.push(NaN,NaN,r,n,o,l):i[c]={data:[r,n,o,l],join:"rect",thickness:u,color:s,viewport:a,range:a,overlay:!1}}for(e in r._splomSubplots){var l,s,u=r._plots[e],c=u.xaxis,f=u.yaxis,h=c._vals,d=f._vals,p=n.b+f.domain[0]*n.h,g=-f._m,v=-g*f.r2l(f.range[0],f.calendar);if(c.showgrid)for(e=0;e<h.length;e++)l=c._offset+c.l2p(h[e].x),o("grid",c,l,p,l,p+f._length);if(fO(c)&&(l=c._offset+c.l2p(0),o("zeroline",c,l,p,l,p+f._length)),f.showgrid)for(e=0;e<d.length;e++)s=p+v+g*d[e].x,o("grid",f,c._offset,s,c._offset+c._length,s);fO(f)&&(s=p+v+0,o("zeroline",f,c._offset,s,c._offset+c._length,s))}var m=[];for(e in i)m.push(i[e]);return m}(t)),n.draw()}function fO(t){var e=oe.simpleMap(t.range,t.r2l),r=t.l2p(0);return t.zeroline&&t._vals&&t._vals.length&&e[0]*e[1]<=0&&("linear"===t.type||"-"===t.type)&&(r>1&&r<t._length-1||!t.showline)}var hO={name:sO,attr:tl.attr,attrRegex:tl.attrRegex,layoutAttributes:tl.layoutAttributes,supplyLayoutDefaults:tl.supplyLayoutDefaults,drawFramework:tl.drawFramework,plot:function(t){var e=t._fullLayout,r=I.getModule(sO),n=lO(t.calcdata,r)[0];aT(t,["ANGLE_instanced_arrays","OES_element_index_uint"]),e._hasOnlyLargeSploms&&cO(t),r.plot(t,{},n)},drag:function(t){var e=t.calcdata;t._fullLayout._hasOnlyLargeSploms&&cO(t);for(var r=0;r<e.length;r++){var n=e[r][0],a=n.trace,i=n.t._scene;"splom"===a.type&&i&&i.matrix&&uO(t,a,i)}},clean:function(t,e,r,n,a){var i,o,l,s=n._modules||[],u=e._modules||[];for(l=0;l<s.length;l++)if("splom"===s[l].name){i=!0;break}for(l=0;l<u.length;l++)if("splom"===u[l].name){o=!0;break}if(i&&!o)for(l=0;l<a.length;l++){var c=a[l][0],f=c.trace,h=c.t._scene;"splom"===f.type&&h&&h.matrix&&(h.matrix.destroy(),c.t._scene=null)}n._splomGrid&&!e._hasOnlyLargeSploms&&n._hasOnlyLargeSploms&&(n._splomGrid.destroy(),n._splomGrid=null),tl.clean(t,e,r,n)},updateFx:tl.updateFx,toSVG:tl.toSVG},dO=/-open/;function pO(t,e){for(var r=new Array(e),n=0;n<e;n++)r[n]=t+(n?n+1:"");return r}function gO(t,e,r){if(e){var n=e.charAt(0),a=t._splomAxes[n];e in a||(a[e]=(r||{}).label||"")}}function vO(t){for(var e={},r=0;r<t.length;r++)e[t[r]]=1;return e}var mO=sM,yO=uM,xO=zL,bO=FL,_O=ZL.calcHover,wO=i.BADNUM,AO=LS.TOO_MANY_POINTS;function MO(t,e,r){for(var n=t.makeCalcdata({v:r.values,vcalendar:e.calendar},"v"),a=0;a<n.length;a++)n[a]=n[a]===wO?NaN:n[a];return n}function TO(t,e){var r,n,a,i,o,l=t._fullLayout,s=l._size,u=e.trace,c=e.t,f=c._scene,h=f.matrixOptions,d=h.cdata,p=l._glcanvas.data()[0].regl,g=l.dragmode;if(0!==d.length){h.lower=u.showupperhalf,h.upper=u.showlowerhalf,h.diagonal=u.diagonal.visible;var v=u.dimensions,m=d.length,y={};for(y.ranges=new Array(m),y.domains=new Array(m),a=0,o=0;a<v.length;a++)if(u.dimensions[a].visible){var x=y.ranges[o]=new Array(4),b=y.domains[o]=new Array(4);(r=De.getFromId(t,u._diag[a][0]))&&(x[0]=r._rl[0],x[2]=r._rl[1],b[0]=r.domain[0],b[2]=r.domain[1]),(n=De.getFromId(t,u._diag[a][1]))&&(x[1]=n._rl[0],x[3]=n._rl[1],b[1]=n.domain[0],b[3]=n.domain[1]),o++}y.viewport=[s.l,s.b,s.w+s.l,s.h+s.b],!0===f.matrix&&(f.matrix=KL(p));var _="lasso"===g||"select"===g||!!u.selectedpoints;if(f.selectBatch=null,f.unselectBatch=null,_){var w=u._commonLength;if(f.selectBatch||(f.selectBatch=[],f.unselectBatch=[]),u.selectedpoints){f.selectBatch=u.selectedpoints;var A=u.selectedpoints,M={};for(a=0;a<A.length;a++)M[A[a]]=!0;var T=[];for(a=0;a<w;a++)M[a]||T.push(a);f.unselectBatch=T}var k=c.xpx=new Array(m),E=c.ypx=new Array(m);for(a=0,o=0;a<v.length;a++)if(u.dimensions[a].visible){if(r=De.getFromId(t,u._diag[a][0]))for(k[o]=new Array(w),i=0;i<w;i++)k[o][i]=r.c2p(d[o][i]);if(n=De.getFromId(t,u._diag[a][1]))for(E[o]=new Array(w),i=0;i<w;i++)E[o][i]=n.c2p(d[o][i]);o++}f.selectBatch?(f.matrix.update(h,h),f.matrix.update(f.unselectedOptions,f.selectedOptions),f.matrix.update(y,y)):f.matrix.update(y,null)}else f.matrix.update(h),f.matrix.update(y),c.xpx=c.ypx=null;f.draw()}}function kO(t,e){for(var r=e._id,n={x:0,y:1}[r.charAt(0)],a=t.dimensions,i=0,o=0;i<a.length;i++)if(a[i].visible){if(t._diag[i][n]===r)return o;o++}return!1}var EO={moduleType:"trace",name:"splom",basePlotModule:hO,categories:["gl","regl","cartesian","symbols","markerColorscale","showLegend","scatter-like"],attributes:oO,supplyDefaults:function(t,e,r,n){function a(r,n){return oe.coerce(t,e,oO,r,n)}var i=function(t,e){var r=t.dimensions;if(!Array.isArray(r))return 0;var n,a,i,o=r.length,l=0,s=e.dimensions=new Array(o);function u(t,e){return oe.coerce(n,a,oO.dimensions,t,e)}for(i=0;i<o;i++){n=r[i],a=s[i]={},u("label");var c=u("visible");if(c){var f=u("values");f&&f.length?(l=Math.max(l,f.length),a._index=i):a.visible=!1}}for(i=0;i<o;i++)(a=s[i]).visible&&(a._length=l);return e._commonLength=l,s.length}(t,e),o=a("diagonal.visible"),l=a("showupperhalf"),s=a("showlowerhalf");if(i&&(o||l||s)){a("text"),mM(t,e,r,n,a);var u=dO.test(e.marker.symbol),c=Zr.isBubble(e);a("marker.line.width",u||c?1:0),function(t,e,r,n){var a,i,o=e.dimensions,l=o.length,s=e.showupperhalf,u=e.showlowerhalf,c=e.diagonal.visible,f=c||s&&u?l:l-1,h=n("xaxes",pO("x",f)),d=n("yaxes",pO("y",f));e._xaxes=vO(h),e._yaxes=vO(d);var p=Math.min(f,h.length,d.length);for(a=0;a<p;a++)for(i=0;i<p;i++){var g=[h[a]+d[i]];a>i&&s?r._splomSubplots[g]=1:a<i&&u?r._splomSubplots[g]=1:a!==i||!c&&u&&s||(r._splomSubplots[g]=1)}var v=e._diag=new Array(l),m=c||u?0:-1,y=c||s?0:-1;for(a=0;a<l;a++){var x=o[a],b=h[a+m],_=d[a+y];gO(r,b,x),gO(r,_,x),v[a]=[b,_]}}(0,e,n,a),oe.coerceSelectionMarkerOpacity(e,a)}else e.visible=!1},calc:function(t,e){var r,n,a,i=e.dimensions,o=e._commonLength,l={},s={},u=s.cdata=[],c=s.data=[];for(r=0;r<i.length;r++)if((a=i[r]).visible){var f=e._diag[r][0]||e._diag[r][1],h=De.getFromId(t,f);if(h){var d=MO(h,e,a),p="log"===h.type?oe.simpleMap(d,h.c2l):d;u.push(d),c.push(p)}}rM(e),oe.extendFlat(s,bO(e));var g=u.length*o>AO;for(r=0,n=0;r<i.length;r++)if((a=i[r]).visible){var v,m=De.getFromId(t,e._diag[r][0])||{},y=De.getFromId(t,e._diag[r][1])||{};v=g?2*(s.sizeAvg||Math.max(s.size,3)):mO(e,o),yO(t,e,m,y,u[n],u[n],v),n++}var x=l._scene=function(t,e){var r=e._scene,n={dirty:!0};return r||((r=e._scene=oe.extendFlat({},n,{selectBatch:null,unselectBatch:null,matrix:!1,select:null})).draw=function(){r.matrix&&r.selectBatch?r.matrix.draw(r.unselectBatch,r.selectBatch):r.matrix&&r.matrix.draw(),r.dirty=!1},r.destroy=function(){r.matrix&&r.matrix.destroy(),r.matrixOptions=null,r.selectBatch=null,r.unselectBatch=null,e._scene=null}),r.dirty||oe.extendFlat(r,n),r}(0,l);return x.matrix||(x.matrix=!0),x.matrixOptions=s,x.selectedOptions=xO(e,e.selected),x.unselectedOptions=xO(e,e.unselected),[{x:!1,y:!1,t:l,trace:e}]},plot:function(t,e,r){if(r.length)for(var n=0;n<r.length;n++)TO(t,r[n][0])},hoverPoints:function(t,e,r){var n=t.cd,a=n[0].trace,i=n[0].t._scene.matrixOptions.cdata,o=t.xa,l=t.ya,s=o.c2p(e),u=l.c2p(r),c=t.distance,f=kO(a,o),h=kO(a,l);if(!1===f||!1===h)return[t];for(var d,p,g=i[f],v=i[h],m=c,y=0;y<g.length;y++){var x=g[y],b=v[y],_=o.c2p(x)-s,w=l.c2p(b)-u,A=Math.sqrt(_*_+w*w);A<m&&(m=p=A,d=y)}return t.index=d,t.distance=m,t.dxy=p,void 0===d?[t]:(_O(t,g,v,a),[t])},selectPoints:function(t,e){var r,n=t.cd,a=n[0].trace,i=n[0].t,o=i._scene,l=o.matrixOptions.cdata,s=t.xaxis,u=t.yaxis,c=[];if(!o)return c;var f=!Zr.hasMarkers(a)&&!Zr.hasText(a);if(!0!==a.visible||f)return c;var h=kO(a,s),d=kO(a,u);if(!1===h||!1===d)return c;var p=i.xpx[h],g=i.ypx[d],v=l[h],m=l[d],y=null,x=null;if(!1===e||e.degenerate)x=Sk(i.count);else for(y=[],x=[],r=0;r<v.length;r++)e.contains([p[r],g[r]])?(y.push(r),c.push({pointNumber:r,x:v[r],y:m[r]})):x.push(r);if(o.selectBatch||(o.selectBatch=[],o.unselectBatch=[]),!o.selectBatch){for(r=0;r<o.count;r++)o.selectBatch=[],o.unselectBatch=[];o.matrix.update(o.unselectedOptions,o.selectedOptions)}return o.selectBatch=y,o.unselectBatch=x,c},style:function(t,e){if(e){var r=t._fullLayout;e[0][0].t._scene.matrix.regl.clear({color:!0,depth:!0}),r._splomGrid&&r._splomGrid.draw();for(var n=0;n<e.length;n++)e[n][0].t._scene.draw();if(r._has("cartesian"))for(var a in r._plots){var i=r._plots[a];i._scene&&i._scene.draw()}}},meta:{}};I.register(ob);var CO=EO;return zM.register([JL,CO,Ck,$M,hx,mk]),zM});