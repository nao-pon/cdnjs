!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).quixote=t()}}(function(){return function t(e,n,r){function i(s,u){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n||t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(l===setTimeout)return setTimeout(t,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function s(){m&&h&&(m=!1,h.length?d=h.concat(d):v=-1,d.length&&u())}function u(){if(!m){var t=o(s);m=!0;for(var e=d.length;e;){for(h=d,d=[];++v<e;)h&&h[v].run();v=-1,e=d.length}h=null,m=!1,function(t){if(f===clearTimeout)return clearTimeout(t);if((f===i||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}(t)}}function a(t,e){this.fun=t,this.array=e}function c(){}var l,f,p=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(t){l=r}try{f="function"==typeof clearTimeout?clearTimeout:i}catch(t){f=i}}();var h,d=[],m=!1,v=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new a(t,e)),1!==d.length||m||o(u)},a.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],2:[function(t,e,n){"use strict";var r=t("./util/ensure.js"),i=t("./util/oop.js"),o=t("./util/shim.js"),s=e.exports=function(){r.unreachable("Assertable is abstract and should not be constructed directly.")};s.extend=i.extendFn(s),i.makeAbstract(s,[]),s.prototype.assert=function(t,e){r.signature(arguments,[Object,[void 0,String]]),void 0===e&&(e="Differences found");var n=this.diff(t);if(""!==n)throw new Error(e+":\n"+n+"\n")},s.prototype.diff=function(t){r.signature(arguments,[Object]);for(var e,n,i,s=[],u=o.Object.keys(t),a=0;a<u.length;a++)i=this[e=u[a]],r.that(void 0!==i,this+" doesn't have a property named '"+e+"'. Did you misspell it?"),""!==(n=i.diff(t[e]))&&s.push(n);return s.join("\n")}},{"./util/ensure.js":23,"./util/oop.js":24,"./util/shim.js":25}],3:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("./position_descriptor.js"),o=t("../values/position.js"),s=e.exports=function(t,e){switch(r.signature(arguments,[String,Number]),t){case"x":i.x(this),this._value=o.x(e);break;case"y":i.y(this),this._value=o.y(e);break;default:r.unreachable("Unknown dimension: "+t)}this._dimension=t};i.extend(s),s.x=function(t){return r.signature(arguments,[Number]),new s("x",t)},s.y=function(t){return r.signature(arguments,[Number]),new s("y",t)},s.prototype.value=function(){return this._value},s.prototype.toString=function(){return this._value+" "+this._dimension+"-coordinate"}},{"../util/ensure.js":23,"../values/position.js":27,"./position_descriptor.js":11}],4:[function(t,e,n){"use strict";function r(t){return function(e,n,r){return new s(t,e,n,r)}}var i=t("../util/ensure.js"),o=t("./position_descriptor.js"),s=(t("../values/position.js"),t("./relative_position.js"),e.exports=function(t,e,n,r){i.signature(arguments,[String,o,o,String]),"x"===t?o.x(this):"y"===t?o.y(this):i.unreachable("Unknown dimension: "+t),this._dimension=t,this._position1=e,this._position2=n,this._description=r});o.extend(s),s.x=r("x"),s.y=r("y"),s.prototype.value=function(){return i.signature(arguments,[]),this._position1.value().midpoint(this._position2.value())},s.prototype.toString=function(){return i.signature(arguments,[]),this._description}},{"../util/ensure.js":23,"../values/position.js":27,"./position_descriptor.js":11,"./relative_position.js":12}],5:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("../util/oop.js"),o=t("../values/value.js"),s=e.exports=function(){r.unreachable("Descriptor is abstract and should not be constructed directly.")};s.extend=i.extendFn(s),i.makeAbstract(s,["value","toString"]),s.prototype.diff=function(t){t=function(t,e){var n=typeof e;if(null===e&&(n="null"),"object"===n&&(e instanceof s||e instanceof o))return e;if(void 0===e)throw new Error("Can't compare "+t+" to "+e+". Did you misspell a property name?");if("object"===n)throw new Error("Can't compare "+t+" to "+i.instanceName(e)+" instances.");var r=t.convert(e,n);if(void 0!==r)return r;var u=e;throw"string"===n&&(u="'"+u+"'"),"function"===n&&(u="a function"),new Error("Can't compare "+t+" to "+u+".")}(this,t);try{var e=this.value(),n=t.value();if(e.equals(n))return"";var r=e.diff(n),u=n.toString();return t instanceof s&&(u+=" ("+t+")"),this+" was "+r+".\n  Expected: "+u+"\n  But was:  "+e}catch(e){throw new Error("Can't compare "+this+" to "+t+": "+e.message)}},s.prototype.convert=function(t,e){},s.prototype.equals=function(t){return!1}},{"../util/ensure.js":23,"../util/oop.js":24,"../values/value.js":30}],6:[function(t,e,n){"use strict";function r(t){return function(e){return new a(e,t)}}function i(t,e){var n=t._element,r=n.frame.body().toDomElement().contains(n.toDomElement()),i="none"===n.getRawStyle("display");return r&&!i}var o=t("../util/ensure.js"),s=t("../values/position.js"),u=t("./position_descriptor.js"),a=e.exports=function(e,n){var r=t("../q_element.js");o.signature(arguments,[r,String]),"left"===n||"right"===n?u.x(this):"top"===n||"bottom"===n?u.y(this):o.unreachable("Unknown position: "+n),this._element=e,this._position=n};u.extend(a),a.top=r("top"),a.right=r("right"),a.bottom=r("bottom"),a.left=r("left"),a.prototype.value=function(){o.signature(arguments,[]);var t=this._element.getRawPosition(),e=t[this._position],n=this._element.frame.getRawScrollPosition();return"right"===this._position||"left"===this._position?i(this)?s.x(e+n.x):s.noX():i(this)?s.y(e+n.y):s.noY()},a.prototype.toString=function(){return o.signature(arguments,[]),this._position+" edge of "+this._element}},{"../q_element.js":17,"../util/ensure.js":23,"../values/position.js":27,"./position_descriptor.js":11}],7:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("../values/render_state.js"),o=t("../values/position.js"),s=t("./descriptor.js"),u=t("./element_rendered_edge.js"),a=t("./generic_size.js"),c=t("./center.js"),l=e.exports=function(e){var n=t("../q_element.js");r.signature(arguments,[n]),this._element=e,this.top=u.top(e),this.right=u.right(e),this.bottom=u.bottom(e),this.left=u.left(e),this.width=a.create(this.left,this.right,"rendered width of "+e),this.height=a.create(this.top,this.bottom,"rendered height of "+e),this.center=c.x(this.left,this.right,"rendered center of "+e),this.middle=c.y(this.top,this.bottom,"rendered middle of "+e)};s.extend(l),l.create=function(t){return new l(t)},l.prototype.value=function(){return this.top.value().equals(o.noY())?i.notRendered():i.rendered()},l.prototype.toString=function(){return"render status of "+this._element.toString()},l.prototype.convert=function(t,e){if("boolean"===e)return t?i.rendered():i.notRendered()}},{"../q_element.js":17,"../util/ensure.js":23,"../values/position.js":27,"../values/render_state.js":28,"./center.js":4,"./descriptor.js":5,"./element_rendered_edge.js":8,"./generic_size.js":9}],8:[function(t,e,n){"use strict";function r(t){return function(e){return new y(e,t)}}function i(t,e){for(var n=t.parent();null!==n;n=n.parent())(function(t,e){return function(t){var e=t.getRawStyle("position");switch(e){case"static":case"relative":case"absolute":case"sticky":return!0;case"fixed":return!1;default:c.unreachable("Unknown position property: "+e)}}(t)&&function(t){var e=t.getRawStyle("overflow");switch(e){case"hidden":case"scroll":case"auto":return!0;case"visible":return!1;default:c.unreachable("Unknown overflow property: "+e)}}(e)})(t,n)&&(e=s(e,n.top.value(),n.right.value(),n.bottom.value(),n.left.value()));return e}function o(t,e){for(c.that(!l.browser.misreportsClipAutoProperty(),"Can't determine element clipping values on this browser because it misreports the value of the `clip: auto` property. You can use `quixote.browser.misreportsClipAutoProperty()` to skip this browser.");null!==t;t=t.parent()){var n=t.getRawStyle("clip");if("auto"!==n&&function(t){var e=t.getRawStyle("position");switch(e){case"absolute":case"fixed":return!0;case"static":case"relative":case"sticky":return!1;default:c.unreachable("Unknown position property: "+e)}}(t)){var r=function(t,e){function n(t,e){if("auto"===t)return t;var n=/^(.*?)px$/.exec(t);return c.that(null!==n,"Unable to parse '"+t+"' in clip property: "+e),n[1]}var r=function(t,e){c.that(!l.browser.misreportsAutoValuesInClipProperty(),"Can't determine element clipping values on this browser because it misreports the value of the `clip` property. You can use `quixote.browser.misreportsAutoValuesInClipProperty()` to skip this browser.");var r=/rect\((.*?),? (.*?),? (.*?),? (.*?)\)/.exec(e);return c.that(null!==r,"Unable to parse clip property: "+e),[n(r[1],e),n(r[2],e),n(r[3],e),n(r[4],e)]}(0,e);return{top:"auto"===r[0]?t.top.value():t.top.value().plus(p.y(Number(r[0]))),right:"auto"===r[1]?t.right.value():t.left.value().plus(p.x(Number(r[1]))),bottom:"auto"===r[2]?t.bottom.value():t.top.value().plus(p.y(Number(r[2]))),left:"auto"===r[3]?t.left.value():t.left.value().plus(p.x(Number(r[3])))}}(t,n);e=s(e,r.top,r.right,r.bottom,r.left)}}return e}function s(t,e,n,r,i){return t.top=t.top.max(e),t.right=null===t.right?n:t.right.min(n),t.bottom=null===t.bottom?r:t.bottom.min(r),t.left=t.left.max(i),t}function u(t){switch(t){case d:case v:return p.noY();case g:case m:return p.noX();default:a(t)}}function a(t){c.unreachable("Unknown position: "+t)}var c=t("../util/ensure.js"),l=t("../quixote.js"),f=t("./position_descriptor.js"),p=t("../values/position.js"),h=t("../values/size.js"),d=(t("../values/render_state.js"),"top"),m="right",v="bottom",g="left",y=e.exports=function(e,n){var r=t("../q_element.js");c.signature(arguments,[r,String]),n===g||n===m?f.x(this):n===d||n===v?f.y(this):a(n),this._element=e,this._position=n};f.extend(y),y.top=r(d),y.right=r(m),y.bottom=r(v),y.left=r(g),y.prototype.toString=function(){return c.signature(arguments,[]),this._position+" rendered edge of "+this._element},y.prototype.value=function(){var t=this._position,e=this._element,n=e.frame.page();if(e.top.value().equals(p.noY()))return u(t);if(e.width.value().equals(h.create(0)))return u(t);if(e.height.value().equals(h.create(0)))return u(t);c.that(!function(t){var e=t.getRawStyle("clip-path");return"none"!==e&&""!==e}(e),"Can't detect element clipping boundaries when 'clip-path' property is used.");var r={top:n.top.value(),right:null,bottom:null,left:n.left.value()},l=s(r=o(e,r=i(e,r)),e.top.value(),e.right.value(),e.bottom.value(),e.left.value());return function(t,e){return t.top.compare(e.bottom)>=0||null!==t.right&&t.right.compare(e.left)<=0||null!==t.bottom&&t.bottom.compare(e.top)<=0||t.left.compare(e.right)>=0}(r,l)?u(t):function(t,e){switch(e){case d:return t.top;case m:return t.right;case v:return t.bottom;case g:return t.left;default:a(e)}}(l,t)}},{"../q_element.js":17,"../quixote.js":22,"../util/ensure.js":23,"../values/position.js":27,"../values/render_state.js":28,"../values/size.js":29,"./position_descriptor.js":11}],9:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("./position_descriptor.js"),o=t("./size_descriptor.js"),s=e.exports=function(t,e,n){r.signature(arguments,[i,i,String]),this._from=t,this._to=e,this._description=n};o.extend(s),s.create=function(t,e,n){return new s(t,e,n)},s.prototype.value=function(){return r.signature(arguments,[]),this._from.value().distanceTo(this._to.value())},s.prototype.toString=function(){return this._description}},{"../util/ensure.js":23,"./position_descriptor.js":11,"./size_descriptor.js":14}],10:[function(t,e,n){"use strict";function r(t){return function(e){return new u(t,e)}}var i=t("../util/ensure.js"),o=t("./position_descriptor.js"),s=t("../values/position.js"),u=e.exports=function(e,n){var r=t("../q_frame.js");i.signature(arguments,[String,r]),"left"===e||"right"===e?o.x(this):"top"===e||"bottom"===e?o.y(this):i.unreachable("Unknown edge: "+e),this._edge=e,this._frame=n};o.extend(u),u.top=r("top"),u.right=r("right"),u.bottom=r("bottom"),u.left=r("left"),u.prototype.value=function(){i.signature(arguments,[]);var t=function(t){var e=t.documentElement,n=t.body;return{width:Math.max(n.scrollWidth,e.scrollWidth),height:Math.max(n.scrollHeight,e.scrollHeight)}}(this._frame.toDomElement().contentDocument);switch(this._edge){case"top":return s.y(0);case"right":return s.x(t.width);case"bottom":return s.y(t.height);case"left":return s.x(0);default:i.unreachable()}},u.prototype.toString=function(){switch(i.signature(arguments,[]),this._edge){case"top":return"top of page";case"right":return"right side of page";case"bottom":return"bottom of page";case"left":return"left side of page";default:i.unreachable()}}},{"../q_frame.js":19,"../util/ensure.js":23,"../values/position.js":27,"./position_descriptor.js":11}],11:[function(t,e,n){"use strict";function r(){return t("./relative_position.js")}function i(){return t("./absolute_position.js")}function o(t){return function(e){e._pdbc={dimension:t}}}var s=t("../util/ensure.js"),u=t("../util/oop.js"),a=t("./descriptor.js"),c=t("../values/position.js"),l=e.exports=function(t){s.signature(arguments,[String]),s.unreachable("PositionDescriptor is abstract and should not be constructed directly.")};a.extend(l),l.extend=u.extendFn(l),l.x=o("x"),l.y=o("y"),l.prototype.plus=function(t){return"x"===this._pdbc.dimension?r().right(this,t):r().down(this,t)},l.prototype.minus=function(t){return"x"===this._pdbc.dimension?r().left(this,t):r().up(this,t)},l.prototype.to=function(e){if(s.signature(arguments,[[l,Number]]),"number"==typeof e&&(e="x"===this._pdbc.dimension?i().x(e):i().y(e)),this._pdbc.dimension!==e._pdbc.dimension)throw new Error("Can only calculate distance between two X coordinates or two Y coordinates");return t("./generic_size.js").create(this,e,"distance from "+this+" to "+e)},l.prototype.convert=function(t,e){switch(e){case"number":return"x"===this._pdbc.dimension?c.x(t):c.y(t);case"string":return"none"===t?"x"===this._pdbc.dimension?c.noX():c.noY():void 0;default:return}}},{"../util/ensure.js":23,"../util/oop.js":24,"../values/position.js":27,"./absolute_position.js":3,"./descriptor.js":5,"./generic_size.js":9,"./relative_position.js":12}],12:[function(t,e,n){"use strict";function r(t,e){return function(n,r){return new c(t,e,n,r)}}var i=t("../util/ensure.js"),o=t("./descriptor.js"),s=t("./position_descriptor.js"),u=t("../values/value.js"),a=t("../values/size.js"),c=e.exports=function(t,e,n,r){i.signature(arguments,[String,Number,o,[Number,o,u]]),"x"===t?s.x(this):"y"===t?s.y(this):i.unreachable("Unknown dimension: "+t),this._dimension=t,this._direction=e,this._relativeTo=n,"number"==typeof r?(r<0&&(this._direction*=-1),this._amount=a.create(Math.abs(r))):this._amount=r};s.extend(c),c.right=r("x",1),c.down=r("y",1),c.left=r("x",-1),c.up=r("y",-1),c.prototype.value=function(){i.signature(arguments,[]);var t=this._relativeTo.value(),e=this._amount.value();return 1===this._direction?t.plus(e):t.minus(e)},c.prototype.toString=function(){i.signature(arguments,[]);var t=this._relativeTo.toString();if(this._amount.equals(a.create(0)))return t;var e=this._amount.toString();return"x"===this._dimension?e+=1===this._direction?" to right of ":" to left of ":e+=1===this._direction?" below ":" above ",e+t}},{"../util/ensure.js":23,"../values/size.js":29,"../values/value.js":30,"./descriptor.js":5,"./position_descriptor.js":11}],13:[function(t,e,n){"use strict";function r(t){return function(e,n){return new c(t,e,n)}}var i=t("../util/ensure.js"),o=t("../values/size.js"),s=t("./descriptor.js"),u=t("./size_descriptor.js"),a=t("../values/value.js"),c=(t("./size_multiple.js"),e.exports=function(t,e,n){i.signature(arguments,[Number,s,[Number,s,a]]),this._direction=t,this._relativeTo=e,"number"==typeof n?(this._amount=o.create(Math.abs(n)),n<0&&(this._direction*=-1)):this._amount=n});u.extend(c),c.larger=r(1),c.smaller=r(-1),c.prototype.value=function(){i.signature(arguments,[]);var t=this._relativeTo.value(),e=this._amount.value();return 1===this._direction?t.plus(e):t.minus(e)},c.prototype.toString=function(){i.signature(arguments,[]);var t=this._relativeTo.toString();if(this._amount.equals(o.create(0)))return t;var e=this._amount.toString();return 1===this._direction?e+=" larger than ":e+=" smaller than ",e+t}},{"../util/ensure.js":23,"../values/size.js":29,"../values/value.js":30,"./descriptor.js":5,"./size_descriptor.js":14,"./size_multiple.js":15}],14:[function(t,e,n){"use strict";function r(){return t("./relative_size.js")}var i=t("../util/ensure.js"),o=t("../util/oop.js"),s=t("./descriptor.js"),u=t("../values/size.js"),a=e.exports=function(){i.unreachable("SizeDescriptor is abstract and should not be constructed directly.")};s.extend(a),a.extend=o.extendFn(a),a.prototype.plus=function(t){return r().larger(this,t)},a.prototype.minus=function(t){return r().smaller(this,t)},a.prototype.times=function(e){return t("./size_multiple.js").create(this,e)},a.prototype.convert=function(t,e){switch(e){case"number":return u.create(t);case"string":return"none"===t?u.createNone():void 0;default:return}}},{"../util/ensure.js":23,"../util/oop.js":24,"../values/size.js":29,"./descriptor.js":5,"./relative_size.js":13,"./size_multiple.js":15}],15:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("./descriptor.js"),o=t("./size_descriptor.js"),s=(t("../values/size.js"),e.exports=function(t,e){r.signature(arguments,[i,Number]),this._relativeTo=t,this._multiple=e});o.extend(s),s.create=function(t,e){return new s(t,e)},s.prototype.value=function(){return r.signature(arguments,[]),this._relativeTo.value().times(this._multiple)},s.prototype.toString=function(){r.signature(arguments,[]);var t=this._multiple,e=this._relativeTo.toString();if(1===t)return e;var n;switch(t){case.5:n="half of ";break;case 1/3:n="one-third of ";break;case 2/3:n="two-thirds of ";break;case.25:n="one-quarter of ";break;case.75:n="three-quarters of ";break;case.2:n="one-fifth of ";break;case.4:n="two-fifths of ";break;case.6:n="three-fifths of ";break;case.8:n="four-fifths of ";break;case 1/6:n="one-sixth of ";break;case 5/6:n="five-sixths of ";break;case 1/8:n="one-eighth of ";break;case 3/8:n="three-eighths of ";break;case 5/8:n="five-eighths of ";break;case 7/8:n="seven-eighths of ";break;default:n=t>1?t+" times ":100*t+"% of "}return n+e}},{"../util/ensure.js":23,"../values/size.js":29,"./descriptor.js":5,"./size_descriptor.js":14}],16:[function(t,e,n){"use strict";function r(t){return function(e){return new u(t,e)}}var i=t("../util/ensure.js"),o=t("./position_descriptor.js"),s=t("../values/position.js"),u=e.exports=function(e,n){var r=t("../q_frame.js");i.signature(arguments,[String,r]),"left"===e||"right"===e?o.x(this):"top"===e||"bottom"===e?o.y(this):i.unreachable("Unknown position: "+e),this._position=e,this._frame=n};o.extend(u),u.top=r("top"),u.right=r("right"),u.bottom=r("bottom"),u.left=r("left"),u.prototype.value=function(){i.signature(arguments,[]);var t=this._frame.getRawScrollPosition(),e=s.x(t.x),n=s.y(t.y),r=function(t){return{width:t.clientWidth,height:t.clientHeight}}(this._frame.get("html").toDomElement());switch(this._position){case"top":return n;case"right":return e.plus(s.x(r.width));case"bottom":return n.plus(s.y(r.height));case"left":return e;default:i.unreachable()}},u.prototype.toString=function(){return i.signature(arguments,[]),this._position+" edge of viewport"}},{"../q_frame.js":19,"../util/ensure.js":23,"../values/position.js":27,"./position_descriptor.js":11}],17:[function(t,e,n){"use strict";var r=t("./util/ensure.js"),i=t("./util/shim.js"),o=t("../vendor/camelcase-1.0.1-modified.js"),s=t("./descriptors/element_rendered.js"),u=t("./descriptors/element_edge.js"),a=t("./descriptors/center.js"),c=t("./descriptors/generic_size.js"),l=t("./assertable.js"),f=e.exports=function(e,n,i){var o=t("./q_frame.js");r.signature(arguments,[Object,o,String]),this._domElement=e,this._nickname=i,this.frame=n,this.rendered=s.create(this),this.top=u.top(this),this.right=u.right(this),this.bottom=u.bottom(this),this.left=u.left(this),this.center=a.x(this.left,this.right,"center of "+this),this.middle=a.y(this.top,this.bottom,"middle of "+this),this.width=c.create(this.left,this.right,"width of "+this),this.height=c.create(this.top,this.bottom,"height of "+this)};l.extend(f),f.prototype.getRawStyle=function(t){r.signature(arguments,[String]);var e;return null!==(e=window.getComputedStyle?this.frame.toDomElement().contentWindow.getComputedStyle(this._domElement).getPropertyValue(t):this._domElement.currentStyle[o(t)])&&void 0!==e||(e=""),e},f.prototype.getRawPosition=function(){r.signature(arguments,[]);var t=this._domElement.getBoundingClientRect();return{left:t.left,right:t.right,width:void 0!==t.width?t.width:t.right-t.left,top:t.top,bottom:t.bottom,height:void 0!==t.height?t.height:t.bottom-t.top}},f.prototype.calculatePixelValue=function(t){var e=this._domElement;if(void 0!==e.runtimeStyle)return function(){var r=e.runtimeStyle.left,i=e.style.left;return e.runtimeStyle.left=e.currentStyle.left,e.style.left=t,n=e.style.pixelLeft,e.runtimeStyle.left=r,e.style.left=i,n}();var n,r=e.style,i=r.position,o=r.left;return r.position="absolute",r.left=t,n=parseFloat(this.getRawStyle("left")),r.position=i,r.left=o,n},f.prototype.parent=function(t){if(r.signature(arguments,[[void 0,String]]),void 0===t&&(t="parent of "+this._nickname),this.equals(this.frame.body()))return null;var e=this._domElement.parentElement;return null===e?null:new f(e,this.frame,t)},f.prototype.add=function(t,e){r.signature(arguments,[String,[void 0,String]]),void 0===e&&(e=t+" in "+this._nickname);var n=document.createElement("div");n.innerHTML=i.String.trim(t),r.that(1===n.childNodes.length,"Expected one element, but got "+n.childNodes.length+" ("+t+")");var o=n.childNodes[0];return this._domElement.appendChild(o),new f(o,this.frame,e)},f.prototype.remove=function(){r.signature(arguments,[]),i.Element.remove(this._domElement)},f.prototype.toDomElement=function(){return r.signature(arguments,[]),this._domElement},f.prototype.toString=function(){return r.signature(arguments,[]),"'"+this._nickname+"'"},f.prototype.equals=function(t){return r.signature(arguments,[f]),this._domElement===t._domElement}},{"../vendor/camelcase-1.0.1-modified.js":32,"./assertable.js":2,"./descriptors/center.js":4,"./descriptors/element_edge.js":6,"./descriptors/element_rendered.js":7,"./descriptors/generic_size.js":9,"./q_frame.js":19,"./util/ensure.js":23,"./util/shim.js":25}],18:[function(t,e,n){"use strict";var r=t("./util/ensure.js"),i=t("./q_element.js"),o=e.exports=function(e,n,i){var o=t("./q_frame.js");r.signature(arguments,[Object,o,String]),this._nodeList=e,this._frame=n,this._nickname=i};o.prototype.length=function(){return r.signature(arguments,[]),this._nodeList.length},o.prototype.at=function(t,e){r.signature(arguments,[Number,[void 0,String]]);var n=t,o=this.length();n<0&&(n=o+n),r.that(n>=0&&n<o,"'"+this._nickname+"'["+t+"] is out of bounds; list length is "+o);var s=this._nodeList[n];return void 0===e&&(e=this._nickname+"["+n+"]"),new i(s,this._frame,e)},o.prototype.toString=function(){return r.signature(arguments,[]),"'"+this._nickname+"' list"}},{"./q_element.js":17,"./q_frame.js":19,"./util/ensure.js":23}],19:[function(t,e,n){"use strict";function r(t,e){t._frameLoadCallback=e}function i(t,e){if(void 0===t)return e(null,!0);var n=new XMLHttpRequest;n.open("HEAD",t),n.onreadystatechange=function(){if(2===n.readyState)return e(null,404!==n.status)},n.onerror=function(){return e("XMLHttpRequest error while using HTTP HEAD on URL '"+t+"': "+n.statusText)},n.send()}function o(t,e){void 0===e?function(t){t.contentWindow.document.open(),t.contentWindow.document.write("<!DOCTYPE html>\n<html><head></head><body></body></html>"),t.contentWindow.document.close()}(t):function(t,e){t.setAttribute("src",e)}(t,e)}function s(t){u(t),function(t){a.that(!t._removed,"Attempted to use frame after it was removed")}(t)}function u(t){a.that(t._loaded,"QFrame not loaded: Wait for frame creation callback to execute before using frame")}var a=t("./util/ensure.js"),c=t("./util/shim.js"),l=(t("./quixote.js"),t("./q_element.js")),f=t("./q_element_list.js"),p=t("./q_viewport.js"),h=t("./q_page.js"),d=t("../vendor/async-1.4.2.js"),m=e.exports=function(){a.signature(arguments,[]),this._domElement=null,this._loaded=!1,this._removed=!1};m.create=function(t,e,n){function s(){setTimeout(function(){!function(t,e,n,r,i){t._loaded=!0,t._document=t._domElement.contentDocument,t._originalBody=t._document.body.innerHTML,t._originalWidth=e,t._originalHeight=n,t._originalSrc=r,t._originalStylesheets=i}(v,u,l,f,p),function(t,e,n){d.each(e,function(e,n){var r=document.createElement("link");c.EventTarget.addEventListener(r,"load",function(t){n(null)}),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",e),c.Document.head(t._document).appendChild(r)},n)}(v,p,function(){h&&function(t,e){var n=document.createElement("style");n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=e:n.innerHTML=e,c.Document.head(t._document).appendChild(n)}(v,e.css),v._frameLoadCallback(null,v)})},0)}a.signature(arguments,[Object,[Object,Function],[void 0,Function]]),void 0===n&&(n=e,e={});var u=e.width||2e3,l=e.height||2e3,f=e.src,p=e.stylesheet||[],h=e.css;c.Array.isArray(p)||(p=[p]);var v=new m;return function(t,e,n){function r(t,e){i(t,function(n,r){return e(n||(r?null:o("stylesheet",t)))})}function o(t,e){return new Error("404 error while loading "+t+" ("+e+")")}i(t,function(i,s){return i?n(i):s?void d.each(e,r,n):n(o("src",t))})}(f,p,function(e){if(e)return n(e);var i=function(t,e,n){var r=document.createElement("iframe");return r.setAttribute("width",e),r.setAttribute("height",n),r.setAttribute("frameborder","0"),t.appendChild(r),r}(t,u,l);c.EventTarget.addEventListener(i,"load",s),o(i,f),v._domElement=i,r(v,n)}),v},m.prototype.reset=function(){a.signature(arguments,[]),s(this),this._document.body.innerHTML=this._originalBody,this.scroll(0,0),this.resize(this._originalWidth,this._originalHeight)},m.prototype.reload=function(t){a.signature(arguments,[Function]),s(this);var e=this._domElement,n=this._originalSrc;this.resize(this._originalWidth,this._originalHeight),r(this,t),o(e,n)},m.prototype.toDomElement=function(){return a.signature(arguments,[]),s(this),this._domElement},m.prototype.remove=function(){a.signature(arguments,[]),u(this),this._removed||(this._domElement.parentNode.removeChild(this._domElement),this._removed=!0)},m.prototype.viewport=function(){return a.signature(arguments,[]),s(this),new p(this)},m.prototype.page=function(){return a.signature(arguments,[]),s(this),new h(this)},m.prototype.body=function(){return a.signature(arguments,[]),this.get("body")},m.prototype.add=function(t,e){return a.signature(arguments,[String,[void 0,String]]),void 0===e&&(e=t),this.body().add(t,e)},m.prototype.get=function(t,e){a.signature(arguments,[String,[void 0,String]]),void 0===e&&(e=t),s(this);var n=this._document.querySelectorAll(t);return a.that(1===n.length,"Expected one element to match '"+t+"', but found "+n.length),new l(n[0],this,e)},m.prototype.getAll=function(t,e){return a.signature(arguments,[String,[void 0,String]]),void 0===e&&(e=t),s(this),new f(this._document.querySelectorAll(t),this,e)},m.prototype.scroll=function(t,e){a.signature(arguments,[Number,Number]),s(this),this._domElement.contentWindow.scroll(t,e)},m.prototype.getRawScrollPosition=function(){return a.signature(arguments,[]),s(this),{x:c.Window.pageXOffset(this._domElement.contentWindow,this._document),y:c.Window.pageYOffset(this._domElement.contentWindow,this._document)}},m.prototype.resize=function(t,e){a.signature(arguments,[Number,Number]),s(this),this._domElement.setAttribute("width",""+t),this._domElement.setAttribute("height",""+e)}},{"../vendor/async-1.4.2.js":31,"./q_element.js":17,"./q_element_list.js":18,"./q_page.js":20,"./q_viewport.js":21,"./quixote.js":22,"./util/ensure.js":23,"./util/shim.js":25}],20:[function(t,e,n){"use strict";var r=t("./util/ensure.js"),i=t("./descriptors/page_edge.js"),o=t("./descriptors/center.js"),s=t("./assertable.js"),u=t("./descriptors/generic_size.js"),a=e.exports=function(e){var n=t("./q_frame.js");r.signature(arguments,[n]),this.top=i.top(e),this.right=i.right(e),this.bottom=i.bottom(e),this.left=i.left(e),this.width=u.create(this.left,this.right,"width of page"),this.height=u.create(this.top,this.bottom,"height of page"),this.center=o.x(this.left,this.right,"center of page"),this.middle=o.y(this.top,this.bottom,"middle of page")};s.extend(a)},{"./assertable.js":2,"./descriptors/center.js":4,"./descriptors/generic_size.js":9,"./descriptors/page_edge.js":10,"./q_frame.js":19,"./util/ensure.js":23}],21:[function(t,e,n){"use strict";var r=t("./util/ensure.js"),i=t("./descriptors/viewport_edge.js"),o=t("./descriptors/center.js"),s=t("./assertable.js"),u=t("./descriptors/generic_size.js"),a=e.exports=function(e){var n=t("./q_frame.js");r.signature(arguments,[n]),this.top=i.top(e),this.right=i.right(e),this.bottom=i.bottom(e),this.left=i.left(e),this.width=u.create(this.left,this.right,"width of viewport"),this.height=u.create(this.top,this.bottom,"height of viewport"),this.center=o.x(this.left,this.right,"center of viewport"),this.middle=o.y(this.top,this.bottom,"middle of viewport")};s.extend(a)},{"./assertable.js":2,"./descriptors/center.js":4,"./descriptors/generic_size.js":9,"./descriptors/viewport_edge.js":16,"./q_frame.js":19,"./util/ensure.js":23}],22:[function(t,e,n){"use strict";function r(t){return function(){return o.signature(arguments,[]),o.that(null!==a,"Must create a frame before using Quixote browser feature detection."),a[t]}}function i(t){a={};var e=s.create(document.body,{width:1500,height:200},function(n){if(n)return console.log("Error while creating Quixote browser feature detection frame: "+n),t();try{a.enlargesFrame=function(t,e){return t.add("<div style='width: "+(e+200)+"px'>force scrolling</div>"),!t.viewport().width.value().equals(u.create(e))}(e,1500),a.misreportsClipAuto=function(t){return"auto"!==t.add("<div style='clip: auto;'></div>").getRawStyle("clip")}(e),a.misreportsClipValues=function(t){var e=t.add("<div style='clip: rect(auto, auto, auto, auto);'></div>"),n=e.getRawStyle("clip");return(""!==n||"auto"!==e.getRawStyle("clip-top"))&&"rect(auto, auto, auto, auto)"!==n&&"rect(auto auto auto auto)"!==n}(e),a.roundsOffPixelCalculations=function(t){var e=t.add("<div style='font-size: 15px;'></div>").calculatePixelValue("0.5em");if(7.5===e)return!1;if(8===e)return!0;o.unreachable("Failure in roundsOffPixelValues() detection: expected 7.5 or 8, but got "+e)}(e),e.reset(),function(t,e,n){o.that(e>=1500,"Detector frame width must be larger than screen to detect font enlargement"),t.add("<div><style>p { font-size: 15px; }</style></div>");var r=t.add("<p>arbitrary text</p>");t.add("<p>must have two p tags to work</p>");r.offsetHeight;setTimeout(function(){var t=r.getRawStyle("font-size");return o.that(""!==t,"Expected font-size to be a value"),n("12pt"===t?!1:"15px"!==t)},0)}(e,1500,function(n){return a.enlargesFonts=n,e.remove(),t()})}catch(t){console.log("Error during Quixote browser feature detection: "+t)}})}var o=t("./util/ensure.js"),s=t("./q_frame.js"),u=t("./values/size.js"),a=null;n.createFrame=function(t,e){return s.create(document.body,t,function(t,n){null===a?i(function(){e(t,n)}):e(t,n)})},n.browser={},n.browser.enlargesFrameToPageSize=r("enlargesFrame"),n.browser.enlargesFonts=r("enlargesFonts"),n.browser.misreportsClipAutoProperty=r("misreportsClipAuto"),n.browser.misreportsAutoValuesInClipProperty=r("misreportsClipValues"),n.browser.roundsOffPixelCalculations=r("roundsOffPixelCalculations")},{"./q_frame.js":19,"./util/ensure.js":23,"./values/size.js":29}],23:[function(t,e,n){"use strict";function r(t){var e=typeof t;return null===t&&(e="null"),i.Array.isArray(t)&&(e="array"),"number"===e&&isNaN(t)&&(e="NaN"),e}var i=t("./shim.js"),o=t("./oop.js");n.that=function(t,e){if(void 0===e&&(e="Expected condition to be true"),!1===t)throw new s(n.that,e);if(!0!==t)throw new s(n.that,"Expected condition to be true or false")},n.unreachable=function(t){throw t||(t="Unreachable code executed"),new s(n.unreachable,t)},n.signature=function(t,e){var u=(e=e||[]).length,a=t.length;if(a>u)throw new s(n.signature,"Function called with too many arguments: expected "+u+" but got "+a);for(var c,l,f,p=0;p<e.length;p++)if(c=t[p],l=e[p],f="Argument #"+(p+1),i.Array.isArray(l)||(l=[l]),!function(t,e){for(var i=0;i<e.length;i++)if(function(t,e){switch(r(t)){case"boolean":return e===Boolean;case"string":return e===String;case"number":return e===Number;case"array":return e===Array;case"function":return e===Function;case"object":return e===Object||t instanceof e;case"undefined":return void 0===e;case"null":return null===e;case"NaN":return"number"==typeof e&&isNaN(e);default:n.unreachable()}}(t,e[i]))return!0;return!1}(c,l)){var h=f+" expected "+function(t){for(var e="",n="",r=0;r<t.length;r++)n+=e+function(t){switch(t){case Boolean:return"boolean";case String:return"string";case Number:return"number";case Array:return"array";case Function:return"function";case null:return"null";case void 0:return"undefined";default:return"number"==typeof t&&isNaN(t)?"NaN":o.className(t)+" instance"}}(t[r]),e=r===t.length-2?", or ":", ";return n}(l)+", but was "+function(t){var e=r(t);return"object"!==e?e:o.instanceName(t)+" instance"}(c);throw new s(n.signature,h)}};var s=n.EnsureException=function(t,e){Error.captureStackTrace?Error.captureStackTrace(this,t):this.stack=(new Error).stack,this.message=e};s.prototype=i.Object.create(Error.prototype),s.prototype.constructor=s,s.prototype.name="EnsureException"},{"./oop.js":24,"./shim.js":25}],24:[function(t,e,n){"use strict";var r=t("./shim.js");n.className=function(t){if("function"!=typeof t)throw new Error("Not a constructor");return r.Function.name(t)},n.instanceName=function(t){var e=r.Object.getPrototypeOf(t);if(null===e)return"<no prototype>";var n=e.constructor;return void 0===n||null===n?"<anon>":r.Function.name(n)},n.extendFn=function(t){return function(e){e.prototype=r.Object.create(t.prototype),e.prototype.constructor=e}},n.makeAbstract=function(t,e){var n=r.Function.name(t);r.Array.forEach(e,function(e){t.prototype[e]=function(){throw new Error(n+" subclasses must implement "+e+"() method")}}),t.prototype.checkAbstractMethods=function(){var n=[],i=this;return r.Array.forEach(e,function(e){i[e]===t.prototype[e]&&n.push(e+"()")}),n}}},{"./shim.js":25}],25:[function(t,e,n){"use strict";n.Array={isArray:function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},every:function(t,e,n){if(Array.prototype.every)return t.every(e,n);var r,i;if(null==this)throw new TypeError("this is null or not defined");var o=Object(this),s=o.length>>>0;if("function"!=typeof e)throw new TypeError;for(arguments.length>1&&(r=n),i=0;i<s;){var u;if(i in o){u=o[i];if(!e.call(r,u,i,o))return!1}i++}return!0},forEach:function(t,e,n){if(Array.prototype.forEach)return t.forEach(e,n);var r,i;if(null==t)throw new TypeError(" this is null or not defined");var o=Object(t),s=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(r=n),i=0;i<s;){var u;i in o&&(u=o[i],e.call(r,u,i,o)),i++}}},n.Document={head:function(t){return t.head?t.head:t.querySelector("head")}},n.Element={remove:function(t){t.parentNode.removeChild(t)}},n.EventTarget={addEventListener:function(t,e,n){if(t.addEventListener)return t.addEventListener(e,n);t.attachEvent("on"+e,n)}},n.Function={name:function(t){if(t.name)return t.name;var e=/function\s+(.{1,})\s*\(/.exec(t.toString());return e&&e.length>1?e[1]:"<anon>"}},n.Object={create:function(t){if(Object.create)return Object.create(t);var e=function(){};return e.prototype=t,new e},getPrototypeOf:function(t){if(Object.getPrototypeOf)return Object.getPrototypeOf(t);return(t.constructor?t.constructor.prototype:null)||null},keys:function(t){if(Object.keys)return Object.keys(t);var e=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=r.length;if("object"!=typeof t&&("function"!=typeof t||null===t))throw new TypeError("Object.keys called on non-object");var o,s,u=[];for(o in t)e.call(t,o)&&u.push(o);if(n)for(s=0;s<i;s++)e.call(t,r[s])&&u.push(r[s]);return u}},n.String={trim:function(t){return void 0!==t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},n.Window={pageXOffset:function(t,e){if(void 0!==t.pageXOffset)return t.pageXOffset;return"CSS1Compat"===(e.compatMode||"")?e.documentElement.scrollLeft:e.body.scrollLeft},pageYOffset:function(t,e){if(void 0!==t.pageYOffset)return t.pageYOffset;return"CSS1Compat"===(e.compatMode||"")?e.documentElement.scrollTop:e.body.scrollTop}}},{}],26:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("./value.js"),o=e.exports=function(t){r.signature(arguments,[[Number,null]]),this._none=null===t,this._amount=t};i.extend(o),o.create=function(t){return new o(t)},o.createNone=function(){return new o(null)},o.ZERO=o.create(0),o.NONE=o.createNone(),o.prototype.compatibility=function(){return[o]},o.prototype.plus=i.safe(function(t){return this._none||t._none?o.createNone():new o(this._amount+t._amount)}),o.prototype.minus=i.safe(function(t){return this._none||t._none?o.createNone():new o(this._amount-t._amount)}),o.prototype.difference=i.safe(function(t){return this._none||t._none?o.createNone():new o(Math.abs(this._amount-t._amount))}),o.prototype.times=function(t){return r.signature(arguments,[Number]),this._none?o.createNone():new o(this._amount*t)},o.prototype.average=i.safe(function(t){return this._none||t._none?o.createNone():new o((this._amount+t._amount)/2)}),o.prototype.compare=i.safe(function(t){var e=!this._none&&!t._none,n=this._none&&t._none,r=!this._none&&t._none;if(e){var i=this._amount-t._amount;return Math.abs(i)<=.5?0:i}return n?0:r?1:-1}),o.min=function(t,e){return r.signature(arguments,[o,o]),t._none||e._none?o.createNone():t.compare(e)<=0?t:e},o.max=function(t,e){return r.signature(arguments,[o,o]),t._none||e._none?o.createNone():t.compare(e)>=0?t:e},o.prototype.diff=i.safe(function(t){if(0===this.compare(t))return"";if(this._none||t._none)return"non-measurable";var e=Math.abs(this._amount-t._amount),n=e;return 100*e!==Math.floor(100*e)&&(n="about "+e.toFixed(2)),n+"px"}),o.prototype.toString=function(){return r.signature(arguments,[]),this._none?"no pixels":this._amount+"px"}},{"../util/ensure.js":23,"./value.js":30}],27:[function(t,e,n){"use strict";function r(t,e){e instanceof c&&o.that(t._dimension===e._dimension,"Can't compare X coordinate to Y coordinate")}function i(t){return t._value.equals(u.NONE)}var o=t("../util/ensure.js"),s=t("./value.js"),u=t("./pixels.js"),a=t("./size.js"),c=e.exports=function(t,e){o.signature(arguments,[String,[Number,u]]),this._dimension=t,this._value="number"==typeof e?u.create(e):e};s.extend(c),c.x=function(t){return o.signature(arguments,[[Number,u]]),new c("x",t)},c.y=function(t){return o.signature(arguments,[[Number,u]]),new c("y",t)},c.noX=function(){return o.signature(arguments,[]),new c("x",u.NONE)},c.noY=function(){return o.signature(arguments,[]),new c("y",u.NONE)},c.prototype.compatibility=function(){return[c,a]},c.prototype.distanceTo=function(t){return o.signature(arguments,[c]),r(this,t),a.create(this._value.difference(t.toPixels()))},c.prototype.plus=s.safe(function(t){return r(this,t),new c(this._dimension,this._value.plus(t.toPixels()))}),c.prototype.minus=s.safe(function(t){return r(this,t),new c(this._dimension,this._value.minus(t.toPixels()))}),c.prototype.midpoint=s.safe(function(t){return r(this,t),new c(this._dimension,this._value.average(t.toPixels()))}),c.prototype.compare=s.safe(function(t){return r(this,t),this._value.compare(t.toPixels())}),c.prototype.min=s.safe(function(t){return r(this,t),new c(this._dimension,u.min(this._value,t.toPixels()))}),c.prototype.max=s.safe(function(t){return r(this,t),new c(this._dimension,u.max(this._value,t.toPixels()))}),c.prototype.diff=s.safe(function(t){o.signature(arguments,[c]),r(this,t);var e=this._value,n=t._value;if(e.equals(n))return"";if(i(t)&&!i(this))return"rendered when not expected";if(!i(t)&&i(this))return"not rendered";var s,u=e.compare(n);return s="x"===this._dimension?u<0?"further left than expected":"further right than expected":u<0?"higher than expected":"lower than expected",e.diff(n)+" "+s}),c.prototype.toString=function(){return o.signature(arguments,[]),i(this)?"not rendered":this._value.toString()},c.prototype.toPixels=function(){return o.signature(arguments,[]),this._value}},{"../util/ensure.js":23,"./pixels.js":26,"./size.js":29,"./value.js":30}],28:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("./value.js"),o=e.exports=function(t){r.signature(arguments,[String]),this._state=t};i.extend(o),o.rendered=function(){return new o("rendered")},o.notRendered=function(){return new o("not rendered")},o.prototype.compatibility=function(){return[o]},o.prototype.diff=i.safe(function(t){return this._state===t._state?"":"different than expected"}),o.prototype.toString=function(){return this._state}},{"../util/ensure.js":23,"./value.js":30}],29:[function(t,e,n){"use strict";function r(t){return t._value.equals(s.NONE)}var i=t("../util/ensure.js"),o=t("./value.js"),s=t("./pixels.js"),u=e.exports=function(t){i.signature(arguments,[[Number,s]]),this._value="number"==typeof t?s.create(t):t};o.extend(u),u.create=function(t){return new u(t)},u.createNone=function(){return i.signature(arguments,[]),new u(s.NONE)},u.prototype.compatibility=function(){return[u]},u.prototype.plus=o.safe(function(t){return new u(this._value.plus(t._value))}),u.prototype.minus=o.safe(function(t){return new u(this._value.minus(t._value))}),u.prototype.times=function(t){return new u(this._value.times(t))},u.prototype.compare=o.safe(function(t){return this._value.compare(t._value)}),u.prototype.diff=o.safe(function(t){var e=this._value,n=t._value;if(e.equals(n))return"";if(r(t)&&!r(this))return"rendered when not expected";if(!r(t)&&r(this))return"not rendered";var i=e.compare(n)>0?" larger than expected":" smaller than expected";return e.diff(n)+i}),u.prototype.toString=function(){return i.signature(arguments,[]),r(this)?"not rendered":this._value.toString()},u.prototype.toPixels=function(){return i.signature(arguments,[]),this._value}},{"../util/ensure.js":23,"./pixels.js":26,"./value.js":30}],30:[function(t,e,n){"use strict";function r(t,e,n){for(var r=0;r<n.length;r++)!function(t,e,n){function r(e){throw new Error(o.instanceName(t)+" isn't compatible with "+e)}var i=typeof n;null===n&&(i="null");"object"!==i&&r(i);for(var s=0;s<e.length;s++)if(n instanceof e[s])return;r(o.instanceName(n))}(t,e,n[r])}var i=t("../util/ensure.js"),o=t("../util/oop.js"),s=(t("../util/shim.js"),e.exports=function(){});s.extend=o.extendFn(s),o.makeAbstract(s,["compatibility","diff","toString"]),s.safe=function(t){return function(){return r(this,this.compatibility(),arguments),t.apply(this,arguments)}},s.prototype.value=function(){return i.signature(arguments,[]),this},s.prototype.equals=function(t){return""===this.diff(t)}},{"../util/ensure.js":23,"../util/oop.js":24,"../util/shim.js":25}],31:[function(t,e,n){(function(t,n){!function(){function r(){}function i(t){return t}function o(t){return!!t}function s(t){return!t}function u(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function a(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}function c(t){return D(t)||"number"==typeof t.length&&t.length>=0&&t.length%1==0}function l(t,e){for(var n=-1,r=t.length;++n<r;)e(t[n],n,t)}function f(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function p(t){return f(Array(t),function(t,e){return e})}function h(t,e){l(I(t),function(n){e(t[n],n)})}function d(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function m(t){var e,n,r=-1;return c(t)?(e=t.length,function(){return++r<e?r:null}):(n=I(t),e=n.length,function(){return++r<e?n[r]:null})}function v(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r)}}}function g(t){return function(e,n,r){return t(e,r)}}function y(t){return function(e,n,i){i=a(i||r);var o=m(e=e||[]);if(t<=0)return i(null);var s=!1,c=0,l=!1;!function r(){if(s&&c<=0)return i(null);for(;c<t&&!l;){var a=o();if(null===a)return s=!0,void(c<=0&&i(null));c+=1,n(e[a],a,u(function(t){c-=1,t?(i(t),l=!0):r()}))}}()}}function _(t){return function(e,n,r){return t(P.eachOf,e,n,r)}}function b(t){return function(e,n,r,i){return t(y(n),e,r,i)}}function j(t){return function(e,n,r){return t(P.eachOfSeries,e,n,r)}}function w(t,e,n,i){i=a(i||r);var o=[];t(e,function(t,e,r){n(t,function(t,n){o[e]=n,r(t)})},function(t){i(t,o)})}function x(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(n){n&&i.push({index:e,value:t}),r()})},function(){r(f(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function S(t,e,n,r){x(t,e,function(t,e){n(t,function(t){e(!t)})},r)}function E(t,e,n){return function(r,i,o,s){function u(){s&&s(n(!1,void 0))}function a(t,r,i){if(!s)return i();o(t,function(r){s&&e(r)&&(s(n(!0,t)),s=o=!1),i()})}arguments.length>3?t(r,i,a,u):(s=o,o=i,t(r,a,u))}}function k(t,e){return e}function O(t,e,n){n=n||r;var i=c(e)?[]:{};t(e,function(t,e,n){t(v(function(t,r){r.length<=1&&(r=r[0]),i[e]=r,n(t)}))},function(t){n(t,i)})}function N(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(t,e){i=i.concat(e||[]),r(t)})},function(t){r(t,i)})}function q(t,e,n){function i(t,e,n,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(t.started=!0,D(e)||(e=[e]),0===e.length&&t.idle())return P.setImmediate(function(){t.drain()});l(e,function(e){var o={data:e,callback:i||r};n?t.tasks.unshift(o):t.tasks.push(o),t.tasks.length===t.concurrency&&t.saturated()}),P.setImmediate(t.process)}function o(t,e){return function(){s-=1;var n=arguments;l(e,function(t){t.callback.apply(t,n)}),t.tasks.length+s===0&&t.drain(),t.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var s=0,a={tasks:[],concurrency:e,payload:n,saturated:r,empty:r,drain:r,started:!1,paused:!1,push:function(t,e){i(a,t,!1,e)},kill:function(){a.drain=r,a.tasks=[]},unshift:function(t,e){i(a,t,!0,e)},process:function(){if(!a.paused&&s<a.concurrency&&a.tasks.length)for(;s<a.concurrency&&a.tasks.length;){var e=a.payload?a.tasks.splice(0,a.payload):a.tasks.splice(0,a.tasks.length),n=f(e,function(t){return t.data});0===a.tasks.length&&a.empty(),s+=1;var r=u(o(a,e));t(n,r)}},length:function(){return a.tasks.length},running:function(){return s},idle:function(){return a.tasks.length+s===0},pause:function(){a.paused=!0},resume:function(){if(!1!==a.paused){a.paused=!1;for(var t=Math.min(a.concurrency,a.tasks.length),e=1;e<=t;e++)P.setImmediate(a.process)}}};return a}function A(t){return v(function(e,n){e.apply(null,n.concat([v(function(e,n){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&l(n,function(e){console[t](e)}))})]))})}function T(t){return function(e,n,r){t(p(e),n,r)}}function z(t){return v(function(e,n){var r=v(function(n){var r=this,i=n.pop();return t(e,function(t,e,i){t.apply(r,n.concat([i]))},i)});return n.length?r.apply(this,n):r})}function L(t){return v(function(e){var n=e.pop();e.push(function(){var t=arguments;r?P.setImmediate(function(){n.apply(null,t)}):n.apply(null,t)});var r=!0;t.apply(this,e),r=!1})}var C,P={},F="object"==typeof self&&self.self===self&&self||"object"==typeof n&&n.global===n&&n||this;null!=F&&(C=F.async),P.noConflict=function(){return F.async=C,P};var R=Object.prototype.toString,D=Array.isArray||function(t){return"[object Array]"===R.call(t)},I=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},M="function"==typeof setImmediate&&setImmediate,U=M?function(t){M(t)}:function(t){setTimeout(t,0)};"object"==typeof t&&"function"==typeof t.nextTick?P.nextTick=t.nextTick:P.nextTick=U,P.setImmediate=M?U:P.nextTick,P.forEach=P.each=function(t,e,n){return P.eachOf(t,g(e),n)},P.forEachSeries=P.eachSeries=function(t,e,n){return P.eachOfSeries(t,g(e),n)},P.forEachLimit=P.eachLimit=function(t,e,n,r){return y(e)(t,g(n),r)},P.forEachOf=P.eachOf=function(t,e,n){function i(t){t?n(t):(s+=1)>=o&&n(null)}n=a(n||r);var o=c(t=t||[])?t.length:I(t).length,s=0;if(!o)return n(null);!function(t,e){c(t)?l(t,e):h(t,e)}(t,function(n,r){e(t[r],r,u(i))})},P.forEachOfSeries=P.eachOfSeries=function(t,e,n){function i(){var r=!0;if(null===s)return n(null);e(t[s],s,u(function(t){if(t)n(t);else{if(null===(s=o()))return n(null);r?P.setImmediate(i):i()}})),r=!1}n=a(n||r);var o=m(t=t||[]),s=o();i()},P.forEachOfLimit=P.eachOfLimit=function(t,e,n,r){y(e)(t,n,r)},P.map=_(w),P.mapSeries=j(w),P.mapLimit=b(w),P.inject=P.foldl=P.reduce=function(t,e,n,r){P.eachOfSeries(t,function(t,r,i){n(e,t,function(t,n){e=n,i(t)})},function(t){r(t||null,e)})},P.foldr=P.reduceRight=function(t,e,n,r){var o=f(t,i).reverse();P.reduce(o,e,n,r)},P.select=P.filter=_(x),P.selectLimit=P.filterLimit=b(x),P.selectSeries=P.filterSeries=j(x),P.reject=_(S),P.rejectLimit=b(S),P.rejectSeries=j(S),P.any=P.some=E(P.eachOf,o,i),P.someLimit=E(P.eachOfLimit,o,i),P.all=P.every=E(P.eachOf,s,s),P.everyLimit=E(P.eachOfLimit,s,s),P.detect=E(P.eachOf,i,k),P.detectSeries=E(P.eachOfSeries,i,k),P.detectLimit=E(P.eachOfLimit,i,k),P.sortBy=function(t,e,n){function r(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:n>r?1:0}P.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){if(t)return n(t);n(null,f(e.sort(r),function(t){return t.value}))})},P.auto=function(t,e){function n(t){c.unshift(t)}function i(){s--,l(c.slice(0),function(t){t()})}e=a(e||r);var o=I(t),s=o.length;if(!s)return e(null);var u={},c=[];n(function(){s||e(null,u)}),l(o,function(r){function o(){return function(t,e,n){return l(t,function(t,r,i){n=e(n,t,r,i)}),n}(m,function(t,e){return t&&u.hasOwnProperty(e)},!0)&&!u.hasOwnProperty(r)}function s(){o()&&(!function(t){var e=d(c,t);e>=0&&c.splice(e,1)}(s),f[f.length-1](p,u))}for(var a,f=D(t[r])?t[r]:[t[r]],p=v(function(t,n){if(n.length<=1&&(n=n[0]),t){var o={};h(u,function(t,e){o[e]=t}),o[r]=n,e(t,o)}else u[r]=n,P.setImmediate(i)}),m=f.slice(0,f.length-1),g=m.length;g--;){if(!(a=t[m[g]]))throw new Error("Has inexistant dependency");if(D(a)&&d(a,r)>=0)throw new Error("Has cyclic dependencies")}o()?f[f.length-1](p,u):n(s)})},P.retry=function(t,e,n){function r(t,e){function n(t,n){return function(r){t(function(t,e){r(!t||n,{err:t,result:e})},e)}}function r(t){return function(e){setTimeout(function(){e(null)},t)}}for(;u.times;){var i=!(u.times-=1);s.push(n(u.task,i)),!i&&u.interval>0&&s.push(r(u.interval))}P.series(s,function(e,n){n=n[n.length-1],(t||u.callback)(n.err,n.result)})}var i=5,o=0,s=[],u={times:i,interval:o},a=arguments.length;if(a<1||a>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return a<=2&&"function"==typeof t&&(n=e,e=t),"function"!=typeof t&&function(t,e){if("number"==typeof e)t.times=parseInt(e,10)||i;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||i,t.interval=parseInt(e.interval,10)||o}}(u,t),u.callback=n,u.task=e,u.callback?r():r},P.waterfall=function(t,e){function n(t){return v(function(r,i){if(r)e.apply(null,[r].concat(i));else{var o=t.next();o?i.push(n(o)):i.push(e),L(t).apply(null,i)}})}if(e=a(e||r),!D(t)){var i=new Error("First argument to waterfall must be an array of functions");return e(i)}if(!t.length)return e();n(P.iterator(t))()},P.parallel=function(t,e){O(P.eachOf,t,e)},P.parallelLimit=function(t,e,n){O(y(e),t,n)},P.series=function(t,e){O(P.eachOfSeries,t,e)},P.iterator=function(t){function e(n){function r(){return t.length&&t[n].apply(null,arguments),r.next()}return r.next=function(){return n<t.length-1?e(n+1):null},r}return e(0)},P.apply=v(function(t,e){return v(function(n){return t.apply(null,e.concat(n))})}),P.concat=_(N),P.concatSeries=j(N),P.whilst=function(t,e,n){if(n=n||r,t()){var i=v(function(r,o){r?n(r):t.apply(this,o)?e(i):n(null)});e(i)}else n(null)},P.doWhilst=function(t,e,n){var r=0;return P.whilst(function(){return++r<=1||e.apply(this,arguments)},t,n)},P.until=function(t,e,n){return P.whilst(function(){return!t.apply(this,arguments)},e,n)},P.doUntil=function(t,e,n){return P.doWhilst(t,function(){return!e.apply(this,arguments)},n)},P.during=function(t,e,n){n=n||r;var i=v(function(e,r){e?n(e):(r.push(o),t.apply(this,r))}),o=function(t,r){t?n(t):r?e(i):n(null)};t(o)},P.doDuring=function(t,e,n){var r=0;P.during(function(t){r++<1?t(null,!0):e.apply(this,arguments)},t,n)},P.queue=function(t,e){return q(function(e,n){t(e[0],n)},e,1)},P.priorityQueue=function(t,e){function n(t,e){return t.priority-e.priority}var i=P.queue(t,e);return i.push=function(t,e,o){!function(t,e,i,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");if(t.started=!0,D(e)||(e=[e]),0===e.length)return P.setImmediate(function(){t.drain()});l(e,function(e){var s={data:e,priority:i,callback:"function"==typeof o?o:r};t.tasks.splice(function(t,e,n){for(var r=-1,i=t.length-1;r<i;){var o=r+(i-r+1>>>1);n(e,t[o])>=0?r=o:i=o-1}return r}(t.tasks,s,n)+1,0,s),t.tasks.length===t.concurrency&&t.saturated(),P.setImmediate(t.process)})}(i,t,e,o)},delete i.unshift,i},P.cargo=function(t,e){return q(t,1,e)},P.log=A("log"),P.dir=A("dir"),P.memoize=function(t,e){var n={},r={};e=e||i;var o=v(function(i){var o=i.pop(),s=e.apply(null,i);s in n?P.setImmediate(function(){o.apply(null,n[s])}):s in r?r[s].push(o):(r[s]=[o],t.apply(null,i.concat([v(function(t){n[s]=t;var e=r[s];delete r[s];for(var i=0,o=e.length;i<o;i++)e[i].apply(null,t)})])))});return o.memo=n,o.unmemoized=t,o},P.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},P.times=T(P.map),P.timesSeries=T(P.mapSeries),P.timesLimit=function(t,e,n,r){return P.mapLimit(p(t),e,n,r)},P.seq=function(){var t=arguments;return v(function(e){var n=this,i=e[e.length-1];"function"==typeof i?e.pop():i=r,P.reduce(t,e,function(t,e,r){e.apply(n,t.concat([v(function(t,e){r(t,e)})]))},function(t,e){i.apply(n,[t].concat(e))})})},P.compose=function(){return P.seq.apply(null,Array.prototype.reverse.call(arguments))},P.applyEach=z(P.eachOf),P.applyEachSeries=z(P.eachOfSeries),P.forever=function(t,e){function n(t){if(t)return i(t);o(n)}var i=u(e||r),o=L(t);n()},P.ensureAsync=L,P.constant=v(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),P.wrapSync=P.asyncify=function(t){return v(function(e){var n,r=e.pop();try{n=t.apply(this,e)}catch(t){return r(t)}!function(t){var e=typeof t;return"function"===e||"object"===e&&!!t}(n)||"function"!=typeof n.then?r(null,n):n.then(function(t){r(null,t)}).catch(function(t){r(t.message?t:new Error(t))})})},"object"==typeof e&&e.exports?e.exports=P:F.async=P}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:1}],32:[function(t,e,n){"use strict";e.exports=function(t){return 1===t.length?t:t.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(t,e){return e.toUpperCase()})}},{}]},{},[22])(22)});