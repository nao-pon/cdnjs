!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).quixote=t()}}(function(){return function t(e,n,r){function i(s,u){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n||t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(t){if(f===setTimeout)return setTimeout(t,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function s(t){if(p===clearTimeout)return clearTimeout(t);if((p===i||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function u(){v&&d&&(v=!1,d.length?m=d.concat(m):g=-1,m.length&&a())}function a(){if(!v){var t=o(u);v=!0;for(var e=m.length;e;){for(d=m,m=[];++g<e;)d&&d[g].run();g=-1,e=m.length}d=null,v=!1,s(t)}}function c(t,e){this.fun=t,this.array=e}function l(){}var f,p,h=e.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(t){f=r}try{p="function"==typeof clearTimeout?clearTimeout:i}catch(t){p=i}}();var d,m=[],v=!1,g=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];m.push(new c(t,e)),1!==m.length||v||o(a)},c.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=l,h.addListener=l,h.once=l,h.off=l,h.removeListener=l,h.removeAllListeners=l,h.emit=l,h.prependListener=l,h.prependOnceListener=l,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],2:[function(t,e,n){"use strict";var r=t("./util/ensure.js"),i=t("./util/oop.js"),o=t("./util/shim.js"),s=e.exports=function(){r.unreachable("Assertable is abstract and should not be constructed directly.")};s.extend=i.extendFn(s),i.makeAbstract(s,[]),s.prototype.assert=function(t,e){r.signature(arguments,[Object,[void 0,String]]),void 0===e&&(e="Differences found");var n=this.diff(t);if(""!==n)throw new Error(e+":\n"+n+"\n")},s.prototype.diff=function(t){r.signature(arguments,[Object]);for(var e,n,i,s=[],u=o.Object.keys(t),a=0;a<u.length;a++)i=this[e=u[a]],r.that(void 0!==i,this+" doesn't have a property named '"+e+"'. Did you misspell it?"),""!==(n=i.diff(t[e]))&&s.push(n);return s.join("\n")}},{"./util/ensure.js":23,"./util/oop.js":24,"./util/shim.js":25}],3:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("./position_descriptor.js"),o=t("../values/position.js"),s=e.exports=function(t,e){switch(r.signature(arguments,[String,Number]),t){case"x":i.x(this),this._value=o.x(e);break;case"y":i.y(this),this._value=o.y(e);break;default:r.unreachable("Unknown dimension: "+t)}this._dimension=t};i.extend(s),s.x=function(t){return r.signature(arguments,[Number]),new s("x",t)},s.y=function(t){return r.signature(arguments,[Number]),new s("y",t)},s.prototype.value=function(){return this._value},s.prototype.toString=function(){return this._value+" "+this._dimension+"-coordinate"}},{"../util/ensure.js":23,"../values/position.js":27,"./position_descriptor.js":11}],4:[function(t,e,n){"use strict";function r(t){return function(e,n,r){return new s(t,e,n,r)}}var i=t("../util/ensure.js"),o=t("./position_descriptor.js"),s=(t("../values/position.js"),t("./relative_position.js"),e.exports=function(t,e,n,r){i.signature(arguments,[String,o,o,String]),"x"===t?o.x(this):"y"===t?o.y(this):i.unreachable("Unknown dimension: "+t),this._dimension=t,this._position1=e,this._position2=n,this._description=r});o.extend(s),s.x=r("x"),s.y=r("y"),s.prototype.value=function(){return i.signature(arguments,[]),this._position1.value().midpoint(this._position2.value())},s.prototype.toString=function(){return i.signature(arguments,[]),this._description}},{"../util/ensure.js":23,"../values/position.js":27,"./position_descriptor.js":11,"./relative_position.js":12}],5:[function(t,e,n){"use strict";function r(t,e){var n=typeof e;if(null===e&&(n="null"),"object"===n&&(e instanceof u||e instanceof s))return e;if(void 0===e)throw new Error("Can't compare "+t+" to "+e+". Did you misspell a property name?");if("object"===n)throw new Error("Can't compare "+t+" to "+o.instanceName(e)+" instances.");var r=t.convert(e,n);if(void 0!==r)return r;var i=e;throw"string"===n&&(i="'"+i+"'"),"function"===n&&(i="a function"),new Error("Can't compare "+t+" to "+i+".")}var i=t("../util/ensure.js"),o=t("../util/oop.js"),s=t("../values/value.js"),u=e.exports=function(){i.unreachable("Descriptor is abstract and should not be constructed directly.")};u.extend=o.extendFn(u),o.makeAbstract(u,["value","toString"]),u.prototype.diff=function(t){t=r(this,t);try{var e=this.value(),n=t.value();if(e.equals(n))return"";var i=e.diff(n),o=n.toString();return t instanceof u&&(o+=" ("+t+")"),this+" was "+i+".\n  Expected: "+o+"\n  But was:  "+e}catch(e){throw new Error("Can't compare "+this+" to "+t+": "+e.message)}},u.prototype.convert=function(t,e){},u.prototype.equals=function(t){return!1}},{"../util/ensure.js":23,"../util/oop.js":24,"../values/value.js":30}],6:[function(t,e,n){"use strict";function r(t){return function(e){return new a(e,t)}}function i(t,e){var n=t._element,r=n.frame.body().toDomElement().contains(n.toDomElement()),i="none"===n.getRawStyle("display");return r&&!i}var o=t("../util/ensure.js"),s=t("../values/position.js"),u=t("./position_descriptor.js"),a=e.exports=function(e,n){var r=t("../q_element.js");o.signature(arguments,[r,String]),"left"===n||"right"===n?u.x(this):"top"===n||"bottom"===n?u.y(this):o.unreachable("Unknown position: "+n),this._element=e,this._position=n};u.extend(a),a.top=r("top"),a.right=r("right"),a.bottom=r("bottom"),a.left=r("left"),a.prototype.value=function(){o.signature(arguments,[]);var t=this._element.getRawPosition(),e=t[this._position],n=this._element.frame.getRawScrollPosition();return"right"===this._position||"left"===this._position?i(this)?s.x(e+n.x):s.noX():i(this)?s.y(e+n.y):s.noY()},a.prototype.toString=function(){return o.signature(arguments,[]),this._position+" edge of "+this._element}},{"../q_element.js":17,"../util/ensure.js":23,"../values/position.js":27,"./position_descriptor.js":11}],7:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("../values/render_state.js"),o=t("../values/position.js"),s=t("./descriptor.js"),u=t("./element_rendered_edge.js"),a=t("./generic_size.js"),c=t("./center.js"),l=e.exports=function(e){var n=t("../q_element.js");r.signature(arguments,[n]),this._element=e,this.top=u.top(e),this.right=u.right(e),this.bottom=u.bottom(e),this.left=u.left(e),this.width=a.create(this.left,this.right,"rendered width of "+e),this.height=a.create(this.top,this.bottom,"rendered height of "+e),this.center=c.x(this.left,this.right,"rendered center of "+e),this.middle=c.y(this.top,this.bottom,"rendered middle of "+e)};s.extend(l),l.create=function(t){return new l(t)},l.prototype.value=function(){return this.top.value().equals(o.noY())?i.notRendered():i.rendered()},l.prototype.toString=function(){return"render status of "+this._element.toString()},l.prototype.convert=function(t,e){if("boolean"===e)return t?i.rendered():i.notRendered()}},{"../q_element.js":17,"../util/ensure.js":23,"../values/position.js":27,"../values/render_state.js":28,"./center.js":4,"./descriptor.js":5,"./element_rendered_edge.js":8,"./generic_size.js":9}],8:[function(t,e,n){"use strict";function r(t){return function(e){return new k(e,t)}}function i(t){var e=t.getRawStyle("clip-path");return"none"!==e&&""!==e}function o(t,e){for(var n=t.parent();null!==n;n=n.parent())a(t,n)&&(e=p(e,n.top.value(),n.right.value(),n.bottom.value(),n.left.value()));return e}function s(t,e){for(g.that(!y.browser.misreportsClipAutoProperty(),"Can't determine element clipping values on this browser because it misreports the value of the `clip: auto` property. You can use `quixote.browser.misreportsClipAutoProperty()` to skip this browser.");null!==t;t=t.parent()){var n=t.getRawStyle("clip");if("auto"!==n&&f(t)){var r=u(t,n);e=p(e,r.top,r.right,r.bottom,r.left)}}return e}function u(t,e){function n(t,e){if("auto"===t)return t;var n=/^(.*?)px$/.exec(t);return g.that(null!==n,"Unable to parse '"+t+"' in clip property: "+e),n[1]}var r=function(t,e){g.that(!y.browser.misreportsAutoValuesInClipProperty(),"Can't determine element clipping values on this browser because it misreports the value of the `clip` property. You can use `quixote.browser.misreportsAutoValuesInClipProperty()` to skip this browser.");var r=/rect\((.*?),? (.*?),? (.*?),? (.*?)\)/.exec(e);return g.that(null!==r,"Unable to parse clip property: "+e),[n(r[1],e),n(r[2],e),n(r[3],e),n(r[4],e)]}(0,e);return{top:"auto"===r[0]?t.top.value():t.top.value().plus(b.y(Number(r[0]))),right:"auto"===r[1]?t.right.value():t.left.value().plus(b.x(Number(r[1]))),bottom:"auto"===r[2]?t.bottom.value():t.top.value().plus(b.y(Number(r[2]))),left:"auto"===r[3]?t.left.value():t.left.value().plus(b.x(Number(r[3])))}}function a(t,e){return c(t)&&l(e)}function c(t){var e=t.getRawStyle("position");switch(e){case"static":case"relative":case"absolute":case"sticky":return!0;case"fixed":return!1;default:g.unreachable("Unknown position property: "+e)}}function l(t){var e=t.getRawStyle("overflow");switch(e){case"hidden":case"scroll":case"auto":return!0;case"visible":return!1;default:g.unreachable("Unknown overflow property: "+e)}}function f(t){var e=t.getRawStyle("position");switch(e){case"absolute":case"fixed":return!0;case"static":case"relative":case"sticky":return!1;default:g.unreachable("Unknown position property: "+e)}}function p(t,e,n,r,i){return t.top=t.top.max(e),t.right=null===t.right?n:t.right.min(n),t.bottom=null===t.bottom?r:t.bottom.min(r),t.left=t.left.max(i),t}function h(t,e){return t.top.compare(e.bottom)>=0||null!==t.right&&t.right.compare(e.left)<=0||null!==t.bottom&&t.bottom.compare(e.top)<=0||t.left.compare(e.right)>=0}function d(t){switch(t){case w:case S:return b.noY();case E:case x:return b.noX();default:v(t)}}function m(t,e){switch(e){case w:return t.top;case x:return t.right;case S:return t.bottom;case E:return t.left;default:v(e)}}function v(t){g.unreachable("Unknown position: "+t)}var g=t("../util/ensure.js"),y=t("../quixote.js"),_=t("./position_descriptor.js"),b=t("../values/position.js"),j=t("../values/size.js"),w=(t("../values/render_state.js"),"top"),x="right",S="bottom",E="left",k=e.exports=function(e,n){var r=t("../q_element.js");g.signature(arguments,[r,String]),n===E||n===x?_.x(this):n===w||n===S?_.y(this):v(n),this._element=e,this._position=n};_.extend(k),k.top=r(w),k.right=r(x),k.bottom=r(S),k.left=r(E),k.prototype.toString=function(){return g.signature(arguments,[]),this._position+" rendered edge of "+this._element},k.prototype.value=function(){var t=this._position,e=this._element,n=e.frame.page();if(e.top.value().equals(b.noY()))return d(t);if(e.width.value().equals(j.create(0)))return d(t);if(e.height.value().equals(j.create(0)))return d(t);g.that(!i(e),"Can't detect element clipping boundaries when 'clip-path' property is used.");var r={top:n.top.value(),right:null,bottom:null,left:n.left.value()},u=p(r=s(e,r=o(e,r)),e.top.value(),e.right.value(),e.bottom.value(),e.left.value());return h(r,u)?d(t):m(u,t)}},{"../q_element.js":17,"../quixote.js":22,"../util/ensure.js":23,"../values/position.js":27,"../values/render_state.js":28,"../values/size.js":29,"./position_descriptor.js":11}],9:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("./position_descriptor.js"),o=t("./size_descriptor.js"),s=e.exports=function(t,e,n){r.signature(arguments,[i,i,String]),this._from=t,this._to=e,this._description=n};o.extend(s),s.create=function(t,e,n){return new s(t,e,n)},s.prototype.value=function(){return r.signature(arguments,[]),this._from.value().distanceTo(this._to.value())},s.prototype.toString=function(){return this._description}},{"../util/ensure.js":23,"./position_descriptor.js":11,"./size_descriptor.js":14}],10:[function(t,e,n){"use strict";function r(t){return function(e){return new a(t,e)}}function i(t){var e=t.documentElement,n=t.body;return{width:Math.max(n.scrollWidth,e.scrollWidth),height:Math.max(n.scrollHeight,e.scrollHeight)}}var o=t("../util/ensure.js"),s=t("./position_descriptor.js"),u=t("../values/position.js"),a=e.exports=function(e,n){var r=t("../q_frame.js");o.signature(arguments,[String,r]),"left"===e||"right"===e?s.x(this):"top"===e||"bottom"===e?s.y(this):o.unreachable("Unknown edge: "+e),this._edge=e,this._frame=n};s.extend(a),a.top=r("top"),a.right=r("right"),a.bottom=r("bottom"),a.left=r("left"),a.prototype.value=function(){o.signature(arguments,[]);var t=i(this._frame.toDomElement().contentDocument);switch(this._edge){case"top":return u.y(0);case"right":return u.x(t.width);case"bottom":return u.y(t.height);case"left":return u.x(0);default:o.unreachable()}},a.prototype.toString=function(){switch(o.signature(arguments,[]),this._edge){case"top":return"top of page";case"right":return"right side of page";case"bottom":return"bottom of page";case"left":return"left side of page";default:o.unreachable()}}},{"../q_frame.js":19,"../util/ensure.js":23,"../values/position.js":27,"./position_descriptor.js":11}],11:[function(t,e,n){"use strict";function r(){return t("./relative_position.js")}function i(){return t("./absolute_position.js")}function o(){return t("./generic_size.js")}function s(t){return function(e){e._pdbc={dimension:t}}}var u=t("../util/ensure.js"),a=t("../util/oop.js"),c=t("./descriptor.js"),l=t("../values/position.js"),f=e.exports=function(t){u.signature(arguments,[String]),u.unreachable("PositionDescriptor is abstract and should not be constructed directly.")};c.extend(f),f.extend=a.extendFn(f),f.x=s("x"),f.y=s("y"),f.prototype.plus=function(t){return"x"===this._pdbc.dimension?r().right(this,t):r().down(this,t)},f.prototype.minus=function(t){return"x"===this._pdbc.dimension?r().left(this,t):r().up(this,t)},f.prototype.to=function(t){if(u.signature(arguments,[[f,Number]]),"number"==typeof t&&(t="x"===this._pdbc.dimension?i().x(t):i().y(t)),this._pdbc.dimension!==t._pdbc.dimension)throw new Error("Can only calculate distance between two X coordinates or two Y coordinates");return o().create(this,t,"distance from "+this+" to "+t)},f.prototype.convert=function(t,e){switch(e){case"number":return"x"===this._pdbc.dimension?l.x(t):l.y(t);case"string":return"none"===t?"x"===this._pdbc.dimension?l.noX():l.noY():void 0;default:return}}},{"../util/ensure.js":23,"../util/oop.js":24,"../values/position.js":27,"./absolute_position.js":3,"./descriptor.js":5,"./generic_size.js":9,"./relative_position.js":12}],12:[function(t,e,n){"use strict";function r(t,e){return function(n,r){return new c(t,e,n,r)}}var i=t("../util/ensure.js"),o=t("./descriptor.js"),s=t("./position_descriptor.js"),u=t("../values/value.js"),a=t("../values/size.js"),c=e.exports=function(t,e,n,r){i.signature(arguments,[String,Number,o,[Number,o,u]]),"x"===t?s.x(this):"y"===t?s.y(this):i.unreachable("Unknown dimension: "+t),this._dimension=t,this._direction=e,this._relativeTo=n,"number"==typeof r?(r<0&&(this._direction*=-1),this._amount=a.create(Math.abs(r))):this._amount=r};s.extend(c),c.right=r("x",1),c.down=r("y",1),c.left=r("x",-1),c.up=r("y",-1),c.prototype.value=function(){i.signature(arguments,[]);var t=this._relativeTo.value(),e=this._amount.value();return 1===this._direction?t.plus(e):t.minus(e)},c.prototype.toString=function(){i.signature(arguments,[]);var t=this._relativeTo.toString();if(this._amount.equals(a.create(0)))return t;var e=this._amount.toString();return"x"===this._dimension?e+=1===this._direction?" to right of ":" to left of ":e+=1===this._direction?" below ":" above ",e+t}},{"../util/ensure.js":23,"../values/size.js":29,"../values/value.js":30,"./descriptor.js":5,"./position_descriptor.js":11}],13:[function(t,e,n){"use strict";function r(t){return function(e,n){return new c(t,e,n)}}var i=t("../util/ensure.js"),o=t("../values/size.js"),s=t("./descriptor.js"),u=t("./size_descriptor.js"),a=t("../values/value.js"),c=(t("./size_multiple.js"),e.exports=function(t,e,n){i.signature(arguments,[Number,s,[Number,s,a]]),this._direction=t,this._relativeTo=e,"number"==typeof n?(this._amount=o.create(Math.abs(n)),n<0&&(this._direction*=-1)):this._amount=n});u.extend(c),c.larger=r(1),c.smaller=r(-1),c.prototype.value=function(){i.signature(arguments,[]);var t=this._relativeTo.value(),e=this._amount.value();return 1===this._direction?t.plus(e):t.minus(e)},c.prototype.toString=function(){i.signature(arguments,[]);var t=this._relativeTo.toString();if(this._amount.equals(o.create(0)))return t;var e=this._amount.toString();return 1===this._direction?e+=" larger than ":e+=" smaller than ",e+t}},{"../util/ensure.js":23,"../values/size.js":29,"../values/value.js":30,"./descriptor.js":5,"./size_descriptor.js":14,"./size_multiple.js":15}],14:[function(t,e,n){"use strict";function r(){return t("./relative_size.js")}function i(){return t("./size_multiple.js")}var o=t("../util/ensure.js"),s=t("../util/oop.js"),u=t("./descriptor.js"),a=t("../values/size.js"),c=e.exports=function(){o.unreachable("SizeDescriptor is abstract and should not be constructed directly.")};u.extend(c),c.extend=s.extendFn(c),c.prototype.plus=function(t){return r().larger(this,t)},c.prototype.minus=function(t){return r().smaller(this,t)},c.prototype.times=function(t){return i().create(this,t)},c.prototype.convert=function(t,e){switch(e){case"number":return a.create(t);case"string":return"none"===t?a.createNone():void 0;default:return}}},{"../util/ensure.js":23,"../util/oop.js":24,"../values/size.js":29,"./descriptor.js":5,"./relative_size.js":13,"./size_multiple.js":15}],15:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("./descriptor.js"),o=t("./size_descriptor.js"),s=(t("../values/size.js"),e.exports=function(t,e){r.signature(arguments,[i,Number]),this._relativeTo=t,this._multiple=e});o.extend(s),s.create=function(t,e){return new s(t,e)},s.prototype.value=function(){return r.signature(arguments,[]),this._relativeTo.value().times(this._multiple)},s.prototype.toString=function(){r.signature(arguments,[]);var t=this._multiple,e=this._relativeTo.toString();if(1===t)return e;var n;switch(t){case.5:n="half of ";break;case 1/3:n="one-third of ";break;case 2/3:n="two-thirds of ";break;case.25:n="one-quarter of ";break;case.75:n="three-quarters of ";break;case.2:n="one-fifth of ";break;case.4:n="two-fifths of ";break;case.6:n="three-fifths of ";break;case.8:n="four-fifths of ";break;case 1/6:n="one-sixth of ";break;case 5/6:n="five-sixths of ";break;case 1/8:n="one-eighth of ";break;case 3/8:n="three-eighths of ";break;case 5/8:n="five-eighths of ";break;case 7/8:n="seven-eighths of ";break;default:n=t>1?t+" times ":100*t+"% of "}return n+e}},{"../util/ensure.js":23,"../values/size.js":29,"./descriptor.js":5,"./size_descriptor.js":14}],16:[function(t,e,n){"use strict";function r(t){return function(e){return new a(t,e)}}function i(t){return{width:t.clientWidth,height:t.clientHeight}}var o=t("../util/ensure.js"),s=t("./position_descriptor.js"),u=t("../values/position.js"),a=e.exports=function(e,n){var r=t("../q_frame.js");o.signature(arguments,[String,r]),"left"===e||"right"===e?s.x(this):"top"===e||"bottom"===e?s.y(this):o.unreachable("Unknown position: "+e),this._position=e,this._frame=n};s.extend(a),a.top=r("top"),a.right=r("right"),a.bottom=r("bottom"),a.left=r("left"),a.prototype.value=function(){o.signature(arguments,[]);var t=this._frame.getRawScrollPosition(),e=u.x(t.x),n=u.y(t.y),r=i(this._frame.get("html").toDomElement());switch(this._position){case"top":return n;case"right":return e.plus(u.x(r.width));case"bottom":return n.plus(u.y(r.height));case"left":return e;default:o.unreachable()}},a.prototype.toString=function(){return o.signature(arguments,[]),this._position+" edge of viewport"}},{"../q_frame.js":19,"../util/ensure.js":23,"../values/position.js":27,"./position_descriptor.js":11}],17:[function(t,e,n){"use strict";var r=t("./util/ensure.js"),i=t("./util/shim.js"),o=t("../vendor/camelcase-1.0.1-modified.js"),s=t("./descriptors/element_rendered.js"),u=t("./descriptors/element_edge.js"),a=t("./descriptors/center.js"),c=t("./descriptors/generic_size.js"),l=t("./assertable.js"),f=e.exports=function(e,n,i){var o=t("./q_frame.js");r.signature(arguments,[Object,o,String]),this._domElement=e,this._nickname=i,this.frame=n,this.rendered=s.create(this),this.top=u.top(this),this.right=u.right(this),this.bottom=u.bottom(this),this.left=u.left(this),this.center=a.x(this.left,this.right,"center of "+this),this.middle=a.y(this.top,this.bottom,"middle of "+this),this.width=c.create(this.left,this.right,"width of "+this),this.height=c.create(this.top,this.bottom,"height of "+this)};l.extend(f),f.prototype.getRawStyle=function(t){r.signature(arguments,[String]);var e;return null!==(e=window.getComputedStyle?this.frame.toDomElement().contentWindow.getComputedStyle(this._domElement).getPropertyValue(t):this._domElement.currentStyle[o(t)])&&void 0!==e||(e=""),e},f.prototype.getRawPosition=function(){r.signature(arguments,[]);var t=this._domElement.getBoundingClientRect();return{left:t.left,right:t.right,width:void 0!==t.width?t.width:t.right-t.left,top:t.top,bottom:t.bottom,height:void 0!==t.height?t.height:t.bottom-t.top}},f.prototype.calculatePixelValue=function(t){var e=this._domElement;if(void 0!==e.runtimeStyle)return function(){var r=e.runtimeStyle.left,i=e.style.left;return e.runtimeStyle.left=e.currentStyle.left,e.style.left=t,n=e.style.pixelLeft,e.runtimeStyle.left=r,e.style.left=i,n}();var n,r=e.style,i=r.position,o=r.left;return r.position="absolute",r.left=t,n=parseFloat(this.getRawStyle("left")),r.position=i,r.left=o,n},f.prototype.parent=function(t){if(r.signature(arguments,[[void 0,String]]),void 0===t&&(t="parent of "+this._nickname),this.equals(this.frame.body()))return null;var e=this._domElement.parentElement;return null===e?null:new f(e,this.frame,t)},f.prototype.add=function(t,e){r.signature(arguments,[String,[void 0,String]]),void 0===e&&(e=t+" in "+this._nickname);var n=document.createElement("div");n.innerHTML=i.String.trim(t),r.that(1===n.childNodes.length,"Expected one element, but got "+n.childNodes.length+" ("+t+")");var o=n.childNodes[0];return this._domElement.appendChild(o),new f(o,this.frame,e)},f.prototype.remove=function(){r.signature(arguments,[]),i.Element.remove(this._domElement)},f.prototype.toDomElement=function(){return r.signature(arguments,[]),this._domElement},f.prototype.toString=function(){return r.signature(arguments,[]),"'"+this._nickname+"'"},f.prototype.equals=function(t){return r.signature(arguments,[f]),this._domElement===t._domElement}},{"../vendor/camelcase-1.0.1-modified.js":32,"./assertable.js":2,"./descriptors/center.js":4,"./descriptors/element_edge.js":6,"./descriptors/element_rendered.js":7,"./descriptors/generic_size.js":9,"./q_frame.js":19,"./util/ensure.js":23,"./util/shim.js":25}],18:[function(t,e,n){"use strict";var r=t("./util/ensure.js"),i=t("./q_element.js"),o=e.exports=function(e,n,i){var o=t("./q_frame.js");r.signature(arguments,[Object,o,String]),this._nodeList=e,this._frame=n,this._nickname=i};o.prototype.length=function(){return r.signature(arguments,[]),this._nodeList.length},o.prototype.at=function(t,e){r.signature(arguments,[Number,[void 0,String]]);var n=t,o=this.length();n<0&&(n=o+n),r.that(n>=0&&n<o,"'"+this._nickname+"'["+t+"] is out of bounds; list length is "+o);var s=this._nodeList[n];return void 0===e&&(e=this._nickname+"["+n+"]"),new i(s,this._frame,e)},o.prototype.toString=function(){return r.signature(arguments,[]),"'"+this._nickname+"' list"}},{"./q_element.js":17,"./q_frame.js":19,"./util/ensure.js":23}],19:[function(t,e,n){"use strict";function r(t,e,n,r,i){t._loaded=!0,t._document=t._domElement.contentDocument,t._originalBody=t._document.body.innerHTML,t._originalWidth=e,t._originalHeight=n,t._originalSrc=r,t._originalStylesheets=i}function i(t,e){t._frameLoadCallback=e}function o(t,e){function n(t,e){return new Error("404 error while loading "+t+" ("+e+")")}if(!s(t))return n("src",t);for(var r=0;r<e.length;r++){var i=e[r];if(!s(i))return n("stylesheet",i)}return null}function s(t){if(void 0===t)return!0;var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),404!==e.status}function u(t,e,n){var r=document.createElement("iframe");return r.setAttribute("width",e),r.setAttribute("height",n),r.setAttribute("frameborder","0"),t.appendChild(r),r}function a(t,e){void 0===e?l(t):c(t,e)}function c(t,e){t.setAttribute("src",e)}function l(t){t.contentWindow.document.open(),t.contentWindow.document.write("<!DOCTYPE html>\n<html><head></head><body></body></html>"),t.contentWindow.document.close()}function f(t,e,n){w.each(e,function(e,n){var r=document.createElement("link");g.EventTarget.addEventListener(r,"load",function(t){n(null)}),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",e),g.Document.head(t._document).appendChild(r)},n)}function p(t,e){var n=document.createElement("style");n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=e:n.innerHTML=e,g.Document.head(t._document).appendChild(n)}function h(t){d(t),m(t)}function d(t){v.that(t._loaded,"QFrame not loaded: Wait for frame creation callback to execute before using frame")}function m(t){v.that(!t._removed,"Attempted to use frame after it was removed")}var v=t("./util/ensure.js"),g=t("./util/shim.js"),y=(t("./quixote.js"),t("./q_element.js")),_=t("./q_element_list.js"),b=t("./q_viewport.js"),j=t("./q_page.js"),w=t("../vendor/async-1.4.2.js"),x=e.exports=function(t){v.signature(arguments,[Object]),v.that("IFRAME"===t.tagName,"QFrame DOM element must be an iframe"),this._domElement=t,this._loaded=!1,this._removed=!1};x.create=function(t,e,n){v.signature(arguments,[Object,[Object,Function],[void 0,Function]]),void 0===n&&(n=e,e={});var s=e.width||2e3,c=e.height||2e3,l=e.src,h=e.stylesheet||[],d=e.css;g.Array.isArray(h)||(h=[h]);var m=o(l,h);if(m)return n(m);var y=u(t,s,c);g.EventTarget.addEventListener(y,"load",function(){setTimeout(function(){r(_,s,c,l,h),f(_,h,function(){d&&p(_,e.css),_._frameLoadCallback(null,_)})},0)}),a(y,l);var _=new x(y);return i(_,n),_},x.prototype.reset=function(){v.signature(arguments,[]),h(this),this._document.body.innerHTML=this._originalBody,this.scroll(0,0),this.resize(this._originalWidth,this._originalHeight)},x.prototype.reload=function(t){v.signature(arguments,[Function]),h(this);var e=this,n=this._domElement,r=this._originalSrc;this.resize(this._originalWidth,this._originalHeight),i(e,t),a(n,r)},x.prototype.toDomElement=function(){return v.signature(arguments,[]),m(this),this._domElement},x.prototype.remove=function(){v.signature(arguments,[]),d(this),this._removed||(this._domElement.parentNode.removeChild(this._domElement),this._removed=!0)},x.prototype.viewport=function(){return v.signature(arguments,[]),h(this),new b(this)},x.prototype.page=function(){return v.signature(arguments,[]),h(this),new j(this)},x.prototype.body=function(){return v.signature(arguments,[]),this.get("body")},x.prototype.add=function(t,e){return v.signature(arguments,[String,[void 0,String]]),void 0===e&&(e=t),this.body().add(t,e)},x.prototype.get=function(t,e){v.signature(arguments,[String,[void 0,String]]),void 0===e&&(e=t),h(this);var n=this._document.querySelectorAll(t);return v.that(1===n.length,"Expected one element to match '"+t+"', but found "+n.length),new y(n[0],this,e)},x.prototype.getAll=function(t,e){return v.signature(arguments,[String,[void 0,String]]),void 0===e&&(e=t),new _(this._document.querySelectorAll(t),this,e)},x.prototype.scroll=function(t,e){v.signature(arguments,[Number,Number]),this._domElement.contentWindow.scroll(t,e)},x.prototype.getRawScrollPosition=function(){return v.signature(arguments,[]),{x:g.Window.pageXOffset(this._domElement.contentWindow,this._document),y:g.Window.pageYOffset(this._domElement.contentWindow,this._document)}},x.prototype.resize=function(t,e){v.signature(arguments,[Number,Number]),this._domElement.setAttribute("width",""+t),this._domElement.setAttribute("height",""+e)}},{"../vendor/async-1.4.2.js":31,"./q_element.js":17,"./q_element_list.js":18,"./q_page.js":20,"./q_viewport.js":21,"./quixote.js":22,"./util/ensure.js":23,"./util/shim.js":25}],20:[function(t,e,n){"use strict";var r=t("./util/ensure.js"),i=t("./descriptors/page_edge.js"),o=t("./descriptors/center.js"),s=t("./assertable.js"),u=t("./descriptors/generic_size.js"),a=e.exports=function(e){var n=t("./q_frame.js");r.signature(arguments,[n]),this.top=i.top(e),this.right=i.right(e),this.bottom=i.bottom(e),this.left=i.left(e),this.width=u.create(this.left,this.right,"width of page"),this.height=u.create(this.top,this.bottom,"height of page"),this.center=o.x(this.left,this.right,"center of page"),this.middle=o.y(this.top,this.bottom,"middle of page")};s.extend(a)},{"./assertable.js":2,"./descriptors/center.js":4,"./descriptors/generic_size.js":9,"./descriptors/page_edge.js":10,"./q_frame.js":19,"./util/ensure.js":23}],21:[function(t,e,n){"use strict";var r=t("./util/ensure.js"),i=t("./descriptors/viewport_edge.js"),o=t("./descriptors/center.js"),s=t("./assertable.js"),u=t("./descriptors/generic_size.js"),a=e.exports=function(e){var n=t("./q_frame.js");r.signature(arguments,[n]),this.top=i.top(e),this.right=i.right(e),this.bottom=i.bottom(e),this.left=i.left(e),this.width=u.create(this.left,this.right,"width of viewport"),this.height=u.create(this.top,this.bottom,"height of viewport"),this.center=o.x(this.left,this.right,"center of viewport"),this.middle=o.y(this.top,this.bottom,"middle of viewport")};s.extend(a)},{"./assertable.js":2,"./descriptors/center.js":4,"./descriptors/generic_size.js":9,"./descriptors/viewport_edge.js":16,"./q_frame.js":19,"./util/ensure.js":23}],22:[function(t,e,n){"use strict";function r(t){return function(){return l.signature(arguments,[]),l.that(null!==h,"Must create a frame before using Quixote browser feature detection."),h[t]}}function i(t){h={};var e=f.create(document.body,{width:1500,height:200},function(n){if(n)return console.log("Error while creating Quixote browser feature detection frame: "+n),t();try{h.enlargesFrame=o(e,1500),h.misreportsClipAuto=u(e),h.misreportsClipValues=a(e),h.roundsOffPixelCalculations=c(e),e.reset(),s(e,1500,function(n){return h.enlargesFonts=n,e.remove(),t()})}catch(t){console.log("Error during Quixote browser feature detection: "+t)}})}function o(t,e){return t.add("<div style='width: "+(e+200)+"px'>force scrolling</div>"),!t.viewport().width.value().equals(p.create(e))}function s(t,e,n){l.that(e>=1500,"Detector frame width must be larger than screen to detect font enlargement"),t.add("<div><style>p { font-size: 15px; }</style></div>");var r=t.add("<p>arbitrary text</p>");t.add("<p>must have two p tags to work</p>");r.offsetHeight;setTimeout(function(){var t=r.getRawStyle("font-size");return l.that(""!==t,"Expected font-size to be a value"),n("12pt"===t?!1:"15px"!==t)},0)}function u(t){return"auto"!==t.add("<div style='clip: auto;'></div>").getRawStyle("clip")}function a(t){var e=t.add("<div style='clip: rect(auto, auto, auto, auto);'></div>"),n=e.getRawStyle("clip");return(""!==n||"auto"!==e.getRawStyle("clip-top"))&&("rect(auto, auto, auto, auto)"!==n&&"rect(auto auto auto auto)"!==n)}function c(t){var e=t.add("<div style='font-size: 15px;'></div>").calculatePixelValue("0.5em");return 7.5!==e&&(8===e||void l.unreachable("Failure in roundsOffPixelValues() detection: expected 7.5 or 8, but got "+e))}var l=t("./util/ensure.js"),f=t("./q_frame.js"),p=t("./values/size.js"),h=null;n.createFrame=function(t,e){return f.create(document.body,t,function(t,n){null===h?i(function(){e(t,n)}):e(t,n)})},n.browser={},n.browser.enlargesFrameToPageSize=r("enlargesFrame"),n.browser.enlargesFonts=r("enlargesFonts"),n.browser.misreportsClipAutoProperty=r("misreportsClipAuto"),n.browser.misreportsAutoValuesInClipProperty=r("misreportsClipValues"),n.browser.roundsOffPixelCalculations=r("roundsOffPixelCalculations")},{"./q_frame.js":19,"./util/ensure.js":23,"./values/size.js":29}],23:[function(t,e,n){"use strict";function r(t,e){for(var r=0;r<e.length;r++)if(function(t,e){switch(s(t)){case"boolean":return e===Boolean;case"string":return e===String;case"number":return e===Number;case"array":return e===Array;case"function":return e===Function;case"object":return e===Object||t instanceof e;case"undefined":return void 0===e;case"null":return null===e;case"NaN":return"number"==typeof e&&isNaN(e);default:n.unreachable()}}(t,e[r]))return!0;return!1}function i(t){for(var e="",n="",r=0;r<t.length;r++)n+=e+function(t){switch(t){case Boolean:return"boolean";case String:return"string";case Number:return"number";case Array:return"array";case Function:return"function";case null:return"null";case void 0:return"undefined";default:return"number"==typeof t&&isNaN(t)?"NaN":a.className(t)+" instance"}}(t[r]),e=r===t.length-2?", or ":", ";return n}function o(t){var e=s(t);return"object"!==e?e:a.instanceName(t)+" instance"}function s(t){var e=typeof t;return null===t&&(e="null"),u.Array.isArray(t)&&(e="array"),"number"===e&&isNaN(t)&&(e="NaN"),e}var u=t("./shim.js"),a=t("./oop.js");n.that=function(t,e){if(void 0===e&&(e="Expected condition to be true"),!1===t)throw new c(n.that,e);if(!0!==t)throw new c(n.that,"Expected condition to be true or false")},n.unreachable=function(t){throw t||(t="Unreachable code executed"),new c(n.unreachable,t)},n.signature=function(t,e){var s=(e=e||[]).length,a=t.length;if(a>s)throw new c(n.signature,"Function called with too many arguments: expected "+s+" but got "+a);for(var l,f,p,h=0;h<e.length;h++)if(l=t[h],f=e[h],p="Argument #"+(h+1),u.Array.isArray(f)||(f=[f]),!r(l,f)){var d=p+" expected "+i(f)+", but was "+o(l);throw new c(n.signature,d)}};var c=n.EnsureException=function(t,e){Error.captureStackTrace?Error.captureStackTrace(this,t):this.stack=(new Error).stack,this.message=e};c.prototype=u.Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.name="EnsureException"},{"./oop.js":24,"./shim.js":25}],24:[function(t,e,n){"use strict";var r=t("./shim.js");n.className=function(t){if("function"!=typeof t)throw new Error("Not a constructor");return r.Function.name(t)},n.instanceName=function(t){var e=r.Object.getPrototypeOf(t);if(null===e)return"<no prototype>";var n=e.constructor;return void 0===n||null===n?"<anon>":r.Function.name(n)},n.extendFn=function(t){return function(e){e.prototype=r.Object.create(t.prototype),e.prototype.constructor=e}},n.makeAbstract=function(t,e){var n=r.Function.name(t);r.Array.forEach(e,function(e){t.prototype[e]=function(){throw new Error(n+" subclasses must implement "+e+"() method")}}),t.prototype.checkAbstractMethods=function(){var n=[],i=this;return r.Array.forEach(e,function(e){i[e]===t.prototype[e]&&n.push(e+"()")}),n}}},{"./shim.js":25}],25:[function(t,e,n){"use strict";n.Array={isArray:function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},every:function(t,e,n){if(Array.prototype.every)return t.every(e,n);var r,i;if(null==this)throw new TypeError("this is null or not defined");var o=Object(this),s=o.length>>>0;if("function"!=typeof e)throw new TypeError;for(arguments.length>1&&(r=n),i=0;i<s;){var u;if(i in o&&(u=o[i],!e.call(r,u,i,o)))return!1;i++}return!0},forEach:function(t,e,n){if(Array.prototype.forEach)return t.forEach(e,n);var r,i;if(null==t)throw new TypeError(" this is null or not defined");var o=Object(t),s=o.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(r=n),i=0;i<s;){var u;i in o&&(u=o[i],e.call(r,u,i,o)),i++}}},n.Document={head:function(t){return t.head?t.head:t.querySelector("head")}},n.Element={remove:function(t){t.parentNode.removeChild(t)}},n.EventTarget={addEventListener:function(t,e,n){if(t.addEventListener)return t.addEventListener(e,n);t.attachEvent("on"+e,n)}},n.Function={name:function(t){if(t.name)return t.name;var e=/function\s+(.{1,})\s*\(/.exec(t.toString());return e&&e.length>1?e[1]:"<anon>"}},n.Object={create:function(t){if(Object.create)return Object.create(t);var e=function(){};return e.prototype=t,new e},getPrototypeOf:function(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):(t.constructor?t.constructor.prototype:null)||null},keys:function(t){if(Object.keys)return Object.keys(t);var e=Object.prototype.hasOwnProperty,n=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=r.length;if("object"!=typeof t&&("function"!=typeof t||null===t))throw new TypeError("Object.keys called on non-object");var o,s,u=[];for(o in t)e.call(t,o)&&u.push(o);if(n)for(s=0;s<i;s++)e.call(t,r[s])&&u.push(r[s]);return u}},n.String={trim:function(t){return void 0!==t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},n.Window={pageXOffset:function(t,e){return void 0!==t.pageXOffset?t.pageXOffset:"CSS1Compat"===(e.compatMode||"")?e.documentElement.scrollLeft:e.body.scrollLeft},pageYOffset:function(t,e){return void 0!==t.pageYOffset?t.pageYOffset:"CSS1Compat"===(e.compatMode||"")?e.documentElement.scrollTop:e.body.scrollTop}}},{}],26:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("./value.js"),o=e.exports=function(t){r.signature(arguments,[[Number,null]]),this._none=null===t,this._amount=t};i.extend(o),o.create=function(t){return new o(t)},o.createNone=function(){return new o(null)},o.ZERO=o.create(0),o.NONE=o.createNone(),o.prototype.compatibility=function(){return[o]},o.prototype.plus=i.safe(function(t){return this._none||t._none?o.createNone():new o(this._amount+t._amount)}),o.prototype.minus=i.safe(function(t){return this._none||t._none?o.createNone():new o(this._amount-t._amount)}),o.prototype.difference=i.safe(function(t){return this._none||t._none?o.createNone():new o(Math.abs(this._amount-t._amount))}),o.prototype.times=function(t){return r.signature(arguments,[Number]),this._none?o.createNone():new o(this._amount*t)},o.prototype.average=i.safe(function(t){return this._none||t._none?o.createNone():new o((this._amount+t._amount)/2)}),o.prototype.compare=i.safe(function(t){var e=!this._none&&!t._none,n=this._none&&t._none,r=!this._none&&t._none;if(e){var i=this._amount-t._amount;return Math.abs(i)<=.5?0:i}return n?0:r?1:-1}),o.min=function(t,e){return r.signature(arguments,[o,o]),t._none||e._none?o.createNone():t.compare(e)<=0?t:e},o.max=function(t,e){return r.signature(arguments,[o,o]),t._none||e._none?o.createNone():t.compare(e)>=0?t:e},o.prototype.diff=i.safe(function(t){if(0===this.compare(t))return"";if(this._none||t._none)return"non-measurable";var e=Math.abs(this._amount-t._amount),n=e;return 100*e!==Math.floor(100*e)&&(n="about "+e.toFixed(2)),n+"px"}),o.prototype.toString=function(){return r.signature(arguments,[]),this._none?"no pixels":this._amount+"px"}},{"../util/ensure.js":23,"./value.js":30}],27:[function(t,e,n){"use strict";function r(t,e){e instanceof c&&o.that(t._dimension===e._dimension,"Can't compare X coordinate to Y coordinate")}function i(t){return t._value.equals(u.NONE)}var o=t("../util/ensure.js"),s=t("./value.js"),u=t("./pixels.js"),a=t("./size.js"),c=e.exports=function(t,e){o.signature(arguments,[String,[Number,u]]),this._dimension=t,this._value="number"==typeof e?u.create(e):e};s.extend(c),c.x=function(t){return o.signature(arguments,[[Number,u]]),new c("x",t)},c.y=function(t){return o.signature(arguments,[[Number,u]]),new c("y",t)},c.noX=function(){return o.signature(arguments,[]),new c("x",u.NONE)},c.noY=function(){return o.signature(arguments,[]),new c("y",u.NONE)},c.prototype.compatibility=function(){return[c,a]},c.prototype.distanceTo=function(t){return o.signature(arguments,[c]),r(this,t),a.create(this._value.difference(t.toPixels()))},c.prototype.plus=s.safe(function(t){return r(this,t),new c(this._dimension,this._value.plus(t.toPixels()))}),c.prototype.minus=s.safe(function(t){return r(this,t),new c(this._dimension,this._value.minus(t.toPixels()))}),c.prototype.midpoint=s.safe(function(t){return r(this,t),new c(this._dimension,this._value.average(t.toPixels()))}),c.prototype.compare=s.safe(function(t){return r(this,t),this._value.compare(t.toPixels())}),c.prototype.min=s.safe(function(t){return r(this,t),new c(this._dimension,u.min(this._value,t.toPixels()))}),c.prototype.max=s.safe(function(t){return r(this,t),new c(this._dimension,u.max(this._value,t.toPixels()))}),c.prototype.diff=s.safe(function(t){o.signature(arguments,[c]),r(this,t);var e=this._value,n=t._value;if(e.equals(n))return"";if(i(t)&&!i(this))return"rendered when not expected";if(!i(t)&&i(this))return"not rendered";var s,u=e.compare(n);return s="x"===this._dimension?u<0?"further left than expected":"further right than expected":u<0?"higher than expected":"lower than expected",e.diff(n)+" "+s}),c.prototype.toString=function(){return o.signature(arguments,[]),i(this)?"not rendered":this._value.toString()},c.prototype.toPixels=function(){return o.signature(arguments,[]),this._value}},{"../util/ensure.js":23,"./pixels.js":26,"./size.js":29,"./value.js":30}],28:[function(t,e,n){"use strict";var r=t("../util/ensure.js"),i=t("./value.js"),o=e.exports=function(t){r.signature(arguments,[String]),this._state=t};i.extend(o),o.rendered=function(){return new o("rendered")},o.notRendered=function(){return new o("not rendered")},o.prototype.compatibility=function(){return[o]},o.prototype.diff=i.safe(function(t){return this._state===t._state?"":"different than expected"}),o.prototype.toString=function(){return this._state}},{"../util/ensure.js":23,"./value.js":30}],29:[function(t,e,n){"use strict";function r(t){return t._value.equals(s.NONE)}var i=t("../util/ensure.js"),o=t("./value.js"),s=t("./pixels.js"),u=e.exports=function(t){i.signature(arguments,[[Number,s]]),this._value="number"==typeof t?s.create(t):t};o.extend(u),u.create=function(t){return new u(t)},u.createNone=function(){return i.signature(arguments,[]),new u(s.NONE)},u.prototype.compatibility=function(){return[u]},u.prototype.plus=o.safe(function(t){return new u(this._value.plus(t._value))}),u.prototype.minus=o.safe(function(t){return new u(this._value.minus(t._value))}),u.prototype.times=function(t){return new u(this._value.times(t))},u.prototype.compare=o.safe(function(t){return this._value.compare(t._value)}),u.prototype.diff=o.safe(function(t){var e=this._value,n=t._value;if(e.equals(n))return"";if(r(t)&&!r(this))return"rendered when not expected";if(!r(t)&&r(this))return"not rendered";var i=e.compare(n)>0?" larger than expected":" smaller than expected";return e.diff(n)+i}),u.prototype.toString=function(){return i.signature(arguments,[]),r(this)?"not rendered":this._value.toString()},u.prototype.toPixels=function(){return i.signature(arguments,[]),this._value}},{"../util/ensure.js":23,"./pixels.js":26,"./value.js":30}],30:[function(t,e,n){"use strict";function r(t,e,n){for(var r=0;r<n.length;r++)i(t,e,n[r])}function i(t,e,n){function r(e){throw new Error(s.instanceName(t)+" isn't compatible with "+e)}var i=typeof n;null===n&&(i="null"),"object"!==i&&r(i);for(var o=0;o<e.length;o++)if(n instanceof e[o])return;r(s.instanceName(n))}var o=t("../util/ensure.js"),s=t("../util/oop.js"),u=(t("../util/shim.js"),e.exports=function(){});u.extend=s.extendFn(u),s.makeAbstract(u,["compatibility","diff","toString"]),u.safe=function(t){return function(){return r(this,this.compatibility(),arguments),t.apply(this,arguments)}},u.prototype.value=function(){return o.signature(arguments,[]),this},u.prototype.equals=function(t){return""===this.diff(t)}},{"../util/ensure.js":23,"../util/oop.js":24,"../util/shim.js":25}],31:[function(t,e,n){(function(t,n){!function(){function r(){}function i(t){return t}function o(t){return!!t}function s(t){return!t}function u(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function a(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}function c(t){return M(t)||"number"==typeof t.length&&t.length>=0&&t.length%1==0}function l(t,e){return c(t)?f(t,e):m(t,e)}function f(t,e){for(var n=-1,r=t.length;++n<r;)e(t[n],n,t)}function p(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function h(t){return p(Array(t),function(t,e){return e})}function d(t,e,n){return f(t,function(t,r,i){n=e(n,t,r,i)}),n}function m(t,e){f(U(t),function(n){e(t[n],n)})}function v(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function g(t){var e,n,r=-1;return c(t)?(e=t.length,function(){return++r<e?r:null}):(n=U(t),e=n.length,function(){return++r<e?n[r]:null})}function y(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r)}}}function _(t){return function(e,n,r){return t(e,r)}}function b(t){return function(e,n,i){i=a(i||r);var o=g(e=e||[]);if(t<=0)return i(null);var s=!1,c=0,l=!1;!function r(){if(s&&c<=0)return i(null);for(;c<t&&!l;){var a=o();if(null===a)return s=!0,void(c<=0&&i(null));c+=1,n(e[a],a,u(function(t){c-=1,t?(i(t),l=!0):r()}))}}()}}function j(t){return function(e,n,r){return t(D.eachOf,e,n,r)}}function w(t){return function(e,n,r,i){return t(b(n),e,r,i)}}function x(t){return function(e,n,r){return t(D.eachOfSeries,e,n,r)}}function S(t,e,n,i){i=a(i||r);var o=[];t(e,function(t,e,r){n(t,function(t,n){o[e]=n,r(t)})},function(t){i(t,o)})}function E(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(n){n&&i.push({index:e,value:t}),r()})},function(){r(p(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function k(t,e,n,r){E(t,e,function(t,e){n(t,function(t){e(!t)})},r)}function O(t,e,n){return function(r,i,o,s){function u(){s&&s(n(!1,void 0))}function a(t,r,i){if(!s)return i();o(t,function(r){s&&e(r)&&(s(n(!0,t)),s=o=!1),i()})}arguments.length>3?t(r,i,a,u):(s=o,o=i,t(r,a,u))}}function N(t,e){return e}function q(t,e,n){n=n||r;var i=c(e)?[]:{};t(e,function(t,e,n){t(y(function(t,r){r.length<=1&&(r=r[0]),i[e]=r,n(t)}))},function(t){n(t,i)})}function A(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(t,e){i=i.concat(e||[]),r(t)})},function(t){r(t,i)})}function T(t,e,n){function i(t,e,n,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(t.started=!0,M(e)||(e=[e]),0===e.length&&t.idle())return D.setImmediate(function(){t.drain()});f(e,function(e){var o={data:e,callback:i||r};n?t.tasks.unshift(o):t.tasks.push(o),t.tasks.length===t.concurrency&&t.saturated()}),D.setImmediate(t.process)}function o(t,e){return function(){s-=1;var n=arguments;f(e,function(t){t.callback.apply(t,n)}),t.tasks.length+s===0&&t.drain(),t.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var s=0,a={tasks:[],concurrency:e,payload:n,saturated:r,empty:r,drain:r,started:!1,paused:!1,push:function(t,e){i(a,t,!1,e)},kill:function(){a.drain=r,a.tasks=[]},unshift:function(t,e){i(a,t,!0,e)},process:function(){if(!a.paused&&s<a.concurrency&&a.tasks.length)for(;s<a.concurrency&&a.tasks.length;){var e=a.payload?a.tasks.splice(0,a.payload):a.tasks.splice(0,a.tasks.length),n=p(e,function(t){return t.data});0===a.tasks.length&&a.empty(),s+=1;var r=u(o(a,e));t(n,r)}},length:function(){return a.tasks.length},running:function(){return s},idle:function(){return a.tasks.length+s===0},pause:function(){a.paused=!0},resume:function(){if(!1!==a.paused){a.paused=!1;for(var t=Math.min(a.concurrency,a.tasks.length),e=1;e<=t;e++)D.setImmediate(a.process)}}};return a}function z(t){return y(function(e,n){e.apply(null,n.concat([y(function(e,n){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&f(n,function(e){console[t](e)}))})]))})}function C(t){return function(e,n,r){t(h(e),n,r)}}function L(t){return y(function(e,n){var r=y(function(n){var r=this,i=n.pop();return t(e,function(t,e,i){t.apply(r,n.concat([i]))},i)});return n.length?r.apply(this,n):r})}function P(t){return y(function(e){var n=e.pop();e.push(function(){var t=arguments;r?D.setImmediate(function(){n.apply(null,t)}):n.apply(null,t)});var r=!0;t.apply(this,e),r=!1})}var F,D={},R="object"==typeof self&&self.self===self&&self||"object"==typeof n&&n.global===n&&n||this;null!=R&&(F=R.async),D.noConflict=function(){return R.async=F,D};var I=Object.prototype.toString,M=Array.isArray||function(t){return"[object Array]"===I.call(t)},W=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},U=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},H="function"==typeof setImmediate&&setImmediate,Y=H?function(t){H(t)}:function(t){setTimeout(t,0)};"object"==typeof t&&"function"==typeof t.nextTick?D.nextTick=t.nextTick:D.nextTick=Y,D.setImmediate=H?Y:D.nextTick,D.forEach=D.each=function(t,e,n){return D.eachOf(t,_(e),n)},D.forEachSeries=D.eachSeries=function(t,e,n){return D.eachOfSeries(t,_(e),n)},D.forEachLimit=D.eachLimit=function(t,e,n,r){return b(e)(t,_(n),r)},D.forEachOf=D.eachOf=function(t,e,n){function i(t){t?n(t):(s+=1)>=o&&n(null)}n=a(n||r);var o=c(t=t||[])?t.length:U(t).length,s=0;if(!o)return n(null);l(t,function(n,r){e(t[r],r,u(i))})},D.forEachOfSeries=D.eachOfSeries=function(t,e,n){function i(){var r=!0;if(null===s)return n(null);e(t[s],s,u(function(t){if(t)n(t);else{if(null===(s=o()))return n(null);r?D.setImmediate(i):i()}})),r=!1}n=a(n||r);var o=g(t=t||[]),s=o();i()},D.forEachOfLimit=D.eachOfLimit=function(t,e,n,r){b(e)(t,n,r)},D.map=j(S),D.mapSeries=x(S),D.mapLimit=w(S),D.inject=D.foldl=D.reduce=function(t,e,n,r){D.eachOfSeries(t,function(t,r,i){n(e,t,function(t,n){e=n,i(t)})},function(t){r(t||null,e)})},D.foldr=D.reduceRight=function(t,e,n,r){var o=p(t,i).reverse();D.reduce(o,e,n,r)},D.select=D.filter=j(E),D.selectLimit=D.filterLimit=w(E),D.selectSeries=D.filterSeries=x(E),D.reject=j(k),D.rejectLimit=w(k),D.rejectSeries=x(k),D.any=D.some=O(D.eachOf,o,i),D.someLimit=O(D.eachOfLimit,o,i),D.all=D.every=O(D.eachOf,s,s),D.everyLimit=O(D.eachOfLimit,s,s),D.detect=O(D.eachOf,i,N),D.detectSeries=O(D.eachOfSeries,i,N),D.detectLimit=O(D.eachOfLimit,i,N),D.sortBy=function(t,e,n){function r(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:n>r?1:0}D.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){if(t)return n(t);n(null,p(e.sort(r),function(t){return t.value}))})},D.auto=function(t,e){function n(t){l.unshift(t)}function i(t){var e=v(l,t);e>=0&&l.splice(e,1)}function o(){u--,f(l.slice(0),function(t){t()})}e=a(e||r);var s=U(t),u=s.length;if(!u)return e(null);var c={},l=[];n(function(){u||e(null,c)}),f(s,function(r){function s(){return d(p,function(t,e){return t&&c.hasOwnProperty(e)},!0)&&!c.hasOwnProperty(r)}function u(){s()&&(i(u),l[l.length-1](f,c))}for(var a,l=M(t[r])?t[r]:[t[r]],f=y(function(t,n){if(n.length<=1&&(n=n[0]),t){var i={};m(c,function(t,e){i[e]=t}),i[r]=n,e(t,i)}else c[r]=n,D.setImmediate(o)}),p=l.slice(0,l.length-1),h=p.length;h--;){if(!(a=t[p[h]]))throw new Error("Has inexistant dependency");if(M(a)&&v(a,r)>=0)throw new Error("Has cyclic dependencies")}s()?l[l.length-1](f,c):n(u)})},D.retry=function(t,e,n){function r(t,e){for(;u.times;){var n=!(u.times-=1);s.push(function(t,n){return function(r){t(function(t,e){r(!t||n,{err:t,result:e})},e)}}(u.task,n)),!n&&u.interval>0&&s.push(function(t){return function(e){setTimeout(function(){e(null)},t)}}(u.interval))}D.series(s,function(e,n){n=n[n.length-1],(t||u.callback)(n.err,n.result)})}var i=5,o=0,s=[],u={times:i,interval:o},a=arguments.length;if(a<1||a>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return a<=2&&"function"==typeof t&&(n=e,e=t),"function"!=typeof t&&function(t,e){if("number"==typeof e)t.times=parseInt(e,10)||i;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||i,t.interval=parseInt(e.interval,10)||o}}(u,t),u.callback=n,u.task=e,u.callback?r():r},D.waterfall=function(t,e){function n(t){return y(function(r,i){if(r)e.apply(null,[r].concat(i));else{var o=t.next();o?i.push(n(o)):i.push(e),P(t).apply(null,i)}})}if(e=a(e||r),!M(t)){var i=new Error("First argument to waterfall must be an array of functions");return e(i)}if(!t.length)return e();n(D.iterator(t))()},D.parallel=function(t,e){q(D.eachOf,t,e)},D.parallelLimit=function(t,e,n){q(b(e),t,n)},D.series=function(t,e){q(D.eachOfSeries,t,e)},D.iterator=function(t){function e(n){function r(){return t.length&&t[n].apply(null,arguments),r.next()}return r.next=function(){return n<t.length-1?e(n+1):null},r}return e(0)},D.apply=y(function(t,e){return y(function(n){return t.apply(null,e.concat(n))})}),D.concat=j(A),D.concatSeries=x(A),D.whilst=function(t,e,n){if(n=n||r,t()){var i=y(function(r,o){r?n(r):t.apply(this,o)?e(i):n(null)});e(i)}else n(null)},D.doWhilst=function(t,e,n){var r=0;return D.whilst(function(){return++r<=1||e.apply(this,arguments)},t,n)},D.until=function(t,e,n){return D.whilst(function(){return!t.apply(this,arguments)},e,n)},D.doUntil=function(t,e,n){return D.doWhilst(t,function(){return!e.apply(this,arguments)},n)},D.during=function(t,e,n){n=n||r;var i=y(function(e,r){e?n(e):(r.push(o),t.apply(this,r))}),o=function(t,r){t?n(t):r?e(i):n(null)};t(o)},D.doDuring=function(t,e,n){var r=0;D.during(function(t){r++<1?t(null,!0):e.apply(this,arguments)},t,n)},D.queue=function(t,e){return T(function(e,n){t(e[0],n)},e,1)},D.priorityQueue=function(t,e){function n(t,e){return t.priority-e.priority}function i(t,e,n){for(var r=-1,i=t.length-1;r<i;){var o=r+(i-r+1>>>1);n(e,t[o])>=0?r=o:i=o-1}return r}function o(t,e,o,s){if(null!=s&&"function"!=typeof s)throw new Error("task callback must be a function");if(t.started=!0,M(e)||(e=[e]),0===e.length)return D.setImmediate(function(){t.drain()});f(e,function(e){var u={data:e,priority:o,callback:"function"==typeof s?s:r};t.tasks.splice(i(t.tasks,u,n)+1,0,u),t.tasks.length===t.concurrency&&t.saturated(),D.setImmediate(t.process)})}var s=D.queue(t,e);return s.push=function(t,e,n){o(s,t,e,n)},delete s.unshift,s},D.cargo=function(t,e){return T(t,1,e)},D.log=z("log"),D.dir=z("dir"),D.memoize=function(t,e){var n={},r={};e=e||i;var o=y(function(i){var o=i.pop(),s=e.apply(null,i);s in n?D.setImmediate(function(){o.apply(null,n[s])}):s in r?r[s].push(o):(r[s]=[o],t.apply(null,i.concat([y(function(t){n[s]=t;var e=r[s];delete r[s];for(var i=0,o=e.length;i<o;i++)e[i].apply(null,t)})])))});return o.memo=n,o.unmemoized=t,o},D.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},D.times=C(D.map),D.timesSeries=C(D.mapSeries),D.timesLimit=function(t,e,n,r){return D.mapLimit(h(t),e,n,r)},D.seq=function(){var t=arguments;return y(function(e){var n=this,i=e[e.length-1];"function"==typeof i?e.pop():i=r,D.reduce(t,e,function(t,e,r){e.apply(n,t.concat([y(function(t,e){r(t,e)})]))},function(t,e){i.apply(n,[t].concat(e))})})},D.compose=function(){return D.seq.apply(null,Array.prototype.reverse.call(arguments))},D.applyEach=L(D.eachOf),D.applyEachSeries=L(D.eachOfSeries),D.forever=function(t,e){function n(t){if(t)return i(t);o(n)}var i=u(e||r),o=P(t);n()},D.ensureAsync=P,D.constant=y(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),D.wrapSync=D.asyncify=function(t){return y(function(e){var n,r=e.pop();try{n=t.apply(this,e)}catch(t){return r(t)}W(n)&&"function"==typeof n.then?n.then(function(t){r(null,t)}).catch(function(t){r(t.message?t:new Error(t))}):r(null,n)})},"object"==typeof e&&e.exports?e.exports=D:R.async=D}()}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:1}],32:[function(t,e,n){"use strict";e.exports=function(t){return 1===t.length?t:t.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(t,e){return e.toUpperCase()})}},{}]},{},[22])(22)});