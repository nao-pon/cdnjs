!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).parser=e()}}(function(){return function e(t,r,n){function o(a,f){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!f&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var d=r[a]={exports:{}};t[a][0].call(d.exports,function(e){var r=t[a][1][e];return o(r||e)},d,d.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){var n=e("./util").getAllMatches,o=function(e,t,r){this.tagname=e,this.parent=t,this.child=[],this.val=r,this.addChild=function(e){this.child.push(e)}},i="<!\\[CDATA\\[(.*?)(\\]\\]>)",a=new RegExp("<(\\/?[\\w:\\-._]+)([^>]*)>("+i+")*([^<]+)?","g"),f={attrPrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreNonTextNodeAttr:!0,ignoreTextNodeAttr:!0,ignoreNameSpace:!1,ignoreRootElement:!1,textNodeConversion:!0,textAttrConversion:!1,arrayMode:!1},l=function(e){e||(e={});for(var t=["attrPrefix","attrNodeName","ignoreNonTextNodeAttr","ignoreTextNodeAttr","ignoreNameSpace","ignoreRootElement","textNodeName","textNodeConversion","textAttrConversion","arrayMode"],r=0;r<t.length;r++)void 0===e[t[r]]&&(e[t[r]]=f[t[r]]);return e},u=function(e,t){t=l(t);for(var r=n(e,a),i=new o("!xml"),f=i,u=0;u<r.length;u++){var d,v=g(r[u][1],t.ignoreNameSpace),p=u+1<r.length?g(r[u+1][1],t.ignoreNameSpace):void 0,x=r[u][2],N=void 0===r[u][4]?r[u][6]:s(r[u][0]);if(0!==v.indexOf("/")){var m="/"===x.charAt(x.length-1),w=new o(v,f);if(m)d=c(x,t.ignoreTextNodeAttr,t.attrPrefix,t.attrNodeName,t.ignoreNameSpace,t.textAttrConversion),w.val=d||"",f.addChild(w);else if("/"+v===p)d=c(x,t.ignoreTextNodeAttr,t.attrPrefix,t.attrNodeName,t.ignoreNameSpace,t.textAttrConversion),N=h(N,t.textNodeConversion),d?(d[t.textNodeName]=N,w.val=d):w.val=void 0!==N&&null!=N?N:"",f.addChild(w),u++;else if(p&&-1===p.indexOf("/")&&void 0!==N&&null!=N&&""!==N.trim())N=h(N,t.textNodeConversion),w.addChild(new o(t.textNodeName,w,N)),f.addChild(w),f=w;else{if(d=c(x,t.ignoreNonTextNodeAttr,t.attrPrefix,t.attrNodeName,t.ignoreNameSpace,t.textAttrConversion))for(var A in d)d.hasOwnProperty(A)&&w.addChild(new o(A,w,d[A]));f.addChild(w),f=w}}else f=f.parent}return i},d=new RegExp(i,"g");function s(e){for(var t=n(e,d),r="",o=0;o<t.length;o++)r+=t[o][1];return r}function g(e,t){if(t){var r=e.split(":"),n="/"===e.charAt(0)?"/":"";2===r.length&&(e=n+r[1])}return e}function h(e,t){return e=e?!t||isNaN(e)?""+e:-1!==e.indexOf(".")?parseFloat?parseFloat(e):Number.parseFloat(e):parseInt?parseInt(e,10):Number.parseInt(e,10):""}var v=new RegExp("([\\w\\-\\.\\:]+)\\s*=\\s*(['\"])(.*?)\\2","g");function c(e,t,r,o,i,a){if(e=e||e.trim(),!t&&e.length>3){var f=n(e,v),l={},u=l;o&&f.length&&(u=l[o]={});for(var d=0;d<f.length;d++){u[r+g(f[d][1],i)]=h(f[d][3],a)}return l}}var p=function(e,t){var r={};if(void 0!==e.val&&null!=e.val||""===e.val)return e.val;for(var n=0;n<e.child.length;n++){var o=e.child[n].tagname,i=p(e.child[n],t);if(void 0!==r[o]){if(!Array.isArray(r[o])){var a=r[o];r[o]=[],r[o].push(a)}r[o].push(i)}else r[o]=t?[i]:i}return r};r.parse=function(e,t){return p(u(e,t),l(t).arrayMode)},r.getTraversalObj=u,r.convertToJson=p,r.validate=e("./validator").validate},{"./util":2,"./validator":3}],2:[function(e,t,r){var n=function(e,t){var r=t.exec(e);return null!==r&&void 0!==r};r.doesMatch=n,r.doesNotMatch=function(e,t){return!n(e,t)},r.getAllMatches=function(e,t){for(var r=[],n=t.exec(e);n;){for(var o=[],i=0;i<n.length;i++)o.push(n[i]);r.push(o),n=t.exec(e)}return r}},{}],3:[function(e,t,r){var n=e("./util");new RegExp("<\\/?([\\w:\\-_.]+)\\s*/?>","g");function o(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}function i(e){for(var t,r=[],o=0;o<e.length;o++){for(var i="",f="";o<e.length&&"="!==e[o];o++)f+=e[o];if(f=f.trim(),r.hasOwnProperty(f))return!1;if(r[f]=1,t=f,!n.doesMatch(t,a))return!1;for(o++;o<e.length&&(" "===e[o]||"\t"===e[o]);o++);i=e[o++];for(;o<e.length&&e[o]!==i;o++)e[o];""!==i&&(i="")}return!0}r.validate=function(e){e=(e=(e=e.replace(/\n/g,"")).replace(/(^\s*<\?xml.*?\?>)/g,"")).replace(/(<!DOCTYPE[\s\w\"\.\/\-\:]+(\[.*\])*\s*>)/g,"");for(var t=[],r=0;r<e.length;r++){if("<"!==e[r]){if(" "===e[r]||"\t"===e[r])continue;return!1}if("!"!==e[++r]){var n=!1;"/"===e[r]&&(n=!0,r++);for(var a="";r<e.length&&">"!==e[r]&&" "!==e[r]&&"\t"!==e[r];r++)a+=e[r];if("/"===(a=a.trim())[a.length-1])return u(a=a.substring(0,a.length-2));if(!u(a))return!1;for(var f="",l="";r<e.length;r++){if('"'===e[r]||"'"===e[r])l=""===l?e[r]:"";else if(">"===e[r]&&""===l)break;f+=e[r]}if(""!==l)return!1;if("/"===(f=f.trim())[f.length-1]){if(i(f=f.substring(0,f.length-2)))continue;return!1}if(n){if(f.length>0)return!1;if(a!==t.pop())return!1}else{if(!i(f))return!1;t.push(a)}for(r++;r<e.length;r++)if("<"===e[r]){if("!"===e[r+1]){r=o(e,++r);continue}break}"<"===e[r]&&r--}else r=o(e,r)}return!(t.length>0)};var a=new RegExp("^[_a-zA-Z][\\w\\-\\.\\:]*$");var f=new RegExp("^[Xx][Mm][Ll]"),l=new RegExp("^([a-zA-Z]|_)[\\w.\\-_:]*");function u(e){return!n.doesMatch(e,f)&&!n.doesNotMatch(e,l)}},{"./util":2}]},{},[1])(1)});