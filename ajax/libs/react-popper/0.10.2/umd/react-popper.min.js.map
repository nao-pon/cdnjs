{"version":3,"file":"react-popper.min.js","sources":["../../src/Manager.js","../../src/Target.js","../../src/Popper.js","../../src/Arrow.js"],"sourcesContent":["import { Component, createElement } from 'react'\nimport PropTypes from 'prop-types'\n\nclass Manager extends Component {\n  static childContextTypes = {\n    popperManager: PropTypes.object.isRequired,\n  }\n\n  static propTypes = {\n    tag: PropTypes.oneOfType([PropTypes.string, PropTypes.bool]),\n    children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  }\n\n  static defaultProps = {\n    tag: 'div',\n  }\n\n  getChildContext() {\n    return {\n      popperManager: {\n        setTargetNode: this._setTargetNode,\n        getTargetNode: this._getTargetNode,\n      },\n    }\n  }\n\n  _setTargetNode = node => {\n    this._targetNode = node\n  }\n\n  _getTargetNode = () => {\n    return this._targetNode\n  }\n\n  render() {\n    const { tag, children, ...restProps } = this.props\n    if (tag !== false) {\n      return createElement(tag, restProps, children)\n    } else {\n      return children\n    }\n  }\n}\n\nexport default Manager\n","import { createElement } from 'react'\nimport PropTypes from 'prop-types'\n\nconst Target = (props, context) => {\n  const { component = 'div', innerRef, children, ...restProps } = props\n  const { popperManager } = context\n  const targetRef = node => {\n    popperManager.setTargetNode(node)\n    if (typeof innerRef === 'function') {\n      innerRef(node)\n    }\n  }\n\n  if (typeof children === 'function') {\n    const targetProps = { ref: targetRef }\n    return children({ targetProps, restProps })\n  }\n\n  const componentProps = {\n    ...restProps,\n  }\n\n  if (typeof component === 'string') {\n    componentProps.ref = targetRef\n  } else {\n    componentProps.innerRef = targetRef\n  }\n\n  return createElement(component, componentProps, children)\n}\n\nTarget.contextTypes = {\n  popperManager: PropTypes.object.isRequired,\n}\n\nTarget.propTypes = {\n  component: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  innerRef: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n}\n\nexport default Target\n","import { Component, createElement } from 'react'\nimport PropTypes from 'prop-types'\nimport PopperJS from 'popper.js'\n\nexport const placements = PopperJS.placements\n\nclass Popper extends Component {\n  static contextTypes = {\n    popperManager: PropTypes.object,\n  }\n\n  static childContextTypes = {\n    popper: PropTypes.object.isRequired,\n  }\n\n  static propTypes = {\n    component: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    innerRef: PropTypes.func,\n    placement: PropTypes.oneOf(placements),\n    eventsEnabled: PropTypes.bool,\n    positionFixed: PropTypes.bool,\n    modifiers: PropTypes.object,\n    children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n    target: PropTypes.oneOfType([\n      // the following check is needed for SSR\n      PropTypes.instanceOf(typeof Element !== 'undefined' ? Element : Object),\n      PropTypes.shape({\n        getBoundingClientRect: PropTypes.func.isRequired,\n        clientWidth: PropTypes.number.isRequired,\n        clientHeight: PropTypes.number.isRequired,\n      }),\n    ]),\n  }\n\n  static defaultProps = {\n    component: 'div',\n    placement: 'bottom',\n    eventsEnabled: true,\n    positionFixed: false,\n    modifiers: {},\n  }\n\n  state = {}\n\n  getChildContext() {\n    return {\n      popper: {\n        setArrowNode: this._setArrowNode,\n        getArrowStyle: this._getArrowStyle,\n      },\n    }\n  }\n\n  componentDidUpdate(lastProps) {\n    if (\n      lastProps.placement !== this.props.placement ||\n      lastProps.eventsEnabled !== this.props.eventsEnabled ||\n      lastProps.target !== this.props.target\n    ) {\n      this._destroyPopper()\n      this._createPopper()\n    }\n    if (lastProps.children !== this.props.children) {\n      this._scheduleUpdate()\n    }\n  }\n\n  componentWillUnmount() {\n    this._destroyPopper()\n  }\n\n  _setArrowNode = node => {\n    this._arrowNode = node\n  }\n\n  _getTargetNode = () => {\n    if (this.props.target) {\n      return this.props.target\n    } else if (\n      !this.context.popperManager ||\n      !this.context.popperManager.getTargetNode()\n    ) {\n      throw new Error(\n        'Target missing. Popper must be given a target from the Popper Manager, or as a prop.',\n      )\n    }\n    return this.context.popperManager.getTargetNode()\n  }\n\n  _getOffsets = data => {\n    return Object.keys(data.offsets).map(key => data.offsets[key])\n  }\n\n  _isDataDirty = data => {\n    if (this.state.data) {\n      return (\n        JSON.stringify(this._getOffsets(this.state.data)) !==\n        JSON.stringify(this._getOffsets(data))\n      )\n    } else {\n      return true\n    }\n  }\n\n  _updateStateModifier = {\n    enabled: true,\n    order: 900,\n    fn: data => {\n      if (this._isDataDirty(data)) {\n        this.setState({ data })\n      }\n      return data\n    },\n  }\n\n  _createPopper() {\n    const { placement, eventsEnabled, positionFixed } = this.props\n    const modifiers = {\n      ...this.props.modifiers,\n      applyStyle: { enabled: false },\n      updateState: this._updateStateModifier,\n    }\n    if (this._arrowNode) {\n      modifiers.arrow = {\n        ...(this.props.modifiers.arrow || {}),\n        element: this._arrowNode,\n      }\n    }\n    this._popper = new PopperJS(this._getTargetNode(), this._popperNode, {\n      placement,\n      positionFixed,\n      eventsEnabled,\n      modifiers,\n    })\n\n    // TODO: look into setTimeout scheduleUpdate call, without it, the popper will not position properly on creation\n    setTimeout(() => this._scheduleUpdate())\n  }\n\n  _destroyPopper() {\n    if (this._popper) {\n      this._popper.destroy()\n    }\n  }\n\n  _getPopperStyle = () => {\n    const { data } = this.state\n\n    if (!this._popper || !data) {\n      return {\n        position: 'absolute',\n        pointerEvents: 'none',\n        opacity: 0,\n      }\n    }\n\n    return {\n      position: data.offsets.popper.position,\n      ...data.styles,\n    }\n  }\n\n  _getPopperPlacement = () => {\n    return this.state.data ? this.state.data.placement : undefined\n  }\n\n  _getPopperHide = () => {\n    return !!this.state.data && this.state.data.hide ? '' : undefined\n  }\n\n  _getArrowStyle = () => {\n    if (!this.state.data || !this.state.data.offsets.arrow) {\n      return {}\n    } else {\n      const { top, left } = this.state.data.offsets.arrow\n      return { top, left }\n    }\n  }\n\n  _handlePopperRef = node => {\n    this._popperNode = node\n    if (node) {\n      this._createPopper()\n    } else {\n      this._destroyPopper()\n    }\n    if (this.props.innerRef) {\n      this.props.innerRef(node)\n    }\n  }\n\n  _scheduleUpdate = () => {\n    this._popper && this._popper.scheduleUpdate()\n  }\n\n  render() {\n    const {\n      component,\n      innerRef,\n      placement,\n      eventsEnabled,\n      positionFixed,\n      modifiers,\n      children,\n      ...restProps\n    } = this.props\n    const popperStyle = this._getPopperStyle()\n    const popperPlacement = this._getPopperPlacement()\n    const popperHide = this._getPopperHide()\n\n    if (typeof children === 'function') {\n      const popperProps = {\n        ref: this._handlePopperRef,\n        style: popperStyle,\n        'data-placement': popperPlacement,\n        'data-x-out-of-boundaries': popperHide,\n      }\n      return children({\n        popperProps,\n        restProps,\n        scheduleUpdate: this._scheduleUpdate,\n      })\n    }\n\n    const componentProps = {\n      ...restProps,\n      style: {\n        ...restProps.style,\n        ...popperStyle,\n      },\n      'data-placement': popperPlacement,\n      'data-x-out-of-boundaries': popperHide,\n    }\n\n    if (typeof component === 'string') {\n      componentProps.ref = this._handlePopperRef\n    } else {\n      componentProps.innerRef = this._handlePopperRef\n    }\n\n    return createElement(component, componentProps, children)\n  }\n}\n\nexport default Popper\n","import { createElement } from 'react'\nimport PropTypes from 'prop-types'\n\nconst Arrow = (props, context) => {\n  const { component = 'span', innerRef, children, ...restProps } = props\n  const { popper } = context\n  const arrowRef = node => {\n    popper.setArrowNode(node)\n    if (typeof innerRef === 'function') {\n      innerRef(node)\n    }\n  }\n  const arrowStyle = popper.getArrowStyle()\n\n  if (typeof children === 'function') {\n    const arrowProps = {\n      ref: arrowRef,\n      style: arrowStyle,\n    }\n    return children({ arrowProps, restProps })\n  }\n\n  const componentProps = {\n    ...restProps,\n    style: {\n      ...arrowStyle,\n      ...restProps.style,\n    },\n  }\n\n  if (typeof component === 'string') {\n    componentProps.ref = arrowRef\n  } else {\n    componentProps.innerRef = arrowRef\n  }\n\n  return createElement(component, componentProps, children)\n}\n\nArrow.contextTypes = {\n  popper: PropTypes.object.isRequired,\n}\n\nArrow.propTypes = {\n  component: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n  innerRef: PropTypes.func,\n  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),\n}\n\nexport default Arrow\n"],"names":["Manager","_setTargetNode","_targetNode","_getTargetNode","props","tag","children","restProps","createElement","Component","childContextTypes","PropTypes","object","isRequired","defaultProps","Target","component","innerRef","popperManager","context","targetRef","setTargetNode","targetProps","ref","componentProps","contextTypes","propTypes","oneOfType","node","func","placements","PopperJS","Popper","state","_setArrowNode","_arrowNode","target","getTargetNode","Error","_getOffsets","Object","keys","data","offsets","map","_isDataDirty","JSON","stringify","_updateStateModifier","setState","_getPopperStyle","_popper","popper","position","styles","_getPopperPlacement","placement","_getPopperHide","hide","_getArrowStyle","arrow","top","left","_handlePopperRef","_popperNode","_createPopper","_destroyPopper","_scheduleUpdate","scheduleUpdate","lastProps","eventsEnabled","positionFixed","modifiers","enabled","destroy","popperStyle","popperPlacement","popperHide","popperProps","style","Arrow","arrowRef","setArrowNode","arrowStyle","getArrowStyle","arrowProps"],"mappings":"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"}