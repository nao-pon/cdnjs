"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var react=require("react"),PropTypes=_interopDefault(require("prop-types")),PopperJS=_interopDefault(require("popper.js")),classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}}(),_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},objectWithoutProperties=function(e,t){var r={};for(var o in e)0<=t.indexOf(o)||Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o]);return r},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Manager=function(e){function s(){var e,t,r;classCallCheck(this,s);for(var o=arguments.length,n=Array(o),p=0;p<o;p++)n[p]=arguments[p];return(t=r=possibleConstructorReturn(this,(e=s.__proto__||Object.getPrototypeOf(s)).call.apply(e,[this].concat(n))))._setTargetNode=function(e){r._targetNode=e},r._getTargetNode=function(){return r._targetNode},possibleConstructorReturn(r,t)}return inherits(s,e),createClass(s,[{key:"getChildContext",value:function(){return{popperManager:{setTargetNode:this._setTargetNode,getTargetNode:this._getTargetNode}}}},{key:"render",value:function(){var e=this.props,t=e.tag,r=e.children,o=objectWithoutProperties(e,["tag","children"]);return!1!==t?react.createElement(t,o,r):r}}]),s}(react.Component);Manager.childContextTypes={popperManager:PropTypes.object.isRequired},Manager.defaultProps={tag:"div"},Manager.propTypes="production"!==process.env.NODE_ENV?{tag:PropTypes.oneOfType([PropTypes.string,PropTypes.bool]),children:PropTypes.oneOfType([PropTypes.node,PropTypes.func])}:{};var Target=function(e,t){var r=e.component,o=void 0===r?"div":r,n=e.innerRef,p=e.children,s=objectWithoutProperties(e,["component","innerRef","children"]),a=t.popperManager,i=function(e){a.setTargetNode(e),"function"==typeof n&&n(e)};if("function"==typeof p)return p({targetProps:{ref:i},restProps:s});var c=_extends({},s);return"string"==typeof o?c.ref=i:c.innerRef=i,react.createElement(o,c,p)};Target.contextTypes={popperManager:PropTypes.object.isRequired},Target.propTypes={component:PropTypes.oneOfType([PropTypes.node,PropTypes.func]),innerRef:PropTypes.func,children:PropTypes.oneOfType([PropTypes.node,PropTypes.func])};var Popper=function(e){function s(){var e,t,r;classCallCheck(this,s);for(var o=arguments.length,n=Array(o),p=0;p<o;p++)n[p]=arguments[p];return(t=r=possibleConstructorReturn(this,(e=s.__proto__||Object.getPrototypeOf(s)).call.apply(e,[this].concat(n)))).state={},r._setArrowNode=function(e){r._arrowNode=e},r._getTargetNode=function(){if(r.props.target)return r.props.target;if(!r.context.popperManager||!r.context.popperManager.getTargetNode())throw new Error("Target missing. Popper must be given a target from the Popper Manager, or as a prop.");return r.context.popperManager.getTargetNode()},r._getOffsets=function(t){return Object.keys(t.offsets).map(function(e){return t.offsets[e]})},r._isDataDirty=function(e){return!r.state.data||JSON.stringify(r._getOffsets(r.state.data))!==JSON.stringify(r._getOffsets(e))},r._updateStateModifier={enabled:!0,order:900,fn:function(e){return r._isDataDirty(e)&&r.setState({data:e}),e}},r._getPopperStyle=function(){var e=r.state.data;return r._popper&&e?_extends({position:e.offsets.popper.position},e.styles):{position:"absolute",pointerEvents:"none",opacity:0}},r._getPopperPlacement=function(){return r.state.data?r.state.data.placement:void 0},r._getPopperHide=function(){return r.state.data&&r.state.data.hide?"":void 0},r._getArrowStyle=function(){if(r.state.data&&r.state.data.offsets.arrow){var e=r.state.data.offsets.arrow;return{top:e.top,left:e.left}}return{}},r._handlePopperRef=function(e){(r._popperNode=e)?r._createPopper():r._destroyPopper(),r.props.innerRef&&r.props.innerRef(e)},r._scheduleUpdate=function(){r._popper&&r._popper.scheduleUpdate()},possibleConstructorReturn(r,t)}return inherits(s,e),createClass(s,[{key:"getChildContext",value:function(){return{popper:{setArrowNode:this._setArrowNode,getArrowStyle:this._getArrowStyle}}}},{key:"componentDidUpdate",value:function(e){e.placement===this.props.placement&&e.eventsEnabled===this.props.eventsEnabled&&e.target===this.props.target||(this._destroyPopper(),this._createPopper()),e.children!==this.props.children&&this._scheduleUpdate()}},{key:"componentWillUnmount",value:function(){this._destroyPopper()}},{key:"_createPopper",value:function(){var e=this,t=this.props,r=t.placement,o=t.eventsEnabled,n=_extends({},this.props.modifiers,{applyStyle:{enabled:!1},updateState:this._updateStateModifier});this._arrowNode&&(n.arrow={element:this._arrowNode}),this._popper=new PopperJS(this._getTargetNode(),this._popperNode,{placement:r,eventsEnabled:o,modifiers:n}),setTimeout(function(){return e._scheduleUpdate()})}},{key:"_destroyPopper",value:function(){this._popper&&this._popper.destroy()}},{key:"render",value:function(){var e=this.props,t=e.component,r=(e.innerRef,e.placement,e.eventsEnabled,e.modifiers,e.children),o=objectWithoutProperties(e,["component","innerRef","placement","eventsEnabled","modifiers","children"]),n=this._getPopperStyle(),p=this._getPopperPlacement(),s=this._getPopperHide();if("function"==typeof r)return r({popperProps:{ref:this._handlePopperRef,style:n,"data-placement":p,"data-x-out-of-boundaries":s},restProps:o,scheduleUpdate:this._scheduleUpdate});var a=_extends({},o,{style:_extends({},o.style,n),"data-placement":p,"data-x-out-of-boundaries":s});return"string"==typeof t?a.ref=this._handlePopperRef:a.innerRef=this._handlePopperRef,react.createElement(t,a,r)}}]),s}(react.Component);Popper.contextTypes={popperManager:PropTypes.object},Popper.childContextTypes={popper:PropTypes.object.isRequired},Popper.defaultProps={component:"div",placement:"bottom",eventsEnabled:!0,modifiers:{}},Popper.propTypes="production"!==process.env.NODE_ENV?{component:PropTypes.oneOfType([PropTypes.node,PropTypes.func]),innerRef:PropTypes.func,placement:PropTypes.oneOf(PopperJS.placements),eventsEnabled:PropTypes.bool,modifiers:PropTypes.object,children:PropTypes.oneOfType([PropTypes.node,PropTypes.func]),target:PropTypes.oneOfType([PropTypes.instanceOf(Element),PropTypes.shape({getBoundingClientRect:PropTypes.func.isRequired,clientWidth:PropTypes.number.isRequired,clientHeight:PropTypes.number.isRequired})])}:{};var Arrow=function(e,t){var r=e.component,o=void 0===r?"span":r,n=e.innerRef,p=e.children,s=objectWithoutProperties(e,["component","innerRef","children"]),a=t.popper,i=function(e){a.setArrowNode(e),"function"==typeof n&&n(e)},c=a.getArrowStyle();if("function"==typeof p)return p({arrowProps:{ref:i,style:c},restProps:s});var f=_extends({},s,{style:_extends({},c,s.style)});return"string"==typeof o?f.ref=i:f.innerRef=i,react.createElement(o,f,p)};Arrow.contextTypes={popper:PropTypes.object.isRequired},Arrow.propTypes={component:PropTypes.oneOfType([PropTypes.node,PropTypes.func]),innerRef:PropTypes.func,children:PropTypes.oneOfType([PropTypes.node,PropTypes.func])},exports.Manager=Manager,exports.Target=Target,exports.Popper=Popper,exports.Arrow=Arrow;