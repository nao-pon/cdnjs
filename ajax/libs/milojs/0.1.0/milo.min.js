!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";function c(a,b){g(a,h.Optional(h.OneOf(Object,Function))),f.defineProperty(this,"_hostObject",a),b&&this._createProxyMethods(b),this.init&&this.init.apply(this,arguments)}function d(a,b,c){if(c=c||this._hostObject,c[a])throw new i("method "+a+" already defined in host object");g(this[b],Function);var d=this[b].bind(this);f.defineProperty(c,a,d,f.WRIT)}function e(a,b){g(a,h.Optional(h.OneOf([String],h.ObjectHash(String)))),Array.isArray(a)?a.forEach(function(a){d.call(this,a,a,b)},this):f.eachKey(a,function(a,c){d.call(this,c,a,b)},this)}var f=a("mol-proto"),g=a("../util/check"),h=g.Match,i=a("../util/error").Mixin;b.exports=c,f.extendProto(c,{_createProxyMethod:d,_createProxyMethods:e})},{"../util/check":72,"../util/error":76,"mol-proto":87}],2:[function(a,b){"use strict";function c(a,b){this.name=d.firstLowerCase(this.constructor.name),this.owner=a,this.config=b||{},this.init.apply(this,arguments)}var d=a("mol-proto");b.exports=c,d.extendProto(c,{init:function(){}})},{"mol-proto":87}],3:[function(a,b){"use strict";function c(){function a(a,c){var f=b[c];e[c]=new a(this,f),d[c]={enumerable:!0,value:e[c]}}var b=this.facetsConfig||{},d={},e={};if(this.constructor==c)throw new k("FacetedObject is an abstract class, can't be instantiated");this.facetsClasses&&h.eachKey(this.facetsClasses,a,this,!0),Object.defineProperties(this,d),h.defineProperty(this,"facets",e),this.init&&this.init.apply(this,arguments)}function d(a,b,c){i(a,Function),i(c,j.Optional(String)),c=h.firstLowerCase(c||a.name);var d=this.constructor.prototype.facetsClasses;if(d&&d[c])throw new k("facet "+c+" is already part of the class "+this.constructor.name);if(this[c])throw new k("facet "+c+" is already present in object");var e=this.facets[c]=new a(this,b);return h.defineProperty(this,c,e,h.ENUM),e}function e(a){var b=this.prototype.facetsClasses;return b&&b[a]}function f(a,b,c){function d(a,b,c){var d=a.prototype[c];return d?h(d).clone().extend(b)._():b}i(a,String),i(b,j.ObjectHash(j.Subclass(g,!0))),i(c,j.Optional(Object)),c&&h.eachKey(c,function(a,c){if(!b.hasOwnProperty(c))throw new k("configuration for facet ("+c+") passed that is not in class")});var e=h.createSubclass(this,a,!0);return b=d(this,b,"facetsClasses"),c=d(this,c,"facetsConfig"),h.extendProto(e,{facetsClasses:b,facetsConfig:c}),e}var g=a("./facet"),h=a("mol-proto"),i=a("../util/check"),j=i.Match,k=a("../util/error").Facet;b.exports=c,h.extend(c,{createFacetedClass:f,hasFacet:e}),h.extendProto(c,{addFacet:d})},{"../util/check":72,"../util/error":76,"./facet":2,"mol-proto":87}],4:[function(a,b){b.exports=a(1)},{"../util/check":72,"../util/error":76,"mol-proto":87}],5:[function(a,b){"use strict";function c(a){a&&this.setClass(a),this.__registeredClasses={}}function d(a,b){if(b=b||a.name,k(b,l.IdentifierString,"class name must be identifier string"),!this.FoundationClass)throw new j("foundation class must be set before adding classes to registry");if(a!=this.FoundationClass&&k(a,l.Subclass(this.FoundationClass),"class must be a sub(class) of a foundation class"),this.__registeredClasses[b])throw new j('class "'+b+'" is already registered');this.__registeredClasses[b]=a}function e(a){return k(a,String,"class name must be string"),this.__registeredClasses[a]}function f(a){k(a,l.OneOf(String,Function),"class or name must be supplied");var b="string"==typeof a?a:a.name;if(!this.__registeredClasses[b])throw new j("class is not registered");delete this.__registeredClasses[b]}function g(){this.__registeredClasses={}}function h(a){k(a,Function),i.defineProperty(this,"FoundationClass",a,i.ENUM)}var i=a("mol-proto"),j=a("../util/error").Registry,k=a("../util/check"),l=k.Match;b.exports=c,i.extendProto(c,{add:d,get:e,remove:f,clean:g,setClass:h})},{"../util/check":72,"../util/error":76,"mol-proto":87}],6:[function(a,b){"use strict";function c(){return i.attrs.bind}function d(){if(this.node){var a=this.get();if(a)var b=a.match(m);if(!b)throw new h("invalid bind attribute "+a);return this.compClass=b[1]||"Component",this.compFacets=b[2]&&b[2].split(n)||void 0,this.compName=b[3]||void 0,this}}function e(){if(k(this.compName,l.IdentifierString),!this.compClass)throw new h("empty component class name "+this.compClass);return this}function f(){return this.compName=this.compName||milo.util.componentName(),o.replace("%compClass",this.compClass||"").replace("%compFacets",this.compFacets&&this.compFacets.length?"["+this.compFacets.join(", ")+"]":"").replace("%compName",this.compName)}var g=a("./a_class"),h=a("../util/error").Attribute,i=a("../config"),j=a("mol-proto"),k=a("../util/check"),l=k.Match,m=/^([^\:\[\]]*)(?:\[([^\:\[\]]*)\])?\:?([^:]*)$/,n=/\s*(?:\,|\s)\s*/,o="%compClass%compFacets:%compName",p=j.createSubclass(g,"BindAttribute",!0);j.extendProto(p,{attrName:c,parse:d,validate:e,render:f}),b.exports=p},{"../config":48,"../util/check":72,"../util/error":76,"./a_class":7,"mol-proto":87}],7:[function(a,b){"use strict";function c(a,b){this.name=b||this.attrName(),this.el=a,this.node=a.attributes[this.name]}function d(){return this.el.getAttribute(this.name)}function e(a){this.el.setAttribute(this.name,a)}function f(){this.set(this.render())}var g=a("mol-proto"),h=a("../util/check"),i=(h.Match,a("../util/error").toBeImplemented);b.exports=c,g.extendProto(c,{get:d,set:e,decorate:f,attrName:i,parse:i,validate:i,render:i})},{"../util/check":72,"../util/error":76,"mol-proto":87}],8:[function(a,b){"use strict";function c(){return h.attrs.load}function d(){return this.node?(this.loadUrl=this.get(),this):void 0}function e(){return this}function f(){return this.loadUrl}var g=a("./a_class"),h=(a("../util/error").Attribute,a("../config")),i=a("mol-proto"),j=i.createSubclass(g,"LoadAttribute",!0);i.extendProto(j,{attrName:c,parse:d,validate:e,render:f}),b.exports=j},{"../config":48,"../util/error":76,"./a_class":7,"mol-proto":87}],9:[function(a,b){"use strict";b.exports={bind:a("./a_bind"),load:a("./a_load")}},{"./a_bind":6,"./a_load":8}],10:[function(a,b){"use strict";function c(a,b,c){return g(a,function(a,b,c){var d=new j(a,b,c);return i.create(d)},b,c)}function d(a,b,d){var e=c.scan(a,b,d);return c.create(e)}function e(a,b,c){return g(a,function(a,b,c){return new j(a,b,c)},b,c)}function f(a,b){var c=new k(a._rootEl,b);return a._each(function(a){var b=m.clone(a);b.scope=c;var d=i.create(b);c._add(d,d.name),d.container&&(d.container.scope=f(a.container.scope,d.container))}),c}function g(a,b,c,d){function e(a,c,d){function e(a){var b=i.getComponent(a);b&&b.postMessage("childrenbound")}var g=new l(c);if(g.node&&d!==!1)var h=b(a,c,g),j="undefined"!=typeof h&&h.container;if(c.childNodes&&c.childNodes.length){if(j){var m=new k(c);h.container.scope=m,m._hostObject=h.container}f(c,j?m:a)}return j&&!h.container.scope&&(h.container.scope=new k(c)),h&&a._add(h,g.compName),e(c),h}function f(a,b){var c=o.children(a);return m.forEach(c,function(a){e(b,a)}),b}var a=a||document.body,g=c||new k(a);return e(g,a,d),g}{var h=(a("./mail"),a("./components/c_registry")),i=(a("./components/c_facets/cf_registry"),h.get("Component")),j=a("./components/c_info"),k=a("./components/scope"),l=a("./attributes/a_bind"),m=(a("./util/error").Binder,a("mol-proto")),n=a("./util/check"),o=a("./util/dom");n.Match}c.scan=e,c.create=f,c.twoPass=d,b.exports=c},{"./attributes/a_bind":6,"./components/c_facets/cf_registry":26,"./components/c_info":27,"./components/c_registry":28,"./components/scope":36,"./mail":50,"./util/check":72,"./util/dom":75,"./util/error":76,"mol-proto":87}],11:[function(a,b){"use strict";var c={Facet:a("./abstract/facet"),FacetedObject:a("./abstract/faceted_object"),ClassRegistry:a("./abstract/registry"),Mixin:a("./abstract/Mixin"),MessageSource:a("./messenger/m_source"),MessengerAPI:a("./messenger/m_api"),DOMEventsSource:a("./components/msg_src/dom_events")};b.exports=c},{"./abstract/Mixin":1,"./abstract/facet":2,"./abstract/faceted_object":3,"./abstract/registry":5,"./components/msg_src/dom_events":34,"./messenger/m_api":54,"./messenger/m_source":56}],12:[function(a,b){"use strict";function c(a,b){var c={};if(Array.isArray(b)){var d={};b.forEach(function(a){var b=F.firstLowerCase(a);d[b]={}}),b=d}F.eachKey(b,function(a,b){var d=F.firstLowerCase(b),e=F.firstUpperCase(b);c[d]=B.get(e)});var e=A.createFacetedClass.call(this,a,c,b);return e}function d(a){var b=a.ComponentClass,c=new b(a.scope,a.el,a.name,a);return a.extraFacetsClasses&&F.eachKey(a.extraFacetsClasses,function(a){c.hasFacet(a)||c.addFacet(a)}),c}function e(a,b){if(G(a,Q),G(b,H.Optional(Boolean)),b&&!a.container)throw new M("Cannot deep copy component without container facet");var c=a.dom?a.dom.copy(b):a.el.cloneNode(b),d=a.constructor,e=d.createOnElement(c,void 0,a.scope,a.extraFacets);return e.setState(a._getState(b||!1)),e}function f(b,c,d,e){G(c,H.Optional(String)),G(d,H.Optional(O)),G(e,H.Optional([String]));var f=a("../binder");if(!b){var g=this.prototype.facetsConfig.dom,h=g&&g.tagName||"div";b=document.createElement(h)}if(!d){var i=Q.getContainingComponent(b,!1,"Container");d=i?i.container.scope:new O(b)}var j=new N(b);return j.compClass=this.name,j.compFacets=e,j.decorate(),c&&(b.innerHTML=c),f(b,d),d[j.compName]}function g(b,c,d){G(b,H.ObjectIncluding({compName:H.Optional(String),compClass:H.Optional(String),extraFacets:H.Optional([String]),facetsStates:H.Optional(Object),outerHTML:String}));var e=a("../binder"),f=h(b,d),g=e(f),i=g._any();return c&&(i.scope=c,c._add(i)),i.setState(b),i.walkScopeTree(function(a){F.defer(function(){a.postMessage("stateready")})}),i}function h(a,b){var c=document.createElement("div");c.innerHTML=a.outerHTML;var d=L.children(c);if(1!=d.length)throw new M("cannot create component: incorrect HTML, elements number: "+d.length+" (should be 1)");var e=d[0],f=new N(e);return f.compName=b?J():a.compName,f.compClass=a.compClass,f.compFacets=a.extraFacets,f.decorate(),c}function i(a){var b=F.find(a.types,function(a){return R.test(a)});if(b){var c=milo.util.jsonParse(a.getData(b));if(c)return Q.createFromState(c,void 0,!0)}}function j(a,b,c,d){if(this.el=b||this.initElement(),this.el){var e=this.el[I.componentRef];e&&K.warn("component "+c+" attached to element that already has component "+e.name),this.el[I.componentRef]=this}F.defineProperties(this,{componentInfo:d,extraFacets:[]},F.ENUM),this.name=c,this.scope=a;var f=new E(this,E.defaultMethods,void 0);F.defineProperty(this,"_messenger",f),this.allFacets("check"),this.allFacets("start")}function k(){return"undefined"!=typeof document?(this.dom?this.dom.newElement():this.el=document.createElement("DIV"),this.el):void 0}function l(a){var b=F.firstLowerCase("function"==typeof a?a.name:a),c=this[b];return!c instanceof C&&K.warn("expected facet",b,"but this property name is used for something else"),!!c}function m(a,b,c){if(G(a,H.OneOf(String,H.Subclass(C))),G(b,H.Optional(Object)),G(c,H.Optional(String)),"string"==typeof a)var d=F.firstUpperCase(a),e=B.get(d);else e=a;c=c||F.firstLowerCase(e.name),this.extraFacets.push(c);var f=A.prototype.addFacet.call(this,e,b,c);f.check&&f.check(),f.start&&f.start()}function n(a){var b=F.slice(arguments,1);return F.mapKeys(this.facets,function(c){return c&&"function"==typeof c[a]?c[a].apply(c,b):void 0})}function o(a){this.scope&&this.scope._remove(this.name,a)}function p(){var a=this._getState(!0);return a.outerHTML=this.el.outerHTML,a}function q(){return this.transfer?this.transfer.getState():this.getState()}function r(a){var b=this.allFacets("getState",a===!1?!1:!0);return b=F.filterKeys(b,function(a){return!!a}),{compName:this.name,compClass:this.constructor.name,extraFacets:this.extraFacets,facetsStates:b}}function s(a){a.facetsStates&&F.eachKey(a.facetsStates,function(a,b){var c=this[b];c&&"function"==typeof c.setState&&c.setState(a)},this)}function t(a){G(a,H.Optional(H.OneOf(Function,String)));var b=P(a);return u.call(this,b)}function u(a){var b=this.scope&&this.scope._hostObject,c=b&&b.owner;return c?!a||a(c)?c:u.call(c,a):void 0}function v(a){return a=a||this.constructor,u.call(this,function(b){return b instanceof a})}function w(a){G(a,H.Optional(H.OneOf(Function,String)));var b=P(a);return x.call(this,b)}function x(a){var b,c=this;do c=u.call(c,a),c&&(b=c);while(c);return b}function y(a){return a=a||this.constructor,x.call(this,function(b){return b instanceof a})}function z(a,b){a.call(b,this),this.container&&this.container.scope._each(function(c){c.walkScopeTree(a,b)})}var A=a("../abstract/faceted_object"),B=a("./c_facets/cf_registry"),C=B.get("ComponentFacet"),D=a("./c_utils"),E=a("../messenger"),F=a("mol-proto"),G=a("../util/check"),H=G.Match,I=a("../config"),J=a("../util/component_name"),K=a("../util/logger"),L=a("../util/dom"),M=a("../util/error").Component,N=a("../attributes/a_bind"),O=a("./scope"),P=D._makeComponentConditionFunc,Q=F.createSubclass(A,"Component",!0);b.exports=Q,F.extend(Q,{createComponentClass:c,create:d,copy:e,createOnElement:f,isComponent:D.isComponent,getComponent:D.getComponent,getContainingComponent:D.getContainingComponent,createFromState:g,createFromDataTransfer:i}),delete Q.createFacetedClass,F.extendProto(Q,{init:j,initElement:k,hasFacet:l,addFacet:m,allFacets:n,remove:o,getState:p,getTransferState:q,_getState:r,setState:s,getScopeParent:t,getTopScopeParent:w,getScopeParentWithClass:v,getTopScopeParentWithClass:y,walkScopeTree:z});var R=/x-application\/milo-component\/([a-z_$][0-9a-z_$]*)(?:\/())/i},{"../abstract/faceted_object":3,"../attributes/a_bind":6,"../binder":10,"../config":48,"../messenger":53,"../util/check":72,"../util/component_name":73,"../util/dom":75,"../util/error":76,"../util/logger":79,"./c_facets/cf_registry":26,"./c_utils":29,"./scope":36,"mol-proto":87}],13:[function(a,b){"use strict";function c(){this._createMessenger()}function d(){var a=new p(this,p.defaultMethods,void 0);s.defineProperties(this,{_messenger:a})}function e(){this.config.messages&&s.eachKey(this.config.messages,function(a,b){var c=typeof a;if("function"==c)this.on(b,a);else{if("object"!=c)throw new q("unknown subscriber type in configuration: "+c);var d=typeof a.context;if("object"==d)this.on(b,a);else{if("string"!=d)throw new q("unknown subscriber context type in configuration: "+d);if(a.context==this.name||"facet"==a.context)a={subscriber:a.subscriber,context:this};else{if("owner"!=a.context)throw new q("unknown subscriber context in configuration: "+a.context);a={subscriber:a.subscriber,context:this.owner}}this.on(b,a)}}},this)}function f(){this.require&&this.require.forEach(function(a){this.owner.hasFacet(a)||this.owner.addFacet(a)},this)}function g(){var a=r.getContainingComponent(this.owner.el,!1,this.name);return a&&a[this.name]}function h(){var a=this.owner.getScopeParent(this.name);return a&&a[this.name]}function i(a,b,c){var d=a.call(this);d&&d.postMessage(b,c)}function j(a){this._messenger._setMessageSource(a)}function k(){return this._messenger.getMessageSource()}function l(a,b){var c=new a(this,void 0,this.owner,b);this._setMessageSource(c),s.defineProperty(this,"_messageSource",c)}function m(a,b,c){var d=new a(this,void 0,b,this.owner,c);this._setMessageSource(d),s.defineProperty(this,"_messageSource",d)}function n(a){var b=this.prototype.require;return b&&(b.indexOf(s.firstUpperCase(a))>=0||b.indexOf(s.firstLowerCase(a))>=0)}var o=a("../abstract/facet"),p=a("../messenger"),q=a("../util/error").Facet,r=a("./c_utils"),s=a("mol-proto"),t=s.createSubclass(o,"ComponentFacet");b.exports=t;var u=s.partial(i,g),v=s.partial(i,h);s.extendProto(t,{init:c,start:e,check:f,domParent:g,postDomParent:u,scopeParent:h,postScopeParent:v,getMessageSource:k,_createMessenger:d,_setMessageSource:j,_createMessageSource:l,_createMessageSourceWithAPI:m}),s.extend(t,{requiresFacet:n})},{"../abstract/facet":2,"../messenger":53,"../util/error":76,"./c_utils":29,"mol-proto":87}],14:[function(a,b){"use strict";function c(){return h(this.owner.el,this.scope,!1)}function d(){g.prototype.start.apply(this,arguments),this.scope=new i(this.owner.el,this)}function e(a){var b={scope:{}};return a!==!1&&this.scope._each(function(a,c){b.scope[c]=a._getState()}),b}function f(a){j.eachKey(a.scope,function(a,b){var c=this.scope[b];c?c.setState(a):l.warn("component does not exist on scope")},this)}var g=a("../c_facet"),h=a("../../binder"),i=a("../scope"),j=a("mol-proto"),k=a("./cf_registry"),l=a("../../util/logger"),m=j.createSubclass(g,"Container");j.extendProto(m,{start:d,getState:e,setState:f,binder:c}),k.add(m),b.exports=m},{"../../binder":10,"../../util/logger":79,"../c_facet":13,"../scope":36,"./cf_registry":26,"mol-proto":87}],15:[function(a,b){"use strict";function c(){q.prototype.start.apply(this,arguments),this.elData=u(this.owner.el),w.initialize.call(this),this._prepareMessageSource(),this._path="."+this.owner.name,this._value=this.get(),v.wrapMessengerMethods.call(this),this.on("",e),this.on("childdata",f),this.on("changedata",w)}function d(){var a=new t(this.owner),b=new s(this,z,a,this.owner);this._setMessageSource(b),x.defineProperty(this,"_dataEventsSource",b),p.prototype._createProxyMethod.call(a,"value","value",this)}function e(a,b){this._postDataChanged(b)}function f(a,b){this.postMessage(b.path,b),this._postDataChanged(b)}function g(a){function b(a,b,c,d){var e=d.replace("$$",c),f=this.path(e,!0);f&&(a[c]=f.set(b))}var c=this.config.set;if("function"==typeof c)return c.call(this.owner,a);var d;if(null!=a&&"object"==typeof a){if(Array.isArray(a)){var e=this.owner.list;if(e){var f=a.length-e.count();f>=3&&e.addItems(f)}d=[],a.forEach(function(a,c){b.call(this,d,a,c,"[$$]")},this)}else d={},x.eachKey(a,function(a,c){b.call(this,d,a,c,".$$")},this);for(var e=this.owner.list,g=e&&e.count(),h=g-a.length;h-->0;)e.removeItem(a.length,!0)}else d=this._setScalarValue(a);var i=this._value;return this._value=d,this.postMessage("",{path:"",type:"changed",newValue:d,oldValue:i}),d}function h(){var a=this.config.del;if("function"==typeof a)return a.call(this.owner);var b=this.owner.item;b?b.removeItem():this.set()}function i(a){return this.elData.set(this.owner.el,a)}function j(a){var b=this.scopeParent();if(b){var c=x.clone(a);c.path=(this._path||"."+thisComp.name)+c.path,b.postMessage("childdata",c)}}function k(a){var b=this.config.get;if("function"==typeof b)return b.call(this.owner);if(a!==!1){var c,d=this.owner;return d.list?(c=[],d.list.each(function(a,b){c[b]=a.data.get()}),d.container&&d.container.scope._each(function(a,b){!d.list.contains(a)&&a.data&&(c[b]=a.data.get())})):d.container?(c={},d.container.scope._each(function(a,b){a.data&&(c[b]=a.data.get())})):c=this._getScalarValue(),this._value=c,c}}function l(){return this.elData.get(this.owner.el)}function m(a,b){b=!0;for(var c=v.parseAccessPath(a),d=this.owner,e=0,f=c.length;f>e;e++){var g=c[e],h=v.getPathNodeKey(g);if("array"==g.syntax&&d.list){var i=d.list.item(h);!i&&b&&(i=d.list.addItem(h),i.data._path=g.property),i&&(d=i)}else d.container&&(d=d.container.scope[h]);var j=d&&d.data;if(!j)break}return j}function n(a){return{state:this.get(a)}}function o(a){return this.set(a.state)}var p=a("../../abstract/mixin"),q=a("../c_facet"),r=a("./cf_registry"),s=(a("../../messenger"),a("../msg_src/dom_events")),t=a("../msg_api/data"),u=a("../msg_api/de_data"),v=a("../../model/path_utils"),w=(a("../../model/model_utils"),a("../../model/change_data")),x=a("mol-proto"),y=(a("../../util/logger"),x.createSubclass(q,"Data"));x.extendProto(y,{start:c,getState:n,setState:o,get:k,set:g,del:h,path:m,_setScalarValue:i,_getScalarValue:l,_postDataChanged:j,_prepareMessageSource:d}),r.add(y),b.exports=y;var z={trigger:"trigger"}},{"../../abstract/mixin":4,"../../messenger":53,"../../model/change_data":60,"../../model/model_utils":65,"../../model/path_utils":67,"../../util/logger":79,"../c_facet":13,"../msg_api/data":31,"../msg_api/de_data":32,"../msg_src/dom_events":34,"./cf_registry":26,"mol-proto":87}],16:[function(a,b){"use strict";function c(){t.prototype.init.apply(this,arguments)}function d(){var a=this.config.cls,b=this.owner.el.classList;if(Array.isArray(a))a.forEach(b.add,b);else if("string"==typeof a)b.add(a);else if(a)throw new y('unknown type of "cls" configuration parameter')}function e(){this.owner.el.style.display="block"}function f(){this.owner.el.style.display="none"}function g(a,b){this.owner.el.style[a]=b}function h(a){var b=this.config.tagName;if(!this.config.tagName)return this.owner.el.cloneNode(a);var c=document.createElement(b),d=this.config.attributes;d&&v.eachKey(d,function(a,b){c.setAttribute(b,a)});var e=this.owner.el.attributes;if(e)for(var f=0;f<e.length;f++){var g=e[f];"id"!=g.name&&c.setAttribute(g.name,g.value)}return c}function i(){z.removeElement(this.owner.el)}function j(a){this.owner.el.appendChild(a)}function k(a){var b=this.owner.el,c=b.firstChild;c?b.insertBefore(a,c):b.appendChild(a)}function l(a){for(;a.childNodes.length;)this.append(a.childNodes[0])}function m(a){for(;a.childNodes.length;)this.prepend(a.childNodes[a.childNodes.length-1])}function n(a){var b=this.owner.el,c=b.parentNode;c.insertBefore(a,b.nextSibling)}function o(a){var b=this.owner.el,c=b.parentNode;c.insertBefore(a,b)}function p(){return z.children(this.owner.el)}function q(a,b){if(!B.hasOwnProperty(a))throw new y("incorrect find direction: "+a);var c=this.owner.el,d=this.owner.scope,e=document.createTreeWalker(d._rootEl,NodeFilter.SHOW_ELEMENT);e.currentNode=c;for(var f=e[B[a]](),g=(Object.keys(d),!1);f;){var h=new x(f);if(h.node&&(h.parse().validate(),d.hasOwnProperty(h.compName))){var i=d[h.compName];if(!b||b(i)){g=!0;break}}e.currentNode=f,f=e[B[a]]()}return g?i:void 0}function r(){var a=window.getSelection();if(!a.isCollapsed)return!0;if(a.anchorOffset)return!0;var b=document.createTreeWalker(this.owner.el,NodeFilter.SHOW_TEXT);return b.previousNode()}function s(){var a=window.getSelection();if(!a.isCollapsed)return!0;if(a.anchorOffset<a.anchorNode.length)return!0;var b=document.createTreeWalker(this.owner.el,NodeFilter.SHOW_TEXT);b.currentNode=a.anchorNode;var c=b.nextNode(),d=c?""==!c.nodeValue:!1;return d}var t=a("../c_facet"),u=a("./cf_registry"),v=a("mol-proto"),w=a("../../util/check"),x=(w.Match,a("../../binder"),a("../../attributes/a_bind")),y=a("../../util/error").DomFacet,z=a("../../util/dom"),A=v.createSubclass(t,"Dom");v.extendProto(A,{init:c,start:d,show:e,hide:f,remove:i,append:j,prepend:k,appendChildren:l,prependChildren:m,insertAfter:n,insertBefore:o,children:p,setStyle:g,copy:h,find:q,hasTextBeforeSelection:r,hasTextAfterSelection:s}),u.add(A),b.exports=A;var B={up:"previousNode",down:"nextNode"}},{"../../attributes/a_bind":6,"../../binder":10,"../../util/check":72,"../../util/dom":75,"../../util/error":76,"../c_facet":13,"./cf_registry":26,"mol-proto":87}],17:[function(a,b){"use strict";function c(){l.prototype.init.apply(this,arguments),this._createMessageSourceWithAPI(n),this._dragData={};var a=this.config._dataTypeInfo||"";this._dataTypeInfo="function"==typeof a?a:function(){return a}}function d(a){return this.owner.el.contains(a)?(this._dragHandle=a,void 0):p.warn("drag handle should be inside element to be dragged")}function e(){l.prototype.start.apply(this,arguments),this.owner.el.setAttribute("draggable",!0),this.onMessages({mousedown:{context:this,subscriber:f},"mouseenter mouseleave mousemove":{context:this,subscriber:g},dragstart:{context:this,subscriber:h},drag:{context:this,subscriber:i}})}function f(a,b){this.__mouseDownTarget=b.target,k.call(this)&&(window.getSelection().empty(),b.stopPropagation())}function g(a,b){var c=k.call(this);this.owner.el.setAttribute("draggable",c),b.stopPropagation()}function h(a,b){var c=this.owner.getTransferState();this.__dragData=JSON.stringify(c),this.__dataType="x-application/milo-component/"+c.compClass+"/"+this._dataTypeInfo.call(this),j.call(this,b)}function i(a,b){j.call(this,b)}function j(a){if(k.call(this)){var b=a.dataTransfer;b.setData(this.__dataType,this.__dragData),b.setData("x-application/milo-component",null),b.setData("text/html",this.owner.el.outerHTML)}else a.preventDefault()}function k(){return!this._dragHandle||this._dragHandle.contains(this.__mouseDownTarget)}var l=a("../c_facet"),m=a("./cf_registry"),n=a("../msg_src/dom_events"),o=(a("../c_class"),a("mol-proto")),p=a("../../util/logger"),q=o.createSubclass(l,"Drag");o.extendProto(q,{init:c,start:e,setHandle:d}),m.add(q),b.exports=q},{"../../util/logger":79,"../c_class":12,"../c_facet":13,"../msg_src/dom_events":34,"./cf_registry":26,"mol-proto":87}],18:[function(a,b){"use strict";function c(){e.prototype.init.apply(this,arguments),this._createMessageSourceWithAPI(g)}function d(){function a(a,b){var c=b.dataTransfer,d=c.types;d&&(d.indexOf("text/html")>=0||d.indexOf("x-application/milo-component")>=0)&&(b.dataTransfer.dropEffect="move",b.preventDefault())}e.prototype.start.apply(this,arguments),this.owner.el.classList.add("cc-module-relative"),this.on("dragenter dragover",a)}var e=a("../c_facet"),f=a("./cf_registry"),g=a("../msg_src/dom_events"),h=a("mol-proto"),i=h.createSubclass(e,"Drop");h.extendProto(i,{init:c,start:d}),f.add(i),b.exports=i},{"../c_facet":13,"../msg_src/dom_events":34,"./cf_registry":26,"mol-proto":87}],19:[function(a,b){"use strict";function c(){d.prototype.init.apply(this,arguments);var a=new f(this,{trigger:"trigger"},void 0,this.owner);this._setMessageSource(a),g.defineProperty(this,"_domEventsSource",a)}var d=a("../c_facet"),e=a("./cf_registry"),f=(a("../../messenger"),a("../msg_src/dom_events")),g=a("mol-proto"),h=g.createSubclass(d,"Events");g.extendProto(h,{init:c}),e.add(h),b.exports=h},{"../../messenger":53,"../c_facet":13,"../msg_src/dom_events":34,"./cf_registry":26,"mol-proto":87}],20:[function(a,b){"use strict";function c(){g.prototype.init.apply(this,arguments);var a=new i(this,{trigger:"trigger"},void 0,this.owner);this._setMessageSource(a),k.defineProperty(this,"_messageSource",a)}function d(){g.prototype.start.apply(this,arguments);var a=this,b=this.getWindow().document;if("loading"==b.readyState)b.addEventListener("readystatechange",function(b){a.postMessage("domready",b)});else{var c=j.readystatechange,d=new c("readystatechange",{target:b});this.postMessage("domready",d)}}function e(){return this.owner.el.contentWindow}function f(){var a=this.getWindow().document.readyState;return"loading"!=a?a:!1}var g=a("../c_facet"),h=a("./cf_registry"),i=(a("../../messenger"),a("../msg_src/frame")),j=a("../msg_src/de_constrs"),k=a("mol-proto"),l=k.createSubclass(g,"Frame");k.extendProto(l,{init:c,start:d,getWindow:e,isReady:f}),h.add(l),b.exports=l},{"../../messenger":53,"../c_facet":13,"../msg_src/de_constrs":33,"../msg_src/frame":35,"./cf_registry":26,"mol-proto":87}],21:[function(a,b){"use strict";function c(){this.list.removeItem(this.index,!0)}var d=a("../c_facet"),e=a("./cf_registry"),f=(a("../../model"),a("mol-proto")),g=(a("../../mail"),f.createSubclass(d,"Item"));f.extendProto(g,{removeItem:c,require:["Container","Dom","Data"]}),e.add(g),b.exports=g},{"../../mail":50,"../../model":62,"../c_facet":13,"./cf_registry":26,"mol-proto":87}],22:[function(a,b){"use strict";function c(){n.prototype.init.apply(this,arguments);new q;r.defineProperties(this,{_listItems:[],_listItemsHash:{}}),r.defineProperty(this,"itemSample",null,r.WRIT),this.owner.on("childrenbound",d)}function d(){var a;if(this.container.scope._each(function(b){if(b.item){if(a)throw new u("More than one child component has ListItem Facet");a=b}}),!a)throw new u("No child component has ListItem Facet");this.list.itemSample=a,a.dom.hide(),a.remove(!0),a.walkScopeTree(function(a){delete a.el[A.componentRef]});{var b=a.el.cloneNode(!0),c=a.componentInfo.attr;r.clone(c)}c.compName="{{= it.componentName() }}",c.el=b,c.decorate();var d="{{ var i = it.count; while(i--) { }}"+b.outerHTML+"{{ } }}";this.list.itemsTemplate=w.compile(d)}function e(a){return this._listItems[a]}function f(){return this._listItems.length}function g(a,b){this._listItems[a]=b,this._listItemsHash[b.name]=b,b.item.list=this,b.item.index=a}function h(a){return this._listItemsHash[a.name]==a}function i(a){if(a=a||this.count(),this.item(a))throw u("attempt to create item with ID of existing item");var b=o.copy(this.itemSample,!0);return this._itemPreviousComponent(a).dom.insertAfter(b.el),this._setItem(a,b),b.el.style.display="",b}function j(a,b){if(x(a,y.Integer),0>a)throw new u("can't add negative number of items");if(0!=a){var c=this.itemsTemplate({componentName:t.componentName,count:a}),d=document.createElement("div");d.innerHTML=c,s(d,this.owner.container.scope);var e=z.children(d);if(a!=e.length&&v.error("number of items added is different from requested"),e&&e.length){var f=this.count(),g=0>b?0:"undefined"==typeof b||b>f?f:b,h=0==g?this.itemSample:this._listItems[g-1],i=document.createDocumentFragment();e.forEach(function(a){var b=o.getComponent(a);return b?(this._listItems.splice(g++,0,b),this._listItemsHash[b.name]=b,i.appendChild(a),a.style.display="",void 0):v.error("List: element in new items is not a component")},this),h.dom.insertAfter(i)}}}function k(a,b){var c=this.item(a);return c?(this._listItems[a]=void 0,delete this._listItemsHash[c.name],c.dom.remove(),c.remove(),b&&this._listItems.splice(a,1),void 0):v.warn("attempt to remove list item with id that does not exist")}function l(a){for(;a>=0&&!this._listItems[a];)a--;return a>=0?this._listItems[a]:this.itemSample}function m(a,b){this._listItems.forEach(function(b){b&&a.apply(this,arguments)},b||this)}var n=a("../c_facet"),o=a("../c_class"),p=a("./cf_registry"),q=a("../../model"),r=a("mol-proto"),s=(a("../../mail"),a("../../binder")),t=a("../../util"),u=t.error.List,v=t.logger,w=a("dot"),x=t.check,y=x.Match,z=t.dom,A=a("../../config"),B=r.createSubclass(n,"List");r.extendProto(B,{init:c,require:["Container","Dom","Data"],_itemPreviousComponent:l,item:e,count:f,_setItem:g,contains:h,addItem:i,addItems:j,removeItem:k,each:m}),p.add(B),b.exports=B},{"../../binder":10,"../../config":48,"../../mail":50,"../../model":62,"../../util":77,"../c_class":12,"../c_facet":13,"./cf_registry":26,dot:86,"mol-proto":87}],23:[function(a,b){"use strict";function c(){this.m=new i(this.config.data,this),g.prototype.init.apply(this,arguments)}function d(){return{state:this.m.get()}}function e(a){return this.m.set(a.state)}function f(){this.m.proxyMessenger(this),this.m.proxyMethods(this)}var g=a("../c_facet"),h=a("./cf_registry"),i=a("../../model"),j=a("mol-proto"),k=j.createSubclass(g,"Model");j.extendProto(k,{init:c,getState:d,setState:e,_createMessenger:f}),h.add(k),b.exports=k},{"../../model":62,"../c_facet":13,"./cf_registry":26,"mol-proto":87}],24:[function(a,b){"use strict";function c(){g.prototype.init.apply(this,arguments);var a=this.config.interpolate===!1?void 0:this.config.compile||milo.config.template.compile;this.set(this.config.template||"",a)}function d(a,b){return j(a,String),j(b,k.Optional(Function)),this._templateStr=a,b&&(this._compile=b),b=b||this._compile,b&&(this._template=b(a)),this}function e(a){return this.owner.el.innerHTML=this._template?this._template(a):this._templateStr,this}function f(){this.owner.container.binder()}var g=a("../c_facet"),h=a("./cf_registry"),i=a("mol-proto"),j=a("../../util/check"),k=j.Match,l=(a("../../binder"),i.createSubclass(g,"Template"));i.extendProto(l,{init:c,set:d,render:e,binder:f,require:["Container"]}),h.add(l),b.exports=l},{"../../binder":10,"../../util/check":72,"../c_facet":13,"./cf_registry":26,"mol-proto":87}],25:[function(a,b){"use strict";function c(){f.prototype.init.apply(this,arguments),this._state=void 0}function d(){return this._state}function e(a){this._state=a}var f=a("../c_facet"),g=a("./cf_registry"),h=a("mol-proto"),i=h.createSubclass(f,"Transfer");
<<<<<<< HEAD
h.extendProto(i,{init:c,getState:d,setState:e}),g.add(i),b.exports=i},{"../c_facet":13,"./cf_registry":26,"mol-proto":87}],26:[function(a,b){"use strict";var c=a("../../abstract/registry"),d=a("../c_facet"),e=new c(d);e.add(d),b.exports=e},{"../../abstract/registry":5,"../c_facet":13}],27:[function(a,b){"use strict";function c(a,b,c){c.parse().validate(),this.scope=a,this.el=b,this.attr=c,this.name=c.compName,this.ComponentClass=d(c),this.extraFacetsClasses=e(this.ComponentClass,c),f(this.ComponentClass,this.extraFacetsClasses)&&(this.container={})}function d(a){var b=g.get(a.compClass);if(!b)throw new i("class "+a.compClass+" is not registered");return b}function e(a,b){var c=b.compFacets,d={};return Array.isArray(c)&&c.forEach(function(c){if(c=j.firstUpperCase(c),a.hasFacet(c))throw new i("class "+a.name+" already has facet "+c);if(d[c])throw new i("component "+b.compName+" already has facet "+c);var e=h.get(c);d[c]=e}),d}function f(a,b){function c(){return a.prototype.facetsClasses&&j.someKey(a.prototype.facetsClasses,d)}function d(a){return a.requiresFacet("container")}return a.hasFacet("container")||"Container"in b||j.someKey(b,d)||c()}var g=a("./c_registry"),h=a("./c_facets/cf_registry"),i=a("../util/error").Binder,j=a("mol-proto");b.exports=c},{"../util/error":76,"./c_facets/cf_registry":26,"./c_registry":28,"mol-proto":87}],28:[function(a,b){"use strict";var c=a("../abstract/registry"),d=a("./c_class"),e=new c(d);e.add(d),b.exports=e},{"../abstract/registry":5,"./c_class":12}],29:[function(a,b){"use strict";function c(a){return a.hasOwnProperty(h.componentRef)}function d(a){return a&&a[h.componentRef]}function e(a,b,c){i(b,j.Optional(Boolean)),i(c,j.Optional(j.OneOf(Function,String)));var d=f(c);return g(a,b,d)}function f(a){if("function"==typeof a)return a;if("string"==typeof a){var b=_.firstLowerCase(a);return function(a){return a.hasFacet(b)}}}function g(a,b,c){if(b!==!1){var e=d(a);if(e&&(!c||c(e)))return e}return a.parentNode?g(a.parentNode,!0,c):void 0}{var h=a("../config"),i=a("../util/check"),j=i.Match;b.exports={isComponent:c,getComponent:d,getContainingComponent:e,_makeComponentConditionFunc:f}}},{"../config":48,"../util/check":72}],30:[function(a,b){"use strict";var c=a("../c_class"),d=a("../c_registry"),e=c.createComponentClass("View",["container"]);d.add(e),b.exports=e},{"../c_class":12,"../c_registry":28}],31:[function(a,b){"use strict";function c(a){h.prototype.init.apply(this,arguments),this.component=a,this.elData=i(a.el)}function d(){var a=this.component.data.config.get,b="function"==typeof a?a.call(this.component):this.elData.get(this.component.el);return this.component.data._value=b,b}function e(a){var b=this.component.data.config.event,c=b||this.elData.event(this.component.el);return""==a&&c?c:void 0}function f(a,b,c){return c.newValue!=c.oldValue}function g(){var a=this.component.data._value,b=this.value(),c={path:"",type:"changed",oldValue:a,newValue:b};return c}var h=a("../../messenger/m_api"),i=a("./de_data"),j=a("mol-proto"),k=a("../../util/check"),l=(k.Match,j.createSubclass(h,"DataMsgAPI",!0));j.extendProto(l,{init:c,translateToSourceMessage:e,filterSourceMessage:f,createInternalData:g,value:d}),b.exports=l},{"../../messenger/m_api":54,"../../util/check":72,"./de_data":32,"mol-proto":87}],32:[function(a,b){"use strict";function c(a){var b=h[a.type];return b?b.property:h.byDefault.property}function d(a){var b=h[a.type];return b?b.event:h.byDefault.event}var e=a("mol-proto"),f=function(a){var b=a.tagName.toLowerCase(),c=g[b];return c||g.byDefault};b.exports=f;var g={byDefault:{property:"innerHTML"},div:{property:"innerHTML"},span:{property:"innerHTML",event:"input"},input:{property:c,event:d},textarea:{property:"value",event:"input"},select:{property:"value",event:"change"},img:{property:"src"}};e.eachKey(g,function(a){var b=a.property,c=a.event;"function"!=typeof b&&(a.property=function(){return b});var d=a.property;"function"!=typeof c&&(a.event=function(){return c}),a.get||(a.get=function(a){return a[d(a)]}),a.set||(a.set=function(a,b){return a[d(a)]="undefined"==typeof b?"":b})});var h={byDefault:{property:"value",event:"input"},checkbox:{property:"checked",event:"change"},radio:{property:"checked",event:"change"},text:{property:"value",event:"input"}}},{"mol-proto":87}],33:[function(a,b){"use strict";var c=a("mol-proto"),d={ClipboardEvent:["copy","cut","paste","beforecopy","beforecut","beforepaste"],Event:["input","readystatechange"],FocusEvent:["focus","blur","focusin","focusout"],KeyboardEvent:["keydown","keypress","keyup"],MouseEvent:["click","contextmenu","dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","mouseout","mouseover","show"],TouchEvent:["touchstart","touchend","touchmove","touchenter","touchleave","touchcancel"]};if("undefined"!=typeof window)var e=window;else e={},c.eachKey(d,function(a,b){var d=c.makeFunction(b,"type","properties","this.type = type; _.extend(this, properties);");e[b]=d});var f={};c.eachKey(d,function(a,b){a.forEach(function(a){if(Object.hasOwnProperty(f,a))throw new Error("duplicate event type "+a);f[a]=e[b]})}),b.exports=f},{"mol-proto":87}],34:[function(a,b){"use strict";function c(a,b,c,d){l(d,i),this.component=d,h.prototype.init.apply(this,arguments)}function d(){return this.component.el}function e(a,b){if(b&&"string"==typeof b){var c=o.test(b);b=b.replace(o,""),this.dom()[a](b,this,c)}}function f(a){var b;"undefined"!=typeof window&&(b=a.eventPhase==window.Event.CAPTURING_PHASE),b&&(a+=p),this.dispatchMessage(a.type,a)}function g(a,b){l(a,String),l(b,m.Optional(Object)),a=a.replace(o,"");var c=j[a];if("function"!=typeof c)throw new Error("unsupported event type");"undefined"!=typeof b&&(b.type=a);var d=new c(a,b),e=this.dom().dispatchEvent(d);return e}var h=a("../../messenger/m_source"),i=a("../c_class"),j=a("./de_constrs"),k=a("mol-proto"),l=a("../../util/check"),m=l.Match,n=k.createSubclass(h,"DOMMessageSource",!0);k.extendProto(n,{init:c,addSourceSubscriber:k.partial(e,"addEventListener"),removeSourceSubscriber:k.partial(e,"removeEventListener"),trigger:g,dom:d,handleEvent:f}),b.exports=n;var o=/__capture$/,p="__capture"},{"../../messenger/m_source":56,"../../util/check":72,"../c_class":12,"./de_constrs":33,"mol-proto":87}],35:[function(a,b){"use strict";function c(a,b,c,d){if(l(d,j),this.component=d,"iframe"!=d.el.tagName.toLowerCase())throw new m("component for FrameMessageSource can only be attached to iframe element");i.prototype.init.apply(this,arguments)}function d(){return this.component.el.contentWindow}function e(){this.frameWindow().addEventListener("message",this,!1)}function f(){this.frameWindow().removeEventListener("message",this,!1)}function g(a,b){b=b||{},b.type=a,this.frameWindow().postMessage(b,"*")}function h(a){this.dispatchMessage(a.data.type,a)}var i=a("../../messenger/m_source"),j=a("../c_class"),k=a("mol-proto"),l=a("../../util/check"),m=(l.Match,a("../../util/error").FrameMessageSource),n=k.createSubclass(i,"FrameMessageSource",!0);k.extendProto(n,{init:c,addSourceSubscriber:e,removeSourceSubscriber:f,trigger:g,frameWindow:d,handleEvent:h}),b.exports=n},{"../../messenger/m_source":56,"../../util/check":72,"../../util/error":76,"../c_class":12,"mol-proto":87}],36:[function(a,b){"use strict";function c(a,b){o.defineProperties(this,{_rootEl:a,_hostObject:b},o.WRIT)}function d(a,b){if("string"==typeof b?a.name=b:b=a.name,this[b])throw new q("duplicate object name: "+b);j(b),this[b]=a,a.scope=this,"function"==typeof a.postMessage&&a.postMessage("insertedinscope")}function e(a){p(a,c),a._each(d,this)}function f(a,b){b._add(a),this._remove(a.name),a.scope=b}function g(){}function h(a){a._each(d,this)}function i(a,b){o.eachKey(this,a,b||this,!0)}function j(a){if(!s.test(a))throw new q("name should start from letter, this name is not allowed: "+a)}function k(){return Object.keys(this).length}function l(){var a=Object.keys(this)[0];return a&&this[a]}function m(a,b){return a in this?(b||delete this[a].scope,delete this[a],void 0):r.warn("removing object that is not in scope")}function n(){this._each(function(a,b){delete this[b].scope,delete this[b]},this)}var o=a("mol-proto"),p=a("../util/check"),q=(p.Match,a("../util/error").Scope),r=a("../util/logger");o.extendProto(c,{_add:d,_copy:e,_each:i,_move:f,_addNew:g,_merge:h,_length:k,_any:l,_remove:m,_clean:n}),b.exports=c;var s=/^[A-Za-z][A-Za-z0-9\_\$]*$/},{"../util/check":72,"../util/error":76,"../util/logger":79,"mol-proto":87}],37:[function(a,b){"use strict";var c=a("../c_class"),d=a("../c_registry"),e=c.createComponentClass("MLButton",{events:void 0,dom:{cls:"ml-ui-button"}});d.add(e),b.exports=e},{"../c_class":12,"../c_registry":28}],38:[function(a,b){"use strict";function c(){k.prototype.init.apply(this,arguments),this.on("childrenbound",d)}function d(){m.defineProperties(this,{_comboInput:this.container.scope.input,_comboList:this.container.scope.datalist}),this._comboList.template.set(o),this._comboInput.data.on("input",{subscriber:i,context:this})}function e(){return this._comboInput?this._comboInput.data.get():void 0}function f(a){return h.call(this,"set",a)}function g(){return h.call(this,"del",value)}function h(a,b){if(this._comboInput){var c=this._comboInput.data[a](b);return i.call(this),c}}function i(){this.data.getMessageSource().dispatchMessage(n)}function j(){this._comboList.template.render({comboOptions:this.model.get()})}var k=a("../c_class"),l=a("../c_registry"),m=a("mol-proto"),n="mlcombochange",o='{{~ it.comboOptions :option }} 							<option value="{{= option.label }}"></option> 					     {{~}}',p=k.createComponentClass("MLCombo",{events:void 0,data:{get:e,set:f,del:g,splice:void 0,event:n},model:{messages:{"***":{subscriber:j,context:"owner"}}},dom:{cls:"ml-ui-datalist"},container:void 0});l.add(p),b.exports=p,m.extendProto(p,{init:c})},{"../c_class":12,"../c_registry":28,"mol-proto":87}],39:[function(a,b){"use strict";var c=a("../c_class"),d=a("../c_registry"),e=c.createComponentClass("MLDate",{events:void 0,data:void 0,dom:{cls:"ml-ui-date"}});d.add(e),b.exports=e},{"../c_class":12,"../c_registry":28}],40:[function(a,b){"use strict";var c=a("../c_class"),d=a("../c_registry"),e=c.createComponentClass("MLGroup",{container:void 0,data:void 0,events:void 0,dom:{cls:"ml-ui-group"}});d.add(e),b.exports=e},{"../c_class":12,"../c_registry":28}],41:[function(a,b){"use strict";var c=a("../c_class"),d=a("../c_registry"),e=c.createComponentClass("MLHyperlink",{events:void 0,data:void 0,dom:{cls:"ml-ui-hyperlink"}});d.add(e),b.exports=e},{"../c_class":12,"../c_registry":28}],42:[function(a,b){"use strict";function c(a){this.el.disabled=a}var d=a("../c_class"),e=a("../c_registry"),f=d.createComponentClass("MLInput",{data:void 0,events:void 0,dom:{cls:"ml-ui-input"}});e.add(f),b.exports=f,_.extendProto(f,{disable:c})},{"../c_class":12,"../c_registry":28}],43:[function(a,b){"use strict";function c(a){this.el.disabled=a}function d(){var a=this._hostObject.owner;a.template.render({selectOptions:this.get()})}var e=a("../c_class"),f=a("../c_registry"),g=a("mol-proto"),h=e.createComponentClass("MLList",{dom:{cls:"ml-ui-list"},data:void 0,events:void 0,model:{messages:{"***":d}},template:{template:'{{~ it.selectOptions :option }} 						<option value="{{= option.value }}">{{= option.label }}</option> 				   {{~}}'}});f.add(h),b.exports=h,g.extendProto(h,{disable:c})},{"../c_class":12,"../c_registry":28,"mol-proto":87}],44:[function(a,b){"use strict";function c(){_.defineProperty(this,"_radioList",[],_.CONF),_.defineProperty(this,n,o+l()),j.prototype.init.apply(this,arguments)}function d(a){var b,c=this._radioList;return c.length?(c.forEach(function(c){c.checked=c.value==a,c.checked&&(b=a)}),h.call(this),b):void 0}function e(){var a=_.find(this._radioList,function(a){return a.checked});return a&&a.value||void 0}function f(){var a=this._radioList;return a.length&&a.forEach(function(a){a.checked=!1}),h.call(this),void 0}function g(a,b){"radio"==b.target.type&&h.call(this)}function h(){this.data.getMessageSource().dispatchMessage(m)}function i(){this.template.render({radioOptions:this.model.get(),elementName:this[n]});var a=this.el.querySelectorAll('input[type="radio"]'),b=this._radioList;b.length=0,_.forEach(a,b.push,b)}var j=a("../c_class"),k=a("../c_registry"),l=a("../../util/count"),m="mlradiogroupchange",n="_mlRadioGroupElementID",o="ml-radio-group-",p=j.createComponentClass("MLRadioGroup",{data:{set:d,get:e,del:f,splice:void 0,event:m},model:{messages:{"***":{subscriber:i,context:"owner"}}},events:{messages:{click:{subscriber:g,context:"owner"}}},container:void 0,dom:{cls:"ml-ui-radio-group"},template:{template:'{{~ it.radioOptions :option }} 						{{##def.elID:{{= it.elementName }}-{{= option.value }}#}} 						<input id="{{# def.elID }}" type="radio" value="{{= option.value }}" name="{{= it.elementName }}"> 						<label for="{{# def.elID }}">{{= option.label }}</label> 				   {{~}}'}});k.add(p),b.exports=p,_.extendProto(p,{init:c})},{"../../util/count":74,"../c_class":12,"../c_registry":28}],45:[function(a,b){"use strict";function c(a){this.el.disabled=a}function d(){this.template.render({selectOptions:this.model.get()})}var e=a("../c_class"),f=a("../c_registry"),g=a("mol-proto"),h=e.createComponentClass("MLSelect",{dom:{cls:"ml-ui-select"},data:void 0,events:void 0,model:{messages:{"***":{subscriber:d,context:"owner"}}},template:{template:'{{~ it.selectOptions :option }} 						<option value="{{= option.value }}">{{= option.label }}</option> 				   {{~}}'}});f.add(h),b.exports=h,g.extendProto(h,{disable:c})},{"../c_class":12,"../c_registry":28,"mol-proto":87}],46:[function(a,b){"use strict";var c=a("../c_class"),d=a("../c_registry"),e=c.createComponentClass("MLTextarea",{data:void 0,events:void 0,dom:{cls:"ml-ui-textarea"}});d.add(e),b.exports=e},{"../c_class":12,"../c_registry":28}],47:[function(a,b){"use strict";var c=a("../c_class"),d=a("../c_registry"),e=c.createComponentClass("MLTime",{events:void 0,data:void 0,dom:{cls:"ml-ui-time"}});d.add(e),b.exports=e},{"../c_class":12,"../c_registry":28}],48:[function(a,b){"use strict";function c(a){d.deepExtend(c,a)}var d=a("mol-proto"),e=a("dot");b.exports=c,c({attrs:{bind:"ml-bind",load:"ml-load"},componentRef:"___milo_component",componentPrefix:"milo_",template:{compile:e.compile},check:!0})},{dot:86,"mol-proto":87}],49:[function(a,b){"use strict";function c(a,b){m?d(a,b):g.on("domready",function(){d(a,b)})}function d(a,b){"function"==typeof a&&(b=a,a=void 0),a=a||document.body,g.postMessage("loader",{state:"started"}),e(a,function(a){g.postMessage("loader",{state:"finished",views:a}),b(a)})}function e(a,b){var c=a.querySelectorAll("["+j.attrs.load+"]"),d={},e=c.length,g=0;_.forEach(c,function(a){f(a,function(c){d[a.id]=c||a,g++,g==e&&b(d)})})}function f(a,b){if(i.children(a).length)throw new l("can't load html into element that is not empty");var c=new k(a);c.parse().validate(),h.get(c.loadUrl,function(d,e){return d?(d.message=d.message||"can't load file "+c.loadUrl,b(d),void 0):(a.innerHTML=e,b(null),void 0)})}var g=a("./mail"),h=a("./util/request"),i=(a("./util/logger"),a("./util/dom")),j=a("./config"),k=a("./attributes/a_load"),l=a("./util/error").Loader;b.exports=c;var m=!1;g.on("domready",function(){m=!0})},{"./attributes/a_load":8,"./config":48,"./mail":50,"./util/dom":75,"./util/error":76,"./util/logger":79,"./util/request":82}],50:[function(a,b){"use strict";var c=a("../messenger"),d=a("./mail_api"),e=a("./mail_source"),f=(a("mol-proto"),new c),g=new e(f,{trigger:"trigger"},new d);f._setMessageSource(g),b.exports=f},{"../messenger":53,"./mail_api":51,"./mail_source":52,"mol-proto":87}],51:[function(a,b){"use strict";function c(a){return"domready"==a?"readystatechange":i.test(a)?"message":void 0}function d(a,b,c){return"readystatechange"==a?this._domReadyFired?!1:(f.defineProperty(this,"_domReadyFired",!0,f.WRIT),!0):"message"==a?j+c.data.type==b:void 0}var e=a("../messenger/m_api"),f=a("mol-proto"),g=a("../util/check"),h=(g.Match,f.createSubclass(e,"MailMsgAPI",!0));f.extendProto(h,{translateToSourceMessage:c,filterSourceMessage:d}),b.exports=h;var i=/^message\:/,j="message:"},{"../messenger/m_api":54,"../util/check":72,"mol-proto":87}],52:[function(a,b){"use strict";function c(a){if(e(a))if("loading"==document.readyState)document.addEventListener("readystatechange",this,!1);else{var b=k.readystatechange,c=new b("readystatechange",{target:document});this.dispatchMessage("readystatechange",c)}else this._windowSubscriberMethod("addEventListener",a)}function d(a){e(a)?document.removeEventListener("readystatechange",this,!1):this._windowSubscriberMethod("removeEventListener",a)}function e(a){return"readystatechange"==a&&"object"==typeof document}function f(a){return"message"==a&&"object"==typeof window}function g(a,b){f(b)&&window[a]("message",this,!1)}function h(a){this.dispatchMessage(a.type,a)}function i(a,b){b=b||{},b.type="message:"+a,"object"==typeof window&&window.postMessage(b,"*")}var j=a("../messenger/m_source"),k=a("../components/msg_src/de_constrs"),l=(a("../util/error").MailMessageSource,a("mol-proto")),m=a("../util/check"),n=(m.Match,l.createSubclass(j,"MailMessageSource",!0));l.extendProto(n,{addSourceSubscriber:c,removeSourceSubscriber:d,trigger:i,_windowSubscriberMethod:g,handleEvent:h}),b.exports=n},{"../components/msg_src/de_constrs":33,"../messenger/m_source":56,"../util/check":72,"../util/error":76,"mol-proto":87}],53:[function(a,b){"use strict";function c(a,b,c){c&&this._setMessageSource(c),u.defineProperties(this,{_messageSubscribers:{},_patternMessageSubscribers:{}})}function d(a,b){v(a,w.OneOf(String,[String],RegExp)),v(b,w.OneOf(Function,{subscriber:Function,context:w.Any})),"string"==typeof a&&(a=a.split(y));var c=this._chooseSubscribersHash(a);if(a instanceof RegExp)return this._registerSubscriber(c,a,b);var d=!1;return a.forEach(function(a){var e=this._registerSubscriber(c,a,b);d=d||e},this),d}function e(a,b,c){if(!a[b]||!a[b].length){a[b]=[],b instanceof RegExp&&(a[b].pattern=b),this._messageSource&&this._messageSource.onSubscriberAdded(b);var d=!0}var e=a[b],g=d||-1==f(e,c);return g&&e.push(c),g}function f(a,b){var c="function"==typeof b;return u.findIndex(a,function(a){return c?b==a:b.subscriber==a.subscriber&&b.context==a.context})}function g(a){v(a,w.ObjectHash(w.OneOf(Function,{subscriber:Function,context:w.Any})));var b=u.mapKeys(a,function(a,b){return this.on(b,a)},this);return b}function h(a,b){v(a,w.OneOf(String,[String],RegExp)),v(b,w.Optional(w.OneOf(Function,{subscriber:Function,context:w.Any}))),"string"==typeof a&&(a=a.split(y));var c=this._chooseSubscribersHash(a);if(a instanceof RegExp)return this._removeSubscriber(c,a,b);var d=!1;return a.forEach(function(a){var e=this._removeSubscriber(c,a,b);d=d||e},this),d}function i(a,b,c){var d=a[b];if(!d||!d.length)return!1;if(c){var e=f(d,c);if(-1==e)return!1;d.splice(e,1),d.length||this._removeAllSubscribers(a,b)}else this._removeAllSubscribers(a,b);return!0}function j(a,b){delete a[b],this._messageSource&&"string"==typeof b&&this._messageSource.onSubscriberRemoved(b)}function k(a){v(a,w.ObjectHash(w.Optional(w.OneOf(Function,{subscriber:Function,context:w.Any}))));var b=u.mapKeys(a,function(a,b){return this.off(b,a)},this);return b}function l(a,b,c){v(a,w.OneOf(String,RegExp)),v(c,w.Optional(Function));var d=this._chooseSubscribersHash(a),e=d[a];this._callSubscribers(a,b,c,e),"string"==typeof a&&this._callPatternSubscribers(a,b,c)}function m(a,b,c){u.eachKey(this._patternMessageSubscribers,function(d){var e=d.pattern;e.test(a)&&this._callSubscribers(a,b,c,d)},this)}function n(a,b,c,d){d&&d.length&&d.forEach(function(d){"function"==typeof d?d.call(this._hostObject,a,b,c):d.subscriber.call(d.context,a,b,c)},this)}function o(a,b){v(a,w.OneOf(String,RegExp));var c=this._chooseSubscribersHash(a),d=c[a]?[].concat(c[a]):[];return b!==!1&&"string"==typeof a&&u.eachKey(this._patternMessageSubscribers,function(b){var c=b.pattern;b&&b.length&&c.test(a)&&u.appendArray(d,b)}),d.length?d:void 0}function p(a){return a instanceof RegExp?this._patternMessageSubscribers:this._messageSubscribers}function q(a){v(a,t),u.defineProperty(this,"_messageSource",a),a.messenger=this}function r(){return this._messageSource}var s=a("../abstract/mixin"),t=a("./m_source"),u=a("mol-proto"),v=a("../util/check"),w=v.Match,x=(a("../util/error").Messenger,u.createSubclass(s,"Messenger")),y=x.messagesSplitRegExp=/\s*(?:\,|\s)\s*/;u.extendProto(x,{init:c,on:d,onMessage:d,off:h,offMessage:h,onMessages:g,offMessages:k,postMessage:l,getSubscribers:o,getMessageSource:r,_chooseSubscribersHash:p,_registerSubscriber:e,_removeSubscriber:i,_removeAllSubscribers:j,_callPatternSubscribers:m,_callSubscribers:n,_setMessageSource:q}),x.defaultMethods={on:"on",off:"off",onMessages:"onMessages",offMessages:"offMessages",postMessage:"postMessage",getSubscribers:"getSubscribers"},b.exports=x},{"../abstract/mixin":4,"../util/check":72,"../util/error":76,"./m_source":56,"mol-proto":87}],54:[function(a,b){"use strict";function c(){this.init&&this.init.apply(this,arguments)}function d(){k.defineProperty(this,"_internalMessages",{})}function e(a){var b,c=this.translateToSourceMessage(a);if("undefined"!=typeof c)return this._internalMessages.hasOwnProperty(c)?(b=this._internalMessages[c],-1==b.indexOf(a)?b.push(a):logger.warn("Duplicate addInternalMessage call for internal message "+a),void 0):(b=this._internalMessages[c]=[],b.push(a),c)}function f(a){function b(){logger.warn("notification received: un-subscribe from internal message "+a+" without previous subscription notification")}var c=this.translateToSourceMessage(a);if("undefined"!=typeof c){var d=this._internalMessages[c];if(d&&d.length){var e=d.indexOf(a);if(e>=0){if(d.splice(e,1),0==d.length)return delete this._internalMessages[c],c}else b()}else b()}}function g(a){return this._internalMessages[a]}function h(a){return a}function i(a,b,c){return c}function j(){return!0}var k=a("mol-proto");b.exports=c,k.extendProto(c,{init:d,addInternalMessage:e,removeInternalMessage:f,getInternalMessages:g,translateToSourceMessage:h,createInternalData:i,filterSourceMessage:j})},{"mol-proto":87}],55:[function(a,b){"use strict";function c(){f.prototype.init.apply(this,arguments),g.defineProperty(this,"_patternInternalMessages",{})}function d(){var a=f.prototype.addInternalMessage.apply(this,arguments);return a&&a instanceof RegExp&&(this._internalMessages[a].pattern=a,this._patternInternalMessages[a]=this._internalMessages[a]),a}function e(a){var b=f.prototype.getInternalMessages.apply(this,arguments);if("string"==typeof a){b=b||[];var c=g.object(b,!0);g.eachKey(this._patternInternalMessages,function(d){var e=d.pattern;e.test(a)&&d.forEach(function(a){c[a]||(b.push(a),c[a]=!0)})})}return b}var f=a("./m_api"),g=a("mol-proto"),h=g.createSubclass(f,"MessengerRegexpAPI");b.exports=h,g.extendProto(h,{init:c,addInternalMessage:d,getInternalMessages:e})},{"./m_api":54,"mol-proto":87}],56:[function(a,b){"use strict";function c(a,b,c){this._prepareMessengerAPI(c)}function d(a){l.defineProperty(this,"messenger",a)}function e(a){m(a,n.Optional(j)),a||(a=new j),l.defineProperty(this,"messengerAPI",a)}function f(a){var b=this.messengerAPI.addInternalMessage(a);"undefined"!=typeof b&&this.addSourceSubscriber(b)}function g(a){var b=this.messengerAPI.removeInternalMessage(a);"undefined"!=typeof b&&this.removeSourceSubscriber(b)}function h(a,b){var c=this.messengerAPI,d=c.getInternalMessages(a);d&&d.forEach(function(d){var e=c.createInternalData(a,d,b),f=c.filterSourceMessage(a,d,e);f&&this.messenger.postMessage(d,e)},this)}var i=a("../abstract/mixin"),j=a("./m_api"),k=(a("../util/logger"),a("../util/error").toBeImplemented),l=a("mol-proto"),m=a("../util/check"),n=m.Match,o=l.createSubclass(i,"MessageSource",!0);b.exports=o,l.extendProto(o,{init:c,setMessenger:d,onSubscriberAdded:f,onSubscriberRemoved:g,dispatchMessage:h,_prepareMessengerAPI:e,trigger:k,addSourceSubscriber:k,removeSourceSubscriber:k})},{"../abstract/mixin":4,"../util/check":72,"../util/error":76,"../util/logger":79,"./m_api":54,"mol-proto":87}],57:[function(a,b){"use strict";function c(a,b,c,d){f.prototype.init.apply(this,arguments),this.sourceMessenger=d}function d(a){this.sourceMessenger.on(a,{context:this,subscriber:this.dispatchMessage})}function e(a){this.sourceMessenger.off(a,{context:this,subscriber:this.dispatchMessage})}var f=a("./m_source"),g=a("mol-proto"),h=(a("../util/check"),g.createSubclass(f,"MessengerMessageSource"));b.exports=h,g.extendProto(h,{init:c,addSourceSubscriber:d,removeSourceSubscriber:e})},{"../util/check":72,"./m_source":56,"mol-proto":87}],58:[function(a,b){"use strict";function c(a){c.mail.on("domready",a)}var d=a("mol-proto");d.extend(c,{loader:a("./loader"),binder:a("./binder"),minder:a("./minder"),mail:a("./mail"),config:a("./config"),util:a("./util"),classes:a("./classes"),attributes:a("./attributes"),ComponentFacet:a("./components/c_facet"),Component:a("./components/c_class"),Messenger:a("./messenger"),Model:a("./model"),registry:a("./registry")}),a("./use_facets"),a("./use_components"),"object"==typeof b&&b.exports&&(b.exports=c),"object"==typeof window&&(window.milo=c)},{"./attributes":9,"./binder":10,"./classes":11,"./components/c_class":12,"./components/c_facet":13,"./config":48,"./loader":49,"./mail":50,"./messenger":53,"./minder":59,"./model":62,"./registry":69,"./use_components":70,"./use_facets":71,"./util":77,"mol-proto":87}],59:[function(a,b){"use strict";function c(a,b,c,e){if(Array.isArray(a)){var f=a,g=f.map(function(a){return new d(a[0],a[1],a[2],a[3])});return g}return new d(a,b,c,e)}var d=a("./model/connector");b.exports=c},{"./model/connector":61}],60:[function(a,b){"use strict";function c(a,b,c){this._changesQueue.length||e.defer(f,this,c),this._changesQueue.push(b)}function d(a){a&&a(null,!1),this.postMessage("changestarted"),this._changesQueue.forEach(function(a){var b=this.path(a.path);if(b)if("splice"==a.type){var c=a.index,d=a.removed.length,e=[c,d];e=e.concat(a.newValue.slice(c,c+a.addedCount)),b.splice.apply(b,e)}else{var f=g[a.type];f?b[f](a.newValue):logger.error("unknown data change type")}},this),this._changesQueue.length=0,a&&a(null,!0),this.postMessage("changecompleted")}var e=a("mol-proto");b.exports=c,c.initialize=function(){e.defineProperty(this,"_changesQueue",[])};var f=Function.prototype.call.bind(d),g={added:"set",changed:"set",deleted:"del",removed:"del"}},{"mol-proto":87}],61:[function(a,b){"use strict";function c(a,b,c,e){function f(){throw new g("invalid Connector mode: "+b)}var i=b.match(j);i||f();var k=i[1].length,l=i[2].length;k&&l&&k!=l&&f(),k||l||f(),h.extend(this,{ds1:a,ds2:c,mode:b,depth1:k,depth2:l,isOn:!1});var m=e&&e.pathTranslation;m&&h.extend(this,{pathTranslation1:d(m),pathTranslation2:m});var n=e&&e.dataTranslation;n&&h.extend(this,{dataTranslation1:n["<-"],dataTranslation2:n["->"]}),this.turnOn()}function d(a){var b={};return h.eachKey(a,function(a,c){b[a]=c}),b}function e(){function a(a,b,d,e,f,g){function j(a,b,c,d,e,f){f?h.eachKey(f,function(c,e){a[b](e,d)}):a[b](e,d)}var k=function(k,l){function m(g,h){if(!g){var i=h?"on":"off";j(b,i,d,c[a],e,f)}}var n=l.path,o=!1;if(f){o=!0,l=h.clone(l);var p=f[l.path];if(!p)return i.warn("Connector: data message received that should not have been subscribed to"),void 0;l.path=p}if(g){var q=g[n];q&&"function"==typeof q&&(o||(l=h.clone(l)),l.oldValue=q(l.oldValue),l.newValue=q(l.newValue))}if(c[a])var r=m;b.postMessage("changedata",l,r)};return j(d,"on",b,k,e,f),k}if(this.isOn)return i.warn("data sources are already connected");var b=this._subscriptionPath=new Array(this.depth1||this.depth2).join("*"),c=this;this.depth1&&(this._link1=a("_link2",this.ds1,this.ds2,b,this.pathTranslation1,this.dataTranslation1)),this.depth2&&(this._link2=a("_link1",this.ds2,this.ds1,b,this.pathTranslation2,this.dataTranslation2)),this.isOn=!0}function f(){function a(a,c){b[c]&&(a.off(b._subscriptionPath,b[c]),delete b[c])}if(!this.isOn)return i.warn("data sources are already disconnected");var b=this;a(this.ds1,"_link2"),a(this.ds2,"_link1"),this.isOn=!1}var g=a("../util/error").Connector,h=a("mol-proto"),i=a("../util/logger");b.exports=c;var j=/^(\<*)\-+(\>*)$/;h.extendProto(c,{turnOn:e,turnOff:f})},{"../util/error":76,"../util/logger":79,"mol-proto":87}],62:[function(a,b){"use strict";function c(a,b){var d=function(){return d.path.apply(d,arguments)};return d.__proto__=c.prototype,p.defineProperties(d,{_hostObject:b}),d._prepareMessengers(),a&&(d._data=a),k.initialize.call(d),d.on("changedata",k),d}function d(){return this._data}function e(a){return a?(p.splice(arguments,0,0,null,this),new(Function.prototype.bind.apply(i,arguments))):this}function f(a){a=a||this._hostObject,o.prototype._createProxyMethods.call(this._messenger,s,a)}function g(a){a=a||this._hostObject,o.prototype._createProxyMethods.call(this,t,a)}function h(){var a=new l(this),b=new m(this,void 0,new n,a),c=new l(this,l.defaultMethods,b);p.defineProperties(this,{_messenger:c,_internalMessenger:a})}{var i=a("./m_path"),j=a("./synthesize"),k=(a("./path_utils"),a("./change_data")),l=a("../messenger"),m=a("../messenger/msngr_source"),n=a("./m_msg_api"),o=(a("../util/error").Model,a("../abstract/mixin")),p=a("mol-proto"),q=a("../util/check");q.Match,a("../util/logger")}b.exports=c,c.prototype.__proto__=c.__proto__,p.extendProto(c,{path:e,get:d,set:j.modelSet,splice:j.modelSplice,proxyMessenger:f,proxyMethods:g,_prepareMessengers:h});var r=p.mapToObject(["len","push","pop","unshift","shift"],function(a){return i.prototype[a]});p.extendProto(c,r);var s=["on","off","postMessage","onMessages","offMessages","getSubscribers"],t=["path","get","set","splice","len","push","pop","unshift","shift"];p.extend(c,{Path:i})},{"../abstract/mixin":4,"../messenger":53,"../messenger/msngr_source":57,"../util/check":72,"../util/error":76,"../util/logger":79,"./change_data":60,"./m_msg_api":63,"./m_path":64,"./path_utils":67,"./synthesize":68,"mol-proto":87}],63:[function(a,b){"use strict";function c(a){return a instanceof RegExp?a:e.createRegexPath(a)}var d=a("../messenger/m_api_rx"),e=a("./path_utils"),f=a("mol-proto"),g=f.createSubclass(d,"ModelMsgAPI");b.exports=g,f.extendProto(g,{translateToSourceMessage:c})},{"../messenger/m_api_rx":55,"./path_utils":67,"mol-proto":87}],64:[function(a,b){"use strict";function c(a,b){s(b,String),r.defineProperties(this,{_model:a,_path:b,_args:r.slice(arguments,1)});var c=m.parseAccessPath(b);r.defineProperty(this,"_accessPath",d(c,this._args)),this._prepareMessenger();var e=l(b,c);r.defineProperties(this,e),n.initialize.call(this),this.on("changedata",n),Object.freeze(this)}function d(a,b){return a.reduce(function(a,c){var d=c.interpolate;return a+(d?"array"==c.syntax?"["+b[d]+"]":"."+b[d]:c.property)},"")}function e(a){if(!a)return this;var b=this._args.length-1;b>0&&(a=a.replace(/\$[1-9][0-9]*/g,function(a){return"$"+(+a.slice(1)+b)}));var d=this._path+a,e=[null,this._model,d].concat(this._args.slice(1)).concat(r.slice(arguments,1));return new(Function.prototype.bind.apply(c,e))}function f(){return this.path(".length").get()||0}function g(){var a=this.len(),b=a+arguments.length;return r.splice(arguments,0,0,a,0),this.splice.apply(this,arguments),b}function h(){return this.splice(this.len()-1,1)[0]}function i(){var a=this.len();return a+=arguments.length,r.splice(arguments,0,0,0,0),this.splice.apply(this,arguments),a}function j(){return this.splice(0,1)[0]}function k(){var a=new p(this._accessPath),b=new q(this,void 0,a,this._model),c=new o(this,o.defaultMethods,b);r.defineProperty(this,"_messenger",c)}{var l=a("./synthesize"),m=a("./path_utils"),n=a("./change_data"),o=a("../messenger"),p=a("./path_msg_api"),q=a("../messenger/msngr_source"),r=a("mol-proto"),s=a("../util/check");s.Match}b.exports=c,r.extendProto(c,{path:e,len:f,push:g,pop:h,unshift:i,shift:j,_prepareMessenger:k})},{"../messenger":53,"../messenger/msngr_source":57,"../util/check":72,"./change_data":60,"./path_msg_api":66,"./path_utils":67,"./synthesize":68,"mol-proto":87}],65:[function(a,b){"use strict";
function c(a,b){return a>b?b:a>=0?a:a+b>0?a+b:0}var d={normalizeSpliceIndex:c};b.exports=d},{}],66:[function(a,b){"use strict";function c(a){f.prototype.init.apply(this,arguments),this.rootPath=a}function d(a){return a instanceof RegExp?a:this.rootPath+a}function e(a,b,c){var d=h.clone(c),e=d.path;return d.fullPath=e,0==e.indexOf(this.rootPath)?d.path=e.replace(this.rootPath,""):g.warn("ModelPath message dispatched with wrong root path"),d}var f=a("../messenger/m_api"),g=a("../util/logger"),h=a("mol-proto"),i=h.createSubclass(f,"ModelPathMsgAPI");b.exports=i,h.extendProto(i,{init:c,translateToSourceMessage:d,createInternalData:e})},{"../messenger/m_api":54,"../util/logger":79,"mol-proto":87}],67:[function(a,b){"use strict";function c(a,b){b=b||u;var c=[];if(!a)return c;var d=a.replace(b,function(a){var b={property:a};return i.extend(b,x[a[0]]),"$"==a[1]&&(b.interpolate=e(b,!0)),c.push(b),""});if(d)throw new j("incorrect model path: "+a);return c}function d(a){if(g(a,h.OneOf(String,RegExp)),a instanceof RegExp||-1==a.indexOf("*"))return a;var b=k.parseAccessPath(a,w),c="^",d=!1;b.forEach(function(a){var b=a.property,e=y[b];e?(c+="("+e+"|)",d=!0):c+=b.replace(/(\.|\[|\])/g,"\\$1")}),c+="$";try{return new RegExp(c)}catch(e){throw new j("can't construct regex for path pattern: "+a)}}function e(a,b){var c=a.property,d=b?2:1;return"array"==a.syntax?c.slice(d,c.length-1):c.slice(d)}function f(a){a=a||["on","off"];var b=i.mapToObject(a,function(a){var b=this[a];return function(a,c){var e=d(a);b.call(this,e,c)}},this);i.defineProperties(this,b)}var g=a("../util/check"),h=g.Match,i=a("mol-proto"),j=a("../util/error").Model,k={parseAccessPath:c,createRegexPath:d,getPathNodeKey:e,wrapMessengerMethods:f};b.exports=k;var l="\\.[A-Za-z][A-Za-z0-9_]*",m="\\[[0-9]+\\]",n="\\$[1-9][0-9]*",o="\\."+n,p="\\["+n+"\\]",q="\\.\\*",r="\\[\\*\\]",s="\\*",t=[l,m,o,p].join("|"),u=new RegExp(t,"g"),v=[t,q,r,s].join("|"),w=new RegExp(v,"g"),x={".":{syntax:"object",empty:"{}"},"[":{syntax:"array",empty:"[]"},"*":{syntax:"match",empty:"{}"}},y={".*":l,"[*]":m};y["*"]=y[".*"]+"|"+y["[*]"]},{"../util/check":72,"../util/error":76,"mol-proto":87}],68:[function(require,module,exports){"use strict";function _synthesizePathMethods(a,b){var c=_.mapKeys(synthesizers,function(c){return _synthesize(c,a,b)});return c}function _synthesize(synthesizer,path,parsedPath){function addChangeMessage(a,b,c){a.push(c),b[c.path]=c}function addTreeChangesMessages(a,b,c,d,e){var f=valueIsTree(d),g=valueIsTree(e);g&&addMessages(a,b,c,e,"added","newValue"),f&&addMessages(a,b,c,d,"removed","oldValue")}function addMessages(a,b,c,d,e,f){function g(a,b){if(Array.isArray(b)){var c=a+"[$$]";b.forEach(function(a,b){h(a,b,c)})}else{var c=a+".$$";_.eachKey(b,function(a,b){h(a,b,c)})}}function h(c,d,h){var i=h.replace("$$",d),j=b[i];if(j)j.type==e?logger.error("setter error: same message type posted on the same path"):(j.type="changed",j[f]=c);else{var k={path:i,type:e};k[f]=c,addChangeMessage(a,b,k)}valueIsTree(c)&&g(i,c)}g(c,d)}function cloneTree(a){return null==a||"object"!=typeof a?a:Array.isArray(a)?a.slice():_.clone(a)}function valueIsTree(a){return null!=a&&"object"==typeof a&&Object.keys(a).length}var method,methodCode=synthesizer({parsedPath:parsedPath,getPathNodeKey:pathUtils.getPathNodeKey});try{eval(methodCode)}catch(e){throw ModelError("ModelPath method compilation error; path: "+path+", code: "+methodCode)}return method}var pathUtils=require("../path_utils"),modelUtils=require("../model_utils"),fs=require("fs"),doT=require("dot"),_=require("mol-proto"),templates={get:"'use strict';\n/* Only use this style of comments, not \"//\" */\n\nmethod = function get() {\n	var m = {{# def.modelAccessPrefix }};\n	return m {{~ it.parsedPath :pathNode }}\n		{{? pathNode.interpolate}}\n			&& (m = m[this._args[ {{= pathNode.interpolate }} ]])\n		{{??}}\n			&& (m = m{{= pathNode.property }})\n		{{?}} {{~}};\n};\n",set:"'use strict';\n/* Only use this style of comments, not \"//\" */\n\n{{# def.include_defines }}\n{{# def.include_create_tree }}\n\n\n/**\n * Template that synthesizes setter for Model and for ModelPath\n */\nmethod = function set(value) {\n	{{# def.initVars }}\n\n	{{# def.createTree:'set' }}\n\n	{{\n		currNode = nextNode;\n		currProp = currNode && currNode.property;\n	}}\n\n	{{ /* assign value to the last property */ }}\n	{{? currProp }}\n		wasDef = {{# def.wasDefined}};\n		{{# def.changeAccessPath }}\n\n		var old = m{{# def.currProp }};\n\n		{{ /* clone value to prevent same reference in linked models */ }}\n		m{{# def.currProp }} = cloneTree(value);\n	{{?}}\n\n	{{ /* add message related to the last property change */ }}\n	if (! wasDef)\n		{{# def.addMsg }} accessPath, type: 'added',\n				newValue: value });\n	else if (old != value)\n		{{# def.addMsg }} accessPath, type: 'changed',\n				oldValue: old, newValue: value });\n\n	{{ /* add message related to changes in (sub)properties inside removed and assigned value */ }}\n	if (! wasDef || old != value)\n		addTreeChangesMessages(messages, messagesHash,\n			accessPath, old, value); /* defined in the function that synthesizes ModelPath setter */\n\n	{{ /* post all stored messages */ }}\n	{{# def.postMessages }}\n};\n",del:"'use strict';\n/* Only use this style of comments, not \"//\" */\n\n{{# def.include_defines }}\n{{# def.include_traverse_tree }}\n\nmethod = function del() {\n	{{# def.initVars }}\n\n	{{# def.traverseTree }}\n\n	{{\n		var currNode = it.parsedPath[count];\n		var currProp = currNode.property;		\n	}}\n\n	if (! treeDoesNotExist && m && m.hasOwnProperty && {{# def.wasDefined}}) {\n		var old = m{{# def.currProp }};\n		delete m{{# def.currProp }};\n		{{# def.changeAccessPath }}\n		var msg = { path: accessPath, type: 'deleted', oldValue: old };\n		{{# def.modelPostMessageCode }}(accessPath, msg);\n\n		addTreeChangesMessages(messages, messagesHash,\n			accessPath, old, undefined); /* defined in the function that synthesizes ModelPath setter */\n\n		{{ /* post all stored messages */ }}\n		{{# def.postMessages }}\n	}\n};\n",splice:"'use strict';/* Only use this style of comments, not \"//\" */\n\n{{# def.include_defines }}\n{{# def.include_create_tree }}\n{{# def.include_traverse_tree }}\n\nmethod = function splice(spliceIndex, spliceHowMany) { /* ,... - extra arguments to splice into array */\n	{{# def.initVars }}\n\n	var argsLen = arguments.length;\n	var addItems = argsLen > 2;\n\n	if (addItems) {\n		{{ /* only create model tree if items are inserted in array */ }}\n\n		{{ /* if model is undefined it will be set to an empty array */ }}	\n		var value = [];\n		{{# def.createTree:'splice' }}\n\n		{{? nextNode }}\n			{{\n				var currNode = nextNode;\n				var currProp = currNode.property;\n				var emptyProp = '[]';\n			}}\n\n			{{# def.createTreeStep }}\n		{{?}}\n\n	} else if (spliceHowMany > 0) {\n		{{ /* if items are not inserted, only traverse model tree if items are deleted from array */ }}\n		{{? it.parsedPath.length }}\n			{{# def.traverseTree }}\n\n			{{\n				var currNode = it.parsedPath[count];\n				var currProp = currNode.property;		\n			}}\n\n			{{ /* extra brace closes 'else' in def.traverseTreeStep */ }}\n			{{# def.traverseTreeStep }} }\n		{{?}}\n	}\n\n	{{ /* splice items */ }}\n	if (addItems || (! treeDoesNotExist && m\n			&& m.length > spliceIndex ) ) {\n		var oldLength = m.length = m.length || 0;\n\n		arguments[0] = spliceIndex = normalizeSpliceIndex(spliceIndex, m.length);\n\n		{{ /* clone added arguments to prevent same references in linked models */ }}\n		if (addItems)\n			for (var i = 2; i < argsLen; i++)\n				arguments[i] = cloneTree(arguments[i]);\n\n		{{ /* actual aplice call */ }}\n		var removed = Array.prototype.splice.apply(m, arguments);\n\n		{{# def.addMsg }} accessPath, type: 'splice',\n				index: spliceIndex, removed: removed, addedCount: addItems ? argsLen - 2 : 0,\n				newValue: m });\n\n		if (removed && removed.length)\n			removed.forEach(function(item, index) {\n				var itemPath = accessPath + '[' + (spliceIndex + index) + ']';\n				{{# def.addMsg }} itemPath, type: 'removed', oldValue: item });\n\n				if (valueIsTree(item))\n					addMessages(messages, messagesHash, itemPath, item, 'removed', 'oldValue');\n			});\n\n		if (addItems)\n			for (var i = 2; i < argsLen; i++) {\n				var item = arguments[i];\n				var itemPath = accessPath + '[' + (spliceIndex + i - 2) + ']';\n				{{# def.addMsg }} itemPath, type: 'added', newValue: item });\n\n				if (valueIsTree(item))\n					addMessages(messages, messagesHash, itemPath, item, 'added', 'newValue');\n			}\n\n		{{ /* post all stored messages */ }}\n		{{# def.postMessages }}\n	}\n\n	return removed || [];\n}\n"},include_defines="'use strict';\n/* Only use this style of comments, not \"//\" */\n\n/**\n * Inserts initialization code\n */\n {{## def.initVars:\n 	var m = {{# def.modelAccessPrefix }};\n	var messages = [], messagesHash = {};\n	var accessPath = '';\n	var treeDoesNotExist;\n #}}\n\n/**\n * Inserts the beginning of function call to add message to list\n */\n{{## def.addMsg: addChangeMessage(messages, messagesHash, { path: #}}\n\n/**\n * Inserts current property/index for both normal and interpolated properties/indexes \n */\n{{## def.currProp:{{? currNode.interpolate }}[this._args[ {{= currNode.interpolate }} ]]{{??}}{{= currProp }}{{?}} #}}\n\n/**\n * Inserts condition to test whether normal/interpolated property/index exists \n */\n{{## def.wasDefined: m.hasOwnProperty(\n	{{? currNode.interpolate }}\n		this._args[ {{= currNode.interpolate }} ]\n	{{??}}\n		'{{= it.getPathNodeKey(currNode) }}'\n	{{?}}\n) #}}\n\n\n/**\n * Inserts code to update access path for current property\n * Because of the possibility of interpolated properties, it can't be calculated in template, it can only be calculated during accessor call. \n */\n{{## def.changeAccessPath:\n	accessPath += {{? currNode.interpolate }}\n		{{? currNode.syntax == 'array' }}\n			'[' + this._args[ {{= currNode.interpolate }} ] + ']';\n		{{??}}\n			'.' + this._args[ {{= currNode.interpolate }} ];\n		{{?}}\n	{{??}}\n		'{{= currProp }}';\n	{{?}}\n#}}\n\n\n/**\n * Inserts code to post stored messages\n */\n{{## def.postMessages:\n	messages.forEach(function(msg) {\n		{{# def.modelPostMessageCode }}(msg.path, msg);\n	}, this);\n#}}\n",include_create_tree="'use strict';\n/* Only use this style of comments, not \"//\" */\n\n/**\n * Inserts code to create model tree as neccessary for `set` and `splice` accessors and to add messages to send list if the tree changes.\n */\n{{## def.createTree:method:\n	var wasDef = true;\n	var old = m;\n\n	{{ var emptyProp = it.parsedPath[0] && it.parsedPath[0].empty; }}\n	{{? emptyProp }}\n		{{ /* create top level model if it was not previously defined */ }}\n		if (! m) {\n			m = {{# def.modelAccessPrefix }} = {{= emptyProp }};\n			wasDef = false;\n\n			{{# def.addMsg }} '', type: 'added',\n				  newValue: m });\n		}\n	{{??}}\n		{{? method == 'splice' }}\n			if (! m) {\n		{{?}}\n				m = {{# def.modelAccessPrefix }} = cloneTree(value);\n				wasDef = typeof old != 'undefined';\n		{{? method == 'splice' }}\n			}\n		{{?}}		\n	{{?}}\n\n\n	{{ /* create model tree if it doesn't exist */ }}\n	{{  var modelDataProperty = '';\n		var nextNode = it.parsedPath[0];\n		var count = it.parsedPath.length - 1;\n\n		for (var i = 0; i < count; i++) {\n			var currNode = nextNode;\n			var currProp = currNode.property;\n			nextNode = it.parsedPath[i + 1];\n			var emptyProp = nextNode && nextNode.empty;\n	}}\n\n		{{# def.createTreeStep }}\n\n	{{  } /* for loop */ }}\n#}}\n\n\n/**\n * Inserts code to create one step in the model tree\n */\n{{## def.createTreeStep:\n	{{# def.changeAccessPath }}\n\n	if (! {{# def.wasDefined }}) { \n		{{ /* property does not exist */ }}\n		m = m{{# def.currProp }} = {{= emptyProp }};\n\n		{{# def.addMsg }} accessPath, type: 'added', \n			  newValue: m });\n\n	} else if (typeof m{{# def.currProp }} != 'object') {\n		{{ /* property is not object */ }}\n		var old = m{{# def.currProp }};\n		m = m{{# def.currProp }} = {{= emptyProp }};\n\n		{{# def.addMsg }} accessPath, type: 'changed', \n			  oldValue: old, newValue: m });\n\n	} else {\n		{{ /* property exists, just traverse down the model tree */ }}\n		m = m{{# def.currProp }};\n	}\n#}}\n",include_traverse_tree="'use strict';\n/* Only use this style of comments, not \"//\" */\n\n/**\n * Inserts code to traverse model tree for `delete` and `splice` accessors.\n */\n{{## def.traverseTree:\n	{{ \n		var count = it.parsedPath.length-1;\n\n		for (var i = 0; i < count; i++) { \n			var currNode = it.parsedPath[i];\n			var currProp = currNode.property;\n	}}\n			{{# def.traverseTreeStep }}\n\n	{{ } /* for loop */\n\n		var i = count;\n		while (i--) { /* closing braces for else's above */\n	}}\n			}\n	{{ } /* while loop */ }}\n#}}\n\n\n/**\n * Inserts code to traverse one step in the model tree\n */\n{{## def.traverseTreeStep:\n	if (! (m && m.hasOwnProperty && {{# def.wasDefined}} ) )\n		treeDoesNotExist = true;\n	else {\n		m = m{{# def.currProp }};\n		{{# def.changeAccessPath }}\n	{{ /* brace from else is not closed on purpose - all braces are closed in while loop */ }}\n#}}\n",dotDef={include_defines:include_defines,include_create_tree:include_create_tree,include_traverse_tree:include_traverse_tree,getPathNodeKey:pathUtils.getPathNodeKey,modelAccessPrefix:"this._model._data",modelPostMessageCode:"this._model._internalMessenger.postMessage"},modelDotDef=_(dotDef).clone().extend({modelAccessPrefix:"this._data",modelPostMessageCode:"this._internalMessenger.postMessage"})._(),dotSettings=_.clone(doT.templateSettings);dotSettings.strip=!1;var synthesizers=_.mapKeys(templates,function(a){return doT.template(a,dotSettings,dotDef)}),modelSetSynthesizer=doT.template(templates.set,dotSettings,modelDotDef),modelSpliceSynthesizer=doT.template(templates.splice,dotSettings,modelDotDef),synthesizePathMethods=_.memoize(_synthesizePathMethods,void 0,1e3),normalizeSpliceIndex=modelUtils.normalizeSpliceIndex;module.exports=synthesizePathMethods,_.extend(synthesizePathMethods,{modelSet:_synthesize(modelSetSynthesizer,"",[]),modelSplice:_synthesize(modelSpliceSynthesizer,"",[])})},{"../model_utils":65,"../path_utils":67,dot:86,fs:84,"mol-proto":87}],69:[function(a,b){"use strict";b.exports={facets:a("./components/c_facets/cf_registry"),components:a("./components/c_registry")}},{"./components/c_facets/cf_registry":26,"./components/c_registry":28}],70:[function(a){"use strict";a("./components/classes/View"),a("./components/ui/Group"),a("./components/ui/Select"),a("./components/ui/Input"),a("./components/ui/Textarea"),a("./components/ui/RadioGroup"),a("./components/ui/Button"),a("./components/ui/Hyperlink"),a("./components/ui/List"),a("./components/ui/Time"),a("./components/ui/Date"),a("./components/ui/Combo")},{"./components/classes/View":30,"./components/ui/Button":37,"./components/ui/Combo":38,"./components/ui/Date":39,"./components/ui/Group":40,"./components/ui/Hyperlink":41,"./components/ui/Input":42,"./components/ui/List":43,"./components/ui/RadioGroup":44,"./components/ui/Select":45,"./components/ui/Textarea":46,"./components/ui/Time":47}],71:[function(a){"use strict";a("./components/c_facets/Dom"),a("./components/c_facets/Data"),a("./components/c_facets/Frame"),a("./components/c_facets/Events"),a("./components/c_facets/Template"),a("./components/c_facets/Container"),a("./components/c_facets/ModelFacet"),a("./components/c_facets/Drag"),a("./components/c_facets/Drop"),a("./components/c_facets/List"),a("./components/c_facets/Item"),a("./components/c_facets/Transfer")},{"./components/c_facets/Container":14,"./components/c_facets/Data":15,"./components/c_facets/Dom":16,"./components/c_facets/Drag":17,"./components/c_facets/Drop":18,"./components/c_facets/Events":19,"./components/c_facets/Frame":20,"./components/c_facets/Item":21,"./components/c_facets/List":22,"./components/c_facets/ModelFacet":23,"./components/c_facets/Template":24,"./components/c_facets/Transfer":25}],72:[function(a,b){"use strict";function c(a){this.pattern=a}function d(a){if(0==a.length)throw new Error("Must provide at least one choice to Match.OneOf");this.choices=a}function e(a){this.condition=a}function f(a){this.pattern=a}function g(a){this.pattern=a}function h(a,b){this.Superclass=a,this.matchSuperclass=b}function i(a,b){if(b!==n.Any){for(var l=0;l<o.length;++l)if(b===o[l][0]){if(typeof a===o[l][1])return;throw new n.Error("Expected "+o[l][1]+", got "+typeof a)}if(null===b){if(null===a)return;throw new n.Error("Expected null, got "+JSON.stringify(a))}if(b===n.Integer){if("number"==typeof a&&(0|a)===a)return;throw new n.Error("Expected Integer, got "+(a instanceof Object?JSON.stringify(a):a))}if(b===n.IdentifierString){if("string"==typeof a&&n.IdentifierString.test(a)&&-1==p.indexOf(u))return;throw new n.Error("Expected identifier string, got "+(a instanceof Object?JSON.stringify(a):a))}if(b===Object&&(b=n.ObjectIncluding({})),b instanceof Array){if(1!==b.length)throw Error("Bad pattern: arrays must have one type element"+JSON.stringify(b));if(!Array.isArray(a))throw new n.Error("Expected array, got "+JSON.stringify(a));return a.forEach(function(a,c){try{i(a,b[0])}catch(d){throw d instanceof n.Error&&(d.path=j(c,d.path)),d}}),void 0}if(b instanceof e){if(b.condition(a))return;throw new n.Error("Failed Match.Where validation")}if(b instanceof c&&(b=n.OneOf(void 0,b.pattern)),b instanceof d){for(var l=0;l<b.choices.length;++l)try{return i(a,b.choices[l]),void 0}catch(q){if(!(q instanceof n.Error))throw q}throw new n.Error("Failed Match.OneOf or Match.Optional validation")}if(b instanceof Function){if(a instanceof b)return;throw new n.Error("Expected "+b.constructor.name)}var r=!1;if(b instanceof f&&(r=!0,b=b.pattern),b instanceof g){var s=b.pattern,t=!0;for(var u in a)t=!1,m(a[u],s);if(t)throw new n.Error("Expected "+b.constructor.name)}else if(b instanceof h){var v=b.Superclass;if(b.matchSuperclass&&a==v)return;if(!(a.prototype instanceof v))throw new n.Error("Expected "+b.constructor.name+" of "+v.name)}else{if("object"!=typeof b)throw Error("Bad pattern: unknown pattern type");if("object"!=typeof a)throw new n.Error("Expected object, got "+typeof a);if(null===a)throw new n.Error("Expected object, got null");var w={},x={};k.eachKey(b,function(a,d){b[d]instanceof c?x[d]=b[d].pattern:w[d]=b[d]},this,!0),k.eachKey(a,function(b,c){var b=a[c];try{if(w.hasOwnProperty(c))i(b,w[c]),delete w[c];else if(x.hasOwnProperty(c))i(b,x[c]);else if(!r)throw new n.Error("Unknown key")}catch(d){throw d instanceof n.Error&&(d.path=j(c,d.path)),d}},this,!0),k.eachKey(w,function(a,b){throw new n.Error("Missing key '"+b+"'")},this,!0)}}}function j(a,b){return"number"==typeof a||a.match(/^[0-9]+$/)?a="["+a+"]":a.match(n.IdentifierString)&&-1==p.indexOf(a)||(a=JSON.stringify([a])),b&&"["!==b[0]?a+"."+b:a+b}var k=a("mol-proto"),l=a("../config"),m=function(a,b){if(l.check!==!1)try{i(a,b)}catch(c){throw c instanceof n.Error&&c.path&&(c.message+=" in field "+c.path),c}};b.exports=m;var n=m.Match={Optional:function(a){return new c(a)},OneOf:function(){return new d(arguments)},Any:["__any__"],Where:function(a){return new e(a)},ObjectIncluding:function(a){return new f(a)},Integer:["__integer__"],IdentifierString:/^[a-z_$][0-9a-z_$]*$/i,ObjectHash:function(a){return new g(a)},Subclass:function(a,b){return new h(a,b)},Error:TypeError,test:function(a,b){try{return i(a,b),!0}catch(c){if(c instanceof n.Error)return!1;throw c}}},o=[[String,"string"],[Number,"number"],[Boolean,"boolean"],[Function,"function"],[void 0,"undefined"]],p=["do","if","in","for","let","new","try","var","case","else","enum","eval","false","null","this","true","void","with","break","catch","class","const","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof"]},{"../config":48,"mol-proto":87}],73:[function(a,b){"use strict";function c(){return f+d()}var d=a("./count"),e=a("../config"),f=e.componentPrefix;b.exports=c},{"../config":48,"./count":74}],74:[function(a,b){"use strict";function c(){var a=Date.now();return f=""+a,d==a?(e=""===e?0:e+1,f+="_"+e):(d=a,e=""),f}var d=Date.now(),e="",f=""+d;c.get=function(){return f},b.exports=c},{}],75:[function(a,b){"use strict";function c(a){return d(a.childNodes,Node.ELEMENT_NODE)}function d(a,b){return _.filter(a,function(a){return a.nodeType==b})}function e(a){for(;a;){if(a.nodeType==Node.ELEMENT_NODE)return a;a=a.parentNode}return null}function f(a){var b=document.createRange();b.selectNodeContents(a);var c=window.getSelection();c.removeAllRanges(),c.addRange(b)}function g(a,b){var c=document.createRange();c.setStart(a,b);var d=window.getSelection();d.removeAllRanges(),d.addRange(c)}function h(a,b,c,d){var e=document.createRange();e.setStart(a,b),e.setEnd(c,d);var f=window.getSelection();f.removeAllRanges(),f.addRange(e)}function i(a){var b,c;for(b=a.offsetTop,c=a.offsetLeft,a=a.offsetParent;null!=a;)b+=a.offsetTop,c+=a.offsetLeft,a=a.offsetParent;return{topOffset:b,leftOffset:c}}function j(a){var b=a.parentNode;b&&b.removeChild(a)}function k(a){if(a.nodeType==Node.TEXT_NODE)return a;var b=document.createTreeWalker(a,NodeFilter.SHOW_TEXT);return b.firstChild()}function l(a){if(a.nodeType==Node.TEXT_NODE)return a;var b=document.createTreeWalker(a,NodeFilter.SHOW_TEXT);return b.lastChild()}function m(a){var b=a.parentNode;if(b){var c=document.createDocumentFragment(),d=_.slice(a.childNodes);d.forEach(c.appendChild,c),b.replaceChild(c,a)}}b.exports={children:c,filterNodeListByType:d,containingElement:e,selectElementContents:f,getElementOffset:i,setCaretPosition:g,setSelection:h,removeElement:j,unwrapElement:m,firstTextNode:k,lastTextNode:l}},{}],76:[function(a,b){"use strict";function c(a){var b=e.makeFunction(a,"message",'this.name = "'+a+'"; 			this.message = message || "There was an  error";');return e.makeSubclass(b,Error),b}function d(){throw new g.AbstractClass("calling the method of an absctract class")}var e=a("mol-proto"),f=["AbstractClass","Mixin","Messenger","Component","Attribute","Binder","Loader","MailMessageSource","Facet","Scope","Model","DomFacet","EditableFacet","List","Connector","Registry","FrameMessageSource","Angular"],g={toBeImplemented:d,createClass:c};f.forEach(function(a){g[a]=c(a+"Error")}),b.exports=g},{"mol-proto":87}],77:[function(a,b){"use strict";var c={logger:a("./logger"),request:a("./request"),promise:a("./promise"),check:a("./check"),error:a("./error"),count:a("./count"),componentName:a("./component_name"),dom:a("./dom"),selection:a("./selection"),jsonParse:a("./json_parse")};b.exports=c},{"./check":72,"./component_name":73,"./count":74,"./dom":75,"./error":76,"./json_parse":78,"./logger":79,"./promise":81,"./request":82,"./selection":83}],78:[function(a,b){"use strict";function c(a){try{return JSON.parse(a)}catch(b){}}b.exports=c},{}],79:[function(a,b){"use strict";var c=a("./logger_class"),d=new c({level:3});b.exports=d},{"./logger_class":80}],80:[function(a,b){"use strict";function c(a){return a.length<f?a+new Array(f-a.length+1).join(" "):a}var d=a("mol-proto"),e=["error","warn","info","debug"],f=Math.max.apply(Math,e.map(function(a){return a.length})),g=[31,33,36,90],h=function(a){a=a||{},this.colors=a.colors,this.level=a.level||3,this.enabled=a.enabled||!0,this.logPrefix=a.logPrefix||"",this.logPrefixColor=a.logPrefixColor};h.prototype.log=function(a){var b=e.indexOf(a);return b>this.level||!this.enabled?this:(console.log.apply(console,[this.logPrefixColor?"   ["+this.logPrefixColor+"m"+this.logPrefix+"  -[39m":this.logPrefix,this.colors?" ["+g[b]+"m"+c(a)+" -[39m":a+":"].concat(d.toArray(arguments).slice(1))),this)},e.forEach(function(a){h.prototype[a]=function(){this.log.apply(this,[a].concat(d.toArray(arguments)))}}),b.exports=h},{"mol-proto":87}],81:[function(a,b){"use strict";function c(a){this.data=void 0,this.dataError=void 0,this.dataSource=a,this._thenQueue=[],this._errorQueue=[]}function d(a){return this.dataError||(this.data?h.defer(a,null,this.data,this.dataSource):this._thenQueue.push(a)),this}function e(a){return this.dataError?h.defer(a,this.dataError,this.data,this.dataSource):this.data||this._errorQueue.push(a),this}function f(a,b){this.dataError=a,this.data=b;var c=a?this._errorQueue:this._thenQueue,d=this;h.defer(function(){c.forEach(function(c){c(a,b,d.request)}),d._errorQueue.length=0,d._thenQueue.length=0})}function g(a){var b=new c(this);return this.then(function(c,d){try{var e=a(d);b.setData(c,e)}catch(f){b.setData(f)}}).error(function(a,c){b.setData(a,c)}),b}var h=a("mol-proto");b.exports=c,h.extendProto(c,{then:d,error:e,setData:f,transform:g})},{"mol-proto":87}],82:[function(a,b){"use strict";function c(a,b,c){var d=new XMLHttpRequest;d.open(b.method,a,!0),d.setRequestHeader("Content-Type",b.contentType||"application/json;charset=UTF-8");var e=new h(d);return d.onreadystatechange=function(){4==d.readyState&&"OK"==d.statusText.toUpperCase()&&(c&&c(null,d.responseText,d),e.setData(null,d.responseText))},d.send(JSON.stringify(b.data)),e}function d(a,b){return c(a,{method:"GET"},b)}function e(a,b,d){return c(a,{method:"POST",data:b},d)}function f(a,b){var d=c(a,{method:"GET"}),e=d.transform(JSON.parse.bind(JSON));return b&&e.then(b).error(b),e}var g=a("mol-proto"),h=a("./promise");b.exports=c;g.extend(c,{get:d,post:e,json:f})},{"./promise":81,"mol-proto":87}],83:[function(a,b){"use strict";function c(a){return!this instanceof c?new c(a):(this.window=a||window,this.init(),void 0)}function d(){this.selection=this.window.getSelection(),this.selection.rangeCount&&(this.range=this.selection.getRangeAt(0)),this.isCollapsed=this.selection.isCollapsed}function e(){return this.range?(this._text||(this._text=this.range.toString()),this._text):void 0}function f(){return this.range?(this._textNodes||(this._textNodes=g.call(this)),this._textNodes):void 0}function g(){var a=[];if(this.isCollapsed)return a;for(var b=this.range.startContainer,c=this.range.endContainer,d=this.range.commonAncestorContainer,e=this.window.document.createTreeWalker(d,NodeFilter.SHOW_TEXT),f=e.currentNode=b;f&&(!g||c.contains(f));){a.push(f);var g=g||c.contains(f);f=e.nextNode()}return a}function h(a,b){return this.range?("undefined"==typeof this[a]&&(this[a]=n(this.range[b])),this[a]):void 0}function i(a,b){return this.range?("undefined"==typeof this[a]&&(this[a]=p.getContainingComponent(this[b]())),this[a]):void 0}function j(){if(this._containedComponents)return this._containedComponents;var a=this._containedComponents=[];if(this.isCollapsed||!this.range)return a;var b=this.range.startContainer,c=this.range.endContainer,d=this.range.commonAncestorContainer;if(b!=c){var e=this.window.document.createTreeWalker(d,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT);e.currentNode=b;for(var f=e.nextNode();f&&f!=c;){if(f.nodeType!=Node.TEXT_NODE){var g=p.getComponent(f);g&&!g.el.contains(c)&&a.push(g)}f=e.nextNode()}}return a}function k(a,b){if(!this.isCollapsed&&this.range){var c=this.containedComponents();c.forEach(a,b)}}function l(){if(!this.isCollapsed&&this.range){this.eachContainedComponent(function(a){a.remove()});var a=this.range.startContainer,b=this.range.startOffset;this.range.deleteContents(),a.textContent=a.textContent.trimRight();var c=b>a.length?a.length:b;o(a,c),a.parentNode.normalize()}}var m=a("./dom"),n=m.containingElement,o=m.setCaretPosition,p=a("../components/c_class"),q=a("mol-proto");b.exports=c;var r=q.partial(h,"_startElement","startContainer"),s=q.partial(h,"_endElement","endContainer"),t=q.partial(h,"_containingElement","commonAncestorContainer"),u=q.partial(i,"_startComponent","startElement"),v=q.partial(i,"_endComponent","endElement"),w=q.partial(i,"_containingComponent","containingElement");q.extendProto(c,{init:d,text:e,textNodes:f,startElement:r,endElement:s,containingElement:t,startComponent:u,endComponent:v,containingComponent:w,containedComponents:j,eachContainedComponent:k,del:l})},{"../components/c_class":12,"./dom":75,"mol-proto":87}],84:[function(){},{}],85:[function(a,b){!function(){"use strict";function a(){var a={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},b=/&(?!#?\w+;)|<|>|"|'|\//g;return function(){return this?this.replace(b,function(b){return a[b]||b}):this}}function c(a,b,d){return("string"==typeof b?b:b.toString()).replace(a.define||g,function(b,c,e,f){return 0===c.indexOf("def.")&&(c=c.substring(4)),c in d||(":"===e?(a.defineParams&&f.replace(a.defineParams,function(a,b,e){d[c]={arg:b,text:e}}),c in d||(d[c]=f)):new Function("def","def['"+c+"']="+f)(d)),""}).replace(a.use||g,function(b,e){a.useParams&&(e=e.replace(a.useParams,function(a,b,c,e){if(d[c]&&d[c].arg&&e){var f=(c+":"+e).replace(/'|\\/g,"_");return d.__exp=d.__exp||{},d.__exp[f]=d[c].text.replace(new RegExp("(^|[^\\w$])"+d[c].arg+"([^\\w$])","g"),"$1"+e+"$2"),b+"def.__exp['"+f+"']"}}));var f=new Function("def","return "+e)(d);return f?c(a,f,d):f})}function d(a){return a.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var e={version:"1.0.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1},template:void 0,compile:void 0};"undefined"!=typeof b&&b.exports?b.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):(function(){return this||(0,eval)("this")}()).doT=e,String.prototype.encodeHTML=a();var f={append:{start:"'+(",end:")+'",endencode:"||'').toString().encodeHTML()+'"},split:{start:"';out+=(",end:");out+='",endencode:"||'').toString().encodeHTML();out+='"}},g=/$^/;e.template=function(b,h,i){h=h||e.templateSettings;var j,k,l=h.append?f.append:f.split,m=0,n=h.use||h.define?c(h,b,i||{}):b;n=("var out='"+(h.strip?n.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):n).replace(/'|\\/g,"\\$&").replace(h.interpolate||g,function(a,b){return l.start+d(b)+l.end}).replace(h.encode||g,function(a,b){return j=!0,l.start+d(b)+l.endencode}).replace(h.conditional||g,function(a,b,c){return b?c?"';}else if("+d(c)+"){out+='":"';}else{out+='":c?"';if("+d(c)+"){out+='":"';}out+='"}).replace(h.iterate||g,function(a,b,c,e){return b?(m+=1,k=e||"i"+m,b=d(b),"';var arr"+m+"="+b+";if(arr"+m+"){var "+c+","+k+"=-1,l"+m+"=arr"+m+".length-1;while("+k+"<l"+m+"){"+c+"=arr"+m+"["+k+"+=1];out+='"):"';} } out+='"}).replace(h.evaluate||g,function(a,b){return"';"+d(b)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|\}|^|\{)out\+=''\+/g,"$1out+="),j&&h.selfcontained&&(n="String.prototype.encodeHTML=("+a.toString()+"());"+n);try{return new Function(h.varname,n)}catch(o){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+n),o}},e.compile=function(a,b){return e.template(a,null,b)}}()},{}],86:[function(a,b){function c(a){this.__path=a.path||"./","/"!==this.__path[this.__path.length-1]&&(this.__path+="/"),this.__destination=a.destination||this.__path,"/"!==this.__destination[this.__destination.length-1]&&(this.__destination+="/"),this.__global=a.global||"window.render",this.__rendermodule=a.rendermodule||{},this.__settings=a.templateSettings?e(a.templateSettings,e(h.templateSettings)):void 0,this.__includes={}}function d(a){for(var b="",c=0;c<a.length;c++)b+="itself."+a[c]+"="+a[c]+";";return b}function e(a,b){b=b||{};for(var c in a)b[c]=a[c];return b}function f(a){var b=g.readFileSync(a);return b?b.toString():(console.log("problems with "+a),void 0)}var g=a("fs"),h=b.exports=a("./doT");
h.process=function(a){return new c(a).compileAll()},c.prototype.compileToFile=function(a,b,c){c=c||{};var f,i=a.substring(a.lastIndexOf("/")+1,a.lastIndexOf(".")),j=e(this.__includes,e(c)),k=this.__settings||h.templateSettings,l=e(k),m=h.template(b,k,j),n=[],o="";for(var p in j)j[p]!==c[p]&&j[p]!==this.__includes[p]&&(f=void 0,"string"==typeof j[p]?f=h.template(j[p],k,j):"function"==typeof j[p]?f=j[p]:j[p].arg&&(l.varname=j[p].arg,f=h.template(j[p].text,l,j)),f&&(o+=f.toString().replace("anonymous",p),n.push(p)));o+=m.toString().replace("anonymous",i),g.writeFileSync(a,"(function(){"+o+"var itself="+i+";"+d(n)+"if(typeof module!=='undefined' && module.exports) module.exports=itself;else if(typeof define==='function')define(function(){return itself;});else {"+this.__global+"="+this.__global+"||{};"+this.__global+"['"+i+"']=itself;}}());")},c.prototype.compilePath=function(a){var b=f(a);return b?h.template(b,this.__settings||h.templateSettings,e(this.__includes)):void 0},c.prototype.compileAll=function(){console.log("Compiling all doT templates...");var a,b,c,d=this.__path,e=g.readdirSync(d);for(a=0,b=e.length;b>a;a++)c=e[a],/\.def(\.dot|\.jst)?$/.test(c)&&(console.log("Loaded def "+c),this.__includes[c.substring(0,c.indexOf("."))]=f(d+c));for(a=0,b=e.length;b>a;a++)c=e[a],/\.dot(\.def|\.jst)?$/.test(c)&&(console.log("Compiling "+c+" to function"),this.__rendermodule[c.substring(0,c.indexOf("."))]=this.compilePath(d+c)),/\.jst(\.dot|\.def)?$/.test(c)&&(console.log("Compiling "+c+" to file"),this.compileToFile(this.__destination+c.substring(0,c.indexOf("."))+".js",f(d+c)));return this.__rendermodule}},{"./doT":85,fs:84}],87:[function(a,b){"use strict";function c(a){var b=Object.create(c.prototype);return b.self=a,b}function d(){return this.self}var e=a("./utils"),f=a("./proto_prototype"),g=a("./proto_object"),h=a("./proto_array"),i=a("./proto_function"),j=a("./proto_string"),k={};g.extend.call(k,g),k.extend.call(k,f),k.extend.call(k,h),k.extend.call(k,j),k.extend.call(k,i),k.defineProperty(c,"__",k),k.extendProto.call(c,{_:d}),k.extend.call(c,g._constants);var l=k.mapKeys.call(k,e.makeProtoFunction,!0);k.extend.call(c,l);var m=k.mapKeys.call(k,e.makeProtoInstanceMethod,!0);k.extendProto.call(c,m),"object"==typeof window&&(window._&&(c.underscore=window._),window._=c),"object"==typeof b&&b.exports&&(b.exports=c)},{"./proto_array":88,"./proto_function":89,"./proto_object":90,"./proto_prototype":91,"./proto_string":92,"./utils":93}],88:[function(a,b){"use strict";function c(a){if(!a.length)return this;var b=[this.length,0].concat(a);return j.splice.apply(this,b),this}function d(a){if(!a.length)return this;var b=[0,0].concat(a);return j.splice.apply(this,b),this}function e(){return j.slice.call(this)}function f(a){var b={},c=Array.isArray(a);return j.forEach.call(this,function(d,e){b[d]=c?a[e]:a}),b}function g(a,b){var c={};return Array.prototype.forEach.call(this,function(d,e){c[d]=a.call(b,d,e,this)},this),c}var h=a("./proto_object"),i=a("./utils"),j=b.exports={appendArray:c,prependArray:d,toArray:e,object:f,mapToObject:g},k=["join","pop","push","concat","reverse","shift","unshift","slice","splice","sort","filter","forEach","some","every","map","indexOf","lastIndexOf","reduce","reduceRight"],l=g.call(k,function(a){return Array.prototype[a]});h.extend.call(j,l),j.find=Array.prototype.find||i.makeFindMethod(j.forEach,"value"),j.findIndex=Array.prototype.findIndex||i.makeFindMethod(j.forEach,"index")},{"./proto_object":90,"./utils":93}],89:[function(require,module,exports){"use strict";function makeFunction(arg1,arg2,funcBody){for(var name=this,count=arguments.length-1,funcBody=arguments[count],func,code="",i=0;count>i;i++)code+=", "+arguments[i];return code=["func = function ",name,"(",code.slice(2),") {\n",funcBody,"\n}"].join(""),eval(code),func}function partial(){var a=this,b=slice.call(arguments);return function(){return a.apply(this,b.concat(slice.call(arguments)))}}function partialRight(){var a=this,b=slice.call(arguments);return function(){return a.apply(this,slice.call(arguments).concat(b))}}function memoize(a,b){var c=this,d={},e=[];return b=b||1e3,function(){var f=a?a.apply(this,arguments):arguments[0];if(d.hasOwnProperty(f))return d[f];var g=d[f]=c.apply(this,arguments);return e.push(f),e.length>b&&delete d[e.shift()],g}}function delay(a){var b=slice.call(arguments,1);return _delay(this,a,b)}function defer(){return _delay(this,1,arguments)}function _delay(a,b,c){return setTimeout(a.apply.bind(a,null,c),b)}function debounce(a,b){var c,d,e,f,g,h=this;return function(){function i(){var j=Date.now()-f;a>j?c=setTimeout(i,a-j):(c=null,b||(g=h.apply(e,d)))}e=this,d=arguments,f=Date.now();var j=b&&!c;return c||(c=setTimeout(i,a)),j&&(g=h.apply(e,d)),g}}var functionMethods=module.exports={makeFunction:makeFunction,partial:partial,partialRight:partialRight,memoize:memoize,delay:delay,defer:defer,debounce:debounce},slice=Array.prototype.slice},{}],90:[function(a,b){"use strict";function c(a,b){var c={};return m.call(a,function(b,d){c[d]=Object.getOwnPropertyDescriptor(a,d)},this,b),Object.defineProperties(this,c),this}function d(){var a=Object.create(this.constructor.prototype);return c.call(a,this),a}function e(a,b,c){return Object.defineProperty(this,a,f(b,c)),this}function f(a,b){var d={value:a};return b&&c.call(d,{enumerable:!!(b&w.ENUMERABLE),configurable:!!(b&w.CONFIGURABLE),writable:!!(b&w.WRITABLE)}),d}function g(a,b){var c=n.call(a,function(a){return f(a,b)},!0);return Object.defineProperties(this,c),this}function h(a,b){return i(this,a,b,[])}function i(a,b,c,d){return d.indexOf(b)>=0?void 0:(d.push(b),m.call(b,function(e,f){var g=Object.getOwnPropertyDescriptor(b,f);"object"==typeof e?(a.hasOwnProperty(f)&&"object"==typeof a[f]||(a[f]={}),i(a[f],e,c,d)):Object.defineProperty(a,f,g)},this,c),a)}function j(){return Object.getOwnPropertyNames(this)}function k(a,b){for(var c=b?Object.keys(this):j.call(this),d=0;d<c.length;d++)if(a===this[c[d]])return c[d];return void 0}function l(a,b){var c=b?Object.keys(this):j.call(this),d=c.filter(function(b){return a===this[b]},this);return d}function m(a,b,c){var d=c?Object.keys(this):j.call(this);return d.forEach(function(c){a.call(b,this[c],c,this)},this),this}function n(a,b,c){function d(b,c,d){e[c]=Object.getOwnPropertyDescriptor(d,c),e[c].value=a.call(this,b,c,d)}var e={};return m.call(this,d,b,c),Object.create(this.constructor.prototype,e)}function o(a,b,c,d){var e=d?Object.keys(this):j.call(this),f=b;return e.forEach(function(b){f=a.call(c,f,this[b],b,this)},this),f}function p(a,b,c){function d(b,c,d){a.call(this,b,c,d)&&(e[c]=Object.getOwnPropertyDescriptor(d,c))}var e={};return m.call(this,d,b,c),Object.create(this.constructor.prototype,e)}function q(a,b,c){function d(b,c,d){if(a.call(this,b,c,d))throw x}try{m.call(this,d,b,c)}catch(e){if(e===x)return!0;throw e}return!1}function r(a,b,c){function d(b,c,d){if(!a.call(this,b,c,d))throw y}try{m.call(this,d,b,c)}catch(e){if(e===y)return!1;throw e}return!0}function s(){var a=A.apply(z,arguments),b=Object.create(this.constructor.prototype);return a.forEach(function(a){this.hasOwnProperty(a)&&(b[a]=this[a])},this),b}function t(){var a=A.apply(z,arguments),b=d.call(this);return a.forEach(function(a){delete b[a]},this),b}var u=a("./utils"),v=b.exports={extend:c,clone:d,defineProperty:e,defineProperties:g,deepExtend:h,allKeys:j,keyOf:k,allKeysOf:l,eachKey:m,mapKeys:n,reduceKeys:o,filterKeys:p,someKey:q,everyKey:r,pickKeys:s,omitKeys:t},w={ENUMERABLE:1,ENUM:1,CONFIGURABLE:2,CONF:2,WRITABLE:4,WRIT:4};e.call(v,"_constants",w),v.findValue=u.makeFindMethod(m,"value"),v.findKey=u.makeFindMethod(m,"key");var x={},y={},z=Array.prototype,A=z.concat},{"./utils":93}],91:[function(require,module,exports){"use strict";function extendProto(a){var b={};return __.eachKey.call(a,function(a,c){b[c]={enumerable:!1,configurable:!1,writable:!1,value:a}}),Object.defineProperties(this.prototype,b),this}function createSubclass(name,applyConstructor){var thisClass=this,subclass;name=name||"";var constructorCode=applyConstructor===!1?"":"thisClass.apply(this, arguments);";return eval("subclass = function "+name+"(){ "+constructorCode+" }"),makeSubclass.call(subclass,thisClass),__.extend.call(subclass,thisClass,!0),subclass}function makeSubclass(a){return this.prototype=Object.create(a.prototype),extendProto.call(this,{constructor:this}),this}var prototypeMethods=module.exports={extendProto:extendProto,createSubclass:createSubclass,makeSubclass:makeSubclass},__=require("./proto_object");__.extend.call(__,require("./proto_function"))},{"./proto_function":89,"./proto_object":90}],92:[function(a,b){"use strict";function c(){return this[0].toUpperCase()+this.slice(1)}function d(){return this[0].toLowerCase()+this.slice(1)}b.exports={firstUpperCase:c,firstLowerCase:d}},{}],93:[function(a,b){"use strict";function c(a){return function(){return this.self=a.apply(this.self,arguments),this}}function d(a){return function(){return a.call.apply(a,arguments)}}function e(a,b){var c="value"==b?0:1;return function(b,d){function e(a,d,e){var h;try{h=b.call(this,a,d,e)}catch(i){throw g=i,f}if(h)throw arguments[c]}var g;try{a.call(this,e,d)}catch(h){if(h===f)throw g;return h}return c&&a==Array.prototype.forEach?-1:void 0}}var f=(b.exports={makeProtoInstanceMethod:c,makeProtoFunction:d,makeFindMethod:e},new Error)},{}]},{},[58]);
=======
h.extendProto(i,{init:c,getState:d,setState:e}),g.add(i),b.exports=i},{"../c_facet":13,"./cf_registry":26,"mol-proto":87}],26:[function(a,b){"use strict";var c=a("../../abstract/registry"),d=a("../c_facet"),e=new c(d);e.add(d),b.exports=e},{"../../abstract/registry":5,"../c_facet":13}],27:[function(a,b){"use strict";function c(a,b,c){c.parse().validate(),this.scope=a,this.el=b,this.attr=c,this.name=c.compName,this.ComponentClass=d(c),this.extraFacetsClasses=e(this.ComponentClass,c),f(this.ComponentClass,this.extraFacetsClasses)&&(this.container={})}function d(a){var b=g.get(a.compClass);if(!b)throw new i("class "+a.compClass+" is not registered");return b}function e(a,b){var c=b.compFacets,d={};return Array.isArray(c)&&c.forEach(function(c){if(c=j.firstUpperCase(c),a.hasFacet(c))throw new i("class "+a.name+" already has facet "+c);if(d[c])throw new i("component "+b.compName+" already has facet "+c);var e=h.get(c);d[c]=e}),d}function f(a,b){function c(){return a.prototype.facetsClasses&&j.someKey(a.prototype.facetsClasses,d)}function d(a){return a.requiresFacet("container")}return a.hasFacet("container")||"Container"in b||j.someKey(b,d)||c()}var g=a("./c_registry"),h=a("./c_facets/cf_registry"),i=a("../util/error").Binder,j=a("mol-proto");b.exports=c},{"../util/error":76,"./c_facets/cf_registry":26,"./c_registry":28,"mol-proto":87}],28:[function(a,b){"use strict";var c=a("../abstract/registry"),d=a("./c_class"),e=new c(d);e.add(d),b.exports=e},{"../abstract/registry":5,"./c_class":12}],29:[function(a,b){"use strict";function c(a){return a.hasOwnProperty(h.componentRef)}function d(a){return a&&a[h.componentRef]}function e(a,b,c){i(b,j.Optional(Boolean)),i(c,j.Optional(j.OneOf(Function,String)));var d=f(c);return g(a,b,d)}function f(a){if("function"==typeof a)return a;if("string"==typeof a){var b=_.firstLowerCase(a);return function(a){return a.hasFacet(b)}}}function g(a,b,c){if(b!==!1){var e=d(a);if(e&&(!c||c(e)))return e}return a.parentNode?g(a.parentNode,!0,c):void 0}{var h=a("../config"),i=a("../util/check"),j=i.Match;b.exports={isComponent:c,getComponent:d,getContainingComponent:e,_makeComponentConditionFunc:f}}},{"../config":48,"../util/check":72}],30:[function(a,b){"use strict";var c=a("../c_class"),d=a("../c_registry"),e=c.createComponentClass("View",["container"]);d.add(e),b.exports=e},{"../c_class":12,"../c_registry":28}],31:[function(a,b){"use strict";function c(a){h.prototype.init.apply(this,arguments),this.component=a,this.elData=i(a.el)}function d(){var a=this.component.data.config.get,b="function"==typeof a?a.call(this.component):this.elData.get(this.component.el);return this.component.data._value=b,b}function e(a){var b=this.component.data.config.event,c=b||this.elData.event(this.component.el);return""==a&&c?c:void 0}function f(a,b,c){return c.newValue!=c.oldValue}function g(){var a=this.component.data._value,b=this.value(),c={path:"",type:"changed",oldValue:a,newValue:b};return c}var h=a("../../messenger/m_api"),i=a("./de_data"),j=a("mol-proto"),k=a("../../util/check"),l=(k.Match,j.createSubclass(h,"DataMsgAPI",!0));j.extendProto(l,{init:c,translateToSourceMessage:e,filterSourceMessage:f,createInternalData:g,value:d}),b.exports=l},{"../../messenger/m_api":54,"../../util/check":72,"./de_data":32,"mol-proto":87}],32:[function(a,b){"use strict";function c(a){var b=h[a.type];return b?b.property:h.byDefault.property}function d(a){var b=h[a.type];return b?b.event:h.byDefault.event}var e=a("mol-proto"),f=function(a){var b=a.tagName.toLowerCase(),c=g[b];return c||g.byDefault};b.exports=f;var g={byDefault:{property:"innerHTML"},div:{property:"innerHTML"},span:{property:"innerHTML",event:"input"},input:{property:c,event:d},textarea:{property:"value",event:"input"},select:{property:"value",event:"change"},img:{property:"src"}};e.eachKey(g,function(a){var b=a.property,c=a.event;"function"!=typeof b&&(a.property=function(){return b});var d=a.property;"function"!=typeof c&&(a.event=function(){return c}),a.get||(a.get=function(a){return a[d(a)]}),a.set||(a.set=function(a,b){return a[d(a)]="undefined"==typeof b?"":b})});var h={byDefault:{property:"value",event:"input"},checkbox:{property:"checked",event:"change"},radio:{property:"checked",event:"change"},text:{property:"value",event:"input"}}},{"mol-proto":87}],33:[function(a,b){"use strict";var c=a("mol-proto"),d={ClipboardEvent:["copy","cut","paste","beforecopy","beforecut","beforepaste"],Event:["input","readystatechange"],FocusEvent:["focus","blur","focusin","focusout"],KeyboardEvent:["keydown","keypress","keyup"],MouseEvent:["click","contextmenu","dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","mouseout","mouseover","show"],TouchEvent:["touchstart","touchend","touchmove","touchenter","touchleave","touchcancel"]};if("undefined"!=typeof window)var e=window;else e={},c.eachKey(d,function(a,b){var d=c.makeFunction(b,"type","properties","this.type = type; _.extend(this, properties);");e[b]=d});var f={};c.eachKey(d,function(a,b){a.forEach(function(a){if(Object.hasOwnProperty(f,a))throw new Error("duplicate event type "+a);f[a]=e[b]})}),b.exports=f},{"mol-proto":87}],34:[function(a,b){"use strict";function c(a,b,c,d){l(d,i),this.component=d,h.prototype.init.apply(this,arguments)}function d(){return this.component.el}function e(a,b){if(b&&"string"==typeof b){var c=o.test(b);b=b.replace(o,""),this.dom()[a](b,this,c)}}function f(a){var b;"undefined"!=typeof window&&(b=a.eventPhase==window.Event.CAPTURING_PHASE),b&&(a+=p),this.dispatchMessage(a.type,a)}function g(a,b){l(a,String),l(b,m.Optional(Object)),a=a.replace(o,"");var c=j[a];if("function"!=typeof c)throw new Error("unsupported event type");"undefined"!=typeof b&&(b.type=a);var d=new c(a,b),e=this.dom().dispatchEvent(d);return e}var h=a("../../messenger/m_source"),i=a("../c_class"),j=a("./de_constrs"),k=a("mol-proto"),l=a("../../util/check"),m=l.Match,n=k.createSubclass(h,"DOMMessageSource",!0);k.extendProto(n,{init:c,addSourceSubscriber:k.partial(e,"addEventListener"),removeSourceSubscriber:k.partial(e,"removeEventListener"),trigger:g,dom:d,handleEvent:f}),b.exports=n;var o=/__capture$/,p="__capture"},{"../../messenger/m_source":56,"../../util/check":72,"../c_class":12,"./de_constrs":33,"mol-proto":87}],35:[function(a,b){"use strict";function c(a,b,c,d){if(l(d,j),this.component=d,"iframe"!=d.el.tagName.toLowerCase())throw new m("component for FrameMessageSource can only be attached to iframe element");i.prototype.init.apply(this,arguments)}function d(){return this.component.el.contentWindow}function e(){this.frameWindow().addEventListener("message",this,!1)}function f(){this.frameWindow().removeEventListener("message",this,!1)}function g(a,b){b=b||{},b.type=a,this.frameWindow().postMessage(b,"*")}function h(a){this.dispatchMessage(a.data.type,a)}var i=a("../../messenger/m_source"),j=a("../c_class"),k=a("mol-proto"),l=a("../../util/check"),m=(l.Match,a("../../util/error").FrameMessageSource),n=k.createSubclass(i,"FrameMessageSource",!0);k.extendProto(n,{init:c,addSourceSubscriber:e,removeSourceSubscriber:f,trigger:g,frameWindow:d,handleEvent:h}),b.exports=n},{"../../messenger/m_source":56,"../../util/check":72,"../../util/error":76,"../c_class":12,"mol-proto":87}],36:[function(a,b){"use strict";function c(a,b){o.defineProperties(this,{_rootEl:a,_hostObject:b},o.WRIT)}function d(a,b){if("string"==typeof b?a.name=b:b=a.name,this[b])throw new q("duplicate object name: "+b);j(b),this[b]=a,a.scope=this,"function"==typeof a.postMessage&&a.postMessage("insertedinscope")}function e(a){p(a,c),a._each(d,this)}function f(a,b){b._add(a),this._remove(a.name),a.scope=b}function g(){}function h(a){a._each(d,this)}function i(a,b){o.eachKey(this,a,b||this,!0)}function j(a){if(!s.test(a))throw new q("name should start from letter, this name is not allowed: "+a)}function k(){return Object.keys(this).length}function l(){var a=Object.keys(this)[0];return a&&this[a]}function m(a,b){return a in this?(b||delete this[a].scope,delete this[a],void 0):r.warn("removing object that is not in scope")}function n(){this._each(function(a,b){delete this[b].scope,delete this[b]},this)}var o=a("mol-proto"),p=a("../util/check"),q=(p.Match,a("../util/error").Scope),r=a("../util/logger");o.extendProto(c,{_add:d,_copy:e,_each:i,_move:f,_addNew:g,_merge:h,_length:k,_any:l,_remove:m,_clean:n}),b.exports=c;var s=/^[A-Za-z][A-Za-z0-9\_\$]*$/},{"../util/check":72,"../util/error":76,"../util/logger":79,"mol-proto":87}],37:[function(a,b){"use strict";var c=a("../c_class"),d=a("../c_registry"),e=c.createComponentClass("MLButton",{events:void 0,dom:{cls:"ml-ui-button"}});d.add(e),b.exports=e},{"../c_class":12,"../c_registry":28}],38:[function(a,b){"use strict";function c(){k.prototype.init.apply(this,arguments),this.on("childrenbound",d)}function d(){m.defineProperties(this,{_comboInput:this.container.scope.input,_comboList:this.container.scope.datalist}),this._comboList.template.set(o),this._comboInput.data.on("input",{subscriber:i,context:this})}function e(){return this._comboInput?this._comboInput.data.get():void 0}function f(a){return h.call(this,"set",a)}function g(){return h.call(this,"del",value)}function h(a,b){if(this._comboInput){var c=this._comboInput.data[a](b);return i.call(this),c}}function i(){this.data.getMessageSource().dispatchMessage(n)}function j(){this._comboList.template.render({comboOptions:this.model.get()})}var k=a("../c_class"),l=a("../c_registry"),m=a("mol-proto"),n="mlcombochange",o='{{~ it.comboOptions :option }} 							<option value="{{= option.label }}"></option> 					     {{~}}',p=k.createComponentClass("MLCombo",{events:void 0,data:{get:e,set:f,del:g,splice:void 0,event:n},model:{messages:{"***":{subscriber:j,context:"owner"}}},dom:{cls:"ml-ui-datalist"},container:void 0});l.add(p),b.exports=p,m.extendProto(p,{init:c})},{"../c_class":12,"../c_registry":28,"mol-proto":87}],39:[function(a,b){"use strict";var c=a("../c_class"),d=a("../c_registry"),e=c.createComponentClass("MLDate",{events:void 0,data:void 0,dom:{cls:"ml-ui-date"}});d.add(e),b.exports=e},{"../c_class":12,"../c_registry":28}],40:[function(a,b){"use strict";var c=a("../c_class"),d=a("../c_registry"),e=c.createComponentClass("MLGroup",{container:void 0,data:void 0,events:void 0,dom:{cls:"ml-ui-group"}});d.add(e),b.exports=e},{"../c_class":12,"../c_registry":28}],41:[function(a,b){"use strict";var c=a("../c_class"),d=a("../c_registry"),e=c.createComponentClass("MLHyperlink",{events:void 0,data:void 0,dom:{cls:"ml-ui-hyperlink"}});d.add(e),b.exports=e},{"../c_class":12,"../c_registry":28}],42:[function(a,b){"use strict";function c(a){this.el.disabled=a}var d=a("../c_class"),e=a("../c_registry"),f=d.createComponentClass("MLInput",{data:void 0,events:void 0,dom:{cls:"ml-ui-input"}});e.add(f),b.exports=f,_.extendProto(f,{disable:c})},{"../c_class":12,"../c_registry":28}],43:[function(a,b){"use strict";function c(a){this.el.disabled=a}function d(){var a=this._hostObject.owner;a.template.render({selectOptions:this.get()})}var e=a("../c_class"),f=a("../c_registry"),g=a("mol-proto"),h=e.createComponentClass("MLList",{dom:{cls:"ml-ui-list"},data:void 0,events:void 0,model:{messages:{"***":d}},template:{template:'{{~ it.selectOptions :option }} 						<option value="{{= option.value }}">{{= option.label }}</option> 				   {{~}}'}});f.add(h),b.exports=h,g.extendProto(h,{disable:c})},{"../c_class":12,"../c_registry":28,"mol-proto":87}],44:[function(a,b){"use strict";function c(){_.defineProperty(this,"_radioList",[],_.CONF),_.defineProperty(this,n,o+l()),j.prototype.init.apply(this,arguments)}function d(a){var b,c=this._radioList;return c.length?(c.forEach(function(c){c.checked=c.value==a,c.checked&&(b=a)}),h.call(this),b):void 0}function e(){var a=_.find(this._radioList,function(a){return a.checked});return a&&a.value||void 0}function f(){var a=this._radioList;return a.length&&a.forEach(function(a){a.checked=!1}),h.call(this),void 0}function g(a,b){"radio"==b.target.type&&h.call(this)}function h(){this.data.getMessageSource().dispatchMessage(m)}function i(){this.template.render({radioOptions:this.model.get(),elementName:this[n]});var a=this.el.querySelectorAll('input[type="radio"]'),b=this._radioList;b.length=0,_.forEach(a,b.push,b)}var j=a("../c_class"),k=a("../c_registry"),l=a("../../util/count"),m="mlradiogroupchange",n="_mlRadioGroupElementID",o="ml-radio-group-",p=j.createComponentClass("MLRadioGroup",{data:{set:d,get:e,del:f,splice:void 0,event:m},model:{messages:{"***":{subscriber:i,context:"owner"}}},events:{messages:{click:{subscriber:g,context:"owner"}}},container:void 0,dom:{cls:"ml-ui-radio-group"},template:{template:'{{~ it.radioOptions :option }} 						{{##def.elID:{{= it.elementName }}-{{= option.value }}#}} 						<input id="{{# def.elID }}" type="radio" value="{{= option.value }}" name="{{= it.elementName }}"> 						<label for="{{# def.elID }}">{{= option.label }}</label> 				   {{~}}'}});k.add(p),b.exports=p,_.extendProto(p,{init:c})},{"../../util/count":74,"../c_class":12,"../c_registry":28}],45:[function(a,b){"use strict";function c(a){this.el.disabled=a}function d(){this.template.render({selectOptions:this.model.get()})}var e=a("../c_class"),f=a("../c_registry"),g=a("mol-proto"),h=e.createComponentClass("MLSelect",{dom:{cls:"ml-ui-select"},data:void 0,events:void 0,model:{messages:{"***":{subscriber:d,context:"owner"}}},template:{template:'{{~ it.selectOptions :option }} 						<option value="{{= option.value }}">{{= option.label }}</option> 				   {{~}}'}});f.add(h),b.exports=h,g.extendProto(h,{disable:c})},{"../c_class":12,"../c_registry":28,"mol-proto":87}],46:[function(a,b){"use strict";var c=a("../c_class"),d=a("../c_registry"),e=c.createComponentClass("MLTextarea",{data:void 0,events:void 0,dom:{cls:"ml-ui-textarea"}});d.add(e),b.exports=e},{"../c_class":12,"../c_registry":28}],47:[function(a,b){"use strict";var c=a("../c_class"),d=a("../c_registry"),e=c.createComponentClass("MLTime",{events:void 0,data:void 0,dom:{cls:"ml-ui-time"}});d.add(e),b.exports=e},{"../c_class":12,"../c_registry":28}],48:[function(a,b){"use strict";function c(a){d.deepExtend(c,a)}var d=a("mol-proto"),e=a("dot");b.exports=c,c({attrs:{bind:"ml-bind",load:"ml-load"},componentRef:"___milo_component",componentPrefix:"milo_",template:{compile:e.compile},check:!0})},{dot:86,"mol-proto":87}],49:[function(a,b){"use strict";function c(a,b){m?d(a,b):g.on("domready",function(){d(a,b)})}function d(a,b){"function"==typeof a&&(b=a,a=void 0),a=a||document.body,g.postMessage("loader",{state:"started"}),e(a,function(a){g.postMessage("loader",{state:"finished",views:a}),b(a)})}function e(a,b){var c=a.querySelectorAll("["+j.attrs.load+"]"),d={},e=c.length,g=0;_.forEach(c,function(a){f(a,function(c){d[a.id]=c||a,g++,g==e&&b(d)})})}function f(a,b){if(i.children(a).length)throw new l("can't load html into element that is not empty");var c=new k(a);c.parse().validate(),h.get(c.loadUrl,function(d,e){return d?(d.message=d.message||"can't load file "+c.loadUrl,b(d),void 0):(a.innerHTML=e,b(null),void 0)})}var g=a("./mail"),h=a("./util/request"),i=(a("./util/logger"),a("./util/dom")),j=a("./config"),k=a("./attributes/a_load"),l=a("./util/error").Loader;b.exports=c;var m=!1;g.on("domready",function(){m=!0})},{"./attributes/a_load":8,"./config":48,"./mail":50,"./util/dom":75,"./util/error":76,"./util/logger":79,"./util/request":82}],50:[function(a,b){"use strict";var c=a("../messenger"),d=a("./mail_api"),e=a("./mail_source"),f=(a("mol-proto"),new c),g=new e(f,{trigger:"trigger"},new d);f._setMessageSource(g),b.exports=f},{"../messenger":53,"./mail_api":51,"./mail_source":52,"mol-proto":87}],51:[function(a,b){"use strict";function c(a){return"domready"==a?"readystatechange":i.test(a)?"message":void 0}function d(a,b,c){return"readystatechange"==a?this._domReadyFired?!1:(f.defineProperty(this,"_domReadyFired",!0,f.WRIT),!0):"message"==a?j+c.data.type==b:void 0}var e=a("../messenger/m_api"),f=a("mol-proto"),g=a("../util/check"),h=(g.Match,f.createSubclass(e,"MailMsgAPI",!0));f.extendProto(h,{translateToSourceMessage:c,filterSourceMessage:d}),b.exports=h;var i=/^message\:/,j="message:"},{"../messenger/m_api":54,"../util/check":72,"mol-proto":87}],52:[function(a,b){"use strict";function c(a){if(e(a))if("loading"==document.readyState)document.addEventListener("readystatechange",this,!1);else{var b=k.readystatechange,c=new b("readystatechange",{target:document});this.dispatchMessage("readystatechange",c)}else this._windowSubscriberMethod("addEventListener",a)}function d(a){e(a)?document.removeEventListener("readystatechange",this,!1):this._windowSubscriberMethod("removeEventListener",a)}function e(a){return"readystatechange"==a&&"object"==typeof document}function f(a){return"message"==a&&"object"==typeof window}function g(a,b){f(b)&&window[a]("message",this,!1)}function h(a){this.dispatchMessage(a.type,a)}function i(a,b){b=b||{},b.type="message:"+a,"object"==typeof window&&window.postMessage(b,"*")}var j=a("../messenger/m_source"),k=a("../components/msg_src/de_constrs"),l=(a("../util/error").MailMessageSource,a("mol-proto")),m=a("../util/check"),n=(m.Match,l.createSubclass(j,"MailMessageSource",!0));l.extendProto(n,{addSourceSubscriber:c,removeSourceSubscriber:d,trigger:i,_windowSubscriberMethod:g,handleEvent:h}),b.exports=n},{"../components/msg_src/de_constrs":33,"../messenger/m_source":56,"../util/check":72,"../util/error":76,"mol-proto":87}],53:[function(a,b){"use strict";function c(a,b,c,d){c&&this._setMessageSource(c),this.options=d||{},u.defineProperties(this,{_messageSubscribers:{},_patternMessageSubscribers:{}})}function d(a,b){v(a,w.OneOf(String,[String],RegExp)),v(b,w.OneOf(Function,{subscriber:Function,context:w.Any})),"string"==typeof a&&(a=a.split(y));var c=this._chooseSubscribersHash(a);if(a instanceof RegExp)return this._registerSubscriber(c,a,b);var d=!1;return a.forEach(function(a){var e=this._registerSubscriber(c,a,b);d=d||e},this),d}function e(a,b,c){if(!a[b]||!a[b].length){a[b]=[],b instanceof RegExp&&(a[b].pattern=b),this._messageSource&&this._messageSource.onSubscriberAdded(b);var d=!0}var e=a[b],g=d||-1==f(e,c);return g&&e.push(c),g}function f(a,b){var c="function"==typeof b;return u.findIndex(a,function(a){return c?b==a:b.subscriber==a.subscriber&&b.context==a.context})}function g(a){v(a,w.ObjectHash(w.OneOf(Function,{subscriber:Function,context:w.Any})));var b=u.mapKeys(a,function(a,b){return this.on(b,a)},this);return b}function h(a,b){v(a,w.OneOf(String,[String],RegExp)),v(b,w.Optional(w.OneOf(Function,{subscriber:Function,context:w.Any}))),"string"==typeof a&&(a=a.split(y));var c=this._chooseSubscribersHash(a);if(a instanceof RegExp)return this._removeSubscriber(c,a,b);var d=!1;return a.forEach(function(a){var e=this._removeSubscriber(c,a,b);d=d||e},this),d}function i(a,b,c){var d=a[b];if(!d||!d.length)return!1;if(c){var e=f(d,c);if(-1==e)return!1;d.splice(e,1),d.length||this._removeAllSubscribers(a,b)}else this._removeAllSubscribers(a,b);return!0}function j(a,b){delete a[b],this._messageSource&&"string"==typeof b&&this._messageSource.onSubscriberRemoved(b)}function k(a){v(a,w.ObjectHash(w.Optional(w.OneOf(Function,{subscriber:Function,context:w.Any}))));var b=u.mapKeys(a,function(a,b){return this.off(b,a)},this);return b}function l(a,b,c){v(a,w.OneOf(String,RegExp)),v(c,w.Optional(Function));var d=this._chooseSubscribersHash(a),e=d[a];this._callSubscribers(a,b,c,e),"string"==typeof a&&this._callPatternSubscribers(a,b,c)}function m(a,b,c){u.eachKey(this._patternMessageSubscribers,function(d){var e=d.pattern;if(e.test(a)){var f=this.options.postPatternAsMessage?e:a;this._callSubscribers(f,b,c,d)}},this)}function n(a,b,c,d){d&&d.length&&d.forEach(function(d){"function"==typeof d?d.call(this._hostObject,a,b,c):d.subscriber.call(d.context,a,b,c)},this)}function o(a,b){v(a,w.OneOf(String,RegExp));var c=this._chooseSubscribersHash(a),d=c[a]?[].concat(c[a]):[];return b!==!1&&"string"==typeof a&&u.eachKey(this._patternMessageSubscribers,function(b){var c=b.pattern;b&&b.length&&c.test(a)&&u.appendArray(d,b)}),d.length?d:void 0}function p(a){return a instanceof RegExp?this._patternMessageSubscribers:this._messageSubscribers}function q(a){v(a,t),u.defineProperty(this,"_messageSource",a),a.messenger=this}function r(){return this._messageSource}var s=a("../abstract/mixin"),t=a("./m_source"),u=a("mol-proto"),v=a("../util/check"),w=v.Match,x=(a("../util/error").Messenger,u.createSubclass(s,"Messenger")),y=x.messagesSplitRegExp=/\s*(?:\,|\s)\s*/;u.extendProto(x,{init:c,on:d,onMessage:d,off:h,offMessage:h,onMessages:g,offMessages:k,postMessage:l,getSubscribers:o,getMessageSource:r,_chooseSubscribersHash:p,_registerSubscriber:e,_removeSubscriber:i,_removeAllSubscribers:j,_callPatternSubscribers:m,_callSubscribers:n,_setMessageSource:q}),x.defaultMethods={on:"on",off:"off",onMessages:"onMessages",offMessages:"offMessages",postMessage:"postMessage",getSubscribers:"getSubscribers"},b.exports=x;var z="__matched_message_pattern";u.defineProperty(x,"MATCHED_PATTERN_DATA_PROPERTY",z)},{"../abstract/mixin":4,"../util/check":72,"../util/error":76,"./m_source":56,"mol-proto":87}],54:[function(a,b){"use strict";function c(){this.init&&this.init.apply(this,arguments)}function d(){k.defineProperty(this,"_internalMessages",{})}function e(a){var b,c=this.translateToSourceMessage(a);if("undefined"!=typeof c)return this._internalMessages.hasOwnProperty(c)?(b=this._internalMessages[c],-1==b.indexOf(a)?b.push(a):logger.warn("Duplicate addInternalMessage call for internal message "+a),void 0):(b=this._internalMessages[c]=[],b.push(a),c)}function f(a){function b(){logger.warn("notification received: un-subscribe from internal message "+a+" without previous subscription notification")}var c=this.translateToSourceMessage(a);if("undefined"!=typeof c){var d=this._internalMessages[c];if(d&&d.length){var e=d.indexOf(a);if(e>=0){if(d.splice(e,1),0==d.length)return delete this._internalMessages[c],c}else b()}else b()}}function g(a){return this._internalMessages[a]}function h(a){return a}function i(a,b,c){return c}function j(){return!0}var k=a("mol-proto");b.exports=c,k.extendProto(c,{init:d,addInternalMessage:e,removeInternalMessage:f,getInternalMessages:g,translateToSourceMessage:h,createInternalData:i,filterSourceMessage:j})},{"mol-proto":87}],55:[function(a,b){"use strict";function c(){f.prototype.init.apply(this,arguments),g.defineProperty(this,"_patternInternalMessages",{})}function d(){var a=f.prototype.addInternalMessage.apply(this,arguments);return a&&a instanceof RegExp&&(this._internalMessages[a].pattern=a,this._patternInternalMessages[a]=this._internalMessages[a]),a}function e(a){var b=f.prototype.getInternalMessages.apply(this,arguments);if("string"==typeof a){b=b||[];var c=g.object(b,!0);g.eachKey(this._patternInternalMessages,function(d){var e=d.pattern;e.test(a)&&d.forEach(function(a){c[a]||(b.push(a),c[a]=!0)})})}return b}var f=a("./m_api"),g=a("mol-proto"),h=g.createSubclass(f,"MessengerRegexpAPI");b.exports=h,g.extendProto(h,{init:c,addInternalMessage:d,getInternalMessages:e})},{"./m_api":54,"mol-proto":87}],56:[function(a,b){"use strict";function c(a,b,c){this._prepareMessengerAPI(c)}function d(a){l.defineProperty(this,"messenger",a)}function e(a){m(a,n.Optional(j)),a||(a=new j),l.defineProperty(this,"messengerAPI",a)}function f(a){var b=this.messengerAPI.addInternalMessage(a);"undefined"!=typeof b&&this.addSourceSubscriber(b)}function g(a){var b=this.messengerAPI.removeInternalMessage(a);"undefined"!=typeof b&&this.removeSourceSubscriber(b)}function h(a,b){var c=this.messengerAPI,d=c.getInternalMessages(a);d&&d.forEach(function(d){var e=c.createInternalData(a,d,b),f=c.filterSourceMessage(a,d,e);f&&this.messenger.postMessage(d,e)},this)}var i=a("../abstract/mixin"),j=a("./m_api"),k=(a("../util/logger"),a("../util/error").toBeImplemented),l=a("mol-proto"),m=a("../util/check"),n=m.Match,o=l.createSubclass(i,"MessageSource",!0);b.exports=o,l.extendProto(o,{init:c,setMessenger:d,onSubscriberAdded:f,onSubscriberRemoved:g,dispatchMessage:h,_prepareMessengerAPI:e,trigger:k,addSourceSubscriber:k,removeSourceSubscriber:k})},{"../abstract/mixin":4,"../util/check":72,"../util/error":76,"../util/logger":79,"./m_api":54,"mol-proto":87}],57:[function(a,b){"use strict";function c(a,b,c,d){f.prototype.init.apply(this,arguments),this.sourceMessenger=d}function d(a){this.sourceMessenger.on(a,{context:this,subscriber:this.dispatchMessage})}function e(a){this.sourceMessenger.off(a,{context:this,subscriber:this.dispatchMessage})}var f=a("./m_source"),g=a("mol-proto"),h=(a("../util/check"),g.createSubclass(f,"MessengerMessageSource"));b.exports=h,g.extendProto(h,{init:c,addSourceSubscriber:d,removeSourceSubscriber:e})},{"../util/check":72,"./m_source":56,"mol-proto":87}],58:[function(a,b){"use strict";function c(a){c.mail.on("domready",a)}var d=a("mol-proto");d.extend(c,{loader:a("./loader"),binder:a("./binder"),minder:a("./minder"),mail:a("./mail"),config:a("./config"),util:a("./util"),classes:a("./classes"),attributes:a("./attributes"),ComponentFacet:a("./components/c_facet"),Component:a("./components/c_class"),Messenger:a("./messenger"),Model:a("./model"),registry:a("./registry")}),a("./use_facets"),a("./use_components"),"object"==typeof b&&b.exports&&(b.exports=c),"object"==typeof window&&(window.milo=c)},{"./attributes":9,"./binder":10,"./classes":11,"./components/c_class":12,"./components/c_facet":13,"./config":48,"./loader":49,"./mail":50,"./messenger":53,"./minder":59,"./model":62,"./registry":69,"./use_components":70,"./use_facets":71,"./util":77,"mol-proto":87}],59:[function(a,b){"use strict";function c(a,b,c,e){if(Array.isArray(a)){var f=a,g=f.map(function(a){return new d(a[0],a[1],a[2],a[3])});return g}return new d(a,b,c,e)}var d=a("./model/connector");b.exports=c},{"./model/connector":61}],60:[function(a,b){"use strict";function c(a,b,c){this._changesQueue.length||e.defer(f,this,c),this._changesQueue.push(b)}function d(a){a&&a(null,!1),this.postMessage("changestarted"),this._changesQueue.forEach(function(a){var b=this.path(a.path);if(b)if("splice"==a.type){var c=a.index,d=a.removed.length,e=[c,d];e=e.concat(a.newValue.slice(c,c+a.addedCount)),b.splice.apply(b,e)}else{var f=g[a.type];f?b[f](a.newValue):logger.error("unknown data change type")}},this),this._changesQueue.length=0,a&&a(null,!0),this.postMessage("changecompleted")}var e=a("mol-proto");b.exports=c,c.initialize=function(){e.defineProperty(this,"_changesQueue",[])};var f=Function.prototype.call.bind(d),g={added:"set",changed:"set",deleted:"del",removed:"del"}},{"mol-proto":87}],61:[function(a,b){"use strict";function c(a,b,c,e){function f(){throw new g("invalid Connector mode: "+b)}var i=b.match(j);i||f();var k=i[1].length,l=i[2].length;k&&l&&k!=l&&f(),k||l||f(),h.extend(this,{ds1:a,ds2:c,mode:b,depth1:k,depth2:l,isOn:!1});var m=e&&e.pathTranslation;m&&h.extend(this,{pathTranslation1:d(m),pathTranslation2:m});var n=e&&e.dataTranslation;n&&h.extend(this,{dataTranslation1:n["<-"],dataTranslation2:n["->"]}),this.turnOn()}function d(a){var b={};return h.eachKey(a,function(a,c){b[a]=c}),b}function e(){function a(a,b,d,e,f,g,j){function k(a,b,c,d,e){e?h.eachKey(e,function(d,e){a[b](e,c)}):a[b](d,c)}var l=function(d,l){function m(d,f){if(!d){var h=f?"on":"off";k(b,h,c[a],e,g)}}var n=l.path,o=!1;if(f){o=!0,l=h.clone(l);var p=f[l.path];if(!p)return i.warn("Connector: data message received that should not have been subscribed to"),void 0;l.path=p}if(j){var q=j[n];q&&"function"==typeof q&&(o||(l=h.clone(l)),l.oldValue=q(l.oldValue),l.newValue=q(l.newValue))}if(c[a])var r=m;b.postMessage("changedata",l,r)};return k(d,"on",l,e,f),l}if(this.isOn)return i.warn("data sources are already connected");var b=this._subscriptionPath=new Array(this.depth1||this.depth2).join("*"),c=this;this.depth1&&(this._link1=a("_link2",this.ds1,this.ds2,b,this.pathTranslation1,this.pathTranslation2,this.dataTranslation1)),this.depth2&&(this._link2=a("_link1",this.ds2,this.ds1,b,this.pathTranslation2,this.pathTranslation1,this.dataTranslation2)),this.isOn=!0}function f(){function a(a,c){b[c]&&(a.off(b._subscriptionPath,b[c]),delete b[c])}if(!this.isOn)return i.warn("data sources are already disconnected");var b=this;a(this.ds1,"_link2"),a(this.ds2,"_link1"),this.isOn=!1}var g=a("../util/error").Connector,h=a("mol-proto"),i=a("../util/logger");b.exports=c;var j=/^(\<*)\-+(\>*)$/;h.extendProto(c,{turnOn:e,turnOff:f})},{"../util/error":76,"../util/logger":79,"mol-proto":87}],62:[function(a,b){"use strict";function c(a,b){var d=function(){return d.path.apply(d,arguments)};return d.__proto__=c.prototype,p.defineProperties(d,{_hostObject:b}),d._prepareMessengers(),a&&(d._data=a),k.initialize.call(d),d.on("changedata",k),d}function d(){return this._data}function e(a){return a?(p.splice(arguments,0,0,null,this),new(Function.prototype.bind.apply(i,arguments))):this}function f(a){a=a||this._hostObject,o.prototype._createProxyMethods.call(this._messenger,s,a)}function g(a){a=a||this._hostObject,o.prototype._createProxyMethods.call(this,t,a)}function h(){var a={postPatternAsMessage:!0},b=new l(this,void 0,void 0,a),c=new m(this,void 0,new n,b),d=new l(this,l.defaultMethods,c,a);p.defineProperties(this,{_messenger:d,_internalMessenger:b})}{var i=a("./m_path"),j=a("./synthesize"),k=(a("./path_utils"),a("./change_data")),l=a("../messenger"),m=a("../messenger/msngr_source"),n=a("./m_msg_api"),o=(a("../util/error").Model,a("../abstract/mixin")),p=a("mol-proto"),q=a("../util/check");q.Match,a("../util/logger")}b.exports=c,c.prototype.__proto__=c.__proto__,p.extendProto(c,{path:e,get:d,set:j.modelSet,splice:j.modelSplice,proxyMessenger:f,proxyMethods:g,_prepareMessengers:h});var r=p.mapToObject(["len","push","pop","unshift","shift"],function(a){return i.prototype[a]});p.extendProto(c,r);var s=["on","off","postMessage","onMessages","offMessages","getSubscribers"],t=["path","get","set","splice","len","push","pop","unshift","shift"];p.extend(c,{Path:i})},{"../abstract/mixin":4,"../messenger":53,"../messenger/msngr_source":57,"../util/check":72,"../util/error":76,"../util/logger":79,"./change_data":60,"./m_msg_api":63,"./m_path":64,"./path_utils":67,"./synthesize":68,"mol-proto":87}],63:[function(a,b){"use strict";function c(a){return a instanceof RegExp?a:e.createRegexPath(a)}var d=a("../messenger/m_api_rx"),e=a("./path_utils"),f=a("mol-proto"),g=f.createSubclass(d,"ModelMsgAPI");b.exports=g,f.extendProto(g,{translateToSourceMessage:c})},{"../messenger/m_api_rx":55,"./path_utils":67,"mol-proto":87}],64:[function(a,b){"use strict";function c(a,b){s(b,String),r.defineProperties(this,{_model:a,_path:b,_args:r.slice(arguments,1)});var c=m.parseAccessPath(b);r.defineProperty(this,"_accessPath",d(c,this._args)),this._prepareMessenger();var e=l(b,c);r.defineProperties(this,e),n.initialize.call(this),this.on("changedata",n),Object.freeze(this)}function d(a,b){return a.reduce(function(a,c){var d=c.interpolate;return a+(d?"array"==c.syntax?"["+b[d]+"]":"."+b[d]:c.property)},"")}function e(a){if(!a)return this;var b=this._args.length-1;b>0&&(a=a.replace(/\$[1-9][0-9]*/g,function(a){return"$"+(+a.slice(1)+b)}));var d=this._path+a,e=[null,this._model,d].concat(this._args.slice(1)).concat(r.slice(arguments,1));return new(Function.prototype.bind.apply(c,e))}function f(){return this.path(".length").get()||0}function g(){var a=this.len(),b=a+arguments.length;return r.splice(arguments,0,0,a,0),this.splice.apply(this,arguments),b}function h(){return this.splice(this.len()-1,1)[0]}function i(){var a=this.len();return a+=arguments.length,r.splice(arguments,0,0,0,0),this.splice.apply(this,arguments),a}function j(){return this.splice(0,1)[0]}function k(){var a=new p(this._accessPath),b=new q(this,void 0,a,this._model),c=new o(this,o.defaultMethods,b);r.defineProperty(this,"_messenger",c)}{var l=a("./synthesize"),m=a("./path_utils"),n=a("./change_data"),o=a("../messenger"),p=a("./path_msg_api"),q=a("../messenger/msngr_source"),r=a("mol-proto"),s=a("../util/check");s.Match}b.exports=c,r.extendProto(c,{path:e,len:f,push:g,pop:h,unshift:i,shift:j,_prepareMessenger:k})
},{"../messenger":53,"../messenger/msngr_source":57,"../util/check":72,"./change_data":60,"./path_msg_api":66,"./path_utils":67,"./synthesize":68,"mol-proto":87}],65:[function(a,b){"use strict";function c(a,b){return a>b?b:a>=0?a:a+b>0?a+b:0}var d={normalizeSpliceIndex:c};b.exports=d},{}],66:[function(a,b){"use strict";function c(a){f.prototype.init.apply(this,arguments),this.rootPath=a}function d(a){return a instanceof RegExp?a:this.rootPath+a}function e(a,b,c){var d=h.clone(c),e=d.path;return d.fullPath=e,0==e.indexOf(this.rootPath)?d.path=e.replace(this.rootPath,""):g.warn("ModelPath message dispatched with wrong root path"),d}var f=a("../messenger/m_api"),g=(a("./path_utils"),a("../util/logger")),h=a("mol-proto"),i=h.createSubclass(f,"ModelPathMsgAPI");b.exports=i,h.extendProto(i,{init:c,translateToSourceMessage:d,createInternalData:e})},{"../messenger/m_api":54,"../util/logger":79,"./path_utils":67,"mol-proto":87}],67:[function(a,b){"use strict";function c(a,b){b=b||v;var c=[];if(!a)return c;var d=a.replace(b,function(a){var b={property:a};return j.extend(b,y[a[0]]),"$"==a[1]&&(b.interpolate=f(b,!0)),c.push(b),""});if(d)throw new k("incorrect model path: "+a);return c}function d(a){var b=a.replace(x,function(){return""});return!b}function e(a){if(h(a,i.OneOf(String,RegExp)),a instanceof RegExp||-1==a.indexOf("*"))return a;var b=l.parseAccessPath(a,x),c="^",d=!1;b.forEach(function(a){var b=a.property,e=z[b];e?(c+="("+e+"|)",d=!0):c+=b.replace(/(\.|\[|\])/g,"\\$1")}),c+="$";try{return new RegExp(c)}catch(e){throw new k("can't construct regex for path pattern: "+a)}}function f(a,b){var c=a.property,d=b?2:1;return"array"==a.syntax?c.slice(d,c.length-1):c.slice(d)}function g(a){a=a||["on","off"];var b=j.mapToObject(a,function(a){var b=this[a];return function(a,c){var d=e(a);b.call(this,d,c)}},this);j.defineProperties(this,b)}var h=a("../util/check"),i=h.Match,j=a("mol-proto"),k=a("../util/error").Model,l={isPath:d,parseAccessPath:c,createRegexPath:e,getPathNodeKey:f,wrapMessengerMethods:g};b.exports=l;var m="\\.[A-Za-z][A-Za-z0-9_]*",n="\\[[0-9]+\\]",o="\\$[1-9][0-9]*",p="\\."+o,q="\\["+o+"\\]",r="\\.\\*",s="\\[\\*\\]",t="\\*",u=[m,n,p,q].join("|"),v=new RegExp(u,"g"),w=[u,r,s,t].join("|"),x=new RegExp(w,"g"),y={".":{syntax:"object",empty:"{}"},"[":{syntax:"array",empty:"[]"},"*":{syntax:"match",empty:"{}"}},z={".*":m,"[*]":n};z["*"]=z[".*"]+"|"+z["[*]"]},{"../util/check":72,"../util/error":76,"mol-proto":87}],68:[function(require,module,exports){"use strict";function _synthesizePathMethods(a,b){var c=_.mapKeys(synthesizers,function(c){return _synthesize(c,a,b)});return c}function _synthesize(synthesizer,path,parsedPath){function addChangeMessage(a,b,c){a.push(c),b[c.path]=c}function addTreeChangesMessages(a,b,c,d,e){var f=valueIsTree(d),g=valueIsTree(e);g&&addMessages(a,b,c,e,"added","newValue"),f&&addMessages(a,b,c,d,"removed","oldValue")}function addMessages(a,b,c,d,e,f){function g(a,b){if(Array.isArray(b)){var c=a+"[$$]";b.forEach(function(a,b){h(a,b,c)})}else{var c=a+".$$";_.eachKey(b,function(a,b){h(a,b,c)})}}function h(c,d,h){var i=h.replace("$$",d),j=b[i];if(j)j.type==e?logger.error("setter error: same message type posted on the same path"):(j.type="changed",j[f]=c);else{var k={path:i,type:e};k[f]=c,addChangeMessage(a,b,k)}valueIsTree(c)&&g(i,c)}g(c,d)}function cloneTree(a){return null==a||"object"!=typeof a?a:Array.isArray(a)?a.slice():_.clone(a)}function valueIsTree(a){return null!=a&&"object"==typeof a&&Object.keys(a).length}var method,methodCode=synthesizer({parsedPath:parsedPath,getPathNodeKey:pathUtils.getPathNodeKey});try{eval(methodCode)}catch(e){throw ModelError("ModelPath method compilation error; path: "+path+", code: "+methodCode)}return method}var pathUtils=require("../path_utils"),modelUtils=require("../model_utils"),fs=require("fs"),doT=require("dot"),_=require("mol-proto"),templates={get:"'use strict';\n/* Only use this style of comments, not \"//\" */\n\nmethod = function get() {\n	var m = {{# def.modelAccessPrefix }};\n	return m {{~ it.parsedPath :pathNode }}\n		{{? pathNode.interpolate}}\n			&& (m = m[this._args[ {{= pathNode.interpolate }} ]])\n		{{??}}\n			&& (m = m{{= pathNode.property }})\n		{{?}} {{~}};\n};\n",set:"'use strict';\n/* Only use this style of comments, not \"//\" */\n\n{{# def.include_defines }}\n{{# def.include_create_tree }}\n\n\n/**\n * Template that synthesizes setter for Model and for ModelPath\n */\nmethod = function set(value) {\n	{{# def.initVars }}\n\n	{{# def.createTree:'set' }}\n\n	{{\n		currNode = nextNode;\n		currProp = currNode && currNode.property;\n	}}\n\n	{{ /* assign value to the last property */ }}\n	{{? currProp }}\n		wasDef = {{# def.wasDefined}};\n		{{# def.changeAccessPath }}\n\n		var old = m{{# def.currProp }};\n\n		{{ /* clone value to prevent same reference in linked models */ }}\n		m{{# def.currProp }} = cloneTree(value);\n	{{?}}\n\n	{{ /* add message related to the last property change */ }}\n	if (! wasDef)\n		{{# def.addMsg }} accessPath, type: 'added',\n				newValue: value });\n	else if (old != value)\n		{{# def.addMsg }} accessPath, type: 'changed',\n				oldValue: old, newValue: value });\n\n	{{ /* add message related to changes in (sub)properties inside removed and assigned value */ }}\n	if (! wasDef || old != value)\n		addTreeChangesMessages(messages, messagesHash,\n			accessPath, old, value); /* defined in the function that synthesizes ModelPath setter */\n\n	{{ /* post all stored messages */ }}\n	{{# def.postMessages }}\n};\n",del:"'use strict';\n/* Only use this style of comments, not \"//\" */\n\n{{# def.include_defines }}\n{{# def.include_traverse_tree }}\n\nmethod = function del() {\n	{{# def.initVars }}\n\n	{{# def.traverseTree }}\n\n	{{\n		var currNode = it.parsedPath[count];\n		var currProp = currNode.property;		\n	}}\n\n	if (! treeDoesNotExist && m && m.hasOwnProperty && {{# def.wasDefined}}) {\n		var old = m{{# def.currProp }};\n		delete m{{# def.currProp }};\n		{{# def.changeAccessPath }}\n		var msg = { path: accessPath, type: 'deleted', oldValue: old };\n		{{# def.modelPostMessageCode }}(accessPath, msg);\n\n		addTreeChangesMessages(messages, messagesHash,\n			accessPath, old, undefined); /* defined in the function that synthesizes ModelPath setter */\n\n		{{ /* post all stored messages */ }}\n		{{# def.postMessages }}\n	}\n};\n",splice:"'use strict';/* Only use this style of comments, not \"//\" */\n\n{{# def.include_defines }}\n{{# def.include_create_tree }}\n{{# def.include_traverse_tree }}\n\nmethod = function splice(spliceIndex, spliceHowMany) { /* ,... - extra arguments to splice into array */\n	{{# def.initVars }}\n\n	var argsLen = arguments.length;\n	var addItems = argsLen > 2;\n\n	if (addItems) {\n		{{ /* only create model tree if items are inserted in array */ }}\n\n		{{ /* if model is undefined it will be set to an empty array */ }}	\n		var value = [];\n		{{# def.createTree:'splice' }}\n\n		{{? nextNode }}\n			{{\n				var currNode = nextNode;\n				var currProp = currNode.property;\n				var emptyProp = '[]';\n			}}\n\n			{{# def.createTreeStep }}\n		{{?}}\n\n	} else if (spliceHowMany > 0) {\n		{{ /* if items are not inserted, only traverse model tree if items are deleted from array */ }}\n		{{? it.parsedPath.length }}\n			{{# def.traverseTree }}\n\n			{{\n				var currNode = it.parsedPath[count];\n				var currProp = currNode.property;		\n			}}\n\n			{{ /* extra brace closes 'else' in def.traverseTreeStep */ }}\n			{{# def.traverseTreeStep }} }\n		{{?}}\n	}\n\n	{{ /* splice items */ }}\n	if (addItems || (! treeDoesNotExist && m\n			&& m.length > spliceIndex ) ) {\n		var oldLength = m.length = m.length || 0;\n\n		arguments[0] = spliceIndex = normalizeSpliceIndex(spliceIndex, m.length);\n\n		{{ /* clone added arguments to prevent same references in linked models */ }}\n		if (addItems)\n			for (var i = 2; i < argsLen; i++)\n				arguments[i] = cloneTree(arguments[i]);\n\n		{{ /* actual aplice call */ }}\n		var removed = Array.prototype.splice.apply(m, arguments);\n\n		{{# def.addMsg }} accessPath, type: 'splice',\n				index: spliceIndex, removed: removed, addedCount: addItems ? argsLen - 2 : 0,\n				newValue: m });\n\n		if (removed && removed.length)\n			removed.forEach(function(item, index) {\n				var itemPath = accessPath + '[' + (spliceIndex + index) + ']';\n				{{# def.addMsg }} itemPath, type: 'removed', oldValue: item });\n\n				if (valueIsTree(item))\n					addMessages(messages, messagesHash, itemPath, item, 'removed', 'oldValue');\n			});\n\n		if (addItems)\n			for (var i = 2; i < argsLen; i++) {\n				var item = arguments[i];\n				var itemPath = accessPath + '[' + (spliceIndex + i - 2) + ']';\n				{{# def.addMsg }} itemPath, type: 'added', newValue: item });\n\n				if (valueIsTree(item))\n					addMessages(messages, messagesHash, itemPath, item, 'added', 'newValue');\n			}\n\n		{{ /* post all stored messages */ }}\n		{{# def.postMessages }}\n	}\n\n	return removed || [];\n}\n"},include_defines="'use strict';\n/* Only use this style of comments, not \"//\" */\n\n/**\n * Inserts initialization code\n */\n {{## def.initVars:\n 	var m = {{# def.modelAccessPrefix }};\n	var messages = [], messagesHash = {};\n	var accessPath = '';\n	var treeDoesNotExist;\n #}}\n\n/**\n * Inserts the beginning of function call to add message to list\n */\n{{## def.addMsg: addChangeMessage(messages, messagesHash, { path: #}}\n\n/**\n * Inserts current property/index for both normal and interpolated properties/indexes \n */\n{{## def.currProp:{{? currNode.interpolate }}[this._args[ {{= currNode.interpolate }} ]]{{??}}{{= currProp }}{{?}} #}}\n\n/**\n * Inserts condition to test whether normal/interpolated property/index exists \n */\n{{## def.wasDefined: m.hasOwnProperty(\n	{{? currNode.interpolate }}\n		this._args[ {{= currNode.interpolate }} ]\n	{{??}}\n		'{{= it.getPathNodeKey(currNode) }}'\n	{{?}}\n) #}}\n\n\n/**\n * Inserts code to update access path for current property\n * Because of the possibility of interpolated properties, it can't be calculated in template, it can only be calculated during accessor call. \n */\n{{## def.changeAccessPath:\n	accessPath += {{? currNode.interpolate }}\n		{{? currNode.syntax == 'array' }}\n			'[' + this._args[ {{= currNode.interpolate }} ] + ']';\n		{{??}}\n			'.' + this._args[ {{= currNode.interpolate }} ];\n		{{?}}\n	{{??}}\n		'{{= currProp }}';\n	{{?}}\n#}}\n\n\n/**\n * Inserts code to post stored messages\n */\n{{## def.postMessages:\n	messages.forEach(function(msg) {\n		{{# def.modelPostMessageCode }}(msg.path, msg);\n	}, this);\n#}}\n",include_create_tree="'use strict';\n/* Only use this style of comments, not \"//\" */\n\n/**\n * Inserts code to create model tree as neccessary for `set` and `splice` accessors and to add messages to send list if the tree changes.\n */\n{{## def.createTree:method:\n	var wasDef = true;\n	var old = m;\n\n	{{ var emptyProp = it.parsedPath[0] && it.parsedPath[0].empty; }}\n	{{? emptyProp }}\n		{{ /* create top level model if it was not previously defined */ }}\n		if (! m) {\n			m = {{# def.modelAccessPrefix }} = {{= emptyProp }};\n			wasDef = false;\n\n			{{# def.addMsg }} '', type: 'added',\n				  newValue: m });\n		}\n	{{??}}\n		{{? method == 'splice' }}\n			if (! m) {\n		{{?}}\n				m = {{# def.modelAccessPrefix }} = cloneTree(value);\n				wasDef = typeof old != 'undefined';\n		{{? method == 'splice' }}\n			}\n		{{?}}		\n	{{?}}\n\n\n	{{ /* create model tree if it doesn't exist */ }}\n	{{  var modelDataProperty = '';\n		var nextNode = it.parsedPath[0];\n		var count = it.parsedPath.length - 1;\n\n		for (var i = 0; i < count; i++) {\n			var currNode = nextNode;\n			var currProp = currNode.property;\n			nextNode = it.parsedPath[i + 1];\n			var emptyProp = nextNode && nextNode.empty;\n	}}\n\n		{{# def.createTreeStep }}\n\n	{{  } /* for loop */ }}\n#}}\n\n\n/**\n * Inserts code to create one step in the model tree\n */\n{{## def.createTreeStep:\n	{{# def.changeAccessPath }}\n\n	if (! {{# def.wasDefined }}) { \n		{{ /* property does not exist */ }}\n		m = m{{# def.currProp }} = {{= emptyProp }};\n\n		{{# def.addMsg }} accessPath, type: 'added', \n			  newValue: m });\n\n	} else if (typeof m{{# def.currProp }} != 'object') {\n		{{ /* property is not object */ }}\n		var old = m{{# def.currProp }};\n		m = m{{# def.currProp }} = {{= emptyProp }};\n\n		{{# def.addMsg }} accessPath, type: 'changed', \n			  oldValue: old, newValue: m });\n\n	} else {\n		{{ /* property exists, just traverse down the model tree */ }}\n		m = m{{# def.currProp }};\n	}\n#}}\n",include_traverse_tree="'use strict';\n/* Only use this style of comments, not \"//\" */\n\n/**\n * Inserts code to traverse model tree for `delete` and `splice` accessors.\n */\n{{## def.traverseTree:\n	{{ \n		var count = it.parsedPath.length-1;\n\n		for (var i = 0; i < count; i++) { \n			var currNode = it.parsedPath[i];\n			var currProp = currNode.property;\n	}}\n			{{# def.traverseTreeStep }}\n\n	{{ } /* for loop */\n\n		var i = count;\n		while (i--) { /* closing braces for else's above */\n	}}\n			}\n	{{ } /* while loop */ }}\n#}}\n\n\n/**\n * Inserts code to traverse one step in the model tree\n */\n{{## def.traverseTreeStep:\n	if (! (m && m.hasOwnProperty && {{# def.wasDefined}} ) )\n		treeDoesNotExist = true;\n	else {\n		m = m{{# def.currProp }};\n		{{# def.changeAccessPath }}\n	{{ /* brace from else is not closed on purpose - all braces are closed in while loop */ }}\n#}}\n",dotDef={include_defines:include_defines,include_create_tree:include_create_tree,include_traverse_tree:include_traverse_tree,getPathNodeKey:pathUtils.getPathNodeKey,modelAccessPrefix:"this._model._data",modelPostMessageCode:"this._model._internalMessenger.postMessage"},modelDotDef=_(dotDef).clone().extend({modelAccessPrefix:"this._data",modelPostMessageCode:"this._internalMessenger.postMessage"})._(),dotSettings=_.clone(doT.templateSettings);dotSettings.strip=!1;var synthesizers=_.mapKeys(templates,function(a){return doT.template(a,dotSettings,dotDef)}),modelSetSynthesizer=doT.template(templates.set,dotSettings,modelDotDef),modelSpliceSynthesizer=doT.template(templates.splice,dotSettings,modelDotDef),synthesizePathMethods=_.memoize(_synthesizePathMethods,void 0,1e3),normalizeSpliceIndex=modelUtils.normalizeSpliceIndex;module.exports=synthesizePathMethods,_.extend(synthesizePathMethods,{modelSet:_synthesize(modelSetSynthesizer,"",[]),modelSplice:_synthesize(modelSpliceSynthesizer,"",[])})},{"../model_utils":65,"../path_utils":67,dot:86,fs:84,"mol-proto":87}],69:[function(a,b){"use strict";b.exports={facets:a("./components/c_facets/cf_registry"),components:a("./components/c_registry")}},{"./components/c_facets/cf_registry":26,"./components/c_registry":28}],70:[function(a){"use strict";a("./components/classes/View"),a("./components/ui/Group"),a("./components/ui/Select"),a("./components/ui/Input"),a("./components/ui/Textarea"),a("./components/ui/RadioGroup"),a("./components/ui/Button"),a("./components/ui/Hyperlink"),a("./components/ui/List"),a("./components/ui/Time"),a("./components/ui/Date"),a("./components/ui/Combo")},{"./components/classes/View":30,"./components/ui/Button":37,"./components/ui/Combo":38,"./components/ui/Date":39,"./components/ui/Group":40,"./components/ui/Hyperlink":41,"./components/ui/Input":42,"./components/ui/List":43,"./components/ui/RadioGroup":44,"./components/ui/Select":45,"./components/ui/Textarea":46,"./components/ui/Time":47}],71:[function(a){"use strict";a("./components/c_facets/Dom"),a("./components/c_facets/Data"),a("./components/c_facets/Frame"),a("./components/c_facets/Events"),a("./components/c_facets/Template"),a("./components/c_facets/Container"),a("./components/c_facets/ModelFacet"),a("./components/c_facets/Drag"),a("./components/c_facets/Drop"),a("./components/c_facets/List"),a("./components/c_facets/Item"),a("./components/c_facets/Transfer")},{"./components/c_facets/Container":14,"./components/c_facets/Data":15,"./components/c_facets/Dom":16,"./components/c_facets/Drag":17,"./components/c_facets/Drop":18,"./components/c_facets/Events":19,"./components/c_facets/Frame":20,"./components/c_facets/Item":21,"./components/c_facets/List":22,"./components/c_facets/ModelFacet":23,"./components/c_facets/Template":24,"./components/c_facets/Transfer":25}],72:[function(a,b){"use strict";function c(a){this.pattern=a}function d(a){if(0==a.length)throw new Error("Must provide at least one choice to Match.OneOf");this.choices=a}function e(a){this.condition=a}function f(a){this.pattern=a}function g(a){this.pattern=a}function h(a,b){this.Superclass=a,this.matchSuperclass=b}function i(a,b){if(b!==n.Any){for(var l=0;l<o.length;++l)if(b===o[l][0]){if(typeof a===o[l][1])return;throw new n.Error("Expected "+o[l][1]+", got "+typeof a)}if(null===b){if(null===a)return;throw new n.Error("Expected null, got "+JSON.stringify(a))}if(b===n.Integer){if("number"==typeof a&&(0|a)===a)return;throw new n.Error("Expected Integer, got "+(a instanceof Object?JSON.stringify(a):a))}if(b===n.IdentifierString){if("string"==typeof a&&n.IdentifierString.test(a)&&-1==p.indexOf(u))return;throw new n.Error("Expected identifier string, got "+(a instanceof Object?JSON.stringify(a):a))}if(b===Object&&(b=n.ObjectIncluding({})),b instanceof Array){if(1!==b.length)throw Error("Bad pattern: arrays must have one type element"+JSON.stringify(b));if(!Array.isArray(a))throw new n.Error("Expected array, got "+JSON.stringify(a));return a.forEach(function(a,c){try{i(a,b[0])}catch(d){throw d instanceof n.Error&&(d.path=j(c,d.path)),d}}),void 0}if(b instanceof e){if(b.condition(a))return;throw new n.Error("Failed Match.Where validation")}if(b instanceof c&&(b=n.OneOf(void 0,b.pattern)),b instanceof d){for(var l=0;l<b.choices.length;++l)try{return i(a,b.choices[l]),void 0}catch(q){if(!(q instanceof n.Error))throw q}throw new n.Error("Failed Match.OneOf or Match.Optional validation")}if(b instanceof Function){if(a instanceof b)return;throw new n.Error("Expected "+b.constructor.name)}var r=!1;if(b instanceof f&&(r=!0,b=b.pattern),b instanceof g){var s=b.pattern,t=!0;for(var u in a)t=!1,m(a[u],s);if(t)throw new n.Error("Expected "+b.constructor.name)}else if(b instanceof h){var v=b.Superclass;if(b.matchSuperclass&&a==v)return;if(!(a.prototype instanceof v))throw new n.Error("Expected "+b.constructor.name+" of "+v.name)}else{if("object"!=typeof b)throw Error("Bad pattern: unknown pattern type");if("object"!=typeof a)throw new n.Error("Expected object, got "+typeof a);if(null===a)throw new n.Error("Expected object, got null");var w={},x={};k.eachKey(b,function(a,d){b[d]instanceof c?x[d]=b[d].pattern:w[d]=b[d]},this,!0),k.eachKey(a,function(b,c){var b=a[c];try{if(w.hasOwnProperty(c))i(b,w[c]),delete w[c];else if(x.hasOwnProperty(c))i(b,x[c]);else if(!r)throw new n.Error("Unknown key")}catch(d){throw d instanceof n.Error&&(d.path=j(c,d.path)),d}},this,!0),k.eachKey(w,function(a,b){throw new n.Error("Missing key '"+b+"'")},this,!0)}}}function j(a,b){return"number"==typeof a||a.match(/^[0-9]+$/)?a="["+a+"]":a.match(n.IdentifierString)&&-1==p.indexOf(a)||(a=JSON.stringify([a])),b&&"["!==b[0]?a+"."+b:a+b}var k=a("mol-proto"),l=a("../config"),m=function(a,b){if(l.check!==!1)try{i(a,b)}catch(c){throw c instanceof n.Error&&c.path&&(c.message+=" in field "+c.path),c}};b.exports=m;var n=m.Match={Optional:function(a){return new c(a)},OneOf:function(){return new d(arguments)},Any:["__any__"],Where:function(a){return new e(a)},ObjectIncluding:function(a){return new f(a)},Integer:["__integer__"],IdentifierString:/^[a-z_$][0-9a-z_$]*$/i,ObjectHash:function(a){return new g(a)},Subclass:function(a,b){return new h(a,b)},Error:TypeError,test:function(a,b){try{return i(a,b),!0}catch(c){if(c instanceof n.Error)return!1;throw c}}},o=[[String,"string"],[Number,"number"],[Boolean,"boolean"],[Function,"function"],[void 0,"undefined"]],p=["do","if","in","for","let","new","try","var","case","else","enum","eval","false","null","this","true","void","with","break","catch","class","const","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof"]},{"../config":48,"mol-proto":87}],73:[function(a,b){"use strict";function c(){return f+d()}var d=a("./count"),e=a("../config"),f=e.componentPrefix;b.exports=c},{"../config":48,"./count":74}],74:[function(a,b){"use strict";function c(){var a=Date.now();return f=""+a,d==a?(e=""===e?0:e+1,f+="_"+e):(d=a,e=""),f}var d=Date.now(),e="",f=""+d;c.get=function(){return f},b.exports=c},{}],75:[function(a,b){"use strict";function c(a){return d(a.childNodes,Node.ELEMENT_NODE)}function d(a,b){return _.filter(a,function(a){return a.nodeType==b})}function e(a){for(;a;){if(a.nodeType==Node.ELEMENT_NODE)return a;a=a.parentNode}return null}function f(a){var b=document.createRange();b.selectNodeContents(a);var c=window.getSelection();c.removeAllRanges(),c.addRange(b)}function g(a,b){var c=document.createRange();c.setStart(a,b);var d=window.getSelection();d.removeAllRanges(),d.addRange(c)}function h(a,b,c,d){var e=document.createRange();e.setStart(a,b),e.setEnd(c,d);var f=window.getSelection();f.removeAllRanges(),f.addRange(e)}function i(a){var b,c;for(b=a.offsetTop,c=a.offsetLeft,a=a.offsetParent;null!=a;)b+=a.offsetTop,c+=a.offsetLeft,a=a.offsetParent;return{topOffset:b,leftOffset:c}}function j(a){var b=a.parentNode;b&&b.removeChild(a)}function k(a){if(a.nodeType==Node.TEXT_NODE)return a;var b=document.createTreeWalker(a,NodeFilter.SHOW_TEXT);return b.firstChild()}function l(a){if(a.nodeType==Node.TEXT_NODE)return a;var b=document.createTreeWalker(a,NodeFilter.SHOW_TEXT);return b.lastChild()}function m(a){var b=a.parentNode;if(b){var c=document.createDocumentFragment(),d=_.slice(a.childNodes);d.forEach(c.appendChild,c),b.replaceChild(c,a)}}b.exports={children:c,filterNodeListByType:d,containingElement:e,selectElementContents:f,getElementOffset:i,setCaretPosition:g,setSelection:h,removeElement:j,unwrapElement:m,firstTextNode:k,lastTextNode:l}},{}],76:[function(a,b){"use strict";function c(a){var b=e.makeFunction(a,"message",'this.name = "'+a+'"; 			this.message = message || "There was an  error";');return e.makeSubclass(b,Error),b}function d(){throw new g.AbstractClass("calling the method of an absctract class")}var e=a("mol-proto"),f=["AbstractClass","Mixin","Messenger","Component","Attribute","Binder","Loader","MailMessageSource","Facet","Scope","Model","DomFacet","EditableFacet","List","Connector","Registry","FrameMessageSource","Angular"],g={toBeImplemented:d,createClass:c};f.forEach(function(a){g[a]=c(a+"Error")}),b.exports=g},{"mol-proto":87}],77:[function(a,b){"use strict";var c={logger:a("./logger"),request:a("./request"),promise:a("./promise"),check:a("./check"),error:a("./error"),count:a("./count"),componentName:a("./component_name"),dom:a("./dom"),selection:a("./selection"),jsonParse:a("./json_parse")};b.exports=c},{"./check":72,"./component_name":73,"./count":74,"./dom":75,"./error":76,"./json_parse":78,"./logger":79,"./promise":81,"./request":82,"./selection":83}],78:[function(a,b){"use strict";function c(a){try{return JSON.parse(a)}catch(b){}}b.exports=c},{}],79:[function(a,b){"use strict";var c=a("./logger_class"),d=new c({level:3});b.exports=d},{"./logger_class":80}],80:[function(a,b){"use strict";function c(a){return a.length<f?a+new Array(f-a.length+1).join(" "):a}var d=a("mol-proto"),e=["error","warn","info","debug"],f=Math.max.apply(Math,e.map(function(a){return a.length})),g=[31,33,36,90],h=function(a){a=a||{},this.colors=a.colors,this.level=a.level||3,this.enabled=a.enabled||!0,this.logPrefix=a.logPrefix||"",this.logPrefixColor=a.logPrefixColor};h.prototype.log=function(a){var b=e.indexOf(a);return b>this.level||!this.enabled?this:(console.log.apply(console,[this.logPrefixColor?"   ["+this.logPrefixColor+"m"+this.logPrefix+"  -[39m":this.logPrefix,this.colors?" ["+g[b]+"m"+c(a)+" -[39m":a+":"].concat(d.toArray(arguments).slice(1))),this)},e.forEach(function(a){h.prototype[a]=function(){this.log.apply(this,[a].concat(d.toArray(arguments)))}}),b.exports=h},{"mol-proto":87}],81:[function(a,b){"use strict";function c(a){this.data=void 0,this.dataError=void 0,this.dataSource=a,this._thenQueue=[],this._errorQueue=[]}function d(a){return this.dataError||(this.data?h.defer(a,null,this.data,this.dataSource):this._thenQueue.push(a)),this}function e(a){return this.dataError?h.defer(a,this.dataError,this.data,this.dataSource):this.data||this._errorQueue.push(a),this}function f(a,b){this.dataError=a,this.data=b;var c=a?this._errorQueue:this._thenQueue,d=this;h.defer(function(){c.forEach(function(c){c(a,b,d.request)}),d._errorQueue.length=0,d._thenQueue.length=0})}function g(a){var b=new c(this);return this.then(function(c,d){try{var e=a(d);b.setData(c,e)}catch(f){b.setData(f)}}).error(function(a,c){b.setData(a,c)}),b}var h=a("mol-proto");b.exports=c,h.extendProto(c,{then:d,error:e,setData:f,transform:g})},{"mol-proto":87}],82:[function(a,b){"use strict";function c(a,b,c){var d=new XMLHttpRequest;d.open(b.method,a,!0),d.setRequestHeader("Content-Type",b.contentType||"application/json;charset=UTF-8");var e=new h(d);return d.onreadystatechange=function(){4==d.readyState&&"OK"==d.statusText.toUpperCase()&&(c&&c(null,d.responseText,d),e.setData(null,d.responseText))},d.send(JSON.stringify(b.data)),e}function d(a,b){return c(a,{method:"GET"},b)}function e(a,b,d){return c(a,{method:"POST",data:b},d)}function f(a,b){var d=c(a,{method:"GET"}),e=d.transform(JSON.parse.bind(JSON));return b&&e.then(b).error(b),e}var g=a("mol-proto"),h=a("./promise");b.exports=c;g.extend(c,{get:d,post:e,json:f})},{"./promise":81,"mol-proto":87}],83:[function(a,b){"use strict";function c(a){return!this instanceof c?new c(a):(this.window=a||window,this.init(),void 0)}function d(){this.selection=this.window.getSelection(),this.selection.rangeCount&&(this.range=this.selection.getRangeAt(0)),this.isCollapsed=this.selection.isCollapsed}function e(){return this.range?(this._text||(this._text=this.range.toString()),this._text):void 0}function f(){return this.range?(this._textNodes||(this._textNodes=g.call(this)),this._textNodes):void 0}function g(){var a=[];if(this.isCollapsed)return a;for(var b=this.range.startContainer,c=this.range.endContainer,d=this.range.commonAncestorContainer,e=this.window.document.createTreeWalker(d,NodeFilter.SHOW_TEXT),f=e.currentNode=b;f&&(!g||c.contains(f));){a.push(f);var g=g||c.contains(f);f=e.nextNode()}return a}function h(a,b){return this.range?("undefined"==typeof this[a]&&(this[a]=n(this.range[b])),this[a]):void 0}function i(a,b){return this.range?("undefined"==typeof this[a]&&(this[a]=p.getContainingComponent(this[b]())),this[a]):void 0}function j(){if(this._containedComponents)return this._containedComponents;var a=this._containedComponents=[];if(this.isCollapsed||!this.range)return a;var b=this.range.startContainer,c=this.range.endContainer,d=this.range.commonAncestorContainer;if(b!=c){var e=this.window.document.createTreeWalker(d,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT);e.currentNode=b;for(var f=e.nextNode();f&&f!=c;){if(f.nodeType!=Node.TEXT_NODE){var g=p.getComponent(f);g&&!g.el.contains(c)&&a.push(g)}f=e.nextNode()}}return a}function k(a,b){if(!this.isCollapsed&&this.range){var c=this.containedComponents();c.forEach(a,b)}}function l(){if(!this.isCollapsed&&this.range){this.eachContainedComponent(function(a){a.remove()});var a=this.range.startContainer,b=this.range.startOffset;this.range.deleteContents(),a.textContent=a.textContent.trimRight();var c=b>a.length?a.length:b;o(a,c),a.parentNode.normalize()}}var m=a("./dom"),n=m.containingElement,o=m.setCaretPosition,p=a("../components/c_class"),q=a("mol-proto");b.exports=c;var r=q.partial(h,"_startElement","startContainer"),s=q.partial(h,"_endElement","endContainer"),t=q.partial(h,"_containingElement","commonAncestorContainer"),u=q.partial(i,"_startComponent","startElement"),v=q.partial(i,"_endComponent","endElement"),w=q.partial(i,"_containingComponent","containingElement");q.extendProto(c,{init:d,text:e,textNodes:f,startElement:r,endElement:s,containingElement:t,startComponent:u,endComponent:v,containingComponent:w,containedComponents:j,eachContainedComponent:k,del:l})},{"../components/c_class":12,"./dom":75,"mol-proto":87}],84:[function(){},{}],85:[function(a,b){!function(){"use strict";function a(){var a={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},b=/&(?!#?\w+;)|<|>|"|'|\//g;return function(){return this?this.replace(b,function(b){return a[b]||b}):this}}function c(a,b,d){return("string"==typeof b?b:b.toString()).replace(a.define||g,function(b,c,e,f){return 0===c.indexOf("def.")&&(c=c.substring(4)),c in d||(":"===e?(a.defineParams&&f.replace(a.defineParams,function(a,b,e){d[c]={arg:b,text:e}}),c in d||(d[c]=f)):new Function("def","def['"+c+"']="+f)(d)),""}).replace(a.use||g,function(b,e){a.useParams&&(e=e.replace(a.useParams,function(a,b,c,e){if(d[c]&&d[c].arg&&e){var f=(c+":"+e).replace(/'|\\/g,"_");return d.__exp=d.__exp||{},d.__exp[f]=d[c].text.replace(new RegExp("(^|[^\\w$])"+d[c].arg+"([^\\w$])","g"),"$1"+e+"$2"),b+"def.__exp['"+f+"']"}}));var f=new Function("def","return "+e)(d);return f?c(a,f,d):f})}function d(a){return a.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var e={version:"1.0.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1},template:void 0,compile:void 0};"undefined"!=typeof b&&b.exports?b.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):(function(){return this||(0,eval)("this")}()).doT=e,String.prototype.encodeHTML=a();var f={append:{start:"'+(",end:")+'",endencode:"||'').toString().encodeHTML()+'"},split:{start:"';out+=(",end:");out+='",endencode:"||'').toString().encodeHTML();out+='"}},g=/$^/;e.template=function(b,h,i){h=h||e.templateSettings;var j,k,l=h.append?f.append:f.split,m=0,n=h.use||h.define?c(h,b,i||{}):b;n=("var out='"+(h.strip?n.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):n).replace(/'|\\/g,"\\$&").replace(h.interpolate||g,function(a,b){return l.start+d(b)+l.end}).replace(h.encode||g,function(a,b){return j=!0,l.start+d(b)+l.endencode}).replace(h.conditional||g,function(a,b,c){return b?c?"';}else if("+d(c)+"){out+='":"';}else{out+='":c?"';if("+d(c)+"){out+='":"';}out+='"}).replace(h.iterate||g,function(a,b,c,e){return b?(m+=1,k=e||"i"+m,b=d(b),"';var arr"+m+"="+b+";if(arr"+m+"){var "+c+","+k+"=-1,l"+m+"=arr"+m+".length-1;while("+k+"<l"+m+"){"+c+"=arr"+m+"["+k+"+=1];out+='"):"';} } out+='"}).replace(h.evaluate||g,function(a,b){return"';"+d(b)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|\}|^|\{)out\+=''\+/g,"$1out+="),j&&h.selfcontained&&(n="String.prototype.encodeHTML=("+a.toString()+"());"+n);try{return new Function(h.varname,n)}catch(o){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+n),o}},e.compile=function(a,b){return e.template(a,null,b)}}()},{}],86:[function(a,b){function c(a){this.__path=a.path||"./","/"!==this.__path[this.__path.length-1]&&(this.__path+="/"),this.__destination=a.destination||this.__path,"/"!==this.__destination[this.__destination.length-1]&&(this.__destination+="/"),this.__global=a.global||"window.render",this.__rendermodule=a.rendermodule||{},this.__settings=a.templateSettings?e(a.templateSettings,e(h.templateSettings)):void 0,this.__includes={}
}function d(a){for(var b="",c=0;c<a.length;c++)b+="itself."+a[c]+"="+a[c]+";";return b}function e(a,b){b=b||{};for(var c in a)b[c]=a[c];return b}function f(a){var b=g.readFileSync(a);return b?b.toString():(console.log("problems with "+a),void 0)}var g=a("fs"),h=b.exports=a("./doT");h.process=function(a){return new c(a).compileAll()},c.prototype.compileToFile=function(a,b,c){c=c||{};var f,i=a.substring(a.lastIndexOf("/")+1,a.lastIndexOf(".")),j=e(this.__includes,e(c)),k=this.__settings||h.templateSettings,l=e(k),m=h.template(b,k,j),n=[],o="";for(var p in j)j[p]!==c[p]&&j[p]!==this.__includes[p]&&(f=void 0,"string"==typeof j[p]?f=h.template(j[p],k,j):"function"==typeof j[p]?f=j[p]:j[p].arg&&(l.varname=j[p].arg,f=h.template(j[p].text,l,j)),f&&(o+=f.toString().replace("anonymous",p),n.push(p)));o+=m.toString().replace("anonymous",i),g.writeFileSync(a,"(function(){"+o+"var itself="+i+";"+d(n)+"if(typeof module!=='undefined' && module.exports) module.exports=itself;else if(typeof define==='function')define(function(){return itself;});else {"+this.__global+"="+this.__global+"||{};"+this.__global+"['"+i+"']=itself;}}());")},c.prototype.compilePath=function(a){var b=f(a);return b?h.template(b,this.__settings||h.templateSettings,e(this.__includes)):void 0},c.prototype.compileAll=function(){console.log("Compiling all doT templates...");var a,b,c,d=this.__path,e=g.readdirSync(d);for(a=0,b=e.length;b>a;a++)c=e[a],/\.def(\.dot|\.jst)?$/.test(c)&&(console.log("Loaded def "+c),this.__includes[c.substring(0,c.indexOf("."))]=f(d+c));for(a=0,b=e.length;b>a;a++)c=e[a],/\.dot(\.def|\.jst)?$/.test(c)&&(console.log("Compiling "+c+" to function"),this.__rendermodule[c.substring(0,c.indexOf("."))]=this.compilePath(d+c)),/\.jst(\.dot|\.def)?$/.test(c)&&(console.log("Compiling "+c+" to file"),this.compileToFile(this.__destination+c.substring(0,c.indexOf("."))+".js",f(d+c)));return this.__rendermodule}},{"./doT":85,fs:84}],87:[function(a,b){"use strict";function c(a){var b=Object.create(c.prototype);return b.self=a,b}function d(){return this.self}var e=a("./utils"),f=a("./proto_prototype"),g=a("./proto_object"),h=a("./proto_array"),i=a("./proto_function"),j=a("./proto_string"),k={};g.extend.call(k,g),k.extend.call(k,f),k.extend.call(k,h),k.extend.call(k,j),k.extend.call(k,i),k.defineProperty(c,"__",k),k.extendProto.call(c,{_:d}),k.extend.call(c,g._constants);var l=k.mapKeys.call(k,e.makeProtoFunction,!0);k.extend.call(c,l);var m=k.mapKeys.call(k,e.makeProtoInstanceMethod,!0);k.extendProto.call(c,m),"object"==typeof window&&(window._&&(c.underscore=window._),window._=c),"object"==typeof b&&b.exports&&(b.exports=c)},{"./proto_array":88,"./proto_function":89,"./proto_object":90,"./proto_prototype":91,"./proto_string":92,"./utils":93}],88:[function(a,b){"use strict";function c(a){if(!a.length)return this;var b=[this.length,0].concat(a);return j.splice.apply(this,b),this}function d(a){if(!a.length)return this;var b=[0,0].concat(a);return j.splice.apply(this,b),this}function e(){return j.slice.call(this)}function f(a){var b={},c=Array.isArray(a);return j.forEach.call(this,function(d,e){b[d]=c?a[e]:a}),b}function g(a,b){var c={};return Array.prototype.forEach.call(this,function(d,e){c[d]=a.call(b,d,e,this)},this),c}var h=a("./proto_object"),i=a("./utils"),j=b.exports={appendArray:c,prependArray:d,toArray:e,object:f,mapToObject:g},k=["join","pop","push","concat","reverse","shift","unshift","slice","splice","sort","filter","forEach","some","every","map","indexOf","lastIndexOf","reduce","reduceRight"],l=g.call(k,function(a){return Array.prototype[a]});h.extend.call(j,l),j.find=Array.prototype.find||i.makeFindMethod(j.forEach,"value"),j.findIndex=Array.prototype.findIndex||i.makeFindMethod(j.forEach,"index")},{"./proto_object":90,"./utils":93}],89:[function(require,module,exports){"use strict";function makeFunction(arg1,arg2,funcBody){for(var name=this,count=arguments.length-1,funcBody=arguments[count],func,code="",i=0;count>i;i++)code+=", "+arguments[i];return code=["func = function ",name,"(",code.slice(2),") {\n",funcBody,"\n}"].join(""),eval(code),func}function partial(){var a=this,b=slice.call(arguments);return function(){return a.apply(this,b.concat(slice.call(arguments)))}}function partialRight(){var a=this,b=slice.call(arguments);return function(){return a.apply(this,slice.call(arguments).concat(b))}}function memoize(a,b){var c=this,d={},e=[];return b=b||1e3,function(){var f=a?a.apply(this,arguments):arguments[0];if(d.hasOwnProperty(f))return d[f];var g=d[f]=c.apply(this,arguments);return e.push(f),e.length>b&&delete d[e.shift()],g}}function delay(a){var b=slice.call(arguments,1);return _delay(this,a,b)}function defer(){return _delay(this,1,arguments)}function _delay(a,b,c){return setTimeout(a.apply.bind(a,null,c),b)}function debounce(a,b){var c,d,e,f,g,h=this;return function(){function i(){var j=Date.now()-f;a>j?c=setTimeout(i,a-j):(c=null,b||(g=h.apply(e,d)))}e=this,d=arguments,f=Date.now();var j=b&&!c;return c||(c=setTimeout(i,a)),j&&(g=h.apply(e,d)),g}}var functionMethods=module.exports={makeFunction:makeFunction,partial:partial,partialRight:partialRight,memoize:memoize,delay:delay,defer:defer,debounce:debounce},slice=Array.prototype.slice},{}],90:[function(a,b){"use strict";function c(a,b){var c={};return m.call(a,function(b,d){c[d]=Object.getOwnPropertyDescriptor(a,d)},this,b),Object.defineProperties(this,c),this}function d(){var a=Object.create(this.constructor.prototype);return c.call(a,this),a}function e(a,b,c){return Object.defineProperty(this,a,f(b,c)),this}function f(a,b){var d={value:a};return b&&c.call(d,{enumerable:!!(b&w.ENUMERABLE),configurable:!!(b&w.CONFIGURABLE),writable:!!(b&w.WRITABLE)}),d}function g(a,b){var c=n.call(a,function(a){return f(a,b)},!0);return Object.defineProperties(this,c),this}function h(a,b){return i(this,a,b,[])}function i(a,b,c,d){return d.indexOf(b)>=0?void 0:(d.push(b),m.call(b,function(e,f){var g=Object.getOwnPropertyDescriptor(b,f);"object"==typeof e?(a.hasOwnProperty(f)&&"object"==typeof a[f]||(a[f]={}),i(a[f],e,c,d)):Object.defineProperty(a,f,g)},this,c),a)}function j(){return Object.getOwnPropertyNames(this)}function k(a,b){for(var c=b?Object.keys(this):j.call(this),d=0;d<c.length;d++)if(a===this[c[d]])return c[d];return void 0}function l(a,b){var c=b?Object.keys(this):j.call(this),d=c.filter(function(b){return a===this[b]},this);return d}function m(a,b,c){var d=c?Object.keys(this):j.call(this);return d.forEach(function(c){a.call(b,this[c],c,this)},this),this}function n(a,b,c){function d(b,c,d){e[c]=Object.getOwnPropertyDescriptor(d,c),e[c].value=a.call(this,b,c,d)}var e={};return m.call(this,d,b,c),Object.create(this.constructor.prototype,e)}function o(a,b,c,d){var e=d?Object.keys(this):j.call(this),f=b;return e.forEach(function(b){f=a.call(c,f,this[b],b,this)},this),f}function p(a,b,c){function d(b,c,d){a.call(this,b,c,d)&&(e[c]=Object.getOwnPropertyDescriptor(d,c))}var e={};return m.call(this,d,b,c),Object.create(this.constructor.prototype,e)}function q(a,b,c){function d(b,c,d){if(a.call(this,b,c,d))throw x}try{m.call(this,d,b,c)}catch(e){if(e===x)return!0;throw e}return!1}function r(a,b,c){function d(b,c,d){if(!a.call(this,b,c,d))throw y}try{m.call(this,d,b,c)}catch(e){if(e===y)return!1;throw e}return!0}function s(){var a=A.apply(z,arguments),b=Object.create(this.constructor.prototype);return a.forEach(function(a){this.hasOwnProperty(a)&&(b[a]=this[a])},this),b}function t(){var a=A.apply(z,arguments),b=d.call(this);return a.forEach(function(a){delete b[a]},this),b}var u=a("./utils"),v=b.exports={extend:c,clone:d,defineProperty:e,defineProperties:g,deepExtend:h,allKeys:j,keyOf:k,allKeysOf:l,eachKey:m,mapKeys:n,reduceKeys:o,filterKeys:p,someKey:q,everyKey:r,pickKeys:s,omitKeys:t},w={ENUMERABLE:1,ENUM:1,CONFIGURABLE:2,CONF:2,WRITABLE:4,WRIT:4};e.call(v,"_constants",w),v.findValue=u.makeFindMethod(m,"value"),v.findKey=u.makeFindMethod(m,"key");var x={},y={},z=Array.prototype,A=z.concat},{"./utils":93}],91:[function(require,module,exports){"use strict";function extendProto(a){var b={};return __.eachKey.call(a,function(a,c){b[c]={enumerable:!1,configurable:!1,writable:!1,value:a}}),Object.defineProperties(this.prototype,b),this}function createSubclass(name,applyConstructor){var thisClass=this,subclass;name=name||"";var constructorCode=applyConstructor===!1?"":"thisClass.apply(this, arguments);";return eval("subclass = function "+name+"(){ "+constructorCode+" }"),makeSubclass.call(subclass,thisClass),__.extend.call(subclass,thisClass,!0),subclass}function makeSubclass(a){return this.prototype=Object.create(a.prototype),extendProto.call(this,{constructor:this}),this}var prototypeMethods=module.exports={extendProto:extendProto,createSubclass:createSubclass,makeSubclass:makeSubclass},__=require("./proto_object");__.extend.call(__,require("./proto_function"))},{"./proto_function":89,"./proto_object":90}],92:[function(a,b){"use strict";function c(){return this[0].toUpperCase()+this.slice(1)}function d(){return this[0].toLowerCase()+this.slice(1)}b.exports={firstUpperCase:c,firstLowerCase:d}},{}],93:[function(a,b){"use strict";function c(a){return function(){return this.self=a.apply(this.self,arguments),this}}function d(a){return function(){return a.call.apply(a,arguments)}}function e(a,b){var c="value"==b?0:1;return function(b,d){function e(a,d,e){var h;try{h=b.call(this,a,d,e)}catch(i){throw g=i,f}if(h)throw arguments[c]}var g;try{a.call(this,e,d)}catch(h){if(h===f)throw g;return h}return c&&a==Array.prototype.forEach?-1:void 0}}var f=(b.exports={makeProtoInstanceMethod:c,makeProtoFunction:d,makeFindMethod:e},new Error)},{}]},{},[58]);
>>>>>>> [Evgeny, Jason] Fixing MessengerRegexpAPI, problem with duplicate message dispatch in the presence of /.*/ subscription, not fixed, related to #26
//# sourceMappingURL=milo.min.js.map