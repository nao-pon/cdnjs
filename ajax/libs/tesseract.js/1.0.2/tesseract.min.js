!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Tesseract=e()}}(function(){return function e(t,n,r){function o(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};t[s][0].call(l.exports,function(e){var n=t[s][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function o(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==r.join(""))return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(e){o[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},o)).join("")}catch(e){return!1}}var i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=o()?Object.assign:function(e,t){for(var n,o,a=r(e),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var c in n)i.call(n,c)&&(a[c]=n[c]);if(Object.getOwnPropertySymbols){o=Object.getOwnPropertySymbols(n);for(var l=0;l<o.length;l++)s.call(n,o[l])&&(a[o[l]]=n[o[l]])}}return a}},{}],2:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(h===setTimeout)return setTimeout(e,0);if((h===r||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}function s(e){if(f===clearTimeout)return clearTimeout(e);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){w&&d&&(w=!1,d.length?g=d.concat(g):v=-1,g.length&&u())}function u(){if(!w){var e=i(a);w=!0;for(var t=g.length;t;){for(d=g,g=[];++v<t;)d&&d[v].run();v=-1,t=g.length}d=null,w=!1,s(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var h,f,p=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:r}catch(e){h=r}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var d,g=[],w=!1,v=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new c(e,t)),1!==g.length||w||i(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],3:[function(e,t,n){(function(e){"use strict";function t(e,n){if("string"==typeof e){if(/^\#/.test(e))return t(document.querySelector(e),n);if(/(blob|data)\:/.test(e)){var r=new Image;return r.src=e,void(r.onload=function(e){return t(r,n)})}var o=new XMLHttpRequest;return o.open("GET",e,!0),o.responseType="blob",o.onload=function(e){return t(o.response,n)},o.onerror=function(r){/^https?:\/\//.test(e)&&!/^https:\/\/crossorigin.me/.test(e)&&(console.debug("Attempting to load image with CORS proxy"),t("https://crossorigin.me/"+e,n))},void o.send(null)}if(e instanceof File){var i=new FileReader;return i.onload=function(e){return t(i.result,n)},void i.readAsDataURL(e)}if(e instanceof Blob)return t(URL.createObjectURL(e),n);if(e.getContext)return t(e.getContext("2d"),n);if("IMG"==e.tagName||"VIDEO"==e.tagName){var s=document.createElement("canvas");s.width=e.naturalWidth||e.videoWidth,s.height=e.naturalHeight||e.videoHeight;var a=s.getContext("2d");return a.drawImage(e,0,0),t(a,n)}if(e.getImageData){var u=e.getImageData(0,0,e.canvas.width,e.canvas.height);return t(u,n)}return n(e)}var r={workerPath:"https://cdn.rawgit.com/naptha/tesseract.js/0.2.0/dist/worker.js",corePath:"https://cdn.rawgit.com/naptha/tesseract.js-core/0.1.0/index.js",langPath:"https://cdn.rawgit.com/naptha/tessdata/gh-pages/3.02/"};"development"===e.env.NODE_ENV&&(console.debug("Using Development Configuration"),r.workerPath=location.protocol+"//"+location.host+"/dist/worker.dev.js"),n.defaultOptions=r,n.spawnWorker=function(e,t){if(window.Blob&&window.URL)var n=new Blob(['importScripts("'+t.workerPath+'");']),r=new Worker(window.URL.createObjectURL(n));else var r=new Worker(t.workerPath);return r.onmessage=function(t){var n=t.data;e._recv(n)},r},n.terminateWorker=function(e){e.worker.terminate()},n.sendPacket=function(e,n){t(n.payload.image,function(t){n.payload.image=t,e.worker.postMessage(n)})}}).call(this,e("_process"))},{_process:2}],4:[function(e,t,n){"use strict";t.exports=function(e){return e.paragraphs=[],e.lines=[],e.words=[],e.symbols=[],e.blocks.forEach(function(t){t.page=e,t.lines=[],t.words=[],t.symbols=[],t.paragraphs.forEach(function(n){n.block=t,n.page=e,n.words=[],n.symbols=[],n.lines.forEach(function(r){r.paragraph=n,r.block=t,r.page=e,r.symbols=[],r.words.forEach(function(o){o.line=r,o.paragraph=n,o.block=t,o.page=e,o.symbols.forEach(function(i){i.word=o,i.line=r,i.paragraph=n,i.block=t,i.page=e,i.line.symbols.push(i),i.paragraph.symbols.push(i),i.block.symbols.push(i),i.page.symbols.push(i)}),o.paragraph.words.push(o),o.block.words.push(o),o.page.words.push(o)}),r.block.lines.push(r),r.page.lines.push(r)}),n.page.paragraphs.push(n)})}),e}},{}],5:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){e=e||{};var t=new c(u({},s.defaultOptions,e));return t.create=o,t}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./node/index.js"),a=e("./common/circularize.js"),u=e("object-assign"),c=function(){function e(t){r(this,e),this.worker=null,this.workerOptions=t,this._currentJob=null,this._queue=[]}return i(e,[{key:"recognize",value:function(e,t){var n=this;return this._delay(function(r){"string"==typeof t?t={lang:t}:(t=t||{},t.lang=t.lang||"eng"),r._send("recognize",{image:e,options:t,workerOptions:n.workerOptions})})}},{key:"detect",value:function(e,t){var n=this;return t=t||{},this._delay(function(r){r._send("detect",{image:e,options:t,workerOptions:n.workerOptions})})}},{key:"terminate",value:function(){this.worker&&s.terminateWorker(this),this.worker=null}},{key:"_delay",value:function(e){var t=this;this.worker||(this.worker=s.spawnWorker(this,this.workerOptions));var n=new h(this);return this._queue.push(function(r){t._queue.shift(),t._currentJob=n,e(n)}),this._currentJob||this._dequeue(),n}},{key:"_dequeue",value:function(){this._currentJob=null,this._queue.length>0&&this._queue[0]()}},{key:"_recv",value:function(e){"resolve"===e.status&&"recognize"===e.action&&(e.data=a(e.data)),this._currentJob.id===e.jobId?this._currentJob._handle(e):console.warn("Job ID "+e.jobId+" not known.")}}]),e}(),l=0,h=function(){function e(t){r(this,e),this.id="Job-"+ ++l+"-"+Math.random().toString(16).slice(3,8),this._instance=t,this._resolve=[],this._reject=[],this._progress=[]}return i(e,[{key:"then",value:function(e,t){return this._resolve.push?this._resolve.push(e):e(this._resolve),t&&this.catch(t),this}},{key:"catch",value:function(e){return this._reject.push?this._reject.push(e):e(this._reject),this}},{key:"progress",value:function(e){return this._progress.push(e),this}},{key:"_send",value:function(e,t){s.sendPacket(this._instance,{jobId:this.id,action:e,payload:t})}},{key:"_handle",value:function(e){var t=e.data;"resolve"===e.status?(0===this._resolve.length&&console.debug(t),this._resolve.forEach(function(e){var n=e(t);n&&"function"==typeof n.then&&console.warn("TesseractJob instances do not chain like ES6 Promises. To convert it into a real promise, use Promise.resolve.")}),this._resolve=t,this._instance._dequeue()):"reject"===e.status?(0===this._reject.length&&console.error(t),this._reject.forEach(function(e){return e(t)}),this._reject=t,this._instance._dequeue()):"progress"===e.status?this._progress.forEach(function(e){return e(t)}):console.warn("Message type unknown",e.status)}}]),e}(),f=o();t.exports=f},{"./common/circularize.js":4,"./node/index.js":3,"object-assign":1}]},{},[5])(5)});
//# sourceMappingURL=tesseract.min.js.map