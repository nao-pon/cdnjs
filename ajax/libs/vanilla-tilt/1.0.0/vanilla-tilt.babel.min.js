/**
 * Created by micku7zu on 1/27/2017.
 * Original idea: http://gijsroge.github.io/tilt.js/
 * MIT License.
 * Version 1.0.0
 */
"use strict";var _createClass=function(){function a(b,c){for(var f,d=0;d<c.length;d++)f=c[d],f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(b,f.key,f)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(function(){var b=function(){function c(d){var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck(this,c),!(d instanceof Node))throw"Can't initialize VanillaTilt because "+d+" is not a Node.";this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.updateBind=this.update.bind(this),this.element=d,this.settings=this.extendSettings(f),this.addEventListeners()}return _createClass(c,[{key:"addEventListeners",value:function addEventListeners(){this.onMouseEnterBind=this.onMouseEnter.bind(this),this.onMouseMoveBind=this.onMouseMove.bind(this),this.onMouseLeaveBind=this.onMouseLeave.bind(this),this.element.addEventListener("mouseenter",this.onMouseEnterBind),this.element.addEventListener("mousemove",this.onMouseMoveBind),this.element.addEventListener("mouseleave",this.onMouseLeaveBind)}},{key:"removeEventListeners",value:function removeEventListeners(){this.element.removeEventListener("mouseenter",this.onMouseEnterBind),this.element.removeEventListener("mousemove",this.onMouseMoveBind),this.element.removeEventListener("mouseleave",this.onMouseLeaveBind)}},{key:"destroy",value:function destroy(){this.removeEventListeners(),this.element.vanillaTilt=null,this.element=null}},{key:"onMouseEnter",value:function onMouseEnter(){this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=this.element.offsetLeft,this.top=this.element.offsetTop,this.element.style.willChange="transform",this.setTransition()}},{key:"onMouseMove",value:function onMouseMove(d){null!==this.updateCall&&cancelAnimationFrame(this.updateCall),this.event=d,this.updateCall=requestAnimationFrame(this.updateBind)}},{key:"onMouseLeave",value:function onMouseLeave(){this.setTransition(),this.settings.reset&&this.reset()}},{key:"reset",value:function reset(){var d=this;requestAnimationFrame(function(){d.event={pageX:d.left+d.width/2,pageY:d.top+d.height/2},d.element.style.transform="perspective("+d.settings.perspective+"px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)"})}},{key:"getValues",value:function getValues(){var d=(this.event.pageX-this.left)/this.width,f=(this.event.pageY-this.top)/this.height;d=Math.min(Math.max(d,0),1),f=Math.min(Math.max(f,0),1);var g=(this.settings.max/2-d*this.settings.max).toFixed(2),h=(f*this.settings.max-this.settings.max/2).toFixed(2);return{tiltX:g,tiltY:h,percentageX:100*d,percentageY:100*f}}},{key:"update",value:function update(){var d=this.getValues();this.element.style.transform="perspective("+this.settings.perspective+"px) rotateX("+("x"===this.settings.axis?0:d.tiltY)+"deg) rotateY("+("y"===this.settings.axis?0:d.tiltX)+"deg) scale3d("+this.settings.scale+", "+this.settings.scale+", "+this.settings.scale+")",this.element.dispatchEvent(new CustomEvent("tiltChange",{detail:d})),this.updateCall=null}},{key:"setTransition",value:function setTransition(){var d=this;clearTimeout(this.transitionTimeout),this.element.style.transition=this.settings.speed+"ms "+this.settings.easing,this.transitionTimeout=setTimeout(function(){return d.element.style.transition=""},this.settings.speed)}},{key:"extendSettings",value:function extendSettings(d){var g={max:20,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1",speed:"300",transition:!0,axis:null,reset:!0},h={};for(var f in g)if(f in d)h[f]=d[f];else if(this.element.hasAttribute("data-tilt-"+f)){var j=this.element.getAttribute("data-tilt-"+f);try{h[f]=JSON.parse(j)}catch(k){h[f]=j}}else h[f]=g[f];return h}}],[{key:"init",value:function init(d,f){d instanceof Node&&(d=[d]),d instanceof NodeList&&(d=[].slice.call(d)),d instanceof Array&&d.forEach(function(g){g.vanillaTilt=new c(g,f)})}}]),c}();window.VanillaTilt=b,b.init(document.querySelectorAll("[data-tilt]"))})();